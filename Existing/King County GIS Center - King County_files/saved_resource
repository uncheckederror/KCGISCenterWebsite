// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.41/esri/copyright.txt for details.
/*
	Copyright (c) 2004-2016, The JS Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

//>>built
(function(b,A){var q,x=function(){return"undefined"!==typeof u&&"function"!==typeof u?u:"undefined"!==typeof window?window:"undefined"!==typeof self?self:this}(),r=function(){},m=function(g){for(var G in g)return 0;return 1},p={}.toString,t=function(g){return"[object Function]"==p.call(g)},h=function(g){return"[object String]"==p.call(g)},c=function(g){return"[object Array]"==p.call(g)},a=function(g,G){if(g)for(var N=0;N<g.length;)G(g[N++])},f=function(g,G){for(var N in G)g[N]=G[N];return g},e=function(g,
G){return f(Error(g),{src:"dojoLoader",info:G})},k=1,l=function(){return"_"+k++},d=function(g,G,N){return sa(g,G,N,0,d)},u=x,y=u.document,n=y&&y.createElement("DiV"),v=d.has=function(g){return t(D[g])?D[g]=D[g](u,y,n):D[g]},D=v.cache=A.hasCache;t(b)&&(b=b(x));v.add=function(g,G,N,P){(void 0===D[g]||P)&&(D[g]=G);return N&&v(g)};v.add("host-webworker","undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);v("host-webworker")&&(f(A.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,
"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1,"dojo-guarantee-console":0}),A.loaderPatch={injectUrl:function(g,G){try{importScripts(g),G()}catch(N){console.info("failed to load resource ("+g+")"),console.error(N)}}});for(var O in b.has)v.add(O,b.has[O],0,1);var z=0,w=[],E=0,C=r,H=r;d.isXdUrl=r;d.initSyncLoader=function(g,G,N){E||(E=g,C=G,H=N);return{sync:"sync",requested:1,arrived:2,nonmodule:3,executing:4,executed:5,syncExecStack:w,modules:oa,execQ:ja,getModule:Ca,injectModule:Sa,setArrived:za,
signal:U,finishExec:La,execModule:Ma,dojoRequirePlugin:E,getLegacyMode:function(){return z},guardCheckComplete:Na}};var B=location.protocol,K=location.host;d.isXdUrl=function(g){return/^\./.test(g)?!1:/^\/\//.test(g)?!0:(g=g.match(/^([^\/:]+:)\/+([^\/]+)/))&&(g[1]!=B||K&&g[2]!=K)};v.add("dojo-force-activex-xhr",!y.addEventListener&&"file:"==window.location.protocol);v.add("native-xhr","undefined"!=typeof XMLHttpRequest);if(v("native-xhr")&&!v("dojo-force-activex-xhr"))var J=function(){return new XMLHttpRequest};
else{var R=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"];for(q=0;3>q;)try{var V=R[q++];new ActiveXObject(V);break}catch(g){}J=function(){return new ActiveXObject(V)}}d.getXhr=J;v.add("dojo-gettext-api",1);d.getText=function(g,G,N){var P=J();P.open("GET",Ta(g),!1);P.send(null);if(200==P.status||!location.host&&!P.status)N&&N(P.responseText,G);else throw e("xhrFailed",P.status);return P.responseText};var Y=v("csp-restrictions")?function(){}:new Function("return eval(arguments[0]);");d.eval=
function(g,G){return Y(g+"\r\n//# sourceURL\x3d"+G)};var S={},U=d.signal=function(g,G){g=S[g];a(g&&g.slice(0),function(N){N.apply(null,c(G)?G:[G])})},L=d.on=function(g,G){var N=S[g]||(S[g]=[]);N.push(G);return{remove:function(){for(var P=0;P<N.length;P++)if(N[P]===G){N.splice(P,1);break}}}},T=[],da={},ha=[],ca={},qa=d.map={},ta=[],oa={},va="",na={},ra={},ia={},wa=0;if(!v("foreign-loader"))var ya=function(g,G){G=!1!==G;var N,P;for(N in ra){var W=ra[N];if(P=N.match(/^url:(.+)/))na["url:"+jb(P[1],g)]=
W;else if("*now"==N)var X=W;else"*noref"!=N&&(P=Oa(N,g,!0),na[P.mid]=na["url:"+P.url]=W)}X&&X(Fa(g));G&&(ra={})};var F=function(g){return g.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(G){return"\\"+G})},I=function(g,G){G.splice(0,G.length);for(var N in g)G.push([N,g[N],new RegExp("^"+F(N)+"(/|$)"),N.length]);G.sort(function(P,W){return W[3]-P[3]});return G},M=function(g,G){a(g,function(N){G.push([h(N[0])?new RegExp("^"+F(N[0])+"$"):N[0],N[1]])})},Q=function(g){var G=g.name;G||(G=g,g={name:G});
g=f({main:"main"},g);g.location=g.location?g.location:G;g.packageMap&&(qa[G]=g.packageMap);g.main.indexOf("./")||(g.main=g.main.substring(2));ca[G]=g},aa=[],ba=function(g,G,N){for(var P in g){"waitSeconds"==P&&(d.waitms=1E3*(g[P]||0));"cacheBust"==P&&(va=g[P]?h(g[P])?g[P]:(new Date).getTime()+"":"");if("baseUrl"==P||"combo"==P)d[P]=g[P];if("async"==P){var W=g[P];d.legacyMode=z=h(W)&&/sync|legacyAsync/.test(W)?W:W?!1:"sync";d.async=!z}g[P]!==D&&(d.rawConfig[P]=g[P],"has"!=P&&v.add("config-"+P,g[P],
0,G))}d.baseUrl||(d.baseUrl="./");/\/$/.test(d.baseUrl)||(d.baseUrl+="/");for(P in g.has)v.add(P,g.has[P],0,G);a(g.packages,Q);for(var X in g.packagePaths)a(g.packagePaths[X],function(ka){var Aa=X+"/"+ka;h(ka)&&(ka={name:ka});ka.location=Aa;Q(ka)});I(f(qa,g.map),ta);a(ta,function(ka){ka[1]=I(ka[1],[]);"*"==ka[0]&&(ta.star=ka)});I(f(da,g.paths),ha);M(g.aliases,T);if(!v("foreign-loader")){if(G)aa.push({config:g.config});else for(P in g.config)G=Ca(P,N),G.config=f(G.config||{},g.config[P]);g.cache&&
(ya(),ra=g.cache,ya(0,!!g.cache["*noref"]))}U("config",[g,d.rawConfig])};v("dojo-cdn");var la=y.getElementsByTagName("script");q=0;for(var Z,ea,pa,ma;q<la.length;)if(Z=la[q++],(pa=Z.getAttribute("src"))&&(ma=pa.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))&&(ea=ma[3]||"",A.baseUrl=A.baseUrl||ea,wa=Z),pa=Z.getAttribute("data-dojo-config")||Z.getAttribute("djConfig"))ia=d.eval("({ "+pa+" })","data-dojo-config"),wa=Z;d.rawConfig={};ba(A,1);v("dojo-cdn")&&((ca.dojo.location=ea)&&(ea+="/"),ca.dijit.location=ea+
"../dijit/",ca.dojox.location=ea+"../dojox/");ba(b,1);ba(ia,1);if(!v("foreign-loader"))var ua=function(g){Na(function(){a(g.deps,Sa)})},sa=function(g,G,N,P,W){var X;if(h(g)){if((X=Ca(g,P,!0))&&X.executed)return X.result;throw e("undefinedModule",g);}c(g)||(ba(g,0,P),g=G,G=N);if(c(g))if(g.length){N="require*"+l();for(var ka,Aa=[],Da=0;Da<g.length;)ka=g[Da++],Aa.push(Ca(ka,P));X=f(Ua("",N,0,""),{injected:2,deps:Aa,def:G||r,require:P?P.require:d,gc:1});oa[X.mid]=X;ua(X);var ab=Pa&&"sync"!=z;Na(function(){Ma(X,
ab)});X.executed||ja.push(X);Ga()}else G&&G();return W},Fa=function(g){if(!g)return d;var G=g.require;G||(G=function(N,P,W){return sa(N,P,W,g,G)},g.require=f(G,d),G.module=g,G.toUrl=function(N){return jb(N,g)},G.toAbsMid=function(N){return bb(N,g)},v("dojo-undef-api")&&(G.undef=function(N){d.undef(N,g)}),G.syncLoadNls=function(N){N=Oa(N,g);var P=oa[N.mid];if(!P||!P.executed)if(Ea=na[N.mid]||na["url:"+N.url])Va(Ea),P=oa[N.mid];return P&&P.executed&&P.result});return G},ja=[],Ha=[],fa={},xa=function(g){g.injected=
1;fa[g.mid]=1;g.url&&(fa[g.url]=g.pack||1);kb()},za=function(g){g.injected=2;delete fa[g.mid];g.url&&delete fa[g.url];m(fa)&&(Wa(),"xd"==z&&(z="sync"))},Ia=d.idle=function(){return!Ha.length&&m(fa)&&!ja.length&&!Pa};var Ja=function(g,G){if(G)for(var N=0;N<G.length;N++)if(G[N][2].test(g))return G[N];return 0},lb=function(g){var G=[];for(g=g.replace(/\\/g,"/").split("/");g.length;){var N=g.shift();if(".."==N&&G.length&&".."!=P){G.pop();var P=G[G.length-1]}else"."!=N&&G.push(P=N)}return G.join("/")},
Ua=function(g,G,N,P){var W=d.isXdUrl(P);return{pid:g,mid:G,pack:N,url:P,executed:0,def:0,isXd:W,isAmd:!!(W||ca[g]&&ca[g].isAmd)}},ob=function(g,G,N,P,W,X,ka,Aa,Da,ab){var Ka,mb,Ba;var cb=/^\./.test(g);if(/(^\/)|(:)|(\.js$)/.test(g)||cb&&!G)return Ua(0,g,0,g);g=lb(cb?G.mid+"/../"+g:g);if(/^\./.test(g))throw e("irrationalPath",g);ab||cb||!X.star||(Ba=Ja(g,X.star[1]));!Ba&&G&&(Ba=(Ba=Ja(G.mid,X))&&Ja(g,Ba[1]));Ba&&(g=Ba[1]+g.substring(Ba[3]));G=(ma=g.match(/^([^\/]+)(\/(.+))?$/))?ma[1]:"";(Ka=N[G])?
g=G+"/"+(mb=ma[3]||Ka.main):G="";var db=0;a(Aa,function(Qa){var nb=g.match(Qa[0]);nb&&0<nb.length&&(db=t(Qa[1])?g.replace(Qa[0],Qa[1]):Qa[1])});if(db)return ob(db,0,N,P,W,X,ka,Aa,Da);if(N=P[g])return Da?Ua(N.pid,N.mid,N.pack,N.url):P[g];P=(Ba=Ja(g,ka))?Ba[1]+g.substring(Ba[3]):G?("/"===Ka.location.slice(-1)?Ka.location.slice(0,-1):Ka.location)+"/"+mb:v("config-tlmSiblingOfDojo")?"../"+g:g;/(^\/)|(:)/.test(P)||(P=W+P);return Ua(G,g,Ka,lb(P+".js"))},Oa=function(g,G,N){return ob(g,G,ca,oa,d.baseUrl,
ta,ha,T,void 0,N)};if(!v("foreign-loader"))var pb=function(g,G,N){return g.normalize?g.normalize(G,function(P){return bb(P,N)}):bb(G,N)},qb=0,Ca=function(g,G,N){var P;if(P=g.match(/^(.+?)!(.*)$/)){var W=Ca(P[1],G,N);"sync"!=z||W.executed||(Sa(W),2!==W.injected||W.executed||Na(function(){Ma(W)}),W.executed?Xa(W):ja.unshift(W));5!==W.executed||W.load||Xa(W);W.load?(P=pb(W,P[2],G),g=W.mid+"!"+(W.dynamic?++qb+"!":"")+P):(P=P[2],g=W.mid+"!"+ ++qb+"!waitingForPlugin");g={plugin:W,mid:g,req:Fa(G),prid:P}}else g=
Oa(g,G);return oa[g.mid]||!N&&(oa[g.mid]=g)};var bb=d.toAbsMid=function(g,G){return Oa(g,G).mid},jb=d.toUrl=function(g,G){G=Oa(g+"/x",G);var N=G.url;return Ta(0===G.pid?g:N.substring(0,N.length-5))};if(!v("foreign-loader"))var rb={injected:2,executed:5,def:3,result:3},eb=function(g){return oa[g]=f({mid:g},rb)},wb=eb("require"),xb=eb("exports"),yb=eb("module"),Ya={},fb=0,Xa=function(g){var G=g.result;g.dynamic=G.dynamic;g.normalize=G.normalize;g.load=G.load;return g},zb=function(g){var G={};a(g.loadQ,
function(W){var X=pb(g,W.prid,W.req.module),ka=g.dynamic?W.mid.replace(/waitingForPlugin$/,X):g.mid+"!"+X;X=f(f({},W),{mid:ka,prid:X,injected:0});oa[ka]&&oa[ka].injected||sb(oa[ka]=X);G[W.mid]=oa[ka];za(W);delete oa[W.mid]});g.loadQ=0;var N=function(W){for(var X=W.deps||[],ka=0;ka<X.length;ka++)(W=G[X[ka].mid])&&(X[ka]=W)},P;for(P in oa)N(oa[P]);a(ja,N)},La=function(g){d.trace("loader-finish-exec",[g.mid]);g.executed=5;g.defOrder=fb++;a(g.provides,function(G){G()});g.loadQ&&(Xa(g),zb(g));for(q=0;q<
ja.length;)ja[q]===g?ja.splice(q,1):q++;/^require\*/.test(g.mid)&&delete oa[g.mid]},Ab=[],Ma=function(g,G){if(4===g.executed)return d.trace("loader-circular-dependency",[Ab.concat(g.mid).join("-\x3e")]),!g.def||G?Ya:g.cjs&&g.cjs.exports;if(!g.executed){if(!g.def)return Ya;var N=g.mid,P=g.deps||[],W,X=[],ka=0;for(g.executed=4;W=P[ka++];){W=W===wb?Fa(g):W===xb?g.cjs.exports:W===yb?g.cjs:Ma(W,G);if(W===Ya)return g.executed=0,d.trace("loader-exec-module",["abort",N]),Ya;X.push(W)}d.trace("loader-run-factory",
[g.mid]);G=g.def;w.unshift(g);if(v("config-dojo-loader-catches"))try{var Aa=t(G)?G.apply(null,X):G}catch(Da){U("error",g.result=e("factoryThrew",[g,Da]))}else Aa=t(G)?G.apply(null,X):G;g.result=void 0===Aa&&g.cjs?g.cjs.exports:Aa;w.shift(g);La(g)}return g.result},Pa=0,Na=function(g){try{Pa++,g()}catch(G){throw G;}finally{Pa--}Ia()&&U("idle",[])},Ga=function(){Pa||Na(function(){C();for(var g,G,N=0;N<ja.length;)g=fb,G=ja[N],Ma(G),g!=fb?(C(),N=0):N++})};var Ta="function"==typeof b.fixupUrl?b.fixupUrl:
function(g){g+="";return g+(va?(/\?/.test(g)?"\x26":"?")+va:"")};v("dojo-undef-api")&&(d.undef=function(g,G){g=Ca(g,G);za(g);f(g,{def:0,executed:0,injected:0,node:0,load:0})});void 0===v("dojo-loader-eval-hint-url")&&v.add("dojo-loader-eval-hint-url",1);var sb=function(g){var G=g.plugin;5!==G.executed||G.load||Xa(G);var N=function(P){g.result=P;za(g);La(g);Ga()};G.load?G.load(g.prid,g.req,N):G.loadQ?G.loadQ.push(g):(G.loadQ=[g],ja.unshift(G),Sa(G))},Ea=0,Ra=0,gb=0,Va=function(g,G){v("config-stripStrict")&&
(g=g.replace(/(["'])use strict\1/g,""));gb=1;if(v("config-dojo-loader-catches"))try{g===Ea?Ea.call(null):d.eval(g,v("dojo-loader-eval-hint-url")?G.url:G.mid)}catch(N){U("error",e("evalModuleThrew",G))}else g===Ea?Ea.call(null):d.eval(g,v("dojo-loader-eval-hint-url")?G.url:G.mid);gb=0},Sa=function(g){var G=g.mid,N=g.url;if(!(g.executed||g.injected||fa[G]||g.url&&(g.pack&&fa[g.url]===g.pack||1==fa[g.url])))if(xa(g),g.plugin)sb(g);else{var P=function(){tb(g);if(2!==g.injected){if(v("dojo-enforceDefine")){U("error",
e("noDefine",g));return}za(g);f(g,rb);d.trace("loader-define-nonmodule",[g.url])}z?!w.length&&Ga():Ga()};if(Ea=na[G]||na["url:"+g.url])d.trace("loader-inject",["cache",g.mid,N]),Va(Ea,g),P();else{if(z)if(g.isXd)"sync"==z&&(z="xd");else if(!g.isAmd||"sync"==z){var W=function(X){if("sync"==z){w.unshift(g);Va(X,g);w.shift();tb(g);g.cjs||(za(g),La(g));if(g.finish){X=G+"*finish";var ka=g.finish;delete g.finish;Za(X,["dojo",("dojo/require!"+ka.join(",")).replace(/\./g,"/")],function(Aa){a(ka,function(Da){Aa.require(Da)})});
ja.unshift(Ca(X))}P()}else(X=H(g,X))?(Va(X,g),P()):(Ra=g,d.injectUrl(Ta(N),P,g),Ra=0)};d.trace("loader-inject",["xhr",g.mid,N,"sync"!=z]);if(v("config-dojo-loader-catches"))try{d.getText(N,"sync"!=z,W)}catch(X){U("error",e("xhrInjectFailed",[g,X]))}else d.getText(N,"sync"!=z,W);return}d.trace("loader-inject",["script",g.mid,N]);Ra=g;d.injectUrl(Ta(N),P,g);Ra=0}}},hb=function(g,G,N){d.trace("loader-define-module",[g.mid,G]);var P=g.mid;if(2===g.injected)return U("error",e("multipleDefine",g)),g;f(g,
{deps:G,def:N,cjs:{id:g.mid,uri:g.url,exports:g.result={},setExports:function(X){g.cjs.exports=X},config:function(){return g.config}}});for(var W=0;G[W];W++)G[W]=Ca(G[W],g);z&&!fa[P]&&(ua(g),ja.push(g),Ga());za(g);t(N)||G.length||(g.result=N,La(g));return g},tb=function(g,G){for(var N=[],P,W;Ha.length;)W=Ha.shift(),G&&(W[0]=G.shift()),P=W[0]&&Ca(W[0])||g,N.push([P,W[1],W[2]]);ya(g);a(N,function(X){ua(hb.apply(null,X))})},$a=0,Wa=r,kb=r;Wa=function(){$a&&clearTimeout($a);$a=0};kb=function(){Wa();d.waitms&&
($a=u.setTimeout(function(){Wa();U("error",e("timeout",fa))},d.waitms))};v.add("ie-event-behavior",y.attachEvent&&"undefined"===typeof Windows&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var ib=function(g,G,N,P){if(v("ie-event-behavior"))return g.attachEvent(N,P),function(){g.detachEvent(N,P)};g.addEventListener(G,P,!1);return function(){g.removeEventListener(G,P,!1)}},Bb=ib(window,"load","onload",function(){d.pageLoaded=1;try{"complete"!=y.readyState&&(y.readyState="complete")}catch(g){}Bb()});
la=y.getElementsByTagName("script");for(q=0;!wa;)/^dojo/.test((Z=la[q++])&&Z.type)||(wa=Z);d.injectUrl=function(g,G,N){N=N.node=y.createElement("script");var P=ib(N,"load","onreadystatechange",function(X){X=X||window.event;var ka=X.target||X.srcElement;if("load"===X.type||/complete|loaded/.test(ka.readyState))P(),W(),G&&G()}),W=ib(N,"error","onerror",function(X){P();W();U("error",e("scriptError: "+g,[g,X]))});N.type="text/javascript";N.charset="utf-8";N.src=g;wa.parentNode.insertBefore(N,wa);return N};
d.log=function(){try{for(var g=0;g<arguments.length;g++)console.log(arguments[g])}catch(G){}};d.trace=r;if(v("foreign-loader"))Za=r;else{var Za=function(g,G,N){var P=arguments.length,W=["require","exports","module"],X=[0,g,G];1==P?X=[0,t(g)?W:[],g]:2==P&&h(g)?X=[g,t(G)?W:[],G]:3==P&&(X=[g,G,N]);d.trace("loader-define",X.slice(0,2));if((P=X[0]&&Ca(X[0]))&&!fa[P.mid])ua(hb(P,X[1],X[2]));else if(!v("ie-event-behavior")||gb)Ha.push(X);else{P=P||Ra;if(!P)for(g in fa)if((W=oa[g])&&W.node&&"interactive"===
W.node.readyState){P=W;break}P?(ya(P),ua(hb(P,X[1],X[2]))):U("error",e("ieDefineFailed",X[0]));Ga()}};Za.amd={vendor:"dojotoolkit.org"}}f(f(d,A.loaderPatch),b.loaderPatch);L("error",function(g){try{if(console.error(g),g instanceof Error){for(var G in g)console.log(G+":",g[G]);console.log(".")}}catch(N){}});f(d,{uid:l,cache:na,packs:ca});if(u.define)U("error",e("defineAlreadyDefined",0));else if(u.define=Za,u.require=d,!v("foreign-loader")){a(aa,function(g){ba(g)});var ub=ia.deps||b.deps||A.deps,vb=
ia.callback||b.callback||A.callback;d.boot=ub||vb?[ub||[],vb]:0}})(function(b){return b.dojoConfig||b.djConfig||b.require||{}},{async:0,baseUrl:"https://js.arcgis.com/3.41/dojo",hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-has-api":1,"dojo-loader":1,"dojo-undef-api":0,dom:1,"extend-esri":1,"host-browser":1},packages:[{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../put-selector",main:"put",name:"put-selector"},
{location:"../xstyle",name:"xstyle"},{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../dgrid1",main:"OnDemandGrid",name:"dgrid1"},{location:"../dstore",main:"Store",name:"dstore"},{location:"../moment",main:"moment",name:"moment"},{location:"../esri",name:"esri"},{location:".",name:"dojo"}]});
require({cache:{"dojo/loadInit":function(){define(["./_base/loader"],function(b){return{dynamic:0,normalize:function(A){return A},load:b.loadInit}})},"dojo/_base/loader":function(){define("./kernel ../has require module ../json ./lang ./array".split(" "),function(b,A,q,x,r,m,p){var t=function(L){return L.replace(/\./g,"/")},h=/\/\/>>built/,c=[],a=[],f=function(L,T,da){c.push(da);p.forEach(L.split(","),function(ha){ha=B(ha,T.module);a.push(ha);K(ha)});e()},e=function(){var L;for(L in C){var T=C[L];
void 0===T.noReqPluginCheck&&(T.noReqPluginCheck=/loadInit!/.test(L)||/require!/.test(L)?1:0);if(!T.executed&&!T.noReqPluginCheck&&T.injected==v)return}U(function(){var da=c;c=[];p.forEach(da,function(ha){ha(1)})})},k=/\/\/.*|\/\*[\s\S]*?\*\/|("(?:\\.|[^"])*"|'(?:\\.|[^'])*'|`(?:\\.|[^`])*`)/mg,l=/(^|\s)dojo\.(loadInit|require|provide|requireLocalization|requireIf|requireAfterIf|platformRequire)\s*\(/mg,d=/(^|\s)(require|define)\s*\(/m,u=function(L,T){var da=[],ha=[];var ca=[];for(T=T||L.replace(k,
"$1");ca=l.exec(T);){var qa=l.lastIndex;var ta=qa-ca[0].length;var oa=void 0,va=T,na=/\(|\)/g,ra=1;for(na.lastIndex=qa;(oa=na.exec(va))&&(ra=")"==oa[0]?ra-1:ra+1,0!=ra););if(0!=ra)throw"unmatched paren around character "+na.lastIndex+" in: "+va;qa=[b.trim(va.substring(ta,na.lastIndex))+";\n",na.lastIndex];"loadInit"==ca[2]?da.push(qa[0]):ha.push(qa[0]);l.lastIndex=qa[1]}ca=da.concat(ha);return ca.length||!d.test(T)?[L.replace(/(^|\s)dojo\.loadInit\s*\(/g,"\n0 \x26\x26 dojo.loadInit("),ca.join(""),
ca]:0},y=q.initSyncLoader(f,e,function(L,T){var da,ha=[],ca=[];if(h.test(T)||!(da=u(T)))return 0;T=L.mid+"-*loadInit";for(var qa in B("dojo",L).result.scopeMap)ha.push(qa),ca.push('"'+qa+'"');return"// xdomain rewrite of "+L.mid+"\ndefine('"+T+"',{\n\tnames:"+r.stringify(ha)+",\n\tdef:function("+ha.join(",")+"){"+da[1]+"}});\n\ndefine("+r.stringify(ha.concat(["dojo/loadInit!"+T]))+", function("+ha.join(",")+"){\n"+da[0]+"});"}),n=y.sync,v=y.requested,D=y.arrived,O=y.nonmodule,z=y.executing,w=y.executed,
E=y.syncExecStack,C=y.modules,H=y.execQ,B=y.getModule,K=y.injectModule,J=y.setArrived,R=y.signal,V=y.finishExec,Y=y.execModule,S=y.getLegacyMode,U=y.guardCheckComplete;f=y.dojoRequirePlugin;b.provide=function(L){var T=E[0],da=m.mixin(B(t(L),q.module),{executed:z,result:m.getObject(L,!0)});J(da);T&&(T.provides||(T.provides=[])).push(function(){da.result=m.getObject(L);delete da.provides;da.executed!==w&&V(da)});return da.result};A.add("config-publishRequireResult",1,0,0);b.require=function(L,T){T=
function(da,ha){var ca=B(t(da),q.module);if(E.length&&E[0].finish)E[0].finish.push(da);else{if(ca.executed)return ca.result;ha&&(ca.result=O);ha=S();K(ca);ha=S();ca.executed!==w&&ca.injected===D&&y.guardCheckComplete(function(){Y(ca)});if(ca.executed)return ca.result;ha==n?ca.cjs?H.unshift(ca):E.length&&(E[0].finish=[da]):H.push(ca)}}(L,T);A("config-publishRequireResult")&&!m.exists(L)&&void 0!==T&&m.setObject(L,T);return T};b.loadInit=function(L){L()};b.registerModulePath=function(L,T){var da={};
da[L.replace(/\./g,"/")]=T;q({paths:da})};b.platformRequire=function(L){L=(L.common||[]).concat(L[b._name]||L["default"]||[]);for(var T;L.length;)m.isArray(T=L.shift())?b.require.apply(b,T):b.require(T)};b.requireIf=b.requireAfterIf=function(L,T,da){L&&b.require(T,da)};b.requireLocalization=function(L,T,da){q(["../i18n"],function(ha){ha.getLocalization(L,T,da)})};return{extractLegacyApiApplications:u,require:f,loadInit:function(L,T,da){T([L],function(ha){T(ha.names,function(){for(var ca="",qa=[],
ta=0;ta<arguments.length;ta++)ca+="var "+ha.names[ta]+"\x3d arguments["+ta+"]; ",qa.push(arguments[ta]);eval(ca);var oa=T.module,va=[],na;ca={provide:function(ia){ia=t(ia);ia=B(ia,oa);ia!==oa&&J(ia)},require:function(ia,wa){ia=t(ia);wa&&(B(ia,oa).result=O);va.push(ia)},requireLocalization:function(ia,wa,ya){na||(na=["dojo/i18n"]);ya=(ya||b.locale).toLowerCase();ia=t(ia)+"/nls/"+(/root/i.test(ya)?"":ya+"/")+t(wa);B(ia,oa).isXd&&na.push("dojo/i18n!"+ia)},loadInit:function(ia){ia()}};ta={};var ra;try{for(ra in ca)ta[ra]=
b[ra],b[ra]=ca[ra];ha.def.apply(null,qa)}catch(ia){R("error",[{src:x.id,id:"failedDojoLoadInit"},ia])}finally{for(ra in ca)b[ra]=ta[ra]}na&&(va=va.concat(na));va.length?f(va.join(","),T,da):da()})})}}})},"dojo/_base/kernel":function(){define(["../global","../has","./config","require","module"],function(b,A,q,x,r){var m,p={},t={},h={config:q,global:b,dijit:p,dojox:t};p={dojo:["dojo",h],dijit:["dijit",p],dojox:["dojox",t]};r=x.map&&x.map[r.id.match(/[^\/]+/)[0]];for(m in r)p[m]?p[m][0]=r[m]:p[m]=[r[m],
{}];for(m in p)r=p[m],r[1]._scopeName=r[0],q.noGlobals||(b[r[0]]=r[1]);h.scopeMap=p;h.baseUrl=h.config.baseUrl=x.baseUrl;h.isAsync=x.async;h.locale=q.locale;b="$Rev:$".match(/[0-9a-f]{7,}/);h.version={major:1,minor:16,patch:4,flag:"",revision:b?b[0]:NaN,toString:function(){var a=h.version;return a.major+"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};A("csp-restrictions")||Function("d","d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(h);h.exit=
function(){};A("host-webworker");A.add("console-as-object",function(){return Function.prototype.bind&&console&&"object"===typeof console.log});"undefined"!=typeof console||(console={});r="assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" ");var c;for(b=0;c=r[b++];)console[c]?A("console-as-object")&&(console[c]=Function.prototype.bind.call(console[c],console)):function(){var a=c+"";console[a]="log"in console?function(){var f=Array.prototype.slice.call(arguments);
f.unshift(a+":");console.log(f.join(" "))}:function(){};console[a]._fake=!0}();A.add("dojo-debug-messages",!!q.isDebug);h.deprecated=h.experimental=function(){};A("dojo-debug-messages")&&(h.deprecated=function(a,f,e){a="DEPRECATED: "+a;f&&(a+=" "+f);e&&(a+=" -- will be removed in version: "+e);console.warn(a)},h.experimental=function(a,f){a="EXPERIMENTAL: "+a+" -- APIs subject to change without notice.";f&&(a+=" "+f);console.warn(a)});if(q.modulePaths){h.deprecated("dojo.modulePaths","use paths configuration");
A={};for(m in q.modulePaths)A[m.replace(/\./g,"/")]=q.modulePaths[m];x({paths:A})}h.moduleUrl=function(a,f){h.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var e=null;a&&(e=x.toUrl(a.replace(/\./g,"/")+(f?"/"+f:"")+"/*.*").replace(/\/\*\.\*/,"")+(f?"":"/"));return e};h._hasResource={};return h})},"dojo/global":function(){define(function(){return"undefined"!==typeof global&&"function"!==typeof global?global:"undefined"!==typeof window?window:"undefined"!==typeof self?self:this})},"dojo/has":function(){define(["./global",
"require","module"],function(b,A,q){var x=A.has||function(){};if(!x("dojo-has-api")){var r="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location==location&&window.document==document&&document,m=r&&r.createElement("DiV"),p=q.config&&q.config()||{};x=function(t){return"function"==typeof p[t]?p[t]=p[t](b,r,m):p[t]};x.cache=p;x.add=function(t,h,c,a){("undefined"==typeof p[t]||a)&&(p[t]=h);return c&&x(t)}}x.add("dom-addeventlistener",!!document.addEventListener);
x.add("touch","ontouchstart"in document||"onpointerdown"in document&&0<navigator.maxTouchPoints||window.navigator.msMaxTouchPoints);x.add("touch-events","ontouchstart"in document);x.add("pointer-events","pointerEnabled"in window.navigator?window.navigator.pointerEnabled:"PointerEvent"in window);x.add("MSPointer",window.navigator.msPointerEnabled);x.add("touch-action",x("touch")&&x("pointer-events"));x.add("device-width",screen.availWidth||innerWidth);A=document.createElement("form");x.add("dom-attributes-explicit",
0==A.attributes.length);x.add("dom-attributes-specified-flag",0<A.attributes.length&&40>A.attributes.length);x.clearElement=function(t){t.innerHTML="";return t};x.normalize=function(t,h){var c=t.match(/[\?:]|[^:\?]*/g),a=0,f=function(e){var k=c[a++];if(":"==k)return 0;if("?"==c[a++]){if(!e&&x(k))return f();f(!0);return f(e)}return k||0};return(t=f())&&h(t)};x.load=function(t,h,c){t?h([t],c):c()};return x})},"dojo/_base/config":function(){define(["../global","../has","require"],function(b,A,q){b={};
q=q.rawConfig;for(var x in q)b[x]=q[x];!b.locale&&"undefined"!=typeof navigator&&(x=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language||navigator.userLanguage)&&(b.locale=x.toLowerCase());return b})},"dojo/json":function(){define(["./has"],function(b){var A="undefined"!=typeof JSON;b.add("json-parse",A);b.add("json-stringify",A&&'{"a":1}'==JSON.stringify({a:0},function(x,r){return r||1}));if(b("json-stringify"))return JSON;var q=function(x){return('"'+x.replace(/(["\\])/g,
"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:b("json-parse")?JSON.parse:function(x,r){if(r&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(x))throw new SyntaxError("Invalid characters in JSON");return eval("("+x+")")},stringify:function(x,r,m){function p(h,c,a){r&&(h=r(a,h));var f=typeof h;if("number"==f)return isFinite(h)?h+"":"null";if("boolean"==
f)return h+"";if(null===h)return"null";if("string"==typeof h)return q(h);if("function"==f||"undefined"==f)return t;if("function"==typeof h.toJSON)return p(h.toJSON(a),c,a);if(h instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(y,n,v){y=h["getUTC"+n]()+(v?1:0);return 10>y?"0"+y:y});if(h.valueOf()!==h)return p(h.valueOf(),c,a);var e=m?c+m:"",k=m?" ":"",l=m?"\n":"";if(h instanceof Array){k=h.length;var d=[];for(a=0;a<k;a++)f=p(h[a],e,
a),"string"!=typeof f&&(f="null"),d.push(l+e+f);return"["+d.join(",")+l+c+"]"}d=[];for(a in h)if(h.hasOwnProperty(a)){if("number"==typeof a)var u='"'+a+'"';else if("string"==typeof a)u=q(a);else continue;f=p(h[a],e,a);"string"==typeof f&&d.push(l+e+u+":"+k+f)}return"{"+d.join(",")+l+c+"}"}var t;"string"==typeof r&&(m=r,r=null);return p(x,"","")}}})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(b,A){A.add("bug-for-in-skips-shadowed",function(){for(var c in{toString:1})return 0;
return 1});var q=A("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):[],x=q.length,r=function(c,a,f){f||(f=c[0]&&b.scopeMap[c[0]]?b.scopeMap[c.shift()][1]:b.global);try{for(var e=0;e<c.length;e++){var k=c[e];if("__proto__"===k||"constructor"===k)return;if(!(k in f))if(a)f[k]={};else return;f=f[k]}return f}catch(l){}},m=Object.prototype.toString,p=function(c,a,f){return(f||[]).concat(Array.prototype.slice.call(c,
a||0))},t=/\{([^\}]+)\}/g,h={_extraNames:q,_mixin:function(c,a,f){var e,k={};for(d in a){var l=a[d];d in c&&(c[d]===l||d in k&&k[d]===l)||(c[d]=f?f(l):l)}if(A("bug-for-in-skips-shadowed")&&a)for(e=0;e<x;++e){var d=q[e];l=a[d];d in c&&(c[d]===l||d in k&&k[d]===l)||(c[d]=f?f(l):l)}return c},mixin:function(c,a){c||(c={});for(var f=1,e=arguments.length;f<e;f++)h._mixin(c,arguments[f]);return c},setObject:function(c,a,f){var e=c.split(".");c=e.pop();return(f=r(e,!0,f))&&c?f[c]=a:void 0},getObject:function(c,
a,f){return c?r(c.split("."),a,f):f},exists:function(c,a){return void 0!==h.getObject(c,!1,a)},isString:function(c){return"string"==typeof c||c instanceof String},isArray:Array.isArray||function(c){return"[object Array]"==m.call(c)},isFunction:function(c){return"[object Function]"===m.call(c)},isObject:function(c){return void 0!==c&&(null===c||"object"==typeof c||h.isArray(c)||h.isFunction(c))},isArrayLike:function(c){return!!c&&!h.isString(c)&&!h.isFunction(c)&&!(c.tagName&&"form"==c.tagName.toLowerCase())&&
(h.isArray(c)||isFinite(c.length))},isAlien:function(c){return c&&!h.isFunction(c)&&/\{\s*\[native code\]\s*\}/.test(String(c))},extend:function(c,a){for(var f=1,e=arguments.length;f<e;f++)h._mixin(c.prototype,arguments[f]);return c},_hitchArgs:function(c,a){var f=h._toArray(arguments,2),e=h.isString(a);return function(){var k=h._toArray(arguments),l=e?(c||b.global)[a]:a;return l&&l.apply(c||this,f.concat(k))}},hitch:function(c,a){if(2<arguments.length)return h._hitchArgs.apply(b,arguments);a||(a=
c,c=null);if(h.isString(a)){c=c||b.global;if(!c[a])throw['lang.hitch: scope["',a,'"] is null (scope\x3d"',c,'")'].join("");return function(){return c[a].apply(c,arguments||[])}}return c?function(){return a.apply(c,arguments||[])}:a},delegate:function(){function c(){}return function(a,f){c.prototype=a;a=new c;c.prototype=null;f&&h._mixin(a,f);return a}}(),_toArray:A("ie")?function(){function c(a,f,e){e=e||[];for(f=f||0;f<a.length;f++)e.push(a[f]);return e}return function(a){return(a.item?c:p).apply(this,
arguments)}}():p,partial:function(c){return h.hitch.apply(b,[null].concat(h._toArray(arguments)))},clone:function(c){if(!c||"object"!=typeof c||h.isFunction(c))return c;if(c.nodeType&&"cloneNode"in c)return c.cloneNode(!0);if(c instanceof Date)return new Date(c.getTime());if(c instanceof RegExp)return new RegExp(c);var a;if(h.isArray(c)){var f=[];var e=0;for(a=c.length;e<a;++e)e in c&&(f[e]=h.clone(c[e]))}else f=c.constructor?new c.constructor:{};return h._mixin(f,c,h.clone)},trim:String.prototype.trim?
function(c){return c.trim()}:function(c){return c.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(c,a,f){return c.replace(f||t,h.isFunction(a)?a:function(e,k){return h.getObject(k,!1,a)})}};h.mixin(b,h);return h})},"dojo/sniff":function(){define(["./has"],function(b){var A=navigator,q=A.userAgent;A=A.appVersion;var x=parseFloat(A);b.add("air",0<=q.indexOf("AdobeAIR"));b.add("wp",parseFloat(q.split("Windows Phone")[1])||void 0);b.add("msapp",parseFloat(q.split("MSAppHost/")[1])||void 0);
b.add("khtml",0<=A.indexOf("Konqueror")?x:void 0);b.add("edge",parseFloat(q.split("Edge/")[1])||void 0);b.add("opr",parseFloat(q.split("OPR/")[1])||void 0);b.add("webkit",!b("wp")&&!b("edge")&&parseFloat(q.split("WebKit/")[1])||void 0);b.add("chrome",!b("edge")&&!b("opr")&&parseFloat(q.split("Chrome/")[1])||void 0);b.add("android",!b("wp")&&parseFloat(q.split("Android ")[1])||void 0);b.add("safari",!(0<=A.indexOf("Safari"))||b("wp")||b("chrome")||b("android")||b("edge")||b("opr")?void 0:parseFloat(A.split("Version/")[1]));
b.add("mac",0<=A.indexOf("Macintosh"));b.add("quirks","BackCompat"==document.compatMode);if(!b("wp")&&q.match(/(iPhone|iPod|iPad)/)){var r=RegExp.$1.replace(/P/,"p"),m=q.match(/OS ([\d_]+)/)?RegExp.$1:"1";m=parseFloat(m.replace(/_/,".").replace(/_/g,""));b.add(r,m);b.add("ios",m)}b.add("bb",(0<=q.indexOf("BlackBerry")||0<=q.indexOf("BB10"))&&parseFloat(q.split("Version/")[1])||void 0);b.add("trident",parseFloat(A.split("Trident/")[1])||void 0);b.add("svg","undefined"!==typeof SVGAngle);b("webkit")||
(0<=q.indexOf("Opera")&&b.add("opera",9.8<=x?parseFloat(q.split("Version/")[1])||x:x),!(0<=q.indexOf("Gecko"))||b("wp")||b("khtml")||b("trident")||b("edge")||b.add("mozilla",x),b("mozilla")&&b.add("ff",parseFloat(q.split("Firefox/")[1]||q.split("Minefield/")[1])||void 0),document.all&&!b("opera")&&(q=parseFloat(A.split("MSIE ")[1])||void 0,(A=document.documentMode)&&5!=A&&Math.floor(q)!=A&&(q=A),b.add("ie",q)),b.add("wii","undefined"!=typeof opera&&opera.wiiremote));return b})},"dojo/_base/array":function(){define(["./kernel",
"../has","./lang"],function(b,A,q){function x(c){return p[c]=new Function("item","index","array",c)}function r(c){var a=!c;return function(f,e,k){var l=0,d=f&&f.length||0;d&&"string"==typeof f&&(f=f.split(""));"string"==typeof e&&(e=p[e]||x(e));if(k)for(;l<d;++l){var u=!e.call(k,f[l],l,f);if(c^u)return!u}else for(;l<d;++l)if(u=!e(f[l],l,f),c^u)return!u;return a}}function m(c){var a=1,f=0,e=0;c||(a=f=e=-1);return function(k,l,d,u){if(u&&0<a)return h.lastIndexOf(k,l,d);u=k&&k.length||0;var y=c?u+e:
f;d===t?d=c?f:u+e:0>d?(d=u+d,0>d&&(d=f)):d=d>=u?u+e:d;for(u&&"string"==typeof k&&(k=k.split(""));d!=y;d+=a)if(k[d]==l)return d;return-1}}var p={},t,h={every:r(!1),some:r(!0),indexOf:m(!0),lastIndexOf:m(!1),forEach:function(c,a,f){var e=0,k=c&&c.length||0;k&&"string"==typeof c&&(c=c.split(""));"string"==typeof a&&(a=p[a]||x(a));if(f)for(;e<k;++e)a.call(f,c[e],e,c);else for(;e<k;++e)a(c[e],e,c)},map:function(c,a,f,e){var k=0,l=c&&c.length||0;e=new (e||Array)(l);l&&"string"==typeof c&&(c=c.split(""));
"string"==typeof a&&(a=p[a]||x(a));if(f)for(;k<l;++k)e[k]=a.call(f,c[k],k,c);else for(;k<l;++k)e[k]=a(c[k],k,c);return e},filter:function(c,a,f){var e=0,k=c&&c.length||0,l=[];k&&"string"==typeof c&&(c=c.split(""));"string"==typeof a&&(a=p[a]||x(a));if(f)for(;e<k;++e){var d=c[e];a.call(f,d,e,c)&&l.push(d)}else for(;e<k;++e)d=c[e],a(d,e,c)&&l.push(d);return l},clearCache:function(){p={}}};q.mixin(b,h);return h})},"dojo/require":function(){define(["./_base/loader"],function(b){return{dynamic:0,normalize:function(A){return A},
load:b.require}})},"dojo/text":function(){define(["./_base/kernel","require","./has","./request"],function(b,A,q,x){var r=function(c,a,f){x(c,{sync:!!a,headers:{"X-Requested-With":null}}).then(f)};var m={},p=function(c){if(c){c=c.replace(/^\s*<\?xml(\s)+version=['"](\d)*.(\d)*['"](\s)*\?>/im,"");var a=c.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);a&&(c=a[1])}else c="";return c},t={},h={};b.cache=function(c,a,f){if("string"==typeof c)if(/\//.test(c)){var e=c;f=a}else e=A.toUrl(c.replace(/\./g,"/")+
(a?"/"+a:""));else e=c+"",f=a;c=void 0!=f&&"string"!=typeof f?f.value:f;f=f&&f.sanitize;if("string"==typeof c)return m[e]=c,f?p(c):c;if(null===c)return delete m[e],null;e in m||r(e,!0,function(k){m[e]=k});return f?p(m[e]):m[e]};return{dynamic:!0,normalize:function(c,a){c=c.split("!");var f=c[0];return(/^\./.test(f)?a(f):f)+(c[1]?"!"+c[1]:"")},load:function(c,a,f){c=c.split("!");var e=1<c.length,k=c[0],l=a.toUrl(c[0]);c="url:"+l;var d=t,u=function(n){f(e?p(n):n)};k in m?d=m[k]:a.cache&&c in a.cache?
d=a.cache[c]:l in m&&(d=m[l]);if(d===t)if(h[l])h[l].push(u);else{var y=h[l]=[u];r(l,!a.async,function(n){m[k]=m[l]=n;for(var v=0;v<y.length;)y[v++](n);delete h[l]})}else u(d)}}})},"dojo/request":function(){define(["./request/default!"],function(b){return b})},"dojo/request/default":function(){define(["exports","require","../has"],function(b,A,q){var x=q("config-requestProvider");x||(x="./xhr");b.getPlatformDefaultId=function(){return"./xhr"};b.load=function(r,m,p,t){A(["platform"==r?"./xhr":x],function(h){p(h)})}})},
"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./_base/xhr ./json module".split(" "),function(b,A,q,x,r,m,p,t,h){q.add("dojo-preload-i18n-Api",1);var c=b.i18n={},a=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,f=function(B,K,J,R){var V=[J+R];K=K.split("-");for(var Y="",S=0;S<K.length;S++)if(Y+=(Y?"-":"")+K[S],!B||B[Y])V.push(J+Y+"/"+R),V.specificity=Y;return V},e={},k=function(B,K,J){J=J?J.toLowerCase():b.locale;B=B.replace(/\./g,"/");K=K.replace(/\./g,
"/");return/root/i.test(J)?B+"/nls/"+K:B+"/nls/"+J+"/"+K},l=b.getL10nName=function(B,K,J){return B=h.id+"!"+k(B,K,J)},d=function(B,K,J,R,V,Y){B([K],function(S){var U=m.clone(S.root||S.ROOT),L=f(!S._v1x&&S,V,J,R);B(L,function(){for(var T=1;T<L.length;T++)U=m.mixin(m.clone(U),arguments[T]);e[K+"/"+V]=U;U.$locale=L.specificity;Y()})})},u=function(B){var K=r.extraLocale||[];K=m.isArray(K)?K:[K];K.push(B);return K},y=function(B,K,J){var R=a.exec(B),V=R[1]+"/",Y=R[5]||R[4],S=V+Y,U=(R=R[5]&&R[4])||b.locale||
"",L=S+"/"+U;R=R?[U]:u(U);var T=R.length,da=function(){--T||J(m.delegate(e[L]))};U=B.split("*");var ha="preload"==U[1];if(q("dojo-preload-i18n-Api")){if(ha&&(e[B]||(e[B]=1,O(U[2],t.parse(U[3]),1,K)),J(1)),(U=ha)||(v&&D.push([B,K,J]),U=v&&!e[L]),U)return}else if(ha){J(1);return}x.forEach(R,function(ca){var qa=S+"/"+ca;q("dojo-preload-i18n-Api")&&z(qa);e[qa]?da():d(K,S,V,Y,ca,da)})};q("dojo-preload-i18n-Api");var n=c.normalizeLocale=function(B){B=B?B.toLowerCase():b.locale;return"root"==B?"ROOT":B},
v=0,D=[],O=c._preloadLocalizations=function(B,K,J,R){function V(L,T){R.isXdUrl(A.toUrl(L+".js"))||J?R([L],T):H([L],T,R)}function Y(L,T){for(L=L.split("-");L.length;){if(T(L.join("-")))return;L.pop()}T("ROOT")}function S(){for(--v;!v&&D.length;)y.apply(null,D.shift())}function U(L){L=n(L);Y(L,function(T){if(0<=x.indexOf(K,T)){var da=B.replace(/\./g,"/")+"_"+T;v++;V(da,function(ha){for(var ca in ha){var qa=ha[ca],ta=ca.match(/(.+)\/([^\/]+)$/);if(ta){var oa=ta[2];ta=ta[1]+"/";if(qa._localized){var va;
if("ROOT"===T){var na=va=qa._localized;delete qa._localized;na.root=qa;e[A.toAbsMid(ca)]=na}else va=qa._localized,e[A.toAbsMid(ta+oa+"/"+T)]=qa;T!==L&&function(ra,ia,wa,ya){var F=[],I=[];Y(L,function(M){ya[M]&&(F.push(A.toAbsMid(ra+M+"/"+ia)),I.push(A.toAbsMid(ra+ia+"/"+M)))});F.length?(v++,R(F,function(){for(var M=F.length-1;0<=M;M--)wa=m.mixin(m.clone(wa),arguments[M]),e[I[M]]=wa;e[A.toAbsMid(ra+ia+"/"+L)]=m.clone(wa);S()})):e[A.toAbsMid(ra+ia+"/"+L)]=wa}(ta,oa,qa,va)}}}S()});return!0}return!1})}
R=R||A;U();x.forEach(b.config.extraLocale,U)},z=function(){},w={},E={},C,H=function(B,K,J){var R=[];x.forEach(B,function(V){function Y(L){C||(C=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define \x3d function(mid, factory){define.called \x3d 1; __amdValue.result \x3d factory || mid;},\t   require \x3d function(){define.called \x3d 1;};try{define.called \x3d 0;eval(__bundle);if(define.called\x3d\x3d1)return __amdValue;if((__checkForLegacyModules \x3d __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"));
L=C(L,z,V,w);L===w?R.push(e[S]=w.result):(L instanceof Error&&(console.error("failed to evaluate i18n bundle; url\x3d"+S,L),L={}),R.push(e[S]=/nls\/[^\/]+\/[^\/]+$/.test(S)?L:{root:L,_v1x:1}))}var S=J.toUrl(V+".js");if(e[S])R.push(e[S]);else{var U=J.syncLoadNls(V);U||(U=z(V.replace(/nls\/([^\/]*)\/([^\/]*)$/,"nls/$2/$1")));if(U)R.push(U);else if(p)p.get({url:S,sync:!0,load:Y,error:function(){R.push(e[S]={})}});else try{J.getText(S,!0,Y)}catch(L){R.push(e[S]={})}}});K&&K.apply(null,R)};z=function(B){for(var K,
J=B.split("/"),R=b.global[J[0]],V=1;R&&V<J.length-1;R=R[J[V++]]);R&&((K=R[J[V]])||(K=R[J[V].replace(/-/g,"_")]),K&&(e[B]=K));return K};c.getLocalization=function(B,K,J){var R,V=k(B,K,J);if(E[V])return E[V];y(V,A.isXdUrl(A.toUrl(V+".js"))?A:function(Y,S){H(Y,S,A)},function(Y){R=E[V]=Y});return R};return m.mixin(c,{dynamic:!0,normalize:function(B,K){return/^\./.test(B)?K(B):B},load:y,cache:e,getL10nName:l})})},"dojo/_base/xhr":function(){define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),
function(b,A,q,x,r,m,p,t,h,c,a,f,e,k,l,d){b._xhrObj=l._create;var u=b.config;b.objectToQuery=x.objectToQuery;b.queryToObject=x.queryToObject;b.fieldToObject=m.fieldToObject;b.formToObject=m.toObject;b.formToQuery=m.toQuery;b.formToJson=m.toJson;b._blockAsync=!1;A.add("native-xhr2-blob",function(){if(A("native-xhr2")){var z=new XMLHttpRequest;z.open("GET","/",!0);z.responseType="blob";var w=z.responseType;z.abort();return"blob"===w}});var y=b._contentHandlers=b.contentHandlers={text:function(z){return z.responseText},
json:function(z){return h.fromJson(z.responseText||null)},"json-comment-filtered":function(z){t.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}\x26\x26\nUse djConfig.useCommentedJson\x3dtrue to turn off this message.");z=z.responseText;var w=z.indexOf("/*"),E=z.lastIndexOf("*/");if(-1==w||-1==E)throw Error("JSON was not comment filtered");
return h.fromJson(z.substring(w+2,E))},javascript:function(z){return b.eval(z.responseText)},xml:function(z){var w=z.responseXML;w&&A("dom-qsa2.1")&&!w.querySelectorAll&&A("dom-parser")&&(w=(new DOMParser).parseFromString(z.responseText,"application/xml"));if(A("ie")&&(!w||!w.documentElement)){var E=function(C){return"MSXML"+C+".DOMDocument"};E=["Microsoft.XMLDOM",E(6),E(4),E(3),E(2)];a.some(E,function(C){try{var H=new ActiveXObject(C);H.async=!1;H.loadXML(z.responseText);w=H}catch(B){return!1}return!0})}return w},
"json-comment-optional":function(z){return z.responseText&&/^[^{\[]*\/\*/.test(z.responseText)?y["json-comment-filtered"](z):y.json(z)}};A("native-xhr2")&&(y.arraybuffer=y.blob=y.document=function(z,w){return"blob"!==w.args.handleAs||A("native-xhr2-blob")?z.response:new Blob([z.response],{type:z.getResponseHeader("Content-Type")})});b._ioSetArgs=function(z,w,E,C){var H={args:z,url:z.url},B=null;if(z.form){B=r.byId(z.form);var K=B.getAttributeNode("action");H.url=H.url||(K?K.value:b.doc?b.doc.URL:
null);B=m.toObject(B)}K={};B&&c.mixin(K,B);z.content&&c.mixin(K,z.content);z.preventCache&&(K["dojo.preventCache"]=(new Date).valueOf());H.query=x.objectToQuery(K);H.handleAs=z.handleAs||"text";var J=new p(function(S){S.canceled=!0;w&&w(S);var U=S.ioArgs.error;U||(U=Error("request cancelled"),U.dojoType="cancel",S.ioArgs.error=U);return U});J.addCallback(E);var R=z.load;R&&c.isFunction(R)&&J.addCallback(function(S){return R.call(z,S,H)});var V=z.error;V&&c.isFunction(V)&&J.addErrback(function(S){return V.call(z,
S,H)});var Y=z.handle;Y&&c.isFunction(Y)&&J.addBoth(function(S){return Y.call(z,S,H)});J.addErrback(function(S){return C(S,J)});u.ioPublish&&b.publish&&!1!==H.args.ioPublish&&(J.addCallbacks(function(S){b.publish("/dojo/io/load",[J,S]);return S},function(S){b.publish("/dojo/io/error",[J,S]);return S}),J.addBoth(function(S){b.publish("/dojo/io/done",[J,S]);return S}));J.ioArgs=H;return J};var n=function(z){z=y[z.ioArgs.handleAs](z.ioArgs.xhr,z.ioArgs);return void 0===z?null:z},v=function(z,w){w.ioArgs.args.failOk||
console.error(z);return z},D=function(z){0>=O&&(O=0,u.ioPublish&&b.publish&&(!z||z&&!1!==z.ioArgs.args.ioPublish)&&b.publish("/dojo/io/stop"))},O=0;e.after(k,"_onAction",function(){--O});e.after(k,"_onInFlight",D);b._ioCancelAll=k.cancelAll;b._ioNotifyStart=function(z){u.ioPublish&&b.publish&&!1!==z.ioArgs.args.ioPublish&&(O||b.publish("/dojo/io/start"),O+=1,b.publish("/dojo/io/send",[z]))};b._ioWatch=function(z,w,E,C){z.ioArgs.options=z.ioArgs.args;c.mixin(z,{response:z.ioArgs,isValid:function(H){return w(z)},
isReady:function(H){return E(z)},handleResponse:function(H){return C(z)}});k(z);D(z)};b._ioAddQueryToUrl=function(z){z.query.length&&(z.url+=(-1==z.url.indexOf("?")?"?":"\x26")+z.query,z.query=null)};b.xhr=function(z,w,E){var C=b._ioSetArgs(w,function(J){K&&K.cancel()},n,v),H=C.ioArgs;"postData"in w?H.query=w.postData:"putData"in w?H.query=w.putData:"rawBody"in w?H.query=w.rawBody:(2<arguments.length&&!E||-1==="POST|PUT".indexOf(z.toUpperCase()))&&b._ioAddQueryToUrl(H);var B;A("native-xhr2")&&(B=
{arraybuffer:1,blob:1,document:1});B=B[w.handleAs]?w.handleAs:"text";"blob"!==B||A("native-xhr2-blob")||(B="arraybuffer");B={method:z,handleAs:B,responseType:w.responseType,timeout:w.timeout,withCredentials:w.withCredentials,ioArgs:H};"undefined"!==typeof w.headers&&(B.headers=w.headers);"undefined"!==typeof w.contentType&&(B.headers||(B.headers={}),B.headers["Content-Type"]=w.contentType);"undefined"!==typeof H.query&&(B.data=H.query);"undefined"!==typeof w.sync&&(B.sync=w.sync);b._ioNotifyStart(C);
try{var K=l(H.url,B,!0)}catch(J){return C.cancel(),C}C.ioArgs.xhr=K.response.xhr;K.then(function(){C.resolve(C)}).otherwise(function(J){H.error=J;J.response&&(J.status=J.response.status,J.responseText=J.response.text,J.xhr=J.response.xhr);C.reject(J)});return C};b.xhrGet=function(z){return b.xhr("GET",z)};b.rawXhrPost=b.xhrPost=function(z){return b.xhr("POST",z,!0)};b.rawXhrPut=b.xhrPut=function(z){return b.xhr("PUT",z,!0)};b.xhrDelete=function(z){return b.xhr("DELETE",z)};b._isDocumentOk=function(z){return d.checkStatus(z.status)};
b._getText=function(z){var w;b.xhrGet({url:z,sync:!0,load:function(E){w=E}});return w};c.mixin(b.xhr,{_xhrObj:b._xhrObj,fieldToObject:m.fieldToObject,formToObject:m.toObject,objectToQuery:x.objectToQuery,formToQuery:m.toQuery,formToJson:m.toJson,queryToObject:x.queryToObject,contentHandlers:y,_ioSetArgs:b._ioSetArgs,_ioCancelAll:b._ioCancelAll,_ioNotifyStart:b._ioNotifyStart,_ioWatch:b._ioWatch,_ioAddQueryToUrl:b._ioAddQueryToUrl,_isDocumentOk:b._isDocumentOk,_getText:b._getText,get:b.xhrGet,post:b.xhrPost,
put:b.xhrPut,del:b.xhrDelete});return b.xhr})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(b,A,q){b._name="browser";A.mixin(b,{isBrowser:!0,isFF:q("ff"),isIE:q("ie"),isKhtml:q("khtml"),isWebKit:q("webkit"),isMozilla:q("mozilla"),isMoz:q("mozilla"),isOpera:q("opera"),isSafari:q("safari"),isChrome:q("chrome"),isMac:q("mac"),isIos:q("ios"),isAndroid:q("android"),isWii:q("wii"),isQuirks:q("quirks"),isAir:q("air")});return q})},"dojo/io-query":function(){define(["./_base/lang"],
function(b){var A={};return{objectToQuery:function(q){var x=encodeURIComponent,r=[],m;for(m in q){var p=q[m];if(p!=A[m]){var t=x(m)+"\x3d";if(b.isArray(p))for(var h=0,c=p.length;h<c;++h)r.push(t+x(p[h]));else r.push(t+x(p))}}return r.join("\x26")},queryToObject:function(q){var x=decodeURIComponent;q=q.split("\x26");for(var r={},m,p,t=0,h=q.length;t<h;++t)if(p=q[t],p.length){var c=p.indexOf("\x3d");0>c?(m=x(p),p=""):(m=x(p.slice(0,c)),p=x(p.slice(c+1)));"string"==typeof r[m]&&(r[m]=[r[m]]);b.isArray(r[m])?
r[m].push(p):r[m]=p}return r}}})},"dojo/dom":function(){define(["./sniff","./_base/window","./_base/kernel"],function(b,A,q){if(7>=b("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(m){}var x={};b("ie")?x.byId=function(m,p){if("string"!=typeof m)return m||null;var t=p||A.doc;p=m&&t.getElementById(m);if(!p||p.attributes.id.value!=m&&p.id!=m){t=t.all[m];if(!t||t.nodeName)t=[t];for(var h=0;p=t[h++];)if(p.attributes&&p.attributes.id&&p.attributes.id.value==m||p.id==m)return p}else return p;
return null}:x.byId=function(m,p){return("string"==typeof m?(p||A.doc).getElementById(m):m)||null};q=q.global.document||null;b.add("dom-contains",!(!q||!q.contains));x.isDescendant=b("dom-contains")?function(m,p){return!(!(p=x.byId(p))||!p.contains(x.byId(m)))}:function(m,p){try{for(m=x.byId(m),p=x.byId(p);m;){if(m==p)return!0;m=m.parentNode}}catch(t){}return!1};b.add("css-user-select",function(m,p,t){if(!t)return!1;m=t.style;p=["Khtml","O","Moz","Webkit"];t=p.length;var h="userSelect";do if("undefined"!==
typeof m[h])return h;while(t--&&(h=p[t]+"UserSelect"));return!1});var r=b("css-user-select");x.setSelectable=r?function(m,p){x.byId(m).style[r]=p?"":"none"}:function(m,p){m=x.byId(m);var t=m.getElementsByTagName("*"),h=t.length;if(p)for(m.removeAttribute("unselectable");h--;)t[h].removeAttribute("unselectable");else for(m.setAttribute("unselectable","on");h--;)t[h].setAttribute("unselectable","on")};return x})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(b,A,q){var x=
{global:b.global,doc:b.global.document||null,body:function(r){r=r||b.doc;return r.body||r.getElementsByTagName("body")[0]},setContext:function(r,m){b.global=x.global=r;b.doc=x.doc=m},withGlobal:function(r,m,p,t){var h=b.global;try{return b.global=x.global=r,x.withDoc.call(null,r.document,m,p,t)}finally{b.global=x.global=h}},withDoc:function(r,m,p,t){var h=x.doc,c=q("quirks"),a=q("ie"),f,e;try{b.doc=x.doc=r;b.isQuirks=q.add("quirks","BackCompat"==b.doc.compatMode,!0,!0);if(q("ie")&&(e=r.parentWindow)&&
e.navigator){var k=parseFloat(e.navigator.appVersion.split("MSIE ")[1])||void 0;(f=r.documentMode)&&5!=f&&Math.floor(k)!=f&&(k=f);b.isIE=q.add("ie",k,!0,!0)}p&&"string"==typeof m&&(m=p[m]);return m.apply(p,t||[])}finally{b.doc=x.doc=h,b.isQuirks=q.add("quirks",c,!0,!0),b.isIE=q.add("ie",a,!0,!0)}}};A.mixin(b,x);return x})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(b,A,q,x){var r={fieldToObject:function(m){var p=null;if(m=A.byId(m)){var t=m.name,h=(m.type||
"").toLowerCase();if(t&&h&&!m.disabled)if("radio"==h||"checkbox"==h)m.checked&&(p=m.value);else if(m.multiple)for(p=[],m=[m.firstChild];m.length;)for(t=m.pop();t;t=t.nextSibling)if(1==t.nodeType&&"option"==t.tagName.toLowerCase())t.selected&&p.push(t.value);else{t.nextSibling&&m.push(t.nextSibling);t.firstChild&&m.push(t.firstChild);break}else p=m.value}return p},toObject:function(m){var p={};m=A.byId(m).elements;for(var t=0,h=m.length;t<h;++t){var c=m[t],a=c.name,f=(c.type||"").toLowerCase();if(a&&
f&&0>"file|submit|image|reset|button".indexOf(f)&&!c.disabled){var e=p,k=a;c=r.fieldToObject(c);if(null!==c){var l=e[k];"string"==typeof l?e[k]=[l,c]:b.isArray(l)?l.push(c):e[k]=c}"image"==f&&(p[a+".x"]=p[a+".y"]=p[a].x=p[a].y=0)}}return p},toQuery:function(m){return q.objectToQuery(r.toObject(m))},toJson:function(m,p){return x.stringify(r.toObject(m),null,p?4:0)}};return r})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),
function(b,A,q,x,r,m,p){var t=function(){},h=Object.freeze||function(){},c=b.Deferred=function(a){function f(z){if(l)throw Error("This deferred has already been resolved");k=z;l=!0;e()}function e(){for(var z;!z&&v;){var w=v;v=v.next;if(z=w.progress==t)l=!1;var E=y?w.error:w.resolved;r("config-useDeferredInstrumentation")&&y&&A.instrumentRejected&&A.instrumentRejected(k,!!E);if(E)try{var C=E(k);C&&"function"===typeof C.then?C.then(m.hitch(w.deferred,"resolve"),m.hitch(w.deferred,"reject"),m.hitch(w.deferred,
"progress")):(E=z&&void 0===C,z&&!E&&(y=C instanceof Error),w.deferred[E&&y?"reject":"resolve"](E?k:C))}catch(H){w.deferred.reject(H)}else y?w.deferred.reject(k):w.deferred.resolve(k)}}var k,l,d,u,y,n,v,D=this.promise=new q;this.isResolved=D.isResolved=function(){return 0==u};this.isRejected=D.isRejected=function(){return 1==u};this.isFulfilled=D.isFulfilled=function(){return 0<=u};this.isCanceled=D.isCanceled=function(){return d};this.resolve=this.callback=function(z){this.fired=u=0;this.results=
[z,null];f(z)};this.reject=this.errback=function(z){y=!0;this.fired=u=1;r("config-useDeferredInstrumentation")&&A.instrumentRejected&&A.instrumentRejected(z,!!v);f(z);this.results=[null,z]};this.progress=function(z){for(var w=v;w;){var E=w.progress;E&&E(z);w=w.next}};this.addCallbacks=function(z,w){this.then(z,w,t);return this};D.then=this.then=function(z,w,E){var C=E==t?this:new c(D.cancel);z={resolved:z,error:w,progress:E,deferred:C};v?n=n.next=z:v=n=z;l&&e();return C.promise};var O=this;D.cancel=
this.cancel=function(){if(!l){var z=a&&a(O);l||(z instanceof Error||(z=new x(z)),z.log=!1,O.reject(z))}d=!0};h(D)};m.extend(c,{addCallback:function(a){return this.addCallbacks(m.hitch.apply(b,arguments))},addErrback:function(a){return this.addCallbacks(null,m.hitch.apply(b,arguments))},addBoth:function(a){var f=m.hitch.apply(b,arguments);return this.addCallbacks(f,f)},fired:-1});c.when=b.when=p;return c})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise",
"./promise/instrumentation"],function(b,A,q,x,r){var m=Object.freeze||function(){},p=function(f,e,k,l,d){2===e&&a.instrumentRejected&&0===f.length&&a.instrumentRejected(k,!1,l,d);for(d=0;d<f.length;d++)t(f[d],e,k,l)},t=function(f,e,k,l){var d=f[e],u=f.deferred;if(d)try{var y=d(k);if(0===e)"undefined"!==typeof y&&c(u,e,y);else{if(y&&"function"===typeof y.then){f.cancel=y.cancel;y.then(h(u,1),h(u,2),h(u,0));return}c(u,1,y)}}catch(n){c(u,2,n)}else c(u,e,k);2===e&&a.instrumentRejected&&a.instrumentRejected(k,
!!d,l,u.promise)},h=function(f,e){return function(k){c(f,e,k)}},c=function(f,e,k){if(!f.isCanceled())switch(e){case 0:f.progress(k);break;case 1:f.resolve(k);break;case 2:f.reject(k)}},a=function(f){var e=this.promise=new x,k=this,l,d,u,y=!1,n=[];Error.captureStackTrace&&(Error.captureStackTrace(k,a),Error.captureStackTrace(e,a));this.isResolved=e.isResolved=function(){return 1===l};this.isRejected=e.isRejected=function(){return 2===l};this.isFulfilled=e.isFulfilled=function(){return!!l};this.isCanceled=
e.isCanceled=function(){return y};this.progress=function(D,O){if(l){if(!0===O)throw Error("This deferred has already been fulfilled.");return e}p(n,0,D,null,k);return e};this.resolve=function(D,O){if(l){if(!0===O)throw Error("This deferred has already been fulfilled.");return e}p(n,l=1,d=D,null,k);n=null;return e};var v=this.reject=function(D,O){if(l){if(!0===O)throw Error("This deferred has already been fulfilled.");return e}Error.captureStackTrace&&Error.captureStackTrace(u={},v);p(n,l=2,d=D,u,
k);n=null;return e};this.then=e.then=function(D,O,z){var w=[z,D,O];w.cancel=e.cancel;w.deferred=new a(function(E){return w.cancel&&w.cancel(E)});l&&!n?t(w,l,d,u):n.push(w);return w.deferred.promise};this.cancel=e.cancel=function(D,O){if(!l){f&&(O=f(D),D="undefined"===typeof O?D:O);y=!0;if(!l)return"undefined"===typeof D&&(D=new q),v(D),D;if(2===l&&d===D)return D}else if(!0===O)throw Error("This deferred has already been fulfilled.");};m(e)};a.prototype.toString=function(){return"[object Deferred]"};
r&&r(a);return a})},"dojo/errors/CancelError":function(){define(["./create"],function(b){return b("CancelError",null,null,{dojoType:"cancel",log:!1})})},"dojo/errors/create":function(){define(["../_base/lang"],function(b){return function(A,q,x,r){x=x||Error;var m=function(p){if(x===Error){Error.captureStackTrace&&Error.captureStackTrace(this,m);var t=Error.call(this,p),h;for(h in t)t.hasOwnProperty(h)&&(this[h]=t[h]);this.message=p;this.stack=t.stack}else x.apply(this,arguments);q&&q.apply(this,arguments)};
m.prototype=b.delegate(x.prototype,r);m.prototype.name=A;return m.prototype.constructor=m}})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(b){function A(){throw new TypeError("abstract");}return b.extend(function(){},{then:function(q,x,r){A()},cancel:function(q,x){A()},isResolved:function(){A()},isRejected:function(){A()},isFulfilled:function(){A()},isCanceled:function(){A()},"finally":function(q){return this.then(function(x){var r=q();return r&&"function"===typeof r.then?r.then(function(){return x}):
x},function(x){var r=q();if(r&&"function"===typeof r.then)return r.then(function(){throw x;});throw x;})},always:function(q){return this.then(q,q)},"catch":function(q){return this.then(null,q)},otherwise:function(q){return this.then(null,q)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/promise/instrumentation":function(){define(["./tracer","../has","../_base/lang","../_base/array"],function(b,A,q,x){function r(f,e,k){if(!f||
!1!==f.log){var l="";f&&f.stack&&(l+=f.stack);e&&e.stack&&(l+="\n    ----------------------------------------\n    rejected"+e.stack.split("\n").slice(1).join("\n").replace(/^\s+/," "));k&&k.stack&&(l+="\n    ----------------------------------------\n"+k.stack);console.error(f,l)}}function m(f,e,k,l){e||r(f,k,l)}function p(f,e,k,l){x.some(h,function(d){if(d.error===f)return e&&(d.handled=!0),!0})||h.push({error:f,rejection:k,handled:e,deferred:l,timestamp:(new Date).getTime()});c||(c=setTimeout(t,
a))}function t(){var f=(new Date).getTime(),e=f-a;h=x.filter(h,function(k){return k.timestamp<e?(k.handled||r(k.error,k.rejection,k.deferred),!1):!0});c=h.length?setTimeout(t,h[0].timestamp+a-f):!1}A.add("config-useDeferredInstrumentation","report-unhandled-rejections");var h=[],c=!1,a=1E3;return function(f){var e=A("config-useDeferredInstrumentation");if(e){b.on("resolved",q.hitch(console,"log","resolved"));b.on("rejected",q.hitch(console,"log","rejected"));b.on("progress",q.hitch(console,"log",
"progress"));var k=[];"string"===typeof e&&(k=e.split(","),e=k.shift());if("report-rejections"===e)f.instrumentRejected=m;else if("report-unhandled-rejections"===e||!0===e||1===e)f.instrumentRejected=p,a=parseInt(k[0],10)||a;else throw Error("Unsupported instrumentation usage \x3c"+e+"\x3e");}}})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(b,A,q){function x(p){setTimeout(function(){m.apply(r,p)},0)}var r=new q,m=r.emit;r.emit=null;A.prototype.trace=
function(){var p=b._toArray(arguments);this.then(function(t){x(["resolved",t].concat(p))},function(t){x(["rejected",t].concat(p))},function(t){x(["progress",t].concat(p))});return this};A.prototype.traceRejected=function(){var p=b._toArray(arguments);this.otherwise(function(t){x(["rejected",t].concat(p))});return this};return r})},"dojo/Evented":function(){define(["./aspect","./on"],function(b,A){function q(){}var x=b.after;q.prototype={on:function(r,m){return A.parse(this,r,m,function(p,t){return x(p,
"on"+t,m,!0)})},emit:function(r,m){var p=[this];p.push.apply(p,arguments);return A.emit.apply(A,p)}};return q})},"dojo/aspect":function(){define([],function(){function b(p,t,h,c){var a=p[t],f="around"==t;if(f){var e=h(function(){return a.advice(this,arguments)});var k={remove:function(){e&&(e=p=h=null)},advice:function(l,d){return e?e.apply(l,d):a.advice(l,d)}}}else k={remove:function(){if(k.advice){var l=k.previous,d=k.next;d||l?(l?l.next=d:p[t]=d,d&&(d.previous=l)):delete p[t];p=h=k.advice=null}},
id:p.nextId++,advice:h,receiveArguments:c};if(a&&!f)if("after"==t){for(;a.next&&(a=a.next););a.next=k;k.previous=a}else"before"==t&&(p[t]=k,k.next=a,a.previous=k);else p[t]=k;return k}function A(p){return function(t,h,c,a){var f=t[h],e;f&&f.target==t||(t[h]=e=function(){for(var k=e.nextId,l=arguments,d=e.before;d;)d.advice&&(l=d.advice.apply(this,l)||l),d=d.next;if(e.around)var u=e.around.advice(this,l);for(d=e.after;d&&d.id<k;){if(d.advice)if(d.receiveArguments){var y=d.advice.apply(this,l);u=y===
q?u:y}else u=d.advice.call(this,u,l);d=d.next}return u},f&&(e.around={advice:function(k,l){return f.apply(k,l)}}),e.target=t,e.nextId=e.nextId||0);t=b(e||f,p,c,a);c=null;return t}}var q,x=A("after"),r=A("before"),m=A("around");return{before:r,around:m,after:x}})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(b,A,q){function x(w,E,C,H,B){if(H=E.match(/(.*):(.*)/))return E=H[2],H=H[1],t.selector(H,E).call(B,w,C);q("touch")&&(h.test(E)&&(C=z(C)),
q("event-orientationchange")||"orientationchange"!=E||(E="resize",w=window,C=z(C)));k&&(C=k(C));if(w.addEventListener){var K=E in f,J=K?f[E]:E;w.addEventListener(J,C,K);return{remove:function(){w.removeEventListener(J,C,K)}}}if(y&&w.attachEvent)return y(w,"on"+E,C);throw Error("Target must be an event emitter");}function r(){this.cancelable=!1;this.defaultPrevented=!0}function m(){this.bubbles=!1}var p=window.ScriptEngineMajorVersion;q.add("jscript",p&&p()+ScriptEngineMinorVersion()/10);q.add("event-orientationchange",
q("touch")&&!q("android"));q.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);q.add("event-focusin",function(w,E,C){return"onfocusin"in C});q("touch")&&q.add("touch-can-modify-event-delegate",function(){var w=function(){};w.prototype=document.createEvent("MouseEvents");try{var E=new w;E.target=null;return null===E.target}catch(C){return!1}});var t=function(w,E,C,H){return"function"!=typeof w.on||"function"==typeof E||w.nodeType?
t.parse(w,E,C,x,H,this):w.on(E,C)};t.pausable=function(w,E,C,H){var B;w=t(w,E,function(){if(!B)return C.apply(this,arguments)},H);w.pause=function(){B=!0};w.resume=function(){B=!1};return w};t.once=function(w,E,C,H){var B=t(w,E,function(){B.remove();return C.apply(this,arguments)});return B};t.parse=function(w,E,C,H,B,K){var J;if(E.call)return E.call(K,w,C);E instanceof Array?J=E:-1<E.indexOf(",")&&(J=E.split(/\s*,\s*/));if(J){var R=[];E=0;for(var V;V=J[E++];)R.push(t.parse(w,V,C,H,B,K));R.remove=
function(){for(var Y=0;Y<R.length;Y++)R[Y].remove()};return R}return H(w,E,C,B,K)};var h=/^touch/;t.matches=function(w,E,C,H,B){B=B&&"function"==typeof B.matches?B:A.query;H=!1!==H;1!=w.nodeType&&(w=w.parentNode);for(;!B.matches(w,E,C);)if(w==C||!1===H||!(w=w.parentNode)||1!=w.nodeType)return!1;return w};t.selector=function(w,E,C){return function(H,B){function K(V){return t.matches(V,w,H,C,J)}var J="function"==typeof w?{matches:w}:this,R=E.bubble;return R?t(H,R(K),B):t(H,E,function(V){var Y=K(V.target);
if(Y)return V.selectorTarget=Y,B.call(Y,V)})}};var c=[].slice,a=t.emit=function(w,E,C){var H=c.call(arguments,2),B="on"+E;if("parentNode"in w){var K=H[0]={},J;for(J in C)K[J]=C[J];K.preventDefault=r;K.stopPropagation=m;K.target=w;K.type=E;C=K}do w[B]&&w[B].apply(w,H);while(C&&C.bubbles&&(w=w.parentNode));return C&&C.cancelable&&C},f=q("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!q("event-stopimmediatepropagation"))var e=function(){this.modified=this.immediatelyStopped=!0},k=function(w){return function(E){if(!E.immediatelyStopped)return E.stopImmediatePropagation=
e,w.apply(this,arguments)}};if(q("dom-addeventlistener"))t.emit=function(w,E,C){if(w.dispatchEvent&&document.createEvent){var H=(w.ownerDocument||document).createEvent("HTMLEvents");H.initEvent(E,!!C.bubbles,!!C.cancelable);for(var B in C)B in H||(H[B]=C[B]);return w.dispatchEvent(H)&&H}return a.apply(t,arguments)};else{t._fixEvent=function(w,E){w||(w=(E&&(E.ownerDocument||E.document||E).parentWindow||window).event);if(!w)return w;try{l&&w.type==l.type&&w.srcElement==l.target&&(w=l)}catch(C){}if(!w.target)switch(w.target=
w.srcElement,w.currentTarget=E||w.srcElement,"mouseover"==w.type&&(w.relatedTarget=w.fromElement),"mouseout"==w.type&&(w.relatedTarget=w.toElement),w.stopPropagation||(w.stopPropagation=n,w.preventDefault=v),w.type){case "keypress":E="charCode"in w?w.charCode:w.keyCode,10==E?(E=0,w.keyCode=13):13==E||27==E?E=0:3==E&&(E=99),w.charCode=E,E=w,E.keyChar=E.charCode?String.fromCharCode(E.charCode):"",E.charOrCode=E.keyChar||E.keyCode}return w};var l,d=function(w){this.handle=w};d.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};
var u=function(w){return function(E){E=t._fixEvent(E,this);var C=w.call(this,E);E.modified&&(l||setTimeout(function(){l=null}),l=E);return C}},y=function(w,E,C){C=u(C);if(((w.ownerDocument?w.ownerDocument.parentWindow:w.parentWindow||w.window||window)!=top||5.8>q("jscript"))&&!q("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var H=w[E];if(!H||!H.listeners){var B=H;H=Function("event","var callee \x3d arguments.callee; for(var i \x3d 0; i\x3ccallee.listeners.length; i++){var listener \x3d _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");
H.listeners=[];w[E]=H;H.global=this;B&&H.listeners.push(_dojoIEListeners_.push(B)-1)}H.listeners.push(w=H.global._dojoIEListeners_.push(C)-1);return new d(w)}return b.after(w,E,C,!0)},n=function(){this.cancelBubble=!0},v=t._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(w){}this.defaultPrevented=!0;this.returnValue=!1;this.modified=!0}}if(q("touch"))var D=function(){},O=window.orientation,z=function(w){return function(E){var C=E.corrected;if(!C){var H=
E.type;try{delete E.type}catch(J){}if(E.type){if(q("touch-can-modify-event-delegate"))D.prototype=E,C=new D;else{C={};for(var B in E)C[B]=E[B]}C.preventDefault=function(){E.preventDefault()};C.stopPropagation=function(){E.stopPropagation()}}else C=E,C.type=H;E.corrected=C;if("resize"==H){if(O==window.orientation)return null;O=window.orientation;C.type="orientationchange";return w.call(this,C)}"rotation"in C||(C.rotation=0,C.scale=1);if(window.TouchEvent&&E instanceof TouchEvent){H=C.changedTouches[0];
for(var K in H)delete C[K],C[K]=H[K]}}return w.call(this,C)}};return t})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(b,A){return function(q,x,r,m){var p=q&&"function"===typeof q.then,t=p&&q instanceof A;if(!p)return 1<arguments.length?x?x(q):q:(new b).resolve(q);t||(p=new b(q.cancel),q.then(p.resolve,p.reject,p.progress),q=p.promise);return x||r||m?q.then(x,r,m):q}})},"dojo/_base/json":function(){define(["./kernel","../json"],function(b,A){b.fromJson=function(q){return eval("("+
q+")")};b._escapeString=A.stringify;b.toJsonIndentStr="\t";b.toJson=function(q,x){return A.stringify(q,function(r,m){return m&&(r=m.__json__||m.json,"function"==typeof r)?r.call(m):m},x&&b.toJsonIndentStr)};return b})},"dojo/request/watch":function(){define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../_base/window ../has!host-browser?dom-addeventlistener?:../on:".split(" "),function(b,A,q,x,r,m){function p(){for(var a=+new Date,f=0,e;f<c.length&&(e=c[f]);f++){var k=
e.response,l=k.options;e.isCanceled&&e.isCanceled()||e.isValid&&!e.isValid(k)?(c.splice(f--,1),t._onAction&&t._onAction()):e.isReady&&e.isReady(k)?(c.splice(f--,1),e.handleResponse(k),t._onAction&&t._onAction()):e.startTime&&e.startTime+(l.timeout||0)<a&&(c.splice(f--,1),e.cancel(new A("Timeout exceeded",k)),t._onAction&&t._onAction())}t._onInFlight&&t._onInFlight(e);c.length||(clearInterval(h),h=null)}function t(a){a.response.options.timeout&&(a.startTime=+new Date);a.isFulfilled()||(c.push(a),h||
(h=setInterval(p,50)),a.response.options.sync&&p())}var h=null,c=[];t.cancelAll=function(){try{x.forEach(c,function(a){try{a.cancel(new q("All requests canceled."))}catch(f){}})}catch(a){}};r&&m&&r.doc.attachEvent&&m(r.global,"unload",function(){t.cancelAll()});return t})},"dojo/request/util":function(){define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise ../has".split(" "),function(b,A,q,x,r,m,p,t,h){function c(l){return h("native-arraybuffer")&&
l instanceof ArrayBuffer}function a(l){return h("native-blob")&&l instanceof Blob}function f(l){return k(l)}function e(l){return void 0!==l.data?l.data:l.text}b.deepCopy=function(l,d){for(var u in d){var y=l[u],n=d[u];if("__proto__"!==u&&y!==n){var v=n,D;if(D=v&&"object"===typeof v)D=v,D=!(h("native-formdata")&&D instanceof FormData);!D||("undefined"!==typeof Element?v instanceof Element:1===v.nodeType)||a(v)||c(v)?l[u]=n:"[object Date]"===Object.prototype.toString.call(n)?l[u]=new Date(n):p.isArray(n)?
l[u]=b.deepCopyArray(n):y&&"object"===typeof y?b.deepCopy(y,n):l[u]=b.deepCopy({},n)}}return l};b.deepCopyArray=function(l){for(var d=[],u=0,y=l.length;u<y;u++){var n=l[u];"object"===typeof n?d.push(b.deepCopy({},n)):d.push(n)}return d};b.deepCreate=function(l,d){d=d||{};var u=p.delegate(l),y,n;for(y in l)(n=l[y])&&"object"===typeof n&&(u[y]=b.deepCreate(n,d[y]));return b.deepCopy(u,d)};var k=Object.freeze||function(l){return l};b.deferred=function(l,d,u,y,n,v){var D=new x(function(z){d&&d(D,l);return z&&
(z instanceof A||z instanceof q)?z:new q("Request canceled",l)});D.response=l;D.isValid=u;D.isReady=y;D.handleResponse=n;u=D.then(f).otherwise(function(z){z.response=l;throw z;});b.notify&&u.then(p.hitch(b.notify,"emit","load"),p.hitch(b.notify,"emit","error"));y=u.then(e);n=new t;for(var O in y)y.hasOwnProperty(O)&&(n[O]=y[O]);n.response=u;k(n);v&&D.then(function(z){v.call(D,z)},function(z){v.call(D,l,z)});D.promise=n;D.then=n.then;return D};b.addCommonMethods=function(l,d){m.forEach(d||["GET","POST",
"PUT","DELETE"],function(u){l[("DELETE"===u?"DEL":u).toLowerCase()]=function(y,n){n=p.delegate(n||{});n.method=u;return l(y,n)}})};b.parseArgs=function(l,d,u){var y=d.data,n=d.query;!y||u||"object"!==typeof y||h("native-xhr2")&&(c(y)||a(y))||(d.data=r.objectToQuery(y));n?("object"===typeof n&&(n=r.objectToQuery(n)),d.preventCache&&(n+=(n?"\x26":"")+"request.preventCache\x3d"+ +new Date)):d.preventCache&&(n="request.preventCache\x3d"+ +new Date);l&&n&&(l+=(~l.indexOf("?")?"\x26":"?")+n);return{url:l,
options:d,getHeader:function(v){return null}}};b.checkStatus=function(l){l=l||0;return 200<=l&&300>l||304===l||1223===l||!l}})},"dojo/errors/RequestError":function(){define(["./create"],function(b){return b("RequestError",function(A,q){this.response=q})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(b,A){return b("RequestTimeoutError",null,A,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers",
"./util","../has"],function(b,A,q,x,r){function m(d,u){var y=d.xhr;d.status=d.xhr.status;try{d.text=y.responseText}catch(v){}"xml"===d.options.handleAs&&(d.data=y.responseXML);if(u)this.reject(u);else{try{q(d)}catch(v){var n=v}x.checkStatus(y.status)?n?this.reject(n):this.resolve(d):(u=n?new b("Unable to load "+d.url+" status: "+y.status+" and an error in handleAs: transformation of response",d):new b("Unable to load "+d.url+" status: "+y.status,d),this.reject(u))}}function p(d){return this.xhr.getResponseHeader(d)}
function t(d,u,y){var n=r("native-formdata")&&u&&u.data&&u.data instanceof FormData,v=x.parseArgs(d,x.deepCreate(l,u),n);d=v.url;u=v.options;var D=!u.data&&"POST"!==u.method&&"PUT"!==u.method;10>=r("ie")&&(d=d.split("#")[0]);var O,z=x.deferred(v,a,c,e,m,function(){O&&O()}),w=v.xhr=t._create();if(!w)return z.cancel(new b("XHR was not created")),y?z:z.promise;v.getHeader=p;f&&(O=f(w,z,v,u.uploadProgress));var E="undefined"===typeof u.data?null:u.data,C=!u.sync,H=u.method;try{w.open(H,d,C,u.user||k,
u.password||k);u.withCredentials&&(w.withCredentials=u.withCredentials);r("native-response-type")&&u.handleAs in h&&(w.responseType=h[u.handleAs]);var B=u.headers;d=n||D?!1:"application/x-www-form-urlencoded";if(B)for(var K in B)"content-type"===K.toLowerCase()?d=B[K]:B[K]&&w.setRequestHeader(K,B[K]);d&&!1!==d&&w.setRequestHeader("Content-Type",d);B&&"X-Requested-With"in B||w.setRequestHeader("X-Requested-With","XMLHttpRequest");x.notify&&x.notify.emit("send",v,z.promise.cancel);w.send(E)}catch(J){z.reject(J)}A(z);
w=null;return y?z:z.promise}r.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});r.add("dojo-force-activex-xhr",function(){return r("activex")&&"file:"===window.location.protocol});r.add("native-xhr2",function(){if(r("native-xhr")&&!r("dojo-force-activex-xhr")){var d=new XMLHttpRequest;return"undefined"!==typeof d.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof d.upload)}});r.add("native-formdata",function(){return"undefined"!==typeof FormData});r.add("native-blob",
function(){return"undefined"!==typeof Blob});r.add("native-arraybuffer",function(){return"undefined"!==typeof ArrayBuffer});r.add("native-response-type",function(){return r("native-xhr")&&"undefined"!==typeof(new XMLHttpRequest).responseType});r.add("native-xhr2-blob",function(){if(r("native-response-type")){var d=new XMLHttpRequest;d.open("GET","https://dojotoolkit.org/",!0);d.responseType="blob";var u=d.responseType;d.abort();return"blob"===u}});var h={blob:r("native-xhr2-blob")?"blob":"arraybuffer",
document:"document",arraybuffer:"arraybuffer"};if(r("native-xhr2")){var c=function(d){return!this.isFulfilled()};var a=function(d,u){u.xhr.abort()};var f=function(d,u,y,n){function v(E){u.handleResponse(y)}function D(E){E=new b("Unable to load "+y.url+" status: "+E.target.status,y);u.handleResponse(y,E)}function O(E,C){y.transferType=E;C.lengthComputable?(y.loaded=C.loaded,y.total=C.total,u.progress(y)):3===y.xhr.readyState&&(y.loaded="loaded"in C?C.loaded:C.position,u.progress(y))}function z(E){return O("download",
E)}function w(E){return O("upload",E)}d.addEventListener("load",v,!1);d.addEventListener("error",D,!1);d.addEventListener("progress",z,!1);n&&d.upload&&d.upload.addEventListener("progress",w,!1);return function(){d.removeEventListener("load",v,!1);d.removeEventListener("error",D,!1);d.removeEventListener("progress",z,!1);d.upload.removeEventListener("progress",w,!1);d=null}}}else{c=function(d){return d.xhr.readyState};var e=function(d){return 4===d.xhr.readyState};a=function(d,u){d=u.xhr;u=typeof d.abort;
"function"!==u&&"object"!==u&&"unknown"!==u||d.abort()}}var k,l={data:null,query:null,sync:!1,method:"GET"};t._create=function(){throw Error("XMLHTTP not available");};if(r("native-xhr")&&!r("dojo-force-activex-xhr"))t._create=function(){return new XMLHttpRequest};else if(r("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),t._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(d){try{new ActiveXObject("Microsoft.XMLHTTP"),t._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(u){}}x.addCommonMethods(t);
return t})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../selector/_loader"],function(b,A,q,x){function r(a){var f=c[a.options.handleAs];a.data=f?f(a):a.data||a.text;return a}x.add("activex","undefined"!==typeof ActiveXObject);x.add("dom-parser",function(a){return"DOMParser"in a});if(x("activex")){var m=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"],p;var t=function(a){function f(l){try{var d=
new ActiveXObject(l);d.async=!1;d.loadXML(k);e=d;p=l}catch(u){return!1}return!0}var e=a.data,k=a.text;e&&x("dom-qsa2.1")&&!e.querySelectorAll&&x("dom-parser")&&(e=(new DOMParser).parseFromString(k,"application/xml"));e&&e.documentElement||p&&f(p)||q.some(m,f);return e}}var h=function(a){return x("native-xhr2-blob")||"blob"!==a.options.handleAs||"undefined"===typeof Blob?a.xhr.response:new Blob([a.xhr.response],{type:a.xhr.getResponseHeader("Content-Type")})},c={javascript:function(a){return A.eval(a.text||
"")},json:function(a){return b.parse(a.text||null)},xml:t,blob:h,arraybuffer:h,document:h};r.register=function(a,f){c[a]=f};return r})},"dojo/selector/_loader":function(){define(["../has","require"],function(b,A){if("undefined"!==typeof document){var q=document.createElement("div");b.add("dom-qsa2.1",!!q.querySelectorAll);b.add("dom-qsa3",function(){try{return q.innerHTML="\x3cp class\x3d'TEST'\x3e\x3c/p\x3e",1==q.querySelectorAll(".TEST:empty").length}catch(r){}})}var x;return{load:function(r,m,
p,t){if(t&&t.isBuild)p();else{t=A;r="default"==r?b("config-selectorEngine")||"css3":r;r="css2"==r||"lite"==r?"./lite":"css2.1"==r?b("dom-qsa2.1")?"./lite":"./acme":"css3"==r?b("dom-qsa3")?"./lite":"./acme":"acme"==r?"./acme":(t=m)&&r;if("?"==r.charAt(r.length-1)){r=r.substring(0,r.length-1);var h=!0}if(h&&(b("dom-compliant-qsa")||x))return p(x);t([r],function(c){"./lite"!=r&&(x=c);p(c)})}}}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),
function(b,A,q,x,r,m,p,t,h,c,a){function f(w,E){w.canDelete&&u._remove(w.id,E.options.frameDoc,!0)}function e(w){z&&z.length&&(r.forEach(z,function(E){u._remove(E.id,E.frameDoc);E.frameDoc=null}),z=[]);return w.options.jsonp?!w.data:!0}function k(w){return!!this.scriptLoaded}function l(w){return(w=w.options.checkString)&&eval("typeof("+w+') !\x3d\x3d "undefined"')}function d(w,E){if(this.canDelete){var C=this.response.options;z.push({id:this.id,frameDoc:C.ioArgs?C.ioArgs.frameDoc:C.frameDoc});C.ioArgs&&
(C.ioArgs.frameDoc=null);C.frameDoc=null}E?this.reject(E):this.resolve(w)}function u(w,E,C){var H=q.parseArgs(w,q.deepCopy({},E));w=H.url;E=H.options;var B=q.deferred(H,f,e,E.jsonp?null:E.checkString?l:k,d);m.mixin(B,{id:y+n++,canDelete:!1});E.jsonp&&((new RegExp("[?\x26]"+E.jsonp+"\x3d")).test(w)||(w+=(~w.indexOf("?")?"\x26":"?")+E.jsonp+"\x3d"+(E.frameDoc?"parent.":"")+y+"_callbacks."+B.id),B.canDelete=!0,O[B.id]=function(R){H.data=R;B.handleResponse(H)});q.notify&&q.notify.emit("send",H,B.promise.cancel);
if(!E.canAttach||E.canAttach(B)){var K=u._attach(B.id,w,E.frameDoc,function(R){if(!(R instanceof Error)){var V=Error("Error loading "+(R.target?R.target.src:"script"));V.source=R;R=V}B.reject(R);u._remove(B.id,E.frameDoc,!0)});if(!E.jsonp&&!E.checkString)var J=p(K,v,function(R){if("load"===R.type||D.test(K.readyState))J.remove(),B.scriptLoaded=R})}A(B);return C?B:B.promise}c.add("script-readystatechange",function(w,E){return"undefined"!==typeof E.createElement("script").onreadystatechange&&("undefined"===
typeof w.opera||"[object Opera]"!==w.opera.toString())});var y=b.id.replace(/[\/\.\-]/g,"_"),n=0,v=c("script-readystatechange")?"readystatechange":"load",D=/complete|loaded/,O=x.global[y+"_callbacks"]={},z=[];u.get=u;u._attach=function(w,E,C,H){C=C||a.doc;var B=C.createElement("script");if(H)p.once(B,"error",H);B.type="text/javascript";try{B.src=E}catch(K){H&&H(B)}B.id=w;B.async=!0;B.charset="utf-8";return C.getElementsByTagName("head")[0].appendChild(B)};u._remove=function(w,E,C){h.destroy(t.byId(w,
E));O[w]&&(C?O[w]=function(){delete O[w]}:delete O[w])};u._callbacksProperty=y+"_callbacks";return u})},"dojo/dom-construct":function(){define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),function(b,A,q,x,r,m){function p(y,n){var v=n.parentNode;v&&v.insertBefore(y,n)}function t(y){if("innerHTML"in y)try{y.innerHTML="";return}catch(v){}for(var n;n=y.lastChild;)y.removeChild(n)}var h={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],
td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},c=/<\s*([\w:]+)/,a={},f=0,e="__"+A._scopeName+"ToDomId",k;for(k in h)h.hasOwnProperty(k)&&(A=h[k],A.pre="option"==k?'\x3cselect multiple\x3d"multiple"\x3e':"\x3c"+A.join("\x3e\x3c")+"\x3e",A.post="\x3c/"+A.reverse().join("\x3e\x3c/")+"\x3e");var l;8>=q("ie")&&(l=function(y){y.__dojo_html5_tested="yes";var n=d("div",{innerHTML:"\x3cnav\x3ea\x3c/nav\x3e",style:{visibility:"hidden"}},
y.body);1!==n.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(v){y.createElement(v)});u(n)});b.toDom=function(y,n){n=n||x.doc;var v=n[e];v||(n[e]=v=++f+"",a[v]=n.createElement("div"));8>=q("ie")&&!n.__dojo_html5_tested&&n.body&&l(n);y+="";var D=y.match(c),O=D?D[1].toLowerCase():"";v=a[v];if(D&&h[O])for(D=h[O],v.innerHTML=D.pre+y+D.post,y=D.length;y;--y)v=v.firstChild;
else v.innerHTML=y;if(1==v.childNodes.length)return v.removeChild(v.firstChild);for(y=n.createDocumentFragment();n=v.firstChild;)y.appendChild(n);return y};b.place=function(y,n,v){n=r.byId(n);"string"==typeof y&&(y=/^\s*</.test(y)?b.toDom(y,n.ownerDocument):r.byId(y));if("number"==typeof v){var D=n.childNodes;!D.length||D.length<=v?n.appendChild(y):p(y,D[0>v?0:v])}else switch(v){case "before":p(y,n);break;case "after":v=y;(D=n.parentNode)&&(D.lastChild==n?D.appendChild(v):D.insertBefore(v,n.nextSibling));
break;case "replace":n.parentNode.replaceChild(y,n);break;case "only":b.empty(n);n.appendChild(y);break;case "first":if(n.firstChild){p(y,n.firstChild);break}default:n.appendChild(y)}return y};var d=b.create=function(y,n,v,D){var O=x.doc;v&&(v=r.byId(v),O=v.ownerDocument);"string"==typeof y&&(y=O.createElement(y));n&&m.set(y,n);v&&b.place(y,v,D);return y};b.empty=function(y){t(r.byId(y))};var u=b.destroy=function(y){if(y=r.byId(y)){var n=y;y=y.parentNode;n.firstChild&&t(n);y&&(q("ie")&&y.canHaveChildren&&
"removeNode"in n?n.removeNode(!1):y.removeChild(n))}}})},"dojo/dom-attr":function(){define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),function(b,A,q,x,r,m){function p(c,a){c=c.getAttributeNode&&c.getAttributeNode(a);return!!c&&c.specified}var t={innerHTML:1,textContent:1,className:1,htmlFor:A("ie")?1:0,value:1},h={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};b.has=function(c,a){var f=a.toLowerCase();return!!t[m.names[f]||a]||p(x.byId(c),h[f]||
a)};b.get=function(c,a){c=x.byId(c);var f=a.toLowerCase(),e=m.names[f]||a,k=c[e];if(t[e]&&"undefined"!=typeof k)return k;if("textContent"==e)return m.get(c,e);if("href"!=e&&("boolean"==typeof k||q.isFunction(k)))return k;a=h[f]||a;return p(c,a)?c.getAttribute(a):null};b.set=function(c,a,f){c=x.byId(c);if(2==arguments.length){for(var e in a)b.set(c,e,a[e]);return c}e=a.toLowerCase();var k=m.names[e]||a,l=t[k];if("style"==k&&"string"!=typeof f)return r.set(c,f),c;if(l||"boolean"==typeof f||q.isFunction(f))return m.set(c,
a,f);c.setAttribute(h[e]||a,f);return c};b.remove=function(c,a){x.byId(c).removeAttribute(h[a.toLowerCase()]||a)};b.getNodeProp=function(c,a){c=x.byId(c);var f=a.toLowerCase(),e=m.names[f]||a;if(e in c&&"href"!=e)return c[e];a=h[f]||a;return p(c,a)?c.getAttribute(a):null}})},"dojo/dom-style":function(){define(["./sniff","./dom","./_base/window"],function(b,A,q){function x(k,l,d){l=l.toLowerCase();if("auto"==d){if("height"==l)return k.offsetHeight;if("width"==l)return k.offsetWidth}if("fontweight"==
l)switch(d){case 700:return"bold";default:return"normal"}l in a||(a[l]=f.test(l));return a[l]?p(k,d):d}var r={};var m=b("webkit")?function(k){if(1==k.nodeType){var l=k.ownerDocument.defaultView;var d=l.getComputedStyle(k,null);!d&&k.style&&(k.style.display="",d=l.getComputedStyle(k,null))}return d||{}}:b("ie")&&(9>b("ie")||b("quirks"))?function(k){return 1==k.nodeType&&k.currentStyle?k.currentStyle:{}}:function(k){if(1===k.nodeType){var l=k.ownerDocument.defaultView;return(l.opener?l:q.global.window).getComputedStyle(k,
null)}return{}};r.getComputedStyle=m;var p=b("ie")?function(k,l){if(!l)return 0;if("medium"==l)return 4;if(l.slice&&"px"==l.slice(-2))return parseFloat(l);var d=k.style,u=k.runtimeStyle,y=d.left,n=u.left;u.left=k.currentStyle.left;try{d.left=l,l=d.pixelLeft}catch(v){l=0}d.left=y;u.left=n;return l}:function(k,l){return parseFloat(l)||0};r.toPixelValue=p;var t=function(k,l){try{return k.filters.item("DXImageTransform.Microsoft.Alpha")}catch(d){return l?{}:null}},h=9>b("ie")||10>b("ie")&&b("quirks")?
function(k){try{return t(k).Opacity/100}catch(l){return 1}}:function(k){return m(k).opacity},c=9>b("ie")||10>b("ie")&&b("quirks")?function(k,l){""===l&&(l=1);var d=100*l;1===l?(k.style.zoom="",t(k)&&(k.style.filter=k.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,""))):(k.style.zoom=1,t(k)?t(k,1).Opacity=d:k.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d"+d+")",t(k,1).Enabled=!0);if("tr"==k.tagName.toLowerCase())for(k=k.firstChild;k;k=k.nextSibling)"td"==
k.tagName.toLowerCase()&&c(k,l);return l}:function(k,l){return k.style.opacity=l},a={left:!0,top:!0},f=/margin|padding|width|height|max|min|offset/,e={cssFloat:1,styleFloat:1,"float":1};r.get=function(k,l){var d=A.byId(k),u=arguments.length;if(2==u&&"opacity"==l)return h(d);l=e[l]?"cssFloat"in d.style?"cssFloat":"styleFloat":l;var y=r.getComputedStyle(d);return 1==u?y:x(d,l,y[l]||d.style[l])};r.set=function(k,l,d){var u=A.byId(k),y=arguments.length,n="opacity"==l;l=e[l]?"cssFloat"in u.style?"cssFloat":
"styleFloat":l;if(3==y)return n?c(u,d):u.style[l]=d;for(var v in l)r.set(k,v,l[v]);return r.getComputedStyle(u)};return r})},"dojo/dom-prop":function(){define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),function(b,A,q,x,r,m,p,t){function h(e){var k="";e=e.childNodes;for(var l=0,d;d=e[l];l++)8!=d.nodeType&&(k=1==d.nodeType?k+h(d):k+d.nodeValue);return k}var c={},a=1,f=A._scopeName+"attrid";q.add("dom-textContent",function(e,k,l){return"textContent"in
l});b.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"};b.get=function(e,k){e=r.byId(e);var l=k.toLowerCase();k=b.names[l]||k;return"textContent"!=k||q("dom-textContent")?e[k]:h(e)};b.set=function(e,k,l){e=r.byId(e);if(2==arguments.length&&"string"!=typeof k){for(var d in k)b.set(e,d,k[d]);return e}d=k.toLowerCase();d=b.names[d]||k;if("style"==d&&"string"!=
typeof l)return m.set(e,l),e;if("innerHTML"==d)return q("ie")&&e.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(p.empty(e),e.appendChild(p.toDom(l,e.ownerDocument))):e[d]=l,e;if("textContent"==d&&!q("dom-textContent"))return p.empty(e),e.appendChild(e.ownerDocument.createTextNode(l)),e;if(x.isFunction(l)){var u=e[f];u||(u=a++,e[f]=u);c[u]||(c[u]={});var y=c[u][d];if(y)t.disconnect(y);else try{delete e[d]}catch(n){}l?c[u][d]=t.connect(e,d,l):e[d]=null;return e}e[d]=
l;return e}})},"dojo/_base/connect":function(){define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),function(b,A,q,x,r,m,p,t){function h(d,u,y,n,v){n=t.hitch(y,n);if(!d||!d.addEventListener&&!d.attachEvent)return x.after(d||b.global,u,n,!0);"string"==typeof u&&"on"==u.substring(0,2)&&(u=u.substring(2));d||(d=b.global);if(!v)switch(u){case "keypress":u=k;break;case "mouseenter":u=m.enter;break;case "mouseleave":u=m.leave}return A(d,u,n,v)}function c(d){d.keyChar=
d.charCode?String.fromCharCode(d.charCode):"";d.charOrCode=d.keyChar||d.keyCode}p.add("events-keypress-typed",function(){var d={charCode:0};try{d=document.createEvent("KeyboardEvent"),(d.initKeyboardEvent||d.initKeyEvent).call(d,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(u){}return 0==d.charCode&&!p("opera")});var a={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},f=p("mac")?"metaKey":"ctrlKey",e=function(d,u){u=t.mixin({},d,u);c(u);u.preventDefault=
function(){d.preventDefault()};u.stopPropagation=function(){d.stopPropagation()};return u};var k=p("events-keypress-typed")?function(d,u){var y=A(d,"keydown",function(v){var D=v.keyCode,O=13!=D&&32!=D&&(27!=D||!p("ie"))&&(48>D||90<D)&&(96>D||111<D)&&(186>D||192<D)&&(219>D||222<D)&&229!=D;if(O||v.ctrlKey){O=O?0:D;if(v.ctrlKey){if(3==D||13==D)return u.call(v.currentTarget,v);O=95<O&&106>O?O-48:!v.shiftKey&&65<=O&&90>=O?O+32:a[O]||O}D=e(v,{type:"keypress",faux:!0,charCode:O});u.call(v.currentTarget,
D);if(p("ie"))try{v.keyCode=D.keyCode}catch(z){}}}),n=A(d,"keypress",function(v){var D=v.charCode;v=e(v,{charCode:32<=D?D:0,faux:!0});return u.call(this,v)});return{remove:function(){y.remove();n.remove()}}}:p("opera")?function(d,u){return A(d,"keypress",function(y){var n=y.which;3==n&&(n=99);n=32>n&&!y.shiftKey?0:n;y.ctrlKey&&!y.shiftKey&&65<=n&&90>=n&&(n+=32);return u.call(this,e(y,{charCode:n}))})}:function(d,u){return A(d,"keypress",function(y){c(y);return u.call(this,y)})};var l={_keypress:k,
connect:function(d,u,y,n,v){var D=arguments,O=[],z=0;O.push("string"==typeof D[0]?null:D[z++],D[z++]);var w=D[z+1];O.push("string"==typeof w||"function"==typeof w?D[z++]:null,D[z++]);for(w=D.length;z<w;z++)O.push(D[z]);return h.apply(this,O)},disconnect:function(d){d&&d.remove()},subscribe:function(d,u,y){return q.subscribe(d,t.hitch(u,y))},publish:function(d,u){return q.publish.apply(q,[d].concat(u))},connectPublisher:function(d,u,y){var n=function(){l.publish(d,arguments)};return y?l.connect(u,
y,n):l.connect(u,n)},isCopyKey:function(d){return d[f]}};l.unsubscribe=l.disconnect;t.mixin(b,l);return l})},"dojo/topic":function(){define(["./Evented"],function(b){var A=new b;return{publish:function(q,x){return A.emit.apply(A,arguments)},subscribe:function(q,x){return A.on.apply(A,arguments)}}})},"dojo/_base/event":function(){define(["./kernel","../on","../has","../dom-geometry"],function(b,A,q,x){if(A._fixEvent){var r=A._fixEvent;A._fixEvent=function(p,t){(p=r(p,t))&&x.normalizeEvent(p);return p}}var m=
{fix:function(p,t){return A._fixEvent?A._fixEvent(p,t):p},stop:function(p){q("dom-addeventlistener")||p&&p.preventDefault?(p.preventDefault(),p.stopPropagation()):(p=p||window.event,p.cancelBubble=!0,A._preventDefault.call(p))}};b.fixEvent=m.fix;b.stopEvent=m.stop;return m})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(b,A,q,x){function r(a,f,e,k,l,d){d=d||"px";a=a.style;isNaN(f)||(a.left=f+d);isNaN(e)||(a.top=e+d);0<=k&&(a.width=k+d);0<=l&&(a.height=
l+d)}function m(a){return"button"==a.tagName.toLowerCase()||"input"==a.tagName.toLowerCase()&&"button"==(a.getAttribute("type")||"").toLowerCase()}function p(a){return"border-box"==h.boxModel||"table"==a.tagName.toLowerCase()||m(a)}function t(a){var f={x:0,y:0,width:0,height:0,top:0,right:0,bottom:0,left:0};try{var e=a.getBoundingClientRect()}catch(k){return f}return"undefined"===typeof e.left?f:e}var h={boxModel:"content-box"};b("ie")&&(h.boxModel="BackCompat"==document.compatMode?"border-box":"content-box");
h.getPadExtents=function(a,f){a=q.byId(a);var e=f||x.getComputedStyle(a),k=x.toPixelValue;f=k(a,e.paddingLeft);var l=k(a,e.paddingTop),d=k(a,e.paddingRight);a=k(a,e.paddingBottom);return{l:f,t:l,r:d,b:a,w:f+d,h:l+a}};h.getBorderExtents=function(a,f){a=q.byId(a);var e=x.toPixelValue,k=f||x.getComputedStyle(a);f="none"!=k.borderLeftStyle?e(a,k.borderLeftWidth):0;var l="none"!=k.borderTopStyle?e(a,k.borderTopWidth):0,d="none"!=k.borderRightStyle?e(a,k.borderRightWidth):0;a="none"!=k.borderBottomStyle?
e(a,k.borderBottomWidth):0;return{l:f,t:l,r:d,b:a,w:f+d,h:l+a}};h.getPadBorderExtents=function(a,f){a=q.byId(a);var e=f||x.getComputedStyle(a);f=h.getPadExtents(a,e);a=h.getBorderExtents(a,e);return{l:f.l+a.l,t:f.t+a.t,r:f.r+a.r,b:f.b+a.b,w:f.w+a.w,h:f.h+a.h}};h.getMarginExtents=function(a,f){a=q.byId(a);var e=f||x.getComputedStyle(a),k=x.toPixelValue;f=k(a,e.marginLeft);var l=k(a,e.marginTop),d=k(a,e.marginRight);a=k(a,e.marginBottom);return{l:f,t:l,r:d,b:a,w:f+d,h:l+a}};h.getMarginBox=function(a,
f){a=q.byId(a);f=f||x.getComputedStyle(a);f=h.getMarginExtents(a,f);var e=a.offsetLeft-f.l,k=a.offsetTop-f.t,l=a.parentNode,d=x.toPixelValue;8==b("ie")&&!b("quirks")&&l&&(l=x.getComputedStyle(l),e-="none"!=l.borderLeftStyle?d(a,l.borderLeftWidth):0,k-="none"!=l.borderTopStyle?d(a,l.borderTopWidth):0);return{l:e,t:k,w:a.offsetWidth+f.w,h:a.offsetHeight+f.h}};h.getContentBox=function(a,f){a=q.byId(a);var e=f||x.getComputedStyle(a);f=a.clientWidth;var k=h.getPadExtents(a,e);var l=h.getBorderExtents(a,
e);e=a.offsetLeft+k.l+l.l;var d=a.offsetTop+k.t+l.t;f?l=a.clientHeight:(f=a.offsetWidth-l.w,l=a.offsetHeight-l.h);if(8==b("ie")&&!b("quirks")){var u=a.parentNode,y=x.toPixelValue;u&&(u=x.getComputedStyle(u),e-="none"!=u.borderLeftStyle?y(a,u.borderLeftWidth):0,d-="none"!=u.borderTopStyle?y(a,u.borderTopWidth):0)}return{l:e,t:d,w:f-k.w,h:l-k.h}};h.setContentSize=function(a,f,e){a=q.byId(a);var k=f.w;f=f.h;p(a)&&(e=h.getPadBorderExtents(a,e),0<=k&&(k+=e.w),0<=f&&(f+=e.h));r(a,NaN,NaN,k,f)};var c={l:0,
t:0,w:0,h:0};h.setMarginBox=function(a,f,e){a=q.byId(a);var k=e||x.getComputedStyle(a);e=f.w;var l=f.h,d=p(a)?c:h.getPadBorderExtents(a,k);k=h.getMarginExtents(a,k);if(b("webkit")&&m(a)){var u=a.style;0<=e&&!u.width&&(u.width="4px");0<=l&&!u.height&&(u.height="4px")}0<=e&&(e=Math.max(e-d.w-k.w,0));0<=l&&(l=Math.max(l-d.h-k.h,0));r(a,f.l,f.t,e,l)};h.isBodyLtr=function(a){a=a||A.doc;return"ltr"==(A.body(a).dir||a.documentElement.dir||"ltr").toLowerCase()};h.docScroll=function(a){a=a||A.doc;var f=a.parentWindow||
a.defaultView;return"pageXOffset"in f?{x:f.pageXOffset,y:f.pageYOffset}:(f=b("quirks")?A.body(a):a.documentElement)&&{x:h.fixIeBiDiScrollLeft(f.scrollLeft||0,a),y:f.scrollTop||0}};h.getIeDocumentElementOffset=function(a){return{x:0,y:0}};h.fixIeBiDiScrollLeft=function(a,f){f=f||A.doc;var e=b("ie");if(e&&!h.isBodyLtr(f)){var k=b("quirks");f=k?A.body(f):f.documentElement;var l=A.global;6==e&&!k&&l.frameElement&&f.scrollHeight>f.clientHeight&&(a+=f.clientLeft);return 8>e||k?a+f.clientWidth-f.scrollWidth:
-a}return a};h.position=function(a,f){a=q.byId(a);var e=A.body(a.ownerDocument),k=t(a);k={x:k.left,y:k.top,w:k.right-k.left,h:k.bottom-k.top};9>b("ie")&&(k.x-=b("quirks")?e.clientLeft+e.offsetLeft:0,k.y-=b("quirks")?e.clientTop+e.offsetTop:0);f&&(a=h.docScroll(a.ownerDocument),k.x+=a.x,k.y+=a.y);return k};h.getMarginSize=function(a,f){a=q.byId(a);f=h.getMarginExtents(a,f||x.getComputedStyle(a));a=t(a);return{w:a.right-a.left+f.w,h:a.bottom-a.top+f.h}};h.normalizeEvent=function(a){"layerX"in a||(a.layerX=
a.offsetX,a.layerY=a.offsetY);if(!("pageX"in a)){var f=a.target;f=f&&f.ownerDocument||document;var e=b("quirks")?f.body:f.documentElement;a.pageX=a.clientX+h.fixIeBiDiScrollLeft(e.scrollLeft||0,f);a.pageY=a.clientY+(e.scrollTop||0)}};return h})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(b,A,q,x,r){function m(p,t){var h=function(c,a){return A(c,p,function(f){if(t)return t(f,a);if(!x.isDescendant(f.relatedTarget,c))return a.call(this,f)})};h.bubble=
function(c){return m(p,function(a,f){var e=c(a.target),k=a.relatedTarget;if(e&&e!=(k&&1==k.nodeType&&c(k)))return f.call(e,a)})};return h}q.add("dom-quirks",r.doc&&"BackCompat"==r.doc.compatMode);q.add("events-mouseenter",r.doc&&"onmouseenter"in r.doc.createElement("div"));q.add("events-mousewheel",r.doc&&"onmousewheel"in r.doc);r=q("dom-quirks")&&q("ie")||!q("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(p,t){return p.button&t},isLeft:function(p){return p.button&1},isMiddle:function(p){return p.button&
4},isRight:function(p){return p.button&2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(p,t){return p.button==t},isLeft:function(p){return 0==p.button},isMiddle:function(p){return 1==p.button},isRight:function(p){return 2==p.button}};b.mouseButtons=r;b=q("events-mousewheel")?"mousewheel":function(p,t){return A(p,"DOMMouseScroll",function(h){h.wheelDelta=-h.detail;t.call(this,h)})};return{_eventHandler:m,enter:m("mouseover"),leave:m("mouseout"),wheel:b,isLeft:r.isLeft,isMiddle:r.isMiddle,isRight:r.isRight}})},
"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(b,A){return b.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:A("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,
NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:A("mac")&&!A("air")?A("safari")?91:224:17}})},"dojo/main":function(){define("./_base/kernel ./has require ./sniff ./_base/lang ./_base/array ./_base/config ./ready ./_base/declare ./_base/connect ./_base/Deferred ./_base/json ./_base/Color ./has!dojo-firebug?./_firebug/firebug ./_base/browser ./_base/loader".split(" "),
function(b,A,q,x,r,m,p,t){p.isDebug&&q(["./_firebug/firebug"]);var h=p.require;h&&(h=m.map(r.isArray(h)?h:[h],function(c){return c.replace(/\./g,"/")}),b.isAsync?q(h):t(1,function(){q(h)}));return b})},"dojo/ready":function(){define(["./_base/kernel","./has","require","./domReady","./_base/lang"],function(b,A,q,x,r){var m=0,p=[],t=0;A=function(){m=1;b._postLoad=b.config.afterOnLoad=!0;h()};var h=function(){if(!t){for(t=1;m&&(!x||0==x._Q.length)&&(q.idle?q.idle():1)&&p.length;){var f=p.shift();try{f()}catch(e){if(e.info=
e.message,q.signal)q.signal("error",e);else throw e;}}t=0}};q.on&&q.on("idle",h);x&&(x._onQEmpty=h);var c=b.ready=b.addOnLoad=function(f,e,k){var l=r._toArray(arguments);"number"!=typeof f?(k=e,e=f,f=1E3):l.shift();k=k?r.hitch.apply(b,l):function(){e()};k.priority=f;for(l=0;l<p.length&&f>=p[l].priority;l++);p.splice(l,0,k);h()},a=b.config.addOnLoad;if(a)c[r.isArray(a)?"apply":"call"](b,a);b.config.parseOnLoad&&!b.isAsync&&c(99,function(){b.parser||(b.deprecated("Add explicit require(['dojo/parser']);",
"","2.0"),q(["dojo/parser"]))});x?x(A):A();return c})},"dojo/domReady":function(){define(["./global","./has"],function(b,A){function q(d){h.push(d);t&&x()}function x(){if(!c){for(c=!0;h.length;)try{h.shift()(r)}catch(d){console.error(d,"in domReady callback",d.stack)}c=!1;q._onQEmpty()}}var r=document,m={loaded:1,complete:1},p="string"!=typeof r.readyState,t=!!m[r.readyState],h=[],c;q.load=function(d,u,y){q(y)};q._Q=h;q._onQEmpty=function(){};p&&(r.readyState="loading");if(!t){var a=[],f=function(d){d=
d||b.event;t||"readystatechange"==d.type&&!m[r.readyState]||(p&&(r.readyState="complete"),t=1,x())},e=function(d,u){d.addEventListener(u,f,!1);h.push(function(){d.removeEventListener(u,f,!1)})};if(!A("dom-addeventlistener")){e=function(d,u){u="on"+u;d.attachEvent(u,f);h.push(function(){d.detachEvent(u,f)})};var k=r.createElement("div");try{k.doScroll&&null===b.frameElement&&a.push(function(){try{return k.doScroll("left"),1}catch(d){}})}catch(d){}}e(r,"DOMContentLoaded");e(b,"load");"onreadystatechange"in
r?e(r,"readystatechange"):p||a.push(function(){return m[r.readyState]});if(a.length){var l=function(){if(!t){for(var d=a.length;d--;)if(a[d]()){f("poller");return}setTimeout(l,30)}};l()}}return q})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(b,A,q){function x(C,H){throw Error("declare"+(H?" "+H:"")+": "+C);}function r(C,H){for(var B=[],K=[{cls:0,refs:[]}],J={},R=1,V=C.length,Y=0,S,U,L,T,da;Y<V;++Y){(S=C[Y])?"[object Function]"!=O.call(S)&&x("mixin #"+Y+" is not a callable constructor.",
H):x("mixin #"+Y+" is unknown. Did you use dojo.require to pull it in?",H);U=S._meta?S._meta.bases:[S];L=0;for(S=U.length-1;0<=S;--S)T=U[S].prototype,T.hasOwnProperty("declaredClass")||(T.declaredClass="uniqName_"+z++),T=T.declaredClass,J.hasOwnProperty(T)||(J[T]={count:0,refs:[],cls:U[S]},++R),T=J[T],L&&L!==T&&(T.refs.push(L),++L.count),L=T;++L.count;K[0].refs.push(L)}for(;K.length;){L=K.pop();B.push(L.cls);for(--R;da=L.refs,1==da.length;){L=da[0];if(!L||--L.count){L=0;break}B.push(L.cls);--R}if(L)for(Y=
0,V=da.length;Y<V;++Y)L=da[Y],--L.count||K.push(L)}R&&x("can't build consistent linearization",H);S=C[0];B[0]=S?S._meta&&S===B[B.length-S._meta.bases.length]?S._meta.bases.length:1:0;return B}function m(C,H,B,K){var J,R=this._inherited=this._inherited||{};if("string"===typeof C){var V=C;C=H;H=B;B=K}if("function"===typeof C){var Y=C;C=H;H=B}else try{Y=C.callee}catch(T){if(T instanceof TypeError)x("strict mode inherited() requires the caller function to be passed before arguments",this.declaredClass);
else throw T;}(V=V||Y.nom)||x("can't deduce a name to call inherited()",this.declaredClass);B=K=0;var S=this.constructor._meta;K=S.bases;var U=R.p;if("constructor"!=V){if(R.c!==Y){U=0;var L=K[0];S=L._meta;if(S.hidden[V]!==Y){(J=S.chains)&&"string"==typeof J[V]&&x("calling chained method with inherited: "+V,this.declaredClass);do if(S=L._meta,J=L.prototype,S&&(J[V]===Y&&J.hasOwnProperty(V)||S.hidden[V]===Y))break;while(L=K[++U]);U=L?U:-1}}if(L=K[++U])if(J=L.prototype,L._meta&&J.hasOwnProperty(V))B=
J[V];else{Y=D[V];do if(J=L.prototype,(B=J[V])&&(L._meta?J.hasOwnProperty(V):B!==Y))break;while(L=K[++U])}B=L&&B||D[V]}else{if(R.c!==Y&&(U=0,(S=K[0]._meta)&&S.ctor!==Y)){for((J=S.chains)&&"manual"===J.constructor||x("calling chained constructor with inherited",this.declaredClass);(L=K[++U])&&(!(S=L._meta)||S.ctor!==Y););U=L?U:-1}for(;(L=K[++U])&&!(B=(S=L._meta)?S.ctor:L););B=L&&B}R.c=B;R.p=U;if(B)return!0===H?B:B.apply(this,H||C)}function p(C,H,B){return"string"===typeof C?"function"===typeof H?this.__inherited(C,
H,B,!0):this.__inherited(C,H,!0):"function"===typeof C?this.__inherited(C,H,!0):this.__inherited(C,!0)}function t(C,H,B,K){var J=this.getInherited(C,H,B);if(J)return J.apply(this,K||B||H||C)}function h(C){for(var H=this.constructor._meta.bases,B=0,K=H.length;B<K;++B)if(H[B]===C)return!0;return this instanceof C}function c(C,H){for(var B in H)"constructor"!=B&&H.hasOwnProperty(B)&&(C[B]=H[B]);if(A("bug-for-in-skips-shadowed"))for(var K=q._extraNames,J=K.length;J;)B=K[--J],"constructor"!=B&&H.hasOwnProperty(B)&&
(C[B]=H[B])}function a(C){n.safeMixin(this.prototype,C);return this}function f(C,H){C instanceof Array||"function"===typeof C||(H=C,C=void 0);H=H||{};C=C||[];return n([this].concat(C),H)}function e(C,H){return function(){var B=arguments,K=B,J=B[0],R;var V=C.length;if(!(this instanceof B.callee))return y(B);if(H&&(J&&J.preamble||this.preamble)){var Y=Array(C.length);Y[0]=B;for(R=0;;){(J=B[0])&&(J=J.preamble)&&(B=J.apply(this,B)||B);J=C[R].prototype;(J=J.hasOwnProperty("preamble")&&J.preamble)&&(B=
J.apply(this,B)||B);if(++R==V)break;Y[R]=B}}for(R=V-1;0<=R;--R)J=C[R],(J=(V=J._meta)?V.ctor:J)&&J.apply(this,Y?Y[R]:B);(J=this.postscript)&&J.apply(this,K)}}function k(C,H){return function(){var B=arguments,K=B,J=B[0];if(!(this instanceof B.callee))return y(B);H&&(J&&(J=J.preamble)&&(K=J.apply(this,K)||K),(J=this.preamble)&&J.apply(this,K));C&&C.apply(this,B);(J=this.postscript)&&J.apply(this,B)}}function l(C){return function(){var H=arguments,B=0,K,J;if(!(this instanceof H.callee))return y(H);for(;K=
C[B];++B)if(K=(J=K._meta)?J.ctor:K){K.apply(this,H);break}(K=this.postscript)&&K.apply(this,H)}}function d(C,H,B){return function(){var K,J=0,R=1;B&&(J=H.length-1,R=-1);for(;K=H[J];J+=R){var V=K._meta;(K=(V?V.hidden:K.prototype)[C])&&K.apply(this,arguments)}}}function u(C){w.prototype=C.prototype;C=new w;w.prototype=null;return C}function y(C){var H=C.callee,B=u(H);H.apply(B,C);return B}function n(C,H,B){"string"!=typeof C&&(B=H,H=C,C="");B=B||{};var K,J,R,V=1,Y=H;if("[object Array]"==O.call(H)){var S=
r(H,C);var U=S[0];V=S.length-U;H=S[V]}else S=[0],H?"[object Function]"==O.call(H)?(U=H._meta,S=S.concat(U?U.bases:H)):x("base class is not a callable constructor.",C):null!==H&&x("unknown base class. Did you use dojo.require to pull it in?",C);if(H)for(K=V-1;;--K){var L=u(H);if(!K)break;U=S[K];(U._meta?c:v)(L,U.prototype);var T=A("csp-restrictions")?function(){}:new Function;T.superclass=H;T.prototype=L;H=L.constructor=T}else L={};n.safeMixin(L,B);U=B.constructor;U!==D.constructor&&(U.nom="constructor",
L.constructor=U);for(K=V-1;K;--K)(U=S[K]._meta)&&U.chains&&(R=v(R||{},U.chains));L["-chains-"]&&(R=v(R||{},L["-chains-"]));H&&H.prototype&&H.prototype["-chains-"]&&(R=v(R||{},H.prototype["-chains-"]));U=!R||!R.hasOwnProperty("constructor");S[0]=T=R&&"manual"===R.constructor?l(S):1==S.length?k(B.constructor,U):e(S,U);T._meta={bases:S,hidden:B,chains:R,parents:Y,ctor:B.constructor};T.superclass=H&&H.prototype;T.extend=a;T.createSubclass=f;T.prototype=L;L.constructor=T;L.getInherited=p;L.isInstanceOf=
h;L.inherited=E;L.__inherited=m;C&&(L.declaredClass=C,q.setObject(C,T));if(R)for(J in R)L[J]&&"string"==typeof R[J]&&"constructor"!=J&&(U=L[J]=d(J,S,"after"===R[J]),U.nom=J);return T}var v=q.mixin,D=Object.prototype,O=D.toString,z=0;var w=A("csp-restrictions")?function(){}:new Function;var E=b.config.isDebug?t:m;b.safeMixin=n.safeMixin=function(C,H){for(R in H){var B=H[R];B===D[R]&&R in D||"constructor"==R||("[object Function]"==O.call(B)&&(B.nom=R),C[R]=B)}if(A("bug-for-in-skips-shadowed")&&H)for(var K=
q._extraNames,J=K.length;J;){var R=K[--J];B=H[R];B===D[R]&&R in D||"constructor"==R||("[object Function]"==O.call(B)&&(B.nom=R),C[R]=B)}return C};return b.declare=n})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(b,A,q,x){var r=b.Color=function(m){m&&this.setColor(m)};r.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,
128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:x.transparentColor||[0,0,0,0]};A.extend(r,{r:255,g:255,b:255,a:1,_set:function(m,p,t,h){this.r=m;this.g=p;this.b=t;this.a=h},setColor:function(m){A.isString(m)?r.fromString(m,this):A.isArray(m)?r.fromArray(m,this):(this._set(m.r,m.g,m.b,m.a),m instanceof r||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,
this.g,this.b,this.a]},toHex:function(){return"#"+q.map(["r","g","b"],function(m){m=this[m].toString(16);return 2>m.length?"0"+m:m},this).join("")},toCss:function(m){var p=this.r+", "+this.g+", "+this.b;return(m?"rgba("+p+", "+this.a:"rgb("+p)+")"},toString:function(){return this.toCss(!0)}});r.blendColors=b.blendColors=function(m,p,t,h){h=h||new r;h.r=Math.round(m.r+(p.r-m.r)*t);h.g=Math.round(m.g+(p.g-m.g)*t);h.b=Math.round(m.b+(p.b-m.b)*t);h.a=m.a+(p.a-m.a)*t;return h.sanitize()};r.fromRgb=b.colorFromRgb=
function(m,p){return(m=m.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/))&&r.fromArray(m[1].split(/\s*,\s*/),p)};r.fromHex=b.colorFromHex=function(m,p){var t=p||new r,h=4==m.length?4:8,c=(1<<h)-1;m=Number("0x"+m.substr(1));if(isNaN(m))return null;q.forEach(["b","g","r"],function(a){var f=m&c;m>>=h;t[a]=4==h?17*f:f});t.a=1;return t};r.fromArray=b.colorFromArray=function(m,p){p=p||new r;p._set(Number(m[0]),Number(m[1]),Number(m[2]),Number(m[3]));isNaN(p.a)&&(p.a=1);return p.sanitize()};r.fromString=
b.colorFromString=function(m,p){var t=r.named[m];return t&&r.fromArray(t,p)||r.fromRgb(m,p)||r.fromHex(m,p)};return r})},"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme");define("../ready ./kernel ./connect ./unload ./window ./event ./html ./NodeList ../query ./xhr ./fx".split(" "),function(b){return b})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(b,A,q){var x=window,r={addOnWindowUnload:function(m,p){b.windowUnloaded||q(x,
"unload",b.windowUnloaded=function(){});q(x,"unload",A.hitch(m,p))},addOnUnload:function(m,p){q(x,"beforeunload",A.hitch(m,p))}};b.addOnWindowUnload=r.addOnWindowUnload;b.addOnUnload=r.addOnUnload;return r})},"dojo/_base/html":function(){define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),function(b,A,q,x,r,m,p,t){b.byId=A.byId;b.isDescendant=A.isDescendant;b.setSelectable=A.setSelectable;b.getAttr=x.get;b.setAttr=x.set;b.hasAttr=
x.has;b.removeAttr=x.remove;b.getNodeProp=x.getNodeProp;b.attr=function(h,c,a){return 2==arguments.length?x["string"==typeof c?"get":"set"](h,c):x.set(h,c,a)};b.hasClass=m.contains;b.addClass=m.add;b.removeClass=m.remove;b.toggleClass=m.toggle;b.replaceClass=m.replace;b._toDom=b.toDom=p.toDom;b.place=p.place;b.create=p.create;b.empty=function(h){p.empty(h)};b._destroyElement=b.destroy=function(h){p.destroy(h)};b._getPadExtents=b.getPadExtents=t.getPadExtents;b._getBorderExtents=b.getBorderExtents=
t.getBorderExtents;b._getPadBorderExtents=b.getPadBorderExtents=t.getPadBorderExtents;b._getMarginExtents=b.getMarginExtents=t.getMarginExtents;b._getMarginSize=b.getMarginSize=t.getMarginSize;b._getMarginBox=b.getMarginBox=t.getMarginBox;b.setMarginBox=t.setMarginBox;b._getContentBox=b.getContentBox=t.getContentBox;b.setContentSize=t.setContentSize;b._isBodyLtr=b.isBodyLtr=t.isBodyLtr;b._docScroll=b.docScroll=t.docScroll;b._getIeDocumentElementOffset=b.getIeDocumentElementOffset=t.getIeDocumentElementOffset;
b._fixIeBiDiScrollLeft=b.fixIeBiDiScrollLeft=t.fixIeBiDiScrollLeft;b.position=t.position;b.marginBox=function(h,c){return c?t.setMarginBox(h,c):t.getMarginBox(h)};b.contentBox=function(h,c){return c?t.setContentSize(h,c):t.getContentBox(h)};b.coords=function(h,c){b.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");h=A.byId(h);var a=q.getComputedStyle(h);a=t.getMarginBox(h,a);h=t.position(h,c);a.x=h.x;a.y=h.y;return a};b.getProp=r.get;b.setProp=r.set;b.prop=function(h,c,a){return 2==
arguments.length?r["string"==typeof c?"get":"set"](h,c):r.set(h,c,a)};b.getStyle=q.get;b.setStyle=q.set;b.getComputedStyle=q.getComputedStyle;b.__toPixelValue=b.toPixelValue=q.toPixelValue;b.style=function(h,c,a){switch(arguments.length){case 1:return q.get(h);case 2:return q["string"==typeof c?"get":"set"](h,c)}return q.set(h,c,a)};return b})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(b,A,q){function x(h){if("string"==typeof h||h instanceof String){if(h&&
!m.test(h))return p[0]=h,p;h=h.split(m);h.length&&!h[0]&&h.shift();h.length&&!h[h.length-1]&&h.pop();return h}return h?A.filter(h,function(c){return c}):[]}var r,m=/\s+/,p=[""],t={};return r={contains:function(h,c){return 0<=(" "+q.byId(h).className+" ").indexOf(" "+c+" ")},add:function(h,c){h=q.byId(h);c=x(c);var a=h.className;a=a?" "+a+" ":" ";var f=a.length;for(var e=0,k=c.length,l;e<k;++e)(l=c[e])&&0>a.indexOf(" "+l+" ")&&(a+=l+" ");f<a.length&&(h.className=a.substr(1,a.length-2))},remove:function(h,
c){h=q.byId(h);if(void 0!==c){c=x(c);var a=" "+h.className+" ";for(var f=0,e=c.length;f<e;++f)a=a.replace(" "+c[f]+" "," ");a=b.trim(a)}else a="";h.className!=a&&(h.className=a)},replace:function(h,c,a){h=q.byId(h);t.className=h.className;r.remove(t,a);r.add(t,c);h.className!==t.className&&(h.className=t.className)},toggle:function(h,c,a){h=q.byId(h);if(void 0===a){c=x(c);for(var f=0,e=c.length,k;f<e;++f)k=c[f],r[r.contains(h,k)?"remove":"add"](h,k)}else r[a?"add":"remove"](h,c);return a}}})},"dojo/_base/NodeList":function(){define(["./kernel",
"../query","./array","./html","../NodeList-dom"],function(b,A,q){A=A.NodeList;var x=A.prototype;x.connect=A._adaptAsForEach(function(){return b.connect.apply(this,arguments)});x.coords=A._adaptAsMap(b.coords);A.events="blur focus change click error keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup submit".split(" ");q.forEach(A.events,function(r){var m="on"+r;x[m]=function(p,t){return this.connect(m,p,t)}});return b.NodeList=A})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),
function(b,A,q,x,r,m,p,t){function h(n,v){var D=function(z,w){if("string"==typeof w&&(w=q.byId(w),!w))return new v([]);z="string"==typeof z?n(z,w):z?z.end&&z.on?z:[z]:[];return z.end&&z.on?z:new v(z)};D.matches=n.match||function(z,w,E){return 0<D.filter([z],w,E).length};D.filter=n.filter||function(z,w,E){return D(w,E).filter(function(C){return-1<r.indexOf(z,C)})};if("function"!=typeof n){var O=n.search;n=function(z,w){return O(w||document,z)}}return D}A.add("array-extensible",function(){return 1==
m.delegate([],{length:1}).length&&!A("bug-for-in-skips-shadowed")});var c=Array.prototype,a=c.slice,f=c.concat,e=r.forEach,k=function(n,v,D){v=[0].concat(a.call(v,0));D=D||b.global;return function(O){v[0]=O;return n.apply(D,v)}},l=function(n){var v=this instanceof d&&A("array-extensible");"number"==typeof n&&(n=Array(n));var D=n&&"length"in n?n:arguments;if(v||!D.sort){for(var O=v?this:[],z=O.length=D.length,w=0;w<z;w++)O[w]=D[w];if(v)return O;D=O}m._mixin(D,u);D._NodeListCtor=function(E){return d(E)};
return D},d=l,u=d.prototype=A("array-extensible")?[]:{};d._wrap=u._wrap=function(n,v,D){n=new (D||this._NodeListCtor||d)(n);return v?n._stash(v):n};d._adaptAsMap=function(n,v){return function(){return this.map(k(n,arguments,v))}};d._adaptAsForEach=function(n,v){return function(){this.forEach(k(n,arguments,v));return this}};d._adaptAsFilter=function(n,v){return function(){return this.filter(k(n,arguments,v))}};d._adaptWithCondition=function(n,v,D){return function(){var O=arguments,z=k(n,O,D);if(v.call(D||
b.global,O))return this.map(z);this.forEach(z);return this}};e(["slice","splice"],function(n){var v=c[n];u[n]=function(){return this._wrap(v.apply(this,arguments),"slice"==n?this:null)}});e(["indexOf","lastIndexOf","every","some"],function(n){var v=r[n];u[n]=function(){return v.apply(b,[this].concat(a.call(arguments,0)))}});m.extend(l,{constructor:d,_NodeListCtor:d,toString:function(){return this.join(",")},_stash:function(n){this._parent=n;return this},on:function(n,v){var D=this.map(function(O){return x(O,
n,v)});D.remove=function(){for(var O=0;O<D.length;O++)D[O].remove()};return D},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(n){var v=a.call(this,0),D=r.map(arguments,function(O){return a.call(O,0)});return this._wrap(f.apply(v,D),this)},map:function(n,v){return this._wrap(r.map(this,n,v),this)},forEach:function(n,v){e(this,n,v);return this},filter:function(n){var v=arguments,D=this,O=0;if("string"==typeof n){D=y._filterResult(this,v[0]);if(1==v.length)return D._stash(this);
O=1}return this._wrap(r.filter(D,v[O],v[O+1]),this)},instantiate:function(n,v){var D=m.isFunction(n)?n:m.getObject(n);v=v||{};return this.forEach(function(O){new D(v,O)})},at:function(){var n=new this._NodeListCtor(0);e(arguments,function(v){0>v&&(v=this.length+v);this[v]&&n.push(this[v])},this);return n._stash(this)}});var y=h(t,l);b.query=h(t,function(n){return l(n)});y.load=function(n,v,D){p.load(n,v,function(O){D(h(O,l))})};b._filterQueryResult=y._filterResult=function(n,v,D){return new l(y.filter(n,
v,D))};b.NodeList=y.NodeList=l;return y})},"dojo/selector/acme":function(){define(["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(b,A,q,x,r){var m=x.trim,p=q.forEach,t="BackCompat"==r.doc.compatMode,h=!1,c=function(){return!0},a=function(F){F=0<="\x3e~+".indexOf(F.slice(-1))?F+" * ":F+" ";for(var I=function(Ia,Ja){return m(F.slice(Ia,Ja))},M=[],Q=-1,aa=-1,ba=-1,la=-1,Z=-1,ea=-1,pa=-1,ma,ua="",sa="",Fa,ja=0,Ha=F.length,fa=null,xa=null,za=function(){0<=ea&&(fa.id=I(ea,
ja).replace(/\\/g,""),ea=-1);if(0<=pa){var Ia=pa==ja?null:I(pa,ja);fa[0>"\x3e~+".indexOf(Ia)?"tag":"oper"]=Ia;pa=-1}0<=Z&&(fa.classes.push(I(Z+1,ja).replace(/\\/g,"")),Z=-1)};ua=sa,sa=F.charAt(ja),ja<Ha;ja++)"\\"!=ua&&(fa||(Fa=ja,fa={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return h?this.otag:this.tag}},pa=ja),ma?sa==ma&&(ma=null):"'"==sa||'"'==sa?ma=sa:0<=Q?"]"==sa?(xa.attr?xa.matchFor=I(ba||Q+1,ja):xa.attr=I(Q+1,ja),!(Q=xa.matchFor)||'"'!=Q.charAt(0)&&
"'"!=Q.charAt(0)||(xa.matchFor=Q.slice(1,-1)),xa.matchFor&&(xa.matchFor=xa.matchFor.replace(/\\/g,"")),fa.attrs.push(xa),xa=null,Q=ba=-1):"\x3d"==sa&&(ba=0<="|~^$*".indexOf(ua)?ua:"",xa.type=ba+sa,xa.attr=I(Q+1,ja-ba.length),ba=ja+1):0<=aa?")"==sa&&(0<=la&&(xa.value=I(aa+1,ja)),la=aa=-1):"#"==sa?(za(),ea=ja+1):"."==sa?(za(),Z=ja):":"==sa?(za(),la=ja):"["==sa?(za(),Q=ja,xa={}):"("==sa?(0<=la&&(xa={name:I(la+1,ja),value:null},fa.pseudos.push(xa)),aa=ja):" "==sa&&ua!=sa&&(za(),0<=la&&fa.pseudos.push({name:I(la+
1,ja)}),fa.loops=fa.pseudos.length||fa.attrs.length||fa.classes.length,fa.oquery=fa.query=I(Fa,ja),fa.otag=fa.tag=fa.oper?null:fa.tag||"*",fa.tag&&(fa.tag=fa.tag.toUpperCase()),M.length&&M[M.length-1].oper&&(fa.infixOper=M.pop(),fa.query=fa.infixOper.query+" "+fa.query),M.push(fa),fa=null));return M},f=function(F,I){return F?I?function(){return F.apply(window,arguments)&&I.apply(window,arguments)}:F:I},e=function(F,I){I=I||[];F&&I.push(F);return I},k=function(F){return 1==F.nodeType},l=function(F,
I){return F?"class"==I?F.className||"":"for"==I?F.htmlFor||"":"style"==I?F.style.cssText||"":(h?F.getAttribute(I):F.getAttribute(I,2))||"":""},d={"*\x3d":function(F,I){return function(M){return 0<=l(M,F).indexOf(I)}},"^\x3d":function(F,I){return function(M){return 0==l(M,F).indexOf(I)}},"$\x3d":function(F,I){return function(M){M=" "+l(M,F);var Q=M.lastIndexOf(I);return-1<Q&&Q==M.length-I.length}},"~\x3d":function(F,I){var M=" "+I+" ";return function(Q){return 0<=(" "+l(Q,F)+" ").indexOf(M)}},"|\x3d":function(F,
I){var M=I+"-";return function(Q){Q=l(Q,F);return Q==I||0==Q.indexOf(M)}},"\x3d":function(F,I){return function(M){return l(M,F)==I}}};x=r.doc.documentElement;var u=!(x.nextElementSibling||"nextElementSibling"in x),y=u?"nextSibling":"nextElementSibling",n=u?"previousSibling":"previousElementSibling",v=u?k:c,D=function(F){for(;F=F[n];)if(v(F))return!1;return!0},O=function(F){for(;F=F[y];)if(v(F))return!1;return!0},z=function(F){var I=F.parentNode;I=7!=I.nodeType?I:I.nextSibling;var M=0,Q=I.children||
I.childNodes,aa=F._i||F.getAttribute("_i")||-1,ba=I._l||("undefined"!==typeof I.getAttribute?I.getAttribute("_l"):-1);if(!Q)return-1;Q=Q.length;if(ba==Q&&0<=aa&&0<=ba)return aa;A("ie")&&"undefined"!==typeof I.setAttribute?I.setAttribute("_l",Q):I._l=Q;aa=-1;for(I=I.firstElementChild||I.firstChild;I;I=I[y])v(I)&&(A("ie")?I.setAttribute("_i",++M):I._i=++M,F===I&&(aa=M));return aa},w=function(F){return!(z(F)%2)},E=function(F){return z(F)%2},C={checked:function(F,I){return function(M){return!("checked"in
M?!M.checked:!M.selected)}},disabled:function(F,I){return function(M){return M.disabled}},enabled:function(F,I){return function(M){return!M.disabled}},"first-child":function(){return D},"last-child":function(){return O},"only-child":function(F,I){return function(M){return D(M)&&O(M)}},empty:function(F,I){return function(M){var Q=M.childNodes;for(M=M.childNodes.length-1;0<=M;M--){var aa=Q[M].nodeType;if(1===aa||3==aa)return!1}return!0}},contains:function(F,I){F=I.charAt(0);if('"'==F||"'"==F)I=I.slice(1,
-1);return function(M){return 0<=M.innerHTML.indexOf(I)}},not:function(F,I){F=a(I)[0];I={el:1};"*"!=F.tag&&(I.tag=1);F.classes.length||(I.classes=1);var M=B(F,I);return function(Q){return!M(Q)}},"nth-child":function(F,I){F=parseInt;if("odd"==I)return E;if("even"==I)return w;if(-1!=I.indexOf("n")){I=I.split("n",2);var M=I[0]?"-"==I[0]?-1:F(I[0]):1,Q=I[1]?F(I[1]):0,aa=0,ba=-1;0<M?0>Q?Q=Q%M&&M+Q%M:0<Q&&(Q>=M&&(aa=Q-Q%M),Q%=M):0>M&&(M*=-1,0<Q&&(ba=Q,Q%=M));if(0<M)return function(Z){Z=z(Z);return Z>=aa&&
(0>ba||Z<=ba)&&Z%M==Q};I=Q}var la=F(I);return function(Z){return z(Z)==la}}},H=9>A("ie")||9==A("ie")&&A("quirks")?function(F){var I=F.toLowerCase();"class"==I&&(F="className");return function(M){return h?M.getAttribute(F):M[F]||M[I]}}:function(F){return function(I){return I&&I.getAttribute&&I.hasAttribute(F)}},B=function(F,I){if(!F)return c;I=I||{};var M=null;"el"in I||(M=f(M,k));"tag"in I||"*"!=F.tag&&(M=f(M,function(Q){return Q&&(h?Q.tagName:Q.tagName.toUpperCase())==F.getTag()}));"classes"in I||
p(F.classes,function(Q,aa,ba){var la=new RegExp("(?:^|\\s)"+Q+"(?:\\s|$)");M=f(M,function(Z){return la.test(Z.className)});M.count=aa});"pseudos"in I||p(F.pseudos,function(Q){var aa=Q.name;C[aa]&&(M=f(M,C[aa](aa,Q.value)))});"attrs"in I||p(F.attrs,function(Q){var aa,ba=Q.attr;Q.type&&d[Q.type]?aa=d[Q.type](ba,Q.matchFor):ba.length&&(aa=H(ba));aa&&(M=f(M,aa))});"id"in I||F.id&&(M=f(M,function(Q){return!!Q&&Q.id==F.id}));M||"default"in I||(M=c);return M},K=function(F){return function(I,M,Q){for(;I=
I[y];)if(!u||k(I)){Q&&!ia(I,Q)||!F(I)||M.push(I);break}return M}},J=function(F){return function(I,M,Q){for(I=I[y];I;){if(v(I)){if(Q&&!ia(I,Q))break;F(I)&&M.push(I)}I=I[y]}return M}},R=function(F,I){var M=function(Q){var aa=[];try{aa=Array.prototype.slice.call(Q)}catch(Z){for(var ba=0,la=Q.length;ba<la;ba++)aa.push(Q[ba])}return aa};F=F||c;return function(Q,aa,ba){var la=0,Z=[];Z=M(Q.children||Q.childNodes);for(I&&q.forEach(Z,function(ea){1===ea.nodeType&&(Z=Z.concat(M(ea.getElementsByTagName("*"))))});Q=
Z[la++];)v(Q)&&(!ba||ia(Q,ba))&&F(Q,la)&&aa.push(Q);return aa}},V=function(F,I){for(F=F.parentNode;F&&F!=I;)F=F.parentNode;return!!F},Y={},S=function(F){var I=Y[F.query];if(I)return I;var M=F.infixOper;M=M?M.oper:"";var Q=B(F,{el:1}),aa="*"==F.tag,ba=r.doc.getElementsByClassName;if(M)ba={el:1},aa&&(ba.tag=1),Q=B(F,ba),"+"==M?I=K(Q):"~"==M?I=J(Q):"\x3e"==M&&(I=R(Q));else if(F.id)Q=!F.loops&&aa?c:B(F,{el:1,id:1}),I=function(Z,ea){var pa=b.byId(F.id,Z.ownerDocument||Z);Z.ownerDocument&&!V(Z,Z.ownerDocument)&&
q.some(11===Z.nodeType?Z.childNodes:[Z],function(ma){ma=R(function(ua){return ua.id===F.id},!0)(ma,[]);if(ma.length)return pa=ma[0],!1});if(pa&&Q(pa)&&(9==Z.nodeType||V(pa,Z)))return e(pa,ea)};else if(ba&&/\{\s*\[native code\]\s*\}/.test(String(ba))&&F.classes.length&&!t){Q=B(F,{el:1,classes:1,id:1});var la=F.classes.join(" ");I=function(Z,ea,pa){ea=e(0,ea);for(var ma,ua=0,sa=Z.getElementsByClassName(la);ma=sa[ua++];)Q(ma,Z)&&ia(ma,pa)&&ea.push(ma);return ea}}else aa||F.loops?(Q=B(F,{el:1,tag:1,id:1}),
I=function(Z,ea,pa){ea=e(0,ea);for(var ma,ua=0,sa=(ma=F.getTag())?Z.getElementsByTagName(ma):[];ma=sa[ua++];)Q(ma,Z)&&ia(ma,pa)&&ea.push(ma);return ea}):I=function(Z,ea,pa){ea=e(0,ea);var ma=0,ua=F.getTag();for(ua=ua?Z.getElementsByTagName(ua):[];Z=ua[ma++];)ia(Z,pa)&&ea.push(Z);return ea};return Y[F.query]=I},U={},L={},T=function(F){var I=a(m(F));if(1==I.length){var M=S(I[0]);return function(Q){if(Q=M(Q,[]))Q.nozip=!0;return Q}}return function(Q){Q=e(Q);for(var aa,ba,la=I.length,Z,ea,pa=0;pa<la;pa++){ea=
[];aa=I[pa];ba=Q.length-1;0<ba&&(Z={},ea.nozip=!0);ba=S(aa);for(var ma=0;aa=Q[ma];ma++)ba(aa,ea,Z);if(!ea.length)break;Q=ea}return ea}},da=A("ie")?"commentStrip":"nozip",ha=!!r.doc.querySelectorAll,ca=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,qa=function(F,I,M,Q){return M?(I?I+" ":"")+M+(Q?" "+Q:""):F},ta=/([^[]*)([^\]]*])?/g,oa=function(F,I,M){return I.replace(ca,qa)+(M||"")},va=function(F,I){F=F.replace(ta,oa);if(ha){var M=L[F];if(M&&!I)return M}if(M=U[F])return M;M=F.charAt(0);var Q=-1==F.indexOf(" ");
0<=F.indexOf("#")&&Q&&(I=!0);if(!ha||I||-1!="\x3e~+".indexOf(M)||A("ie")&&-1!=F.indexOf(":")||t&&0<=F.indexOf(".")||-1!=F.indexOf(":contains")||-1!=F.indexOf(":checked")||-1!=F.indexOf("|\x3d")){var aa=F.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return U[F]=2>aa.length?T(F):function(la){for(var Z=0,ea=[],pa;pa=aa[Z++];)ea=ea.concat(T(pa)(la));return ea}}var ba=0<="\x3e~+".indexOf(F.charAt(F.length-1))?F+" *":F;return L[F]=function(la){if(9==la.nodeType||Q)try{var Z=la.querySelectorAll(ba);
Z[da]=!0;return Z}catch(ea){}return va(F,!0)(la)}},na=0,ra=A("ie")?function(F){return h?F.getAttribute("_uid")||F.setAttribute("_uid",++na)||na:F.uniqueID}:function(F){return F._uid||(F._uid=++na)},ia=function(F,I){if(!I)return 1;F=ra(F);return I[F]?0:I[F]=1},wa=function(F){if(F&&F.nozip)return F;if(!F||!F.length)return[];if(2>F.length)return[F[0]];var I=[];na++;var M,Q;if(A("ie")&&h){var aa=na+"";for(M=0;M<F.length;M++)(Q=F[M])&&Q.getAttribute("_zipIdx")!=aa&&(I.push(Q),Q.setAttribute("_zipIdx",
aa))}else if(A("ie")&&F.commentStrip)try{for(M=0;M<F.length;M++)(Q=F[M])&&k(Q)&&I.push(Q)}catch(ba){}else for(M=0;M<F.length;M++)(Q=F[M])&&Q._zipIdx!=na&&(I.push(Q),Q._zipIdx=na);return I},ya=function(F,I){I=I||r.doc;h="div"===(I.ownerDocument||I).createElement("div").tagName;return(F=va(F)(I))&&F.nozip?F:wa(F)};ya.filter=function(F,I,M){var Q=[],aa=a(I);aa=1!=aa.length||/[^\w#\.]/.test(I)?function(Z){return-1!=q.indexOf(ya(I,b.byId(M)),Z)}:B(aa[0]);for(var ba=0,la;la=F[ba];ba++)aa(la)&&Q.push(la);
return Q};return ya})},"dojo/NodeList-dom":function(){define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),function(b,A,q,x,r,m,p,t,h){function c(u){return function(y,n,v){return 2==arguments.length?u["string"==typeof n?"get":"set"](y,n):u.set(y,n,v)}}var a=function(u){return 1==u.length&&"string"==typeof u[0]},f=function(u){var y=u.parentNode;y&&y.removeChild(u)},e=A.NodeList,k=e._adaptWithCondition,l=e._adaptAsForEach,
d=e._adaptAsMap;x.extend(e,{_normalize:function(u,y){var n=!0===u.parse;if("string"==typeof u.template){var v=u.templateFunc||b.string&&b.string.substitute;u=v?v(u.template,u):u}v=typeof u;"string"==v||"number"==v?(u=m.toDom(u,y&&y.ownerDocument),u=11==u.nodeType?x._toArray(u.childNodes):[u]):x.isArrayLike(u)?x.isArray(u)||(u=x._toArray(u)):u=[u];n&&(u._runParse=!0);return u},_cloneNode:function(u){return u.cloneNode(!0)},_place:function(u,y,n,v){if(1==y.nodeType||"only"!=n)for(var D,O=u.length,z=
O-1;0<=z;z--){var w=v?this._cloneNode(u[z]):u[z];if(u._runParse&&b.parser&&b.parser.parse)for(D||(D=y.ownerDocument.createElement("div")),D.appendChild(w),b.parser.parse(D),w=D.firstChild;D.firstChild;)D.removeChild(D.firstChild);z==O-1?m.place(w,y,n):y.parentNode.insertBefore(w,y);y=w}},position:d(p.position),attr:k(c(t),a),style:k(c(h),a),addClass:l(r.add),removeClass:l(r.remove),toggleClass:l(r.toggle),replaceClass:l(r.replace),empty:l(m.empty),removeAttr:l(t.remove),marginBox:d(p.getMarginBox),
place:function(u,y){var n=A(u)[0];return this.forEach(function(v){m.place(v,n,y)})},orphan:function(u){return(u?A._filterResult(this,u):this).forEach(f)},adopt:function(u,y){return A(u).place(this[0],y)._stash(this)},query:function(u){if(!u)return this;var y=new e;this.map(function(n){A(u,n).forEach(function(v){void 0!==v&&y.push(v)})});return y._stash(this)},filter:function(u){var y=arguments,n=this,v=0;if("string"==typeof u){n=A._filterResult(this,y[0]);if(1==y.length)return n._stash(this);v=1}return this._wrap(q.filter(n,
y[v],y[v+1]),this)},addContent:function(u,y){u=this._normalize(u,this[0]);for(var n=0,v;v=this[n];n++)u.length?this._place(u,v,y,0<n):m.empty(v);return this}});return e})},"dojo/_base/fx":function(){define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),function(b,A,q,x,r,m,p,t,h){var c=q.mixin,a={},f=a._Line=function(n,v){this.start=n;this.end=v};f.prototype.getValue=function(n){return(this.end-this.start)*n+this.start};var e=a.Animation=function(n){c(this,
n);q.isArray(this.curve)&&(this.curve=new f(this.curve[0],this.curve[1]))};e.prototype=new x;q.extend(e,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var n=this._percent,v=this.easing;return v?v(n):n},_fire:function(n,v){v=v||[];if(this[n])if(A.debugAtAllCosts)this[n].apply(this,v);else try{this[n].apply(this,v)}catch(D){console.error("exception in animation handler for:",n),console.error(D)}return this},play:function(n,v){this._delayTimer&&this._clearTimer();if(v)this._stopTimer(),
this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);n=n||this.delay;v=q.hitch(this,"_play",v);if(0<n)return this._delayTimer=setTimeout(v,n),this;v();return this},_play:function(n){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;n=this.curve.getValue(this._getStep());this._percent||(this._startRepeatCount||
(this._startRepeatCount=this.repeat),this._fire("onBegin",[n]));this._fire("onPlay",[n]);this._cycle();return this},pause:function(){this._delayTimer&&this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(n,v){this._stopTimer();this._active=this._paused=!0;this._percent=n;v&&this.play();return this},stop:function(n){this._delayTimer&&this._clearTimer();if(!this._timer)return this;
this._stopTimer();n&&(this._percent=1);this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},destroy:function(){this.stop()},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var n=(new Date).valueOf();n=0===this.duration?1:(n-this._startTime)/this.duration;1<=n&&(n=1);this._percent=n;this.easing&&(n=this.easing(n));this._fire("onAnimate",[this.curve.getValue(n)]);1>this._percent?this._startTimer():
(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,this._startRepeatCount=0),this._percent=0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var k=0,l=null,d={run:function(){}};q.extend(e,{_startTimer:function(){this._timer||(this._timer=m.after(d,"run",q.hitch(this,"_cycle"),!0),
k++);l||(l=setInterval(q.hitch(d,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),this._timer=null,k--);0>=k&&(clearInterval(l),l=null,k=0)}});var u=p("ie")?function(n){var v=n.style;v.width.length||"auto"!=h.get(n,"width")||(v.width="auto")}:function(){};a._fade=function(n){n.node=t.byId(n.node);var v=c({properties:{}},n);n=v.properties.opacity={};n.start="start"in v?v.start:function(){return+h.get(v.node,"opacity")||0};n.end=v.end;n=a.animateProperty(v);m.after(n,"beforeBegin",
q.partial(u,v.node),!0);return n};a.fadeIn=function(n){return a._fade(c({end:1},n))};a.fadeOut=function(n){return a._fade(c({end:0},n))};a._defaultEasing=function(n){return.5+Math.sin((n+1.5)*Math.PI)/2};var y=function(n){this._properties=n;for(var v in n){var D=n[v];D.start instanceof r&&(D.tempColor=new r)}};y.prototype.getValue=function(n){var v={},D;for(D in this._properties){var O=this._properties[D],z=O.start;z instanceof r?v[D]=r.blendColors(z,O.end,n,O.tempColor).toCss():q.isArray(z)||(v[D]=
(O.end-z)*n+z+("opacity"!=D?O.units||"px":0))}return v};a.animateProperty=function(n){var v=n.node=t.byId(n.node);n.easing||(n.easing=b._defaultEasing);n=new e(n);m.after(n,"beforeBegin",q.hitch(n,function(){var D={},O;for(O in this.properties){if("width"==O||"height"==O)this.node.display="block";var z=this.properties[O];q.isFunction(z)&&(z=z(v));z=D[O]=c({},q.isObject(z)?z:{end:z});q.isFunction(z.start)&&(z.start=z.start(v));q.isFunction(z.end)&&(z.end=z.end(v));var w=0<=O.toLowerCase().indexOf("color"),
E=function(C,H){var B={height:C.offsetHeight,width:C.offsetWidth}[H];if(void 0!==B)return B;B=h.get(C,H);return"opacity"==H?+B:w?B:parseFloat(B)};"end"in z?"start"in z||(z.start=E(v,O)):z.end=E(v,O);w?(z.start=new r(z.start),z.end=new r(z.end)):z.start="opacity"==O?+z.start:parseFloat(z.start)}this.curve=new y(D)}),!0);m.after(n,"onAnimate",q.hitch(h,"set",n.node),!0);return n};a.anim=function(n,v,D,O,z,w){return a.animateProperty({node:n,duration:D||e.prototype.duration,properties:v,easing:O,onEnd:z}).play(w||
0)};c(b,a);b._Animation=e;return a})},"*noref":1}});(function(){var b=this.require;b({cache:{}});!b.async&&b(["dojo"]);b.boot&&b.apply(null,b.boot)})();// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.41/esri/copyright.txt for details.
//>>built
/*
 @esri/arcgis-html-sanitizer - v2.9.0-next.1 - Tue Oct 19 2021 10:19:42 GMT-0400 (Eastern Daylight Time)
 Copyright (c) 2021 - Environmental Systems Research Institute, Inc.
 Apache-2.0

 js-xss
 Copyright (c) 2012-2017 Zongmin Lei() <leizongmin@gmail.com>
 http://ucdok.com
 MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details

 Lodash/isPlainObject
 Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
*/
require({cache:{"dojo/fx/Toggler":function(){define(["../_base/lang","../_base/declare","../_base/fx","../aspect"],function(F,y,a,u){return y("dojo.fx.Toggler",null,{node:null,showFunc:a.fadeIn,hideFunc:a.fadeOut,showDuration:200,hideDuration:200,constructor:function(n){F.mixin(this,n);this.node=n.node;this._showArgs=F.mixin({},n);this._showArgs.node=this.node;this._showArgs.duration=this.showDuration;this.showAnim=this.showFunc(this._showArgs);this._hideArgs=F.mixin({},n);this._hideArgs.node=this.node;
this._hideArgs.duration=this.hideDuration;this.hideAnim=this.hideFunc(this._hideArgs);u.after(this.showAnim,"beforeBegin",F.hitch(this.hideAnim,"stop",!0),!0);u.after(this.hideAnim,"beforeBegin",F.hitch(this.showAnim,"stop",!0),!0)},show:function(n){return this.showAnim.play(n||0)},hide:function(n){return this.hideAnim.play(n||0)}})})},"dijit/_base":function(){define("./main ./a11y ./WidgetSet ./_base/focus ./_base/manager ./_base/place ./_base/popup ./_base/scroll ./_base/sniff ./_base/typematic ./_base/wai ./_base/window".split(" "),
function(F){return F._base})},"dijit/main":function(){define(["dojo/_base/kernel"],function(F){return F.dijit})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),function(F,y,a,u,n,t,r){var l={_isElementShown:function(d){var f=u.get(d);return"hidden"!=f.visibility&&"collapsed"!=f.visibility&&"none"!=f.display&&"hidden"!=a.get(d,"type")},hasDefaultTabStop:function(d){switch(d.nodeName.toLowerCase()){case "a":return a.has(d,
"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":try{var f=d.contentDocument;if("designMode"in f&&"on"==f.designMode)return!0;var b=f.body}catch(c){try{b=d.contentWindow.document.body}catch(g){return!1}}return b&&("true"==b.contentEditable||b.firstChild&&"true"==b.firstChild.contentEditable);default:return"true"==d.contentEditable}},effectiveTabIndex:function(d){if(!a.get(d,"disabled"))return a.has(d,"tabIndex")?+a.get(d,"tabIndex"):
l.hasDefaultTabStop(d)?0:void 0},isTabNavigable:function(d){return 0<=l.effectiveTabIndex(d)},isFocusable:function(d){return-1<=l.effectiveTabIndex(d)},_getTabNavigable:function(d){function f(z){return z&&"input"==z.tagName.toLowerCase()&&z.type&&"radio"==z.type.toLowerCase()&&z.name&&z.name.toLowerCase()}function b(z){return w[f(z)]||z}var c,g,e,h,k,m,w={},p=l._isElementShown,A=l.effectiveTabIndex,C=function(z){for(z=z.firstChild;z;z=z.nextSibling)if(!(1!=z.nodeType||9>=t("ie")&&"HTML"!==z.scopeName)&&
p(z)){var q=A(z);if(0<=q){if(0==q)c||(c=z),g=z;else if(0<q){if(!e||q<h)h=q,e=z;if(!k||q>=m)m=q,k=z}q=f(z);a.get(z,"checked")&&q&&(w[q]=z)}"SELECT"!=z.nodeName.toUpperCase()&&C(z)}};p(d)&&C(d);return{first:b(c),last:b(g),lowest:b(e),highest:b(k)}},getFirstInTabbingOrder:function(d,f){d=l._getTabNavigable(y.byId(d,f));return d.lowest?d.lowest:d.first},getLastInTabbingOrder:function(d,f){d=l._getTabNavigable(y.byId(d,f));return d.last?d.last:d.highest}};n.mixin(r,l);return l})},"dijit/WidgetSet":function(){define(["dojo/_base/array",
"dojo/_base/declare","dojo/_base/kernel","./registry"],function(F,y,a,u){var n=y("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0},add:function(t){if(this._hash[t.id])throw Error("Tried to register widget with id\x3d\x3d"+t.id+" but that id is already registered");this._hash[t.id]=t;this.length++},remove:function(t){this._hash[t]&&(delete this._hash[t],this.length--)},forEach:function(t,r){r=r||a.global;var l=0,d;for(d in this._hash)t.call(r,this._hash[d],l++,this._hash);
return this},filter:function(t,r){r=r||a.global;var l=new n,d=0,f;for(f in this._hash){var b=this._hash[f];t.call(r,b,d++,this._hash)&&l.add(b)}return l},byId:function(t){return this._hash[t]},byClass:function(t){var r=new n,l;for(l in this._hash){var d=this._hash[l];d.declaredClass==t&&r.add(d)}return r},toArray:function(){var t=[],r;for(r in this._hash)t.push(this._hash[r]);return t},map:function(t,r){return F.map(this.toArray(),t,r)},every:function(t,r){r=r||a.global;var l=0,d;for(d in this._hash)if(!t.call(r,
this._hash[d],l++,this._hash))return!1;return!0},some:function(t,r){r=r||a.global;var l=0,d;for(d in this._hash)if(t.call(r,this._hash[d],l++,this._hash))return!0;return!1}});F.forEach("forEach filter byClass map every some".split(" "),function(t){u[t]=n.prototype[t]});return n})},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window","./main"],function(F,y,a){var u={},n={},t={length:0,add:function(r){if(n[r.id])throw Error("Tried to register widget with id\x3d\x3d"+r.id+" but that id is already registered");
n[r.id]=r;this.length++},remove:function(r){n[r]&&(delete n[r],this.length--)},byId:function(r){return"string"==typeof r?n[r]:r},byNode:function(r){return n[r.getAttribute("widgetId")]},toArray:function(){var r=[],l;for(l in n)r.push(n[l]);return r},getUniqueId:function(r){do var l=r+"_"+(r in u?++u[r]:u[r]=0);while(n[l]);return"dijit"==a._scopeName?l:a._scopeName+"_"+l},findWidgets:function(r,l){function d(b){for(b=b.firstChild;b;b=b.nextSibling)if(1==b.nodeType){var c=b.getAttribute("widgetId");
c?(c=n[c])&&f.push(c):b!==l&&d(b)}}var f=[];d(r);return f},_destroyAll:function(){a._curFocus=null;a._prevFocus=null;a._activeStack=[];F.forEach(t.findWidgets(y.body()),function(r){r._destroyed||(r.destroyRecursive?r.destroyRecursive():r.destroy&&r.destroy())})},getEnclosingWidget:function(r){for(;r;){var l=1==r.nodeType&&r.getAttribute("widgetId");if(l)return n[l];r=r.parentNode}return null},_hash:n};return a.registry=t})},"dijit/_base/focus":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/topic dojo/_base/window ../focus ../selection ../main".split(" "),
function(F,y,a,u,n,t,r,l){t.focus=function(d){if(d){var f="node"in d?d.node:d,b=d.bookmark;d=d.openedForWindow;var c=b?b.isCollapsed:!1;if(f){var g="iframe"==f.tagName.toLowerCase()?f.contentWindow:f;if(g&&g.focus)try{g.focus()}catch(e){}t._onFocusNode(f)}if(b&&n.withGlobal(d||n.global,l.isCollapsed)&&!c){d&&d.focus();try{n.withGlobal(d||n.global,l.moveToBookmark,null,[b])}catch(e){}}}};t.watch("curNode",function(d,f,b){l._curFocus=b;l._prevFocus=f;b&&u.publish("focusNode",b)});t.watch("activeStack",
function(d,f,b){l._activeStack=b});t.on("widget-blur",function(d,f){u.publish("widgetBlur",d,f)});t.on("widget-focus",function(d,f){u.publish("widgetFocus",d,f)});a.mixin(l,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return l.getBookmark().isCollapsed},getBookmark:function(){return(n.global==window?r:new r.SelectionManager(n.global)).getBookmark()},moveToBookmark:function(d){return(n.global==window?r:new r.SelectionManager(n.global)).moveToBookmark(d)},getFocus:function(d,f){d=!t.curNode||
d&&y.isDescendant(t.curNode,d.domNode)?l._prevFocus:t.curNode;return{node:d,bookmark:d&&d==t.curNode&&n.withGlobal(f||n.global,l.getBookmark),openedForWindow:f}},_activeStack:[],registerIframe:function(d){return t.registerIframe(d)},unregisterIframe:function(d){d&&d.remove()},registerWin:function(d,f){return t.registerWin(d,f)},unregisterWin:function(d){d&&d.remove()}});return l})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m){var w,p,A=new (y([c,r],{curNode:null,activeStack:[],constructor:function(){var z=l.hitch(this,function(q){a.isDescendant(this.curNode,q)&&this.set("curNode",null);a.isDescendant(this.prevNode,q)&&this.set("prevNode",null)});F.before(t,"empty",z);F.before(t,"destroy",z)},registerIframe:function(z){return this.registerWin(z.contentWindow,z)},registerWin:function(z,q){var v=this,B=z.document&&z.document.body;if(B){var D=b("pointer-events")?"pointerdown":b("MSPointer")?
"MSPointerDown":b("touch-events")?"mousedown, touchstart":"mousedown",x=d(z.document,D,function(I){I&&I.target&&null==I.target.parentNode||v._onTouchNode(q||I.target,"mouse")}),E=d(B,"focusin",function(I){if(I.target.tagName){var L=I.target.tagName.toLowerCase();"#document"!=L&&"body"!=L&&(h.isFocusable(I.target)?v._onFocusNode(q||I.target):v._onTouchNode(q||I.target))}}),G=d(B,"focusout",function(I){v._onBlurNode(q||I.target)});return{remove:function(){x.remove();E.remove();G.remove();B=x=E=G=null}}}},
_onBlurNode:function(z){z=(new Date).getTime();z<w+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(l.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),z<p+100||(this._clearActiveWidgetsTimer=setTimeout(l.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(z,q){p=(new Date).getTime();
this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);n.contains(z,"dijitPopup")&&(z=z.firstChild);var v=[];try{for(;z;){var B=u.get(z,"dijitPopupParent");if(B)z=k.byId(B).domNode;else if(z.tagName&&"body"==z.tagName.toLowerCase()){if(z===g.body())break;z=e.get(z.ownerDocument).frameElement}else{var D=z.getAttribute&&z.getAttribute("widgetId"),x=D&&k.byId(D);!x||"mouse"==q&&x.get("disabled")||v.unshift(D);z=z.parentNode}}}catch(E){}this._setStack(v,
q)},_onFocusNode:function(z){z&&9!=z.nodeType&&(w=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(z),z!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",z)))},_setStack:function(z,q){var v=this.activeStack,B=v.length-1,D=z.length-1;if(z[D]!=v[B]){this.set("activeStack",z);var x;for(x=B;0<=x&&v[x]!=z[x];x--)if(B=k.byId(v[x]))B._hasBeenBlurred=!0,B.set("focused",!1),B._focusManager==this&&B._onBlur(q),
this.emit("widget-blur",B,q);for(x++;x<=D;x++)if(B=k.byId(z[x]))B.set("focused",!0),B._focusManager==this&&B._onFocus(q),this.emit("widget-focus",B,q)}},focus:function(z){if(z)try{z.focus()}catch(q){}}}));f(function(){var z=A.registerWin(e.get(document));b("ie")&&d(window,"unload",function(){z&&(z.remove(),z=null)})});m.focus=function(z){A.focus(z)};for(var C in A)/^_/.test(C)||(m.focus[C]="function"==typeof A[C]?l.hitch(A,C):A[C]);A.watch(function(z,q,v){m.focus[z]=v});return A})},"dojo/Stateful":function(){define(["./_base/declare",
"./_base/lang","./_base/array","./when"],function(F,y,a,u){return F("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(n){var t=this._attrPairNames;return t[n]?t[n]:t[n]={s:"_"+n+"Setter",g:"_"+n+"Getter"}},postscript:function(n){n&&this.set(n)},_get:function(n,t){return"function"===typeof this[t.g]?this[t.g]():this[n]},get:function(n){return this._get(n,this._getAttrNames(n))},set:function(n,t){if("object"===typeof n){for(var r in n)n.hasOwnProperty(r)&&"_watchCallbacks"!=r&&this.set(r,
n[r]);return this}r=this._getAttrNames(n);var l=this._get(n,r);r=this[r.s];var d;"function"===typeof r?d=r.apply(this,Array.prototype.slice.call(arguments,1)):this[n]=t;if(this._watchCallbacks){var f=this;u(d,function(){f._watchCallbacks(n,l,t)})}return this},_changeAttrValue:function(n,t){var r=this.get(n);this[n]=t;this._watchCallbacks&&this._watchCallbacks(n,r,t);return this},watch:function(n,t){var r=this._watchCallbacks;if(!r){var l=this;r=this._watchCallbacks=function(f,b,c,g){var e=function(h){if(h){h=
h.slice();for(var k=0,m=h.length;k<m;k++)h[k].call(l,f,b,c)}};e(r["_"+f]);g||e(r["*"])}}t||"function"!==typeof n?n="_"+n:(t=n,n="*");var d=r[n];"object"!==typeof d&&(d=r[n]=[]);d.push(t);n={};n.unwatch=n.remove=function(){var f=a.indexOf(d,t);-1<f&&d.splice(f,1)};return n}})})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),function(F,y,a,u,n,t,r){y.add("rtl-adjust-position-for-verticalScrollBar",function(d,f){d=a.body(f);
f=r.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},d,"last");var b=r.create("div",{style:{overflow:"hidden",direction:"ltr"}},f,"last"),c=0!=n.position(b).x;f.removeChild(b);d.removeChild(f);return c});y.add("position-fixed-support",function(d,f){d=a.body(f);f=r.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},d,"last");var b=r.create("span",{style:{position:"fixed",
left:"0",top:"0"}},f,"last"),c=n.position(b).x!=n.position(f).x;f.removeChild(b);d.removeChild(f);return c});var l={getBox:function(d){d=d||a.doc;var f="BackCompat"==d.compatMode?a.body(d):d.documentElement,b=n.docScroll(d);if(y("touch")){var c=l.get(d);d=c.innerWidth||f.clientWidth;f=c.innerHeight||f.clientHeight}else d=f.clientWidth,f=f.clientHeight;return{l:b.x,t:b.y,w:d,h:f}},get:function(d){if(y("ie")&&l!==document.parentWindow){d.parentWindow.execScript("document._parentWindow \x3d window;",
"Javascript");var f=d._parentWindow;d._parentWindow=null;return f}return d.parentWindow||d.defaultView},scrollIntoView:function(d,f){try{d=u.byId(d);var b=d.ownerDocument||a.doc,c=a.body(b),g=b.documentElement||c.parentNode,e=y("ie")||y("trident"),h=y("webkit");if(d!=c&&d!=g)if(!(y("mozilla")||e||h||y("opera")||y("trident")||y("edge"))&&"scrollIntoView"in d)d.scrollIntoView(!1);else{var k="BackCompat"==b.compatMode,m=Math.min(c.clientWidth||g.clientWidth,g.clientWidth||c.clientWidth),w=Math.min(c.clientHeight||
g.clientHeight,g.clientHeight||c.clientHeight);b=h||k?c:g;var p=f||n.position(d),A=d.parentNode;f=function(fa){return 6>=e||7==e&&k?!1:y("position-fixed-support")&&"fixed"==t.get(fa,"position").toLowerCase()};var C=this;h=function(fa,sa,T){"BODY"==fa.tagName||"HTML"==fa.tagName?C.get(fa.ownerDocument).scrollBy(sa,T):(sa&&(fa.scrollLeft+=sa),T&&(fa.scrollTop+=T))};if(!f(d))for(;A;){A==c&&(A=b);var z=n.position(A),q=f(A),v="rtl"==t.getComputedStyle(A).direction.toLowerCase();if(A==b)z.w=m,z.h=w,b==
g&&(e||y("trident"))&&v&&(z.x+=b.offsetWidth-z.w),z.x=0,z.y=0;else{var B=n.getPadBorderExtents(A);z.w-=B.w;z.h-=B.h;z.x+=B.l;z.y+=B.t;var D=A.clientWidth,x=z.w-D;0<D&&0<x&&(v&&y("rtl-adjust-position-for-verticalScrollBar")&&(z.x+=x),z.w=D);D=A.clientHeight;x=z.h-D;0<D&&0<x&&(z.h=D)}q&&(0>z.y&&(z.h+=z.y,z.y=0),0>z.x&&(z.w+=z.x,z.x=0),z.y+z.h>w&&(z.h=w-z.y),z.x+z.w>m&&(z.w=m-z.x));var E=p.x-z.x,G=p.y-z.y,I=E+p.w-z.w,L=G+p.h-z.h;if(0<I*E&&(A.scrollLeft||A==b||A.scrollWidth>A.offsetHeight)){var Y=Math[0>
E?"max":"min"](E,I);v&&(8==e&&!k||5<=y("trident"))&&(Y=-Y);var X=A.scrollLeft;h(A,Y,0);Y=A.scrollLeft-X;p.x-=Y}0<L*G&&(A.scrollTop||A==b||A.scrollHeight>A.offsetHeight)&&(Y=Math.ceil(Math[0>G?"max":"min"](G,L)),X=A.scrollTop,h(A,0,Y),Y=A.scrollTop-X,p.y-=Y);A=A!=b&&!q&&A.parentNode}}}catch(fa){console.error("scrollIntoView: "+fa),d.scrollIntoView(!1)}}};F.setObject("dojo.window",l);return l})},"dijit/selection":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/sniff dojo/_base/window dijit/focus".split(" "),
function(F,y,a,u,n,t){var r=function(d){var f=d.document;this.getType=function(){if(f.getSelection){var b="text";try{var c=d.getSelection()}catch(g){}c&&1==c.rangeCount&&(c=c.getRangeAt(0),c.startContainer==c.endContainer&&1==c.endOffset-c.startOffset&&3!=c.startContainer.nodeType&&(b="control"));return b}return f.selection.type.toLowerCase()};this.getSelectedText=function(){if(f.getSelection){var b=d.getSelection();return b?b.toString():""}return"control"==this.getType()?null:f.selection.createRange().text};
this.getSelectedHtml=function(){if(f.getSelection){var b=d.getSelection();if(b&&b.rangeCount){var c,g="";for(c=0;c<b.rangeCount;c++){var e=b.getRangeAt(c).cloneContents(),h=f.createElement("div");h.appendChild(e);g+=h.innerHTML}return g}return null}return"control"==this.getType()?null:f.selection.createRange().htmlText};this.getSelectedElement=function(){if("control"==this.getType()){if(f.getSelection){var b=d.getSelection();return b.anchorNode.childNodes[b.anchorOffset]}if((b=f.selection.createRange())&&
b.item)return f.selection.createRange().item(0)}return null};this.getParentElement=function(){if("control"==this.getType()){var b=this.getSelectedElement();if(b)return b.parentNode}else if(f.getSelection){if(b=f.getSelection()){for(b=b.anchorNode;b&&1!=b.nodeType;)b=b.parentNode;return b}}else return b=f.selection.createRange(),b.collapse(!0),b.parentElement();return null};this.hasAncestorElement=function(b){return null!=this.getAncestorElement.apply(this,arguments)};this.getAncestorElement=function(b){var c=
this.getSelectedElement()||this.getParentElement();return this.getParentOfType(c,arguments)};this.isTag=function(b,c){if(b&&b.tagName){b=b.tagName.toLowerCase();for(var g=0;g<c.length;g++){var e=String(c[g]).toLowerCase();if(b==e)return e}}return""};this.getParentOfType=function(b,c){for(;b;){if(this.isTag(b,c).length)return b;b=b.parentNode}return null};this.collapse=function(b){if(f.getSelection){var c=d.getSelection();c.removeAllRanges?b?c.collapseToStart():c.collapseToEnd():c.collapse(b)}else c=
f.selection.createRange(),c.collapse(b),c.select()};this.remove=function(){var b=f.selection;f.getSelection?(b=d.getSelection(),b.deleteFromDocument()):"none"!=b.type.toLowerCase()&&b.clear();return b};this.selectElementChildren=function(b,c){b=y.byId(b);if(f.getSelection)if(c=d.getSelection(),u("opera")){var g=c.rangeCount?c.getRangeAt(0):f.createRange();g.setStart(b,0);g.setEnd(b,3==b.nodeType?b.length:b.childNodes.length);c.addRange(g)}else c.selectAllChildren(b);else if(g=b.ownerDocument.body.createTextRange(),
g.moveToElementText(b),!c)try{g.select()}catch(e){}};this.selectElement=function(b,c){b=y.byId(b);if(f.getSelection){c=f.getSelection();var g=f.createRange();c.removeAllRanges&&(u("opera")&&c.getRangeAt(0)&&(g=c.getRangeAt(0)),g.selectNode(b),c.removeAllRanges(),c.addRange(g))}else try{var e=b.tagName?b.tagName.toLowerCase():"";g="img"===e||"table"===e?n.body(f).createControlRange():n.body(f).createRange();g.addElement(b);c||g.select()}catch(h){this.selectElementChildren(b,c)}};this.inSelection=function(b){if(b){var c;
if(f.getSelection){var g=d.getSelection();g&&0<g.rangeCount&&(c=g.getRangeAt(0));if(c&&c.compareBoundaryPoints&&f.createRange)try{var e=f.createRange();e.setStart(b,0);if(1===c.compareBoundaryPoints(c.START_TO_END,e))return!0}catch(h){}}else{c=f.selection.createRange();try{e=b.ownerDocument.body.createTextRange(),e.moveToElementText(b)}catch(h){}if(c&&e&&1===c.compareEndPoints("EndToStart",e))return!0}}return!1};this.getBookmark=function(){var b,c=f.selection,g=t.curNode;if(f.getSelection){if(c=d.getSelection())if(c.isCollapsed){if(b=
g?g.tagName:"")if(b=b.toLowerCase(),"textarea"==b||"input"==b&&(!g.type||"text"==g.type.toLowerCase()))return c={start:g.selectionStart,end:g.selectionEnd,node:g,pRange:!0},{isCollapsed:c.end<=c.start,mark:c};b={isCollapsed:!0};c.rangeCount&&(b.mark=c.getRangeAt(0).cloneRange())}else{var e=c.getRangeAt(0);b={isCollapsed:!1,mark:e.cloneRange()}}}else if(c){b=g?g.tagName:"";b=b.toLowerCase();if(g&&b&&("button"==b||"textarea"==b||"input"==b)){if(c.type&&"none"==c.type.toLowerCase())return{isCollapsed:!0,
mark:null};e=c.createRange();return{isCollapsed:e.text&&e.text.length?!1:!0,mark:{range:e,pRange:!0}}}b={};try{e=c.createRange(),b.isCollapsed=!("Text"==c.type?e.htmlText.length:e.length)}catch(h){return b.isCollapsed=!0,b}if("CONTROL"==c.type.toUpperCase())if(e.length)for(b.mark=[],c=0,g=e.length;c<g;)b.mark.push(e.item(c++));else b.isCollapsed=!0,b.mark=null;else b.mark=e.getBookmark()}else console.warn("No idea how to store the current selection for this browser!");return b};this.moveToBookmark=
function(b){if(b=b.mark)if(f.getSelection){var c=d.getSelection();c&&c.removeAllRanges?b.pRange?(c=b.node,c.selectionStart=b.start,c.selectionEnd=b.end):(c.removeAllRanges(),c.addRange(b)):console.warn("No idea how to restore selection for this browser!")}else if(f.selection&&b){if(b.pRange)var g=b.range;else a.isArray(b)?(g=f.body.createControlRange(),F.forEach(b,function(e){g.addElement(e)})):(g=f.body.createTextRange(),g.moveToBookmark(b));g.select()}};this.isCollapsed=function(){return this.getBookmark().isCollapsed}},
l=new r(window);l.SelectionManager=r;return l})},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(F,y,a,u,n){var t={};F.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),function(r){t[r]=u[r]});a.mixin(t,{defaultDuration:y.defaultDuration||200});a.mixin(n,t);return n})},"dijit/_base/place":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],
function(F,y,a,u,n){var t={getViewport:function(){return a.getBox()}};t.placeOnScreen=u.at;t.placeOnScreenAroundElement=function(r,l,d,f){if(y.isArray(d))var b=d;else{b=[];for(var c in d)b.push({aroundCorner:c,corner:d[c]})}return u.around(r,l,b,!0,f)};t.placeOnScreenAroundNode=t.placeOnScreenAroundElement;t.placeOnScreenAroundRectangle=t.placeOnScreenAroundElement;t.getPopupAroundAlignment=function(r,l){var d={};F.forEach(r,function(f){var b=l;switch(f){case "after":d[l?"BR":"BL"]=l?"BL":"BR";break;
case "before":d[l?"BL":"BR"]=l?"BR":"BL";break;case "below-alt":b=!b;case "below":d[b?"BL":"BR"]=b?"TL":"TR";d[b?"BR":"BL"]=b?"TR":"TL";break;case "above-alt":b=!b;default:d[b?"TL":"TR"]=b?"BL":"BR",d[b?"TR":"TL"]=b?"BR":"BL"}});return d};y.mixin(n,t);return n})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(F,y,a,u,n,t,r){function l(f,b,c,g){var e=t.getEffectiveBox(f.ownerDocument);f.parentNode&&
"body"==String(f.parentNode.tagName).toLowerCase()||n.body(f.ownerDocument).appendChild(f);var h=null;F.some(b,function(w){var p=w.corner,A=w.pos,C=0,z={w:{L:e.l+e.w-A.x,R:A.x-e.l,M:e.w}[p.charAt(1)],h:{T:e.t+e.h-A.y,B:A.y-e.t,M:e.h}[p.charAt(0)]},q=f.style;q.left=q.right="auto";c&&(C=c(f,w.aroundCorner,p,z,g),C="undefined"==typeof C?0:C);var v=f.style,B=v.display,D=v.visibility;"none"==v.display&&(v.visibility="hidden",v.display="");q=y.position(f);v.display=B;v.visibility=D;B={L:A.x,R:A.x-q.w,M:Math.max(e.l,
Math.min(e.l+e.w,A.x+(q.w>>1))-q.w)}[p.charAt(1)];D={T:A.y,B:A.y-q.h,M:Math.max(e.t,Math.min(e.t+e.h,A.y+(q.h>>1))-q.h)}[p.charAt(0)];A=Math.max(e.l,B);v=Math.max(e.t,D);B=Math.min(e.l+e.w,B+q.w)-A;D=Math.min(e.t+e.h,D+q.h)-v;C+=q.w-B+(q.h-D);if(null==h||C<h.overflow)h={corner:p,aroundCorner:w.aroundCorner,x:A,y:v,w:B,h:D,overflow:C,spaceAvailable:z};return!C});h.overflow&&c&&c(f,h.aroundCorner,h.corner,h.spaceAvailable,g);b=h.y;var k=h.x,m=n.body(f.ownerDocument);/relative|absolute/.test(a.get(m,
"position"))&&(b-=a.get(m,"marginTop"),k-=a.get(m,"marginLeft"));m=f.style;m.top=b+"px";m.left=k+"px";m.right="auto";return h}var d={TL:"BR",TR:"BL",BL:"TR",BR:"TL"};return r.place={at:function(f,b,c,g,e){c=F.map(c,function(h){var k={corner:h,aroundCorner:d[h],pos:{x:b.x,y:b.y}};g&&(k.pos.x+="L"==h.charAt(1)?g.x:-g.x,k.pos.y+="T"==h.charAt(0)?g.y:-g.y);return k});return l(f,c,e)},around:function(f,b,c,g,e){function h(x,E){D.push({aroundCorner:x,corner:E,pos:{x:{L:z,R:z+v,M:z+(v>>1)}[x.charAt(1)],
y:{T:q,B:q+B,M:q+(B>>1)}[x.charAt(0)]}})}if("string"==typeof b||"offsetWidth"in b||"ownerSVGElement"in b){var k=y.position(b,!0);if(/^(above|below)/.test(c[0])){var m=y.getBorderExtents(b),w=b.firstChild?y.getBorderExtents(b.firstChild):{t:0,l:0,b:0,r:0},p=y.getBorderExtents(f),A=f.firstChild?y.getBorderExtents(f.firstChild):{t:0,l:0,b:0,r:0};k.y+=Math.min(m.t+w.t,p.t+A.t);k.h-=Math.min(m.t+w.t,p.t+A.t)+Math.min(m.b+w.b,p.b+A.b)}}else k=b;if(b.parentNode)for(m="absolute"==a.getComputedStyle(b).position,
b=b.parentNode;b&&1==b.nodeType&&"BODY"!=b.nodeName;){w=y.position(b,!0);p=a.getComputedStyle(b);/relative|absolute/.test(p.position)&&(m=!1);if(!m&&/hidden|auto|scroll/.test(p.overflow)){A=Math.min(k.y+k.h,w.y+w.h);var C=Math.min(k.x+k.w,w.x+w.w);k.x=Math.max(k.x,w.x);k.y=Math.max(k.y,w.y);k.h=A-k.y;k.w=C-k.x}"absolute"==p.position&&(m=!0);b=b.parentNode}var z=k.x,q=k.y,v="w"in k?k.w:k.w=k.width,B="h"in k?k.h:(u.deprecated("place.around: dijit/place.__Rectangle: { x:"+z+", y:"+q+", height:"+k.height+
", width:"+v+" } has been deprecated.  Please use { x:"+z+", y:"+q+", h:"+k.height+", w:"+v+" }","","2.0"),k.h=k.height),D=[];F.forEach(c,function(x){var E=g;switch(x){case "above-centered":h("TM","BM");break;case "below-centered":h("BM","TM");break;case "after-centered":E=!E;case "before-centered":h(E?"ML":"MR",E?"MR":"ML");break;case "after":E=!E;case "before":h(E?"TL":"TR",E?"TR":"TL");h(E?"BL":"BR",E?"BR":"BL");break;case "below-alt":E=!E;case "below":h(E?"BL":"BR",E?"TL":"TR");h(E?"BR":"BL",
E?"TR":"TL");break;case "above-alt":E=!E;case "above":h(E?"TL":"TR",E?"BL":"BR");h(E?"TR":"TL",E?"BR":"BL");break;default:h(x.aroundCorner,x.corner)}});f=l(f,D,e,{w:v,h:B});f.aroundNodePos=k;return f}}})},"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(F,y,a,u,n){var t=new F,r;a(function(){var l=n.getBox();t._rlh=y(window,"resize",function(){var f=n.getBox();if(l.h!=f.h||l.w!=f.w)l=f,t.emit("resize")});if(8==u("ie")){var d=screen.deviceXDPI;
setInterval(function(){screen.deviceXDPI!=d&&(d=screen.deviceXDPI,t.emit("resize"))},500)}u("ios")&&(y(document,"focusin",function(f){r=f.target}),y(document,"focusout",function(f){r=null}))});t.getEffectiveBox=function(l){l=n.getBox(l);var d=r&&r.tagName&&r.tagName.toLowerCase();u("ios")&&r&&!r.readOnly&&("textarea"==d||"input"==d&&/^(color|email|number|password|search|tel|text|url)$/.test(r.type))&&(l.h*=0==orientation||180==orientation?.66:.4,d=r.getBoundingClientRect(),l.h=Math.max(l.h,d.top+
d.height));return l};return t})},"dijit/_base/popup":function(){define(["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(F,y,a){var u=a._createWrapper;a._createWrapper=function(t){t.declaredClass||(t={_popupWrapper:t.parentNode&&F.contains(t.parentNode,"dijitPopup")?t.parentNode:null,domNode:t,destroy:function(){},ownerDocument:t.ownerDocument,ownerDocumentBody:y.body(t.ownerDocument)});return u.call(this,t)};var n=a.open;a.open=function(t){if(t.orient&&"string"!=typeof t.orient&&
!("length"in t.orient)){var r=[],l;for(l in t.orient)r.push({aroundCorner:l,corner:t.orient[l]});t.orient=r}return n.call(this,t)};return a})},"dijit/popup":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on ./place ./BackgroundIframe ./Viewport ./main dojo/touch".split(" "),function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k){function m(){this._popupWrapper&&(t.destroy(this._popupWrapper),
delete this._popupWrapper)}a=a(null,{_stack:[],_beginZIndex:1E3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var w=this._firstAroundPosition,p=r.position(this._firstAroundNode,!0),A=p.x-w.x;w=p.y-w.y;if(A||w)for(this._firstAroundPosition=p,p=0;p<this._stack.length;p++){var C=this._stack[p].wrapper.style;C.top=parseFloat(C.top)+w+"px";"auto"==C.right?C.left=parseFloat(C.left)+A+"px":C.right=parseFloat(C.right)-A+"px"}this._aroundMoveListener=setTimeout(b.hitch(this,"_repositionAll"),
A||w?10:50)}},_createWrapper:function(w){var p=w._popupWrapper,A=w.domNode;p||(p=t.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":w["aria-label"]||w.label||w.name||w.id},w.ownerDocumentBody),p.appendChild(A),A=A.style,A.display="",A.visibility="",A.position="",A.top="0px",w._popupWrapper=p,y.after(w,"destroy",m,!0),"ontouchend"in document&&c(p,"touchend",function(C){/^(input|button|textarea)$/i.test(C.target.tagName)||C.preventDefault()}),p.dojoClick=!0);return p},
moveOffScreen:function(w){var p=this._createWrapper(w);w=r.isBodyLtr(w.ownerDocument);var A={visibility:"hidden",top:"-9999px",display:""};A[w?"left":"right"]="-9999px";A[w?"right":"left"]="auto";l.set(p,A);return p},hide:function(w){var p=this._createWrapper(w);l.set(p,{display:"none",height:"auto",overflowY:"visible",border:""});w=w.domNode;"_originalStyle"in w&&(w.style.cssText=w._originalStyle)},getTopPopup:function(){for(var w=this._stack,p=w.length-1;0<p&&w[p].parent===w[p-1].widget;p--);return w[p]},
open:function(w){for(var p=this._stack,A=w.popup,C=A.domNode,z=w.orient||["below","below-alt","above","above-alt"],q=w.parent?w.parent.isLeftToRight():r.isBodyLtr(A.ownerDocument),v=w.around,B=w.around&&w.around.id?w.around.id+"_dropdown":"popup_"+this._idGen++;p.length&&(!w.parent||!u.isDescendant(w.parent.domNode,p[p.length-1].widget.domNode));)this.close(p[p.length-1].widget);var D=this.moveOffScreen(A);A.startup&&!A._started&&A.startup();var x=r.position(C);if("maxHeight"in w&&-1!=w.maxHeight)var E=
w.maxHeight||Infinity;else{E=h.getEffectiveBox(this.ownerDocument);var G=v?r.position(v,!1):{y:w.y-(w.padding||0),h:2*(w.padding||0)};E=Math.floor(Math.max(G.y,E.h-(G.y+G.h)))}x.h>E&&(x=l.getComputedStyle(C),l.set(D,{overflowY:"scroll",height:E+"px",border:x.borderLeftWidth+" "+x.borderLeftStyle+" "+x.borderLeftColor}),C._originalStyle=C.style.cssText,C.style.border="none");n.set(D,{id:B,style:{zIndex:this._beginZIndex+p.length},"class":"dijitPopup "+(A.baseClass||A["class"]||"").split(" ")[0]+"Popup",
dijitPopupParent:w.parent?w.parent.id:""});0==p.length&&v&&(this._firstAroundNode=v,this._firstAroundPosition=r.position(v,!0),this._aroundMoveListener=setTimeout(b.hitch(this,"_repositionAll"),50));d("config-bgIframe")&&!A.bgIframe&&(A.bgIframe=new e(D));B=A.orient?b.hitch(A,"orient"):null;z=v?g.around(D,v,z,q,B):g.at(D,w,"R"==z?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],w.padding,B);D.style.visibility="visible";C.style.visibility="visible";C=[];C.push(c(D,"keydown",b.hitch(this,function(I){if(I.keyCode==
f.ESCAPE&&w.onCancel)I.stopPropagation(),I.preventDefault(),w.onCancel();else if(I.keyCode==f.TAB&&(I.stopPropagation(),I.preventDefault(),(I=this.getTopPopup())&&I.onCancel))I.onCancel()})));A.onCancel&&w.onCancel&&C.push(A.on("cancel",w.onCancel));C.push(A.on(A.onExecute?"execute":"change",b.hitch(this,function(){var I=this.getTopPopup();if(I&&I.onExecute)I.onExecute()})));p.push({widget:A,wrapper:D,parent:w.parent,onExecute:w.onExecute,onCancel:w.onCancel,onClose:w.onClose,handlers:C});if(A.onOpen)A.onOpen(z);
return z},close:function(w){for(var p=this._stack;w&&F.some(p,function(v){return v.widget==w})||!w&&p.length;){var A=p.pop(),C=A.widget,z=A.onClose;C.bgIframe&&(C.bgIframe.destroy(),delete C.bgIframe);if(C.onClose)C.onClose();for(var q;q=A.handlers.pop();)q.remove();C&&C.domNode&&this.hide(C);z&&z()}0==p.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=this._aroundMoveListener=null)}});return k.popup=new a})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),
function(F,y,a,u,n,t,r,l){l.add("config-bgIframe",(l("ie")||l("trident"))&&!/IEMobile\/10\.0/.test(navigator.userAgent));var d=new function(){var f=[];this.pop=function(){if(f.length){var b=f.pop();b.style.display=""}else 9>l("ie")?(b=a.dojoBlankHtmlUrl||F.toUrl("dojo/resources/blank.html")||'javascript:""',b=document.createElement("\x3ciframe src\x3d'"+b+"' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e")):(b=u.create("iframe"),
b.src='javascript:""',b.className="dijitBackgroundIframe",b.setAttribute("role","presentation"),n.set(b,"opacity",.1)),b.tabIndex=-1;return b};this.push=function(b){b.style.display="none";f.push(b)}};y.BackgroundIframe=function(f){if(!f.id)throw Error("no id");if(l("config-bgIframe")){var b=this.iframe=d.pop();f.appendChild(b);7>l("ie")||l("quirks")?(this.resize(f),this._conn=r(f,"resize",t.hitch(this,"resize",f))):n.set(b,{width:"100%",height:"100%"})}};t.extend(y.BackgroundIframe,{resize:function(f){this.iframe&&
n.set(this.iframe,{width:f.offsetWidth+"px",height:f.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),d.push(this.iframe),delete this.iframe)}});return y.BackgroundIframe})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(F,y,a,u,n,t,r,l,d,f){function b(G,I,L){return h&&L?function(Y,X){return t(Y,
L,X)}:m?function(Y,X){var fa=t(Y,I,function(T){X.call(this,T);x=(new Date).getTime()}),sa=t(Y,G,function(T){(!x||(new Date).getTime()>x+1E3)&&X.call(this,T)});return{remove:function(){fa.remove();sa.remove()}}}:function(Y,X){return t(Y,G,X)}}function c(G){do if(void 0!==G.dojoClick)return G;while(G=G.parentNode)}function g(G,I,L){if(!l.isRight(G)){var Y=c(G.target);if(p=!G.target.disabled&&Y&&Y.dojoClick)if(C=(A="useTarget"==p)?Y:G.target,A&&G.preventDefault(),z=G.changedTouches?G.changedTouches[0].pageX-
f.global.pageXOffset:G.clientX,q=G.changedTouches?G.changedTouches[0].pageY-f.global.pageYOffset:G.clientY,v=("object"==typeof p?p.x:"number"==typeof p?p:0)||4,B=("object"==typeof p?p.y:"number"==typeof p?p:0)||4,!w){w=!0;var X=function(fa){p=A?a.isDescendant(f.doc.elementFromPoint(fa.changedTouches?fa.changedTouches[0].pageX-f.global.pageXOffset:fa.clientX,fa.changedTouches?fa.changedTouches[0].pageY-f.global.pageYOffset:fa.clientY),C):p&&(fa.changedTouches?fa.changedTouches[0].target:fa.target)==
C&&Math.abs((fa.changedTouches?fa.changedTouches[0].pageX-f.global.pageXOffset:fa.clientX)-z)<=v&&Math.abs((fa.changedTouches?fa.changedTouches[0].pageY-f.global.pageYOffset:fa.clientY)-q)<=B};f.doc.addEventListener(I,function(fa){l.isRight(fa)||(X(fa),A&&fa.preventDefault())},!0);f.doc.addEventListener(L,function(fa){if(!l.isRight(fa)&&(X(fa),p)){D=(new Date).getTime();var sa=A?C:fa.target;"LABEL"===sa.tagName&&(sa=a.byId(sa.getAttribute("for"))||sa);var T=fa.changedTouches?fa.changedTouches[0]:
fa,ka=function(ua){var Ba=document.createEvent("MouseEvents");Ba._dojo_click=!0;Ba.initMouseEvent(ua,!0,!0,fa.view,fa.detail,T.screenX,T.screenY,T.clientX,T.clientY,fa.ctrlKey,fa.altKey,fa.shiftKey,fa.metaKey,0,null);return Ba},ma=ka("mousedown"),wa=ka("mouseup"),ja=ka("click");setTimeout(function(){t.emit(sa,"mousedown",ma);t.emit(sa,"mouseup",wa);t.emit(sa,"click",ja);D=(new Date).getTime()},0)}},!0);G=function(fa){f.doc.addEventListener(fa,function(sa){var T=sa.target;p&&!sa._dojo_click&&(new Date).getTime()<=
D+1E3&&("INPUT"!=T.tagName||!u.contains(T,"dijitOffScreen"))&&(sa.stopPropagation(),sa.stopImmediatePropagation&&sa.stopImmediatePropagation(),"click"==fa&&("INPUT"!=T.tagName||"radio"==T.type&&(u.contains(T,"dijitCheckBoxInput")||u.contains(T,"mblRadioButton"))||"checkbox"==T.type&&(u.contains(T,"dijitCheckBoxInput")||u.contains(T,"mblCheckBox")))&&"TEXTAREA"!=T.tagName&&"AUDIO"!=T.tagName&&"VIDEO"!=T.tagName&&sa.preventDefault())},!0)};G("click");G("mousedown");G("mouseup")}}}var e=5>r("ios"),h=
r("pointer-events")||r("MSPointer"),k=function(){var G={},I;for(I in{down:1,move:1,up:1,cancel:1,over:1,out:1})G[I]=r("MSPointer")?"MSPointer"+I.charAt(0).toUpperCase()+I.slice(1):"pointer"+I;return G}(),m=r("touch-events"),w,p,A=!1,C,z,q,v,B,D,x,E;r("touch")&&(h?d(function(){f.doc.addEventListener(k.down,function(G){g(G,k.move,k.up)},!0)}):d(function(){function G(I){var L=n.delegate(I,{bubbles:!0});6<=r("ios")&&(L.touches=I.touches,L.altKey=I.altKey,L.changedTouches=I.changedTouches,L.ctrlKey=I.ctrlKey,
L.metaKey=I.metaKey,L.shiftKey=I.shiftKey,L.targetTouches=I.targetTouches);return L}E=f.body();f.doc.addEventListener("touchstart",function(I){x=(new Date).getTime();var L=E;E=I.target;t.emit(L,"dojotouchout",{relatedTarget:E,bubbles:!0});t.emit(E,"dojotouchover",{relatedTarget:L,bubbles:!0});g(I,"touchmove","touchend")},!0);t(f.doc,"touchmove",function(I){x=(new Date).getTime();var L=f.doc.elementFromPoint(I.pageX-(e?0:f.global.pageXOffset),I.pageY-(e?0:f.global.pageYOffset));L&&(E!==L&&(t.emit(E,
"dojotouchout",{relatedTarget:L,bubbles:!0}),t.emit(L,"dojotouchover",{relatedTarget:E,bubbles:!0}),E=L),t.emit(L,"dojotouchmove",G(I))||I.preventDefault())});t(f.doc,"touchend",function(I){x=(new Date).getTime();var L=f.doc.elementFromPoint(I.pageX-(e?0:f.global.pageXOffset),I.pageY-(e?0:f.global.pageYOffset))||f.body();t.emit(L,"dojotouchend",G(I))})}));y={press:b("mousedown","touchstart",k.down),move:b("mousemove","dojotouchmove",k.move),release:b("mouseup","dojotouchend",k.up),cancel:b(l.leave,
"touchcancel",h?k.cancel:null),over:b("mouseover","dojotouchover",k.over),out:b("mouseout","dojotouchout",k.out),enter:l._eventHandler(b("mouseover","dojotouchover",k.over)),leave:l._eventHandler(b("mouseout","dojotouchout",k.out))};return F.touch=y})},"dijit/_base/scroll":function(){define(["dojo/window","../main"],function(F,y){y.scrollIntoView=function(a,u){F.scrollIntoView(a,u)}})},"dijit/_base/sniff":function(){define(["dojo/uacss"],function(){})},"dojo/uacss":function(){define(["./dom-geometry",
"./_base/lang","./domReady","./sniff","./_base/window"],function(F,y,a,u,n){var t=n.doc.documentElement;n=u("ie");var r=u("trident"),l=u("opera"),d=Math.floor,f=u("ff"),b=F.boxModel.replace(/-/,"");l={dj_quirks:u("quirks"),dj_opera:l,dj_khtml:u("khtml"),dj_webkit:u("webkit"),dj_safari:u("safari"),dj_chrome:u("chrome"),dj_edge:u("edge"),dj_gecko:u("mozilla"),dj_ios:u("ios"),dj_android:u("android")};n&&(l.dj_ie=!0,l["dj_ie"+d(n)]=!0,l.dj_iequirks=u("quirks"));r&&(l.dj_trident=!0,l["dj_trident"+d(r)]=
!0);f&&(l["dj_ff"+d(f)]=!0);l["dj_"+b]=!0;var c="",g;for(g in l)l[g]&&(c+=g+" ");t.className=y.trim(t.className+" "+c);a(function(){if(!F.isBodyLtr()){var e="dj_rtl dijitRtl "+c.replace(/ /g,"-rtl ");t.className=y.trim(t.className+" "+e+"dj_rtl dijitRtl "+c.replace(/ /g,"-rtl "))}});return u})},"dijit/_base/typematic":function(){define(["../typematic"],function(){})},"dijit/typematic":function(){define("dojo/_base/array dojo/_base/connect dojo/_base/lang dojo/on dojo/sniff ./main".split(" "),function(F,
y,a,u,n,t){var r=t.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(0>this._currentTimeout?this._initialDelay:1<this._subsequentDelay?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay);this._timer=setTimeout(a.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(l,d,f,b,c,g,e,h){if(c!=this._obj){this.stop();this._initialDelay=e||500;this._subsequentDelay=
g||.9;this._minDelay=h||10;this._obj=c;this._node=f;this._count=this._currentTimeout=-1;this._callback=a.hitch(d,b);this._evt={faux:!0};for(var k in l)"layerX"!=k&&"layerY"!=k&&(d=l[k],"function"!=typeof d&&"undefined"!=typeof d&&(this._evt[k]=d));this._fireEventAndReload()}},stop:function(){this._timer&&(clearTimeout(this._timer),this._timer=null);this._obj&&(this._callback(-1,this._node,this._evt),this._obj=null)},addKeyListener:function(l,d,f,b,c,g,e){var h="keyCode"in d?"keyCode":"charCode"in
d?"charCode":"charOrCode",k=[u(l,"keyCode"in d?"keydown":"charCode"in d?"keypress":y._keypress,a.hitch(this,function(m){m[h]!=d[h]||void 0!==d.ctrlKey&&d.ctrlKey!=m.ctrlKey||void 0!==d.altKey&&d.altKey!=m.altKey||void 0!==d.metaKey&&d.metaKey!=(m.metaKey||!1)||void 0!==d.shiftKey&&d.shiftKey!=m.shiftKey?r._obj==d&&r.stop():(m.stopPropagation(),m.preventDefault(),r.trigger(m,f,l,b,d,c,g,e))})),u(l,"keyup",a.hitch(this,function(){r._obj==d&&r.stop()}))];return{remove:function(){F.forEach(k,function(m){m.remove()})}}},
addMouseListener:function(l,d,f,b,c,g){var e=[u(l,"mousedown",a.hitch(this,function(h){h.preventDefault();r.trigger(h,d,l,f,l,b,c,g)})),u(l,"mouseup",a.hitch(this,function(h){this._obj&&h.preventDefault();r.stop()})),u(l,"mouseout",a.hitch(this,function(h){this._obj&&h.preventDefault();r.stop()})),u(l,"dblclick",a.hitch(this,function(h){h.preventDefault();9>n("ie")&&(r.trigger(h,d,l,f,l,b,c,g),setTimeout(a.hitch(this,r.stop),50))}))];return{remove:function(){F.forEach(e,function(h){h.remove()})}}},
addListener:function(l,d,f,b,c,g,e,h){var k=[this.addKeyListener(d,f,b,c,g,e,h),this.addMouseListener(l,b,c,g,e,h)];return{remove:function(){F.forEach(k,function(m){m.remove()})}}}};return r})},"dijit/_base/wai":function(){define(["dojo/dom-attr","dojo/_base/lang","../main","../hccss"],function(F,y,a){y.mixin(a,{hasWaiRole:function(u,n){u=this.getWaiRole(u);return n?-1<u.indexOf(n):0<u.length},getWaiRole:function(u){return y.trim((F.get(u,"role")||"").replace("wairole:",""))},setWaiRole:function(u,
n){F.set(u,"role",n)},removeWaiRole:function(u,n){var t=F.get(u,"role");t&&(n?(n=y.trim((" "+t+" ").replace(" "+n+" "," ")),F.set(u,"role",n)):u.removeAttribute("role"))},hasWaiState:function(u,n){return u.hasAttribute?u.hasAttribute("aria-"+n):!!u.getAttribute("aria-"+n)},getWaiState:function(u,n){return u.getAttribute("aria-"+n)||""},setWaiState:function(u,n,t){u.setAttribute("aria-"+n,t)},removeWaiState:function(u,n){u.removeAttribute("aria-"+n)}});return a})},"dijit/hccss":function(){define(["dojo/dom-class",
"dojo/hccss","dojo/domReady","dojo/_base/window"],function(F,y,a,u){a(function(){y("highcontrast")&&F.add(u.body(),"dijit_a11y")});return y})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(F,y,a,u,n,t,r){n.add("highcontrast",function(){var l=r.doc.createElement("div");try{l.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(y.blankGif||
F.toUrl("./resources/blank.gif"))+'");';r.body().appendChild(l);var d=u.getComputedStyle(l),f=d.backgroundImage;return d.borderTopColor==d.borderRightColor||f&&("none"==f||"url(invalid-url:)"==f)}catch(b){return console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: "+b.toString()),!1}finally{8>=n("ie")?l.outerHTML="":r.body().removeChild(l)}});t(function(){n("highcontrast")&&a.add(r.body(),"dj_a11y")});return n})},"dijit/_base/window":function(){define(["dojo/window",
"../main"],function(F,y){y.getDocumentWindow=function(a){return F.get(a)}})},"dijit/form/DropDownButton":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/query ../registry ../popup ./Button ../_Container ../_HasDropDown dojo/text!./templates/DropDownButton.html ../a11yclick".split(" "),function(F,y,a,u,n,t,r,l,d,f){return F("dijit.form.DropDownButton",[r,l,d],{baseClass:"dijitDropDownButton",templateString:f,_fillContent:function(){var b=this.srcNodeRef,c=this.containerNode;
if(b&&c)for(;b.hasChildNodes();){var g=b.firstChild;g.hasAttribute&&(g.hasAttribute("data-dojo-type")||g.hasAttribute("dojoType")||g.hasAttribute("data-"+y._scopeName+"-type")||g.hasAttribute(y._scopeName+"Type"))?(this.dropDownContainer=this.ownerDocument.createElement("div"),this.dropDownContainer.appendChild(g)):c.appendChild(g)}},startup:function(){this._started||(!this.dropDown&&this.dropDownContainer&&(this.dropDown=n.byNode(this.dropDownContainer.firstChild),delete this.dropDownContainer),
this.dropDown&&t.hide(this.dropDown),this.inherited(arguments))},isLoaded:function(){var b=this.dropDown;return!!b&&(!b.href||b.isLoaded)},loadDropDown:function(b){var c=this.dropDown,g=c.on("load",a.hitch(this,function(){g.remove();b()}));c.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../a11yclick".split(" "),
function(F,y,a,u,n,t,r,l,d,f){u("dijit-legacy-requires")&&r(0,function(){F(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});r=y("dijit.form.Button"+(u("dojo-bidi")?"_NoBidi":""),[l,d],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:f,_setValueAttr:"valueNode",_setNameAttr:function(b){this.valueNode&&this.valueNode.setAttribute("name",b)},postCreate:function(){this.inherited(arguments);
this._setLabelFromContainer()},_setLabelFromContainer:function(){this.containerNode&&!this.label&&(this.label=t.trim(this.containerNode.innerHTML),this.onLabelSet())},_setShowLabelAttr:function(b){this.containerNode&&a.toggle(this.containerNode,"dijitDisplayNone",!b);this._set("showLabel",b)},setLabel:function(b){n.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",b)},onLabelSet:function(){this.inherited(arguments);this.showLabel||
"title"in this.params||(this.titleNode.title=t.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});u("dojo-bidi")&&(r=y("dijit.form.Button",r,{onLabelSet:function(){this.inherited(arguments);this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(b){this._created&&this.textDir!=b&&(this._set("textDir",b),this._setLabelAttr(this.label))}}));return r})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),
function(F,y,a,u,n,t,r,l){y("dijit-legacy-requires")&&u(0,function(){require(["dijit/form/_FormValueWidget"])});return F("dijit.form._FormWidget",[n,r,t,l],{setDisabled:function(d){a.deprecated("setDisabled("+d+") is deprecated. Use set('disabled',"+d+") instead.","","2.0");this.set("disabled",d)},setValue:function(d){a.deprecated("dijit.form._FormWidget:setValue("+d+") is deprecated.  Use set('value',"+d+") instead.","","2.0");this.set("value",d)},getValue:function(){a.deprecated(this.declaredClass+
"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!y("msapp")?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)}})})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g){function e(){}function h(k){return function(m,w,p,A){return m&&"string"==typeof w&&m[w]==e?m.on(w.substring(2).toLowerCase(),r.hitch(p,A)):k.apply(a,arguments)}}F.around(a,"connect",h);t.connect&&F.around(t,"connect",h);F=u("dijit._Widget",[b,c,g],{onClick:e,onDblClick:e,onKeyDown:e,onKeyPress:e,onKeyUp:e,onMouseDown:e,onMouseMove:e,onMouseOut:e,onMouseOver:e,onMouseLeave:e,onMouseEnter:e,onMouseUp:e,constructor:function(k){this._toConnect={};for(var m in k)this[m]===
e&&(this._toConnect[m.replace(/^on/,"").toLowerCase()]=k[m],delete k[m])},postCreate:function(){this.inherited(arguments);for(var k in this._toConnect)this.on(k,this._toConnect[k]);delete this._toConnect},on:function(k,m){return this[this._onMap(k)]===e?a.connect(this.domNode,k.toLowerCase(),this,m):this.inherited(arguments)},_setFocusedAttr:function(k){this._focused=k;this._set("focused",k)},setAttribute:function(k,m){t.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.",
"","2.0");this.set(k,m)},attr:function(k,m){return 2<=arguments.length||"object"===typeof k?this.set.apply(this,arguments):this.get(k)},getDescendants:function(){t.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?l("[widgetId]",this.containerNode).map(f.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});n("dijit-legacy-requires")&&d(0,function(){require(["dijit/_base"])});
return F})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m,w,p,A,C,z,q){function v(D){return function(x){l[x?
"set":"remove"](this.domNode,D,x);this._set(D,x)}}g.add("dijit-legacy-requires",!e.isAsync);g.add("dojo-bidi",!1);g("dijit-legacy-requires")&&m(0,function(){F(["dijit/_base/manager"])});var B={};u=t("dijit._WidgetBase",[w,C],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:v("lang"),dir:"",_setDirAttr:v("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(D){this._set("ownerDocument",
D)},attributeMap:{},_blankGif:u.blankGif||F.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var D=this.constructor;if(!D._setterAttrs){var x=D.prototype,E=D._setterAttrs=[];D=D._onMap={};for(var G in x.attributeMap)E.push(G);for(G in x)/^on/.test(G)&&(D[G.substring(2).toLowerCase()]=G),/^_set[A-Z](.*)Attr$/.test(G)&&(G=G.charAt(4).toLowerCase()+G.substr(5,G.length-9),x.attributeMap&&G in x.attributeMap||E.push(G))}},postscript:function(D,x){this.create(D,x)},create:function(D,
x){this._introspect();this.srcNodeRef=r.byId(x);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);D&&(this.params=D,h.mixin(this,D));this.postMixInProperties();this.id||(this.id=q.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=A.body(this.ownerDocument);
q.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();if((D=this.srcNodeRef)&&D.parentNode&&this.domNode!==D){D.parentNode.replaceChild(this.domNode,D);var E=!0}this.domNode.setAttribute("widgetId",this.id)}this.postCreate();E&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var D={},x;for(x in this.params||{})D[x]=this._get(x);y.forEach(this.constructor._setterAttrs,function(E){if(!(E in D)){var G=this._get(E);G&&this.set(E,G)}},this);for(x in D)this.set(x,
D[x])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var D=this.baseClass.split(" ");this.isLeftToRight()||(D=D.concat(y.map(D,function(x){return x+"Rtl"})));d.add(this.domNode,D)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,y.forEach(this.getChildren(),function(D){D._started||D._destroyed||!h.isFunction(D.startup)||(D.startup(),D._started=!0)}))},
destroyRecursive:function(D){this._beingDestroyed=!0;this.destroyDescendants(D);this.destroy(D)},destroy:function(D){function x(E){E.destroyRecursive?E.destroyRecursive(D):E.destroy&&E.destroy(D)}this._beingDestroyed=!0;this.uninitialize();y.forEach(this._connects,h.hitch(this,"disconnect"));y.forEach(this._supportingWidgets,x);this.domNode&&y.forEach(q.findWidgets(this.domNode,this.containerNode),x);this.destroyRendering(D);q.remove(this.id);this._destroyed=!0},destroyRendering:function(D){this.bgIframe&&
(this.bgIframe.destroy(D),delete this.bgIframe);this.domNode&&(D?l.remove(this.domNode,"widgetId"):f.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(D||f.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(D){y.forEach(this.getChildren(),function(x){x.destroyRecursive&&x.destroyRecursive(D)})},uninitialize:function(){return!1},_setStyleAttr:function(D){var x=this.domNode;h.isObject(D)?c.set(x,D):x.style.cssText=x.style.cssText?x.style.cssText+("; "+D):D;this._set("style",
D)},_attrToDom:function(D,x,E){E=3<=arguments.length?E:this.attributeMap[D];y.forEach(h.isArray(E)?E:[E],function(G){var I=this[G.node||G||"domNode"];switch(G.type||"attribute"){case "attribute":h.isFunction(x)&&(x=h.hitch(this,x));G=G.attribute?G.attribute:/^on[A-Z][a-zA-Z]*$/.test(D)?D.toLowerCase():D;I.tagName?l.set(I,G,x):I.set(G,x);break;case "innerText":I.innerHTML="";I.appendChild(this.ownerDocument.createTextNode(x));break;case "textContent":I.textContent=x;break;case "innerHTML":I.innerHTML=
x;break;case "class":d.replace(I,x,this[D]);break;case "toggleClass":d.toggle(I,G.className||D,x)}},this)},get:function(D){var x=this._getAttrNames(D);return this[x.g]?this[x.g]():this._get(D)},set:function(D,x){if("object"===typeof D){for(var E in D)this.set(E,D[E]);return this}E=this._getAttrNames(D);var G=this[E.s];if(h.isFunction(G))var I=G.apply(this,Array.prototype.slice.call(arguments,1));else{G=this.focusNode&&!h.isFunction(this.focusNode)?"focusNode":"domNode";var L=this[G]&&this[G].tagName,
Y;if((Y=L)&&!(Y=B[L])){Y=this[G];var X={};for(fa in Y)X[fa.toLowerCase()]=!0;Y=B[L]=X}var fa=Y;E=D in this.attributeMap?this.attributeMap[D]:E.s in this?this[E.s]:fa&&E.l in fa&&"function"!=typeof x||/^aria-|^data-|^role$/.test(D)?G:null;null!=E&&this._attrToDom(D,x,E);this._set(D,x)}return I||this},_attrPairNames:{},_getAttrNames:function(D){var x=this._attrPairNames;if(x[D])return x[D];var E=D.replace(/^[a-z]|-[a-zA-Z]/g,function(G){return G.charAt(G.length-1).toUpperCase()});return x[D]={n:D+"Node",
s:"_set"+E+"Attr",g:"_get"+E+"Attr",l:E.toLowerCase()}},_set:function(D,x){var E=this[D];this[D]=x;!this._created||E===x||E!==E&&x!==x||(this._watchCallbacks&&this._watchCallbacks(D,E,x),this.emit("attrmodified-"+D,{detail:{prevValue:E,newValue:x}}))},_get:function(D){return this[D]},emit:function(D,x,E){x=x||{};void 0===x.bubbles&&(x.bubbles=!0);void 0===x.cancelable&&(x.cancelable=!0);x.detail||(x.detail={});x.detail.widget=this;var G,I=this["on"+D];I&&(G=I.apply(this,E?E:[x]));this._started&&!this._beingDestroyed&&
k.emit(this.domNode,D.toLowerCase(),x);return G},on:function(D,x){var E=this._onMap(D);return E?a.after(this,E,x,!0):this.own(k(this.domNode,D,x))[0]},_onMap:function(D){var x=this.constructor,E=x._onMap;if(!E){E=x._onMap={};for(var G in x.prototype)/^on/.test(G)&&(E[G.replace(/^on/,"").toLowerCase()]=G)}return E["string"==typeof D&&D.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?q.findWidgets(this.containerNode):
[]},getParent:function(){return q.getEnclosingWidget(this.domNode.parentNode)},connect:function(D,x,E){return this.own(n.connect(D,x,this,E))[0]},disconnect:function(D){D.remove()},subscribe:function(D,x){return this.own(p.subscribe(D,h.hitch(this,x)))[0]},unsubscribe:function(D){D.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():b.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=c.get(this.domNode,"display")},placeAt:function(D,x){var E=
!D.tagName&&q.byId(D);!E||!E.addChild||x&&"number"!==typeof x?(D=E&&"domNode"in E?E.containerNode&&!/after|before|replace/.test(x||"")?E.containerNode:E.domNode:r.byId(D,this.ownerDocument),f.place(this.domNode,D,x),!this._started&&(this.getParent()||{})._started&&this.startup()):E.addChild(this,x);return this},defer:function(D,x){var E=setTimeout(h.hitch(this,function(){E&&(E=null,this._destroyed||h.hitch(this,D)())}),x||0);return{remove:function(){E&&(clearTimeout(E),E=null);return null}}}});g("dojo-bidi")&&
u.extend(z);return u})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(F,y,a){return a("dijit.Destroyable",null,{destroy:function(u){this._destroyed=!0},own:function(){var u=["destroyRecursive","destroy","remove"];F.forEach(arguments,function(n){function t(){r.remove();F.forEach(l,function(f){f.remove()})}var r=y.before(this,"destroy",function(f){n[d](f)}),l=[];if(n.then){var d="cancel";n.then(t,t)}else F.forEach(u,function(f){"function"===typeof n[f]&&
(d||(d=f),l.push(y.after(n,f,t,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(F,y,a,u,n,t){F=u("dijit._OnDijitClickMixin",null,{connect:function(r,l,d){return this.inherited(arguments,[r,"ondijitclick"==l?t:l,d])}});F.a11yclick=t;return F})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(F,y,a,u){function n(l){if((l.keyCode===
F.ENTER||l.keyCode===F.SPACE)&&!/input|button|textarea/i.test(l.target.nodeName))for(l=l.target;l;l=l.parentNode)if(l.dojoClick)return!0}var t;a(document,"keydown",function(l){n(l)?(t=l.target,l.preventDefault()):t=null});a(document,"keyup",function(l){n(l)&&l.target==t&&(t=null,a.emit(l.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:l.ctrlKey,shiftKey:l.shiftKey,metaKey:l.metaKey,altKey:l.altKey,_origType:l.type}))});var r=function(l,d){l.dojoClick=!0;return a(l,"click",d)};r.click=r;r.press=function(l,
d){var f=a(l,u.press,function(c){("mousedown"!=c.type||y.isLeft(c))&&d(c)}),b=a(l,"keydown",function(c){c.keyCode!==F.ENTER&&c.keyCode!==F.SPACE||d(c)});return{remove:function(){f.remove();b.remove()}}};r.release=function(l,d){var f=a(l,u.release,function(c){("mouseup"!=c.type||y.isLeft(c))&&d(c)}),b=a(l,"keyup",function(c){c.keyCode!==F.ENTER&&c.keyCode!==F.SPACE||d(c)});return{remove:function(){f.remove();b.remove()}}};r.move=u.move;return r})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase",
"dojo/_base/declare","dojo/_base/lang"],function(F,y,a,u){u.extend(y,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return a("dijit._FocusMixin",null,{_focusManager:F})})},"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),function(F,y,a,u,n,t,r,l,d,f,b,c){y=y("dijit._CssStateMixin",
[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);F.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),function(e){this.watch(e,t.hitch(this,"_setStateClass"))},this);for(var g in this.cssStateNodes||{})this._trackMouseState(this[g],this.cssStateNodes[g]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(g){if(!this.disabled)switch(g.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",
!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function g(p){e=e.concat(F.map(e,function(A){return A+p}),"dijit"+p)}var e=this.baseClass.split(" ");
this.isLeftToRight()||g("Rtl");var h="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&g(h);this.state&&g(this.state);this.selected&&g("Selected");this._opened&&g("Opened");this.disabled?g("Disabled"):this.readOnly?g("ReadOnly"):this.active?g("Active"):this.hovering&&g("Hover");this.focused&&g("Focused");h=this.stateNode||this.domNode;var k={};F.forEach(h.className.split(" "),function(p){k[p]=!0});"_stateClasses"in this&&F.forEach(this._stateClasses,function(p){delete k[p]});F.forEach(e,
function(p){k[p]=!0});var m=[],w;for(w in k)m.push(w);h.className=m.join(" ");this._stateClasses=e},_subnodeCssMouseEvent:function(g,e,h){function k(m){u.toggle(g,e+"Active",m)}if(!this.disabled&&!this.readOnly)switch(h.type){case "mouseover":case "MSPointerOver":case "pointerover":u.toggle(g,e+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":u.toggle(g,e+"Hover",!1);k(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":k(!0);
break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":k(!1);break;case "focus":case "focusin":u.toggle(g,e+"Focused",!0);break;case "blur":case "focusout":u.toggle(g,e+"Focused",!1)}},_trackMouseState:function(g,e){g._cssState=e}});l(function(){function g(k,m,w){if(!w||!a.isDescendant(w,m))for(;m&&m!=w;m=m.parentNode)if(m._cssState){var p=c.getEnclosingWidget(m);p&&(m==p.domNode?p._cssMouseEvent(k):p._subnodeCssMouseEvent(m,m._cssState,k))}}var e=f.body(),h;r(e,
d.over,function(k){g(k,k.target,k.relatedTarget)});r(e,d.out,function(k){g(k,k.target,k.relatedTarget)});r(e,b.press,function(k){h=k.target;g(k,h)});r(e,b.release,function(k){g(k,h);h=null});r(e,"focusin, focusout",function(k){var m=k.target;if(m._cssState&&!m.getAttribute("widgetId")){var w=c.getEnclosingWidget(m);w&&w._subnodeCssMouseEvent(m,m._cssState,k)}})});return y})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),
function(F,y,a,u,n,t,r,l){var d=y("dijit._TemplatedMixin",l,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(f){var b=this.declaredClass,c=this;return r.substitute(f,this,function(g,e){"!"==e.charAt(0)&&(g=u.getObject(e.substr(1),!1,c));if("undefined"==typeof g)throw Error(b+" template:"+e);return null==g?"":"!"==e.charAt(0)?g:this._escapeValue(""+g)},this)},_escapeValue:function(f){return f.replace(/["'<>&]/g,function(b){return{"\x26":"\x26amp;",
"\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[b]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=F(this.templatePath,{sanitize:!0}));var f=d.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument);if(u.isString(f)){var b=a.toDom(this._stringRepl(f),this.ownerDocument);if(1!=b.nodeType)throw Error("Invalid template: "+f);}else b=f.cloneNode(!0);this.domNode=b}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);
this._rendered=!0},_fillContent:function(f){var b=this.containerNode;if(f&&b)for(;f.hasChildNodes();)b.appendChild(f.firstChild)}});d._templateCache={};d.getCachedTemplate=function(f,b,c){var g=d._templateCache,e=f,h=g[e];if(h){try{if(!h.ownerDocument||h.ownerDocument==(c||document))return h}catch(k){}a.destroy(h)}f=r.trim(f);if(b||f.match(/\$\{([^\}]+)\}/g))return g[e]=f;b=a.toDom(f,c);if(1!=b.nodeType)throw Error("Invalid template: "+f);return g[e]=b};t("ie")&&n(window,"unload",function(){var f=
d._templateCache,b;for(b in f){var c=f[b];"object"==typeof c&&a.destroy(c);delete f[b]}});return d})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(F){return F.cache})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(F,y){var a=/[&<>'"\/]/g,u={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},n={};y.setObject("dojo.string",n);n.escape=function(t){return t?t.replace(a,function(r){return u[r]}):""};n.rep=
function(t,r){if(0>=r||!t)return"";for(var l=[];;){r&1&&l.push(t);if(!(r>>=1))break;t+=t}return l.join("")};n.pad=function(t,r,l,d){l||(l="0");t=String(t);r=n.rep(l,Math.ceil((r-t.length)/l.length));return d?t+r:r+t};n.substitute=function(t,r,l,d){d=d||F.global;l=l?y.hitch(d,l):function(f){return f};return t.replace(/\$\{([^\s:\}]*)(?::([^\s:\}]+))?\}/g,function(f,b,c){if(""==b)return"$";f=y.getObject(b,!1,r);c&&(f=y.getObject(c,!1,d).call(d,f,b));c=l(f,b);if("undefined"===typeof c)throw Error('string.substitute could not find key "'+
b+'" in template');return c.toString()})};n.trim=String.prototype.trim?y.trim:function(t){t=t.replace(/^\s+/,"");for(var r=t.length-1;0<=r;r--)if(/\S/.test(t.charAt(r))){t=t.substring(0,r+1);break}return t};return n})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(F,y,a,u,n,t,r,l,d){var f=n.delegate(l,{mouseenter:t.enter,mouseleave:t.leave,keypress:a._keypress}),
b;a=u("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(c){for(var g=c;;)if(1==g.nodeType&&(this._processTemplateNode(g,function(e,h){return e.getAttribute(h)},this._attach)||this.searchContainerNode)&&g.firstChild)g=g.firstChild;else{if(g==c)break;for(;!g.nextSibling;)if(g=
g.parentNode,g==c)return;g=g.nextSibling}},_processTemplateNode:function(c,g,e){var h=!0,k=this.attachScope||this,m=g(c,"dojoAttachPoint")||g(c,"data-dojo-attach-point");if(m)for(var w=m.split(/\s*,\s*/);m=w.shift();)n.isArray(k[m])?k[m].push(c):k[m]=c,h="containerNode"!=m,this._attachPoints.push(m);if(g=g(c,"dojoAttachEvent")||g(c,"data-dojo-attach-event"))for(m=g.split(/\s*,\s*/),w=n.trim;g=m.shift();)if(g){var p=null;-1!=g.indexOf(":")?(p=g.split(":"),g=w(p[0]),p=w(p[1])):g=w(g);p||(p=g);this._attachEvents.push(e(c,
g,n.hitch(k,p)))}return h},_attach:function(c,g,e){g=g.replace(/^on/,"").toLowerCase();g="dijitclick"==g?b||(b=F("./a11yclick")):f[g]||g;return r(c,g,e)},_detachTemplateNodes:function(){var c=this.attachScope||this;y.forEach(this._attachPoints,function(g){delete c[g]});this._attachPoints=[];y.forEach(this._attachEvents,function(g){g.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});n.extend(d,{dojoAttachEvent:"",dojoAttachPoint:""});
return a})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),function(F,y,a,u,n,t,r,l,d,f){return y("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(b){this._set("disabled",
b);/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)?(a.set(this.focusNode,"disabled",b),l("trident")&&"readOnly"in this&&a.set(this.focusNode,"readonly",b||this.readOnly)):this.focusNode.setAttribute("aria-disabled",b?"true":"false");this.valueNode&&a.set(this.valueNode,"disabled",b);b?(this._set("hovering",!1),this._set("active",!1),b="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",F.forEach(n.isArray(b)?
b:[b],function(c){c=this[c];l("webkit")||f.hasDefaultTabStop(c)?c.setAttribute("tabIndex","-1"):c.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(b){if("mouse"==b&&this.isFocusable())var c=this.own(r(this.focusNode,"focus",function(){e.remove();c.remove()}))[0],g=l("pointer-events")?"pointerup":l("MSPointer")?"MSPointerUp":l("touch-events")?"touchend, mouseup":"mouseup",e=this.own(r(this.ownerDocumentBody,g,n.hitch(this,function(h){e.remove();
c.remove();this.focused&&("touchend"==h.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){d.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=u.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(b){}},compare:function(b,c){return"number"==typeof b&&"number"==typeof c?isNaN(b)&&isNaN(c)?0:b-c:b>c?1:b<c?-1:0},onChange:function(){},
_onChangeActive:!1,_handleOnChange:function(b,c){void 0!=this._lastValueReported||null!==c&&this._onChangeActive||(this._resetValue=this._lastValueReported=b);this._pendingOnChange=this._pendingOnChange||typeof b!=typeof this._lastValueReported||0!=this.compare(b,this._lastValueReported);(this.intermediateChanges||c||void 0===c)&&this._pendingOnChange&&(this._lastValueReported=b,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=
this.defer(function(){this._onChangeHandle=null;this.onChange(b)})))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(F,y,a,u){var n=F("dijit.form._ButtonMixin"+(a("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(t){t.stopPropagation();
t.preventDefault();this.disabled||this.valueNode.click(t);return!1},_onClick:function(t){if(this.disabled)return t.stopPropagation(),t.preventDefault(),!1;!1===this.onClick(t)&&t.preventDefault();var r=t.defaultPrevented;if(!r&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var l=this.domNode;l.parentNode;l=l.parentNode){var d=u.byNode(l);if(d&&"function"==typeof d._onSubmit){d._onSubmit(t);t.preventDefault();r=!0;break}}return!r},postCreate:function(){this.inherited(arguments);y.setSelectable(this.focusNode,
!1)},onClick:function(){return!0},_setLabelAttr:function(t){this._set("label",t);(this.containerNode||this.focusNode).innerHTML=t;this.onLabelSet()},onLabelSet:function(){}});a("dojo-bidi")&&(n=F("dijit.form._ButtonMixin",n,{onLabelSet:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||this.focusNode)}}));return n})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(F,y,a,u){return y("dijit._Container",
null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(n,t){var r=this.containerNode;if(0<t){for(r=r.firstChild;0<t;)1==r.nodeType&&t--,r=r.nextSibling;r?t="before":(r=this.containerNode,t="last")}a.place(n.domNode,r,t);this._started&&!n._started&&n.startup()},removeChild:function(n){"number"==typeof n&&(n=this.getChildren()[n]);n&&(n=n.domNode)&&n.parentNode&&n.parentNode.removeChild(n)},hasChildren:function(){return 0<this.getChildren().length},
_getSiblingOfChild:function(n,t){var r=this.getChildren();n=F.indexOf(r,n);return r[n+t]},getIndexOfChild:function(n){return F.indexOf(this.getChildren(),n)}})})},"dijit/_HasDropDown":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on dojo/touch ./registry ./focus ./popup ./_FocusMixin".split(" "),function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k){return F("dijit._HasDropDown",k,{_buttonNode:null,
_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(m){this.disabled||this.readOnly||("MSPointerDown"!=m.type&&m.preventDefault(),this.own(b.once(this.ownerDocument,c.release,f.hitch(this,"_onDropDownMouseUp"))),this.toggleDropDown())},_onDropDownMouseUp:function(m){var w=this.dropDown,p=!1;if(m&&this._opened){var A=t.position(this._buttonNode,!0);if(!(m.pageX>=
A.x&&m.pageX<=A.x+A.w&&m.pageY>=A.y&&m.pageY<=A.y+A.h)){for(A=m.target;A&&!p;)n.contains(A,"dijitPopup")?p=!0:A=A.parentNode;if(p){A=m.target;if(w.onItemClick){for(var C;A&&!(C=g.byNode(A));)A=A.parentNode;if(C&&C.onClick&&C.getParent)C.getParent().onItemClick(C,m)}return}}}this._opened?w.focus&&(!1!==w.autoFocus||"mouseup"==m.type&&!this.hovering)&&(this._focusDropDownTimer=this.defer(function(){w.focus();delete this._focusDropDownTimer})):this.focus&&this.defer("focus")},_onDropDownClick:function(m){this._stopClickEvents&&
(m.stopPropagation(),m.preventDefault())},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var m={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";n.add(this._arrowWrapperNode||this._buttonNode,"dijit"+m+"ArrowButton")},
postCreate:function(){this.inherited(arguments);var m=this.focusNode||this.domNode;this.own(b(this._buttonNode,c.press,f.hitch(this,"_onDropDownMouseDown")),b(this._buttonNode,"click",f.hitch(this,"_onDropDownClick")),b(m,"keydown",f.hitch(this,"_onKey")),b(m,"keyup",f.hitch(this,"_onKeyUp")))},destroy:function(){this._opened&&this.closeDropDown(!0);this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown);this.inherited(arguments)},_onKey:function(m){if(!this.disabled&&
!this.readOnly){var w=this.dropDown,p=m.target;w&&this._opened&&w.handleKey&&!1===w.handleKey(m)?(m.stopPropagation(),m.preventDefault()):w&&this._opened&&m.keyCode==d.ESCAPE?(this.closeDropDown(),m.stopPropagation(),m.preventDefault()):!this._opened&&(m.keyCode==d.DOWN_ARROW||(m.keyCode==d.ENTER||m.keyCode==d.SPACE&&(!this._searchTimer||m.ctrlKey||m.altKey||m.metaKey))&&("input"!==(p.tagName||"").toLowerCase()||p.type&&"text"!==p.type.toLowerCase()))&&(this._toggleOnKeyUp=!0,m.stopPropagation(),
m.preventDefault())}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var m=this.dropDown;m&&m.focus&&this.defer(f.hitch(m,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1);this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(m){m()},loadAndOpenDropDown:function(){var m=new y,w=f.hitch(this,function(){this.openDropDown();m.resolve(this.dropDown)});this.isLoaded()?w():this.loadDropDown(w);return m},toggleDropDown:function(){this.disabled||
this.readOnly||(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var m=this.dropDown,w=m.domNode,p=this._aroundNode||this.domNode,A=this,C=h.open({parent:this,popup:m,around:p,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){A.closeDropDown(!0)},onCancel:function(){A.closeDropDown(!0)},onClose:function(){u.set(A._popupStateNode,"popupActive",!1);n.remove(A._popupStateNode,"dijitHasDropDownOpen");A._set("_opened",!1)}});if(this.forceWidth||
this.autoWidth&&p.offsetWidth>m._popupWrapper.offsetWidth){p=p.offsetWidth-m._popupWrapper.offsetWidth;var z={w:m.domNode.offsetWidth+p};this._origStyle=w.style.cssText;f.isFunction(m.resize)?m.resize(z):t.setMarginBox(w,z);"R"==C.corner[1]&&(m._popupWrapper.style.left=m._popupWrapper.style.left.replace("px","")-p+"px")}u.set(this._popupStateNode,"popupActive","true");n.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");
this._popupStateNode.setAttribute("aria-owns",m.id);"presentation"===w.getAttribute("role")||w.getAttribute("aria-labelledby")||w.setAttribute("aria-labelledby",this.id);return C},closeDropDown:function(m){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),m&&this.focus&&this.focus(),h.close(this.dropDown),this._opened=!1);this._origStyle&&(this.dropDown.domNode.style.cssText=this._origStyle,
delete this._origStyle)}})})},"dijit/form/ComboButton":function(){define("dojo/_base/declare dojo/keys ../focus ./DropDownButton dojo/text!./templates/ComboButton.html ../a11yclick".split(" "),function(F,y,a,u,n){return F("dijit.form.ComboButton",u,{templateString:n,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{buttonNode:"dijitButtonNode",titleNode:"dijitButtonContents",_popupStateNode:"dijitDownArrowButton"},
_focusedNode:null,_onButtonKeyDown:function(t){t.keyCode==y[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]&&(a.focus(this._popupStateNode),t.stopPropagation(),t.preventDefault())},_onArrowKeyDown:function(t){t.keyCode==y[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]&&(a.focus(this.titleNode),t.stopPropagation(),t.preventDefault())},focus:function(t){this.disabled||a.focus("start"==t?this.titleNode:this._popupStateNode)}})})},"dijit/form/ToggleButton":function(){define(["dojo/_base/declare","dojo/_base/kernel",
"./Button","./_ToggleButtonMixin"],function(F,y,a,u){return F("dijit.form.ToggleButton",[a,u],{baseClass:"dijitToggleButton",setChecked:function(n){y.deprecated("setChecked("+n+") is deprecated. Use set('checked',"+n+") instead.","","2.0");this.set("checked",n)}})})},"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(F,y){return F("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(a){var u=this.checked;this._set("checked",
!u);var n=this.inherited(arguments);this.set("checked",n?this.checked:u);return n},_setCheckedAttr:function(a,u){this._set("checked",a);var n=this.focusNode||this.domNode;this._created&&y.get(n,"checked")!=!!a&&y.set(n,"checked",!!a);n.setAttribute(this._aria_attr,String(a));this._handleOnChange(a,u)},postCreate:function(){this.inherited(arguments);var a=this.focusNode||this.domNode;this.checked&&a.setAttribute("checked","checked");void 0===this._resetValue&&(this._lastValueReported=this._resetValue=
this.checked)},reset:function(){this._hasBeenBlurred=!1;this.set("checked",this.params.checked||!1)}})})},"dijit/TooltipDialog":function(){define("dojo/_base/declare dojo/dom-class dojo/has dojo/keys dojo/_base/lang dojo/on ./focus ./layout/ContentPane ./_DialogMixin ./form/_FormMixin ./_TemplatedMixin dojo/text!./templates/TooltipDialog.html ./main".split(" "),function(F,y,a,u,n,t,r,l,d,f,b,c,g){F=F("dijit.TooltipDialog",[l,b,f,d],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",
_firstFocusItem:null,_lastFocusItem:null,templateString:c,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments);this.own(t(this.domNode,"keydown",n.hitch(this,"_onKey")))},orient:function(e,h,k){e={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight",
"BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight","TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[h+"-"+k];y.replace(this.domNode,e,this._currentOrientClass||"");this._currentOrientClass=e},focus:function(){this._getFocusItems();r.focus(this._firstFocusItem)},onOpen:function(e){this.orient(this.domNode,e.aroundCorner,e.corner);var h=e.aroundNodePos;"M"==
e.corner.charAt(0)&&"M"==e.aroundCorner.charAt(0)?(this.connectorNode.style.top=h.y+(h.h-this.connectorNode.offsetHeight>>1)-e.y+"px",this.connectorNode.style.left=""):"M"==e.corner.charAt(1)&&"M"==e.aroundCorner.charAt(1)&&(this.connectorNode.style.left=h.x+(h.w-this.connectorNode.offsetWidth>>1)-e.x+"px");this._onShow()},onClose:function(){this.onHide()},_onKey:function(e){if(e.keyCode==u.ESCAPE)this.defer("onCancel"),e.stopPropagation(),e.preventDefault();else if(e.keyCode==u.TAB){var h=e.target;
this._getFocusItems();this._firstFocusItem==this._lastFocusItem?(e.stopPropagation(),e.preventDefault()):h==this._firstFocusItem&&e.shiftKey?(r.focus(this._lastFocusItem),e.stopPropagation(),e.preventDefault()):h!=this._lastFocusItem||e.shiftKey?e.stopPropagation():(r.focus(this._firstFocusItem),e.stopPropagation(),e.preventDefault())}}});a("dojo-bidi")&&F.extend({_setTitleAttr:function(e){this.containerNode.title=this.textDir&&this.enforceTextDirWithUcc?this.enforceTextDirWithUcc(null,e):e;this._set("title",
e)},_setTextDirAttr:function(e){this._created&&this.textDir==e||(this._set("textDir",e),this.textDir&&this.title&&(this.containerNode.title=this.enforceTextDirWithUcc(null,this.title)))}});return F})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k){return d("dijit.layout.ContentPane",[a,u,n],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:F._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",
isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(m,w,p){var A=new p(m,w);return!A.href&&A._contentSetter&&A._contentSetter.parseDeferred&&!A._contentSetter.parseDeferred.isFulfilled()?A._contentSetter.parseDeferred.then(function(){return A}):A},create:function(m,w){if(!(m&&m.template||!w||"href"in m||"content"in m)){w=b.byId(w);for(var p=w.ownerDocument.createDocumentFragment();w.firstChild;)p.appendChild(w.firstChild);
m=y.delegate(m,{content:p})}this.inherited(arguments,[m,w])},postMixInProperties:function(){this.inherited(arguments);var m=h.getLocalization("dijit","loading",this.lang);this.loadingMessage=t.substitute(this.loadingMessage,m);this.errorMessage=t.substitute(this.errorMessage,m)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&l.forEach(this._contentSetter.parseResults,
function(m){m._started||m._destroyed||!y.isFunction(m.startup)||(m.startup(),m._started=!0)},this)},_startChildren:function(){l.forEach(this.getChildren(),function(m){m._started||m._destroyed||!y.isFunction(m.startup)||(m.startup(),m._started=!0)});this._contentSetter&&l.forEach(this._contentSetter.parseResults,function(m){m._started||m._destroyed||!y.isFunction(m.startup)||(m.startup(),m._started=!0)},this)},setHref:function(m){F.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
"","2.0");return this.set("href",m)},_setHrefAttr:function(m){this.cancel();this.onLoadDeferred=new f(y.hitch(this,"cancel"));this.onLoadDeferred.then(y.hitch(this,"onLoad"));this._set("href",m);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(m){F.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",m)},_setContentAttr:function(m){this._set("href",
"");this.cancel();this.onLoadDeferred=new f(y.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(y.hitch(this,"onLoad"));this._setContent(m||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(m){this._beingDestroyed||
this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new f(y.hitch(this,"cancel"));this.onLoadDeferred.then(y.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var m=this,w={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};
y.isObject(this.ioArgs)&&y.mixin(w,this.ioArgs);var p=this._xhrDfd=(this.ioMethod||e.get)(w),A;p.then(function(C){A=C;try{return m._isDownloaded=!0,m._setContent(C,!1)}catch(z){m._onError("Content",z)}},function(C){p.canceled||m._onError("Download",C);delete m._xhrDfd;return C}).then(function(){m.onDownloadEnd();delete m._xhrDfd;return A});delete this._hrefChanged},_onLoadHandler:function(m){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(m)}catch(w){console.error("Error "+(this.widgetId||
this.id)+" running custom onLoad code: "+w.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(m){console.error("Error "+this.widgetId+" running custom onUnload code: "+m.message)}},destroyDescendants:function(m){this.isLoaded&&this._onUnloadHandler();var w=this._contentSetter;l.forEach(this.getChildren(),function(p){p.destroyRecursive?p.destroyRecursive(m):p.destroy&&p.destroy(m);p._destroyed=!0});w&&(l.forEach(w.parseResults,function(p){p._destroyed||(p.destroyRecursive?
p.destroyRecursive(m):p.destroy&&p.destroy(m),p._destroyed=!0)}),delete w.parseResults);m||g.empty(this.containerNode);delete this._singleChild},_setContent:function(m,w){m=this.preprocessContent(m);this.destroyDescendants();var p=this._contentSetter;p&&p instanceof r._ContentSetter||(p=this._contentSetter=new r._ContentSetter({node:this.containerNode,_onError:y.hitch(this,this._onError),onContentError:y.hitch(this,function(z){z=this.onContentError(z);try{this.containerNode.innerHTML=z}catch(q){console.error("Fatal "+
this.id+" could not change content due to "+q.message,q)}})}));var A=y.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!m.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});A=p.set(y.isObject(m)&&m.domNode?m.domNode:m,A);var C=this;return k(A&&A.then?A:p.parseDeferred,function(){delete C._contentSetterParams;w||(C._started&&(C._startChildren(),C._scheduleLayout()),
C._onLoadHandler(m))})},preprocessContent:function(m){return m},_onError:function(m,w,p){this.onLoadDeferred.reject(w);m=this["on"+m+"Error"].call(this,w);p?console.error(p,w):m&&this._setContent(m,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),
function(F,y,a,u,n,t,r,l,d,f){return y("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var b=this.getParent();this._childOfLayoutWidget=b&&b.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(d.on("resize",t.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var b=[],c=!1;r("\x3e *",this.containerNode).some(function(g){var e=
l.byNode(g);e&&e.resize?b.push(e):!/script|link|style/i.test(g.nodeName)&&g.offsetHeight&&(c=!0)});this._singleChild=1!=b.length||c?null:b[0];a.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(b,c){this._resizeCalled=!0;this._scheduleLayout(b,c)},_scheduleLayout:function(b,c){this._isShown()?this._layout(b,c):(this._needLayout=!0,this._changeSize=b,this._resultSize=c)},_layout:function(b,c){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();
b&&u.setMarginBox(this.domNode,b);var g=this.containerNode;g===this.domNode?(c=c||{},t.mixin(c,b||{}),"h"in c&&"w"in c||(c=t.mixin(u.getMarginBox(g),c)),this._contentBox=f.marginBox2contentBox(g,c)):this._contentBox=u.getContentBox(g);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var b=this._contentBox||u.getContentBox(this.containerNode);this._singleChild.resize({w:b.w,h:b.h})}else{b=this.getChildren();for(var c,g=0;c=
b[g++];)c.resize&&c.resize()}},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var b=this.domNode,c=this.domNode.parentNode;return"none"!=b.style.display&&"hidden"!=b.style.visibility&&!a.contains(b,"dijitHidden")&&c&&c.style&&"none"!=c.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array",
"dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(F,y,a,u,n){function t(d){return d.substring(0,1).toUpperCase()+d.substring(1)}function r(d,f){var b=d.resize?d.resize(f):a.setMarginBox(d.domNode,f);b?n.mixin(d,b):(n.mixin(d,a.getMarginBox(d.domNode)),n.mixin(d,f))}var l={marginBox2contentBox:function(d,f){var b=u.getComputedStyle(d),c=a.getMarginExtents(d,b),g=a.getPadBorderExtents(d,b);return{l:u.toPixelValue(d,b.paddingLeft),t:u.toPixelValue(d,b.paddingTop),w:f.w-
(c.w+g.w),h:f.h-(c.h+g.h)}},layoutChildren:function(d,f,b,c,g){f=n.mixin({},f);y.add(d,"dijitLayoutContainer");b=F.filter(b,function(e){return"center"!=e.region&&"client"!=e.layoutAlign}).concat(F.filter(b,function(e){return"center"==e.region||"client"==e.layoutAlign}));F.forEach(b,function(e){var h=e.domNode,k=e.region||e.layoutAlign;if(!k)throw Error("No region setting for "+e.id);var m=h.style;m.left=f.l+"px";m.top=f.t+"px";m.position="absolute";y.add(h,"dijitAlign"+t(k));h={};c&&c==e.id&&(h["top"==
e.region||"bottom"==e.region?"h":"w"]=g);"leading"==k&&(k=e.isLeftToRight()?"left":"right");"trailing"==k&&(k=e.isLeftToRight()?"right":"left");"top"==k||"bottom"==k?(h.w=f.w,r(e,h),f.h-=e.h,"top"==k?f.t+=e.h:m.top=f.t+f.h+"px"):"left"==k||"right"==k?(h.h=f.h,r(e,h),f.w-=e.w,"left"==k?f.l+=e.w:m.left=f.l+f.w+"px"):"client"!=k&&"center"!=k||r(e,f)})}};n.setObject("dijit.layout.utils",l);return l})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
function(F,y,a,u,n,t,r){var l=0,d={_secureForInnerHtml:function(f){return f.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:t.empty,_setNodeContent:function(f,b){t.empty(f);if(b)if("number"==typeof b&&(b=b.toString()),"string"==typeof b&&(b=t.toDom(b,f.ownerDocument)),!b.nodeType&&y.isArrayLike(b))for(var c=b.length,g=0;g<b.length;g=c==b.length?g+1:0)t.place(b[g],f,"last");else t.place(b,f,"last");return f},_ContentSetter:u("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:F._scopeName,startup:!0,constructor:function(f,b){y.mixin(this,f||{});b=this.node=n.byId(this.node||b);this.id||(this.id=["Setter",b?b.id||b.tagName:"",l++].join("_"))},set:function(f,b){void 0!==f&&(this.content=f);"number"==typeof f&&(f=f.toString());b&&this._mixin(b);this.onBegin();this.setContent();return(f=this.onEnd())&&f.then?f:this.node},setContent:function(){var f=this.node;if(!f)throw Error(this.declaredClass+
": setContent given no node");try{f=d._setNodeContent(f,this.content)}catch(c){var b=this.onContentError(c);try{f.innerHTML=b}catch(g){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+g.message,g)}}this.node=f},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(a.forEach(this.parseResults,function(f){f.destroy&&f.destroy()}),delete this.parseResults);
t.empty(this.node)},onBegin:function(){var f=this.content;if(y.isString(f)&&(this.cleanContent&&(f=d._secureForInnerHtml(f)),this.extractContent)){var b=f.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(f=b[1])}this.empty();this.content=f;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(f){return"Error occurred setting content: "+
f},onExecError:function(f){return"Error occurred executing scripts: "+f},_mixin:function(f){var b={},c;for(c in f)c in b||(this[c]=f[c])},_parse:function(){var f=this.node;try{var b={};a.forEach(["dir","lang","textDir"],function(g){this[g]&&(b[g]=this[g])},this);var c=this;this.parseDeferred=r.parse({rootNode:f,noStart:!this.startup,inherited:b,scope:this.parserScope}).then(function(g){return c.parseResults=g},function(g){c._onError("Content",g,"Error parsing in _ContentSetter#"+c.id)})}catch(g){this._onError("Content",
g,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(f,b,c){f=this["on"+f+"Error"].call(this,b);c?console.error(c,b):f&&d._setNodeContent(this.node,f,!0)}}),set:function(f,b,c){void 0==b&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),b="");"number"==typeof b&&(b=b.toString());return c?(new d._ContentSetter(y.mixin(c,{content:b,node:f}))).set():d._setNodeContent(f,b,!0)}};y.setObject("dojo.html",d);return d})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k){function m(z){return eval("("+z+")")}function w(z){var q=z._nameCaseMap,v=z.prototype;if(!q||q._extendCnt<A){q=z._nameCaseMap={};for(var B in v)"_"!==B.charAt(0)&&(q[B.toLowerCase()]=B);q._extendCnt=A}return q}function p(z,q){q||(q=F);var v=q._dojoParserCtorMap||(q._dojoParserCtorMap={}),B=z.join();if(!v[B]){for(var D=[],x=0,E=z.length;x<E;x++){var G=z[x];D[D.length]=v[G]=v[G]||a.getObject(G)||~G.indexOf("/")&&q(G)}z=D.shift();v[B]=D.length?z.createSubclass?
z.createSubclass(D):z.extend.apply(z,D):z}return v[B]}new Date("X");var A=0;d.after(a,"extend",function(){A++},!0);var C={_clearCache:function(){A++;_ctorMap={}},_functionFromScript:function(z,q){var v="",B="",D=z.getAttribute(q+"args")||z.getAttribute("args");q=z.getAttribute("with");D=(D||"").split(/\s*,\s*/);q&&q.length&&u.forEach(q.split(/\s*,\s*/),function(x){v+="with("+x+"){";B+="}"});return new Function(D,v+z.innerHTML+B)},instantiate:function(z,q,v){q=q||{};v=v||{};var B=(v.scope||y._scopeName)+
"Type",D="data-"+(v.scope||y._scopeName)+"-",x=D+"type",E=D+"mixins",G=[];u.forEach(z,function(I){var L=B in q?q[B]:I.getAttribute(x)||I.getAttribute(B);if(L){var Y=I.getAttribute(E);L=Y?[L].concat(Y.split(/\s*,\s*/)):[L];G.push({node:I,types:L})}});return this._instantiate(G,q,v)},_instantiate:function(z,q,v,B){function D(x){q._started||v.noStart||u.forEach(x,function(E){"function"!==typeof E.startup||E._started||E.startup()});return x}z=u.map(z,function(x){var E=x.ctor||p(x.types,v.contextRequire);
if(!E)throw Error("Unable to resolve constructor for: '"+x.types.join()+"'");return this.construct(E,x.node,q,v,x.scripts,x.inherited)},this);return B?f(z).then(D):D(z)},construct:function(z,q,v,B,D,x){function E(Z){T&&a.setObject(T,Z);for(fa=0;fa<ja.length;fa++)d[ja[fa].advice||"after"](Z,ja[fa].method,a.hitch(Z,ja[fa].func),!0);for(fa=0;fa<ua.length;fa++)ua[fa].call(Z);for(fa=0;fa<Ba.length;fa++)Z.watch(Ba[fa].prop,Ba[fa].func);for(fa=0;fa<M.length;fa++)h(Z,M[fa].event,M[fa].func);return Z}var G=
z&&z.prototype;B=B||{};var I={};B.defaults&&a.mixin(I,B.defaults);x&&a.mixin(I,x);if(g("dom-attributes-explicit"))var L=q.attributes;else g("dom-attributes-specified-flag")?L=u.filter(q.attributes,function(Z){return Z.specified}):(x=(/^input$|^img$/i.test(q.nodeName)?q:q.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),L=u.map(x.split(/\s+/),function(Z){var ia=Z.toLowerCase();return{name:Z,value:"LI"==q.nodeName&&"value"==
Z||"enctype"==ia?q.getAttribute(ia):q.getAttributeNode(ia).value}}));var Y=B.scope||y._scopeName;x="data-"+Y+"-";var X={};"dojo"!==Y&&(X[x+"props"]="data-dojo-props",X[x+"type"]="data-dojo-type",X[x+"mixins"]="data-dojo-mixins",X[Y+"type"]="dojotype",X[x+"id"]="data-dojo-id");var fa=0,sa;Y=[];for(var T,ka;sa=L[fa++];){var ma=sa.name,wa=ma.toLowerCase();sa=sa.value;switch(X[wa]||wa){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":ka=sa;break;case "data-dojo-id":case "jsid":T=
sa;break;case "data-dojo-attach-point":case "dojoattachpoint":I.dojoAttachPoint=sa;break;case "data-dojo-attach-event":case "dojoattachevent":I.dojoAttachEvent=sa;break;case "class":I["class"]=q.className;break;case "style":I.style=q.style&&q.style.cssText;break;default:if(ma in G||(ma=w(z)[wa]||ma),ma in G)switch(typeof G[ma]){case "string":I[ma]=sa;break;case "number":I[ma]=sa.length?Number(sa):NaN;break;case "boolean":I[ma]="false"!=sa.toLowerCase();break;case "function":""===sa||-1!=sa.search(/[^\w\.]+/i)?
I[ma]=new Function(sa):I[ma]=a.getObject(sa,!1)||new Function(sa);Y.push(ma);break;default:wa=G[ma],I[ma]=wa&&"length"in wa?sa?sa.split(/\s*,\s*/):[]:wa instanceof Date?""==sa?new Date(""):"now"==sa?new Date:b.fromISOString(sa):wa instanceof l?y.baseUrl+sa:m(sa)}else I[ma]=sa}}for(L=0;L<Y.length;L++)X=Y[L].toLowerCase(),q.removeAttribute(X),q[X]=null;if(ka)try{ka=m.call(B.propsThis,"{"+ka+"}"),a.mixin(I,ka)}catch(Z){throw Error(Z.toString()+" in data-dojo-props\x3d'"+ka+"'");}a.mixin(I,v);D||(D=z&&
(z._noScript||G._noScript)?[]:e("\x3e script[type^\x3d'dojo/']",q));var ja=[],ua=[],Ba=[],M=[];if(D)for(fa=0;fa<D.length;fa++)X=D[fa],q.removeChild(X),v=X.getAttribute(x+"event")||X.getAttribute("event"),B=X.getAttribute(x+"prop"),ka=X.getAttribute(x+"method"),Y=X.getAttribute(x+"advice"),L=X.getAttribute("type"),X=this._functionFromScript(X,x),v?"dojo/connect"==L?ja.push({method:v,func:X}):"dojo/on"==L?M.push({event:v,func:X}):I[v]=X:"dojo/aspect"==L?ja.push({method:ka,advice:Y,func:X}):"dojo/watch"==
L?Ba.push({prop:B,func:X}):ua.push(X);z=(D=z.markupFactory||G.markupFactory)?D(I,q,z):new z(I,q);return z.then?z.then(E):E(z)},scan:function(z,q){function v(wa){if(!wa.inherited){wa.inherited={};var ja=wa.node,ua=v(wa.parent);ja={dir:ja.getAttribute("dir")||ua.dir,lang:ja.getAttribute("lang")||ua.lang,textDir:ja.getAttribute(L)||ua.textDir};for(var Ba in ja)ja[Ba]&&(wa.inherited[Ba]=ja[Ba])}return wa.inherited}var B=[],D=[],x={},E=(q.scope||y._scopeName)+"Type",G="data-"+(q.scope||y._scopeName)+"-",
I=G+"type",L=G+"textdir";G+="mixins";var Y=z.firstChild,X=q.inherited;if(!X){X=function Ba(ja,ua){return ja.getAttribute&&ja.getAttribute(ua)||ja.parentNode&&Ba(ja.parentNode,ua)};X={dir:X(z,"dir"),lang:X(z,"lang"),textDir:X(z,L)};for(var fa in X)X[fa]||delete X[fa]}fa={inherited:X};for(var sa,T;;)if(Y)if(1!=Y.nodeType)Y=Y.nextSibling;else if(sa&&"script"==Y.nodeName.toLowerCase())(X=Y.getAttribute("type"))&&/^dojo\/\w/i.test(X)&&sa.push(Y),Y=Y.nextSibling;else if(T)Y=Y.nextSibling;else if(X=Y.getAttribute(I)||
Y.getAttribute(E),z=Y.firstChild,X||z&&(3!=z.nodeType||z.nextSibling)){T=null;if(X){var ka=Y.getAttribute(G);sa=ka?[X].concat(ka.split(/\s*,\s*/)):[X];try{T=p(sa,q.contextRequire)}catch(wa){}T||u.forEach(sa,function(wa){~wa.indexOf("/")&&!x[wa]&&(x[wa]=!0,D[D.length]=wa)});ka=T&&!T.prototype._noScript?[]:null;fa={types:sa,ctor:T,parent:fa,node:Y,scripts:ka};fa.inherited=v(fa);B.push(fa)}else fa={node:Y,scripts:sa,parent:fa};sa=ka;T=Y.stopParser||T&&T.prototype.stopParser&&!q.template;Y=z}else Y=Y.nextSibling;
else{if(!fa||!fa.node)break;Y=fa.node.nextSibling;T=!1;fa=fa.parent;sa=fa.scripts}var ma=new c;D.length?(g("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+D.join(", ")),(q.contextRequire||F)(D,function(){ma.resolve(u.filter(B,function(wa){if(!wa.ctor)try{wa.ctor=p(wa.types,q.contextRequire)}catch(Ba){}for(var ja=wa.parent;ja&&!ja.types;)ja=ja.parent;var ua=wa.ctor&&wa.ctor.prototype;wa.instantiateChildren=!(ua&&ua.stopParser&&!q.template);wa.instantiate=!ja||ja.instantiate&&
ja.instantiateChildren;return wa.instantiate}))})):ma.resolve(B);return ma.promise},_require:function(z,q){z=m("{"+z.innerHTML+"}");var v=[],B=[],D=new c;q=q&&q.contextRequire||F;for(var x in z)v.push(x),B.push(z[x]);q(B,function(){for(var E=0;E<v.length;E++)a.setObject(v[E],arguments[E]);D.resolve(arguments)});return D.promise},_scanAmd:function(z,q){var v=new c,B=v.promise;v.resolve(!0);var D=this;e("script[type\x3d'dojo/require']",z).forEach(function(x){B=B.then(function(){return D._require(x,
q)});x.parentNode.removeChild(x)});return B},parse:function(z,q){!z||"string"==typeof z||"nodeType"in z||(q=z,z=q.rootNode);var v=z?t.byId(z):r.body();q=q||{};var B=q.template?{template:!0}:{},D=[],x=this;z=this._scanAmd(v,q).then(function(){return x.scan(v,q)}).then(function(E){return x._instantiate(E,B,q,!0)}).then(function(E){return D=D.concat(E)}).otherwise(function(E){console.error("dojo/parser::parse() error",E);throw E;});a.mixin(D,z);return D}};y.parser=C;n.parseOnLoad&&k(100,C,"parse");return C})},
"dojo/_base/url":function(){define(["./kernel"],function(F){var y=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,a=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,u=function(){for(var n=arguments,t=[n[0]],r=1;r<n.length;r++)if(n[r]){var l=new u(n[r]+"");t=new u(t[0]+"");if(""==l.path&&!l.scheme&&!l.authority&&!l.query)null!=l.fragment&&(t.fragment=l.fragment),l=t;else if(!l.scheme&&(l.scheme=t.scheme,!l.authority&&(l.authority=t.authority,"/"!=l.path.charAt(0)))){t=
(t.path.substring(0,t.path.lastIndexOf("/")+1)+l.path).split("/");for(var d=0;d<t.length;d++)"."==t[d]?d==t.length-1?t[d]="":(t.splice(d,1),d--):0<d&&(1!=d||""!=t[0])&&".."==t[d]&&".."!=t[d-1]&&(d==t.length-1?(t.splice(d,1),t[d-1]=""):(t.splice(d-1,2),d-=2));l.path=t.join("/")}t=[];l.scheme&&t.push(l.scheme,":");l.authority&&t.push("//",l.authority);t.push(l.path);l.query&&t.push("?",l.query);l.fragment&&t.push("#",l.fragment)}this.uri=t.join("");n=this.uri.match(y);this.scheme=n[2]||(n[1]?"":null);
this.authority=n[4]||(n[3]?"":null);this.path=n[5];this.query=n[7]||(n[6]?"":null);this.fragment=n[9]||(n[8]?"":null);null!=this.authority&&(n=this.authority.match(a),this.user=n[3]||null,this.password=n[4]||null,this.host=n[6]||n[7],this.port=n[9]||null)};u.prototype.toString=function(){return this.uri};return F._Url=u})},"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(F,y,a,u){var n=F.some;return function(t){var r,l;y.isArray(t)?l=t:t&&"object"===
typeof t&&(r=t);var d=[];if(r){l=[];for(var f in r)Object.hasOwnProperty.call(r,f)&&(d.push(f),l.push(r[f]));var b={}}else l&&(b=[]);if(!l||!l.length)return(new a).resolve(b);var c=new a;c.promise.always(function(){b=d=null});var g=l.length;n(l,function(e,h){r||d.push(h);u(e,function(k){c.isFulfilled()||(b[d[h]]=k,0===--g&&c.resolve(b))},c.reject);return c.isFulfilled()});return c.promise}})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(F,y){var a={};F.setObject("dojo.date.stamp",
a);a.fromISOString=function(u,n){a._isoRegExp||(a._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var t=a._isoRegExp.exec(u);u=null;if(t){t.shift();t[1]&&t[1]--;t[6]&&(t[6]*=1E3);n&&(n=new Date(n),y.forEach(y.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(d){return n["get"+d]()}),function(d,f){t[f]=t[f]||d}));u=new Date(t[0]||1970,t[1]||0,t[2]||1,t[3]||0,t[4]||0,t[5]||0,t[6]||0);100>t[0]&&
u.setFullYear(t[0]||1970);var r=0,l=t[7]&&t[7].charAt(0);"Z"!=l&&(r=60*(t[8]||0)+(Number(t[9])||0),"-"!=l&&(r*=-1));l&&(r-=u.getTimezoneOffset());r&&u.setTime(u.getTime()+6E4*r)}return u};a.toISOString=function(u,n){var t=function(f){return 10>f?"0"+f:f};n=n||{};var r=[],l=n.zulu?"getUTC":"get",d="";"time"!=n.selector&&(d=u[l+"FullYear"](),d=["0000".substr((d+"").length)+d,t(u[l+"Month"]()+1),t(u[l+"Date"]())].join("-"));r.push(d);"date"!=n.selector&&(d=[t(u[l+"Hours"]()),t(u[l+"Minutes"]()),t(u[l+
"Seconds"]())].join(":"),l=u[l+"Milliseconds"](),n.milliseconds&&(d+="."+(100>l?"0":"")+t(l)),n.zulu?d+="Z":"time"!=n.selector&&(u=u.getTimezoneOffset(),n=Math.abs(u),d+=(0<u?"-":"+")+t(Math.floor(n/60))+":"+t(n%60)),r.push(d));return r.join("T")};return a})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(F,y){return F("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();
this.execute(this.get("value"))},_getFocusItems:function(){var a=y._getTabNavigable(this.domNode);this._firstFocusItem=a.lowest||a.first||this.closeButtonNode||this.domNode;this._lastFocusItem=a.last||a.highest||this._firstFocusItem}})})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),function(F,y,a,u,n,t){return y("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(r){var l=[];
F.forEach(r||this.getChildren(),function(d){"value"in d?l.push(d):l=l.concat(this._getDescendantFormWidgets(d.getChildren()))},this);return l},reset:function(){F.forEach(this._getDescendantFormWidgets(),function(r){r.reset&&r.reset()})},validate:function(){var r=!1;return F.every(F.map(this._getDescendantFormWidgets(),function(l){l._hasBeenBlurred=!0;var d=l.disabled||!l.validate||l.validate();d||r||(t.scrollIntoView(l.containerNode||l.domNode),l.focus(),r=!0);return d}),function(l){return l})},setValues:function(r){a.deprecated(this.declaredClass+
"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",r)},_setValueAttr:function(r){var l={};F.forEach(this._getDescendantFormWidgets(),function(c){c.name&&(l[c.name]||(l[c.name]=[])).push(c)});for(var d in l)if(l.hasOwnProperty(d)){var f=l[d],b=u.getObject(d,!1,r);void 0!==b&&(b=[].concat(b),"boolean"==typeof f[0].checked?F.forEach(f,function(c){c.set("value",-1!=F.indexOf(b,c._get("value")))}):f[0].multiple?f[0].set("value",b):F.forEach(f,function(c,g){c.set("value",
b[g])}))}},getValues:function(){a.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var r={};F.forEach(this._getDescendantFormWidgets(),function(l){var d=l.name;if(d&&!l.disabled){var f=l.get("value");"boolean"==typeof l.checked?/Radio/.test(l.declaredClass)?!1!==f?u.setObject(d,f,r):(f=u.getObject(d,!1,r),void 0===f&&u.setObject(d,null,r)):(l=u.getObject(d,!1,r),l||(l=[],u.setObject(d,l,r)),!1!==f&&
l.push(f)):(l=u.getObject(d,!1,r),"undefined"!=typeof l?u.isArray(l)?l.push(f):u.setObject(d,[l,f],r):u.setObject(d,f,r))}});return r},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var r=F.map(this._descendants,function(l){return l.get("state")||""});return 0<=F.indexOf(r,"Error")?"Error":0<=F.indexOf(r,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(r){this._descendants=this._getDescendantFormWidgets();F.forEach(this._descendants,
function(l){l._started||l.startup()});r||this._onChildChange()},_onChildChange:function(r){r&&"state"!=r&&"disabled"!=r||this._set("state",this._getState());r&&"value"!=r&&"disabled"!=r&&"checked"!=r||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");
this.state=this._getState();var r=this;this.own(n(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(l){l.target!=r.domNode&&r._onChildChange(l.type.replace("attrmodified-",""))}));this.watch("state",function(l,d,f){this.onValidStateChange(""==f)})},destroy:function(){this.inherited(arguments)}})})},"esri/main":function(){define(["./kernel","dojo/i18n!./nls/jsapi","./config","./sniff"],function(F,y){F.bundle=y;return F})},"esri/kernel":function(){define(["dojo/_base/kernel",
"dojo/_base/config","dojo/has"],function(F,y,a){var u=function(){return this}(),n=u.location,t=n.pathname,r=n.protocol;n={version:"3.41",_appBaseUrl:r+"//"+n.host+t.substring(0,t.lastIndexOf(t.split("/")[t.split("/").length-1]))};y.noGlobals||(u.esri=n);F.isAsync||a.add("extend-esri",1);(n.dijit=n.dijit||{})._arcgisUrl=("http:"===r||"https:"===r?r:"http:")+"//www.arcgis.com/sharing/rest";return n})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","./kernel"],function(F,
y,a,u){var n=function(){return this}(),t={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,
zoomAnimationThrottled:!1,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:n.Worker&&!1,io:{errorHandler:function(r,l){y.publish("esri.Error",[r])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:[/^https?:\/\/.+\.arcgis\.com(\/|$)/i,"server.arcgisonline.com","services.arcgisonline.com","www.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","tiles.arcgis.com","tiles1.arcgis.com","tiles2.arcgis.com","tiles3.arcgis.com","tiles4.arcgis.com",
"basemaps.arcgis.com","basemapsbeta.arcgis.com","basemaps-api.arcgis.com","elevation3d.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","services4.arcgis.com","services5.arcgis.com","services6.arcgis.com","services7.arcgis.com","services8.arcgis.com","services9.arcgis.com","cdn.arcgis.com","cdn-a.arcgis.com","cdn-b.arcgis.com","static.arcgis.com","utility.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","geoenrich.arcgis.com","qaext.arcgis.com",
"staticqa.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","geoenrichqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","localvtiles.arcgis.com","staticdev.arcgis.com","tilesdevext.arcgis.com","elevation3ddev.arcgis.com","servicesdev.arcgis.com","servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com","geoenrichdev.arcgis.com","basemapsdev.arcgis.com",
"basemapsdev-api.arcgis.com","basemapsbetadev.arcgis.com"],corsDetection:n.cordova?!1:!0,corsDetectionTimeout:15,corsStatus:{},crossOriginNoCorsDomains:null,webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},workers:{loaderConfig:{has:{},paths:{},map:{},
packages:[]}}}};a("extend-esri")&&(u.config=t);F.noGlobals||(n.esriConfig=t);return t})},"esri/sniff":function(){define(["dojo/_base/sniff","dojo/global","./kernel"],function(F,y,a){var u=F("ff"),n=F("ie"),t=void 0===n&&7<=F("trident"),r=F("edge"),l=F("webkit"),d=F("opera"),f=F("chrome"),b=F("safari"),c=navigator.userAgent,g;(g=c.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+_\d+)/i))&&F.add("esri-iphone",parseFloat(g[2].replace("_",".")));(g=c.match(/Android\s+(\d+(\.\d+)*)/i))&&F.add("esri-android",parseFloat(g[1]));
(g=c.match(/Fennec\/(\d+\.\d+)/i))&&F.add("esri-fennec",parseFloat(g[1]));0<=c.indexOf("BlackBerry")&&0<=c.indexOf("WebKit")&&F.add("esri-blackberry",1);F.add("esri-touch",F("esri-iphone")||F("esri-android")||F("esri-blackberry")||6<=F("esri-fennec")||(u||l)&&(document.createTouch||"ontouchstart"in y||y.TouchEvent&&0<navigator.maxTouchPoints)?!0:!1);(g=c.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&F.add("esri-mobile",!!g);F.add("esri-pointer",!u&&(navigator.pointerEnabled||
navigator.msPointerEnabled||!!y.PointerEvent));a._getDOMAccessor=function(h){var k="";u?k="Moz":l?k="Webkit":n?k="ms":d&&(k="O");return k+h.charAt(0).toUpperCase()+h.substr(1)};F.add("esri-phonegap",!!y.cordova);F.add("esri-cors",F("esri-phonegap")||y.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);F.add("esri-file-upload",y.FormData&&y.FileList?!0:!1);F.add("esri-script-sandbox",function(){return"MessageChannel"in y&&"HTMLIFrameElement"in y&&"sandbox"in HTMLIFrameElement.prototype});F.add("esri-secure-context",
function(){if("isSecureContext"in y)return y.isSecureContext;if(y.location&&y.location.origin)return 0===y.location.origin.indexOf("https:")});F.add("esri-wasm","WebAssembly"in y);F.add("esri-workers",y.Worker?!0:!1);F.add("esri-featurelayer-webgl",!1);if(c=F("esri-featurelayer-webgl")){var e=F("esri-mobile");g=e?1:2;e=e?1:3;"object"===typeof c?(c.maxDrillLevel=null==c.maxDrillLevel?g:c.maxDrillLevel,c.maxRecordCountFactor=null==c.maxRecordCountFactor?e:c.maxRecordCountFactor,c.enablePBFQuery=null==
c.enablePBFQuery?!0:c.enablePBFQuery):F.add("esri-featurelayer-webgl",{maxDrillLevel:g,maxRecordCountFactor:e,enablePBFQuery:!0},null,!0)}F.add("esri-featurelayer-webgl-labeling",!1);F.add("esri-pbf",!n||10<=n);F.add("esri-featurelayer-pbf",!0);F.add("esri-transforms",t||r||9<=n||3.5<=u||4<=f||3.1<=b||10.5<=d||3.2<=F("esri-iphone")||2.1<=F("esri-android"));F.add("esri-transitions",t||r||10<=n||4<=u||4<=f||3.1<=b||10.5<=d||3.2<=F("esri-iphone")||2.1<=F("esri-android"));F.add("esri-transforms3d",t||
r||10<=u||12<=f||4<=b||3.2<=F("esri-iphone")||3<=F("esri-android"));F.add("esri-url-encodes-apostrophe",function(){if(!y.document)return!1;var h=y.document.createElement("a");h.href="?'";return-1<h.href.indexOf("?%27")});3>F("esri-android")&&(F.add("esri-transforms",!1,!1,!0),F.add("esri-transitions",!1,!1,!0),F.add("esri-transforms3d",!1,!1,!0));F.add("esri-will-change",F("esri-transforms")&&(52<=f||11.1<=b));a._css=function(h){var k=F("esri-transforms3d");void 0!==h&&null!==h?k=h:k&&(f||b&&!F("esri-iphone"))&&
(k=!1);var m=k?"translate3d(":"translate(",w=k?f?",-1px)":",0px)":")",p=k?"scale3d(":"scale(",A=k?",1)":")",C=k?"rotate3d(0,0,1,":"rotate(",z=k?"matrix3d(":"matrix(",q=k?",0,0,":",",v=k?",0,0,0,0,1,0,":",",B=k?",0,1)":")";return{names:{transition:l&&"-webkit-transition"||u&&"MozTransition"||d&&"OTransition"||n&&"msTransition"||"transition",transform:l&&"-webkit-transform"||u&&"MozTransform"||d&&"OTransform"||n&&"msTransform"||"transform",transformName:l&&"-webkit-transform"||u&&"-moz-transform"||
d&&"-o-transform"||n&&"-ms-transform"||"transform",origin:l&&"-webkit-transform-origin"||u&&"MozTransformOrigin"||d&&"OTransformOrigin"||n&&"msTransformOrigin"||"transformOrigin",endEvent:l&&"webkitTransitionEnd"||u&&"transitionend"||d&&"oTransitionEnd"||n&&"MSTransitionEnd"||"transitionend"},translate:function(D,x){return m+D+"px,"+x+"px"+w},scale:function(D){return p+D+","+D+A},rotate:function(D){return C+D+"deg)"},matrix:function(D){return z+D.xx+","+D.xy+q+D.yx+","+D.yy+v+D.dx.toFixed(10)+(u&&
59>=u?"px,":",")+D.dy.toFixed(10)+(u&&59>=u?"px":"")+B},getScaleFromMatrix:function(D){if(!D)return 1;D=D.toLowerCase();var x=-1<D.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(D.substring(x.length,D.indexOf(",")))}}};F("extend-esri")&&(a.isiPhone=F("esri-iphone"),a.isAndroid=F("esri-android"),a.isFennec=F("esri-fennec"),a.isBlackBerry=F("esri-blackberry"),a.isTouchEnabled=F("esri-touch"),a.isPointerEnabled=F("esri-pointer"),a._hasCors=F("esri-cors"),a._hasFileUpload=F("esri-file-upload"),
a._hasTransforms=F("esri-transforms"),a._hasTransitions=F("esri-transitions"),a._has3DTransforms=F("esri-transforms3d"));return F})},"esri/map":function(){define("require dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/event dojo/on dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/a11yclick dijit/registry ./kernel ./config ./sniff ./lang ./_coremap ./MapNavigationManager dojo/i18n!./nls/jsapi".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m,w,p,A,C,z,q,v){var B={up:"panUp",right:"panRight",down:"panDown",left:"panLeft"},D={upperRight:"panUpperRight",lowerRight:"panLowerRight",lowerLeft:"panLowerLeft",upperLeft:"panUpperLeft"},x=u.connect,E=u.disconnect,G=g.create,I=h.set,L=n.hitch,Y=e.getMarginBox,X=y.deprecated,fa=n.mixin,sa=0;y=a(z,{declaredClass:"esri.Map",constructor:function(T,ka){ka=ka||{};fa(this,{_slider:null,_navDiv:null,_mapParams:fa({attributionWidth:.45,slider:!0,nav:!1,logo:!0,
sliderStyle:"small",sliderPosition:"top-left",sliderOrientation:"vertical",autoResize:!0},ka)});fa(this,{isMapNavigation:null!=ka.isMapNavigation?ka.isMapNavigation:!0,isDoubleClickZoom:null!=ka.isDoubleClickZoom?ka.isDoubleClickZoom:!0,isClickRecenter:null!=ka.isClickRecenter?ka.isClickRecenter:!0,isPan:null!=ka.isPan?ka.isPan:!0,isRubberBandZoom:null!=ka.isRubberBandZoom?ka.isRubberBandZoom:!0,isPinchZoom:null!=ka.isPinchZoom?ka.isPinchZoom:!0,isKeyboardNavigation:null!=ka.isKeyboardNavigation?
ka.isKeyboardNavigation:!0,isScrollWheel:null!=ka.isScrollWheel?ka.isScrollWheel:!0,isShiftDoubleClickZoom:!1,isScrollWheelZoom:!1,isPanArrows:!1,isZoomSlider:!1});n.isFunction(w._css)&&(w._css=w._css(this._mapParams.force3DTransforms),this.force3DTransforms=this._mapParams.force3DTransforms);T=A("esri-transforms")&&A("esri-transitions");this.navigationMode=this._mapParams.navigationMode||T&&"css-transforms"||"classic";"css-transforms"!==this.navigationMode||T||(this.navigationMode="classic");this.fadeOnZoom=
C.isDefined(this._mapParams.fadeOnZoom)?this._mapParams.fadeOnZoom:"css-transforms"===this.navigationMode;"css-transforms"!==this.navigationMode&&(this.fadeOnZoom=!1);this.setMapCursor("default");this.smartNavigation=ka&&ka.smartNavigation;if(!(C.isDefined(this.smartNavigation)||!A("mac")||A("esri-touch")||A("esri-pointer")||3.5>=A("ff"))){var ma=navigator.userAgent.match(/Mac\s+OS\s+X\s+([\d]+)(\.|_)([\d]+)\D/i);ma&&C.isDefined(ma[1])&&C.isDefined(ma[3])&&(T=parseInt(ma[1],10),ma=parseInt(ma[3],
10),this.smartNavigation=10<T||10===T&&6<=ma)}this.showAttribution=C.isDefined(this._mapParams.showAttribution)?this._mapParams.showAttribution:!0;this._onLoadHandler_connect=x(this,"onLoad",this,"_onLoadInitNavsHandler");var wa=G("div",{class:"esriControlsBR"+(this._mapParams.nav?" withPanArrows":"")},this.root);if(this.showAttribution)if(T=n.getObject("esri.dijit.Attribution",!1))this._initAttribution(T,wa);else{var ja=sa++,ua=this;this._rids&&this._rids.push(ja);F(["./dijit/Attribution"],function(Ba){var M=
ua._rids?t.indexOf(ua._rids,ja):-1;-1!==M&&(ua._rids.splice(M,1),ua._initAttribution(Ba,wa))})}this._mapParams.logo&&(T={},6===A("ie")&&(T.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+F.toUrl("./images/map/logo-med.png")+"')"),this._ogol=G("div",{style:T,tabIndex:"0",title:"Esri"},wa),this._setLogoSize(),this._onMapResizeLogo_connect=x(this,"onResize",this,"_setLogoSize"),this._ogol_connect=x(this._ogol,k,this,"_openLogoLink"));this.navigationManager=
new q(this);ka&&ka.basemap&&(this._onLoadFix=!0,this.setBasemap(ka.basemap),this._onLoadFix=!1);if(this.autoResize=this._mapParams.autoResize)ka=this._getEnclosingResizableWidget(this.container)||window,T=this.resize,this._rszSignal=l.pausable(ka,"resize",T),this._oriSignal=l.pausable(window,"orientationchange",T),d.after(ka,"resize",T,!0),this._startResizeTimer()},_startResizeTimer:function(){clearTimeout(this._persistentTimer);this._persistentTimer=setTimeout(this._timedResize,2*this.resizeDelay)},
_getEnclosingResizableWidget:function(T){var ka=m.getEnclosingWidget(T);return ka?ka.resize?ka:this._getEnclosingResizableWidget(T.parentNode):ka},_setLogoSize:function(){this._ogol&&(25E4>this.root.clientWidth*this.root.clientHeight?(c.remove(this._ogol,"logo-med"),c.add(this._ogol,"logo-sm")):(c.remove(this._ogol,"logo-sm"),c.add(this._ogol,"logo-med")))},_initAttribution:function(T,ka){ka=G("span",{class:"esriAttribution"},ka,"first");I(ka,"maxWidth",Math.floor(this.width*this._mapParams.attributionWidth)+
"px");this._connects.push(x(ka,k,function(){c.contains(this,"esriAttributionOpen")?c.remove(this,"esriAttributionOpen"):this.scrollWidth>this.clientWidth&&c.add(this,"esriAttributionOpen")}));this.attribution=new T({map:this},ka)},_cleanUp:function(){this.disableMapNavigation();this.navigationManager.destroy();var T=this._slider;T&&T.destroy&&!T._destroyed&&T.destroy();T=this._navDiv;var ka=this.attribution;T&&g.destroy(T);ka&&ka.destroy();this._connects.push(this._slider_connect,this._ogol_connect,
this._rszSignal,this._oriSignal);t.forEach(this._connects,E);clearInterval(this._persistentTimer);this.attribution=this.navigationManager=this._rids=this._connects=this._slider_connect=this._ogol_connect=this._rszSignal=this._oriSignal=this._persistentTimer=null;this.inherited("_cleanUp",arguments)},_isPanningOrZooming:function(){return this.__panning||this.__zooming},_canZoom:function(T){var ka=this.getLevel();return!this.__tileInfo||!(ka===this.getMinZoom()&&0>T||ka===this.getMaxZoom()&&0<T)},_onLoadInitNavsHandler:function(){this._evalMapNavigation();
this._createNav();if("small"===this._mapParams.sliderStyle||!this._createSlider)this._createSimpleSlider();else if(this._mapParams.slider){var T=-1!==this._getSliderClass(!0).indexOf("Horizontal");T=[T?"dijit.form.HorizontalSlider":"dijit.form.VerticalSlider",T?"dijit.form.HorizontalRule":"dijit.form.VerticalRule",T?"dijit.form.HorizontalRuleLabels":"dijit.form.VerticalRuleLabels"];if(t.some(T,function(wa){return!n.getObject(wa,!1)})){T=t.map(T,function(wa){return wa.replace(/\./g,"/")});var ka=sa++,
ma=this;this._rids&&this._rids.push(ka);F(T,function(){var wa=ma._rids?t.indexOf(ma._rids,ka):-1;-1!==wa&&(ma._rids.splice(wa,1),ma._createSlider.apply(ma,arguments))})}else T=t.map(T,function(wa){return n.getObject(wa,!1)}),this._createSlider.apply(this,T)}E(this._onLoadHandler_connect)},_createNav:function(){if(this._mapParams.nav){var T,ka=c.add,ma=this.id;this._navDiv=G("div",{id:ma+"_navdiv"},this.root);ka(this._navDiv,"navDiv");var wa=this.width/2,ja=this.height/2;for(T in B){var ua=B[T];var Ba=
G("div",{id:ma+"_pan_"+T},this._navDiv);ka(Ba,"fixedPan "+ua);if("up"===T||"down"===T){var M=parseInt(Y(Ba).w,10)/2;I(Ba,{left:wa-M+"px",zIndex:30})}else M=parseInt(Y(Ba).h,10)/2,I(Ba,{top:ja-M+"px",zIndex:30});this._connects.push(x(Ba,"onclick",L(this,this[ua])))}this._onMapResizeNavHandler_connect=x(this,"onResize",this,"_onMapResizeNavHandler");for(T in D)ua=D[T],Ba=G("div",{id:ma+"_pan_"+T,style:{zIndex:30}},this._navDiv),ka(Ba,"fixedPan "+ua),this._connects.push(x(Ba,"onclick",L(this,this[ua])));
this.isPanArrows=!0}},_onMapResizeNavHandler:function(T,ka,ma){T=this.id;ka/=2;ma/=2;var wa=f.byId,ja;for(ja in B){var ua=wa(T+"_pan_"+ja);if("up"===ja||"down"===ja){var Ba=parseInt(Y(ua).w,10)/2;I(ua,"left",ka-Ba+"px")}else Ba=parseInt(Y(ua).h,10)/2,I(ua,"top",ma-Ba+"px")}},_createSimpleSlider:function(){if(this._mapParams.slider){var T=this._slider=G("div",{id:this.id+"_zoom_slider",class:this._getSliderClass(),style:{zIndex:30}}),ka=G("div",{class:"esriSimpleSliderIncrementButton",tabIndex:"0",
role:"button"},T),ma=G("div",{class:"esriSimpleSliderDecrementButton",tabIndex:"0",role:"button"},T);this._addZoomButtonTooltips(ka,ma);this._incButton=ka;this._decButton=ma;this._simpleSliderZoomHandler(null,null,null,this.getLevel());var wa=v.widgets.zoomSlider;this._addZoomButtonIcon(ka,"+",wa.zoomIn);this._addZoomButtonIcon(ma,"\x26minus;",wa.zoomOut);8>A("ie")&&c.add(ma,"dj_ie67Fix");this._connects.push(x(ka,k,this,this._simpleSliderChangeHandler));this._connects.push(x(ma,k,this,this._simpleSliderChangeHandler));
(-1<this.getMaxZoom()||-1<this.getMinZoom())&&this._connects.push(x(this,"onZoomEnd",this,this._simpleSliderZoomHandler));10>A("ie")&&f.setSelectable(T,!1);this.root.appendChild(T);this.isZoomSlider=!0}},_simpleSliderChangeHandler:function(T){r.stop(T);T=-1!==T.currentTarget.className.indexOf("IncrementButton")?!0:!1;this._extentUtil({numLevels:T?1:-1})},_simpleSliderZoomHandler:function(T,ka,ma,wa){var ja;T=this._incButton;ka=this._decButton;-1<wa&&wa===this.getMaxZoom()?ja=T:-1<wa&&wa===this.getMinZoom()&&
(ja=ka);ja?(c.add(ja,"esriSimpleSliderDisabledButton"),c.remove(ja===T?ka:T,"esriSimpleSliderDisabledButton")):(c.remove(T,"esriSimpleSliderDisabledButton"),c.remove(ka,"esriSimpleSliderDisabledButton"))},_getSliderClass:function(T){T=T?"Large":"Simple";var ka=this._mapParams.sliderOrientation,ma=this._mapParams.sliderPosition||"";ka=ka&&"horizontal"===ka.toLowerCase()?"esri"+T+"SliderHorizontal":"esri"+T+"SliderVertical";if(ma)switch(ma.toLowerCase()){case "top-left":ma="esri"+T+"SliderTL";break;
case "top-right":ma="esri"+T+"SliderTR";break;case "bottom-left":ma="esri"+T+"SliderBL";break;case "bottom-right":ma="esri"+T+"SliderBR"}return"esri"+T+"Slider "+ka+" "+ma},_addZoomButtonIcon:function(T,ka,ma){g.create("span",{"aria-hidden":"true",role:"presentation",innerHTML:ka},T);g.create("span",{class:"esriIconFallbackText",innerHTML:ma},T)},_addZoomButtonTooltips:function(T,ka){var ma=v.widgets.zoomSlider;b.set(T,"title",ma.zoomIn);b.set(ka,"title",ma.zoomOut)},_createSlider:function(T,ka,ma){if(this._mapParams.slider){var wa=
G("div",{id:this.id+"_zoom_slider"},this.root),ja=p.defaults.map,ua=this._getSliderClass(!0),Ba=-1!==ua.indexOf("Horizontal"),M=this.getNumLevels();if(0<M){var Z,ia,qa=this._mapParams.sliderLabels,ya=!!qa,Ca=!1!==qa;if(Ca){var Ia=Ba?"bottomDecoration":"rightDecoration";if(!qa)for(qa=[],ja=0;ja<M;ja++)qa[ja]="";t.forEach([{class:"esriLargeSliderTicks",container:Ia,count:M,dijitClass:ka},{class:ya&&"esriLargeSliderLabels",container:Ia,count:M,labels:qa,dijitClass:ma}],function(la){var N=G("div"),aa=
la.dijitClass;delete la.dijitClass;wa.appendChild(N);aa===ka?Z=new aa(la,N):ia=new aa(la,N)})}T=this._slider=new T({id:wa.id,class:ua,minimum:this.getMinZoom(),maximum:this.getMaxZoom(),discreteValues:M,value:this.getLevel(),clickSelect:!0,intermediateChanges:!0,style:"z-index:30;"},wa);T.startup();Ca&&(Z.startup(),ia.startup());this._slider_connect=x(T,"onChange",this,"_onSliderChangeHandler");this._connects.push(x(this,"onExtentChange",this,"_onExtentChangeSliderHandler"));this._connects.push(x(T._movable,
"onFirstMove",this,"_onSliderMoveStartHandler"))}else{T=this._slider=new T({id:wa.id,class:ua,minimum:0,maximum:2,discreteValues:3,value:1,clickSelect:!0,intermediateChanges:ja.sliderChangeImmediate,style:"height:50px; z-index:30;"},wa);ma=T.domNode.firstChild.childNodes;for(ja=1;3>=ja;ja++)I(ma[ja],"visibility","hidden");T.startup();this._slider_connect=x(T,"onChange",this,"_onDynSliderChangeHandler");this._connects.push(x(this,"onExtentChange",this,"_onExtentChangeDynSliderHandler"))}ja=T.incrementButton;
ma=T.decrementButton;Ba?this._addZoomButtonTooltips(ja,ma):this._addZoomButtonTooltips(ma,ja);ja.style.outline="none";ma.style.outline="none";T.sliderHandle.style.outline="none";T._onKeyPress=function(){};if(Ba=T._movable){var Oa=Ba.onMouseDown;Ba.onMouseDown=function(la){9>A("ie")&&1!==la.button||Oa.apply(this,arguments)}}this.isZoomSlider=!0}},_onSliderMoveStartHandler:function(){E(this._slider_connect);E(this._slidermovestop_connect);this._slider_connect=x(this._slider,"onChange",this,"_onSliderChangeDragHandler");
this._slidermovestop_connect=x(this._slider._movable,"onMoveStop",this,"_onSliderMoveEndHandler")},_onSliderChangeDragHandler:function(T){this._extentUtil({targetLevel:T})},_onSliderMoveEndHandler:function(){E(this._slider_connect);E(this._slidermovestop_connect)},_onSliderChangeHandler:function(T){this.setLevel(T)},_updateSliderValue:function(T,ka){E(this._slider_connect);var ma=this._slider,wa=ma._onChangeActive;ma._onChangeActive=!1;ma.set("value",T);ma._onChangeActive=wa;this._slider_connect=
x(ma,"onChange",this,ka)},_onExtentChangeSliderHandler:function(T,ka,ma,wa){E(this._slidermovestop_connect);this._updateSliderValue(wa.level,"_onSliderChangeHandler")},_onDynSliderChangeHandler:function(T){this._extentUtil({numLevels:0<T?1:-1})},_onExtentChangeDynSliderHandler:function(){this._updateSliderValue(1,"_onDynSliderChangeHandler")},_openLogoLink:function(T){window.open(p.defaults.map.logoLink,"_blank");r.stop(T)},enableMapNavigation:function(){this.isMapNavigation||(this.isMapNavigation=
!0,this._evalMapNavigation())},disableMapNavigation:function(){this.isMapNavigation&&(this.isMapNavigation=!1,this._evalMapNavigation())},_evalMapNavigation:function(){this.isMapNavigation?this.navigationManager.enableNavigation():this.navigationManager.disableNavigation()},_evalNavigationFeature:function(T){if(this.isMapNavigation&&this["is"+T])this.navigationManager["enable"+T]();else this.navigationManager["disable"+T]()},enableDoubleClickZoom:function(){this.isDoubleClickZoom||(this.isDoubleClickZoom=
!0,this._evalNavigationFeature("DoubleClickZoom"))},disableDoubleClickZoom:function(){this.isDoubleClickZoom&&(this.isDoubleClickZoom=!1,this._evalNavigationFeature("DoubleClickZoom"))},enableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom||(X(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",null,"v2.0"),this.navigationManager.enableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!0)},disableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom&&
(X(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",null,"v2.0"),this.navigationManager.disableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!1)},enableClickRecenter:function(){this.isClickRecenter||(this.isClickRecenter=!0,this._evalNavigationFeature("ClickRecenter"))},disableClickRecenter:function(){this.isClickRecenter&&(this.isClickRecenter=!1,this._evalNavigationFeature("ClickRecenter"))},enablePan:function(){this.isPan||
(this.isPan=!0,this._evalNavigationFeature("Pan"))},disablePan:function(){this.isPan&&(this.isPan=!1,this._evalNavigationFeature("Pan"))},enableRubberBandZoom:function(){this.isRubberBandZoom||(this.isRubberBandZoom=!0,this._evalNavigationFeature("RubberBandZoom"))},disableRubberBandZoom:function(){this.isRubberBandZoom&&(this.isRubberBandZoom=!1,this._evalNavigationFeature("RubberBandZoom"))},enablePinchZoom:function(){this.isPinchZoom||(this.isPinchZoom=!0,this._evalNavigationFeature("PinchZoom"))},
disablePinchZoom:function(){this.isPinchZoom&&(this.isPinchZoom=!1,this._evalNavigationFeature("PinchZoom"))},enableKeyboardNavigation:function(){this.isKeyboardNavigation||(this.isKeyboardNavigation=!0,this._evalNavigationFeature("KeyboardNavigation"))},disableKeyboardNavigation:function(){this.isKeyboardNavigation&&(this.isKeyboardNavigation=!1,this._evalNavigationFeature("KeyboardNavigation"))},enableScrollWheel:function(){this.isScrollWheel||(this.isScrollWheel=!0,this._evalNavigationFeature("ScrollWheel"))},
disableScrollWheel:function(){this.isScrollWheel&&(this.isScrollWheel=!1,this._evalNavigationFeature("ScrollWheel"))},enableScrollWheelZoom:function(){this.isScrollWheelZoom||(this.navigationManager.enableScrollWheelZoom(),this.isScrollWheelZoom=!0)},disableScrollWheelZoom:function(){this.isScrollWheelZoom&&(this.navigationManager.disableScrollWheelZoom(),this.isScrollWheelZoom=!1)},enableScrollWheelPan:function(){this.isScrollWheelPan||this.navigationManager.enableScrollWheelPan()},disableScrollWheelPan:function(){this.isScrollWheelPan&&
this.navigationManager.disableScrollWheelPan()},showPanArrows:function(){this._navDiv&&(this._navDiv.style.display="block",this.isPanArrows=!0)},hidePanArrows:function(){this._navDiv&&(this._navDiv.style.display="none",this.isPanArrows=!1)},showZoomSlider:function(){this._slider&&(I(this._slider.domNode||this._slider,"visibility","inherit"),this.isZoomSlider=!0)},hideZoomSlider:function(){this._slider&&(I(this._slider.domNode||this._slider,"visibility","hidden"),this.isZoomSlider=!1)},onClick:function(T){T.graphic||
(T.graphic=this.syncHitTestForWebGL(T))}});A("extend-esri")&&(w.Map=y);return y})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(F,y,a,u,n,t,r,l,d){function f(p,A,C,z){(A=A&&A[p])?A={formatType:A.formatType,options:A}:z&&-1!==F.indexOf(z.properties||"",p)?A={formatType:z.formatter||"DateString",options:null}:C&&-1!==F.indexOf(C.properties||"",p)&&(A={formatType:C.formatter||
"NumberFormat",options:null});return A}function b(p,A,C){return[u.isString(p)?p.split(""):p,A||a.global,u.isString(C)?new Function("item","index","array",C):C]}function c(p){return void 0!==p&&null!==p}function g(p){return c(p)?p:""}function e(p,A,C,z){var q=C.match(/([^\(]+)(\([^\)]+\))?/i);C=u.trim(q[1]);var v=q[2]?u.trim(q[2]):null;q=A[p];z=z||(v?y.fromJson(v.replace(/^\(/,"({").replace(/\)$/,"})")):{});v=z.utcOffset;if(-1===F.indexOf(k,C))C=u.getObject(C),u.isFunction(C)&&(q=C(q,p,A,z));else if("number"===
typeof q||"string"===typeof q&&q&&!isNaN(Number(q)))switch(q=Number(q),C){case "NumberFormat":return r.format(q,z);case "DateString":p=new Date(q);if(z.local||z.systemLocale)return z.systemLocale?p.toLocaleDateString()+(z.hideTime?"":" "+p.toLocaleTimeString()):p.toDateString()+(z.hideTime?"":" "+p.toTimeString());p=p.toUTCString();z.hideTime&&(p=p.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return p;case "DateFormat":return p=new Date(q),c(v)&&(p=n.add(p,"minute",p.getTimezoneOffset()-v)),l.format(p,
z)}return g(q)}function h(p,A){var C;if(A)for(C in p)p.hasOwnProperty(C)&&(void 0===p[C]?delete p[C]:p[C]instanceof Object&&h(p[C],!0));else for(C in p)p.hasOwnProperty(C)&&void 0===p[C]&&delete p[C];return p}var k=["NumberFormat","DateString","DateFormat"],m=/<\/?[^>]+>/g,w={valueOf:function(p,A){for(var C in p)if(p[C]==A)return C;return null},stripTags:function(p){if(p){var A=typeof p;if("string"===A)p=p.replace(m,"");else if("object"===A)for(var C in p)(A=p[C])&&"string"===typeof A&&(A=A.replace(m,
"")),p[C]=A}return p},substitute:function(p,A,C){if(c(C))if(u.isObject(C)){var z=C.first;var q=C.dateFormat;var v=C.numberFormat;var B=C.format}else z=C;if(A&&"${*}"!==A)return u.replace(A,u.hitch({obj:p},function(x,E){var G=E.split(":");return 1<G.length?(E=G[0],G.shift(),(x=B&&B[G[0]])?G=x.formatType:(G=G.join(":"),x=null),e(E,this.obj,G,x)):(x=f(E,B,v,q))?e(E,this.obj,x.formatType,x.options):g(this.obj[E])}),/\$\{([^\}]+)\}/g);A=[];for(var D in p)if(C=(C=f(D,B,v,q))?e(D,p,C.formatType,C.options):
p[D],A.push(D+" \x3d "+g(C)+"\x3cbr/\x3e"),z)break;return A.join("")},filter:function(p,A,C){A=b(p,C,A);C={};var z;p=A[0];for(z in p)A[2].call(A[z],p[z],z,p)&&(C[z]=p[z]);return C},startsWith:function(p,A,C){C=C||0;return p.indexOf(A,C)===C},endsWith:function(p,A,C){if("number"!==typeof C||!isFinite(C)||Math.floor(C)!==C||C>p.length)C=p.length;C-=A.length;p=p.indexOf(A,C);return-1!==p&&p===C},isDefined:c,fixJson:h,isObject:function(p){return p&&"object"===typeof p},isString:function(p){return"string"===
typeof p},mixin:function(p,A){for(var C in A)A.hasOwnProperty(C)&&(p[C]=A[C]);return p},clone2DArray:function(p){if(p=p?p.slice(0):null){var A,C=p.length;for(A=0;A<C;A++)p[A]=p[A]?p[A].slice(0):null}return p},clone3DArray:function(p){if(p=p?p.slice(0):null){var A,C=p.length;for(A=0;A<C;A++){p[A]=p[A]?p[A].slice(0):null;var z=p[A];if(z){var q,v=z.length;for(q=0;q<v;q++)z[q]=z[q]?z[q].slice(0):null}}}return p}};t("extend-esri")&&(u.mixin(d,w),d._isDefined=c,d._getParts=b,d._sanitize=h);return w})},
"dojo/date":function(){define(["./has","./_base/lang"],function(F,y){var a={getDaysInMonth:function(u){var n=u.getMonth();return 1==n&&a.isLeapYear(u)?29:[31,28,31,30,31,30,31,31,30,31,30,31][n]},isLeapYear:function(u){u=u.getFullYear();return!(u%400)||!(u%4)&&!!(u%100)},getTimezoneName:function(u){var n=u.toString(),t="",r=n.indexOf("(");if(-1<r)t=n.substring(++r,n.indexOf(")"));else if(r=/([A-Z\/]+) \d{4}$/,n=n.match(r))t=n[1];else if(n=u.toLocaleString(),r=/ ([A-Z\/]+)$/,n=n.match(r))t=n[1];return"AM"==
t||"PM"==t?"":t},compare:function(u,n,t){u=new Date(+u);n=new Date(+(n||new Date));"date"==t?(u.setHours(0,0,0,0),n.setHours(0,0,0,0)):"time"==t&&(u.setFullYear(0,0,0),n.setFullYear(0,0,0));return u>n?1:u<n?-1:0},add:function(u,n,t){var r=new Date(+u),l=!1,d="Date";switch(n){case "day":break;case "weekday":if(n=t%5)var f=parseInt(t/5);else n=0<t?5:-5,f=0<t?(t-5)/5:(t+5)/5;var b=u.getDay(),c=0;6==b&&0<t?c=1:0==b&&0>t&&(c=-1);b+=n;if(0==b||6==b)c=0<t?2:-2;t=7*f+n+c;break;case "year":d="FullYear";l=
!0;break;case "week":t*=7;break;case "quarter":t*=3;case "month":l=!0;d="Month";break;default:d="UTC"+n.charAt(0).toUpperCase()+n.substring(1)+"s"}if(d)r["set"+d](r["get"+d]()+t);l&&r.getDate()<u.getDate()&&r.setDate(0);return r},difference:function(u,n,t){n=n||new Date;t=t||"day";var r=n.getFullYear()-u.getFullYear(),l=1;switch(t){case "quarter":u=u.getMonth();n=n.getMonth();l=Math.floor(n/3)+1+4*r-(Math.floor(u/3)+1);break;case "weekday":r=Math.round(a.difference(u,n,"day"));t=parseInt(a.difference(u,
n,"week"));if(0==r%7)r=5*t;else{l=0;var d=u.getDay(),f=n.getDay();t=parseInt(r/7);n=r%7;u=new Date(u);u.setDate(u.getDate()+7*t);u=u.getDay();if(0<r)switch(!0){case 6==d:l=-1;break;case 0==d:l=0;break;case 6==f:l=-1;break;case 0==f:l=-2;break;case 5<u+n:l=-2}else if(0>r)switch(!0){case 6==d:l=0;break;case 0==d:l=1;break;case 6==f:l=2;break;case 0==f:l=1;break;case 0>u+n:l=2}r=r+l-2*t}l=r;break;case "year":l=r;break;case "month":l=n.getMonth()-u.getMonth()+12*r;break;case "week":l=parseInt(a.difference(u,
n,"day")/7);break;case "day":l/=24;case "hour":l/=60;case "minute":l/=60;case "second":l/=1E3;case "millisecond":l*=n.getTime()-u.getTime()}return Math.round(l)}};y.mixin(y.getObject("dojo.date",!0),a);return a})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(F,y,a,u,n){var t={};F.setObject("dojo.number",t);t.format=function(l,d){d=F.mixin({},d||{});var f=y.normalizeLocale(d.locale);f=y.getLocalization("dojo.cldr","number",f);d.customs=
f;f=d.pattern||f[(d.type||"decimal")+"Format"];return isNaN(l)||Infinity==Math.abs(l)?null:t._applyPattern(l,f,d)};t._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;t._applyPattern=function(l,d,f){f=f||{};var b=f.customs.group,c=f.customs.decimal;d=d.split(";");var g=d[0];d=d[0>l?1:0]||"-"+g;if(-1!=d.indexOf("%"))l*=100;else if(-1!=d.indexOf("\u2030"))l*=1E3;else if(-1!=d.indexOf("\u00a4"))b=f.customs.currencyGroup||b,c=f.customs.currencyDecimal||c,d=d.replace(/([\s\xa0\u202f]*)(\u00a4{1,3})([\s\xa0\u202f]*)/,
function(h,k,m,w){return(h=f[["symbol","currency","displayName"][m.length-1]]||f.currency||"")?k+h+w:""});else if(-1!=d.indexOf("E"))throw Error("exponential notation not supported");var e=t._numberPatternRE;g=g.match(e);if(!g)throw Error("unable to find a number expression in pattern: "+d);!1===f.fractional&&(f.places=0);return d.replace(e,t._formatAbsolute(l,g[0],{decimal:c,group:b,places:f.places,round:f.round}))};t.round=function(l,d,f){f=10/(f||10);return(f*+l).toFixed(d)/f};if(0==(.9).toFixed()){var r=
t.round;t.round=function(l,d,f){var b=Math.pow(10,-d||0),c=Math.abs(l);if(!l||c>=b)b=0;else if(c/=b,.5>c||.95<=c)b=0;return r(l,d,f)+(0<l?b:-b)}}t._formatAbsolute=function(l,d,f){f=f||{};!0===f.places&&(f.places=0);Infinity===f.places&&(f.places=6);d=d.split(".");var b="string"==typeof f.places&&f.places.indexOf(","),c=f.places;b?c=f.places.substring(b+1):0<=c||(c=(d[1]||[]).length);0>f.round||(l=t.round(l,c,f.round));l=String(Math.abs(l)).split(".");var g=l[1]||"";d[1]||f.places?(b&&(f.places=f.places.substring(0,
b)),b=void 0!==f.places?f.places:d[1]&&d[1].lastIndexOf("0")+1,b>g.length&&(l[1]=u.pad(g,b,"0",!0)),c<g.length&&(l[1]=g.substr(0,c))):l[1]&&l.pop();c=d[0].replace(",","");b=c.indexOf("0");-1!=b&&(b=c.length-b,b>l[0].length&&(l[0]=u.pad(l[0],b)),-1==c.indexOf("#")&&(l[0]=l[0].substr(l[0].length-b)));c=d[0].lastIndexOf(",");var e;if(-1!=c){var h=d[0].length-c-1;d=d[0].substr(0,c);c=d.lastIndexOf(",");-1!=c&&(e=d.length-c-1)}d=[];for(c=l[0];c;)b=c.length-h,d.push(0<b?c.substr(b):c),c=0<b?c.slice(0,b):
"",e&&(h=e,e=void 0);l[0]=d.reverse().join(f.group||",");return l.join(f.decimal||".")};t.regexp=function(l){return t._parseInfo(l).regexp};t._parseInfo=function(l){l=l||{};var d=y.normalizeLocale(l.locale);d=y.getLocalization("dojo.cldr","number",d);var f=l.pattern||d[(l.type||"decimal")+"Format"],b=d.group,c=d.decimal,g=1;if(-1!=f.indexOf("%"))g/=100;else if(-1!=f.indexOf("\u2030"))g/=1E3;else{var e=-1!=f.indexOf("\u00a4");e&&(b=d.currencyGroup||b,c=d.currencyDecimal||c)}d=f.split(";");1==d.length&&
d.push("-"+d[0]);d=n.buildGroupRE(d,function(h){h="(?:"+n.escapeString(h,".")+")";return h.replace(t._numberPatternRE,function(k){var m={signed:!1,separator:l.strict?b:[b,""],fractional:l.fractional,decimal:c,exponent:!1};k=k.split(".");var w=l.places;1==k.length&&1!=g&&(k[1]="###");1==k.length||0===w?m.fractional=!1:(void 0===w&&(w=l.pattern?k[1].lastIndexOf("0")+1:Infinity),w&&void 0==l.fractional&&(m.fractional=!0),!l.places&&w<k[1].length&&(w+=","+k[1].length),m.places=w);k=k[0].split(",");1<
k.length&&(m.groupSize=k.pop().length,1<k.length&&(m.groupSize2=k.pop().length));return"("+t._realNumberRegexp(m)+")"})},!0);e&&(d=d.replace(/([\s\xa0\u202f]*)(\u00a4{1,3})([\s\xa0\u202f]*)/g,function(h,k,m,w){h=n.escapeString(l[["symbol","currency","displayName"][m.length-1]]||l.currency||"");if(!h)return"";k=k?"[\\s\\xa0\\u202f]":"";w=w?"[\\s\\xa0\\u202f]":"";return l.strict?k+h+w:(k&&(k+="*"),w&&(w+="*"),"(?:"+k+h+w+")?")}));return{regexp:d.replace(/[\xa0\u202f ]/g,"[\\s\\xa0\\u202f]"),group:b,
decimal:c,factor:g}};t.parse=function(l,d){d=t._parseInfo(d);l=(new RegExp("^"+d.regexp+"$")).exec(l);if(!l)return NaN;var f=l[1];if(!l[1]){if(!l[2])return NaN;f=l[2];d.factor*=-1}f=f.replace(new RegExp("["+d.group+"\\s\\xa0\\u202f]","g"),"").replace(d.decimal,".");return f*d.factor};t._realNumberRegexp=function(l){l=l||{};"places"in l||(l.places=Infinity);"string"!=typeof l.decimal&&(l.decimal=".");"fractional"in l&&!/^0/.test(l.places)||(l.fractional=[!0,!1]);"exponent"in l||(l.exponent=[!0,!1]);
"eSigned"in l||(l.eSigned=[!0,!1]);var d=t._integerRegexp(l),f=n.buildGroupRE(l.fractional,function(c){var g="";c&&0!==l.places&&(g="\\"+l.decimal,g=Infinity==l.places?"(?:"+g+"\\d+)?":g+("\\d{"+l.places+"}"));return g},!0),b=n.buildGroupRE(l.exponent,function(c){return c?"([eE]"+t._integerRegexp({signed:l.eSigned})+")":""});d+=f;f&&(d="(?:(?:"+d+")|(?:"+f+"))");return d+b};t._integerRegexp=function(l){l=l||{};"signed"in l||(l.signed=[!0,!1]);"separator"in l?"groupSize"in l||(l.groupSize=3):l.separator=
"";var d=n.buildGroupRE(l.signed,function(b){return b?"[-+]":""},!0),f=n.buildGroupRE(l.separator,function(b){if(!b)return"(?:\\d+)";b=n.escapeString(b);" "==b?b="\\s":"\u00a0"==b?b="\\s\\xa0":"\u202f"==b&&(b="\\s\\u202f");var c=l.groupSize,g=l.groupSize2;return g?(b="(?:0|[1-9]\\d{0,"+(g-1)+"}(?:["+b+"]\\d{"+g+"})*["+b+"]\\d{"+c+"})",0<c-g?"(?:"+b+"|(?:0|[1-9]\\d{0,"+(c-1)+"}))":b):"(?:0|[1-9]\\d{0,"+(c-1)+"}(?:["+b+"]\\d{"+c+"})*)"},!0);return d+f};return t})},"dojo/regexp":function(){define(["./_base/kernel",
"./_base/lang"],function(F,y){var a={};y.setObject("dojo.regexp",a);a.escapeString=function(u,n){return u.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(t){return n&&-1!=n.indexOf(t)?t:"\\"+t})};a.buildGroupRE=function(u,n,t){if(!(u instanceof Array))return n(u);for(var r=[],l=0;l<u.length;l++)r.push(n(u[l]));return a.group(r.join("|"),t)};a.group=function(u,n){return"("+(n?"?:":"")+u+")"};return a})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),
function(F,y,a,u,n,t,r,l,d){function f(m,w,p,A){return A.replace(/([a-z])\1*/ig,function(C){var z=C.charAt(0);C=C.length;var q=["abbr","wide","narrow"];switch(z){case "G":var v=w[4>C?"eraAbbr":"eraNames"][0>m.getFullYear()?0:1];break;case "y":v=m.getFullYear();switch(C){case 1:break;case 2:if(!p.fullYear){v=String(v);v=v.substr(v.length-2);break}default:var B=!0}break;case "Q":case "q":v=Math.ceil((m.getMonth()+1)/3);B=!0;break;case "M":case "L":v=m.getMonth();3>C?(v+=1,B=!0):(z=["months","L"==z?
"standAlone":"format",q[C-3]].join("-"),v=w[z][v]);break;case "w":v=g._getWeekOfYear(m,0);B=!0;break;case "d":v=m.getDate();B=!0;break;case "D":v=g._getDayOfYear(m);B=!0;break;case "e":case "c":if(v=m.getDay(),2>C){v=(v-u.getFirstDayOfWeek(p.locale)+8)%7;break}case "E":v=m.getDay();3>C?(v+=1,B=!0):(z=["days","c"==z?"standAlone":"format",q[C-3]].join("-"),v=w[z][v]);break;case "a":z=12>m.getHours()?"am":"pm";v=p[z]||w["dayPeriods-format-wide-"+z];break;case "h":case "H":case "K":case "k":B=m.getHours();
switch(z){case "h":v=B%12||12;break;case "H":v=B;break;case "K":v=B%12;break;case "k":v=B||24}B=!0;break;case "m":v=m.getMinutes();B=!0;break;case "s":v=m.getSeconds();B=!0;break;case "S":v=Math.round(m.getMilliseconds()*Math.pow(10,C-3));B=!0;break;case "v":case "z":if(v=g._getZone(m,!0,p))break;C=4;case "Z":z=g._getZone(m,!1,p);z=[0>=z?"+":"-",r.pad(Math.floor(Math.abs(z)/60),2),r.pad(Math.abs(z)%60,2)];4==C&&(z.splice(0,0,"GMT"),z.splice(3,0,":"));v=z.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+
A);}B&&(v=r.pad(v,C));return v})}function b(m,w,p,A){var C=function(v){return v};w=w||C;p=p||C;A=A||C;var z=m.match(/(''|[^'])+/g),q="'"==m.charAt(0);y.forEach(z,function(v,B){v?(z[B]=(q?p:w)(v.replace(/''/g,"'")),q=!q):z[B]=""});return A(z.join(""))}function c(m,w,p,A){A=t.escapeString(A);p.strict||(A=A.replace(" a"," ?a"));return A.replace(/([a-z])\1*/ig,function(C){var z=C.charAt(0);var q=C.length,v="",B="";p.strict?(1<q&&(v="0{"+(q-1)+"}"),2<q&&(B="0{"+(q-2)+"}")):(v="0?",B="0{0,2}");switch(z){case "y":z=
"\\d{2,4}";break;case "M":case "L":2<q?(z=w["months-"+("L"==z?"standAlone":"format")+"-"+e[q-3]].slice(0).join("|"),p.strict||(z=z.replace(/\./g,""),z="(?:"+z+")\\.?")):z="1[0-2]|"+v+"[1-9]";break;case "D":z="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+v+"[1-9][0-9]|"+B+"[1-9]";break;case "d":z="3[01]|[12]\\d|"+v+"[1-9]";break;case "w":z="[1-4][0-9]|5[0-3]|"+v+"[1-9]";break;case "E":case "e":case "c":z=".+?";break;case "h":z="1[0-2]|"+v+"[1-9]";break;case "k":z="1[01]|"+v+"\\d";break;case "H":z="1\\d|2[0-3]|"+
v+"\\d";break;case "K":z="1\\d|2[0-4]|"+v+"[1-9]";break;case "m":case "s":z="[0-5]\\d";break;case "S":z="\\d{"+q+"}";break;case "a":q=p.am||w["dayPeriods-format-wide-am"];v=p.pm||w["dayPeriods-format-wide-pm"];z=q+"|"+v;p.strict||(q!=q.toLowerCase()&&(z+="|"+q.toLowerCase()),v!=v.toLowerCase()&&(z+="|"+v.toLowerCase()),-1!=z.indexOf(".")&&(z+="|"+z.replace(/\./g,"")));z=z.replace(/\./g,"\\.");break;default:z=".*"}m&&m.push(C);return"("+z+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var g={};F.setObject(d.id.replace(/\//g,
"."),g);g._getZone=function(m,w,p){return w?a.getTimezoneName(m):m.getTimezoneOffset()};g.format=function(m,w){w=w||{};var p=n.normalizeLocale(w.locale),A=w.formatLength||"short";p=g._getGregorianBundle(p);var C=[];m=F.hitch(this,f,m,p,w);if("year"==w.selector)return b(p["dateFormatItem-yyyy"]||"yyyy",m);var z;"date"!=w.selector&&(z=w.timePattern||p["timeFormat-"+A])&&C.push(b(z,m));"time"!=w.selector&&(z=w.datePattern||p["dateFormat-"+A])&&C.push(b(z,m));return 1==C.length?C[0]:p["dateTimeFormat-"+
A].replace(/'/g,"").replace(/\{(\d+)\}/g,function(q,v){return C[v]})};g.regexp=function(m){return g._parseInfo(m).regexp};g._parseInfo=function(m){m=m||{};var w=n.normalizeLocale(m.locale);w=g._getGregorianBundle(w);var p=m.formatLength||"short",A=m.datePattern||w["dateFormat-"+p],C=m.timePattern||w["timeFormat-"+p];p="date"==m.selector?A:"time"==m.selector?C:w["dateTimeFormat-"+p].replace(/\{(\d+)\}/g,function(q,v){return[C,A][v]});var z=[];return{regexp:b(p,F.hitch(this,c,z,w,m)),tokens:z,bundle:w}};
g.parse=function(m,w){var p=/[\u200E\u200F\u202A\u202E]/g,A=g._parseInfo(w),C=A.tokens,z=A.bundle;m=(new RegExp("^"+A.regexp.replace(p,"")+"$",A.strict?"":"i")).exec(m&&m.replace(p,""));if(!m)return null;var q=["abbr","wide","narrow"],v=[1970,0,1,0,0,0,0],B="";m=y.every(m,function(x,E){if(!E)return!0;var G=C[E-1];E=G.length;G=G.charAt(0);switch(G){case "y":if(2!=E&&w.strict)v[0]=x;else if(100>x)x=Number(x),G=""+(new Date).getFullYear(),E=100*G.substring(0,2),G=Math.min(Number(G.substring(2,4))+20,
99),v[0]=x<G?E+x:E-100+x;else{if(w.strict)return!1;v[0]=x}break;case "M":case "L":if(2<E){if(E=z["months-"+("L"==G?"standAlone":"format")+"-"+q[E-3]].concat(),w.strict||(x=x.replace(".","").toLowerCase(),E=y.map(E,function(L){return L.replace(".","").toLowerCase()})),x=y.indexOf(E,x),-1==x)return!1}else x--;v[1]=x;break;case "E":case "e":case "c":E=z["days-"+("c"==G?"standAlone":"format")+"-"+q[E-3]].concat();w.strict||(x=x.toLowerCase(),E=y.map(E,function(L){return L.toLowerCase()}));x=y.indexOf(E,
x);if(-1==x)return!1;break;case "D":v[1]=0;case "d":v[2]=x;break;case "a":E=w.am||z["dayPeriods-format-wide-am"];G=w.pm||z["dayPeriods-format-wide-pm"];if(!w.strict){var I=/\./g;x=x.replace(I,"").toLowerCase();E=E.replace(I,"").toLowerCase();G=G.replace(I,"").toLowerCase()}if(w.strict&&x!=E&&x!=G)return!1;B=x==G?"p":x==E?"a":"";break;case "K":24==x&&(x=0);case "h":case "H":case "k":if(23<x)return!1;v[3]=x;break;case "m":v[4]=x;break;case "s":v[5]=x;break;case "S":v[6]=x}return!0});p=+v[3];"p"===B&&
12>p?v[3]=p+12:"a"===B&&12==p&&(v[3]=0);p=new Date(v[0],v[1],v[2],v[3],v[4],v[5],v[6]);w.strict&&p.setFullYear(v[0]);var D=C.join("");A=-1!=D.indexOf("d");D=-1!=D.indexOf("M");if(!m||D&&p.getMonth()>v[1]||A&&p.getDate()>v[2])return null;if(D&&p.getMonth()<v[1]||A&&p.getDate()<v[2])p=a.add(p,"hour",1);return p};var e=["abbr","wide","narrow"],h=[],k={};g.addCustomFormats=function(m,w){h.push({pkg:m,name:w});k={}};g._getGregorianBundle=function(m){if(k[m])return k[m];var w={};y.forEach(h,function(p){p=
n.getLocalization(p.pkg,p.name,m);w=F.mixin(w,p)},this);return k[m]=w};g.addCustomFormats(d.id.replace(/\/date\/locale$/,".cldr"),"gregorian");g.getNames=function(m,w,p,A){A=g._getGregorianBundle(A);m=[m,p,w];if("standAlone"==p){p=m.join("-");var C=A[p];1==C[0]&&(C=void 0)}m[1]="format";return(C||A[m.join("-")]).concat()};g.isWeekend=function(m,w){w=u.getWeekend(w);m=(m||new Date).getDay();w.end<w.start&&(w.end+=7,m<w.start&&(m+=7));return m>=w.start&&m<=w.end};g._getDayOfYear=function(m){return a.difference(new Date(m.getFullYear(),
0,1,m.getHours()),m)+1};g._getWeekOfYear=function(m,w){1==arguments.length&&(w=0);var p=(new Date(m.getFullYear(),0,1)).getDay(),A=(p-w+7)%7;A=Math.floor((g._getDayOfYear(m)+A-1)/7);p==w&&A++;return A};return g})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(F,y){var a={};F.setObject("dojo.cldr.supplemental",a);a.getFirstDayOfWeek=function(u){u={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,
br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[a._region(u)];return void 0===u?1:u};a._region=function(u){u=y.normalizeLocale(u);u=u.split("-");var n=u[1];n?4==n.length&&(n=u[2]):n={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",
bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",
kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",
sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",
bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",
hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",
mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",
ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[u[0]];return n};a.getWeekend=
function(u){var n=a._region(u);u={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[n];n={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[n];void 0===u&&(u=6);void 0===n&&(n=0);return{start:u,end:n}};return a})},"esri/_coremap":function(){define("require module dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/event dojo/_base/unload dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/sniff dijit/registry dojox/gfx/matrix ./kernel ./config ./basemaps ./lang ./Evented ./fx ./deferredUtils ./tileUtils ./urlUtils ./PluginTarget ./Color ./promiseList ./arcade/Dictionary ./geometry/Point ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils ./layers/GraphicsLayer ./layers/TileInfo ./layers/LOD ./layers/ArcGISTiledMapServiceLayer ./layers/MapImageLayer ./layers/OpenStreetMapLayer ./layers/support/webglUtils ./dijit/Popup ./plugins/popupManager dojo/uacss".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m,w,p,A,C,z,q,v,B,D,x,E,G,I,L,Y,X,fa,sa,T,ka,ma,wa,ja,ua,Ba,M,Z,ia,qa,ya,Ca){function Ia(K,S){var ba=K.lods;ba.sort(function(Ha,Va){return Ha.scale>Va.scale?-1:Ha.scale<Va.scale?1:0});var ra=[];ba=l.filter(ba,function(Ha){if(-1===oa(ra,Ha.scale))return ra.push(Ha.scale),!0});var xa=S.lods=[],La;l.forEach(ba,function(Ha,Va){La=xa[Va]=new M(Ha);La.level=Va});S.tileInfo=new Ba(ta(K,{lods:xa}))}var Oa,la=wa.toMapPoint,N=wa.toScreenPoint,aa=n.connect,na=n.disconnect,
ca=r.hitch,ea=k.set,oa=l.indexOf,ta=r.mixin,O=0,V=C.defaults.map,pa=V.layerNamePrefix,za=V.graphicsLayerNamePrefix,Ja=new RegExp("^"+pa+"(\\d+)$"),Qa=new RegExp("^"+za+"(\\d+)$"),J=function(){},U=0,ha=ya.isWebGLEnabled();u=u([v,G],{declaredClass:"esri._CoreMap",tables:null,resizeDelay:300,invalidExtent:"Map does not have a valid extent.",invalidGeometry:"Geometry (wkid: ${geometry}) cannot be converted to spatial reference of the map (wkid: ${map})",unknownBasemap:'Unable to find basemap definition for: "${basemapName}". Try one of these: ${list}',
invalidBasemap:'Unable to add basemap: "${basemapName}".',unknownLayerType:'Unknown basemap layer type: "${type}" found in basemap definition for: "${basemapName}".',visible:!0,webglEnabled:ha,_eventMap:{"basemap-change":!0,"extent-change":["extent","delta","levelChange","lod"],"layer-add":["layer"],"layer-add-result":["layer","error"],"layer-remove":["layer"],"layer-reorder":["layer","index"],"layer-resume":["layer"],"layer-suspend":["layer"],"layers-add-result":["layers"],"layers-removed":!0,"layers-reordered":["layerIds"],
load:["map"],pan:["extent","delta"],"pan-end":["extent","delta"],"pan-start":["extent","screenPoint"],reposition:["x","y"],resize:["extent","width","height"],scale:["matrix","immediate"],"time-extent-change":["timeExtent"],"before-unload":["map"],unload:["map"],"update-end":["error"],"update-start":!0,zoom:["extent","zoomFactor","anchor"],"zoom-end":["extent","zoomFactor","anchor","level"],"zoom-start":["extent","zoomFactor","anchor","level"],click:!0,"dbl-click":!0,"key-down":!0,"key-up":!0,"mouse-down":!0,
"mouse-drag":!0,"mouse-drag-end":!0,"mouse-drag-start":!0,"mouse-move":!0,"mouse-out":!0,"mouse-over":!0,"mouse-up":!0,"mouse-wheel":!0,"basic-tap":!0,"double-tap":!0,"pinch-end":!0,"pinch-move":!0,"pinch-start":!0,"processed-double-tap":!0,"processed-tap":!0,"swipe-end":!0,"swipe-move":!0,"swipe-start":!0,tap:!0,"two-finger-tap":!0},constructor:function(K,S){S=S||{};this.registerConnectEvents();ta(this,{_internalLayerIds:[],_layers:[],_layerDivs:[],_basemapPending:!1,_connects:[],_layerAddPromises:{},
_zoomAnimDiv:null,_zoomAnim:null,_layersDiv:null,_firstLayerId:null,_delta:null,_cursor:null,_ratioW:1,_ratioH:1,_params:null,_minResolution:0,_maxResolution:0,cursor:null,layerIds:[],graphicsLayerIds:[],graphics:null,_labels:null,loaded:!1,__panning:!1,__zooming:!1,__container:null,root:null,__LOD:null,__tileInfo:null,__visibleRect:null,__visibleDelta:null,_rids:[],_webglContextOwners:[]});var ba=this.container=b.byId(K),ra=this.id=c.get(ba,"id")||w.getUniqueId(this.declaredClass);g.add(ba,"map");
var xa=h.getContentBox(ba);K=g.add;var La=e.create;this.position=new fa(0,0);this._reposition();var Ha=this.width=0<xa.w?xa.w:V.width,Va=this.height=0<xa.h?xa.h:V.height,Ta=this.root=La("div",{id:ra+"_root",style:{width:Ha+"px",height:Va+"px",direction:"ltr"}});K(Ta,"esriMapContainer");xa=this.__container=La("div",{id:ra+"_container"},Ta);ea(xa,"position","absolute");K(xa,"esriMapContainer");ba.appendChild(Ta);S=this._params=ta({slider:!0,nav:!1,zoom:-1,minZoom:-1,maxZoom:-1,scale:-1,minScale:0,maxScale:0,
showInfoWindowOnClick:!0,displayGraphicsOnPan:!0,wrapAround180:!0,fitExtent:!1,optimizePanAnimation:!0},S);this.setWebGLEnabled(null!=S.webglEnabled?S.webglEnabled:this.webglEnabled);this.maxWebGLContexts=null!=S.maxWebGLContexts?S.maxWebGLContexts:-1;this.wrapAround180=S.wrapAround180;this.optimizePanAnimation=S.optimizePanAnimation;this.setBackgroundColor(S.backgroundColor);q.isDefined(S.resizeDelay)&&(this.resizeDelay=S.resizeDelay);S.lods&&(Ia({rows:512,cols:512,dpi:96,format:"JPEG",compressionQuality:75,
origin:{x:-180,y:90},spatialReference:{wkid:4326},lods:S.lods},S),this.__tileInfo=S.tileInfo);this.extent=S.extent;this._extentUtil({mapCenter:S.center,targetLevel:S.zoom,targetScale:S.scale});this.__visibleRect=new T(0,0,Ha,Va);this.__visibleDelta=new T(0,0,Ha,Va);ra=this._layersDiv=La("div",{id:ra+"_layers"});K(ra,"esriMapLayers");xa.appendChild(ra);this._zoomAnimDiv=La("div",{style:{position:"absolute"}});S.infoWindow?this.infoWindow=S.infoWindow:(K=this.infoWindow=new Ca(S.popupOptions,La("div")),
K.startup(),K._ootb=!0,ea(K.domNode,"zIndex",40));if(S.showLabels){var Pa=this;F(["./layers/LabelLayer"],function(Xa){Oa=Xa;Pa._createLabelLayer()});this.on("load",function(){Pa._createLabelLayer()})}this.addPlugin(this._getAbsMid("./plugins/popupManager"),{enabled:S.showInfoWindowOnClick});this._zoomStartHandler=ca(this,this._zoomStartHandler);this._zoomingHandler=ca(this,this._zoomingHandler);this._zoomEndHandler=ca(this,this._zoomEndHandler);this._panningHandler=ca(this,this._panningHandler);this._panEndHandler=
ca(this,this._panEndHandler);this._endTranslate=ca(this,this._endTranslate);this._timedResize=ca(this,this._timedResize);this._execResize=ca(this,this._execResize);this._processLabelLayers=ca(this,this._processLabelLayers);this._updateLabelLayers=ca(this,this._updateLabelLayers);this.resize=ca(this,this.resize);f.addOnWindowUnload(this,this.destroy)},_getAbsMid:function(K){return F.toAbsMid?F.toAbsMid(K):y.id.replace(/\/[^\/]*$/ig,"/")+K},_cleanUp:function(){var K=this.infoWindow;K&&(K._ootb&&K.destroy?
K.destroy():K.unsetMap(this),delete this.infoWindow);na(this._tsTimeExtentChange_connect);this.removePlugin("./plugins/popupManager");e.destroy(this.root);this.root=null},_addLayer:function(K,S,ba){if(K.id){var ra=K.id.match(K instanceof ua?Qa:Ja);ra&&ra[1]&&(ra=Number(ra[1]),O<=ra&&(O=ra+1))}var xa=K.id||(K instanceof ua?za:pa)+O++;K.id=xa;this._layers[xa]=K;K._isRefLayer="top"===ba;ba=!q.isDefined(ba)||0>ba||ba>S.length||"top"===ba?S.length:ba;var La;if(!K._isRefLayer)for(;(La=this.getLayer(S[ba-
1]))&&La._isRefLayer;)ba--;if(ra=!this._firstLayerId&&!this.loaded&&!this._basemapPending&&0===ba&&(S===this.layerIds||S===this.graphicsLayerIds))this._firstLayerId=xa;S.splice(ba,0,xa);var Ha=ca(this,this._addLayerHandler),Va=this;ba=this._connects;La=function(){K.loaded?Va._onLoadFix?(Va._onLoadFix=!1,setTimeout(function(){Ha(K)},0)):Ha(K):(Va["_"+xa+"_addtoken_load"]=aa(K,"onLoad",Va,"_addLayerHandler"),Va["_"+xa+"_addtoken_err"]=aa(K,"onError",Va,function(Ta){Ha(K,Ta,S)}))};this.loaded||ra||K.loaded&&
-1===oa(this.graphicsLayerIds,xa)?La():ba.push(aa(this,"onLoad",La));return K},_forgetLayer:function(K){K=K.id;na(this["_"+K+"_addtoken_load"]);na(this["_"+K+"_addtoken_err"]);var S=this._layerAddPromises[K];S&&(delete this._layerAddPromises[K],S.cancel())},_addLayerHandler:function(K,S,ba){S?this._attachLayerToMap(K,S,ba):K._prepareToAttach?(this._layerAddPromises[K.id]=K._prepareToAttach(this)).always(r.hitch(this,function(ra){ra&&"cancel"===ra.dojoType||this._attachLayerToMap(K,null,ba)})):K.declaredClass&&
(-1<K.declaredClass.toLowerCase().indexOf("vectortilelayer")||-1<K.declaredClass.toLowerCase().indexOf("rasterxlayer")&&K.useWebGL)&&!this.isWebGLContextAvailable()?(S=Error("Too many WebGL contexts. Unable to add the layer: ",K.url),this._attachLayerToMap(K,S,this.layerIds)):this._attachLayerToMap(K,S,ba)},_attachLayerToMap:function(K,S,ba){var ra=this.id,xa=K.id,La=oa(K instanceof ua?this.graphicsLayerIds:this.layerIds,xa),Ha=La,Va=!1,Ta=this._params;this._forgetLayer(K);if(S)delete this._layers[xa],
-1!==La&&(ba.splice(La,1),this.onLayerAddResult(K,S));else{-1===La&&(La=oa(this._internalLayerIds,xa),Ha=20+La,Va=!0);if(xa===this._firstLayerId){S=K.spatialReference;ba=this.extent&&this.extent.spatialReference;!ba||ba.equals(S)||!K.tileInfo&&K.url||(ba=null);ba=this.spatialReference=ba||S;this.wrapAround180=this.wrapAround180&&ba&&ba._isWrappable()?!0:!1;K.tileInfo&&(this.__tileInfo?(S=this.__tileInfo.lods,this.__tileInfo=ta({},K.tileInfo),this.__tileInfo.lods=S):(Ia(ta({},K.tileInfo),Ta),this.__tileInfo=
Ta.tileInfo));if(this.wrapAround180){S=this.__tileInfo;ba=ba._getInfo();if(!S||Math.abs(ba.origin[0]-S.origin.x)>ba.dx)this.wrapAround180=!1;this.wrapAround180&&S&&x._addFrameInfo(S,ba)}Ta.units=K.units;if((S=this.__tileInfo&&this.__tileInfo.lods)&&S.length){ba=Ta.minScale;La=Ta.maxScale;var Pa=-1,Xa=-1,ab=!1,Ya=!1,hb;for(hb=0;hb<S.length;hb++)0<ba&&!ab&&ba>=S[hb].scale&&(Pa=S[hb].level,ab=!0),0<La&&!Ya&&La>=S[hb].scale&&(Xa=0<hb?S[hb-1].level:-1,Ya=!0);-1===Ta.minZoom&&(Ta.minZoom=0===ba?S[0].level:
Pa);-1===Ta.maxZoom&&(Ta.maxZoom=0===La?S[S.length-1].level:Xa);for(hb=0;hb<S.length;hb++)Ta.minZoom===S[hb].level&&(Ta.minScale=S[hb].scale,this._minResolution=S[hb].resolution),Ta.maxZoom===S[hb].level&&(Ta.maxScale=S[hb].scale,this._maxResolution=S[hb].resolution)}else Ta.minZoom=Ta.maxZoom=Ta.zoom=-1}K instanceof ua?(this._gc||(this._gc=new ua._GraphicsContainer,this._gc._setMap(this,this._layersDiv).id=ra+"_gc"),this._attachGraphicsLayer(K).id=ra+"_"+xa):(Ha=K._setMap(this,this._layersDiv,Ha,
this.__LOD),Ha.id=ra+"_"+xa,this._layerDivs[xa]=Ha,this._reorderLayers(this.layerIds),Va||-1===K.declaredClass.indexOf("VETiledLayer")||this._onBingLayerAdd(K));xa===this._firstLayerId&&(this.graphics=new ua({id:ra+"_graphics",displayOnPan:Ta.displayGraphicsOnPan}),this._addLayer(this.graphics,this._internalLayerIds,20));if(K===this.graphics){ba=this._layers[this._firstLayerId];ra=Ta.zoom;Ha=Ta.scale;S=Ta.center;ba=ba.initialExtent||ba.fullExtent;this._firstLayerId=null;this.extent&&(this.extent=
this._convertGeometry(this,this.extent));!this.extent&&ba&&(S&&(S=this._convertGeometry(ba,S)),S&&(ba=ba.centerAt(S),S=null));if(S=this.extent||ba&&new sa(ba.toJson()))-1<ra?S=this.__getExtentForLevel(ra,null,S).extent:0<Ha&&(S=ma.getExtentForScale(this,Ha,S));if(!S){console.log("Map: "+this.invalidExtent);return}Ta=this._fixExtent(S,Ta.fitExtent);this.extent=Ta.extent;this.__LOD=Ta.lod;this.__setExtent(this.extent);this.loaded=!0;this.attr("data-loaded","");this.infoWindow.setMap(this);this.onLoad(this)}Va||
(this.onLayerAdd(K),this.onLayerAddResult(K));na(this[xa+"_addLayerHandler_connect"])}},_convertGeometry:function(K,S){K=K&&K.spatialReference;var ba=S&&S.spatialReference;K&&ba&&!K.equals(ba)&&(K._canProject(ba)?K.isWebMercator()?S=ja.geographicToWebMercator(S):4326===K.wkid&&(S=ja.webMercatorToGeographic(S,!0)):(console.log("Map: "+q.substitute({geometry:ba.wkid||ba.wkt,map:K.wkid||K.wkt},this.invalidGeometry)),S=null));return S},_attachGraphicsLayer:function(K){var S=K.id;K=K._setMap(this,this._gc._surface);
this._layerDivs[S]=K;this._reorderLayers(this.graphicsLayerIds);return K},_detachGraphicsLayer:function(K){K.loaded&&K.getMap()&&K._unsetMap(this,this._gc._surface)},_reorderLayers:function(K){var S=this.onLayerReorder,ba=e.place,ra=this._layerDivs,xa=this._layers,La=this._gc?this._gc._surface.getEventSource():null;if(K===this.graphicsLayerIds)l.forEach(K,function(Xa,ab){var Ya=ra[Xa];Xa=xa[Xa];Ya&&(this._gc._reorderLayer(Xa,Ya,ab),S(Xa,ab))},this);else{var Ha=this.graphics,Va=Ha?Ha.id:null,Ta=this._layersDiv,
Pa;l.forEach(K,function(Xa,ab){Pa=ra[Xa];Xa!==Va&&Pa&&(ba(Pa,Ta,ab),S(xa[Xa],ab))});this._mapImageLyr&&this._placeMapImageLyr();La&&(La=9>m("ie")?La.parentNode:La,ba(La,La.parentNode,"last"))}this.onLayersReordered([].concat(K))},_zoomStartHandler:function(){this.__zoomStart(this._zoomAnimDiv.startingExtent,this._zoomAnimDiv.anchor)},_zoomingHandler:function(K){var S=parseFloat(K.left),ba=parseFloat(K.top);K=new sa(S,ba-parseFloat(K.height),S+parseFloat(K.width),ba,this.spatialReference);S=this.extent.getWidth()/
K.getWidth();this.__zoom(K,S,this._zoomAnimDiv.anchor)},_zoomEndHandler:function(){var K=this._zoomAnimDiv,S=K.extent,ba=this.extent.getWidth()/S.getWidth(),ra=K.anchor,xa=K.newLod,La=K.levelChange;K.extent=K.anchor=K.levelChange=K.startingExtent=K.newLod=this._delta=this._zoomAnim=null;this.__zoomEnd(S,ba,ra,xa,La)},_panningHandler:function(K){if(isNaN(parseFloat(K.left))||isNaN(parseFloat(K.top))){var S=Math.round,ba=this._panAnim.node;K.left=-1*(this._delta.x-S(this.width/2))+"px";K.top=-1*(this._delta.y-
S(this.height/2))+"px";k.set(ba,"left",K.left);k.set(ba,"top",K.top)}K=new fa(parseFloat(K.left),parseFloat(K.top));S=this.toMap(K);this.onPan(this.extent.offset(this.extent.xmin-S.x,this.extent.ymax-S.y),K)},_panEndHandler:function(K){this.__panning=!1;var S=Math.round;K=new fa(-S(parseFloat(K.style.left)),-S(parseFloat(K.style.top)));S=K.x;var ba=K.y,ra=this.__visibleRect,xa=this.__visibleDelta;ra.x+=-S;ra.y+=-ba;xa.x+=-S;xa.y+=-ba;ea(this._zoomAnimDiv,{left:"0px",top:"0px"});ra=this.extent;xa=
this._ratioW;var La=this._ratioH;ra=new sa(ra.xmin+S/xa,ra.ymin-ba/La,ra.xmax+S/xa,ra.ymax-ba/La,this.spatialReference);K.setX(-K.x);K.setY(-K.y);this._delta=this._panAnim=null;this._updateExtent(ra);this.onPanEnd(ra,K);this._fireExtChg([ra,K,!1,this.__LOD])},_fixExtent:function(K,S){for(var ba=this._reshapeExtent(K),ra=1.25;!0===S&&(ba.extent.getWidth()<K.getWidth()||ba.extent.getHeight()<K.getHeight())&&0<ba.lod.level&&3>=ra;)ba=this._reshapeExtent(K.expand(ra)),ra+=.25;return ba},_getFrameWidth:function(){var K=
-1,S=this.spatialReference._getInfo();this.__LOD?(S=this.__LOD._frameInfo)&&(K=S[3]):S&&(K=Math.round(2*S.valid[1]/(this.extent.getWidth()/this.width)));return K},_fixAspectRatio:function(K){var S=K.getWidth(),ba=K.getHeight(),ra=S/ba,xa=this.width/this.height,La=0,Ha=0;this.width>this.height?S>ba?xa>ra?La=ba*xa-S:Ha=S/xa-ba:La=ba*xa-S:this.width<this.height?S<ba?xa>ra?La=ba*xa-S:Ha=S/xa-ba:Ha=S/xa-ba:S<ba?La=ba-S:S>ba&&(Ha=S/xa-ba);La&&(K.xmin-=La/2,K.xmax+=La/2);Ha&&(K.ymin-=Ha/2,K.ymax+=Ha/2);
return K},_reshapeExtent:function(K){K=this._fixAspectRatio(K);return this._getAdjustedExtent(K)},_getAdjustedExtent:function(K){if(this.__tileInfo)return x.getCandidateTileInfo(this,this.__tileInfo,K);var S=ma.getScale(this,K),ba=this.getMinScale(),ra=this.getMaxScale();!ba||S<=ba?!ra||S>=ra||(K=ma.getExtentForScale(this,ra,K)):K=ma.getExtentForScale(this,ba,K);return{extent:K}},_onBingLayerAdd:function(K){this["__"+K.id+"_vis_connect"]=n.connect(K,"onVisibilityChange",this,"_toggleBingLogo");this._toggleBingLogo(K.visible)},
_onBingLayerRemove:function(K){n.disconnect(this["__"+K.id+"_vis_connect"]);delete this["__"+K.id+"_vis_connect"];var S=l.some(this.layerIds,function(ba){return(K=this._layers[ba])&&K.visible&&-1!==K.declaredClass.indexOf("VETiledLayer")},this);this._toggleBingLogo(S)},_toggleBingLogo:function(K){K&&!this._bingLogo?(K={left:this._mapParams&&this._mapParams.nav?"25px":""},6===m("ie")&&(K.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+
F.toUrl("./images/map/bing-logo-lg.png")+"')"),K=this._bingLogo=e.create("div",{style:K},this.root),g.add(K,"bingLogo-lg")):!K&&this._bingLogo&&(e.destroy(this._bingLogo),delete this._bingLogo)},__panStart:function(K,S){var ba=this._zoomAnim,ra=this._panAnim;if(ba&&ba._active)ba.stop(),ba._fire("onEnd",[ba.node]);else if(ra&&ra._active){ra.stop();this._panAnim=null;S=ra.curve.getValue(ra._getStep());K=Math.round(parseFloat(S.left));S=Math.round(parseFloat(S.top));ba=this.navigationManager._dragOrigin;
this.__pan(K,S);ba&&(ba.x-=K,ba.y-=S);return}this.__panning=!0;this.onPanStart(this.extent,new fa(K,S))},__pan:function(K,S){var ba=this.extent,ra=this._ratioW,xa=this._ratioH;this.onPan(new sa(ba.xmin-K/ra,ba.ymin+S/xa,ba.xmax-K/ra,ba.ymax+S/xa,this.spatialReference),new fa(K,S))},__panEnd:function(K,S){var ba=this.__visibleRect,ra=this.__visibleDelta;ba.x+=K;ba.y+=S;ra.x+=K;ra.y+=S;ba=new fa(K,S);ra=this.extent;var xa=this._ratioW,La=this._ratioH;ra=new sa(ra.xmin-K/xa,ra.ymin+S/La,ra.xmax-K/xa,
ra.ymax+S/La,this.spatialReference);this.__panning=!1;this._updateExtent(ra);this.onPanEnd(ra,ba);this._fireExtChg([ra,ba,!1,this.__LOD])},__zoomStart:function(K,S){this.__zooming=!0;this.onZoomStart(K,1,S,this.__LOD?this.__LOD.level:null)},__zoom:function(K,S,ba){this.onZoom(K,S,ba)},__zoomEnd:function(K,S,ba,ra,xa){ea(this._layersDiv,{left:"0px",top:"0px"});this._delta=new fa(0,0);this.__visibleRect.x=this.__visibleRect.y=0;K=new sa(K);this.__LOD=ra;this._ratioW=this.width/K.getWidth();this._ratioH=
this.height/K.getHeight();var La=this._delta;this._delta=null;this.__zooming=!1;this._updateExtent(K,xa);this.onZoomEnd(K,S,ba,ra?ra.level:null);this._fireExtChg([K,La,xa,ra])},_extentUtil:function(K,S,ba,ra,xa){var La=new t,Ha=this.width,Va=this.height;if(K){var Ta=K.numLevels;var Pa=K.targetLevel;var Xa=q.isDefined(Pa);var ab=K.factor;var Ya=K.mapAnchor;var hb=K.screenAnchor;var eb=K.mapCenter;var kb=K.levelOrFactor;var sb=K.targetScale;var qb=q.isDefined(sb)&&0<sb}if(S){var gb=S.dx;var pb=S.dy;
eb=S.mapCenter}r.isArray(eb)&&(eb=new X(eb));var Ab=this._panAnim;S=(K=this._stopAnim())?K.divExtent:this.extent;var Db=this.__tileInfo,xb=this._params;if(!this.loaded){if(ba)S&&(ba=this._convertGeometry(S,ba)),ba&&(this.extent=ba,xb.zoom=xb.scale=-1,xb.center=null);else if(eb||Xa||qb){if(eb)if(S){if(eb=this._convertGeometry(S,eb))this.extent=S.centerAt(eb),xb.center=null}else xb.center=eb;Xa&&-1<Pa?(xb.zoom=Pa,xb.scale=-1):qb&&(xb.scale=sb,xb.zoom=-1)}La.resolve();return La}if(eb&&(eb=this._convertGeometry(this,
eb),!eb)||Ya&&(Ya=this._convertGeometry(this,Ya),!Ya)||ba&&(ba=this._convertGeometry(this,ba),!ba))return La.reject(),La;Ab&&Ya&&hb&&(Ya=la(this.extent,Ha,Va,hb));K&&Ya&&hb&&(Ya=la(K.divExtent,Ha,Va,hb));if(Xa)if(Db)Ta=this.getMinZoom(),Xa=this.getMaxZoom(),Pa<Ta?Pa=Ta:Pa>Xa&&(Pa=Xa),Ta=Pa-(K?K.level:this.getLevel());else{Ta=0<Pa?-1:1;var mb=kb?Pa:null}if(!ba)if(q.isDefined(Ta))Db?(Ha=K?K.level:this.getLevel(),Ha=this.__getExtentForLevel(Ha+Ta,eb,S).extent):(Ha=(K?K.end:this.extent).expand(mb||(0<
Ta?.5*Ta:2*-Ta)),mb&&eb&&(Ha=Ha.centerAt(eb))),Ha&&(eb?ba=Ha:(gb=Ya||S.getCenter(),Va=Ha.getWidth(),pb=Ha.getHeight(),Ha=gb.x>=S.xmin&&gb.x<=S.xmax?(gb.x-S.xmin)/S.getWidth():.5,ba=gb.y>=S.ymin&&gb.y<=S.ymax?(gb.y-S.ymin)/S.getHeight():.5,Ha=gb.x-Ha*Va,gb=gb.y-ba*pb,ba=new sa(Ha,gb,Ha+Va,gb+pb,this.spatialReference)));else if(qb)ba=ma.getExtentForScale(this,sb,S);else if(q.isDefined(ab))ba=S.expand(ab);else if(gb||pb)K?(ba=K.end,Ya=ba.getCenter(),mb=N(ba,Ha,Va,Ya),mb.x+=gb,mb.y+=pb,mb=la(ba,Ha,Va,
mb),ba=ba.offset(mb.x-Ya.x,mb.y-Ya.y)):(gb=new fa(Ha/2+gb,Va/2+pb),gb=la(S,Ha,Va,gb),Va=S.getWidth(),pb=S.getHeight(),Ha=gb.x-Va/2,gb=gb.y-pb/2,ba=new sa(Ha,gb,Ha+Va,gb+pb,this.spatialReference));ba||(eb?(S=K?K.end:S,Va=S.getWidth(),pb=S.getHeight(),Ha=eb.x-Va/2,gb=eb.y-pb/2,ba=new sa(Ha,gb,Ha+Va,gb+pb,this.spatialReference)):K&&(ba=K.end));ba?(this._extentDfd&&-1===this._extentDfd.fired&&(this._extentDfd.then(null,J),this._extentDfd.reject()),this._extentDfd=La,this.__setExtent(ba,null,hb,ra,K,xa)):
La.reject();return La},__setExtent:function(K,S,ba,ra,xa,La){try{if(this._firstLayerId)this.extent=K;else{var Ha=!0,Va=this.spatialReference,Ta=xa?xa.divExtent:this.extent,Pa=this._fixExtent(K,ra||!1);K=Pa.extent;var Xa=K.getWidth(),ab=K.getHeight(),Ya=Math.round;if(Ta){var hb=Ya(1E6*Ta.getWidth()),eb=Ya(1E6*Xa),kb=Ya(1E6*Ta.getHeight()),sb=Ya(1E6*ab);Ha=hb!==eb||kb!==sb}var qb,gb=xa&&xa.rect,pb=xa&&xa.divExtent;if(V.zoomDuration&&Ha&&Ta){pb=pb||new sa(Ta);gb=gb||{left:Ta.xmin,top:Ta.ymax,width:Ta.getWidth(),
height:Ta.getHeight()};var Ab={left:K.xmin,top:K.ymax,width:Xa,height:ab};var Db=new X(K.xmin,K.ymax,Va),xb=new X(K.xmin,K.ymin,Va),mb=new X(this.extent.xmin,this.extent.ymax,Va),Rb=new X(this.extent.xmin,this.extent.ymin,Va);(qb=ka.getLineIntersection(mb,Db,Rb,xb,Va))||xa||(Ha=!1)}this._ratioW=this.width/Xa;this._ratioH=this.height/ab;var tb=this._zoomAnimDiv;if(Ha)if(ea(this._layersDiv,{left:"0px",top:"0px"}),S=new fa(0,0),this.__visibleRect.x=this.__visibleRect.y=0,gb&&Ab){this._delta=S;tb.id=
"_zAD";tb.startingExtent=pb;tb.extent=K;tb.levelChange=Ha;tb.newLod=Pa.lod;tb.anchor=ba?ba:!qb&&xa?xa.anchor:N(this.extent,this.width,this.height,qb);var Gb=this.extent.getWidth()/K.getWidth();V.zoomAnimationThrottled&&1024<(1>Gb?1/Gb:Gb)?(this.__zoomStart(pb,tb.anchor),this.__zoom(pb,1,tb.anchor),this._fireOnScale(1,tb.anchor,!0),this.__zoomEnd(K,Gb,tb.anchor,Pa.lod,Ha)):(this._zoomAnim=B.resize({node:tb,start:gb,end:Ab,duration:V.zoomDuration,rate:V.zoomRate,beforeBegin:xa?null:this._zoomStartHandler,
onAnimate:this._zoomingHandler,onEnd:this._zoomEndHandler}).play(),this._fireOnScale(Gb,tb.anchor,La))}else this._updateExtent(K,Ha,La),this._fireExtChg([this.extent,S,Ha,this.__LOD=Pa.lod]);else if(!this.__panning)if(!1===this.loaded||La)this._updateExtent(K,Ha,La),this._fireExtChg([this.extent,S,Ha,this.__LOD=Pa.lod]);else{this.__panning=!0;gb=(new T(0,0,this.width,this.height,this.spatialReference)).getCenter();gb.x=Ya(gb.x);gb.y=Ya(gb.y);var Kb=this._delta=this.toScreen(K.getCenter()),Ob=Math.abs(gb.x-
Kb.x),Tb=Math.abs(gb.y-Kb.y);this.optimizePanAnimation&&(Ob>2*this.width||Tb>2*this.height)?(this.__panStart(0,0),this.__pan(0,0),this.__visibleRect.x=this.__visibleRect.y=this.__visibleDelta.x=this.__visibleDelta.y=0,this.__panning=!1,this._delta=null,this._updateExtent(K,!1,La),this.onPanEnd(this.extent,new fa(0,0)),this._fireExtChg([this.extent,new fa(0,0),!0,this.__LOD])):(this.onPanStart(this.extent,new fa(0,0)),this._panAnim=B.slideTo({node:tb,left:gb.x-Kb.x,top:gb.y-Kb.y,duration:V.panDuration,
rate:V.panRate,onAnimate:this._panningHandler,onEnd:this._panEndHandler}),this._panAnim.play())}}}catch(Eb){console.log(Eb.stack),console.error(Eb)}},_fireOnScale:function(K,S,ba){if("css-transforms"===this.navigationMode){var ra=this.__visibleDelta;this.onScale(p.scaleAt(K,{x:-1*(this.width/2-(S.x-ra.x)),y:-1*(this.height/2-(S.y-ra.y))}),ba)}},_stopAnim:function(){var K=this._zoomAnim,S=this._panAnim;if(K&&K._active){K.stop();S=K.curve.getValue(K._getStep());var ba=parseFloat(S.left),ra=parseFloat(S.top);
K=K.node;return{anchor:K.anchor,start:K.startingExtent,end:K.extent,level:K.newLod&&K.newLod.level,rect:S,divExtent:new sa(ba,ra-parseFloat(S.height),ba+parseFloat(S.width),ra,this.spatialReference)}}S&&S._active&&(S.stop(),S._fire("onEnd",[S.node]))},__getExtentForLevel:function(K,S,ba){var ra=this.__tileInfo;ra=ra&&ra.lods;K=q.isDefined(K)?K:0;ba=ba||this.extent;S=S||ba&&ba.getCenter();if(ra){if(S){ba=this.getMinZoom();var xa=this.getMaxZoom();K>xa&&(K=xa);K<ba&&(K=ba);K=ra[K];ra=this.width*K.resolution/
2;ba=this.height*K.resolution/2;return{extent:new sa(S.x-ra,S.y-ba,S.x+ra,S.y+ba,S.spatialReference),lod:K}}}else if(ba)return{extent:ba.expand(!K||1>K?1:K).centerAt(S)};console.log("Map: "+this.invalidExtent)},_jobs:0,_incr:function(){1===++this._jobs&&(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart())},_decr:function(){var K=--this._jobs;K?0>K&&(this._jobs=0):(this.updating=!1,this.attr("data-updating"),this.onUpdateEnd())},_fireEvent:function(K,S){this[K]&&this[K].apply(this,
S)},_updateExtent:function(K,S,ba){this.extent=K;K=this.spatialReference;this._viewInfo={view:new Y({viewingMode:"map",scale:this.getScale()}),sr:K,version:S?++U:U};(S||ba)&&this._setClipRect();this._calcGeographicExtent()},_calcGeographicExtent:function(){var K=this.spatialReference;K&&(K.isWebMercator()?this.geographicExtent=ja.webMercatorToGeographic(this._getAvailExtent(),!0):4326===K.wkid&&(this.geographicExtent=new sa(this._getAvailExtent().toJson())))},_fireExtChg:function(K){this.attr("data-zoom",
this.getZoom());this.attr("data-scale",this.getScale());this._fireEvent("onExtentChange",K);if(K=this._extentDfd)delete this._extentDfd,K.resolve()},attr:function(K,S){var ba=this.container;ba&&(null==S?ba.removeAttribute(K):ba.setAttribute(K,S));return this},onUpdateStart:function(){},onUpdateEnd:function(){},onLoad:function(){this._setClipRect();this._calcGeographicExtent()},onBeforeUnload:function(){},onUnload:function(){},onExtentChange:function(K,S,ba){},onTimeExtentChange:function(){},onWebGLEnabledChange:function(){},
onLayerAdd:function(){},onLayerAddResult:function(){},onLayersAddResult:function(){},onLayerRemove:function(){},onLayersRemoved:function(){},onLayerReorder:function(){},onLayersReordered:function(){},onLayerSuspend:function(){},onLayerResume:function(){},onPanStart:function(){},onPan:function(){},onPanEnd:function(){},onScale:function(){},onZoomStart:function(){},onZoom:function(){},onZoomEnd:function(){},onResize:function(){this._setClipRect()},onReposition:function(){},destroy:function(){this._destroyed||
(this.onBeforeUnload(this),this.removeAllLayers(),this.releaseAllWebGLContexts(),this._cleanUp(),clearTimeout(this._resizeTimerHandle),this._gc&&this._gc._cleanUp(),this._destroyed=!0,this.onUnload(this))},setCursor:function(K){ea(this.__container,"cursor",this.cursor=K)},setMapCursor:function(K){this.setCursor(this._cursor=K)},resetMapCursor:function(){this.setCursor(this._cursor)},setBackgroundColor:function(K){K&&!K.declaredClass&&(K=new I(K));this.backgroundColor=K||null;var S="";K&&(S=9>m("ie")?
K.toHex():"rgba("+K.toRgba().join(",")+")");k.set(this.root,{backgroundColor:S})},setInfoWindow:function(K){var S=this.infoWindow;S&&S.unsetMap(this);this.infoWindow=K;this.loaded&&K&&K.setMap(this)},setInfoWindowOnClick:function(K){this._params.showInfoWindowOnClick=K;this.popupManager&&this.popupManager.set("enabled",K)},getInfoWindowAnchor:function(K){return this.infoWindow&&this.infoWindow._getAnchor&&this.infoWindow._getAnchor(K)||"upperright"},toScreen:function(K,S){return N(this.extent,this.width,
this.height,K,S)},toMap:function(K){return la(this.extent,this.width,this.height,K)},addLayer:function(K,S){K&&!this.getLayer(K.id)&&this._addLayer(K,K instanceof ua?this.graphicsLayerIds:this.layerIds,S);return K},addLayers:function(K){var S=[],ba=K.length,ra,xa=K.length;var La=n.connect(this,"onLayerAddResult",function(Ha,Va){-1!==l.indexOf(K,Ha)&&(ba--,S.push({layer:Ha,success:!Va,error:Va}),ba||(n.disconnect(La),this.onLayersAddResult(S)))});for(ra=0;ra<xa;ra++)this.addLayer(K[ra]);return this},
removeLayer:function(K,S){var ba=K.id,ra=K instanceof ua?this.graphicsLayerIds:this.layerIds,xa=oa(ra,ba);0<=xa&&(this._forgetLayer(K),ra.splice(xa,1),this.loaded||this._firstLayerId!==ba||(this._firstLayerId=null),K instanceof ua?this._detachGraphicsLayer(K):K.loaded&&(K.getMap()&&K._unsetMap(this,this._layersDiv),-1!==K.declaredClass.indexOf("VETiledLayer")&&this._onBingLayerRemove(K)),delete this._layers[ba],delete this._layerDivs[ba],S||this._reorderLayers(ra),this.onLayerRemove(K))},removeAllLayers:function(){var K=
this.layerIds,S;for(S=K.length-1;0<=S;S--)this.removeLayer(this._layers[K[S]],1);K=this.graphicsLayerIds;for(S=K.length-1;0<=S;S--)this.removeLayer(this._layers[K[S]],1);this.onLayersRemoved()},reorderLayer:function(K,S){r.isString(K)&&(a.deprecated(this.declaredClass+": Map.reorderLayer(/*String*/ id, /*Number*/ index) deprecated. Use Map.reorderLayer(/*Layer*/ layer, /*Number*/ index).",null,"v2.0"),K=this.getLayer(K));var ba=K.id,ra=K instanceof ua?this.graphicsLayerIds:this.layerIds;0>S?S=0:S>=
ra.length&&(S=ra.length-1);K=oa(ra,ba);-1!==K&&K!==S&&(ra.splice(K,1),ra.splice(S,0,ba),this._reorderLayers(ra))},getLayer:function(K){return this._layers[K]},setWebGLEnabled:function(K){var S=this.webglEnabled;this.webglEnabled=(K||!1)&&ha;if(S!==this.webglEnabled)this.onWebGLEnabledChange()},isWebGLContextAvailable:function(){return ya.isContextAvailable()&&(-1===this.maxWebGLContexts||0<this.maxWebGLContexts&&this._webglContextOwners.length<this.maxWebGLContexts)},ownsWebGLContext:function(K){return-1!==
l.indexOf(this._webglContextOwners,K)},acquireWebGLContext:function(K){return-1!==l.indexOf(this._webglContextOwners,K)?!0:this.isWebGLContextAvailable()?(ya.acquireContext(K),this._webglContextOwners.push(K),!0):!1},releaseWebGLContext:function(K){var S=l.indexOf(this._webglContextOwners,K);-1!==S&&this._webglContextOwners.splice(S,1);ya.releaseContext(K)},releaseAllWebGLContexts:function(){var K=this._webglContextOwners.slice(0);l.forEach(K,function(S){this.releaseWebGLContext(S)},this)},syncHitTestForWebGL:function(K){var S,
ba=K.screenPoint;K=this.graphicsLayerIds.slice(0).reverse();l.some(K,function(ra){ra=this.getLayer(ra);ra.loaded&&!ra.suspended&&ra.hasWebGLSurface()&&(S=ra._div.syncHitTest(ba.x,ba.y));return!!S},this);return S},setExtent:function(K,S){K=new sa(K.toJson());var ba=K.getWidth(),ra=K.getHeight();return 0===ba&&0===ra?this.centerAt(new X({x:K.xmin,y:K.ymin,spatialReference:K.spatialReference&&K.spatialReference.toJson()})):this._extentUtil(null,null,K,S)},getTargetExtent:function(K){if(K)return K=new sa(K.toJson()),
0!==K.getWidth()&&0!==K.getHeight()&&(K=(K=this._convertGeometry(this,K))&&this._fixExtent(K).extent),K},centerAt:function(K){return this._extentUtil(null,{mapCenter:K})},centerAndZoom:function(K,S){return this._extentUtil({targetLevel:S,mapCenter:K,levelOrFactor:!0})},getScale:function(){return this.__LOD?this.__LOD.scale:ma.getScale(this)},getResolution:function(){return this.__LOD?this.__LOD.resolution:this.extent?this.extent.getWidth()/this.width:0},getResolutionInMeters:function(){return this.getResolution()*
ma.getUnitValueForSR(this.spatialReference)},getResolutionForPopup:function(){var K=this.getResolution(),S=this.getResolutionInMeters(),ba=S/16;return 10>=ba?0:K/S*ba},getMinResolution:function(){return this._minResolution},getMaxResolution:function(){return this._maxResolution},getMinScale:function(){return this._params.minScale},getMaxScale:function(){return this._params.maxScale},getViewInfo:function(){return this._viewInfo},setScale:function(K){return this._extentUtil({targetScale:K})},getLayersVisibleAtScale:function(K){var S=
[];(K=K||this.getScale())&&l.forEach(this.layerIds.concat(this.graphicsLayerIds),function(ba){ba=this.getLayer(ba);ba.isVisibleAtScale(K)&&S.push(ba)},this);return S},getNumLevels:function(){var K=this.getMinZoom(),S=this.getMaxZoom();return K===S&&0>K?0:S-K+1},getLevel:function(){return this.__LOD?this.__LOD.level:-1},setLevel:function(K){if(-1<K)return this._extentUtil({targetLevel:K})},getZoom:function(){return this.getLevel()},setZoom:function(K){return this.setLevel(K)},getMinZoom:function(){return this._params.minZoom},
getMaxZoom:function(){return this._params.maxZoom},setBasemap:function(K){if(r.isObject(K)){var S=K;K=S.title}else S=z&&z[K];if(S){this._basemapDfd&&!this._basemapDfd.isFulfilled()&&this._basemapDfd.cancel();var ba=[],ra=0;l.forEach(S.baseMapLayers||S.layers,function(La){var Ha={id:La.id,displayLevels:La.displayLevels,opacity:q.isDefined(La.opacity)?La.opacity:null,visible:q.isDefined(La.visibility)?La.visibility:null};if(Ha=this._createBaseLayerInstance(La,Ha,K))ba.push(Ha),La.isReference||ra++},
this);ba.length&&ra?(this._basemapDfd=L(ba).otherwise(ca(this,function(La){this._basemapPending=!1;La&&"cancel"===La.dojoType&&l.forEach(ba,function(Ha){Ha.cancel()});throw La;})).then(function(La){var Ha=[],Va=[];l.forEach(La,function(Ta){Ta&&(Ta.layerInfo&&Ha.push(Ta.layerInfo),Ta.layer&&Va.push(Ta.layer))});return{basemapName:K,infos:Ha,layers:Va}}).then(ca(this,this._waitForBaseLayers)).then(ca(this,this._setBasemap)),this._basemapPending=!this.loaded&&!this._basemapDfd.isFulfilled()):console.log("Map.setBasemap: "+
q.substitute({basemapName:K},this.invalidBasemap))}else{S=[];for(var xa in z)S.push(xa);console.log("Map.setBasemap: "+q.substitute({basemapName:K,list:S.join(",")},this.unknownBasemap))}},_createBaseLayerInstance:function(K,S,ba){var ra=new t;if(K.type)switch(K.type){case "OpenStreetMap":ra.resolve({layerInfo:K,layer:new qa(S)});break;case "VectorTile":F(["./layers/VectorTileLayer"],function(La){xa=E.normalize(K.url);ra.promise.isFulfilled()||ra.resolve({layerInfo:K,layer:new La(xa,S)})});break;
default:return console.log("Map.setBasemap: "+q.substitute({basemapName:ba,type:K.type},this.unknownLayerType)),null}else{var xa=E.normalize(K.url);ra.resolve({layerInfo:K,layer:new Z(xa,S)})}return ra.promise},_waitForBaseLayers:function(K){var S=new t(D._dfdCanceller);S.promise.otherwise(function(ra){if(ra&&"cancel"===ra.dojoType){for(var xa in S._layerEvents)ra=S._layerEvents[xa],n.disconnect(ra[0]),n.disconnect(ra[1]);delete S._layerEvents}});if(!this.loaded)return S.resolve(K),S.promise;var ba=
function(ra){S._pendingLayers--;ra=l.indexOf(K.layers,this);-1<ra&&(ra=S._layerEvents[ra])&&(n.disconnect(ra[0]),n.disconnect(ra[1]));0>=S._pendingLayers&&(delete S._layerEvents,S.isFulfilled()||S.resolve(K))};S._pendingLayers=0;S._layerEvents={};l.forEach(K.layers,function(ra,xa){ra&&S._pendingLayers++});l.forEach(K.layers,function(ra,xa){ra&&(ra.loaded?ba(ra):S._layerEvents[xa]=[n.connect(ra,"onLoad",ra,ba),n.connect(ra,"onError",ra,ba)])});return S.promise},_setBasemap:function(K){var S=K.layers,
ba=K.infos,ra=0,xa=!0;this._basemapPending=!1;this.loaded&&(l.forEach(S,function(Ha,Va){Ha.loaded&&(ba[Va].isReference||ra++)}),xa=ra);if(xa){if(xa=this._getBasemapLayerIds()){var La={basemapName:this._basemap,infos:z&&z[this._basemap]&&z[this._basemap].baseMapLayers};La.basemapName||(l.forEach(xa,function(Ha){if(this.getLayer(Ha)instanceof qa)return La.basemapName="osm",La.infos=z&&z.osm&&z.osm.baseMapLayers,!1},this),La.basemapName||(La=null))}this._removeBasemap(xa);this._basemap=K.basemapName;
this.basemapLayerIds=this._addBasemapLayers(S,ba);this.attr("data-basemap",this.getBasemap());this.emit("basemap-change",{current:K,previous:La})}},_getBasemapLayerIds:function(){var K=[];l.forEach(this.layerIds,function(S){S=this.getLayer(S);S._basemapGalleryLayerType&&K.push(S.id)},this);return K},_addBasemapLayers:function(K,S){var ba=[],ra=[],xa=0;l.forEach(K,function(La,Ha){S[Ha].isReference?ba.push(La):(La._basemapGalleryLayerType="basemap",this.addLayer(La,xa++),ra.push(La.id))},this);ba.length&&
l.forEach(ba,function(La){La.attr("data-reference",!0);La._basemapGalleryLayerType="reference";this.addLayer(La,"top");ra.push(La.id)},this);return ra},_removeBasemap:function(K){l.forEach(K,function(S){(S=this.getLayer(S))&&this.removeLayer(S)},this)},getBasemap:function(){return this._basemap||""},translate:function(K,S){K=K||0;S=S||0;if(!this._txTimer){this._tx=this._ty=0;var ba=this.toScreen(this.extent.getCenter());this.__panStart(ba.x,ba.y)}this._tx+=K;this._ty+=S;this.__pan(this._tx,this._ty);
clearTimeout(this._txTimer);this._txTimer=setTimeout(this._endTranslate,150)},_endTranslate:function(){clearTimeout(this._txTimer);this._txTimer=null;var K=this._tx,S=this._ty;this._tx=this._ty=0;this.__panEnd(K,S)},setTimeExtent:function(K){K=(this.timeExtent=K)?new K.constructor(K.toJson()):null;this.onTimeExtentChange(K)},setTimeSlider:function(K){this.timeSlider&&(na(this._tsTimeExtentChange_connect),this.timeSlider=this._tsTimeExtentChange_connect=null);K&&(this.timeSlider=K,this.setTimeExtent(K.getCurrentTimeExtent()),
this._tsTimeExtentChange_connect=aa(K,"onTimeExtentChange",this,"setTimeExtent"))},setVisibility:function(K){if(this.visible!==K){this.visible=K;K||(this._display=this.container.style.display);this.container.style.display=K?this._display:"none";if(this.autoResize){var S=K?"resume":"pause";this._rszSignal[S]();this._oriSignal[S]()}K&&this.resize()}return this},resize:function(K){clearTimeout(this._resizeTimerHandle);this._destroyed||(!0===K?this._execResize():this._resizeTimerHandle=setTimeout(this._execResize,
this.resizeDelay))},_timedResize:function(){this._resizeTimerHandle||this._execResize()},_execResize:function(){clearTimeout(this._resizeTimerHandle);this._resizeTimerHandle=null;this.reposition();this._resize();this.autoResize&&this._startResizeTimer()},_resize:function(){var K=this.width,S=this.height,ba=k.get(this.container,"display"),ra=h.getContentBox(this.container);if(!("none"===ba||0>=ra.w||0>=ra.h||K===ra.w&&S===ra.h)){if(ba=this._zoomAnim||this._panAnim)ba.stop(),ba._fire("onEnd",[ba.node]);
ea(this.root,{width:(this.width=ra.w)+"px",height:(this.height=ra.h)+"px"});ra=this.width;ba=this.height;this.attribution&&this.attribution.domNode&&k.set(this.attribution.domNode,"maxWidth",Math.floor(ra*this._mapParams.attributionWidth)+"px");this.__visibleRect.update(this.__visibleRect.x,this.__visibleRect.y,ra,ba);this.__visibleDelta.update(this.__visibleDelta.x,this.__visibleDelta.y,ra,ba);var xa=new T(this.extent);K=(new T(xa.x,xa.y,ra/K*xa.width,ba/S*xa.height,this.spatialReference)).getExtent();
this.onResize(K,ra,ba);this._extentUtil(null,null,K,null,!0)}},reposition:function(){var K=this.position,S=K.x,ba=K.y;this._reposition();K=this.position;if(S!==K.x||ba!==K.y)this.onReposition(K.x,K.y)},_reposition:function(){var K=h.position(this.container,!0),S=h.getPadBorderExtents(this.container);this.position.update(K.x+S.l,K.y+S.t)},_setClipRect:function(){delete this._clip;var K=7>=m("ie")||void 0===m("ie")&&7<=m("trident")?"rect(auto,auto,auto,auto)":"auto";if(this.wrapAround180){var S=this.width,
ba=this.height,ra=this._getFrameWidth(),xa=S-ra;0<xa&&(K=xa/2,K="rect(0px,"+(K+ra)+"px,"+ba+"px,"+K+"px)",ba=this.extent.getWidth(),S=ra/S*ba,this._clip=[(ba-S)/2,S])}ea(this.__container,"clip",K)},_getAvailExtent:function(){var K=this.extent,S=this._clip;if(S){if(!K._clip){var ba=new T(K);ba.width=S[1];ba.x+=S[0];K._clip=ba.getExtent()}return K._clip}return K},_fixedPan:function(K,S){return this._extentUtil(null,{dx:K,dy:S})},panUp:function(){return this._fixedPan(0,-.75*this.height)},panUpperRight:function(){return this._fixedPan(.75*
this.width,-.75*this.height)},panRight:function(){return this._fixedPan(.75*this.width,0)},panLowerRight:function(){return this._fixedPan(.75*this.width,.75*this.height)},panDown:function(){return this._fixedPan(0,.75*this.height)},panLowerLeft:function(){return this._fixedPan(-.75*this.width,.75*this.height)},panLeft:function(){return this._fixedPan(-.75*this.width,0)},panUpperLeft:function(){return this._fixedPan(-.75*this.width,-.75*this.height)},enableSnapping:function(K){K=K||{};if("esri.SnappingManager"===
K.declaredClass)this.snappingManager=K;else{var S=O++,ba=this;this._rids&&this._rids.push(S);F(["./SnappingManager"],function(ra){var xa=ba._rids?l.indexOf(ba._rids,S):-1;-1!==xa&&(ba._rids.splice(xa,1),ba.snappingManager=new ra(r.mixin({map:ba},K)))})}return this.snappingManager},disableSnapping:function(){this.snappingManager&&this.snappingManager.destroy();this.snappingManager=null},_createLabelLayer:function(){!this._labels&&Oa&&this.loaded&&(this._labels=new Oa({id:"_internal_LabelLayer"}),this._labels._setMap(this,
this._gc._surface),this._processLabelLayers(),this.on("layers-reordered",this._processLabelLayers))},_processLabelLayers:function(){null==this._labelProcessor&&(this._labelProcessor=setTimeout(this._updateLabelLayers,0))},_updateLabelLayers:function(){this._labelProcessor=null;this._labels&&(this._labels.removeAllFeatureLayers(),l.forEach(this.graphicsLayerIds,function(K){K=this.getLayer(K);"function"===typeof K.applyEdits?this._labels.addFeatureLayer(K):"esri.layers.WFSLayer"===K.declaredClass&&
this._labels.addFeatureLayer(K)},this))},_getMapImageLyr:function(){this.loaded&&!this._mapImageLyr&&(this._mapImageLyr=new ia,this._mapImageLyr._setMap(this,this._layersDiv),this._placeMapImageLyr());return this._mapImageLyr},_placeMapImageLyr:function(){for(var K=this.layerIds,S=this._layerDivs,ba=!1,ra,xa,La=K.length-1;0<=La;La--)if(ra=K[La],xa=this.getLayer(ra),ra=S[ra],xa&&ra&&!xa._isReference){e.place(this._mapImageLyr._div,ra,"after");ba=!0;break}ba||e.place(this._mapImageLyr._div,this._layersDiv,
"first")}});m("extend-esri")&&(A._CoreMap=u);return u})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(F,y){var a=F.matrix={},u={};a._degToRad=function(n){return u[n]||(u[n]=Math.PI*n/180)};a._radToDeg=function(n){return n/Math.PI*180};a.Matrix2D=function(n){if(n)if("number"==typeof n)this.xx=this.yy=n;else if(n instanceof Array){if(0<n.length){for(var t=a.normalize(n[0]),r=1;r<n.length;++r){var l=t,d=a.normalize(n[r]);t=new a.Matrix2D;t.xx=l.xx*d.xx+l.xy*d.yx;t.xy=l.xx*
d.xy+l.xy*d.yy;t.yx=l.yx*d.xx+l.yy*d.yx;t.yy=l.yx*d.xy+l.yy*d.yy;t.dx=l.xx*d.dx+l.xy*d.dy+l.dx;t.dy=l.yx*d.dx+l.yy*d.dy+l.dy}y.mixin(this,t)}}else y.mixin(this,n)};y.extend(a.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});y.mixin(a,{identity:new a.Matrix2D,flipX:new a.Matrix2D({xx:-1}),flipY:new a.Matrix2D({yy:-1}),flipXY:new a.Matrix2D({xx:-1,yy:-1}),translate:function(n,t){return 1<arguments.length?new a.Matrix2D({dx:n,dy:t}):new a.Matrix2D({dx:n.x,dy:n.y})},scale:function(n,t){return 1<arguments.length?
new a.Matrix2D({xx:n,yy:t}):"number"==typeof n?new a.Matrix2D({xx:n,yy:n}):new a.Matrix2D({xx:n.x,yy:n.y})},rotate:function(n){var t=Math.cos(n);n=Math.sin(n);return new a.Matrix2D({xx:t,xy:-n,yx:n,yy:t})},rotateg:function(n){return a.rotate(a._degToRad(n))},skewX:function(n){return new a.Matrix2D({xy:Math.tan(n)})},skewXg:function(n){return a.skewX(a._degToRad(n))},skewY:function(n){return new a.Matrix2D({yx:Math.tan(n)})},skewYg:function(n){return a.skewY(a._degToRad(n))},reflect:function(n,t){1==
arguments.length&&(t=n.y,n=n.x);var r=n*n,l=t*t,d=r+l,f=2*n*t/d;return new a.Matrix2D({xx:2*r/d-1,xy:f,yx:f,yy:2*l/d-1})},project:function(n,t){1==arguments.length&&(t=n.y,n=n.x);var r=n*n,l=t*t,d=r+l,f=n*t/d;return new a.Matrix2D({xx:r/d,xy:f,yx:f,yy:l/d})},normalize:function(n){return n instanceof a.Matrix2D?n:new a.Matrix2D(n)},isIdentity:function(n){return 1==n.xx&&0==n.xy&&0==n.yx&&1==n.yy&&0==n.dx&&0==n.dy},clone:function(n){var t=new a.Matrix2D,r;for(r in n)"number"==typeof n[r]&&"number"==
typeof t[r]&&t[r]!=n[r]&&(t[r]=n[r]);return t},invert:function(n){n=a.normalize(n);var t=n.xx*n.yy-n.xy*n.yx;return n=new a.Matrix2D({xx:n.yy/t,xy:-n.xy/t,yx:-n.yx/t,yy:n.xx/t,dx:(n.xy*n.dy-n.yy*n.dx)/t,dy:(n.yx*n.dx-n.xx*n.dy)/t})},_multiplyPoint:function(n,t,r){return{x:n.xx*t+n.xy*r+n.dx,y:n.yx*t+n.yy*r+n.dy}},multiplyPoint:function(n,t,r){n=a.normalize(n);return"number"==typeof t&&"number"==typeof r?a._multiplyPoint(n,t,r):a._multiplyPoint(n,t.x,t.y)},multiplyRectangle:function(n,t){var r=a.normalize(n);
t=t||{x:0,y:0,width:0,height:0};if(a.isIdentity(r))return{x:t.x,y:t.y,width:t.width,height:t.height};n=a.multiplyPoint(r,t.x,t.y);var l=a.multiplyPoint(r,t.x,t.y+t.height),d=a.multiplyPoint(r,t.x+t.width,t.y);t=a.multiplyPoint(r,t.x+t.width,t.y+t.height);r=Math.min(n.x,l.x,d.x,t.x);var f=Math.min(n.y,l.y,d.y,t.y);return{x:r,y:f,width:Math.max(n.x,l.x,d.x,t.x)-r,height:Math.max(n.y,l.y,d.y,t.y)-f}},multiply:function(n){for(var t=a.normalize(n),r=1;r<arguments.length;++r){var l=t,d=a.normalize(arguments[r]);
t=new a.Matrix2D;t.xx=l.xx*d.xx+l.xy*d.yx;t.xy=l.xx*d.xy+l.xy*d.yy;t.yx=l.yx*d.xx+l.yy*d.yx;t.yy=l.yx*d.xy+l.yy*d.yy;t.dx=l.xx*d.dx+l.xy*d.dy+l.dx;t.dy=l.yx*d.dx+l.yy*d.dy+l.dy}return t},_sandwich:function(n,t,r){return a.multiply(a.translate(t,r),n,a.translate(-t,-r))},scaleAt:function(n,t,r,l){switch(arguments.length){case 4:return a._sandwich(a.scale(n,t),r,l);case 3:return"number"==typeof r?a._sandwich(a.scale(n),t,r):a._sandwich(a.scale(n,t),r.x,r.y)}return a._sandwich(a.scale(n),t.x,t.y)},rotateAt:function(n,
t,r){return 2<arguments.length?a._sandwich(a.rotate(n),t,r):a._sandwich(a.rotate(n),t.x,t.y)},rotategAt:function(n,t,r){return 2<arguments.length?a._sandwich(a.rotateg(n),t,r):a._sandwich(a.rotateg(n),t.x,t.y)},skewXAt:function(n,t,r){return 2<arguments.length?a._sandwich(a.skewX(n),t,r):a._sandwich(a.skewX(n),t.x,t.y)},skewXgAt:function(n,t,r){return 2<arguments.length?a._sandwich(a.skewXg(n),t,r):a._sandwich(a.skewXg(n),t.x,t.y)},skewYAt:function(n,t,r){return 2<arguments.length?a._sandwich(a.skewY(n),
t,r):a._sandwich(a.skewY(n),t.x,t.y)},skewYgAt:function(n,t,r){return 2<arguments.length?a._sandwich(a.skewYg(n),t,r):a._sandwich(a.skewYg(n),t.x,t.y)}});F.Matrix2D=a.Matrix2D;return a})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),function(F,y,a,u,n,t,r,l,d){var f=y.getObject("dojox.gfx",!0),b=f._base={};f._hasClass=function(m,w){return(m=m.getAttribute("className"))&&
0<=(" "+m+" ").indexOf(" "+w+" ")};f._addClass=function(m,w){var p=m.getAttribute("className")||"";(!p||0>(" "+p+" ").indexOf(" "+w+" "))&&m.setAttribute("className",p+(p?" ":"")+w)};f._removeClass=function(m,w){var p=m.getAttribute("className");p&&m.setAttribute("className",p.replace(new RegExp("(^|\\s+)"+w+"(\\s+|$)"),"$1$2"))};b._getFontMeasurements=function(){var m={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},w;if(u("ie")){var p=
n.doc.documentElement.style.fontSize||"";p||(n.doc.documentElement.style.fontSize="100%")}var A=l.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},n.body());for(w in m)A.style.fontSize=w,m[w]=16*Math.round(12*A.offsetHeight/16)/12/1E3;u("ie")&&(n.doc.documentElement.style.fontSize=p);n.body().removeChild(A);return m};var c=null;b._getCachedFontMeasurements=function(m){if(m||
!c)c=b._getFontMeasurements();return c};var g=null,e={};b._getTextBox=function(m,w,p){var A=arguments.length,C;g||(g=l.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},n.body()));var z=g;z.className="";var q=z.style;q.borderWidth="0";q.margin="0";q.padding="0";q.outline="0";if(1<A&&w)for(C in w)C in e||(q[C]=w[C]);2<A&&p&&(z.className=p);z.innerHTML=m;z.getBoundingClientRect?(q=z.getBoundingClientRect(),q={l:q.left,t:q.top,w:q.width||q.right-q.left,h:q.height||
q.bottom-q.top}):q=d.getMarginBox(z);z.innerHTML="";return q};b._computeTextLocation=function(m,w,p,A){var C={};switch(m.align){case "end":C.x=m.x-w;break;case "middle":C.x=m.x-w/2;break;default:C.x=m.x}C.y=m.y-p*(A?.75:1);return C};b._computeTextBoundingBox=function(m){if(!f._base._isRendered(m))return{x:0,y:0,width:0,height:0};var w=m.getShape();var p=m.getFont()||f.defaultFont;m=m.getTextWidth();p=f.normalizedLength(p.size);w=b._computeTextLocation(w,m,p,!0);return{x:w.x,y:w.y,width:m,height:p}};
b._isRendered=function(m){for(m=m.parent;m&&m.getParent;)m=m.parent;return null!==m};var h=0;b._getUniqueId=function(){do var m=F._scopeName+"xUnique"+ ++h;while(r.byId(m));return m};var k=u("pointer-events")?"touchAction":u("MSPointer")?"msTouchAction":null;b._fixMsTouchAction=k?function(m){m.rawNode.style[k]="none"}:function(){};y.mixin(f,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",
cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,
x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var m={};return function(w){var p=m[w];if(p)return new p;p=m[w]=function(){};p.prototype=f["default"+w];return new p}}(),normalizeColor:function(m){return m instanceof
a?m:new a(m)},normalizeParameters:function(m,w){var p;if(w){var A={};for(p in m)p in w&&!(p in A)&&(m[p]=w[p])}return m},makeParameters:function(m,w){var p=null;if(!w)return y.delegate(m);var A={};for(p in m)p in A||(A[p]=y.clone(p in w?w[p]:m[p]));return A},formatNumber:function(m,w){var p=m.toString();if(0<=p.indexOf("e"))p=m.toFixed(4);else{var A=p.indexOf(".");0<=A&&5<p.length-A&&(p=m.toFixed(4))}return 0>m?p:w?" "+p:p},makeFontString:function(m){return m.style+" "+m.variant+" "+m.weight+" "+
m.size+" "+m.family},splitFontString:function(m){var w=f.getDefault("Font");m=m.split(/\s+/);if(!(5>m.length)){w.style=m[0];w.variant=m[1];w.weight=m[2];var p=m[3].indexOf("/");w.size=0>p?m[3]:m[3].substring(0,p);var A=4;0>p&&("/"==m[4]?A=6:"/"==m[4].charAt(0)&&(A=5));A<m.length&&(w.family=m.slice(A).join(" "))}return w},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return f._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(m){return m*f.px_in_pt()},px2pt:function(m){return m/
f.px_in_pt()},normalizedLength:function(m){if(0===m.length)return 0;if(2<m.length){var w=f.px_in_pt(),p=parseFloat(m);switch(m.slice(-2)){case "px":return p;case "pt":return p*w;case "in":return 72*p*w;case "pc":return 12*p*w;case "mm":return p*f.mm_in_pt*w;case "cm":return p*f.cm_in_pt*w}}return parseFloat(m)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,equalSources:function(m,w){return m&&w&&m===
w},switchTo:function(m){var w="string"==typeof m?f[m]:m;w&&(t.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath Surface createSurface fixTarget".split(" "),function(p){f[p]=w[p]}),"string"==typeof m?f.renderer=m:t.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(p){return f.renderer=f[p]&&f[p].Surface===f.Surface?p:null}))}});return f})},"esri/basemaps":function(){define(["require","dojo/has","./kernel","dojo/i18n!./nls/jsapi"],function(F,y,a,u){F={streets:{title:u.basemaps.streets,
thumbnailUrl:F.toUrl("./images/basemap/streets.jpg"),itemId:"d8855ee4d3d74413babfb0f41203b168",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]},satellite:{title:u.basemaps.satellite,thumbnailUrl:F.toUrl("./images/basemap/satellite.jpg"),itemId:"86de95d4e0244cba80f0fa2c9403a7b2",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]},hybrid:{title:u.basemaps.hybrid,thumbnailUrl:F.toUrl("./images/basemap/hybrid.jpg"),
itemId:"413fd05bbd7342f5991d5ec96f4f8b18",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",isReference:!0}]},terrain:{title:u.basemaps.terrain,thumbnailUrl:F.toUrl("./images/basemap/terrain.jpg"),itemId:"aab054ab883c4a4094c72e949566ad40",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer"},
{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",isReference:!0}]},topo:{title:u.basemaps.topo,thumbnailUrl:F.toUrl("./images/basemap/topo.jpg"),itemId:"6e03e8c26aad4b9c92a87c1063ddb0e3",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}]},gray:{title:u.basemaps.gray,thumbnailUrl:F.toUrl("./images/basemap/gray.jpg"),itemId:"8b3b470883a744aeb60e5fff0a319ce7",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"},
{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",isReference:!0}]},"dark-gray":{title:u.basemaps["dark-gray"],thumbnailUrl:F.toUrl("./images/basemap/dark-gray.jpg"),itemId:"da65bacab5bd4defb576f839b6b28098",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",isReference:!0}]},
oceans:{title:u.basemaps.oceans,thumbnailUrl:F.toUrl("./images/basemap/oceans.jpg"),itemId:"48b8cec7ebf04b5fbdcaf70d09daff21",baseMapLayers:[{url:"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{url:"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",isReference:!0}]},"national-geographic":{title:u.basemaps["national-geographic"],thumbnailUrl:F.toUrl("./images/basemap/national-geographic.jpg"),itemId:"509e2d6b034246d692a461724ae2d62c",
baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"}]},osm:{title:u.basemaps.osm,thumbnailUrl:F.toUrl("./images/basemap/osm.jpg"),itemId:"5d2bfa736f8448b3a1708e1f6be23eed",baseMapLayers:[{type:"OpenStreetMap"}]},"dark-gray-vector":{title:u.basemaps["dark-gray"],thumbnailUrl:F.toUrl("./images/basemap/dark-gray.jpg"),itemId:"c11ce4f7801740b2905eb03ddc963ac8",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/c11ce4f7801740b2905eb03ddc963ac8/resources/styles/root.json",
type:"VectorTile"}]},"gray-vector":{title:u.basemaps.gray,thumbnailUrl:F.toUrl("./images/basemap/gray.jpg"),itemId:"8a2cba3b0ebf4140b7c0dc5ee149549a",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/8a2cba3b0ebf4140b7c0dc5ee149549a/resources/styles/root.json",type:"VectorTile"}]},"streets-vector":{title:u.basemaps.streets,thumbnailUrl:F.toUrl("./images/basemap/streets.jpg"),itemId:"de26a3cf4cc9451298ea173c4b324736",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",
type:"VectorTile"}]},"topo-vector":{title:u.basemaps.topo,thumbnailUrl:F.toUrl("./images/basemap/topo.jpg"),itemId:"7dc6cea0b1764a1f9af2e679f642f0f5",baseMapLayers:[{url:"https://services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{url:"https://www.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",type:"VectorTile"}]},"streets-night-vector":{title:u.basemaps["streets-night-vector"],thumbnailUrl:F.toUrl("./images/basemap/streets-night.jpg"),
itemId:"86f556a2d1fd468181855a35e344567f",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",type:"VectorTile"}]},"streets-relief-vector":{title:u.basemaps["streets-relief-vector"],thumbnailUrl:F.toUrl("./images/basemap/streets-relief.jpg"),itemId:"b266e6d17fc345b498345613930fbd76",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",type:"VectorTile"}]},
"streets-navigation-vector":{title:u.basemaps["streets-navigation-vector"],thumbnailUrl:F.toUrl("./images/basemap/streets-navigation.jpg"),itemId:"63c47b7177f946b49902c24129b87252",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",type:"VectorTile"}]}};y("extend-esri")&&(a.basemaps=F);return F})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),
function(F,y,a,u,n,t){F=F([u],{declaredClass:"esri.Evented",registerConnectEvents:function(){var r=this.constructor,l=this.constructor._meta.parents,d=[{}],f={},b,c=function(e,h){y.isArray(e)||(e=[e]);for(var k=0;k<e.length;k++){var m=e[k];m._meta&&m._meta.parents&&c(m._meta.parents,h);m.prototype._eventMap&&h.push(y.mixin({},m.prototype._eventMap))}return h};if(!r._onMap){c(l,d);d.push(this._eventMap);l=y.mixin.apply(this,d);for(g in this)/^on\w/.test(g)&&y.isFunction(this[g])&&(d=this._hyphenLower(g).toLowerCase(),
l[d]||(f[d]={method:g}));for(b in l){var g=this._onCamelCase(b);f[b]={method:g,argKeys:l[b]}}r._onMap=f;return r._onMap}},on:function(r,l){if(-1<r.indexOf(",")){for(var d=r.split(/\s*,\s*/),f=d.length,b=[];f--;)b.push(this.on(d[f],l));b.remove=function(){for(var e=0;e<b.length;e++)b[e].remove()};return b}d=this.constructor._onMap||this.registerConnectEvents();f="string"==typeof r&&r.toLowerCase();var c=this._onCamelCase(f),g=d&&d[f];return(c=g&&g.method||this[c]&&y.isFunction(this[c])&&c)?g&&y.isArray(g.argKeys)?
(d=this._onArr2Obj(l,d[f].argKeys),a.after(this,c,d,!0)):a.after(this,c,function(e){e=e||{};e.target||(e.target=this);l.call(this,e)},!0):this.inherited(arguments)},emit:function(r,l){var d,f,b=r.toLowerCase();var c=this._onCamelCase(r);var g=this.constructor._onMap||this.registerConnectEvents();c=(f=g&&g[b]&&g[b].method||y.isFunction(this[c])&&c)&&this[f];f&&g&&g[b]&&this._onObj2Arr(function(){d=Array.prototype.slice.call(arguments)},g[b].argKeys)(l);l=l||{};l.target||(l.target=this);if(c){var e=
d&&d.length?d:[l];e=c.apply(this,e)}this.inherited(arguments,[r,l]);return e},_onObj2Arr:function(r,l){if(l){var d=this;return function(f){var b,c=[],g=l.length;for(b=0;b<g;b++)c[b]=f[l[b]];r.apply(d,c)}}return r},_onArr2Obj:function(r,l){if(l){var d=this;return function(){var f,b={},c=arguments.length;for(f=0;f<c;f++)b[l[f]]=arguments[f];b.target||(b.target=d);r.call(d,b)}}return r},_hyphenLower:function(r){return r.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(l,d){return(d?"-":"")+l.toLowerCase()})},
_onCamelCase:function(r){return"on"+r.substr(0,1).toUpperCase()+r.substr(1).replace(/\-([a-z])/g,function(l,d){return d.toUpperCase()})}});n("extend-esri")&&(t.Evented=F);return F})},"esri/fx":function(){define("dojo/_base/connect dojo/_base/fx dojo/_base/lang dojo/dom dojo/dom-geometry dojo/dom-style dojo/fx dojo/has ./kernel".split(" "),function(F,y,a,u,n,t,r,l,d){var f={animateRange:function(b){var c=b.range;return new y.Animation(a.mixin({curve:new y._Line(c.start,c.end)},b))},resize:function(b){var c=
b.node=u.byId(b.node),g=b.start,e=b.end;g||(g=n.getMarginBox(c),c=n.getPadBorderExtents(c),g=b.start={left:g.l+c.l,top:g.t+c.t,width:g.w-c.w,height:g.h-c.h});e||(e=b.anchor?b.anchor:{x:g.left,y:g.top},c=b.size,e=b.end={left:g.left-(c.width-g.width)*(e.x-g.left)/g.width,top:g.top-(c.height-g.height)*(e.y-g.top)/g.height,width:c.width,height:c.height});return y.animateProperty(a.mixin({properties:{left:{start:g.left,end:e.left},top:{start:g.top,end:e.top},width:{start:g.width,end:e.width},height:{start:g.height,
end:e.height}}},b))},slideTo:function(b){var c=b.node=u.byId(b.node),g=t.getComputedStyle,e=null,h=null,k=function(){return function(){var m="absolute"==c.style.position?"absolute":"relative";e="absolute"==m?c.offsetTop:parseInt(g(c).top)||0;h="absolute"==m?c.offsetLeft:parseInt(g(c).left)||0;"absolute"!=m&&"relative"!=m&&(m=n.position(c,!0),e=m.y,h=m.x,c.style.position="absolute",c.style.top=e+"px",c.style.left=h+"px")}}();k();b=y.animateProperty(a.mixin({properties:{top:{start:e,end:b.top||0},left:{start:h,
end:b.left||0}}},b));F.connect(b,"beforeBegin",b,k);return b},flash:function(b){b=a.mixin({end:"#f00",duration:500,count:1},b);b.duration/=2*b.count;var c=u.byId(b.node),g=b.start;g||(g=t.getComputedStyle(c).backgroundColor);var e=b.end,h=[],k=b.count;c={node:c,duration:b.duration};for(b=0;b<k;b++)h.push(y.animateProperty(a.mixin({properties:{backgroundColor:{start:g,end:e}}},c))),h.push(y.animateProperty(a.mixin({properties:{backgroundColor:{start:e,end:g}}},c)));return r.chain(h)}};l("extend-esri")&&
a.mixin(a.getObject("fx",!0,d),f);return f})},"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),function(F,y,a,u,n,t,r,l,d,f,b){a.isAsync||f(0,function(){b(["./fx/Toggler"])});a=a.fx={};f={_fire:function(e,h){this[e]&&this[e].apply(this,h||[]);return this}};var c=function(e){this._index=-1;this._animations=e||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;u.forEach(this._animations,
function(h){h&&("undefined"!=typeof h.duration&&(this.duration+=h.duration),h.delay&&(this.duration+=h.delay))},this)};c.prototype=new y;F.extend(c,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove();this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=n.after(this._current,"onAnimate",F.hitch(this,"_onAnimate"),
!0),this._onEndCtx=n.after(this._current,"onEnd",F.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(e,h){this._current||(this._current=this._animations[this._index=0]);if(!h&&"playing"==this._current.status())return this;var k=n.after(this._current,"beforeBegin",F.hitch(this,function(){this._fire("beforeBegin")}),!0),m=n.after(this._current,"onBegin",F.hitch(this,function(p){this._fire("onBegin",arguments)}),!0),w=n.after(this._current,"onPlay",F.hitch(this,function(p){this._fire("onPlay",
arguments);k.remove();m.remove();w.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=n.after(this._current,"onAnimate",F.hitch(this,"_onAnimate"),!0);this._onEndCtx&&this._onEndCtx.remove();this._onEndCtx=n.after(this._current,"onEnd",F.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var e=n.after(this._current,"onPause",F.hitch(this,function(h){this._fire("onPause",arguments);e.remove()}),!0);
this._current.pause()}return this},gotoPercent:function(e,h){this.pause();var k=this.duration*e;this._current=null;u.some(this._animations,function(m,w){if(k<=m.duration)return this._current=m,this._index=w,!0;k-=m.duration;return!1},this);this._current&&this._current.gotoPercent(k/this._current.duration);h&&this.play();return this},stop:function(e){if(this._current){if(e){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var h=
n.after(this._current,"onStop",F.hitch(this,function(k){this._fire("onStop",arguments);h.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this.stop();this._onAnimateCtx&&this._onAnimateCtx.remove();this._onEndCtx&&this._onEndCtx.remove()}});F.extend(c,f);a.chain=function(e){return new c(F.isArray(e)?e:Array.prototype.slice.call(e,0))};var g=function(e){this._animations=e||[];this._connects=[];this.duration=
this._finished=0;u.forEach(e,function(k){var m=k.duration;k.delay&&(m+=k.delay);this.duration<m&&(this.duration=m);this._connects.push(n.after(k,"onEnd",F.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=new t.Animation({curve:[0,1],duration:this.duration});var h=this;u.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),function(k){h._connects.push(n.after(h._pseudoAnimation,k,function(){h._fire(k,arguments)},!0))})};F.extend(g,{_doAction:function(e,h){u.forEach(this._animations,
function(k){k[e].apply(k,h)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(e,h){var k=this._pseudoAnimation;k[e].apply(k,h)},play:function(e,h){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(e,h){var k=this.duration*e;u.forEach(this._animations,function(m){m.gotoPercent(m.duration<
k?1:k/m.duration,h)});this._call("gotoPercent",arguments);return this},stop:function(e){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){this.stop();u.forEach(this._connects,function(e){e.remove()})}});F.extend(g,f);a.combine=function(e){return new g(F.isArray(e)?e:Array.prototype.slice.call(e,0))};a.wipeIn=function(e){var h=e.node=r.byId(e.node),k=h.style,m;e=t.animateProperty(F.mixin({properties:{height:{start:function(){m=
k.overflow;k.overflow="hidden";if("hidden"==k.visibility||"none"==k.display)return k.height="1px",k.display="",k.visibility="",1;var p=l.get(h,"height");return Math.max(p,1)},end:function(){return h.scrollHeight}}}},e));var w=function(){k.height="auto";k.overflow=m};n.after(e,"onStop",w,!0);n.after(e,"onEnd",w,!0);return e};a.wipeOut=function(e){var h=(e.node=r.byId(e.node)).style,k;e=t.animateProperty(F.mixin({properties:{height:{end:1}}},e));n.after(e,"beforeBegin",function(){k=h.overflow;h.overflow=
"hidden";h.display=""},!0);var m=function(){h.overflow=k;h.height="auto";h.display="none"};n.after(e,"onStop",m,!0);n.after(e,"onEnd",m,!0);return e};a.slideTo=function(e){var h=null,k=null,m=function(w){return function(){var p=l.getComputedStyle(w),A=p.position;h="absolute"==A?w.offsetTop:parseInt(p.top)||0;k="absolute"==A?w.offsetLeft:parseInt(p.left)||0;"absolute"!=A&&"relative"!=A&&(p=d.position(w,!0),h=p.y,k=p.x,w.style.position="absolute",w.style.top=h+"px",w.style.left=k+"px")}}(e.node=r.byId(e.node));
m();e=t.animateProperty(F.mixin({properties:{top:e.top||0,left:e.left||0}},e));n.after(e,"beforeBegin",m,!0);return e};return a})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(F,y,a){var u={_dfdCanceller:function(n){n.canceled=!0;var t=n._pendingDfd;if(!n.isFulfilled()&&t&&!t.isFulfilled()){t.cancel();var r=t.results&&t.results[1]}n._pendingDfd=null;return r},_fixDfd:function(n){var t=n.then;n.then=function(r,l,d){if(r){var f=r;r=function(b){return b&&
b._argsArray?f.apply(null,b):f(b)}}return t.call(this,r,l,d)};return n},_resDfd:function(n,t,r){var l=t.length;1===l?r?n.errback(t[0]):n.callback(t[0]):1<l?(t._argsArray=!0,n.callback(t)):n.callback()}};y("extend-esri")&&F.mixin(a,u);return u})},"esri/tileUtils":function(){define(["dojo/_base/array","dojo/has","./kernel","./geometry/Point","./geometry/Extent"],function(F,y,a,u,n){var t={_addFrameInfo:function(r,l){var d,f,b=2*l.origin[1],c=l.origin[0],g=r.origin.x,e=r.width,h;F.forEach(r.lods,function(k){d=
Math.round(b/k.resolution);f=Math.ceil(d/e);h=Math.floor((c-g)/(e*k.resolution));k._frameInfo||(k._frameInfo=[f,h,h+f-1,d])})},getContainingTileCoords:function(r,l,d){var f=r.origin;d=d.resolution;return{row:Math.floor((f.y-l.y)/(r.height*d)),col:Math.floor((l.x-f.x)/(r.width*d))}},getCandidateTileInfo:function(r,l,d){var f=r.width;var b=r.height,c=d.xmax-d.xmin,g=d.ymax-d.ymin,e=r.__tileInfo===l,h=e?r.getMinZoom():-1;e=e?r.getMaxZoom():-1;var k=-1,m=l.lods,w=Math.abs,p;e=-1<e?e:m.length-1;for(h=
-1<h?h:0;h<=e;h++)if(p=m[h]){var A=c>g?w(g-b*p.resolution):w(c-f*p.resolution);if(0>k||A<=k){var C=p;k=A}else break}f=C;C=f.resolution;b=(d.xmin+d.xmax)/2;c=(d.ymin+d.ymax)/2;g=r.width/2*C;C*=r.height/2;b=new n(b-g,c-C,b+g,c+C,d.spatialReference);d=new u(b.xmin,b.ymax,d.spatialReference);e=f.resolution;g=l.width;c=l.height;l=l.origin;r=r.__visibleDelta;C=Math.floor;m=g*e;w=c*e;e=C((l.y-d.y)/w);k=C((d.x-l.x)/m);h=l.y-e*w;l=C(Math.abs((d.x-(l.x+k*m))*g/m))+r.x;r=C(Math.abs((d.y-h)*c/w))+r.y;return{tile:{point:d,
coords:{row:e,col:k},offsets:{x:l,y:r}},lod:f,extent:b}},getTileExtent:function(r,l,d,f){var b=r.origin;l=r.lods[l].resolution;var c=r.width,g=r.height;return new n(f*l*c+b.x,b.y-(d+1)*l*g,(f+1)*l*c+b.x,b.y-d*l*g,r.spatialReference)}};y("extend-esri")&&(a.TileUtils=t);return t})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),function(F,y,a,u,n,t,r,l){function d(e,h){89.99999<h?h=89.99999:
-89.99999>h&&(h=-89.99999);h*=.017453292519943;return[111319.49079327169*e,3189068.5*Math.log((1+Math.sin(h))/(1-Math.sin(h)))]}function f(e,h,k){e=e/6378137*57.29577951308232;return k?[e,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*h/6378137)))]:[e-360*Math.floor((e+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*h/6378137)))]}function b(){}function c(){}function g(e){var h=e._json;e._unquantizeFn?(h=e._unquantizeFn({x:h.x,y:h.y}),e._xVal=h.x,e._yVal=h.y,
e._unquantizeFn=null):(e._xVal=h.x,e._yVal=h.y);e._json=null}t={type:"point",x:0,y:0};F=F(r,{declaredClass:"esri.geometry.Point",type:"point",x:0,y:0,constructor:function(e,h,k){y.isArray(e)?(this.x=e[0],this.y=e[1],this.spatialReference=h):n.isObject(e)?(n.mixin(this,e),null!=this.latitude&&(this.y=this.latitude),null!=this.longitude&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=l.createSpatialReference(this.spatialReference))):(this.x=e,this.y=h,this.spatialReference=k);
this.verifySR()},offset:function(e,h){return new this.constructor(this.x+e,this.y+h,this.spatialReference)},setX:function(e){this.x=e;this.clearCache();return this},setY:function(e){this.y=e;this.clearCache();return this},setLongitude:function(e){var h=this.spatialReference;h&&(h._isWebMercator()?this.setX(d(e,this.y)[0]):4326===h.wkid&&this.setX(e));return this},setLatitude:function(e){var h=this.spatialReference;h&&(h._isWebMercator()?this.setY(d(this.x,e)[1]):4326===h.wkid&&this.setY(e));return this},
getLongitude:function(){var e=this.spatialReference;if(e)if(e._isWebMercator())var h=f(this.x,this.y)[0];else 4326===e.wkid&&(h=this.x);return h},getLatitude:function(){var e=this.spatialReference;if(e)if(e._isWebMercator())var h=f(this.x,this.y)[1];else 4326===e.wkid&&(h=this.y);return h},update:function(e,h){this.x=e;this.y=h;this.clearCache();return this},normalize:function(){var e=this.x,h=this.spatialReference;if(h){var k=h._getInfo();k&&(e=this._normalizeX(e,k))}return new this.constructor(e,
this.y,h)},_normalizeX:function(e,h){var k=h.valid[0],m=h.valid[1];h=2*m;e>m?(k=Math.ceil(Math.abs(e-m)/h),e-=k*h):e<k&&(k=Math.ceil(Math.abs(e-k)/h),e+=k*h);return e},toJson:function(){var e={x:this.x,y:this.y},h=this.spatialReference;h&&(e.spatialReference=h.toJson());return e}});b.prototype=F.prototype;c.prototype=new b;Object.defineProperty(c.prototype,"x",{get:function(){this._json&&g(this);return this._xVal},set:function(e){this._xVal=e}});Object.defineProperty(c.prototype,"y",{get:function(){this._json&&
g(this);return this._yVal},set:function(e){this._yVal=e}});c.prototype.setupLazyUnquantization=function(e,h){this._unquantizeFn=e;this._json=h};F.simpleConstructor=b;F.accessorConstructor=c;F.lngLatToXY=d;F.xyToLngLat=f;F.defaultProps=t;F.metersPerDegree=6378137*Math.PI/180;a("extend-esri")&&(y.setObject("geometry.Point",F,u),u.geometry.defaultPoint=t);return F})},"esri/SpatialReference":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/has","./kernel","./lang"],function(F,y,a,u,n){function t(){}
var r=[-2.0037508342788905E7,2.0037508342788905E7],l=[-2.0037508342787E7,2.0037508342787E7];F=F(null,{declaredClass:"esri.SpatialReference",constructor:function(d){d&&(n.isObject(d)?n.mixin(this,d):n.isString(d)?this.wkt=d:this.wkid=d)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:r,origin:l,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:r,origin:l,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:r,origin:l,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:r,origin:l,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==y.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==y.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(d){var f=!1;d&&(f=this.isWebMercator()&&4326===d.wkid||d.isWebMercator()&&4326===this.wkid);return f},isWebMercator:function(){return this._isWebMercator()},equals:function(d){var f=!1;d&&(this===d&&
(f=!0),this.wkid||d.wkid?f=this.wkid===d.wkid||this.isWebMercator()&&d.isWebMercator()||this.wkid===d.latestWkid||d.wkid===this.latestWkid:this.wkt&&d.wkt&&(f=this.wkt.toUpperCase()===d.wkt.toUpperCase()));return f},toJson:function(){var d=null;null!=this.wkid?d={wkid:this.wkid}:null!=this.wkt&&(d={wkt:this.wkt});d&&null!=this.latestWkid&&(d.latestWkid=this.latestWkid);return d}});t.prototype=F.prototype;F.simpleConstructor=t;a("extend-esri")&&(u.SpatialReference=F);return F})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(F,y,a,u,n){F=F(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(t){this.spatialReference=t;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new n(4326))},getExtent:function(){return null},clearCache:function(){this.cache=void 0},getCacheValue:function(t){return this.cache&&this.cache[t]},setCacheValue:function(t,r){this.cache||
(this.cache={});this.cache[t]=r}});a("extend-esri")&&y.setObject("geometry.Geometry",F,u);return F})},"esri/srUtils":function(){define(["./SpatialReference","./ImageSpatialReference","./kernel","./sniff","dojo/_base/lang"],function(F,y,a,u,n){function t(l){var d=!1;l&&(l.ics||l.icsid)&&(d=!0);return d}var r={isICS:t,createSpatialReference:function(l){var d=null;l&&(d=t(l)?new y(l):new F(l));return d}};u("extend-esri")&&n.mixin(a,r);return r})},"esri/ImageSpatialReference":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),
function(F,y,a,u,n,t){F=F(t,{declaredClass:"esri.ImageSpatialReference",constructor:function(r){r&&y.isObject(r)&&y.mixin(this,r)},icsid:null,icsns:null,ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(r){var l=!1;if(r)if(this.icsid&&r.icsid){if(l=this.icsid===r.icsid,this.icsns||r.icsns)l=l&&this.icsns===r.icsns}else this.ics&&r.ics&&(l=this.ics===r.ics);return l},toJson:function(r){var l=null,d=n.isDefined;r=d(r)?r:!0;d(this.icsid)?(l={icsid:this.icsid},
d(this.icsns)&&(l.icsns=this.icsns)):d(this.ics)&&(l={ics:this.ics});d(this.url)&&d(l)&&r&&(l.url=this.url);return l}});a("extend-esri")&&(u.ImageSpatialReference=F);return F})},"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),function(F,y,a,u,n,t,r,l,d,f,b,c){function g(){}var e={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0},h=F(l,{declaredClass:"esri.geometry.Extent",
type:"extent",xmin:0,ymin:0,xmax:0,ymax:0,constructor:function(k,m,w,p,A){t.isObject(k)?(t.mixin(this,k),this.spatialReference&&(this.spatialReference=c.createSpatialReference(this.spatialReference))):this.update(k,m,w,p,A);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new d((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference)},getTopLeft:function(){return new d(this.xmin,
this.ymax,this.spatialReference)},getTopRight:function(){return new d(this.xmax,this.ymax,this.spatialReference)},getBottomLeft:function(){return new d(this.xmin,this.ymin,this.spatialReference)},getBottomRight:function(){return new d(this.xmax,this.ymin,this.spatialReference)},centerAt:function(k){var m=this.getCenter(),w=k.x-m.x;k=k.y-m.y;return new h(this.xmin+w,this.ymin+k,this.xmax+w,this.ymax+k,this.spatialReference)},update:function(k,m,w,p,A){this.xmin=k;this.ymin=m;this.xmax=w;this.ymax=
p;this.spatialReference=A;this.clearCache();return this},offset:function(k,m){return new h(this.xmin+k,this.ymin+m,this.xmax+k,this.ymax+m,this.spatialReference)},expand:function(k){var m=(1-k)/2;k=this.getWidth()*m;m*=this.getHeight();return new h(this.xmin+k,this.ymin+m,this.xmax-k,this.ymax-m,this.spatialReference)},intersects:function(k){if(!k)return!1;var m=k.type,w=this.spatialReference,p=k.spatialReference;w&&p&&!w.equals(p)&&w._canProject(p)&&(k=w.isWebMercator()?f.geographicToWebMercator(k):
f.webMercatorToGeographic(k,!0));switch(m){case "point":return this.contains(k);case "multipoint":return this._intersectsMultipoint(k);case "extent":return this._intersectsExtent(k);case "polygon":return this._intersectsPolygon(k);case "polyline":return this._intersectsPolyline(k)}},normalize:function(){var k=this._normalize(!1,!0);a.isArray(k)||(k=[k]);return k},shiftCentralMeridian:function(){return this._normalize(!0)},bisect:function(){var k=this.spatialReference,m=k&&k._getInfo(),w=[],p=0;if(m&&
this._isOutOfBounds(m)){var A=this;p=A.xmin;var C=A.ymin,z=A.ymax,q=m.valid[0],v=m.valid[1];A.getWidth()>2*v&&(A=A.getCenter(),A=new h(A.x-v,C,A.x+v,z,new r(k.toJson())));p=A.xmin-p;var B=this._normalizeX(A.xmin,m);m=this._normalizeX(A.xmax,m);B.frameId===m.frameId?w.push(new h(B.x,C,m.x,z,new r(k.toJson()))):w.push(new h(B.x,C,v,z,new r(k.toJson())),new h(q,C,m.x,z,new r(k.toJson())))}else w.push(this.getExtent());return{extents:w,marginLeft:p}},_intersectsMultipoint:function(k){var m=k.points.length,
w;for(w=0;w<m;w++)if(this.contains(k.getPoint(w)))return!0;return!1},_intersectsExtent:function(k){var m,w,p=!1;if(this.xmin<=k.xmin){var A=k.xmin;this.xmax<A?p=!0:m=Math.min(this.xmax,k.xmax)-A}else A=this.xmin,k.xmax<A?p=!0:m=Math.min(this.xmax,k.xmax)-A;if(this.ymin<=k.ymin){var C=k.ymin;this.ymax<C?p=!0:w=Math.min(this.ymax,k.ymax)-C}else C=this.ymin,k.ymax<C?p=!0:w=Math.min(this.ymax,k.ymax)-C;return p?null:new h(A,C,A+m,C+w,this.spatialReference)},_intersectsPolygon:function(k){var m=[this.xmin,
this.ymax],w=[this.xmax,this.ymax],p=[this.xmin,this.ymin],A=[this.xmax,this.ymin],C=[m,w,p,A];m=[[p,m],[m,w],[w,A],[A,p]];p=k.rings;A=p.length;var z=new d(0,0,this.spatialReference);var q=C.length;for(w=0;w<q;w++)if(z.update(C[w][0],C[w][1]),k.contains(z))return!0;z.setSpatialReference(k.spatialReference);for(w=0;w<A;w++)if(C=p[w],q=C.length){var v=C[0];z.update(v[0],v[1]);if(this.contains(z))return!0;for(k=1;k<q;k++){var B=C[k];z.update(B[0],B[1]);if(this.contains(z)||this._intersectsLine([v,B],
m))return!0;v=B}}return!1},_intersectsPolyline:function(k){var m=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],w,p=k.paths,A=p.length,C,z=new d(0,0,k.spatialReference);for(k=0;k<A;k++){var q=p[k];if(C=q.length){var v=q[0];z.update(v[0],v[1]);if(this.contains(z))return!0;for(w=1;w<C;w++){var B=q[w];z.update(B[0],B[1]);if(this.contains(z)||this._intersectsLine([v,
B],m))return!0;v=B}}}return!1},_intersectsLine:function(k,m){var w=b._getLineIntersection2,p,A=m.length;for(p=0;p<A;p++)if(w(k,m[p]))return!0;return!1},contains:function(k){if(!k)return!1;var m=k.type;if("point"===m){var w=this.spatialReference,p=k.spatialReference;m=k.x;k=k.y;w&&p&&!w.equals(p)&&w._canProject(p)&&(k=w.isWebMercator()?d.lngLatToXY(m,k):d.xyToLngLat(m,k,!0),m=k[0],k=k[1]);return m>=this.xmin&&m<=this.xmax&&k>=this.ymin&&k<=this.ymax}return"extent"===m?this._containsExtent(k):!1},_containsExtent:function(k){var m=
k.xmin,w=k.ymin,p=k.xmax,A=k.ymax,C=k.spatialReference;k=new d(m,w,C);m=new d(m,A,C);A=new d(p,A,C);w=new d(p,w,C);return this.contains(k)&&this.contains(m)&&this.contains(A)&&this.contains(w)?!0:!1},union:function(k){return new h(Math.min(this.xmin,k.xmin),Math.min(this.ymin,k.ymin),Math.max(this.xmax,k.xmax),Math.max(this.ymax,k.ymax),this.spatialReference)},getExtent:function(){var k=this.spatialReference;return new h(this.xmin,this.ymin,this.xmax,this.ymax,k&&new r(k.toJson()))},_shiftCM:function(k){var m=
this.getCacheValue("_shifted");if(!m){m=new h(this.toJson());var w=m.spatialReference;if(k=k||w._getInfo()){var p=this._getCM(k);if(p){var A=w._isWebMercator()?f.webMercatorToGeographic(p):p;m.xmin-=p.x;m.xmax-=p.x;w._isWebMercator()||(A.x=this._normalizeX(A.x,k).x);m.setSpatialReference(new r(t.substitute({Central_Meridian:A.x},4326===w.wkid?k.altTemplate:k.wkTemplate)))}}this.setCacheValue("_shifted",m)}return m},_getCM:function(k){var m;this._isOutOfBounds(k)&&(m=this.getCenter());return m},_isOutOfBounds:function(k){var m=
k.valid[0];k=k.valid[1];var w=this.xmin,p=this.xmax;return!(w>=m&&w<=k&&p>=m&&p<=k)},_normalize:function(k,m,w){var p=new h(this.toJson()),A=p.spatialReference;if(A&&(w=w||A._getInfo())){var C=y.map(this._getParts(w),function(z){return z.extent});return 2<C.length?k?this._shiftCM(w):p.update(w.valid[0],p.ymin,w.valid[1],p.ymax,A):2===C.length?k?this._shiftCM(w):m?C:{rings:y.map(C,function(z){return[[z.xmin,z.ymin],[z.xmin,z.ymax],[z.xmax,z.ymax],[z.xmax,z.ymin],[z.xmin,z.ymin]]}),spatialReference:A}:
C[0]||p}return p},_getParts:function(k){var m=this.getCacheValue("_parts");if(!m){m=[];var w=this.xmin,p=this.xmax,A=this.ymin,C=this.ymax,z=this.spatialReference,q=this.getWidth(),v=w,B=p,D=0,x=0;k=k||z._getInfo();var E=k.valid[0];var G=k.valid[1];x=this._normalizeX(w,k);w=x.x;D=x.frameId;x=this._normalizeX(p,k);p=x.x;x=x.frameId;k=w===p&&0<q;if(q>2*G){q=new h(v<B?w:p,A,G,C,z);w=new h(E,A,v<B?p:w,C,z);G=new h(0,A,G,C,z);A=new h(E,A,0,C,z);z=[];E=[];q.contains(G)&&z.push(D);q.contains(A)&&E.push(D);
w.contains(G)&&z.push(x);w.contains(A)&&E.push(x);for(C=D+1;C<x;C++)z.push(C),E.push(C);m.push({extent:q,frameIds:[D]},{extent:w,frameIds:[x]},{extent:G,frameIds:z},{extent:A,frameIds:E})}else w>p||k?m.push({extent:new h(w,A,G,C,z),frameIds:[D]},{extent:new h(E,A,p,C,z),frameIds:[x]}):m.push({extent:new h(w,A,p,C,z),frameIds:[D]});this.setCacheValue("_parts",m)}return m},_normalizeX:function(k,m){var w=0,p=m.valid[0],A=m.valid[1];m=2*A;k>A?(w=Math.ceil(Math.abs(k-A)/m),k-=w*m):k<p&&(w=Math.ceil(Math.abs(k-
p)/m),k+=w*m,w=-w);return{x:k,frameId:w}},toJson:function(){var k={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},m=this.spatialReference;m&&(k.spatialReference=m.toJson());return k}});g.prototype=h.prototype;h.simpleConstructor=g;h.defaultProps=e;u("extend-esri")&&(a.setObject("geometry.Extent",h,n),n.geometry.defaultExtent=e);return h})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),function(F,
y,a,u,n,t){function r(f,b,c,g){if("point"===f.type){var e=b(f.x,f.y,g);return new f.constructor(e[0],e[1],new n(c))}if("extent"===f.type){e=b(f.xmin,f.ymin,g);var h=b(f.xmax,f.ymax,g);return new f.constructor(e[0],e[1],h[0],h[1],new n(c))}if("polyline"===f.type||"polygon"===f.type){e="polyline"===f.type;var k=[],m;F.forEach(e?f.paths:f.rings,function(p){k.push(m=[]);F.forEach(p,function(A){m.push(b(A[0],A[1],g))})});return e?new f.constructor({paths:k,spatialReference:new n(c)}):new f.constructor({rings:k,
spatialReference:new n(c)})}if("multipoint"===f.type){var w=[];F.forEach(f.points,function(p){w.push(b(p[0],p[1],g))});return new f.constructor({points:w,spatialReference:new n(c)})}}function l(f,b){f=f&&(null!=f.wkid?f:f.spatialReference);b=b&&(null!=b.wkid?b:b.spatialReference);return f&&b?b.equals(f)?!0:b._canProject(f):!1}var d={canProject:l,project:function(f,b){var c=f&&f.spatialReference;b=b&&(null!=b.wkid?b:b.spatialReference);c&&b?c.equals(b)?f=new f.constructor(f.toJson()):l(c,b)?b.isWebMercator()?
f=r(f,t.lngLatToXY,{wkid:102100}):4326===b.wkid&&(f=r(f,t.xyToLngLat,{wkid:4326})):f=null:f=null;return f},lngLatToXY:t.lngLatToXY,xyToLngLat:t.xyToLngLat,metersPerDegree:t.metersPerDegree,geographicToWebMercator:function(f){return r(f,t.lngLatToXY,{wkid:102100})},webMercatorToGeographic:function(f,b){return r(f,t.xyToLngLat,{wkid:4326},b)}};a("extend-esri")&&y.mixin(y.getObject("geometry",!0,u),d);return d})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point"],
function(F,y,a,u){function n(d,f,b){return d instanceof u?new u(d.x+b*(f.x-d.x),d.y+b*(f.y-d.y)):[d[0]+b*(f[0]-d[0]),d[1]+b*(f[1]-d[1])]}function t(d,f){return 1E-8>Math.abs(d-f)}function r(d,f,b,c){var g=t(d[0],f[0])?1E10:(d[1]-f[1])/(d[0]-f[0]),e=t(b[0],c[0])?1E10:(b[1]-c[1])/(b[0]-c[0]),h=d[1]-g*d[0],k=b[1]-e*b[0];if(t(g,e)){if(t(h,k)){if(t(d[0],f[0]))if(Math.min(d[1],f[1])<Math.max(b[1],c[1])||Math.max(d[1],f[1])>Math.min(b[1],c[1])){d=(d[1]+f[1]+b[1]+c[1]-Math.min(d[1],f[1],b[1],c[1])-Math.max(d[1],
f[1],b[1],c[1]))/2;var m=(d-h)/g}else return null;else if(Math.min(d[0],f[0])<Math.max(b[0],c[0])||Math.max(d[0],f[0])>Math.min(b[0],c[0]))m=(d[0]+f[0]+b[0]+c[0]-Math.min(d[0],f[0],b[0],c[0])-Math.max(d[0],f[0],b[0],c[0]))/2,d=g*m+h;else return null;return[m,d]}return null}t(g,1E10)?(m=d[0],d=e*m+k):t(e,1E10)?(m=b[0],d=g*m+h):(m=-(h-k)/(g-e),d=d[1]===f[1]?d[1]:b[1]===c[1]?b[1]:g*m+h);return[m,d]}var l={getLength:function(d,f){var b=f.x-d.x;d=f.y-d.y;return Math.sqrt(b*b+d*d)},_getLength:function(d,
f){var b=f[0]-d[0];d=f[1]-d[1];return Math.sqrt(b*b+d*d)},getPointOnLine:n,getMidpoint:function(d,f){return n(d,f,.5)},_equals:t,_getLineIntersection:r,getLineIntersection:function(d,f,b,c,g){(d=r([d.x,d.y],[f.x,f.y],[b.x,b.y],[c.x,c.y]))&&(d=new u(d[0],d[1],g));return d},_getLineIntersection2:function(d,f){var b=d[0],c=d[1],g=f[0],e=f[1];f=b[0];b=b[1];d=c[0];c=c[1];var h=g[0],k=g[1];g=e[0]-h;h=f-h;var m=d-f;e=e[1]-k;k=b-k;var w=c-b,p=e*m-g*w;if(0===p)return!1;g=(g*k-e*h)/p;h=(m*k-w*h)/p;return 0<=
g&&1>=g&&0<=h&&1>=h?[f+g*(d-f),b+g*(c-b)]:!1},_pointLineDistance:function(d,f){var b=f[0],c=f[1];f=b[0];var g=b[1];b=d[0];d=d[1];var e=c[0]-f,h=c[1]-g,k=b-f,m=d-g;c=Math.sqrt;var w=Math.pow,p=c(w(e,2)+w(h,2));k=(k*e+m*h)/(p*p);g+=k*h;return c(w(b-(f+k*e),2)+w(d-g,2))}};y("extend-esri")&&F.mixin(F.getObject("geometry",!0,a),l);return l})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),
function(F,y,a,u,n,t,r,l,d,f){var b={},c=l.defaults.io,g=/^[a-z][a-z0-9\+\-\.]*:/i,e=/^\s*http:/i,h=/^\s*https:/i,k=/:\d+$/,m=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;b.isHTTP=function(p){var A=u.location.protocol;return null==p?"http:"===A||"https:"===A:p?"https:"===A:"http:"===A};b.getProtocolForWebResource=function(p){return b.isHTTP()?u.location.protocol:p?"https:":"http:"};b.urlToObject=function(p){var A={},C=new a(p),z=p.indexOf("?");null===C.query?A={path:p,query:null}:(A.path=p.substring(0,
z),A.query=n.queryToObject(C.query));C.fragment&&(A.hash=C.fragment,null===C.query&&(A.path=A.path.substring(0,A.path.length-(C.fragment.length+1))));return A};b.getProxyUrl=function(p,A){var C=F.isString(p)?0===F.trim(p).toLowerCase().indexOf("https:"):p,z=c.proxyUrl,q=f.io.proxyNotSet;F.isString(p)&&(p=b.getProxyRule(p))&&(z=p.proxyUrl);if(!z)throw console.log(q),Error(q);if(C&&!1!==A&&0!==u.location.href.toLowerCase().indexOf("https:")&&(A=z,0!==A.toLowerCase().indexOf("http")&&(A=b.getAbsoluteUrl(A)),
A=A.replace(/^http:/i,"https:"),b.canUseXhr(A))){z=A;var v=1}z=b.urlToObject(z);z._xo=v;return z};b.addProxy=function(p){var A=b.getProxyRule(p),C;A?C=b.urlToObject(A.proxyUrl):c.alwaysUseProxy&&(C=b.getProxyUrl());C&&(A=b.urlToObject(p),p=C.path+"?"+A.path,(C=n.objectToQuery(F.mixin(C.query||{},A.query)))&&(p+="?"+C));return p};b.addProxyRule=function(p){var A=p.urlPrefix=b.urlToObject(p.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),C=c.proxyRules,z,q=C.length,
v=q;for(z=0;z<q;z++){var B=C[z].urlPrefix;if(0===A.indexOf(B)){if(A.length===B)return-1;v=z;break}else 0===B.indexOf(A)&&(v=z+1)}C.splice(v,0,p);return v};b.getProxyRule=function(p){var A=c.proxyRules,C=A.length,z=b.urlToObject(p).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase();for(p=0;p<C;p++)if(0===z.indexOf(A[p].urlPrefix)){var q=A[p];break}return q};b.hasSameOrigin=function(p,A,C){p=p.toLowerCase();A=A.toLowerCase();var z=u.location.href.toLowerCase();p=0===p.indexOf("http")?
new a(p):z=new a(z);A=0===A.indexOf("http")?new a(A):F.isString(z)?new a(z):z;return(C||p.scheme===A.scheme)&&p.host===A.host&&p.port===A.port};b.canUseXhr=function(p,A){var C=d("esri-phonegap")?!0:!1,z=b.hasSameOrigin,q=c.corsEnabledServers,v,B=-1;!C&&d("esri-cors")&&q&&q.length&&(C=y.some(q,function(D,x){D=!D||"object"!==typeof D||D instanceof RegExp?D:D.host;if(D instanceof RegExp){if(D.test(p))return B=x,!0}else if(D&&(v=0!==D.trim().toLowerCase().indexOf("http"),z(p,v?"http://"+D:D)||v&&z(p,
"https://"+D)))return B=x,!0;return!1}));return A?B:C};b.getAbsoluteUrl=function(p){var A=b.getProtocolForWebResource();return F.isString(p)&&!g.test(p)?0===p.indexOf("//")?A+p:0===p.indexOf("/")?A+"//"+u.location.host+p:t._appBaseUrl+p:p};b.fixUrl=function(p){p=F.trim(p);p=b.getAbsoluteUrl(p);p=b.normalizeSlashes(p);p=p.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");p=b.downgradeToHTTP(p);return p=b.upgradeToHTTPS(p)};b.normalize=function(p){return b.fixUrl(p)};b.normalizeSlashes=function(p){if(/^https?:\/\//i.test(p)){var A=
p.indexOf("?");if(-1<A){var C=p.slice(0,A);var z=p.slice(A+1)}else C=p;p=C.replace(/\/{2,}/g,"/");p=p.replace("/","//");z&&(p+="?"+z)}return p};b.downgradeToHTTP=function(p){return b.isHTTP(!1)&&h.test(p)&&b.hasSameOrigin(u.location.href,p,!0)&&!b.canUseXhr(p)?p.replace(h,"http:"):p};b.upgradeToHTTPS=function(p){var A=c.httpsDomains,C=b.isHTTP(!1),z=b.isHTTP(!0);if(!e.test(p))return p;p=F.trim(p);var q=p.indexOf("/",7);q=-1===q?p:p.slice(0,q);q=q.toLowerCase().slice(7);if(k.test(q))if(r.endsWith(q,
":80"))q=q.slice(0,-3),p=p.replace(":80","");else return p;if(C&&q===u.location.host&&(!m.test(p)||!b.canUseXhr(p)))return p;C=!1;if(z&&q===u.location.host)C=!0;else if(A)for(var v=0;v<A.length;v++){var B=A[v];if(q===B||r.endsWith(q,"."+B)){C=!0;break}}C||!z||c.alwaysUseProxy||b.getProxyRule(p)||(C=!0);C&&(p=p.replace(e,"https:"));return p};l=f.widgets.popup;var w=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:l.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,
label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,appName:"App Studio Player",label:l.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,appName:"Collector",label:l.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,appName:"Explorer",label:l.NLS_openLinkInApp},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,appName:"Navigator",label:l.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,appName:"Survey123",
label:l.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,appName:"Trek2There",label:l.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",label:l.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",label:l.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,appName:"FlowFinity",label:l.NLS_openLinkInApp},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:l.NLS_openLinkInApp},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,
appName:"Microsoft Power BI",label:l.NLS_openLinkInApp}];b.getURIInfo=function(p){var A;y.some(w,function(C){C.pattern.test(p)&&(A=C);return!!A});return A};b.isKnownURI=function(p){return!!b.getURIInfo(p)};b.base64UrlEncode=function(p){return btoa(String.fromCharCode.apply(null,p)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")};d("extend-esri")&&(F.mixin(t,b),t._getProxyUrl=b.getProxyUrl,t._getProxiedUrl=b.addProxy,t._hasSameOrigin=b.hasSameOrigin,t._canDoXOXHR=b.canUseXhr,t._getAbsoluteUrl=
b.getAbsoluteUrl,t.fixUrl=b.fixUrl);return b})},"esri/PluginTarget":function(){define("require dojo/aspect dojo/_base/array dojo/_base/lang dojo/Deferred dojo/when".split(" "),function(F,y,a,u,n,t){function r(){y.after(this.constructor._meta,"ctor",this._pluginsHandler,!0);this._plugins={}}r.prototype={addPlugin:function(l,d){var f=this,b=this._plugins,c=new n;try{F([l],function(g){l in b?c.resolve({id:b[l].declaredId||l.replace(/\//g,".")}):(b[l]=g,t(g.add(f,d),function(){var e={id:g.declaredId||
l.replace(/\//g,".")};f.emit("plugin-add",e);c.resolve(e)},function(e){c.reject(e)}))})}catch(g){c.reject(g)}return c.promise},removePlugin:function(l){if(l in this._plugins){var d=this._plugins[l];d.remove(this);delete this._plugins[l];this.emit("plugin-remove",{id:d.declaredId||l.replace(/\//g,".")})}},_pluginsHandler:function(){var l=this;a.some(arguments,function(d){if(d&&d.plugins&&d.plugins instanceof Array){d=d.plugins;var f;for(f=0;f<d.length;f++){var b=d[f];var c=b instanceof Object?b.id:
b;l.addPlugin(c,b.options)}return!0}})}};return r})},"esri/Color":function(){define(["dojo/_base/declare","dojo/_base/Color","dojo/has","./kernel"],function(F,y,a,u){var n=F([y],{declaredClass:"esri.Color"});n.toJsonColor=function(r){return r&&[r.r,r.g,r.b,1<r.a?r.a:Math.round(255*r.a)]};n.toDojoColor=function(r){return r&&new n([r[0],r[1],r[2],r[3]/255])};var t="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(F=0;F<t.length;F++)n[t[F]]=y[t[F]];a("extend-esri")&&(u.Color=n);
return n})},"esri/promiseList":function(){define(["dojo/_base/array","dojo/Deferred","dojo/when"],function(F,y,a){var u=F.forEach;return function(n){function t(e,h){b[h]=e;c.progress([e,h]);0===--g&&c.resolve(b)}var r,l;n instanceof Array?l=n:n&&"object"===typeof n&&(r=n);var d=[];if(r){l=[];for(var f in r)Object.hasOwnProperty.call(r,f)&&(d.push(f),l.push(r[f]));var b={}}else l&&(b=[]);if(!l||!l.length)return(new y).resolve(b);var c=new y;c.promise.always(function(){b=d=null});var g=l.length;u(l,
function(e,h){r||d.push(h);a(e,function(k){c.isFulfilled()||t(k,d[h])},function(k){c.isFulfilled()||t(k,d[h])})});return c.promise}})},"esri/arcade/Dictionary":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./ImmutableArray ./languageUtils ../geometry/Geometry".split(" "),function(F,y,a,u,n,t,r){function l(f,b){void 0===b&&(b=!1);if(null===f||void 0===f)return null;if(t.isNumber(f))return t.toNumber(f);if(t.isBoolean(f))return t.toBoolean(f);if(t.isString(f))return t.toString(f);
if(t.isDate(f))return t.toDate(f);if(t.isArray(f)){for(var c=[],g=0;g<f.length;g++)c.push(l(f[g],b));return c}g=new d;g.immutable=!1;for(var e=0,h=Object.keys(f);e<h.length;e++){var k=h[e];c=f[k];void 0!==c&&g.setField(k,l(c,b))}g.immutable=b;return g}var d=function(){function f(b){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=b instanceof f?b.attributes:void 0===b?{}:null===b?{}:b}f.prototype.field=function(b){var c=b.toLowerCase(),
g=this.attributes[b];if(void 0!==g)return g;for(var e in this.attributes)if(e.toLowerCase()===c)return this.attributes[e];throw Error("Field not Found : "+b);};f.prototype.setField=function(b,c){if(this.immutable)throw Error("Dictionary is Immutable");var g=b.toLowerCase();if(void 0===this.attributes[b])for(var e in this.attributes)if(e.toLowerCase()===g){this.attributes[e]=c;return}this.attributes[b]=c};f.prototype.hasField=function(b){var c=b.toLowerCase();if(void 0!==this.attributes[b])return!0;
for(var g in this.attributes)if(g.toLowerCase()===c)return!0;return!1};f.prototype.keys=function(){var b=[],c;for(c in this.attributes)b.push(c);return b=b.sort()};f.prototype.castToText=function(){var b="",c;for(c in this.attributes){""!==b&&(b+=",");var g=this.attributes[c];null==g?b+=JSON.stringify(c)+":null":t.isBoolean(g)||t.isNumber(g)||t.isString(g)?b+=JSON.stringify(c)+":"+JSON.stringify(g):g instanceof r?b+=JSON.stringify(c)+":"+t.toStringExplicit(g):g instanceof n?b+=JSON.stringify(c)+":"+
t.toStringExplicit(g):g instanceof Array?b+=JSON.stringify(c)+":"+t.toStringExplicit(g):g instanceof Date?b+=JSON.stringify(c)+":"+JSON.stringify(g):null!==g&&"object"===typeof g&&void 0!==g.castToText&&(b+=JSON.stringify(c)+":"+g.castToText())}return"{"+b+"}"};f.convertObjectToArcadeDictionary=function(b,c){void 0===c&&(c=!0);var g=new f;g.immutable=!1;for(var e in b){var h=b[e];void 0!==h&&g.setField(e.toString(),l(h))}g.immutable=c;return g};f.convertJsonToArcade=function(b,c){void 0===c&&(c=!1);
return l(b,c)};f.prototype.castAsJson=function(b){void 0===b&&(b=null);var c={};for(e in this.attributes){var g=this.attributes[e];if(void 0!==g){if(null===b||void 0===b?0:b.keyTranslate)var e=b.keyTranslate(e);c[e]=t.castAsJson(g,b)}}return c};f.prototype.castDictionaryValueAsJsonAsync=function(b,c,g,e,h){void 0===e&&(e=null);return a(this,void 0,void 0,function(){var k;return u(this,function(m){switch(m.label){case 0:return[4,t.castAsJsonAsync(g,e,h)];case 1:return k=m.sent(),b[c]=k,[2,k]}})})};
f.prototype.castAsJsonAsync=function(b,c){void 0===b&&(b=null);void 0===c&&(c=null);return a(this,void 0,void 0,function(){var g,e,h,k;return u(this,function(m){switch(m.label){case 0:g={};e=[];for(h in this.attributes){k=this.attributes[h];if(null===c||void 0===c?0:c.keyTranslate)h=c.keyTranslate(h);void 0!==k&&(t.isSimpleType(k)||k instanceof r||k instanceof Date?g[h]=t.castAsJson(k,c):e.push(this.castDictionaryValueAsJsonAsync(g,h,k,b,c)))}return 0<e.length?[4,Promise.all(e)]:[3,2];case 1:m.sent(),
m.label=2;case 2:return[2,g]}})})};return f}();return d})},"esri/arcade/polyfill/tsSupport/awaiter":function(){define([],function(){return function(){return function(F,y,a,u){function n(t){return t instanceof a?t:new a(function(r){r(t)})}return new (a||(a=Promise))(function(t,r){function l(b){try{f(u.next(b))}catch(c){r(c)}}function d(b){try{f(u["throw"](b))}catch(c){r(c)}}function f(b){b.done?t(b.value):n(b.value).then(l,d)}f((u=u.apply(F,y||[])).next())})}}()})},"esri/arcade/polyfill/tsSupport/generator":function(){define([],
function(){return function(){return function(F,y){function a(f){return function(b){return u([f,b])}}function u(f){if(t)throw new TypeError("Generator is already executing.");for(;n;)try{if(t=1,r&&(l=f[0]&2?r["return"]:f[0]?r["throw"]||((l=r["return"])&&l.call(r),0):r.next)&&!(l=l.call(r,f[1])).done)return l;if(r=0,l)f=[f[0]&2,l.value];switch(f[0]){case 0:case 1:l=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++;r=f[1];f=[0];continue;case 7:f=n.ops.pop();n.trys.pop();continue;
default:if(!(l=n.trys,l=0<l.length&&l[l.length-1])&&(6===f[0]||2===f[0])){n=0;continue}if(3===f[0]&&(!l||f[1]>l[0]&&f[1]<l[3]))n.label=f[1];else if(6===f[0]&&n.label<l[1])n.label=l[1],l=f;else if(l&&n.label<l[2])n.label=l[2],n.ops.push(f);else{l[2]&&n.ops.pop();n.trys.pop();continue}}f=y.call(F,n)}catch(b){f=[6,b],r=0}finally{t=l=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},t,r,l,d;return d={next:a(0),
"throw":a(1),"return":a(2)},"function"===typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d}}()})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(F,y){return function(){function a(u){void 0===u&&(u=[]);this._elements=u}a.prototype.length=function(){return this._elements.length};a.prototype.get=function(u){return this._elements[u]};a.prototype.toArray=function(){for(var u=[],n=0;n<this.length();n++)u.push(this.get(n));return u};return a}()})},"esri/arcade/languageUtils":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../libs/luxon/luxon dojo/number dojo/_base/kernel ./featureset/support/shared".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m,w,p,A){function C(N,aa,na){return""===aa||null===aa||void 0===aa||aa===na||aa===na?N:N=N.split(aa).join(na)}function z(N){return N instanceof Ia||N instanceof r||N instanceof Oa}function q(N){return v(N)||D(N)||G(N)||B(N)||null===N||N===y.voidOperation||"number"===typeof N?!0:!1}function v(N){return"string"===typeof N||N instanceof String}function B(N){return"boolean"===typeof N}function D(N){return"number"===typeof N}function x(N){return N instanceof Array}
function E(N){return N instanceof l}function G(N){return N instanceof Date}function I(N,aa){if(!1===isNaN(N)){if(void 0===aa||null===aa||""===aa)return N.toString();aa=C(aa,"\u2030","");aa=C(aa,"\u00a4","");return w.format(N,{pattern:aa})}return N.toString()}function L(N,aa){N=m.DateTime.fromJSDate(N);return void 0===aa||null===aa||""===aa?N.toISO({suppressMilliseconds:!0}):N.toFormat(Y(aa),{locale:p.locale,numberingSystem:"latn"})}function Y(N){N=N.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");var aa=
"",na=0;for(N=N.match(/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g);na<N.length;na++){var ca=N[na];switch(ca){case "D":aa+="d";break;case "DD":aa+="dd";break;case "DDD":aa+="o";break;case "d":aa+="c";break;case "ddd":aa+="ccc";break;case "dddd":aa+="cccc";break;case "M":aa+="L";break;case "MM":aa+="LL";break;case "MMM":aa+="LLL";break;case "MMMM":aa+=
"LLLL";break;case "YY":aa+="yy";break;case "Y":case "YYYY":aa+="yyyy";break;case "Q":aa+="q";break;case "Z":aa+="ZZ";break;case "ZZ":aa+="ZZZ";break;case "S":aa+="'S'";break;case "SS":aa+="'SS'";break;case "SSS":aa+="u";break;case "A":case "a":aa+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":aa+=ca;break;default:aa=2<=ca.length&&"["===ca.slice(0,1)&&"]"===ca.slice(-1)?aa+("'"+ca.slice(1,-1)+"'"):aa+("'"+ca+"'")}}return aa}function X(N,aa,
na){switch(na){case "\x3e":return N>aa;case "\x3c":return N<aa;case "\x3e\x3d":return N>=aa;case "\x3c\x3d":return N<=aa}return!1}function fa(N,aa){if(N===aa||null===N&&aa===y.voidOperation||null===aa&&N===y.voidOperation)return!0;if(G(N)&&G(aa))return N.getTime()===aa.getTime();if(N instanceof d||N instanceof f)return N.equalityTest(aa);if(N instanceof e&&aa instanceof e){var na=N.getCacheValue("_arcadeCacheId"),ca=aa.getCacheValue("_arcadeCacheId");if(void 0!==na&&null!==na)return na===ca}return void 0!==
N&&void 0!==aa&&null!==N&&null!==aa&&"object"===typeof N&&"object"===typeof aa&&(N._arcadeCacheId===aa._arcadeCacheId&&void 0!==N._arcadeCacheId&&null!==N._arcadeCacheId||N._underlyingGraphic===aa._underlyingGraphic&&void 0!==N._underlyingGraphic&&null!==N._underlyingGraphic)?!0:!1}function sa(N,aa){if(v(N))return N;if(null===N)return"";if(D(N))return I(N,aa);if(B(N))return N.toString();if(G(N))return L(N,aa);if(N instanceof c)return JSON.stringify(N.toJson());if(x(N)){aa=[];for(var na=0;na<N.length;na++)aa[na]=
ka(N[na]);return"["+aa.join(",")+"]"}if(N instanceof l){aa=[];for(na=0;na<N.length();na++)aa[na]=ka(N.get(na));return"["+aa.join(",")+"]"}return null!==N&&"object"===typeof N&&void 0!==N.castToText?N.castToText():z(N)?"object, Function":""}function T(N,aa){if(v(N))return N;if(null===N)return"";if(D(N))return I(N,aa);if(B(N))return N.toString();if(G(N))return L(N,aa);if(N instanceof c)return N instanceof b?'{"xmin":'+N.xmin.toString()+',"ymin":'+N.ymin.toString()+","+(N.hasZ?'"zmin":'+N.zmin.toString()+
",":"")+(N.hasM?'"mmin":'+N.mmin.toString()+",":"")+'"xmax":'+N.xmax.toString()+',"ymax":'+N.ymax.toString()+","+(N.hasZ?'"zmax":'+N.zmax.toString()+",":"")+(N.hasM?'"mmax":'+N.mmax.toString()+",":"")+'"spatialReference":'+Z(N.spatialReference)+"}":Z(N.toJson(),function(ca,ea){return ca.key===ea.key?0:"spatialReference"===ca.key?1:"spatialReference"===ea.key||ca.key<ea.key?-1:ca.key>ea.key?1:0});if(x(N)){aa=[];for(var na=0;na<N.length;na++)aa[na]=ka(N[na]);return"["+aa.join(",")+"]"}if(N instanceof
l){aa=[];for(na=0;na<N.length();na++)aa[na]=ka(N.get(na));return"["+aa.join(",")+"]"}return null!==N&&"object"===typeof N&&void 0!==N.castToText?N.castToText():z(N)?"object, Function":""}function ka(N){return null===N?"null":B(N)||D(N)||v(N)?JSON.stringify(N):N instanceof c||N instanceof l||N instanceof Array?T(N):N instanceof Date?JSON.stringify(L(N,"")):null!==N&&"object"===typeof N&&void 0!==N.castToText?N.castToText():"null"}function ma(N,aa){return D(N)?N:null===N||""===N?0:G(N)?NaN:B(N)?N?1:
0:x(N)||""===N||void 0===N?NaN:void 0!==aa&&v(N)?(aa=C(aa,"\u2030",""),aa=C(aa,"\u00a4",""),w.parse(N,{pattern:aa})):N===y.voidOperation?0:Number(N)}function wa(N){var aa=/ (\d\d)/,na=m.DateTime.fromISO(N);return na.isValid||aa.test(N)&&(N=N.replace(aa,"T$1"),na=m.DateTime.fromISO(N),na.isValid)?na:null}function ja(N,aa){if(!N||!N.domain)return aa;var na=null;if("string"===N.field.type||"esriFieldTypeString"===N.field.type)aa=sa(aa);else{if(null===aa||void 0===aa)return null;if(""===aa)return aa;
aa=ma(aa)}for(var ca=0;ca<N.domain.codedValues.length;ca++){var ea=N.domain.codedValues[ca];ea.code===aa&&(na=ea)}return null===na?aa:na.name}function ua(N,aa){if(!N||!N.domain)return aa;var na=null;aa=sa(aa);for(var ca=0;ca<N.domain.codedValues.length;ca++){var ea=N.domain.codedValues[ca];ea.name===aa&&(na=ea)}return null===na?aa:na.code}function Ba(N,aa,na,ca){void 0===na&&(na=null);void 0===ca&&(ca=null);if(!aa||!aa.fields)return null;for(var ea=null,oa=0;oa<aa.fields.length;oa++){var ta=aa.fields[oa];
ta.name.toLowerCase()===N.toString().toLowerCase()&&(ea=ta)}if(null===ea)throw Error("Field not found");var O,V;null===ca&&na&&aa.typeIdField&&(ca=na.hasField(aa.typeIdField)?na.field(aa.typeIdField):null);null!==ca&&void 0!==ca&&aa.types.some(function(pa){return pa.id===ca?((O=pa.domains&&pa.domains[ea.name])&&"inherited"===O.type&&(O=M(ea.name,aa),V=!0),!0):!1});V||O||(O=M(N,aa));return{field:ea,domain:O}}function M(N,aa){var na;aa.fields.some(function(ca){ca.name.toLowerCase()===N.toLowerCase()&&
(na=ca.domain);return!!na});return na}function Z(N,aa){aa||(aa={});"function"===typeof aa&&(aa={cmp:aa});var na="boolean"===typeof aa.cycles?aa.cycles:!1,ca=aa.cmp&&function(oa){return function(ta){return function(O,V){return oa({key:O,value:ta[O]},{key:V,value:ta[V]})}}}(aa.cmp),ea=[];return function O(ta){ta&&ta.toJson&&"function"===typeof ta.toJson&&(ta=ta.toJson());if(void 0!==ta){if("number"===typeof ta)return isFinite(ta)?""+ta:"null";if("object"!==typeof ta)return JSON.stringify(ta);var V;
if(Array.isArray(ta)){var pa="[";for(V=0;V<ta.length;V++)V&&(pa+=","),pa+=O(ta[V])||"null";return pa+"]"}if(null===ta)return"null";if(ea.includes(ta)){if(na)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var za=ea.push(ta)-1,Ja=Object.keys(ta).sort(ca&&ca(ta));pa="";for(V=0;V<Ja.length;V++){var Qa=Ja[V],J=O(ta[Qa]);J&&(pa&&(pa+=","),pa+=JSON.stringify(Qa)+":"+J)}ea.splice(za,1);return"{"+pa+"}"}}(N)}function ia(N,aa){if(aa instanceof e)N.push([aa.x,
aa.y]);else throw Error("Invalid Argument");}function qa(N,aa){void 0===aa&&(aa=null);if(null!=N){if(B(N)||D(N)||v(N))return N;if(N instanceof c)return!0===(null===aa||void 0===aa?void 0:aa.keepGeometryType)?N:N.toJson();if(N instanceof l)return N.toArray().map(function(na){return qa(na,aa)});if(N instanceof Array)return N.map(function(na){return qa(na,aa)});if(N instanceof Date)return N;if(null!==N&&"object"===typeof N&&void 0!==N.castAsJson)return N.castAsJson(aa)}return null}function ya(N,aa,na,
ca,ea){return a(this,void 0,void 0,function(){var oa;return u(this,function(ta){switch(ta.label){case 0:return[4,Ca(N,aa,na)];case 1:return oa=ta.sent(),ea[ca]=oa,[2]}})})}function Ca(N,aa,na){void 0===aa&&(aa=null);void 0===na&&(na=null);return a(this,void 0,void 0,function(){var ca,ea,oa,ta,O;return u(this,function(V){switch(V.label){case 0:return N instanceof l&&(N=N.toArray()),null!=N?[3,1]:[2,null];case 1:return q(N)||N instanceof c||N instanceof Date?[2,qa(N,na)]:[3,2];case 2:if(!(N instanceof
Array))return[3,5];ca=[];ea=[];oa=0;for(ta=N;oa<ta.length;oa++)O=ta[oa],null===O||q(O)||O instanceof c||O instanceof Date?ea.push(qa(O,na)):(ea.push(null),ca.push(ya(O,aa,na,ea.length-1,ea)));return 0<ca.length?[4,Promise.all(ca)]:[3,4];case 3:V.sent(),V.label=4;case 4:return[2,ea];case 5:if(null!==N&&"object"===typeof N&&void 0!==N.castAsJsonAsync)return[2,N.castAsJsonAsync(aa,na)];V.label=6;case 6:return[2,null]}})})}Object.defineProperty(y,"__esModule",{value:!0});y.featureSchema=y.featureDomainCodeLookup=
y.featureDomainValueLookup=y.featureSubtypes=y.featureFullDomain=y.castAsJsonAsync=y.castAsJson=y.binaryOperator=y.tick=y.toStringArray=y.autoCastArrayOfPointsToMultiPoint=y.autoCastArrayOfPointsToPolyline=y.autoCastArrayOfPointsToPolygon=y.autoCastFeatureToGeometry=y.stableStringify=y.getDomain=y.getDomainCode=y.getDomainValue=y.fixNullGeometry=y.fixSpatialReference=y.toBoolean=y.toDateTime=y.toDate=y.toNumber=y.toStringExplicit=y.toNumberArray=y.toString=y.equalityTest=y.greaterThanLessThan=y.standardiseDateFormat=
y.formatDate=y.formatNumber=y.generateUUID=y.absRound=y.pcCheck=y.isDate=y.isImmutableArray=y.isFeatureSetCollection=y.isFeatureSet=y.isFeature=y.isArray=y.isInteger=y.isNumber=y.isBoolean=y.isString=y.defaultUndefined=y.isSimpleType=y.isFunctionParameter=y.multiReplace=y.continueResult=y.breakResult=y.voidOperation=y.SizzleFunction=y.ReturnResult=y.ImplicitResult=y.NativeFunction=y.SizzleFunctionE=y.NativeFunctionE=y.ImplicitResultE=y.ReturnResultE=void 0;F=function(){return function(N){this.value=
N}}();y.ReturnResultE=F;n=function(){return function(N){this.value=N}}();y.ImplicitResultE=n;var Ia=function(){return function(N){this.fn=N}}();y.NativeFunctionE=Ia;var Oa=function(){return function(N,aa){this.paramCount=aa;this.fn=N}}();y.SizzleFunctionE=Oa;y.NativeFunction=Ia;y.ImplicitResult=n;y.ReturnResult=F;y.SizzleFunction=Oa;y.voidOperation={type:"VOID"};y.breakResult={type:"BREAK"};y.continueResult={type:"CONTINUE"};y.multiReplace=C;y.isFunctionParameter=z;y.isSimpleType=q;y.defaultUndefined=
function(N,aa){return void 0===N?aa:N};y.isString=v;y.isBoolean=B;y.isNumber=D;y.isInteger=function(N){return"number"===typeof N&&isFinite(N)&&Math.floor(N)===N};y.isArray=x;y.isFeature=function(N){return"esri.arcade.Feature"===(null===N||void 0===N?void 0:N.arcadeDeclaredClass)?!0:!1};y.isFeatureSet=function(N){return!0===(N&&N.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===N.declaredRootClass)};y.isFeatureSetCollection=function(N){return!0===(N&&N.declaredRootClass&&"esri.arcade.featureSetCollection"===
N.declaredRootClass)};y.isImmutableArray=E;y.isDate=G;y.pcCheck=function(N,aa,na){if(N.length<aa||N.length>na)throw Error("Function called with wrong number of Parameters");};y.absRound=function(N){return 0>N?-Math.round(-N):Math.round(N)};y.generateUUID=function(){var N=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(aa){var na=(N+16*Math.random())%16|0;N=Math.floor(N/16);return("x"===aa?na:na&3|8).toString(16)})};y.formatNumber=I;y.formatDate=L;y.standardiseDateFormat=
Y;y.greaterThanLessThan=function(N,aa,na){if(null===N){if(null===aa||aa===y.voidOperation)return X(null,null,na);if(D(aa))return X(0,aa,na);if(v(aa)||B(aa))return X(0,ma(aa),na);if(G(aa))return X(0,aa.getTime(),na)}if(N===y.voidOperation){if(null===aa||aa===y.voidOperation)return X(null,null,na);if(D(aa))return X(0,aa,na);if(v(aa)||B(aa))return X(0,ma(aa),na);if(G(aa))return X(0,aa.getTime(),na)}else if(D(N)){if(D(aa))return X(N,aa,na);if(B(aa))return X(N,ma(aa),na);if(null===aa||aa===y.voidOperation)return X(N,
0,na);if(v(aa))return X(N,ma(aa),na);if(G(aa))return X(N,aa.getTime(),na)}else if(v(N)){if(v(aa))return X(sa(N),sa(aa),na);if(G(aa))return X(ma(N),aa.getTime(),na);if(D(aa))return X(ma(N),aa,na);if(null===aa||aa===y.voidOperation)return X(ma(N),0,na);if(B(aa))return X(ma(N),ma(aa),na)}else if(G(N)){if(G(aa))return X(N,aa,na);if(null===aa||aa===y.voidOperation)return X(N.getTime(),0,na);if(D(aa))return X(N.getTime(),aa,na);if(B(aa)||v(aa))return X(N.getTime(),ma(aa),na)}else if(B(N)){if(B(aa))return X(N,
aa,na);if(D(aa))return X(ma(N),ma(aa),na);if(G(aa))return X(ma(N),aa.getTime(),na);if(null===aa||aa===y.voidOperation)return X(ma(N),0,na);if(v(aa))return X(ma(N),ma(aa),na)}return!fa(N,aa)||"\x3c\x3d"!==na&&"\x3e\x3d"!==na?!1:!0};y.equalityTest=fa;y.toString=sa;y.toNumberArray=function(N){var aa=[];if(!1===x(N))return null;if(N instanceof l){for(var na=0;na<N.length();na++)aa[na]=ma(N.get(na));return aa}for(na=0;na<N.length;na++)aa[na]=ma(N[na]);return aa};y.toStringExplicit=T;y.toNumber=ma;y.toDate=
function(N){return G(N)?N:v(N)&&(N=wa(N))?N.toJSDate():null};y.toDateTime=function(N){return G(N)?m.DateTime.fromJSDate(N):v(N)?wa(N):null};y.toBoolean=function(N){return B(N)?N:v(N)?(N=N.toLowerCase(),"true"===N?!0:!1):D(N)?0===N||isNaN(N)?!1:!0:!1};y.fixSpatialReference=function(N,aa){if(null===N||void 0===N)return null;if(null===N.spatialReference||void 0===N.spatialReference)N.spatialReference=aa;return N};y.fixNullGeometry=function(N){if(null===N)return null;if(N instanceof e)return"NaN"===N.x||
null===N.x||isNaN(N.x)?null:N;if(N instanceof h){if(0===N.rings.length)return null;for(var aa=0,na=N.rings;aa<na.length;aa++){var ca=na[aa];if(0<ca.length)return N}return null}if(N instanceof k){if(0===N.paths.length)return null;aa=0;for(na=N.paths;aa<na.length;aa++)if(ca=na[aa],0<ca.length)return N;return null}return N instanceof g?0===N.points.length?null:N:N instanceof b?"NaN"===N.xmin||null===N.xmin||isNaN(N.xmin)?null:N:null};y.getDomainValue=ja;y.getDomainCode=ua;y.getDomain=Ba;y.stableStringify=
Z;y.autoCastFeatureToGeometry=function(N){if(null===N)return null;for(var aa=[],na=0;na<N.length;na++){var ca=N[na];ca&&ca.arcadeDeclaredClass&&"esri.arcade.Feature"===ca.arcadeDeclaredClass?aa.push(ca.geometry()):aa.push(ca)}return aa};y.autoCastArrayOfPointsToPolygon=function(N,aa){if(x(N)||E(N)){var na=!1,ca=!1,ea=[];if(x(N)){for(var oa=0;oa<N.length;oa++){var ta=N[oa];ia(ea,ta)}0<ea.length&&(aa=N[0].spatialReference,na=N[0].hasZ,ca=N[0].hasM)}else if(N instanceof f)ea=N._elements,0<ea.length&&
(na=N._hasZ,ca=N._hasM,aa=N.get(0).spatialReference);else if(E(N)){oa=0;for(var O=N.toArray();oa<O.length;oa++)ta=O[oa],ia(ea,ta);0<ea.length&&(aa=N.get(0).spatialReference,na=!0===N.get(0).hasZ,ca=!0===N.get(0).hasM)}else throw Error("Invalid Argument");if(0===ea.length)return null;!1===(new h({rings:[],spatialReference:{wkid:4326}})).isClockwise(ea)&&(ea=ea.slice(0).reverse());return new h({rings:[ea],spatialReference:aa,hasZ:na,hasM:ca})}return N};y.autoCastArrayOfPointsToPolyline=function(N,aa){if(x(N)||
E(N)){var na=!1,ca=!1,ea=[];if(x(N)){for(var oa=0;oa<N.length;oa++){var ta=N[oa];ia(ea,ta)}0<ea.length&&(aa=N[0].spatialReference,na=!0===N[0].hasZ,ca=!0===N[0].hasM)}else if(N instanceof f)ea=N._elements,0<ea.length&&(na=N._hasZ,ca=N._hasM,aa=N.get(0).spatialReference);else if(E(N)){oa=0;for(var O=N.toArray();oa<O.length;oa++)ta=O[oa],ia(ea,ta);0<ea.length&&(aa=N.get(0).spatialReference,na=!0===N.get(0).hasZ,ca=!0===N.get(0).hasM)}return 0===ea.length?null:new k({paths:[ea],spatialReference:aa,hasZ:na,
hasM:ca})}return N};y.autoCastArrayOfPointsToMultiPoint=function(N,aa){if(x(N)||E(N)){var na=!1,ca=!1,ea=[];if(x(N)){for(var oa=0;oa<N.length;oa++){var ta=N[oa];ia(ea,ta)}0<ea.length&&(aa=N[0].spatialReference,na=!0===N[0].hasZ,ca=!0===N[0].hasM)}else if(N instanceof f)ea=N._elements,0<ea.length&&(na=N._hasZ,ca=N._hasM,aa=N.get(0).spatialReference);else if(E(N)){oa=0;for(var O=N.toArray();oa<O.length;oa++)ta=O[oa],ia(ea,ta);0<ea.length&&(aa=N.get(0).spatialReference,na=!0===N.get(0).hasZ,ca=!0===
N.get(0).hasM)}return 0===ea.length?null:new g({points:ea,spatialReference:aa,hasZ:na,hasM:ca})}return N};y.toStringArray=function(N,aa){void 0===aa&&(aa=!1);var na=[];if(null===N)return na;if(!0===x(N)){for(var ca=0;ca<N.length;ca++){var ea=sa(N[ca]);""===ea&&!0!==aa||na.push(ea)}return na}if(N instanceof l){for(ca=0;ca<N.length();ca++)ea=sa(N.get(ca)),""===ea&&!0!==aa||na.push(ea);return na}return q(N)?(ea=sa(N),""===ea&&!0!==aa||na.push(ea),na):[]};var la=0;y.tick=function(N){la++;return 0===la%
100?(la=0,new Promise(function(aa){setTimeout(function(){aa(N)},0)})):N};y.binaryOperator=function(N,aa,na){switch(na){case "\x26":return N&aa;case "|":return N|aa;case "^":return N^aa;case "\x3c\x3c":return N<<aa;case "\x3e\x3e":return N>>aa;case "\x3e\x3e\x3e":return N>>>aa}};y.castAsJson=qa;y.castAsJsonAsync=Ca;y.featureFullDomain=function(N,aa,na){var ca=N.fullSchema();return null!==ca&&ca.fields?Ba(aa,ca,N,na):null};y.featureSubtypes=function(N){N=N.fullSchema();return null!==N&&N.fields?N.typeIdField?
{subtypeField:N.typeIdField,subtypes:N.types?N.types.map(function(aa){return{name:aa.name,code:aa.id}}):[]}:null:null};y.featureDomainValueLookup=function(N,aa,na,ca){var ea=N.fullSchema();if(null===ea||!ea.fields)return null;ca=Ba(aa,ea,N,ca);if(void 0===na)try{na=N.field(aa)}catch(oa){return null}return ja(ca,na)};y.featureDomainCodeLookup=function(N,aa,na,ca){var ea=N.fullSchema();if(null===ea||!ea.fields)return null;if(void 0===na){try{na=N.field(aa)}catch(oa){return null}return na}N=Ba(aa,ea,
N,ca);return ua(N,na)};y.featureSchema=function(N){N=N.fullSchema();if(null===N||!N.fields)return null;for(var aa=[],na=0,ca=N.fields;na<ca.length;na++)aa.push(A.esriFieldToJson(ca[na]));return{objectIdField:N.objectIdField,globalIdField:N.globalIdField,geometryType:void 0===A.layerGeometryEsriRestConstants[N.geometryType]?"":A.layerGeometryEsriRestConstants[N.geometryType],fields:aa}}})},"esri/arcade/polyfill/tsSupport/assign":function(){define([],function(){return function(){return function(){return(Object.assign||
function(F){for(var y,a=1,u=arguments.length;a<u;a++){y=arguments[a];for(var n in y)Object.prototype.hasOwnProperty.call(y,n)&&(F[n]=y[n])}return F}).apply(this,arguments)}}()})},"esri/arcade/polyfill/tsSupport/spreadarray":function(){define([],function(){return function(){return function(F,y,a){if(a||2===arguments.length)for(var u=0,n=y.length,t;u<n;u++)!t&&u in y||(t||(t=Array.prototype.slice.call(y,0,u)),t[u]=y[u]);return F.concat(t||Array.prototype.slice.call(y))}}()})},"esri/arcade/FunctionWrapper":function(){define(["require",
"exports"],function(F,y){return function(){return function(a,u){this.context=this.definition=null;this.definition=a;this.context=u}}()})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","./polyfill/tsSupport/extends","./ImmutableArray","./ImmutablePointArray"],function(F,y,a,u,n){return function(t){function r(l,d,f,b,c){l=t.call(this,l)||this;l._lazyPath=[];l._hasZ=!1;l._hasM=!1;l._hasZ=f;l._hasM=b;l._spRef=d;l._cacheId=c;return l}a(r,t);r.prototype.get=function(l){if(void 0===
this._lazyPath[l]){var d=this._elements[l];if(void 0===d)return;this._lazyPath[l]=new n(d,this._spRef,this._hasZ,this._hasM,this._cacheId,l)}return this._lazyPath[l]};r.prototype.equalityTest=function(l){return l===this?!0:null===l||!1===l instanceof r?!1:l.getUniqueHash()===this.getUniqueHash()};r.prototype.getUniqueHash=function(){return this._cacheId.toString()};return r}(u)})},"esri/arcade/polyfill/tsSupport/extends":function(){define([],function(){return function(){var F=function(y,a){F=Object.setPrototypeOf||
{__proto__:[]}instanceof Array&&function(u,n){u.__proto__=n}||function(u,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(u[t]=n[t])};return F(y,a)};return function(y,a){function u(){this.constructor=y}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");F(y,a);y.prototype=null===a?Object.create(a):(u.prototype=a.prototype,new u)}}()})},"esri/arcade/ImmutablePointArray":function(){define(["require","exports","./polyfill/tsSupport/extends",
"./ImmutableArray","../geometry/Point"],function(F,y,a,u,n){return function(t){function r(l,d,f,b,c,g){l=t.call(this,l)||this;l._lazyPt=[];l._hasZ=!1;l._hasM=!1;l._spRef=d;l._hasZ=f;l._hasM=b;l._cacheId=c;l._partId=g;return l}a(r,t);r.prototype.get=function(l){if(void 0===this._lazyPt[l]){var d=this._elements[l];if(void 0===d)return;var f=this._hasZ,b=this._hasM,c=null;c=f&&!b?new n(d[0],d[1],d[2],void 0,this._spRef):b&&!f?new n(d[0],d[1],void 0,d[2],this._spRef):f&&b?new n(d[0],d[1],d[2],d[3],this._spRef):
new n(d[0],d[1],this._spRef);c.setCacheValue("_arcadeCacheId",this._cacheId.toString()+"-"+this._partId.toString()+"-"+l.toString());this._lazyPt[l]=c}return this._lazyPt[l]};r.prototype.equalityTest=function(l){return l===this?!0:null===l||!1===l instanceof r?!1:l.getUniqueHash()===this.getUniqueHash()};r.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return r}(u)})},"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),
function(F,y,a,u,n,t,r,l,d,f){function b(){}function c(){}t={type:"multipoint",points:null};F=F(r,{declaredClass:"esri.geometry.Multipoint",type:"multipoint",points:null,constructor:function(g){this.points=[];g&&(g.points?n.mixin(this,g):this.spatialReference=g,this.spatialReference&&(this.spatialReference=f.createSpatialReference(this.spatialReference)));this.verifySR()},addPoint:function(g){this.clearCache();y.isArray(g)?this.points.push(g):this.points.push([g.x,g.y]);return this},removePoint:function(g){if(this._validateInputs(g))return this.clearCache(),
new l(this.points.splice(g,1)[0],this.spatialReference)},getExtent:function(){var g=this.getCacheValue("_extent");if(g)return new d(g);g=this.points;var e=g.length;if(e){var h=g[0],k,m,w=k=h[0],p=m=h[1],A=Math.min,C=Math.max,z=this.spatialReference,q;for(q=0;q<e;q++){h=g[q];var v=h[0];h=h[1];w=A(w,v);p=A(p,h);k=C(k,v);m=C(m,h)}g={xmin:w,ymin:p,xmax:k,ymax:m,spatialReference:z?z.toJson():null};this.setCacheValue("_extent",g);return new d(g)}},_validateInputs:function(g){return null===g||0>g||g>=this.points.length?
!1:!0},getPoint:function(g){if(this._validateInputs(g))return g=this.points[g],new l(g[0],g[1],this.spatialReference)},setPoint:function(g,e){if(this._validateInputs(g))return this.clearCache(),this.points[g]=[e.x,e.y],this},toJson:function(){var g={points:n.clone2DArray(this.points)},e=this.spatialReference;e&&(g.spatialReference=e.toJson());return g}});b.prototype=F.prototype;c.prototype=new b;Object.defineProperty(c.prototype,"points",{get:function(){this._unquantizeFn&&(this._pointsVal=this._unquantizeFn({points:n.clone2DArray(this._pointsVal)}).points,
this._unquantizeFn=null);return this._pointsVal},set:function(g){this._pointsVal=g}});c.prototype.setupLazyUnquantization=function(g,e){this._unquantizeFn=g;this._pointsVal=e.points};F.simpleConstructor=b;F.accessorConstructor=c;F.defaultProps=t;a("extend-esri")&&(y.setObject("geometry.Multipoint",F,u),u.geometry.defaultMultipoint=t);return F})},"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c){function g(){}function e(){}r={type:"polygon",rings:null};var h=F(l,{declaredClass:"esri.geometry.Polygon",type:"polygon",rings:null,constructor:function(k){this.rings=[];this._ring=0;k&&(a.isArray(k)?this.rings=a.isArray(k[0][0])?k:[k]:k.rings?t.mixin(this,k):this.spatialReference=k,this.spatialReference&&(this.spatialReference=c.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(k){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=
[];a.isArray(k[0])?y.forEach(k,this._addPointArr,this):y.forEach(k,this._addPoint,this);return this},_addPointArr:function(k){this.rings[this._ring].push(k)},_addPoint:function(k){this.rings[this._ring].push([k.x,k.y])},_insertPoints:function(k,m){this.clearCache();this._ring=m;this.rings[this._ring]||(this.rings[this._ring]=[]);y.forEach(k,this._addPoint,this)},_validateInputs:function(k,m){return null!==k&&void 0!==k&&(0>k||k>=this.rings.length)||null!==m&&void 0!==k&&(0>m||m>=this.rings[k].length)?
!1:!0},getPoint:function(k,m){if(this._validateInputs(k,m))return new d(this.rings[k][m],this.spatialReference)},setPoint:function(k,m,w){if(this._validateInputs(k,m))return this.clearCache(),this.rings[k][m]=[w.x,w.y],this},insertPoint:function(k,m,w){if(this._validateInputs(k)&&null!=m&&0<=m&&m<=this.rings[k].length)return this.clearCache(),this.rings[k].splice(m,0,[w.x,w.y]),this},removeRing:function(k){if(this._validateInputs(k,null)){this.clearCache();k=this.rings.splice(k,1)[0];var m,w=k.length,
p=this.spatialReference;for(m=0;m<w;m++)k[m]=new d(k[m],p);return k}},removePoint:function(k,m){if(this._validateInputs(k,m))return this.clearCache(),new d(this.rings[k].splice(m,1)[0],this.spatialReference)},getExtent:function(){var k=this.getCacheValue("_extent");var m=this.getCacheValue("_partwise");if(k)return k=new f(k),k._partwise=m,k;k=this.rings;var w=k.length;if(w&&k[0].length){var p,A,C,z,q=p=k[0][0][0],v=A=k[0][0][1],B=Math.min,D=Math.max,x=this.spatialReference;m=[];var E,G;for(C=0;C<
w;C++){var I=k[C];var L=E=I[0]&&I[0][0];var Y=G=I[0]&&I[0][1];var X=I.length;for(z=0;z<X;z++){var fa=I[z];var sa=fa[0];fa=fa[1];q=B(q,sa);v=B(v,fa);p=D(p,sa);A=D(A,fa);L=B(L,sa);Y=B(Y,fa);E=D(E,sa);G=D(G,fa)}m.push(new f({xmin:L,ymin:Y,xmax:E,ymax:G,spatialReference:x?x.toJson():null}))}k={xmin:q,ymin:v,xmax:p,ymax:A,spatialReference:x?x.toJson():null};m=1<m.length?m:null;this.setCacheValue("_extent",k);this.setCacheValue("_partwise",m);k=new f(k);k._partwise=m;return k}},contains:function(k){var m=
this.rings,w=!1,p,A,C,z=m.length;var q=this.spatialReference;var v=k.spatialReference;var B=k.x;k=k.y;q&&v&&!q.equals(v)&&q._canProject(v)&&(k=q.isWebMercator()?d.lngLatToXY(B,k):d.xyToLngLat(B,k,!0),B=k[0],k=k[1]);for(C=0;C<z;C++){q=m[C];var D=q.length;for(A=p=0;A<D;A++){p++;p===D&&(p=0);v=q[A];var x=q[p];(v[1]<k&&x[1]>=k||x[1]<k&&v[1]>=k)&&v[0]+(k-v[1])/(x[1]-v[1])*(x[0]-v[0])<B&&(w=!w)}}return w},getCentroid:function(){var k=this.getCacheValue("_centroid");if(void 0!==k)return k;k=this.rings;var m,
w,p=[],A,C,z=Infinity,q=-Infinity,v=Infinity,B=-Infinity;y.forEach(k,function(E){D=m=w=0;y.forEach(E,function(G,I){I<E.length-1&&(A=E[I+1],C=G[0]*A[1]-A[0]*G[1],D+=(G[0]+A[0])*C,m+=(G[1]+A[1])*C,w+=C,G[0]<z&&(z=G[0]),G[0]>q&&(q=G[0]),G[1]<v&&(v=G[1]),G[1]>B&&(B=G[1]))});0<w&&(w*=-1);w&&p.push([D,m,w/2])});p.sort(function(E,G){return E[2]-G[2]});var D=m=void 0;if(p[0]){var x=6*p[0][2];D=p[0][0]/x;m=p[0][1]/x;if(D<z||D>q||m<v||m>B)D=m=void 0}if(void 0===D||void 0===m)if(k=k[0]&&k[0].length?this._getLineCentroid(k[0]):
null)D=k.x,m=k.y;k=isNaN(D)||isNaN(m)?null:new d(D,m,this.spatialReference);this.setCacheValue("_centroid",k);return k},_getLineCentroid:function(k){var m=0,w=0,p=0,A={x:0,y:0},C={x:0,y:0},z,q=k.length,v;for(z=0;z<q-1;z++){var B=k[z];var D=k[z+1];if(B&&D){A.x=B[0];A.y=B[1];C.x=D[0];C.y=D[1];var x=b.getLength(A,C);0<x&&(m+=x,B=b.getMidpoint(B,D),w+=x*B[0],p+=x*B[1])}}0<m?v={x:w/m,y:p/m}:k[0]&&(v={x:k[0][0],y:k[0][1]});return v},isClockwise:function(k){var m=0,w,p=k.length,A=a.isArray(k[0])?function(C,
z){return C[0]*z[1]-z[0]*C[1]}:function(C,z){return C.x*z.y-z.x*C.y};for(w=0;w<p;w++)m+=A(k[w],k[(w+1)%p]);return 0>=m/2},isSelfIntersecting:function(k){k=k||this;var m,w,p,A,C,z=k.rings.length;for(p=0;p<z;p++){for(m=0;m<k.rings[p].length-1;m++){var q=[[k.rings[p][m][0],k.rings[p][m][1]],[k.rings[p][m+1][0],k.rings[p][m+1][1]]];for(w=p+1;w<z;w++)for(A=0;A<k.rings[w].length-1;A++){var v=[[k.rings[w][A][0],k.rings[w][A][1]],[k.rings[w][A+1][0],k.rings[w][A+1][1]]];if((C=b._getLineIntersection2(q,v))&&
!(C[0]===q[0][0]&&C[1]===q[0][1]||C[0]===v[0][0]&&C[1]===v[0][1]||C[0]===q[1][0]&&C[1]===q[1][1]||C[0]===v[1][0]&&C[1]===v[1][1]))return!0}}A=k.rings[p].length;if(!(4>=A))for(m=0;m<A-3;m++){var B=A-1;0===m&&(B=A-2);q=[[k.rings[p][m][0],k.rings[p][m][1]],[k.rings[p][m+1][0],k.rings[p][m+1][1]]];for(w=m+2;w<B;w++)if(v=[[k.rings[p][w][0],k.rings[p][w][1]],[k.rings[p][w+1][0],k.rings[p][w+1][1]]],(C=b._getLineIntersection2(q,v))&&!(C[0]===q[0][0]&&C[1]===q[0][1]||C[0]===v[0][0]&&C[1]===v[0][1]||C[0]===
q[1][0]&&C[1]===q[1][1]||C[0]===v[1][0]&&C[1]===v[1][1]))return!0}}return!1},toJson:function(){var k={rings:t.clone3DArray(this.rings)},m=this.spatialReference;m&&(k.spatialReference=m.toJson());return k}});g.prototype=h.prototype;e.prototype=new g;Object.defineProperty(e.prototype,"rings",{get:function(){this._unquantizeFn&&(this._ringsVal=this._unquantizeFn({rings:t.clone3DArray(this._ringsVal)}).rings,this._unquantizeFn=null);return this._ringsVal},set:function(k){this._ringsVal=k}});e.prototype.setupLazyUnquantization=
function(k,m){this._unquantizeFn=k;this._ringsVal=m.rings};h.simpleConstructor=g;h.accessorConstructor=e;h.defaultProps=r;h.createEllipse=function(k){var m=k.center.x,w=k.center.y,p=k.longAxis,A=k.shortAxis,C=k.numberOfPoints,z=k.map,q;k=[];var v=2*Math.PI/C;for(q=0;q<C;q++){var B=Math.cos(q*v);var D=Math.sin(q*v);B=z.toMap({x:p*B+m,y:A*D+w});k.push(B)}k.push(k[0]);m=new h(z.spatialReference);m.addRing(k);return m};h.createCircle=function(k){return h.createEllipse({center:k.center,longAxis:k.r,shortAxis:k.r,
numberOfPoints:k.numberOfPoints,map:k.map})};h.fromExtent=function(k){var m=k.normalize();k=k.spatialReference;return new h({rings:y.map(m,function(w){return[[w.xmin,w.ymin],[w.xmin,w.ymax],[w.xmax,w.ymax],[w.xmax,w.ymin],[w.xmin,w.ymin]]}),spatialReference:k?k.toJson():null})};u("extend-esri")&&(a.setObject("geometry.Polygon",h,n),n.geometry.defaultPolygon=r,n.geometry.createEllipse=h.createEllipse,n.geometry.createCircle=h.createCircle,n.geometry.isClockwise=h.prototype.isClockwise,n.geometry.polygonSelfIntersecting=
h.prototype.isSelfIntersecting);return h})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(F,y,a,u,n,t,r,l,d,f,b){function c(){}function g(){}r={type:"polyline",paths:null};F=F(l,{declaredClass:"esri.geometry.Polyline",type:"polyline",paths:null,constructor:function(e){this.paths=[];this._path=0;e&&(a.isArray(e)?this.paths=a.isArray(e[0][0])?e:
[e]:e.paths?t.mixin(this,e):this.spatialReference=e,this.spatialReference&&(this.spatialReference=b.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(e){this.clearCache();this._path=this.paths.length;this.paths[this._path]=[];a.isArray(e[0])?y.forEach(e,this._addPointArr,this):y.forEach(e,this._addPoint,this);return this},_addPointArr:function(e){this.paths[this._path].push(e)},_addPoint:function(e){this.paths[this._path].push([e.x,e.y])},_insertPoints:function(e,h){this.clearCache();
this._path=h;this.paths[this._path]||(this.paths[this._path]=[]);y.forEach(e,this._addPoint,this)},_validateInputs:function(e,h){return null!==e&&void 0!==e&&(0>e||e>=this.paths.length)||null!==h&&void 0!==e&&(0>h||h>=this.paths[e].length)?!1:!0},getPoint:function(e,h){if(this._validateInputs(e,h))return new d(this.paths[e][h],this.spatialReference)},setPoint:function(e,h,k){if(this._validateInputs(e,h))return this.clearCache(),this.paths[e][h]=[k.x,k.y],this},insertPoint:function(e,h,k){if(this._validateInputs(e)&&
null!=h&&0<=h&&h<=this.paths[e].length)return this.clearCache(),this.paths[e].splice(h,0,[k.x,k.y]),this},removePath:function(e){if(this._validateInputs(e,null)){this.clearCache();e=this.paths.splice(e,1)[0];var h,k=e.length,m=this.spatialReference;for(h=0;h<k;h++)e[h]=new d(e[h],m);return e}},removePoint:function(e,h){if(this._validateInputs(e,h))return this.clearCache(),new d(this.paths[e].splice(h,1)[0],this.spatialReference)},getExtent:function(){var e=this.getCacheValue("_extent");var h=this.getCacheValue("_partwise");
if(e)return e=new f(e),e._partwise=h,e;e=this.paths;var k=e.length;if(k&&e[0].length){var m,w,p,A,C=m=e[0][0][0],z=w=e[0][0][1],q=Math.min,v=Math.max,B=this.spatialReference;h=[];var D,x;for(p=0;p<k;p++){var E=e[p];var G=D=E[0]&&E[0][0];var I=x=E[0]&&E[0][1];var L=E.length;for(A=0;A<L;A++){var Y=E[A];var X=Y[0];Y=Y[1];C=q(C,X);z=q(z,Y);m=v(m,X);w=v(w,Y);G=q(G,X);I=q(I,Y);D=v(D,X);x=v(x,Y)}h.push(new f({xmin:G,ymin:I,xmax:D,ymax:x,spatialReference:B?B.toJson():null}))}e={xmin:C,ymin:z,xmax:m,ymax:w,
spatialReference:B?B.toJson():null};h=1<h.length?h:null;this.setCacheValue("_extent",e);this.setCacheValue("_partwise",h);e=new f(e);e._partwise=h;return e}},toJson:function(){var e={paths:t.clone3DArray(this.paths)},h=this.spatialReference;h&&(e.spatialReference=h.toJson());return e}});c.prototype=F.prototype;g.prototype=new c;Object.defineProperty(g.prototype,"paths",{get:function(){this._unquantizeFn&&(this._pathsVal=this._unquantizeFn({paths:t.clone3DArray(this._pathsVal)}).paths,this._unquantizeFn=
null);return this._pathsVal},set:function(e){this._pathsVal=e}});g.prototype.setupLazyUnquantization=function(e,h){this._unquantizeFn=e;this._pathsVal=h.paths};F.simpleConstructor=c;F.accessorConstructor=g;F.defaultProps=r;u("extend-esri")&&(a.setObject("geometry.Polyline",F,n),n.geometry.defaultPolyline=r);return F})},"esri/libs/luxon/luxon":function(){define(["exports"],function(F){function y(P,W){for(var H=0;H<W.length;H++){var R=W[H];R.enumerable=R.enumerable||!1;R.configurable=!0;"value"in R&&
(R.writable=!0);Object.defineProperty(P,R.key,R)}}function a(P,W,H){W&&y(P.prototype,W);H&&y(P,H);return P}function u(){u=Object.assign||function(P){for(var W=1;W<arguments.length;W++){var H=arguments[W],R;for(R in H)Object.prototype.hasOwnProperty.call(H,R)&&(P[R]=H[R])}return P};return u.apply(this,arguments)}function n(P,W){P.prototype=Object.create(W.prototype);P.prototype.constructor=P;r(P,W)}function t(P){t=Object.setPrototypeOf?Object.getPrototypeOf:function(W){return W.__proto__||Object.getPrototypeOf(W)};
return t(P)}function r(P,W){r=Object.setPrototypeOf||function(H,R){H.__proto__=R;return H};return r(P,W)}function l(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(P){return!1}}function d(P,W,H){d=l()?Reflect.construct:function(R,da,va){var Ka=[null];Ka.push.apply(Ka,da);R=new (Function.bind.apply(R,Ka));va&&r(R,va.prototype);return R};
return d.apply(null,arguments)}function f(P){var W="function"===typeof Map?new Map:void 0;f=function(H){function R(){return d(H,arguments,t(this).constructor)}if(null===H||-1===Function.toString.call(H).indexOf("[native code]"))return H;if("function"!==typeof H)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof W){if(W.has(H))return W.get(H);W.set(H,R)}R.prototype=Object.create(H.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}});
return r(R,H)};return f(P)}function b(P,W){if(null==P)return{};var H={},R=Object.keys(P),da;for(da=0;da<R.length;da++){var va=R[da];0<=W.indexOf(va)||(H[va]=P[va])}return H}function c(P,W){if(P){if("string"===typeof P)return g(P,W);var H=Object.prototype.toString.call(P).slice(8,-1);"Object"===H&&P.constructor&&(H=P.constructor.name);if("Map"===H||"Set"===H)return Array.from(P);if("Arguments"===H||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H))return g(P,W)}}function g(P,W){if(null==W||W>P.length)W=
P.length;for(var H=0,R=Array(W);H<W;H++)R[H]=P[H];return R}function e(P,W){var H="undefined"!==typeof Symbol&&P[Symbol.iterator]||P["@@iterator"];if(H)return(H=H.call(P)).next.bind(H);if(Array.isArray(P)||(H=c(P))||W&&P&&"number"===typeof P.length){H&&(P=H);var R=0;return function(){return R>=P.length?{done:!0}:{done:!1,value:P[R++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function h(P){return"undefined"===
typeof P}function k(P){return"number"===typeof P}function m(P){return"number"===typeof P&&0===P%1}function w(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(P){return!1}}function p(P,W,H){if(0!==P.length)return P.reduce(function(R,da){da=[W(da),da];return R?H(R[0],da[0])===R[0]?R:da:da},null)[1]}function A(P,W){return W.reduce(function(H,R){H[R]=P[R];return H},{})}function C(P,W){return Object.prototype.hasOwnProperty.call(P,W)}function z(P,W,H){return m(P)&&P>=W&&P<=H}function q(P,
W){void 0===W&&(W=2);return 0>P?"-"+(""+-P).padStart(W,"0"):(""+P).padStart(W,"0")}function v(P){if(!h(P)&&null!==P&&""!==P)return parseInt(P,10)}function B(P){if(!h(P)&&null!==P&&""!==P)return parseFloat(P)}function D(P){if(!h(P)&&null!==P&&""!==P)return P=1E3*parseFloat("0."+P),Math.floor(P)}function x(P,W,H){void 0===H&&(H=!1);W=Math.pow(10,W);return(H?Math.trunc:Math.round)(P*W)/W}function E(P){return 0===P%4&&(0!==P%100||0===P%400)}function G(P,W){var H=W-1;H=H-12*Math.floor(H/12)+1;return 2===
H?E(P+(W-H)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][H-1]}function I(P){var W=Date.UTC(P.year,P.month-1,P.day,P.hour,P.minute,P.second,P.millisecond);100>P.year&&0<=P.year&&(W=new Date(W),W.setUTCFullYear(W.getUTCFullYear()-1900));return+W}function L(P){var W=P-1;W=(W+Math.floor(W/4)-Math.floor(W/100)+Math.floor(W/400))%7;return 4===(P+Math.floor(P/4)-Math.floor(P/100)+Math.floor(P/400))%7||3===W?53:52}function Y(P){return 99<P?P:60<P?1900+P:2E3+P}function X(P,W,H,R){void 0===R&&(R=null);
P=new Date(P);var da={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};R&&(da.timeZone=R);W=u({timeZoneName:W},da);return(H=(new Intl.DateTimeFormat(H,W)).formatToParts(P).find(function(va){return"timezonename"===va.type.toLowerCase()}))?H.value:null}function fa(P,W){P=parseInt(P,10);Number.isNaN(P)&&(P=0);W=parseInt(W,10)||0;W=0>P||Object.is(P,-0)?-W:W;return 60*P+W}function sa(P){var W=Number(P);if("boolean"===typeof P||""===P||Number.isNaN(W))throw new Cb("Invalid unit value "+
P);return W}function T(P,W){var H={},R;for(R in P)if(C(P,R)){var da=P[R];void 0!==da&&null!==da&&(H[W(R)]=sa(da))}return H}function ka(P,W){var H=Math.trunc(Math.abs(P/60)),R=Math.trunc(Math.abs(P%60));P=0<=P?"+":"-";switch(W){case "short":return""+P+q(H,2)+":"+q(R,2);case "narrow":return""+P+H+(0<R?":"+R:"");case "techie":return""+P+q(H,2)+q(R,2);default:throw new RangeError("Value format "+W+" is out of range for property format");}}function ma(P){return A(P,["hour","minute","second","millisecond"])}
function wa(P){switch(P){case "narrow":return[].concat(Yc);case "short":return[].concat(Yb);case "long":return[].concat(Pb);case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function ja(P){switch(P){case "narrow":return[].concat(Zc);case "short":return[].concat(Dc);case "long":return[].concat(Ec);case "numeric":return"1234567".split("");default:return null}}function ua(P){switch(P){case "narrow":return[].concat($c);
case "short":return[].concat(ad);case "long":return[].concat(bd);default:return null}}function Ba(P,W,H,R){void 0===H&&(H="always");void 0===R&&(R=!1);var da={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},va=-1===["hours","minutes","seconds"].indexOf(P);if("auto"===H&&va)switch(H="days"===P,W){case 1:return H?"tomorrow":"next "+da[P][0];case -1:return H?
"yesterday":"last "+da[P][0];case 0:return H?"today":"this "+da[P][0]}H=Object.is(W,-0)||0>W;W=Math.abs(W);va=1===W;var Ka=da[P];P=R?va?Ka[1]:Ka[2]||Ka[1]:va?da[P][0]:P;return H?W+" "+P+" ago":"in "+W+" "+P}function M(P,W){var H="";P=e(P);for(var R;!(R=P()).done;)R=R.value,H=R.literal?H+R.val:H+W(R.val);return H}function Z(P,W){if(h(P)||null===P)return W;if(P instanceof Zb)return P;if("string"===typeof P){var H=P.toLowerCase();return"local"===H||"system"===H?W:"utc"===H||"gmt"===H?Hb.utcInstance:
Hb.parseSpecifier(H)||Ub.create(P)}return k(P)?Hb.instance(P):"object"===typeof P&&P.offset&&"number"===typeof P.offset?P:new Fc(P)}function ia(P,W){void 0===W&&(W={});var H=JSON.stringify([P,W]),R=rc[H];R||(R=new Intl.DateTimeFormat(P,W),rc[H]=R);return R}function qa(P){for(var W=[],H=1;12>=H;H++){var R=vb.utc(2016,H,1);W.push(P(R))}return W}function ya(P){for(var W=[],H=1;7>=H;H++){var R=vb.utc(2016,11,13+H);W.push(P(R))}return W}function Ca(P,W,H,R,da){P=P.listingMode(H);return"error"===P?null:
"en"===P?R(W):da(W)}function Ia(){for(var P=arguments.length,W=Array(P),H=0;H<P;H++)W[H]=arguments[H];P=W.reduce(function(R,da){return R+da.source},"");return RegExp("^"+P+"$")}function Oa(){for(var P=arguments.length,W=Array(P),H=0;H<P;H++)W[H]=arguments[H];return function(R){return W.reduce(function(da,va){var Ka=da[0],Sa=da[1];da=va(R,da[2]);va=da[1];var $a=da[2];return[u({},Ka,da[0]),va||Sa,$a]},[{},null,1]).slice(0,2)}}function la(P){if(null==P)return[null,null];for(var W=arguments.length,H=
Array(1<W?W-1:0),R=1;R<W;R++)H[R-1]=arguments[R];for(W=0;W<H.length;W++){var da=H[W];R=da[1];if(da=da[0].exec(P))return R(da)}return[null,null]}function N(){for(var P=arguments.length,W=Array(P),H=0;H<P;H++)W[H]=arguments[H];return function(R,da){var va={},Ka;for(Ka=0;Ka<W.length;Ka++)va[W[Ka]]=v(R[da+Ka]);return[va,null,da+Ka]}}function aa(P,W,H){P=P[W];return h(P)?H:v(P)}function na(P,W){return[{hours:aa(P,W,0),minutes:aa(P,W+1,0),seconds:aa(P,W+2,0),milliseconds:D(P[W+3])},null,W+4]}function ca(P,
W){var H=!P[W]&&!P[W+1];P=fa(P[W+1],P[W+2]);return[{},H?null:Hb.instance(P),W+3]}function ea(P,W){return[{},P[W]?Ub.create(P[W]):null,W+1]}function oa(P){var W=P[2],H=P[3],R=P[4],da=P[5],va=P[6],Ka=P[7],Sa=P[8],$a="-"===P[0][0],fb=Ka&&"-"===Ka[0],lb=function(nb,ib){void 0===ib&&(ib=!1);return void 0!==nb&&(ib||nb&&$a)?-nb:nb};return[{years:lb(B(P[1])),months:lb(B(W)),weeks:lb(B(H)),days:lb(B(R)),hours:lb(B(da)),minutes:lb(B(va)),seconds:lb(B(Ka),"-0"===Ka),milliseconds:lb(D(Sa),fb)}]}function ta(P,
W,H,R,da,va,Ka){W={year:2===W.length?Y(v(W)):v(W),month:Yb.indexOf(H)+1,day:v(R),hour:v(da),minute:v(va)};Ka&&(W.second=v(Ka));P&&(W.weekday=3<P.length?Ec.indexOf(P)+1:Dc.indexOf(P)+1);return W}function O(P){var W=P[8],H=P[9],R=P[10],da=P[11];P=ta(P[1],P[4],P[3],P[2],P[5],P[6],P[7]);W=W?cd[W]:H?0:fa(R,da);return[P,new Hb(W)]}function V(P){return[ta(P[1],P[4],P[3],P[2],P[5],P[6],P[7]),Hb.utcInstance]}function pa(P){return[ta(P[1],P[7],P[2],P[3],P[4],P[5],P[6]),Hb.utcInstance]}function za(P,W,H){void 0===
H&&(H=!1);P={values:H?W.values:u({},P.values,W.values||{}),loc:P.loc.clone(W.loc),conversionAccuracy:W.conversionAccuracy||P.conversionAccuracy};return new zb(P)}function Ja(P,W,H,R,da){P=P[da][H];var va=W[H]/P;va=Math.sign(va)!==Math.sign(R[da])&&0!==R[da]&&1>=Math.abs(va)?0>va?Math.floor(va):Math.ceil(va):Math.trunc(va);R[da]+=va;W[H]-=va*P}function Qa(P,W){dd.reduce(function(H,R){if(h(W[R]))return H;H&&Ja(P,W,H,W,R);return R},null)}function J(P,W){var H=function(R){return R.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()};
P=H(W)-H(P);return Math.floor(zb.fromMillis(P).as("days"))}function U(P,W,H){for(var R={},da,va,Ka=0,Sa=[["years",function(ib,ob){return ob.year-ib.year}],["quarters",function(ib,ob){return ob.quarter-ib.quarter}],["months",function(ib,ob){return ob.month-ib.month+12*(ob.year-ib.year)}],["weeks",function(ib,ob){ib=J(ib,ob);return(ib-ib%7)/7}],["days",J]];Ka<Sa.length;Ka++){var $a=Sa[Ka],fb=$a[0];$a=$a[1];if(0<=H.indexOf(fb)){var lb;da=fb;$a=$a(P,W);va=P.plus((lb={},lb[fb]=$a,lb));if(va>W){var nb;
P=P.plus((nb={},nb[fb]=$a-1,nb));--$a}else P=va;R[fb]=$a}}return[P,R,va,da]}function ha(P,W,H,R){var da=U(P,W,H);P=da[0];var va=da[1],Ka=da[2],Sa=da[3];da=W-P;H=H.filter(function(lb){return 0<=["hours","minutes","seconds","milliseconds"].indexOf(lb)});if(0===H.length){if(Ka<W){var $a;Ka=P.plus(($a={},$a[Sa]=1,$a))}Ka!==P&&(va[Sa]=(va[Sa]||0)+da/(Ka-P))}W=zb.fromObject(va,R);if(0<H.length){var fb;return(fb=zb.fromMillis(da,R)).shiftTo.apply(fb,H).plus(W)}return W}function K(P,W){P=P.numberingSystem;
void 0===W&&(W="");return new RegExp(""+sc[P||"latn"]+W)}function S(P,W){void 0===W&&(W=function(H){return H});return{regex:P,deser:function(H){var R=W;H=H[0];var da=parseInt(H,10);if(isNaN(da)){da="";for(var va=0;va<H.length;va++){var Ka=H.charCodeAt(va);if(-1!==H[va].search(sc.hanidec))da+=ed.indexOf(H[va]);else for(fb in Gc){var Sa=Gc[fb],$a=Sa[0];Sa=Sa[1];Ka>=$a&&Ka<=Sa&&(da+=Ka-$a)}}var fb=parseInt(da,10)}else fb=da;return R(fb)}}}function ba(P){return P.replace(/\./g,"\\.?").replace(tc,Hc)}
function ra(P,W){return null===P?null:{regex:RegExp(P.map(ba).join("|")),deser:function(H){var R=H[0];return P.findIndex(function(da){return R.replace(/\./g,"").replace(tc," ").toLowerCase()===da.replace(/\./g,"").replace(tc," ").toLowerCase()})+W}}}function xa(P,W){return{regex:P,deser:function(H){return fa(H[1],H[2])},groups:W}}function La(P){return{regex:P,deser:function(W){return W[0]}}}function Ha(P,W){var H=K(W),R=K(W,"{2}"),da=K(W,"{3}"),va=K(W,"{4}"),Ka=K(W,"{6}"),Sa=K(W,"{1,2}"),$a=K(W,"{1,3}"),
fb=K(W,"{1,6}"),lb=K(W,"{1,9}"),nb=K(W,"{2,4}"),ib=K(W,"{4,6}"),ob=function(ac){return{regex:RegExp(ac.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:function(fd){return fd[0]},literal:!0}},Fb=function(ac){if(P.literal)return ob(ac);switch(ac.val){case "G":return ra(W.eras("short",!1),0);case "GG":return ra(W.eras("long",!1),0);case "y":return S(fb);case "yy":return S(nb,Y);case "yyyy":return S(va);case "yyyyy":return S(ib);case "yyyyyy":return S(Ka);case "M":return S(Sa);case "MM":return S(R);
case "MMM":return ra(W.months("short",!0,!1),1);case "MMMM":return ra(W.months("long",!0,!1),1);case "L":return S(Sa);case "LL":return S(R);case "LLL":return ra(W.months("short",!1,!1),1);case "LLLL":return ra(W.months("long",!1,!1),1);case "d":return S(Sa);case "dd":return S(R);case "o":return S($a);case "ooo":return S(da);case "HH":return S(R);case "H":return S(Sa);case "hh":return S(R);case "h":return S(Sa);case "mm":return S(R);case "m":return S(Sa);case "q":return S(Sa);case "qq":return S(R);
case "s":return S(Sa);case "ss":return S(R);case "S":return S($a);case "SSS":return S(da);case "u":return La(lb);case "uu":return La(Sa);case "uuu":return S(H);case "a":return ra(W.meridiems(),0);case "kkkk":return S(va);case "kk":return S(nb,Y);case "W":return S(Sa);case "WW":return S(R);case "E":case "c":return S(H);case "EEE":return ra(W.weekdays("short",!1,!1),1);case "EEEE":return ra(W.weekdays("long",!1,!1),1);case "ccc":return ra(W.weekdays("short",!0,!1),1);case "cccc":return ra(W.weekdays("long",
!0,!1),1);case "Z":case "ZZ":return xa(new RegExp("([+-]"+Sa.source+")(?::("+R.source+"))?"),2);case "ZZZ":return xa(new RegExp("([+-]"+Sa.source+")("+R.source+")?"),2);case "z":return La(/[a-z_+-/]{1,256}?/i);default:return ob(ac)}}(P)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};Fb.token=P;return Fb}function Va(P){return["^"+P.map(function(W){return W.regex}).reduce(function(W,H){return W+"("+H.source+")"},"")+"$",P]}function Ta(P,W,H){if(P=P.match(W)){W={};var R=1,da;for(da in H)if(C(H,
da)){var va=H[da],Ka=va.groups?va.groups+1:1;!va.literal&&va.token&&(W[va.token.val[0]]=va.deser(P.slice(R,R+Ka)));R+=Ka}return[P,W]}return[P,{}]}function Pa(P){var W=function(da){switch(da){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";
default:return null}},H=null;h(P.z)||(H=Ub.create(P.z));if(!h(P.Z)){H||(H=new Hb(P.Z));var R=P.Z}h(P.q)||(P.M=3*(P.q-1)+1);h(P.h)||(12>P.h&&1===P.a?P.h+=12:12===P.h&&0===P.a&&(P.h=0));0===P.G&&P.y&&(P.y=-P.y);h(P.u)||(P.S=D(P.u));return[Object.keys(P).reduce(function(da,va){var Ka=W(va);Ka&&(da[Ka]=P[va]);return da},{}),H,R]}function Xa(){uc||(uc=vb.fromMillis(1555555555555));return uc}function ab(P,W){if(P.literal)return P;var H=Qb.macroTokenToFormatOpts(P.val);if(!H)return P;W=Qb.create(W,H).formatDateTimeParts(Xa()).map(function(R){var da=
R.type;R=R.value;"literal"===da?da={literal:!0,val:R}:(R=H[da],da=gd[da],"object"===typeof da&&(da=da[R]),da=da?{literal:!1,val:da}:void 0);return da});return W.includes(void 0)?P:W}function Ya(P,W){var H;return(H=Array.prototype).concat.apply(H,P.map(function(R){return ab(R,W)}))}function hb(P,W,H){H=Ya(Qb.parseFormat(H),P);var R=H.map(function(fb){return Ha(fb,P)}),da=R.find(function(fb){return fb.invalidReason});if(da)return{input:W,tokens:H,invalidReason:da.invalidReason};da=Va(R);R=RegExp(da[0],
"i");var va=Ta(W,R,da[1]);da=va[0];var Ka=(va=va[1])?Pa(va):[null,null,void 0],Sa=Ka[0],$a=Ka[1];Ka=Ka[2];if(C(va,"a")&&C(va,"H"))throw new Sb("Can't include meridiem when specifying 24-hour format");return{input:W,tokens:H,regex:R,rawMatches:da,matches:va,result:Sa,zone:$a,specificOffset:Ka}}function eb(P,W){return new Ib("unit out of range","you specified "+W+" (of type "+typeof W+") as a "+P+", which is invalid")}function kb(P,W,H){W=new Date(Date.UTC(P,W-1,H));100>P&&0<=P&&W.setUTCFullYear(W.getUTCFullYear()-
1900);P=W.getUTCDay();return 0===P?7:P}function sb(P,W){P=E(P)?vc:wc;var H=P.findIndex(function(R){return R<W});return{month:H+1,day:W-P[H]}}function qb(P){var W=P.year,H=P.month,R=P.day;var da=R+(E(W)?vc:wc)[H-1];H=kb(W,H,R);da=Math.floor((da-H+10)/7);1>da?(--W,da=L(W)):da>L(W)&&(W+=1,da=1);return u({weekYear:W,weekNumber:da,weekday:H},ma(P))}function gb(P){var W=P.weekYear,H=P.weekNumber,R=P.weekday,da=kb(W,1,4),va=E(W)?366:365;H=7*H+R-da-3;1>H?(va=W-1,H+=E(va)?366:365):H>va?(va=W+1,H-=E(W)?366:
365):va=W;W=sb(va,H);return u({year:va,month:W.month,day:W.day},ma(P))}function pb(P){var W=P.year;var H=P.month;H=P.day+(E(W)?vc:wc)[H-1];return u({year:W,ordinal:H},ma(P))}function Ab(P){var W=P.year,H=sb(W,P.ordinal);return u({year:W,month:H.month,day:H.day},ma(P))}function Db(P){var W=m(P.year),H=z(P.month,1,12),R=z(P.day,1,G(P.year,P.month));return W?H?R?!1:eb("day",P.day):eb("month",P.month):eb("year",P.year)}function xb(P){var W=P.hour,H=P.minute,R=P.second;P=P.millisecond;var da=z(W,0,23)||
24===W&&0===H&&0===R&&0===P,va=z(H,0,59),Ka=z(R,0,59),Sa=z(P,0,999);return da?va?Ka?Sa?!1:eb("millisecond",P):eb("second",R):eb("minute",H):eb("hour",W)}function mb(P){return new Ib("unsupported zone",'the zone "'+P.name+'" is not supported')}function Rb(P){null===P.weekData&&(P.weekData=qb(P.c));return P.weekData}function tb(P,W){P={ts:P.ts,zone:P.zone,c:P.c,o:P.o,loc:P.loc,invalid:P.invalid};return new vb(u({},P,W,{old:P}))}function Gb(P,W,H){var R=P-6E4*W,da=H.offset(R);if(W===da)return[R,W];R-=
6E4*(da-W);W=H.offset(R);return da===W?[R,da]:[P-6E4*Math.min(da,W),Math.max(da,W)]}function Kb(P,W){P=new Date(P+6E4*W);return{year:P.getUTCFullYear(),month:P.getUTCMonth()+1,day:P.getUTCDate(),hour:P.getUTCHours(),minute:P.getUTCMinutes(),second:P.getUTCSeconds(),millisecond:P.getUTCMilliseconds()}}function Ob(P,W,H){return Gb(I(P),W,H)}function Tb(P,W){var H=P.o,R=P.c.year+Math.trunc(W.years),da=P.c.month+Math.trunc(W.months)+3*Math.trunc(W.quarters);R=u({},P.c,{year:R,month:da,day:Math.min(P.c.day,
G(R,da))+Math.trunc(W.days)+7*Math.trunc(W.weeks)});W=zb.fromObject({years:W.years-Math.trunc(W.years),quarters:W.quarters-Math.trunc(W.quarters),months:W.months-Math.trunc(W.months),weeks:W.weeks-Math.trunc(W.weeks),days:W.days-Math.trunc(W.days),hours:W.hours,minutes:W.minutes,seconds:W.seconds,milliseconds:W.milliseconds}).as("milliseconds");R=I(R);R=Gb(R,H,P.zone);H=R[0];R=R[1];0!==W&&(H+=W,R=P.zone.offset(H));return{ts:H,o:R}}function Eb(P,W,H,R,da,va){var Ka=H.setZone,Sa=H.zone;return P&&0!==
Object.keys(P).length?(P=vb.fromObject(P,u({},H,{zone:W||Sa,specificOffset:va})),Ka?P:P.setZone(Sa)):vb.invalid(new Ib("unparsable",'the input "'+da+"\" can't be parsed as "+R))}function Vb(P,W,H){void 0===H&&(H=!0);return P.isValid?Qb.create(yb.create("en-US"),{allowZ:H,forceSimple:!0}).formatDateTimeFromString(P,W):null}function $b(P,W){var H=9999<P.c.year||0>P.c.year,R="";H&&0<=P.c.year&&(R+="+");R+=q(P.c.year,H?6:4);W?(R=R+"-"+q(P.c.month),R=R+"-"+q(P.c.day)):(R+=q(P.c.month),R+=q(P.c.day));return R}
function bc(P,W,H,R,da,va){var Ka=q(P.c.hour);W?(Ka=Ka+":"+q(P.c.minute),0===P.c.second&&H||(Ka+=":")):Ka+=q(P.c.minute);0===P.c.second&&H||(Ka+=q(P.c.second),0===P.c.millisecond&&R||(Ka=Ka+"."+q(P.c.millisecond,3)));da&&(P.isOffsetFixed&&0===P.offset&&!va?Ka+="Z":0>P.o?(Ka=Ka+"-"+q(Math.trunc(-P.o/60)),Ka=Ka+":"+q(Math.trunc(-P.o%60))):(Ka=Ka+"+"+q(Math.trunc(P.o/60)),Ka=Ka+":"+q(Math.trunc(P.o%60))));va&&(Ka+="["+P.zone.ianaName+"]");return Ka}function cc(P){var W={year:"year",years:"year",month:"month",
months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[P.toLowerCase()];if(!W)throw new dc(P);return W}function ec(P,W){var H=Z(W.zone,wb.defaultZone);W=yb.fromObject(W);
var R=wb.now();if(h(P.year))P=R;else{var da=e(Ic);for(var va;!(va=da()).done;)va=va.value,h(P[va])&&(P[va]=Jc[va]);if(da=Db(P)||xb(P))return vb.invalid(da);R=H.offset(R);R=Ob(P,R,H);P=R[0];da=R[1]}return new vb({ts:P,zone:H,loc:W,o:da})}function fc(P,W,H){var R=h(H.round)?!0:H.round,da=function(fb,lb){fb=x(fb,R||H.calendary?0:2,!0);return W.loc.clone(H).relFormatter(H).format(fb,lb)},va=function(fb){return H.calendary?W.hasSame(P,fb)?0:W.startOf(fb).diff(P.startOf(fb),fb).get(fb):W.diff(P,fb).get(fb)};
if(H.unit)return da(va(H.unit),H.unit);for(var Ka=e(H.units),Sa;!(Sa=Ka()).done;){Sa=Sa.value;var $a=va(Sa);if(1<=Math.abs($a))return da($a,Sa)}return da(P>W?-0:0,H.units[H.units.length-1])}function gc(P){var W={};0<P.length&&"object"===typeof P[P.length-1]?(W=P[P.length-1],P=Array.from(P).slice(0,P.length-1)):P=Array.from(P);return[W,P]}function Lb(P){if(vb.isDateTime(P))return P;if(P&&P.valueOf&&k(P.valueOf()))return vb.fromJSDate(P);if(P&&"object"===typeof P)return vb.fromObject(P);throw new Cb("Unknown datetime argument: "+
P+", of type "+typeof P);}var Mb=function(P){function W(){return P.apply(this,arguments)||this}n(W,P);return W}(f(Error)),Jb=function(P){function W(H){return P.call(this,"Invalid DateTime: "+H.toMessage())||this}n(W,P);return W}(Mb),mc=function(P){function W(H){return P.call(this,"Invalid Interval: "+H.toMessage())||this}n(W,P);return W}(Mb),nc=function(P){function W(H){return P.call(this,"Invalid Duration: "+H.toMessage())||this}n(W,P);return W}(Mb),Sb=function(P){function W(){return P.apply(this,
arguments)||this}n(W,P);return W}(Mb),dc=function(P){function W(H){return P.call(this,"Invalid unit "+H)||this}n(W,P);return W}(Mb),Cb=function(P){function W(){return P.apply(this,arguments)||this}n(W,P);return W}(Mb),Nb=function(P){function W(){return P.call(this,"Zone is an abstract class")||this}n(W,P);return W}(Mb),ub={year:"numeric",month:"numeric",day:"numeric"},Q={year:"numeric",month:"short",day:"numeric"},Ga={year:"numeric",month:"short",day:"numeric",weekday:"short"},Fa={year:"numeric",
month:"long",day:"numeric"},Aa={year:"numeric",month:"long",day:"numeric",weekday:"long"},Da={hour:"numeric",minute:"numeric"},Na={hour:"numeric",minute:"numeric",second:"numeric"},Ma={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},Ea={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},Ra={hour:"numeric",minute:"numeric",hourCycle:"h23"},Ua={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},Za={hour:"numeric",minute:"numeric",second:"numeric",
hourCycle:"h23",timeZoneName:"short"},db={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},Wa={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},cb={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},bb={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},jb={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},Bb={year:"numeric",
month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},hc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},ic={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},jc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},rb={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",
second:"numeric",timeZoneName:"long"},Wb=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,Pb="January February March April May June July August September October November December".split(" "),Yb="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Yc="JFMAMJJASOND".split(""),Ec="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Dc="Mon Tue Wed Thu Fri Sat Sun".split(" "),Zc="MTWTFSS".split(""),Kc=["AM","PM"],bd=["Before Christ","Anno Domini"],
ad=["BC","AD"],$c=["B","A"],hd={D:ub,DD:Q,DDD:Fa,DDDD:Aa,t:Da,tt:Na,ttt:Ma,tttt:Ea,T:Ra,TT:Ua,TTT:Za,TTTT:db,f:Wa,ff:bb,fff:hc,ffff:jc,F:cb,FF:jb,FFF:ic,FFFF:rb},Qb=function(){function P(H,R){this.opts=R;this.loc=H;this.systemLoc=null}P.create=function(H,R){void 0===R&&(R={});return new P(H,R)};P.parseFormat=function(H){for(var R=null,da="",va=!1,Ka=[],Sa=0;Sa<H.length;Sa++){var $a=H.charAt(Sa);"'"===$a?(0<da.length&&Ka.push({literal:va,val:da}),R=null,da="",va=!va):va?da+=$a:$a===R?da+=$a:(0<da.length&&
Ka.push({literal:!1,val:da}),R=da=$a)}0<da.length&&Ka.push({literal:va,val:da});return Ka};P.macroTokenToFormatOpts=function(H){return hd[H]};var W=P.prototype;W.formatWithSystemDefault=function(H,R){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(H,u({},this.opts,R)).format()};W.formatDateTime=function(H,R){void 0===R&&(R={});return this.loc.dtFormatter(H,u({},this.opts,R)).format()};W.formatDateTimeParts=function(H,R){void 0===R&&(R={});return this.loc.dtFormatter(H,
u({},this.opts,R)).formatToParts()};W.resolvedOptions=function(H,R){void 0===R&&(R={});return this.loc.dtFormatter(H,u({},this.opts,R)).resolvedOptions()};W.num=function(H,R){void 0===R&&(R=0);if(this.opts.forceSimple)return q(H,R);var da=u({},this.opts);0<R&&(da.padTo=R);return this.loc.numberFormatter(da).format(H)};W.formatDateTimeFromString=function(H,R){var da=this,va="en"===this.loc.listingMode(),Ka=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,Sa=function(ib,ob){return da.loc.extract(H,
ib,ob)},$a=function(ib){return H.isOffsetFixed&&0===H.offset&&ib.allowZ?"Z":H.isValid?H.zone.formatOffset(H.ts,ib.format):""},fb=function(ib,ob){return va?wa(ib)[H.month-1]:Sa(ob?{month:ib}:{month:ib,day:"numeric"},"month")},lb=function(ib,ob){return va?ja(ib)[H.weekday-1]:Sa(ob?{weekday:ib}:{weekday:ib,month:"long",day:"numeric"},"weekday")},nb=function(ib){return va?ua(ib)[0>H.year?0:1]:Sa({era:ib},"era")};return M(P.parseFormat(R),function(ib){switch(ib){case "S":return da.num(H.millisecond);case "u":case "SSS":return da.num(H.millisecond,
3);case "s":return da.num(H.second);case "ss":return da.num(H.second,2);case "uu":return da.num(Math.floor(H.millisecond/10),2);case "uuu":return da.num(Math.floor(H.millisecond/100));case "m":return da.num(H.minute);case "mm":return da.num(H.minute,2);case "h":return da.num(0===H.hour%12?12:H.hour%12);case "hh":return da.num(0===H.hour%12?12:H.hour%12,2);case "H":return da.num(H.hour);case "HH":return da.num(H.hour,2);case "Z":return $a({format:"narrow",allowZ:da.opts.allowZ});case "ZZ":return $a({format:"short",
allowZ:da.opts.allowZ});case "ZZZ":return $a({format:"techie",allowZ:da.opts.allowZ});case "ZZZZ":return H.zone.offsetName(H.ts,{format:"short",locale:da.loc.locale});case "ZZZZZ":return H.zone.offsetName(H.ts,{format:"long",locale:da.loc.locale});case "z":return H.zoneName;case "a":return va?Kc[12>H.hour?0:1]:Sa({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return Ka?Sa({day:"numeric"},"day"):da.num(H.day);case "dd":return Ka?Sa({day:"2-digit"},"day"):da.num(H.day,2);case "c":return da.num(H.weekday);
case "ccc":return lb("short",!0);case "cccc":return lb("long",!0);case "ccccc":return lb("narrow",!0);case "E":return da.num(H.weekday);case "EEE":return lb("short",!1);case "EEEE":return lb("long",!1);case "EEEEE":return lb("narrow",!1);case "L":return Ka?Sa({month:"numeric",day:"numeric"},"month"):da.num(H.month);case "LL":return Ka?Sa({month:"2-digit",day:"numeric"},"month"):da.num(H.month,2);case "LLL":return fb("short",!0);case "LLLL":return fb("long",!0);case "LLLLL":return fb("narrow",!0);
case "M":return Ka?Sa({month:"numeric"},"month"):da.num(H.month);case "MM":return Ka?Sa({month:"2-digit"},"month"):da.num(H.month,2);case "MMM":return fb("short",!1);case "MMMM":return fb("long",!1);case "MMMMM":return fb("narrow",!1);case "y":return Ka?Sa({year:"numeric"},"year"):da.num(H.year);case "yy":return Ka?Sa({year:"2-digit"},"year"):da.num(H.year.toString().slice(-2),2);case "yyyy":return Ka?Sa({year:"numeric"},"year"):da.num(H.year,4);case "yyyyyy":return Ka?Sa({year:"numeric"},"year"):
da.num(H.year,6);case "G":return nb("short");case "GG":return nb("long");case "GGGGG":return nb("narrow");case "kk":return da.num(H.weekYear.toString().slice(-2),2);case "kkkk":return da.num(H.weekYear,4);case "W":return da.num(H.weekNumber);case "WW":return da.num(H.weekNumber,2);case "o":return da.num(H.ordinal);case "ooo":return da.num(H.ordinal,3);case "q":return da.num(H.quarter);case "qq":return da.num(H.quarter,2);case "X":return da.num(Math.floor(H.ts/1E3));case "x":return da.num(H.ts);default:var ob=
P.macroTokenToFormatOpts(ib);ib=ob?da.formatWithSystemDefault(H,ob):ib;return ib}})};W.formatDurationFromString=function(H,R){var da=this,va=function(Sa){switch(Sa[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "w":return"week";case "M":return"month";case "y":return"year";default:return null}};R=P.parseFormat(R);var Ka=R.reduce(function(Sa,$a){var fb=$a.val;return $a.literal?Sa:Sa.concat(fb)},[]);H=H.shiftTo.apply(H,
Ka.map(va).filter(function(Sa){return Sa}));return M(R,function(Sa){return function($a){var fb=va($a);return fb?da.num(Sa.get(fb),$a.length):$a}}(H))};return P}(),Ib=function(){function P(W,H){this.reason=W;this.explanation=H}P.prototype.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason};return P}(),Zb=function(){function P(){}var W=P.prototype;W.offsetName=function(H,R){throw new Nb;};W.formatOffset=function(H,R){throw new Nb;};W.offset=function(H){throw new Nb;
};W.equals=function(H){throw new Nb;};a(P,[{key:"type",get:function(){throw new Nb;}},{key:"name",get:function(){throw new Nb;}},{key:"ianaName",get:function(){return this.name}},{key:"isUniversal",get:function(){throw new Nb;}},{key:"isValid",get:function(){throw new Nb;}}]);return P}(),xc=null,Lc=function(P){function W(){return P.apply(this,arguments)||this}n(W,P);var H=W.prototype;H.offsetName=function(R,da){return X(R,da.format,da.locale)};H.formatOffset=function(R,da){return ka(this.offset(R),
da)};H.offset=function(R){return-(new Date(R)).getTimezoneOffset()};H.equals=function(R){return"system"===R.type};a(W,[{key:"type",get:function(){return"system"}},{key:"name",get:function(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){null===xc&&(xc=new W);return xc}}]);return W}(Zb),oc={},id={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6},pc={},Ub=function(P){function W(R){var da=
P.call(this)||this;da.zoneName=R;da.valid=W.isValidZone(R);return da}n(W,P);W.create=function(R){pc[R]||(pc[R]=new W(R));return pc[R]};W.resetCache=function(){pc={};oc={}};W.isValidSpecifier=function(R){return this.isValidZone(R)};W.isValidZone=function(R){if(!R)return!1;try{return(new Intl.DateTimeFormat("en-US",{timeZone:R})).format(),!0}catch(da){return!1}};var H=W.prototype;H.offsetName=function(R,da){return X(R,da.format,da.locale,this.name)};H.formatOffset=function(R,da){return ka(this.offset(R),
da)};H.offset=function(R){R=new Date(R);if(isNaN(R))return NaN;var da=this.name;oc[da]||(oc[da]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:da,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}));da=oc[da];if(da.formatToParts){da=da.formatToParts(R);for(var va=[],Ka=0;Ka<da.length;Ka++){var Sa=da[Ka],$a=Sa.type;Sa=Sa.value;var fb=id[$a];"era"===$a?va[fb]=Sa:h(fb)||(va[fb]=parseInt(Sa,10))}da=va}else da=da.format(R).replace(/\u200E/g,
""),da=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(da),da=[da[3],da[1],da[2],da[4],da[5],da[6],da[7]];va=da[0];Ka=da[1];$a=da[2];Sa=da[4];fb=da[5];var lb=da[6];"BC"===da[3]&&(va=-Math.abs(va)+1);da=I({year:va,month:Ka,day:$a,hour:24===Sa?0:Sa,minute:fb,second:lb,millisecond:0});R=+R;va=R%1E3;return(da-(R-(0<=va?va:1E3+va)))/6E4};H.equals=function(R){return"iana"===R.type&&R.name===this.name};a(W,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},
{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]);return W}(Zb),yc=null,Hb=function(P){function W(R){var da=P.call(this)||this;da.fixed=R;return da}n(W,P);W.instance=function(R){return 0===R?W.utcInstance:new W(R)};W.parseSpecifier=function(R){return R&&(R=R.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new W(fa(R[1],R[2])):null};var H=W.prototype;H.offsetName=function(){return this.name};H.formatOffset=function(R,da){return ka(this.fixed,da)};H.offset=
function(){return this.fixed};H.equals=function(R){return"fixed"===R.type&&R.fixed===this.fixed};a(W,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return 0===this.fixed?"UTC":"UTC"+ka(this.fixed,"narrow")}},{key:"ianaName",get:function(){return 0===this.fixed?"Etc/UTC":"Etc/GMT"+ka(-this.fixed,"narrow")}},{key:"isUniversal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}],[{key:"utcInstance",get:function(){null===yc&&(yc=new W(0));return yc}}]);return W}(Zb),
Fc=function(P){function W(R){var da=P.call(this)||this;da.zoneName=R;return da}n(W,P);var H=W.prototype;H.offsetName=function(){return null};H.formatOffset=function(){return""};H.offset=function(){return NaN};H.equals=function(){return!1};a(W,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]);return W}(Zb),Mc=function(){return Date.now()},Nc="system",Oc=null,Pc=null,
Qc=null,Rc,wb=function(){function P(){}P.resetCaches=function(){yb.resetCache();Ub.resetCache()};a(P,null,[{key:"now",get:function(){return Mc},set:function(W){Mc=W}},{key:"defaultZone",get:function(){return Z(Nc,Lc.instance)},set:function(W){Nc=W}},{key:"defaultLocale",get:function(){return Oc},set:function(W){Oc=W}},{key:"defaultNumberingSystem",get:function(){return Pc},set:function(W){Pc=W}},{key:"defaultOutputCalendar",get:function(){return Qc},set:function(W){Qc=W}},{key:"throwOnInvalid",get:function(){return Rc},
set:function(W){Rc=W}}]);return P}(),jd=["base"],kd=["padTo","floor"],Sc={},rc={},zc={},Ac={},qc=null,ld=function(){function P(W,H,R){this.padTo=R.padTo||0;this.floor=R.floor||!1;R.padTo;R.floor;var da=b(R,kd);if(!H||0<Object.keys(da).length)H=u({useGrouping:!1},R),0<R.padTo&&(H.minimumIntegerDigits=R.padTo),R=H,void 0===R&&(R={}),H=JSON.stringify([W,R]),da=zc[H],da||(da=new Intl.NumberFormat(W,R),zc[H]=da),this.inf=da}P.prototype.format=function(W){if(this.inf)return this.inf.format(this.floor?Math.floor(W):
W);W=this.floor?Math.floor(W):x(W,3);return q(W,this.padTo)};return P}(),md=function(){function P(H,R,da){this.opts=da;if(H.zone.isUniversal){var va=H.offset/60*-1;va=0<=va?"Etc/GMT+"+va:"Etc/GMT"+va;0!==H.offset&&Ub.create(va).valid?this.dt=H:(va="UTC",this.dt=da.timeZoneName?H:0===H.offset?H:vb.fromMillis(H.ts+6E4*H.offset))}else"system"===H.zone.type?this.dt=H:(this.dt=H,va=H.zone.name);H=u({},this.opts);va&&(H.timeZone=va);this.dtf=ia(R,H)}var W=P.prototype;W.format=function(){return this.dtf.format(this.dt.toJSDate())};
W.formatToParts=function(){return this.dtf.formatToParts(this.dt.toJSDate())};W.resolvedOptions=function(){return this.dtf.resolvedOptions()};return P}(),nd=function(){function P(H,R,da){this.opts=u({style:"long"},da);if(!R&&w()){R=da;void 0===R&&(R={});da=R;da.base;da=b(da,jd);da=JSON.stringify([H,da]);var va=Ac[da];va||(va=new Intl.RelativeTimeFormat(H,R),Ac[da]=va);this.rtf=va}}var W=P.prototype;W.format=function(H,R){return this.rtf?this.rtf.format(H,R):Ba(R,H,this.opts.numeric,"long"!==this.opts.style)};
W.formatToParts=function(H,R){return this.rtf?this.rtf.formatToParts(H,R):[]};return P}(),yb=function(){function P(H,R,da,va){var Ka=H.indexOf("-u-");if(-1===Ka)H=[H];else{Ka=H.substring(0,Ka);try{var Sa=ia(H).resolvedOptions()}catch($a){Sa=ia(Ka).resolvedOptions()}H=Sa;H=[Ka,H.numberingSystem,H.calendar]}Sa=H[1];Ka=H[2];this.locale=H[0];this.numberingSystem=R||Sa||null;this.outputCalendar=da||Ka||null;R=this.locale;da=this.numberingSystem;if((H=this.outputCalendar)||da)R+="-u",H&&(R+="-ca-"+H),da&&
(R+="-nu-"+da);this.intl=R;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=va;this.fastNumbersCached=null}P.fromOpts=function(H){return P.create(H.locale,H.numberingSystem,H.outputCalendar,H.defaultToEN)};P.create=function(H,R,da,va){void 0===va&&(va=!1);H=H||wb.defaultLocale;var Ka;(Ka=H)||(va?va="en-US":(qc||(qc=(new Intl.DateTimeFormat).resolvedOptions().locale),va=qc),Ka=va);return new P(Ka,R||
wb.defaultNumberingSystem,da||wb.defaultOutputCalendar,H)};P.resetCache=function(){qc=null;rc={};zc={};Ac={}};P.fromObject=function(H){H=void 0===H?{}:H;return P.create(H.locale,H.numberingSystem,H.outputCalendar)};var W=P.prototype;W.listingMode=function(){var H=this.isEnglish(),R=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return H&&R?"en":"intl"};W.clone=function(H){return H&&0!==Object.getOwnPropertyNames(H).length?
P.create(H.locale||this.specifiedLocale,H.numberingSystem||this.numberingSystem,H.outputCalendar||this.outputCalendar,H.defaultToEN||!1):this};W.redefaultToEN=function(H){void 0===H&&(H={});return this.clone(u({},H,{defaultToEN:!0}))};W.redefaultToSystem=function(H){void 0===H&&(H={});return this.clone(u({},H,{defaultToEN:!1}))};W.months=function(H,R,da){var va=this;void 0===R&&(R=!1);void 0===da&&(da=!0);return Ca(this,H,da,wa,function(){var Ka=R?{month:H,day:"numeric"}:{month:H},Sa=R?"format":"standalone";
va.monthsCache[Sa][H]||(va.monthsCache[Sa][H]=qa(function($a){return va.extract($a,Ka,"month")}));return va.monthsCache[Sa][H]})};W.weekdays=function(H,R,da){var va=this;void 0===R&&(R=!1);void 0===da&&(da=!0);return Ca(this,H,da,ja,function(){var Ka=R?{weekday:H,year:"numeric",month:"long",day:"numeric"}:{weekday:H},Sa=R?"format":"standalone";va.weekdaysCache[Sa][H]||(va.weekdaysCache[Sa][H]=ya(function($a){return va.extract($a,Ka,"weekday")}));return va.weekdaysCache[Sa][H]})};W.meridiems=function(H){var R=
this;void 0===H&&(H=!0);return Ca(this,void 0,H,function(){return Kc},function(){if(!R.meridiemCache){var da={hour:"numeric",hourCycle:"h12"};R.meridiemCache=[vb.utc(2016,11,13,9),vb.utc(2016,11,13,19)].map(function(va){return R.extract(va,da,"dayperiod")})}return R.meridiemCache})};W.eras=function(H,R){var da=this;void 0===R&&(R=!0);return Ca(this,H,R,ua,function(){var va={era:H};da.eraCache[H]||(da.eraCache[H]=[vb.utc(-40,1,1),vb.utc(2017,1,1)].map(function(Ka){return da.extract(Ka,va,"era")}));
return da.eraCache[H]})};W.extract=function(H,R,da){return(H=this.dtFormatter(H,R).formatToParts().find(function(va){return va.type.toLowerCase()===da}))?H.value:null};W.numberFormatter=function(H){void 0===H&&(H={});return new ld(this.intl,H.forceSimple||this.fastNumbers,H)};W.dtFormatter=function(H,R){void 0===R&&(R={});return new md(H,this.intl,R)};W.relFormatter=function(H){void 0===H&&(H={});return new nd(this.intl,this.isEnglish(),H)};W.listFormatter=function(H){void 0===H&&(H={});var R=this.intl;
void 0===H&&(H={});var da=JSON.stringify([R,H]),va=Sc[da];va||(va=new Intl.ListFormat(R,H),Sc[da]=va);return va};W.isEnglish=function(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")};W.equals=function(H){return this.locale===H.locale&&this.numberingSystem===H.numberingSystem&&this.outputCalendar===H.outputCalendar};a(P,[{key:"fastNumbers",get:function(){if(null==this.fastNumbersCached){var H=this.numberingSystem&&
"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=H}return this.fastNumbersCached}}]);return P}(),Tc=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Bc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Uc=RegExp(""+Bc.source+("(?:"+Tc.source+"?(?:\\[("+Wb.source+")\\])?)?")),Cc=RegExp("(?:T"+Uc.source+")?"),od=N("weekYear","weekNumber","weekDay"),pd=
N("year","ordinal"),Vc=RegExp(Bc.source+" ?(?:"+Tc.source+"|("+Wb.source+"))?"),qd=RegExp("(?: "+Vc.source+")?"),rd=RegExp("^T?"+Bc.source+"$"),sd=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/,cd={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},td=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,
ud=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,vd=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,wd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,xd=Ia(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Cc),yd=Ia(/(\d{4})-?W(\d\d)(?:-?(\d))?/,
Cc),zd=Ia(/(\d{4})-?(\d{3})/,Cc),Ad=Ia(Uc),Wc=Oa(function(P,W){return[{year:aa(P,W),month:aa(P,W+1,1),day:aa(P,W+2,1)},null,W+3]},na,ca,ea),Bd=Oa(od,na,ca,ea),Cd=Oa(pd,na,ca,ea),Dd=Oa(na,ca,ea),Ed=Oa(na),Fd=Ia(/(\d{4})-(\d\d)-(\d\d)/,qd),Gd=Ia(Vc),Hd=Oa(na,ca,ea),Xc={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},
Id=u({years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,milliseconds:2592E6}},Xc),Jd=u({years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,
minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3}},Xc),Xb="years quarters months weeks days hours minutes seconds milliseconds".split(" "),dd=Xb.slice(0).reverse(),zb=function(){function P(H){var R="longterm"===H.conversionAccuracy||!1;this.values=H.values;this.loc=H.loc||yb.create();this.conversionAccuracy=R?"longterm":"casual";this.invalid=H.invalid||null;this.matrix=R?Jd:Id;this.isLuxonDuration=
!0}P.fromMillis=function(H,R){return P.fromObject({milliseconds:H},R)};P.fromObject=function(H,R){void 0===R&&(R={});if(null==H||"object"!==typeof H)throw new Cb("Duration.fromObject: argument expected to be an object, got "+(null===H?"null":typeof H));return new P({values:T(H,P.normalizeUnit),loc:yb.fromObject(R),conversionAccuracy:R.conversionAccuracy})};P.fromDurationLike=function(H){if(k(H))return P.fromMillis(H);if(P.isDuration(H))return H;if("object"===typeof H)return P.fromObject(H);throw new Cb("Unknown duration argument "+
H+" of type "+typeof H);};P.fromISO=function(H,R){var da=la(H,[sd,oa])[0];return da?P.fromObject(da,R):P.invalid("unparsable",'the input "'+H+"\" can't be parsed as ISO 8601")};P.fromISOTime=function(H,R){var da=la(H,[rd,Ed])[0];return da?P.fromObject(da,R):P.invalid("unparsable",'the input "'+H+"\" can't be parsed as ISO 8601")};P.invalid=function(H,R){void 0===R&&(R=null);if(!H)throw new Cb("need to specify a reason the Duration is invalid");H=H instanceof Ib?H:new Ib(H,R);if(wb.throwOnInvalid)throw new nc(H);
return new P({invalid:H})};P.normalizeUnit=function(H){var R={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[H?H.toLowerCase():H];if(!R)throw new dc(H);return R};P.isDuration=function(H){return H&&H.isLuxonDuration||!1};var W=P.prototype;W.toFormat=
function(H,R){void 0===R&&(R={});R=u({},R,{floor:!1!==R.round&&!1!==R.floor});return this.isValid?Qb.create(this.loc,R).formatDurationFromString(this,H):"Invalid Duration"};W.toHuman=function(H){var R=this;void 0===H&&(H={});var da=Xb.map(function(va){var Ka=R.values[va];return h(Ka)?null:R.loc.numberFormatter(u({style:"unit",unitDisplay:"long"},H,{unit:va.slice(0,-1)})).format(Ka)}).filter(function(va){return va});return this.loc.listFormatter(u({type:"conjunction",style:H.listStyle||"narrow"},H)).format(da)};
W.toObject=function(){return this.isValid?u({},this.values):{}};W.toISO=function(){if(!this.isValid)return null;var H="P";0!==this.years&&(H+=this.years+"Y");if(0!==this.months||0!==this.quarters)H+=this.months+3*this.quarters+"M";0!==this.weeks&&(H+=this.weeks+"W");0!==this.days&&(H+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)H+="T";0!==this.hours&&(H+=this.hours+"H");0!==this.minutes&&(H+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)H+=
x(this.seconds+this.milliseconds/1E3,3)+"S";"P"===H&&(H+="T0S");return H};W.toISOTime=function(H){void 0===H&&(H={});if(!this.isValid)return null;var R=this.toMillis();if(0>R||864E5<=R)return null;H=u({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},H);R=this.shiftTo("hours","minutes","seconds","milliseconds");var da="basic"===H.format?"hhmm":"hh:mm";H.suppressSeconds&&0===R.seconds&&0===R.milliseconds||(da+="basic"===H.format?"ss":":ss",H.suppressMilliseconds&&0===
R.milliseconds||(da+=".SSS"));R=R.toFormat(da);H.includePrefix&&(R="T"+R);return R};W.toJSON=function(){return this.toISO()};W.toString=function(){return this.toISO()};W.toMillis=function(){return this.as("milliseconds")};W.valueOf=function(){return this.toMillis()};W.plus=function(H){if(!this.isValid)return this;H=P.fromDurationLike(H);for(var R={},da=e(Xb),va;!(va=da()).done;)if(va=va.value,C(H.values,va)||C(this.values,va))R[va]=H.get(va)+this.get(va);return za(this,{values:R},!0)};W.minus=function(H){if(!this.isValid)return this;
H=P.fromDurationLike(H);return this.plus(H.negate())};W.mapUnits=function(H){if(!this.isValid)return this;for(var R={},da=0,va=Object.keys(this.values);da<va.length;da++){var Ka=va[da];R[Ka]=sa(H(this.values[Ka],Ka))}return za(this,{values:R},!0)};W.get=function(H){return this[P.normalizeUnit(H)]};W.set=function(H){if(!this.isValid)return this;H=u({},this.values,T(H,P.normalizeUnit));return za(this,{values:H})};W.reconfigure=function(H){var R=void 0===H?{}:H;H=R.conversionAccuracy;R={loc:this.loc.clone({locale:R.locale,
numberingSystem:R.numberingSystem})};H&&(R.conversionAccuracy=H);return za(this,R)};W.as=function(H){return this.isValid?this.shiftTo(H).get(H):NaN};W.normalize=function(){if(!this.isValid)return this;var H=this.toObject();Qa(this.matrix,H);return za(this,{values:H},!0)};W.shiftTo=function(){for(var H=arguments.length,R=Array(H),da=0;da<H;da++)R[da]=arguments[da];if(!this.isValid||0===R.length)return this;R=R.map(function(Fb){return P.normalizeUnit(Fb)});H={};da={};for(var va=this.toObject(),Ka,Sa=
e(Xb),$a;!($a=Sa()).done;)if($a=$a.value,0<=R.indexOf($a)){Ka=$a;var fb=0,lb;for(lb in da)fb+=this.matrix[lb][$a]*da[lb],da[lb]=0;k(va[$a])&&(fb+=va[$a]);var nb=Math.trunc(fb);H[$a]=nb;da[$a]=(1E3*fb-1E3*nb)/1E3;for(var ib in va)Xb.indexOf(ib)>Xb.indexOf($a)&&Ja(this.matrix,va,ib,H,$a)}else k(va[$a])&&(da[$a]=va[$a]);for(var ob in da)0!==da[ob]&&(H[Ka]+=ob===Ka?da[ob]:da[ob]/this.matrix[Ka][ob]);return za(this,{values:H},!0).normalize()};W.negate=function(){if(!this.isValid)return this;for(var H=
{},R=0,da=Object.keys(this.values);R<da.length;R++){var va=da[R];H[va]=0===this.values[va]?0:-this.values[va]}return za(this,{values:H},!0)};W.equals=function(H){if(!this.isValid||!H.isValid||!this.loc.equals(H.loc))return!1;for(var R=e(Xb),da;!(da=R()).done;){var va=da.value;da=this.values[va];va=H.values[va];da=void 0===da||0===da?void 0===va||0===va:da===va;if(!da)return!1}return!0};a(P,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?
this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",
get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]);return P}(),kc=function(){function P(H){this.s=
H.start;this.e=H.end;this.invalid=H.invalid||null;this.isLuxonInterval=!0}P.invalid=function(H,R){void 0===R&&(R=null);if(!H)throw new Cb("need to specify a reason the Interval is invalid");H=H instanceof Ib?H:new Ib(H,R);if(wb.throwOnInvalid)throw new mc(H);return new P({invalid:H})};P.fromDateTimes=function(H,R){H=Lb(H);R=Lb(R);var da=H&&H.isValid?R&&R.isValid?R<H?kc.invalid("end before start","The end of an interval must be after its start, but you had start\x3d"+H.toISO()+" and end\x3d"+R.toISO()):
null:kc.invalid("missing or invalid end"):kc.invalid("missing or invalid start");return null==da?new P({start:H,end:R}):da};P.after=function(H,R){R=zb.fromDurationLike(R);H=Lb(H);return P.fromDateTimes(H,H.plus(R))};P.before=function(H,R){R=zb.fromDurationLike(R);H=Lb(H);return P.fromDateTimes(H.minus(R),H)};P.fromISO=function(H,R){var da=(H||"").split("/",2),va=da[0];da=da[1];if(va&&da){try{var Ka=vb.fromISO(va,R);var Sa=Ka.isValid}catch(lb){Sa=!1}try{var $a=vb.fromISO(da,R);var fb=$a.isValid}catch(lb){fb=
!1}if(Sa&&fb)return P.fromDateTimes(Ka,$a);if(Sa){if($a=zb.fromISO(da,R),$a.isValid)return P.after(Ka,$a)}else if(fb&&(Ka=zb.fromISO(va,R),Ka.isValid))return P.before($a,Ka)}return P.invalid("unparsable",'the input "'+H+"\" can't be parsed as ISO 8601")};P.isInterval=function(H){return H&&H.isLuxonInterval||!1};var W=P.prototype;W.length=function(H){void 0===H&&(H="milliseconds");return this.isValid?this.toDuration.apply(this,[H]).get(H):NaN};W.count=function(H){void 0===H&&(H="milliseconds");if(!this.isValid)return NaN;
var R=this.start.startOf(H),da=this.end.startOf(H);return Math.floor(da.diff(R,H).get(H))+1};W.hasSame=function(H){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,H):!1};W.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()};W.isAfter=function(H){return this.isValid?this.s>H:!1};W.isBefore=function(H){return this.isValid?this.e<=H:!1};W.contains=function(H){return this.isValid?this.s<=H&&this.e>H:!1};W.set=function(H){H=void 0===H?{}:H;return this.isValid?P.fromDateTimes(H.start||
this.s,H.end||this.e):this};W.splitAt=function(){var H=this;if(!this.isValid)return[];for(var R=arguments.length,da=Array(R),va=0;va<R;va++)da[va]=arguments[va];R=da.map(Lb).filter(function($a){return H.contains($a)}).sort();da=[];va=this.s;for(var Ka=0;va<this.e;){var Sa=R[Ka]||this.e;Sa=+Sa>+this.e?this.e:Sa;da.push(P.fromDateTimes(va,Sa));va=Sa;Ka+=1}return da};W.splitBy=function(H){H=zb.fromDurationLike(H);if(!this.isValid||!H.isValid||0===H.as("milliseconds"))return[];for(var R=this.s,da=1,va,
Ka=[];R<this.e;)va=this.start.plus(H.mapUnits(function(Sa){return Sa*da})),va=+va>+this.e?this.e:va,Ka.push(P.fromDateTimes(R,va)),R=va,da+=1;return Ka};W.divideEqually=function(H){return this.isValid?this.splitBy(this.length()/H).slice(0,H):[]};W.overlaps=function(H){return this.e>H.s&&this.s<H.e};W.abutsStart=function(H){return this.isValid?+this.e===+H.s:!1};W.abutsEnd=function(H){return this.isValid?+H.e===+this.s:!1};W.engulfs=function(H){return this.isValid?this.s<=H.s&&this.e>=H.e:!1};W.equals=
function(H){return this.isValid&&H.isValid?this.s.equals(H.s)&&this.e.equals(H.e):!1};W.intersection=function(H){if(!this.isValid)return this;var R=this.s>H.s?this.s:H.s;H=this.e<H.e?this.e:H.e;return R>=H?null:P.fromDateTimes(R,H)};W.union=function(H){return this.isValid?P.fromDateTimes(this.s<H.s?this.s:H.s,this.e>H.e?this.e:H.e):this};P.merge=function(H){var R=H.sort(function(da,va){return da.s-va.s}).reduce(function(da,va){var Ka=da[0];return(da=da[1])?da.overlaps(va)||da.abutsStart(va)?[Ka,da.union(va)]:
[Ka.concat([da]),va]:[Ka,va]},[[],null]);H=R[0];(R=R[1])&&H.push(R);return H};P.xor=function(H){var R,da=null,va=0,Ka=[];H=H.map(function(Sa){return[{time:Sa.s,type:"s"},{time:Sa.e,type:"e"}]});H=(R=Array.prototype).concat.apply(R,H).sort(function(Sa,$a){return Sa.time-$a.time});for(R=e(H);!(H=R()).done;)H=H.value,va+="s"===H.type?1:-1,1===va?da=H.time:(da&&+da!==+H.time&&Ka.push(P.fromDateTimes(da,H.time)),da=null);return P.merge(Ka)};W.difference=function(){for(var H=this,R=arguments.length,da=
Array(R),va=0;va<R;va++)da[va]=arguments[va];return P.xor([this].concat(da)).map(function(Ka){return H.intersection(Ka)}).filter(function(Ka){return Ka&&!Ka.isEmpty()})};W.toString=function(){return this.isValid?"["+this.s.toISO()+" \u2013 "+this.e.toISO()+")":"Invalid Interval"};W.toISO=function(H){return this.isValid?this.s.toISO(H)+"/"+this.e.toISO(H):"Invalid Interval"};W.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():"Invalid Interval"};W.toISOTime=function(H){return this.isValid?
this.s.toISOTime(H)+"/"+this.e.toISOTime(H):"Invalid Interval"};W.toFormat=function(H,R){R=(void 0===R?{}:R).separator;R=void 0===R?" \u2013 ":R;return this.isValid?""+this.s.toFormat(H)+R+this.e.toFormat(H):"Invalid Interval"};W.toDuration=function(H,R){return this.isValid?this.e.diff(this.s,H,R):zb.invalid(this.invalidReason)};W.mapEndpoints=function(H){return P.fromDateTimes(H(this.s),H(this.e))};a(P,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?
this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]);return P}(),lc=function(){function P(){}P.hasDST=function(W){void 0===W&&(W=wb.defaultZone);var H=vb.now().setZone(W).set({month:12});return!W.isUniversal&&H.offset!==H.set({month:6}).offset};P.isValidIANAZone=function(W){return Ub.isValidZone(W)};
P.normalizeZone=function(W){return Z(W,wb.defaultZone)};P.months=function(W,H){void 0===W&&(W="long");var R=void 0===H?{}:H;H=R.locale;var da=R.numberingSystem,va=R.locObj;R=R.outputCalendar;return((void 0===va?null:va)||yb.create(void 0===H?null:H,void 0===da?null:da,void 0===R?"gregory":R)).months(W)};P.monthsFormat=function(W,H){void 0===W&&(W="long");var R=void 0===H?{}:H;H=R.locale;var da=R.numberingSystem,va=R.locObj;R=R.outputCalendar;return((void 0===va?null:va)||yb.create(void 0===H?null:
H,void 0===da?null:da,void 0===R?"gregory":R)).months(W,!0)};P.weekdays=function(W,H){void 0===W&&(W="long");var R=void 0===H?{}:H;H=R.locale;var da=R.numberingSystem;R=R.locObj;return((void 0===R?null:R)||yb.create(void 0===H?null:H,void 0===da?null:da,null)).weekdays(W)};P.weekdaysFormat=function(W,H){void 0===W&&(W="long");var R=void 0===H?{}:H;H=R.locale;var da=R.numberingSystem;R=R.locObj;return((void 0===R?null:R)||yb.create(void 0===H?null:H,void 0===da?null:da,null)).weekdays(W,!0)};P.meridiems=
function(W){W=(void 0===W?{}:W).locale;return yb.create(void 0===W?null:W).meridiems()};P.eras=function(W,H){void 0===W&&(W="short");H=(void 0===H?{}:H).locale;return yb.create(void 0===H?null:H,null,"gregory").eras(W)};P.features=function(){return{relative:w()}};return P}(),sc={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",
khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},Gc={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,
3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},ed=sc.hanidec.replace(/[\[|\]]/g,"").split(""),Hc="[ "+String.fromCharCode(160)+"]",tc=new RegExp(Hc,"g"),gd={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},
second:{numeric:"s","2-digit":"ss"}},uc=null,wc=[0,31,59,90,120,151,181,212,243,273,304,334],vc=[0,31,60,91,121,152,182,213,244,274,305,335],Jc={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Kd={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Ld={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Ic="year month day hour minute second millisecond".split(" "),Md="weekYear weekNumber weekday hour minute second millisecond".split(" "),Nd="year ordinal hour minute second millisecond".split(" "),
vb=function(){function P(H){var R=H.zone||wb.defaultZone,da=H.invalid||(Number.isNaN(H.ts)?new Ib("invalid input"):null)||(R.isValid?null:mb(R));this.ts=h(H.ts)?wb.now():H.ts;var va=null,Ka=null;da||(H.old&&H.old.ts===this.ts&&H.old.zone.equals(R)?(Ka=[H.old.c,H.old.o],va=Ka[0],Ka=Ka[1]):(Ka=R.offset(this.ts),va=Kb(this.ts,Ka),va=(da=Number.isNaN(va.year)?new Ib("invalid input"):null)?null:va,Ka=da?null:Ka));this._zone=R;this.loc=H.loc||yb.create();this.invalid=da;this.weekData=null;this.c=va;this.o=
Ka;this.isLuxonDateTime=!0}P.now=function(){return new P({})};P.local=function(){var H=gc(arguments),R=H[1];return ec({year:R[0],month:R[1],day:R[2],hour:R[3],minute:R[4],second:R[5],millisecond:R[6]},H[0])};P.utc=function(){var H=gc(arguments),R=H[0],da=H[1];H=da[0];var va=da[1],Ka=da[2],Sa=da[3],$a=da[4],fb=da[5];da=da[6];R.zone=Hb.utcInstance;return ec({year:H,month:va,day:Ka,hour:Sa,minute:$a,second:fb,millisecond:da},R)};P.fromJSDate=function(H,R){void 0===R&&(R={});H="[object Date]"===Object.prototype.toString.call(H)?
H.valueOf():NaN;if(Number.isNaN(H))return P.invalid("invalid input");var da=Z(R.zone,wb.defaultZone);return da.isValid?new P({ts:H,zone:da,loc:yb.fromObject(R)}):P.invalid(mb(da))};P.fromMillis=function(H,R){void 0===R&&(R={});if(k(H))return-864E13>H||864E13<H?P.invalid("Timestamp out of range"):new P({ts:H,zone:Z(R.zone,wb.defaultZone),loc:yb.fromObject(R)});throw new Cb("fromMillis requires a numerical input, but received a "+typeof H+" with value "+H);};P.fromSeconds=function(H,R){void 0===R&&
(R={});if(k(H))return new P({ts:1E3*H,zone:Z(R.zone,wb.defaultZone),loc:yb.fromObject(R)});throw new Cb("fromSeconds requires a numerical input");};P.fromObject=function(H,R){void 0===R&&(R={});H=H||{};var da=Z(R.zone,wb.defaultZone);if(!da.isValid)return P.invalid(mb(da));var va=wb.now(),Ka=h(R.specificOffset)?da.offset(va):R.specificOffset,Sa=T(H,cc),$a=!h(Sa.ordinal),fb=!h(Sa.year),lb=!h(Sa.month)||!h(Sa.day);fb=fb||lb;var nb=Sa.weekYear||Sa.weekNumber;R=yb.fromObject(R);if((fb||$a)&&nb)throw new Sb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");
if(lb&&$a)throw new Sb("Can't mix ordinal dates with month/day");lb=nb||Sa.weekday&&!fb;nb=Kb(va,Ka);if(lb){var ib=Md;va=Kd;nb=qb(nb)}else $a?(ib=Nd,va=Ld,nb=pb(nb)):(ib=Ic,va=Jc);var ob=!1;ib=e(ib);for(var Fb;!(Fb=ib()).done;)Fb=Fb.value,h(Sa[Fb])?Sa[Fb]=ob?va[Fb]:nb[Fb]:ob=!0;lb?(va=m(Sa.weekYear),nb=z(Sa.weekNumber,1,L(Sa.weekYear)),ob=z(Sa.weekday,1,7),va=va?nb?ob?!1:eb("weekday",Sa.weekday):eb("week",Sa.week):eb("weekYear",Sa.weekYear)):$a?(va=m(Sa.year),nb=z(Sa.ordinal,1,E(Sa.year)?366:365),
va=va?nb?!1:eb("ordinal",Sa.ordinal):eb("year",Sa.year)):va=Db(Sa);if(va=va||xb(Sa))return P.invalid(va);$a=lb?gb(Sa):$a?Ab(Sa):Sa;Ka=Ob($a,Ka,da);da=new P({ts:Ka[0],zone:da,o:Ka[1],loc:R});return Sa.weekday&&fb&&H.weekday!==da.weekday?P.invalid("mismatched weekday","you can't specify both a weekday of "+Sa.weekday+" and a date of "+da.toISO()):da};P.fromISO=function(H,R){void 0===R&&(R={});var da=la(H,[xd,Wc],[yd,Bd],[zd,Cd],[Ad,Dd]);return Eb(da[0],da[1],R,"ISO 8601",H)};P.fromRFC2822=function(H,
R){void 0===R&&(R={});var da=la(H.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[td,O]);return Eb(da[0],da[1],R,"RFC 2822",H)};P.fromHTTP=function(H,R){void 0===R&&(R={});H=la(H,[ud,V],[vd,V],[wd,pa]);return Eb(H[0],H[1],R,"HTTP",R)};P.fromFormat=function(H,R,da){void 0===da&&(da={});if(h(H)||h(R))throw new Cb("fromFormat requires an input string and a format");var va=da,Ka=va.locale;va=va.numberingSystem;Ka=yb.fromOpts({locale:void 0===Ka?null:Ka,numberingSystem:void 0===va?null:
va,defaultToEN:!0});Ka=hb(Ka,H,R);var Sa=[Ka.result,Ka.zone,Ka.specificOffset,Ka.invalidReason];Ka=Sa[0];va=Sa[1];var $a=Sa[2];return(Sa=Sa[3])?P.invalid(Sa):Eb(Ka,va,da,"format "+R,H,$a)};P.fromString=function(H,R,da){void 0===da&&(da={});return P.fromFormat(H,R,da)};P.fromSQL=function(H,R){void 0===R&&(R={});var da=la(H,[Fd,Wc],[Gd,Hd]);return Eb(da[0],da[1],R,"SQL",H)};P.invalid=function(H,R){void 0===R&&(R=null);if(!H)throw new Cb("need to specify a reason the DateTime is invalid");H=H instanceof
Ib?H:new Ib(H,R);if(wb.throwOnInvalid)throw new Jb(H);return new P({invalid:H})};P.isDateTime=function(H){return H&&H.isLuxonDateTime||!1};var W=P.prototype;W.get=function(H){return this[H]};W.resolvedLocaleOptions=function(H){void 0===H&&(H={});H=Qb.create(this.loc.clone(H),H).resolvedOptions(this);return{locale:H.locale,numberingSystem:H.numberingSystem,outputCalendar:H.calendar}};W.toUTC=function(H,R){void 0===H&&(H=0);void 0===R&&(R={});return this.setZone(Hb.instance(H),R)};W.toLocal=function(){return this.setZone(wb.defaultZone)};
W.setZone=function(H,R){var da=void 0===R?{}:R;R=da.keepLocalTime;R=void 0===R?!1:R;da=da.keepCalendarTime;da=void 0===da?!1:da;H=Z(H,wb.defaultZone);if(H.equals(this.zone))return this;if(H.isValid){var va=this.ts;if(R||da)R=H.offset(this.ts),da=this.toObject(),va=Ob(da,R,H)[0];return tb(this,{ts:va,zone:H})}return P.invalid(mb(H))};W.reconfigure=function(H){H=void 0===H?{}:H;H=this.loc.clone({locale:H.locale,numberingSystem:H.numberingSystem,outputCalendar:H.outputCalendar});return tb(this,{loc:H})};
W.setLocale=function(H){return this.reconfigure({locale:H})};W.set=function(H){if(!this.isValid)return this;H=T(H,cc);var R=!h(H.weekYear)||!h(H.weekNumber)||!h(H.weekday),da=!h(H.ordinal),va=!h(H.year),Ka=!h(H.month)||!h(H.day),Sa=H.weekYear||H.weekNumber;if((va||Ka||da)&&Sa)throw new Sb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Ka&&da)throw new Sb("Can't mix ordinal dates with month/day");R?R=gb(u({},qb(this.c),H)):h(H.ordinal)?(R=u({},this.toObject(),H),h(H.day)&&
(R.day=Math.min(G(R.year,R.month),R.day))):R=Ab(u({},pb(this.c),H));H=Ob(R,this.o,this.zone);return tb(this,{ts:H[0],o:H[1]})};W.plus=function(H){if(!this.isValid)return this;H=zb.fromDurationLike(H);return tb(this,Tb(this,H))};W.minus=function(H){if(!this.isValid)return this;H=zb.fromDurationLike(H).negate();return tb(this,Tb(this,H))};W.startOf=function(H){if(!this.isValid)return this;var R={};H=zb.normalizeUnit(H);switch(H){case "years":R.month=1;case "quarters":case "months":R.day=1;case "weeks":case "days":R.hour=
0;case "hours":R.minute=0;case "minutes":R.second=0;case "seconds":R.millisecond=0}"weeks"===H&&(R.weekday=1);"quarters"===H&&(R.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(R)};W.endOf=function(H){var R;return this.isValid?this.plus((R={},R[H]=1,R)).startOf(H).minus(1):this};W.toFormat=function(H,R){void 0===R&&(R={});return this.isValid?Qb.create(this.loc.redefaultToEN(R)).formatDateTimeFromString(this,H):"Invalid DateTime"};W.toLocaleString=function(H,R){void 0===H&&(H=ub);void 0===R&&
(R={});return this.isValid?Qb.create(this.loc.clone(R),H).formatDateTime(this):"Invalid DateTime"};W.toLocaleParts=function(H){void 0===H&&(H={});return this.isValid?Qb.create(this.loc.clone(H),H).formatDateTimeParts(this):[]};W.toISO=function(H){var R=void 0===H?{}:H,da=R.format;H=R.suppressSeconds;H=void 0===H?!1:H;var va=R.suppressMilliseconds;va=void 0===va?!1:va;var Ka=R.includeOffset;Ka=void 0===Ka?!0:Ka;R=R.extendedZone;R=void 0===R?!1:R;if(!this.isValid)return null;da="extended"===(void 0===
da?"extended":da);var Sa=$b(this,da);return Sa=Sa+"T"+bc(this,da,H,va,Ka,R)};W.toISODate=function(H){H=(void 0===H?{}:H).format;return this.isValid?$b(this,"extended"===(void 0===H?"extended":H)):null};W.toISOWeekDate=function(){return Vb(this,"kkkk-'W'WW-c")};W.toISOTime=function(H){var R=void 0===H?{}:H;H=R.suppressMilliseconds;var da=R.suppressSeconds,va=R.includeOffset,Ka=R.includePrefix,Sa=R.extendedZone;R=R.format;return this.isValid?((void 0===Ka?0:Ka)?"T":"")+bc(this,"extended"===(void 0===
R?"extended":R),void 0===da?!1:da,void 0===H?!1:H,void 0===va?!0:va,void 0===Sa?!1:Sa):null};W.toRFC2822=function(){return Vb(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)};W.toHTTP=function(){return Vb(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")};W.toSQLDate=function(){return this.isValid?$b(this,!0):null};W.toSQLTime=function(H){var R=void 0===H?{}:H;H=R.includeOffset;H=void 0===H?!0:H;var da=R.includeZone;da=void 0===da?!1:da;R=R.includeOffsetSpace;R=void 0===R?!0:R;var va="HH:mm:ss.SSS";if(da||
H)R&&(va+=" "),da?va+="z":H&&(va+="ZZ");return Vb(this,va,!0)};W.toSQL=function(H){void 0===H&&(H={});return this.isValid?this.toSQLDate()+" "+this.toSQLTime(H):null};W.toString=function(){return this.isValid?this.toISO():"Invalid DateTime"};W.valueOf=function(){return this.toMillis()};W.toMillis=function(){return this.isValid?this.ts:NaN};W.toSeconds=function(){return this.isValid?this.ts/1E3:NaN};W.toUnixInteger=function(){return this.isValid?Math.floor(this.ts/1E3):NaN};W.toJSON=function(){return this.toISO()};
W.toBSON=function(){return this.toJSDate()};W.toObject=function(H){void 0===H&&(H={});if(!this.isValid)return{};var R=u({},this.c);H.includeConfig&&(R.outputCalendar=this.outputCalendar,R.numberingSystem=this.loc.numberingSystem,R.locale=this.loc.locale);return R};W.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)};W.diff=function(H,R,da){void 0===R&&(R="milliseconds");void 0===da&&(da={});if(!this.isValid||!H.isValid)return zb.invalid("created by diffing an invalid DateTime");da=u({locale:this.locale,
numberingSystem:this.numberingSystem},da);var va=(Array.isArray(R)?R:[R]).map(zb.normalizeUnit);R=H.valueOf()>this.valueOf();H=ha(R?this:H,R?H:this,va,da);return R?H.negate():H};W.diffNow=function(H,R){void 0===H&&(H="milliseconds");void 0===R&&(R={});return this.diff(P.now(),H,R)};W.until=function(H){return this.isValid?kc.fromDateTimes(this,H):this};W.hasSame=function(H,R){if(!this.isValid)return!1;var da=H.valueOf();H=this.setZone(H.zone,{keepLocalTime:!0});return H.startOf(R)<=da&&da<=H.endOf(R)};
W.equals=function(H){return this.isValid&&H.isValid&&this.valueOf()===H.valueOf()&&this.zone.equals(H.zone)&&this.loc.equals(H.loc)};W.toRelative=function(H){void 0===H&&(H={});if(!this.isValid)return null;var R=H.base||P.fromObject({},{zone:this.zone}),da=H.padding?this<R?-H.padding:H.padding:0,va="years months days hours minutes seconds".split(" "),Ka=H.unit;Array.isArray(H.unit)&&(va=H.unit,Ka=void 0);return fc(R,this.plus(da),u({},H,{numeric:"always",units:va,unit:Ka}))};W.toRelativeCalendar=
function(H){void 0===H&&(H={});return this.isValid?fc(H.base||P.fromObject({},{zone:this.zone}),this,u({},H,{numeric:"auto",units:["years","months","days"],calendary:!0})):null};P.min=function(){for(var H=arguments.length,R=Array(H),da=0;da<H;da++)R[da]=arguments[da];if(!R.every(P.isDateTime))throw new Cb("min requires all arguments be DateTimes");return p(R,function(va){return va.valueOf()},Math.min)};P.max=function(){for(var H=arguments.length,R=Array(H),da=0;da<H;da++)R[da]=arguments[da];if(!R.every(P.isDateTime))throw new Cb("max requires all arguments be DateTimes");
return p(R,function(va){return va.valueOf()},Math.max)};P.fromFormatExplain=function(H,R,da){void 0===da&&(da={});var va=da;da=va.locale;va=va.numberingSystem;da=yb.fromOpts({locale:void 0===da?null:da,numberingSystem:void 0===va?null:va,defaultToEN:!0});return hb(da,H,R)};P.fromStringExplain=function(H,R,da){void 0===da&&(da={});return P.fromFormatExplain(H,R,da)};a(P,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:
null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?
this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:
NaN}},{key:"weekYear",get:function(){return this.isValid?Rb(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?Rb(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?Rb(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?pb(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?lc.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?lc.months("long",{locObj:this.loc})[this.month-
1]:null}},{key:"weekdayShort",get:function(){return this.isValid?lc.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?lc.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,
{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}},{key:"isInLeapYear",get:function(){return E(this.year)}},{key:"daysInMonth",get:function(){return G(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?E(this.year)?366:365:NaN}},{key:"weeksInWeekYear",
get:function(){return this.isValid?L(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return ub}},{key:"DATE_MED",get:function(){return Q}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return Ga}},{key:"DATE_FULL",get:function(){return Fa}},{key:"DATE_HUGE",get:function(){return Aa}},{key:"TIME_SIMPLE",get:function(){return Da}},{key:"TIME_WITH_SECONDS",get:function(){return Na}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return Ma}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return Ea}},
{key:"TIME_24_SIMPLE",get:function(){return Ra}},{key:"TIME_24_WITH_SECONDS",get:function(){return Ua}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return Za}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return db}},{key:"DATETIME_SHORT",get:function(){return Wa}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return cb}},{key:"DATETIME_MED",get:function(){return bb}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return jb}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return Bb}},
{key:"DATETIME_FULL",get:function(){return hc}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return ic}},{key:"DATETIME_HUGE",get:function(){return jc}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return rb}}]);return P}();F.DateTime=vb;F.Duration=zb;F.FixedOffsetZone=Hb;F.IANAZone=Ub;F.Info=lc;F.Interval=kc;F.InvalidZone=Fc;F.Settings=wb;F.SystemZone=Lc;F.VERSION="2.4.0";F.Zone=Zb;Object.defineProperty(F,"__esModule",{value:!0})})},"esri/arcade/featureset/support/shared":function(){define("require exports ../../polyfill/tsSupport/assign ../../polyfill/tsSupport/spreadarray ../../../geometry/Extent ../../../layers/Field".split(" "),
function(F,y,a,u,n,t){function r(d){var f=null;d.domain&&(f="range"===d.domain.type?{type:"range",range:[d.domain.minValue,d.domain.maxValue]}:{type:"codedValue",codedValues:d.domain.toJson().codedValues});return a(a({name:d.name,type:d.type,alias:d.alias},void 0!==d.length?{length:d.length}:{}),{editable:!0===d.editable,nullable:!0===d.nullable,domain:f})}function l(d){return d instanceof Date}Object.defineProperty(y,"__esModule",{value:!0});y.stableStringify=y.extractServiceUrl=y.toEsriGeometryType=
y.layerFieldEsriConstants=y.layerGeometryEsriRestConstants=y.layerGeometryEsriConstants=y.callback=y.errback=y.defaultMaxRecords=y.sameGeomType=y.convertLinearUnitsToCode=y.shapeExtent=y.convertSquareUnitsToCode=y.cloneAttributes=y.equalityTest=y.isDate=y.isArray=y.isNumber=y.isBoolean=y.isString=y.IdState=y.esriFieldToJson=y.cloneField=y.FeatureServiceDatabaseType=void 0;(function(d){d[d.Standardised=0]="Standardised";d[d.StandardisedNoInterval=1]="StandardisedNoInterval";d[d.SqlServer=2]="SqlServer";
d[d.Oracle=3]="Oracle";d[d.Postgres=4]="Postgres";d[d.PGDB=5]="PGDB";d[d.FILEGDB=6]="FILEGDB";d[d.NotEvaluated=7]="NotEvaluated"})(y.FeatureServiceDatabaseType||(y.FeatureServiceDatabaseType={}));y.cloneField=function(d){return new t(r(d))};y.esriFieldToJson=r;(function(d){d[d.InFeatureSet=0]="InFeatureSet";d[d.NotInFeatureSet=1]="NotInFeatureSet";d[d.Unknown=2]="Unknown"})(y.IdState||(y.IdState={}));y.isString=function(d){return"string"===typeof d||d instanceof String};y.isBoolean=function(d){return"boolean"===
typeof d};y.isNumber=function(d){return"number"===typeof d};y.isArray=function(d){return d instanceof Array};y.isDate=l;y.equalityTest=function(d,f){return d===f?!0:l(d)&&l(f)?d.getTime()===f.getTime():!1};y.cloneAttributes=function(d){var f={},b;for(b in d)f[b]=d[b];return f};y.convertSquareUnitsToCode=function(d){if(void 0===d)return null;if("number"===typeof d)return d;switch(d.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};
y.shapeExtent=function(d){if(null===d)return null;switch(d.type){case "polygon":case "multipoint":case "polyline":return d.getExtent();case "point":return new n({xmin:d.x,ymin:d.y,xmax:d.x,ymax:d.y,spatialReference:d.spatialReference});case "extent":return d}return null};y.convertLinearUnitsToCode=function(d){if(void 0===d)return null;if("number"===typeof d||"number"===typeof d)return d;switch(d.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};
y.sameGeomType=function(d,f){return d===f||"point"===d&&"esriGeometryPoint"===f||"polyline"===d&&"esriGeometryPolyline"===f||"polygon"===d&&"esriGeometryPolygon"===f||"extent"===d&&"esriGeometryEnvelope"===f||"multipoint"===d&&"esriGeometryMultipoint"===f||"point"===f&&"esriGeometryPoint"===d||"polyline"===f&&"esriGeometryPolyline"===d||"polygon"===f&&"esriGeometryPolygon"===d||"extent"===f&&"esriGeometryEnvelope"===d||"multipoint"===f&&"esriGeometryMultipoint"===d?!0:!1};y.defaultMaxRecords=1E3;
y.errback=function(d){return function(f){d.reject(f)}};y.callback=function(d,f){return function(){try{d.apply(null,arguments)}catch(b){f.reject(b)}}};y.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};y.layerGeometryEsriRestConstants={point:"esriGeometryPoint",
polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};y.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger","long":"esriFieldTypeLong",
single:"esriFieldTypeSingle","double":"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",
esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};y.toEsriGeometryType=function(d){switch(d){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";
case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};y.extractServiceUrl=function(d){if(void 0===d)return"";d=d.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");d=d.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return d=d.split("?")[0]};y.stableStringify=function(d,f){f||(f={});"function"===typeof f&&(f={cmp:f});var b="boolean"===typeof f.cycles?f.cycles:!1,c=f.cmp&&function(e){return function(h){return function(k,m){return e({key:k,value:h[k]},{key:m,value:h[m]})}}}(f.cmp),
g=[];return function k(h){h&&h.toJson&&"function"===typeof h.toJson&&(h=h.toJson());if(void 0!==h){if("number"===typeof h)return isFinite(h)?""+h:"null";if("object"!==typeof h)return JSON.stringify(h);var m;if(Array.isArray(h)){var w="[";for(m=0;m<h.length;m++)m&&(w+=","),w+=k(h[m])||"null";return w+"]"}if(null===h)return"null";if(g.includes(h)){if(b)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var p=g.push(h)-1,A=Object.keys(h).sort(c&&c(h));w=
"";for(m=0;m<A.length;m++){var C=A[m],z=k(h[C]);z&&(w&&(w+=","),w+=JSON.stringify(C)+":"+z)}g.splice(p,1);return"{"+w+"}"}}(d)}})},"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./RangeDomain ./CodedValueDomain".split(" "),function(F,y,a,u,n,t,r){F=F(null,{declaredClass:"esri.layers.Field",constructor:function(l){if(l&&y.isObject(l)&&(this.name=l.name,this.type=l.type,this.alias=l.alias,this.length=l.length,this.editable=l.editable,this.nullable=
l.nullable,this.defaultValue=l.defaultValue,this.description=l.description?JSON.parse(l.description):null,this.isViewOverride=!!l.isViewOverride,(l=l.domain)&&y.isObject(l)))switch(l.type){case "range":this.domain=new t(l);break;case "codedValue":this.domain=new r(l)}},toJson:function(){return n.fixJson({name:this.name,type:this.type,alias:this.alias,length:this.length,editable:this.editable,nullable:this.nullable,defaultValue:this.defaultValue,description:this.description?JSON.stringify(this.description):
null,domain:this.domain?this.domain.toJson():null,isViewOverride:this.isViewOverride||void 0})},toJSON:function(){return this.toJson()}});a("extend-esri")&&y.setObject("layers.Field",F,u);return F})},"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),function(F,y,a,u,n,t){F=F([t],{declaredClass:"esri.layers.RangeDomain",constructor:function(r){r&&y.isObject(r)&&(this.minValue=r.range[0],this.maxValue=r.range[1])},toJson:function(){var r=
this.inherited(arguments);r.range=[this.minValue,this.maxValue];return n.fixJson(r)}});a("extend-esri")&&y.setObject("layers.RangeDomain",F,u);return F})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(F,y,a,u,n){F=F(null,{declaredClass:"esri.layers.Domain",constructor:function(t){t&&y.isObject(t)&&(this.name=t.name,this.type=t.type)},toJson:function(){return n.fixJson({name:this.name,type:this.type})}});a("extend-esri")&&
y.setObject("layers.Domain",F,u);return F})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),function(F,y,a,u,n,t,r){F=F([r],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(l){l&&y.isObject(l)&&(this.codedValues=l.codedValues)},getName:function(l){var d;a.some(this.codedValues,function(f){f.code==l&&(d=f.name);return!!d});return d},toJson:function(){var l=this.inherited(arguments);
l.codedValues=y.clone(this.codedValues);return t.fixJson(l)}});u("extend-esri")&&y.setObject("layers.CodedValueDomain",F,n);return F})},"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Point"],function(F,y,a,u,n){F=F(n,{declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}});a("extend-esri")&&y.setObject("geometry.ScreenPoint",F,u);return F})},"esri/geometry/Rect":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Geometry ./Point ./Extent ../srUtils".split(" "),
function(F,y,a,u,n,t,r,l,d){function f(c){return new l(parseFloat(c.x),parseFloat(c.y)-parseFloat(c.height),parseFloat(c.x)+parseFloat(c.width),parseFloat(c.y),c.spatialReference)}var b=F(t,{declaredClass:"esri.geometry.Rect",type:"rect",x:0,y:0,width:100,height:100,constructor:function(c,g,e,h,k){n.isObject(c)&&"extent"===c.type&&(g=c.ymax,e=c.getWidth(),h=c.getHeight(),k=c.spatialReference,c=c.xmin);n.isObject(c)?(n.mixin(this,c),this.spatialReference&&(this.spatialReference=d.createSpatialReference(this.spatialReference))):
(this.x=c,this.y=g,this.width=e,this.height=h,this.spatialReference=k);this.verifySR()},getCenter:function(){return new r(this.x+this.width/2,this.y+this.height/2,this.spatialReference)},offset:function(c,g){return new b(this.x+c,this.y+g,this.width,this.height,this.spatialReference)},intersects:function(c){return c.x+c.width<=this.x||c.y+c.height<=this.y||c.y>=this.y+this.height||c.x>=this.x+this.width?!1:!0},getExtent:function(){return f(this)},update:function(c,g,e,h,k){this.x=c;this.y=g;this.width=
e;this.height=h;this.spatialReference=k;this.clearCache();return this}});a("extend-esri")&&(y.setObject("geometry.Rect",b,u),u.geometry._rectToExtent=f,u.geometry._extentToRect=function(c){return new b(c)});return b})},"esri/geometry/scaleUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../config","../WKIDUnitConversion"],function(F,y,a,u,n){function t(c,g,e){return c&&g?c.getWidth()/g*(e||l)*39.37*d.screenDPI:0}function r(c,g,e,h,k){return c.expand(h*g/(39.37*((k?e:f.values[f[e]])||
l)*d.screenDPI)/c.getWidth())}var l=6370997*Math.PI/180,d=u.defaults,f=n,b={getUnitValueForSR:function(c){return this.getUnitValue(c)||l},getUnitValue:function(c){if(c)if("object"===typeof c){var g=c.wkid;var e=c.wkt}else"number"===typeof c?g=c:"string"===typeof c&&(e=c);if(g)var h=f.values[f[g]];else e&&-1!==e.search(/^PROJCS/i)&&(c=/UNIT\[([^\]]+)\]\]$/i.exec(e))&&c[1]&&(h=parseFloat(c[1].split(",")[1]));return h},getScale:function(c,g,e){if(1<arguments.length&&null!=g&&!g.declaredClass){var h=
c;var k=g;g=null;var m=b.getUnitValue(e)}else h=g||c.extent,k=c.width,m=b.getUnitValue(h&&h.spatialReference);return t(h,k,m)},getExtentForScale:function(c,g,e){return r(e||c.extent,c.width,b.getUnitValue(c.spatialReference),g,!0)}};y("extend-esri")&&(F.mixin(F.getObject("geometry",!0,a),b),a.geometry._getScale=t,a.geometry._getExtentForScale=r);return b})},"esri/WKIDUnitConversion":function(){define(["dojo/has","./kernel"],function(F,y){var a,u={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,
.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,
2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,
3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,
3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,
3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,
5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,
6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,
6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,
6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,
6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,
7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,
7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,
8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,
8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,
8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,
24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,
31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,
102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,
103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,
103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,
103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(a=2E3;2045>=a;a++)u[a]=0;for(a=2056;2065>=a;a++)u[a]=0;
for(a=2067;2135>=a;a++)u[a]=0;for(a=2137;2154>=a;a++)u[a]=0;for(a=2161;2170>=a;a++)u[a]=0;for(a=2172;2193>=a;a++)u[a]=0;for(a=2195;2198>=a;a++)u[a]=0;for(a=2200;2203>=a;a++)u[a]=0;for(a=2205;2217>=a;a++)u[a]=0;for(a=2222;2224>=a;a++)u[a]=1;for(a=2225;2250>=a;a++)u[a]=2;for(a=2251;2253>=a;a++)u[a]=1;for(a=2257;2264>=a;a++)u[a]=2;for(a=2274;2279>=a;a++)u[a]=2;for(a=2280;2282>=a;a++)u[a]=1;for(a=2283;2289>=a;a++)u[a]=2;for(a=2290;2292>=a;a++)u[a]=0;for(a=2308;2313>=a;a++)u[a]=0;for(a=2315;2491>=a;a++)u[a]=
0;for(a=2494;2866>=a;a++)u[a]=0;for(a=2867;2869>=a;a++)u[a]=1;for(a=2870;2888>=a;a++)u[a]=2;for(a=2891;2895>=a;a++)u[a]=2;for(a=2896;2898>=a;a++)u[a]=1;for(a=2902;2908>=a;a++)u[a]=2;for(a=2915;2920>=a;a++)u[a]=2;for(a=2921;2923>=a;a++)u[a]=1;for(a=2924;2930>=a;a++)u[a]=2;for(a=2931;2962>=a;a++)u[a]=0;for(a=2964;2968>=a;a++)u[a]=2;for(a=2969;2973>=a;a++)u[a]=0;for(a=2975;2991>=a;a++)u[a]=0;for(a=2995;3051>=a;a++)u[a]=0;for(a=3054;3079>=a;a++)u[a]=0;for(a=3081;3088>=a;a++)u[a]=0;for(a=3092;3101>=a;a++)u[a]=
0;for(a=3106;3138>=a;a++)u[a]=0;for(a=3146;3151>=a;a++)u[a]=0;for(a=3153;3166>=a;a++)u[a]=0;for(a=3168;3172>=a;a++)u[a]=0;for(a=3174;3203>=a;a++)u[a]=0;for(a=3294;3358>=a;a++)u[a]=0;for(a=3367;3403>=a;a++)u[a]=0;for(a=3408;3416>=a;a++)u[a]=0;for(a=3417;3438>=a;a++)u[a]=2;for(a=3441;3446>=a;a++)u[a]=2;for(a=3447;3450>=a;a++)u[a]=0;for(a=3451;3459>=a;a++)u[a]=2;for(a=3460;3478>=a;a++)u[a]=0;for(a=3554;3559>=a;a++)u[a]=0;for(a=3560;3570>=a;a++)u[a]=2;for(a=3571;3581>=a;a++)u[a]=0;for(a=3594;3597>=a;a++)u[a]=
0;for(a=3601;3604>=a;a++)u[a]=0;for(a=3637;3639>=a;a++)u[a]=0;for(a=3665;3667>=a;a++)u[a]=0;for(a=3693;3695>=a;a++)u[a]=0;for(a=3701;3727>=a;a++)u[a]=0;for(a=3728;3739>=a;a++)u[a]=2;for(a=3740;3751>=a;a++)u[a]=0;for(a=3753;3760>=a;a++)u[a]=2;for(a=3761;3773>=a;a++)u[a]=0;for(a=3775;3777>=a;a++)u[a]=0;for(a=3779;3781>=a;a++)u[a]=0;for(a=3783;3785>=a;a++)u[a]=0;for(a=3788;3791>=a;a++)u[a]=0;for(a=3797;3802>=a;a++)u[a]=0;for(a=3814;3816>=a;a++)u[a]=0;for(a=3825;3829>=a;a++)u[a]=0;for(a=3832;3841>=a;a++)u[a]=
0;for(a=3844;3852>=a;a++)u[a]=0;for(a=3873;3885>=a;a++)u[a]=0;for(a=3890;3893>=a;a++)u[a]=0;for(a=3907;3912>=a;a++)u[a]=0;for(a=3942;3950>=a;a++)u[a]=0;for(a=3968;3970>=a;a++)u[a]=0;for(a=3973;3976>=a;a++)u[a]=0;for(a=3986;3989>=a;a++)u[a]=0;for(a=3994;3997>=a;a++)u[a]=0;for(a=4048;4051>=a;a++)u[a]=0;for(a=4056;4063>=a;a++)u[a]=0;for(a=4093;4096>=a;a++)u[a]=0;for(a=4390;4398>=a;a++)u[a]=0;for(a=4399;4413>=a;a++)u[a]=2;for(a=4418;4433>=a;a++)u[a]=2;for(a=4455;4457>=a;a++)u[a]=2;for(a=4484;4489>=a;a++)u[a]=
0;for(a=4491;4554>=a;a++)u[a]=0;for(a=4568;4589>=a;a++)u[a]=0;for(a=4652;4656>=a;a++)u[a]=0;for(a=4766;4800>=a;a++)u[a]=0;for(a=5014;5016>=a;a++)u[a]=0;for(a=5069;5072>=a;a++)u[a]=0;for(a=5105;5130>=a;a++)u[a]=0;for(a=5173;5188>=a;a++)u[a]=0;for(a=5253;5259>=a;a++)u[a]=0;for(a=5269;5275>=a;a++)u[a]=0;for(a=5292;5311>=a;a++)u[a]=0;for(a=5329;5331>=a;a++)u[a]=0;for(a=5343;5349>=a;a++)u[a]=0;for(a=5355;5357>=a;a++)u[a]=0;for(a=5387;5389>=a;a++)u[a]=0;for(a=5459;5463>=a;a++)u[a]=0;for(a=5479;5482>=a;a++)u[a]=
0;for(a=5518;5520>=a;a++)u[a]=0;for(a=5530;5539>=a;a++)u[a]=0;for(a=5550;5552>=a;a++)u[a]=0;for(a=5562;5583>=a;a++)u[a]=0;for(a=5623;5625>=a;a++)u[a]=2;for(a=5631;5639>=a;a++)u[a]=0;for(a=5649;5653>=a;a++)u[a]=0;for(a=5663;5680>=a;a++)u[a]=0;for(a=5682;5685>=a;a++)u[a]=0;for(a=5875;5877>=a;a++)u[a]=0;for(a=5896;5899>=a;a++)u[a]=0;for(a=5921;5940>=a;a++)u[a]=0;for(a=6050;6125>=a;a++)u[a]=0;for(a=6244;6275>=a;a++)u[a]=0;for(a=6328;6348>=a;a++)u[a]=0;for(a=6350;6356>=a;a++)u[a]=0;for(a=6366;6372>=a;a++)u[a]=
0;for(a=6381;6387>=a;a++)u[a]=0;for(a=6393;6404>=a;a++)u[a]=0;for(a=6480;6483>=a;a++)u[a]=0;for(a=6511;6514>=a;a++)u[a]=0;for(a=6579;6581>=a;a++)u[a]=0;for(a=6619;6624>=a;a++)u[a]=0;for(a=6625;6627>=a;a++)u[a]=2;for(a=6628;6632>=a;a++)u[a]=0;for(a=6634;6637>=a;a++)u[a]=0;for(a=6669;6692>=a;a++)u[a]=0;for(a=6707;6709>=a;a++)u[a]=0;for(a=6720;6723>=a;a++)u[a]=0;for(a=6732;6738>=a;a++)u[a]=0;for(a=6931;6933>=a;a++)u[a]=0;for(a=6956;6959>=a;a++)u[a]=0;for(a=7005;7007>=a;a++)u[a]=0;for(a=7057;7070>=a;a++)u[a]=
2;for(a=7074;7082>=a;a++)u[a]=0;for(a=7109;7118>=a;a++)u[a]=0;for(a=7119;7127>=a;a++)u[a]=1;for(a=7374;7376>=a;a++)u[a]=0;for(a=7528;7586>=a;a++)u[a]=0;for(a=7587;7645>=a;a++)u[a]=2;for(a=7692;7696>=a;a++)u[a]=0;for(a=7755;7787>=a;a++)u[a]=0;for(a=7791;7795>=a;a++)u[a]=0;for(a=7799;7801>=a;a++)u[a]=0;for(a=7803;7805>=a;a++)u[a]=0;for(a=7825;7831>=a;a++)u[a]=0;for(a=7845;7859>=a;a++)u[a]=0;for(a=8013;8032>=a;a++)u[a]=0;for(a=8065;8068>=a;a++)u[a]=1;for(a=8518;8529>=a;a++)u[a]=2;for(a=8533;8536>=a;a++)u[a]=
2;for(a=8538;8540>=a;a++)u[a]=2;for(a=8677;8679>=a;a++)u[a]=0;for(a=8836;8840>=a;a++)u[a]=0;for(a=8857;8859>=a;a++)u[a]=0;for(a=8908;8910>=a;a++)u[a]=0;for(a=9154;9159>=a;a++)u[a]=0;for(a=9205;9218>=a;a++)u[a]=0;for(a=9271;9273>=a;a++)u[a]=0;for(a=9295;9297>=a;a++)u[a]=0;for(a=9356;9360>=a;a++)u[a]=0;for(a=9404;9407>=a;a++)u[a]=0;for(a=9476;9482>=a;a++)u[a]=0;for(a=9487;9494>=a;a++)u[a]=0;for(a=9697;9699>=a;a++)u[a]=0;for(a=20002;20032>=a;a++)u[a]=0;for(a=20062;20092>=a;a++)u[a]=0;for(a=20135;20138>=
a;a++)u[a]=0;for(a=20248;20258>=a;a++)u[a]=0;for(a=20348;20358>=a;a++)u[a]=0;for(a=20436;20440>=a;a++)u[a]=0;for(a=20822;20824>=a;a++)u[a]=0;for(a=20904;20932>=a;a++)u[a]=0;for(a=20934;20936>=a;a++)u[a]=0;for(a=21004;21032>=a;a++)u[a]=0;for(a=21035;21037>=a;a++)u[a]=0;for(a=21095;21097>=a;a++)u[a]=0;for(a=21148;21150>=a;a++)u[a]=0;for(a=21207;21264>=a;a++)u[a]=0;for(a=21307;21364>=a;a++)u[a]=0;for(a=21413;21423>=a;a++)u[a]=0;for(a=21453;21463>=a;a++)u[a]=0;for(a=21473;21483>=a;a++)u[a]=0;for(a=21780;21782>=
a;a++)u[a]=0;for(a=21891;21894>=a;a++)u[a]=0;for(a=21896;21899>=a;a++)u[a]=0;for(a=22171;22177>=a;a++)u[a]=0;for(a=22181;22187>=a;a++)u[a]=0;for(a=22191;22197>=a;a++)u[a]=0;for(a=22234;22236>=a;a++)u[a]=0;for(a=22521;22525>=a;a++)u[a]=0;for(a=22991;22994>=a;a++)u[a]=0;for(a=23028;23038>=a;a++)u[a]=0;for(a=23830;23853>=a;a++)u[a]=0;for(a=23866;23872>=a;a++)u[a]=0;for(a=23877;23884>=a;a++)u[a]=0;for(a=23886;23894>=a;a++)u[a]=0;for(a=23946;23948>=a;a++)u[a]=0;for(a=24311;24313>=a;a++)u[a]=0;for(a=24342;24347>=
a;a++)u[a]=0;for(a=24370;24374>=a;a++)u[a]=10;for(a=24375;24381>=a;a++)u[a]=0;for(a=24718;24721>=a;a++)u[a]=0;for(a=24817;24821>=a;a++)u[a]=0;for(a=24877;24882>=a;a++)u[a]=0;for(a=24891;24893>=a;a++)u[a]=0;for(a=25391;25395>=a;a++)u[a]=0;for(a=25828;25838>=a;a++)u[a]=0;for(a=26191;26195>=a;a++)u[a]=0;for(a=26391;26393>=a;a++)u[a]=0;for(a=26701;26722>=a;a++)u[a]=0;for(a=26729;26799>=a;a++)u[a]=2;for(a=26801;26803>=a;a++)u[a]=2;for(a=26811;26813>=a;a++)u[a]=2;for(a=26847;26870>=a;a++)u[a]=2;for(a=26891;26899>=
a;a++)u[a]=0;for(a=26901;26923>=a;a++)u[a]=0;for(a=26929;26946>=a;a++)u[a]=0;for(a=26948;26998>=a;a++)u[a]=0;for(a=27037;27040>=a;a++)u[a]=0;for(a=27205;27232>=a;a++)u[a]=0;for(a=27258;27260>=a;a++)u[a]=0;for(a=27391;27398>=a;a++)u[a]=0;for(a=27561;27564>=a;a++)u[a]=0;for(a=27571;27574>=a;a++)u[a]=0;for(a=27581;27584>=a;a++)u[a]=0;for(a=27591;27594>=a;a++)u[a]=0;for(a=28191;28193>=a;a++)u[a]=0;for(a=28348;28358>=a;a++)u[a]=0;for(a=28402;28432>=a;a++)u[a]=0;for(a=28462;28492>=a;a++)u[a]=0;for(a=29118;29122>=
a;a++)u[a]=0;for(a=29168;29172>=a;a++)u[a]=0;for(a=29177;29185>=a;a++)u[a]=0;for(a=29187;29195>=a;a++)u[a]=0;for(a=29900;29903>=a;a++)u[a]=0;for(a=30161;30179>=a;a++)u[a]=0;for(a=30491;30494>=a;a++)u[a]=0;for(a=30729;30732>=a;a++)u[a]=0;for(a=31251;31259>=a;a++)u[a]=0;for(a=31265;31268>=a;a++)u[a]=0;for(a=31275;31279>=a;a++)u[a]=0;for(a=31281;31297>=a;a++)u[a]=0;for(a=31461;31469>=a;a++)u[a]=0;for(a=31491;31495>=a;a++)u[a]=0;for(a=31917;31922>=a;a++)u[a]=0;for(a=31965;32E3>=a;a++)u[a]=0;for(a=32001;32003>=
a;a++)u[a]=2;for(a=32005;32031>=a;a++)u[a]=2;for(a=32033;32060>=a;a++)u[a]=2;for(a=32064;32067>=a;a++)u[a]=2;for(a=32074;32077>=a;a++)u[a]=2;for(a=32081;32086>=a;a++)u[a]=0;for(a=32107;32130>=a;a++)u[a]=0;for(a=32133;32158>=a;a++)u[a]=0;for(a=32164;32167>=a;a++)u[a]=2;for(a=32180;32199>=a;a++)u[a]=0;for(a=32201;32260>=a;a++)u[a]=0;for(a=32301;32360>=a;a++)u[a]=0;for(a=32601;32662>=a;a++)u[a]=0;for(a=32664;32667>=a;a++)u[a]=2;for(a=32701;32761>=a;a++)u[a]=0;for(a=53001;53004>=a;a++)u[a]=0;for(a=53008;53019>=
a;a++)u[a]=0;for(a=53021;53032>=a;a++)u[a]=0;for(a=53034;53037>=a;a++)u[a]=0;for(a=53042;53046>=a;a++)u[a]=0;for(a=53074;53080>=a;a++)u[a]=0;for(a=54001;54004>=a;a++)u[a]=0;for(a=54008;54019>=a;a++)u[a]=0;for(a=54021;54032>=a;a++)u[a]=0;for(a=54034;54037>=a;a++)u[a]=0;for(a=54042;54046>=a;a++)u[a]=0;for(a=54048;54053>=a;a++)u[a]=0;for(a=54074;54080>=a;a++)u[a]=0;for(a=54098;54101>=a;a++)u[a]=0;for(a=102001;102040>=a;a++)u[a]=0;for(a=102042;102063>=a;a++)u[a]=0;for(a=102065;102067>=a;a++)u[a]=0;for(a=
102070;102117>=a;a++)u[a]=0;for(a=102122;102216>=a;a++)u[a]=0;for(a=102221;102377>=a;a++)u[a]=0;for(a=102382;102388>=a;a++)u[a]=0;for(a=102389;102398>=a;a++)u[a]=2;for(a=102399;102444>=a;a++)u[a]=0;for(a=102445;102447>=a;a++)u[a]=2;for(a=102448;102458>=a;a++)u[a]=0;for(a=102459;102468>=a;a++)u[a]=2;for(a=102469;102499>=a;a++)u[a]=0;for(a=102500;102519>=a;a++)u[a]=1;for(a=102520;102524>=a;a++)u[a]=0;for(a=102525;102529>=a;a++)u[a]=2;for(a=102530;102588>=a;a++)u[a]=0;for(a=102590;102598>=a;a++)u[a]=
0;for(a=102601;102603>=a;a++)u[a]=0;for(a=102605;102628>=a;a++)u[a]=0;for(a=102629;102646>=a;a++)u[a]=2;for(a=102648;102700>=a;a++)u[a]=2;for(a=102701;102703>=a;a++)u[a]=0;for(a=102707;102730>=a;a++)u[a]=2;for(a=102733;102758>=a;a++)u[a]=2;for(a=102767;102900>=a;a++)u[a]=0;for(a=102901;102933>=a;a++)u[a]=2;for(a=102934;102950>=a;a++)u[a]=13;for(a=102951;102955>=a;a++)u[a]=0;for(a=102961;102963>=a;a++)u[a]=0;for(a=102965;102969>=a;a++)u[a]=0;for(a=102971;102973>=a;a++)u[a]=0;for(a=102975;102989>=a;a++)u[a]=
0;for(a=102990;102992>=a;a++)u[a]=1;for(a=102997;103002>=a;a++)u[a]=0;for(a=103003;103008>=a;a++)u[a]=2;for(a=103009;103011>=a;a++)u[a]=0;for(a=103012;103014>=a;a++)u[a]=2;for(a=103019;103021>=a;a++)u[a]=0;for(a=103022;103024>=a;a++)u[a]=2;for(a=103029;103031>=a;a++)u[a]=0;for(a=103032;103034>=a;a++)u[a]=2;for(a=103065;103068>=a;a++)u[a]=0;for(a=103074;103076>=a;a++)u[a]=0;for(a=103077;103079>=a;a++)u[a]=1;for(a=103080;103082>=a;a++)u[a]=0;for(a=103083;103085>=a;a++)u[a]=2;for(a=103090;103093>=a;a++)u[a]=
0;for(a=103097;103099>=a;a++)u[a]=0;for(a=103100;103102>=a;a++)u[a]=2;for(a=103107;103109>=a;a++)u[a]=0;for(a=103110;103112>=a;a++)u[a]=2;for(a=103113;103116>=a;a++)u[a]=0;for(a=103117;103120>=a;a++)u[a]=2;for(a=103153;103157>=a;a++)u[a]=0;for(a=103158;103162>=a;a++)u[a]=2;for(a=103163;103165>=a;a++)u[a]=0;for(a=103166;103168>=a;a++)u[a]=1;for(a=103169;103171>=a;a++)u[a]=2;for(a=103186;103188>=a;a++)u[a]=0;for(a=103189;103191>=a;a++)u[a]=2;for(a=103192;103195>=a;a++)u[a]=0;for(a=103196;103199>=a;a++)u[a]=
2;for(a=103200;103224>=a;a++)u[a]=0;for(a=103225;103227>=a;a++)u[a]=1;for(a=103232;103237>=a;a++)u[a]=0;for(a=103238;103243>=a;a++)u[a]=2;for(a=103244;103246>=a;a++)u[a]=0;for(a=103247;103249>=a;a++)u[a]=2;for(a=103254;103256>=a;a++)u[a]=0;for(a=103257;103259>=a;a++)u[a]=2;for(a=103264;103266>=a;a++)u[a]=0;for(a=103267;103269>=a;a++)u[a]=2;for(a=103300;103375>=a;a++)u[a]=0;for(a=103381;103383>=a;a++)u[a]=0;for(a=103384;103386>=a;a++)u[a]=1;for(a=103387;103389>=a;a++)u[a]=0;for(a=103390;103392>=a;a++)u[a]=
2;for(a=103397;103399>=a;a++)u[a]=0;for(a=103400;103471>=a;a++)u[a]=2;for(a=103476;103478>=a;a++)u[a]=0;for(a=103479;103481>=a;a++)u[a]=2;for(a=103486;103488>=a;a++)u[a]=0;for(a=103489;103491>=a;a++)u[a]=2;for(a=103492;103495>=a;a++)u[a]=0;for(a=103496;103499>=a;a++)u[a]=2;for(a=103528;103543>=a;a++)u[a]=0;for(a=103544;103548>=a;a++)u[a]=2;for(a=103549;103551>=a;a++)u[a]=0;for(a=103552;103554>=a;a++)u[a]=1;for(a=103555;103557>=a;a++)u[a]=2;for(a=103558;103560>=a;a++)u[a]=0;for(a=103571;103573>=a;a++)u[a]=
0;for(a=103574;103576>=a;a++)u[a]=2;for(a=103577;103580>=a;a++)u[a]=0;for(a=103581;103583>=a;a++)u[a]=2;for(a=103595;103694>=a;a++)u[a]=0;for(a=103696;103699>=a;a++)u[a]=0;for(a=103700;103793>=a;a++)u[a]=2;for(a=103794;103887>=a;a++)u[a]=0;for(a=103900;103971>=a;a++)u[a]=2;F("extend-esri")&&(y.WKIDUnitConversion=u);return u})},"esri/geometry/screenUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/sniff ../kernel ./Point ./ScreenPoint ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),
function(F,y,a,u,n,t,r,l,d,f){var b=function(){return 9>a("ie")?function(g,e,h,k,m,w,p,A,C){var z=[],q=Math.round,v,B=p.length,D;for(v=0;v<B;v++){var x=p[v];var E=A?A(x[0][0],x[0][1],C):x[0];if(1<(D=x.length)){var G=q((E[0]-g)*h+m);var I=q((e-E[1])*k+w);E=A?A(x[1][0],x[1][1],C):x[1];var L=q((E[0]-g)*h+m);E=q((e-E[1])*k+w);z.push("M",G+","+I,"L",L+","+E);for(L=2;L<D;L++)E=A?A(x[L][0],x[L][1],C):x[L],G=q((E[0]-g)*h+m),I=q((e-E[1])*k+w),z.push(G+","+I)}else G=q((E[0]-g)*h+m),I=q((e-E[1])*k+w),z.push("M",
G+","+I)}return z}:function(g,e,h,k,m,w,p,A,C,z){var q=[],v,B,D=Math.round;var x=0;for(v=p?p.length:0;x<v;x++){var E=p[x];q.push("M");var G=0;for(B=E?E.length:0;G<B;G++){var I=A?A(E[G][0],E[G][1],C):E[G];q.push(D((I[0]-g)*h+m)+","+D((e-I[1])*k+w))}z||q.push("Z")}return q}}(),c={toScreenPoint:function(g,e,h,k,m){var w=g.spatialReference,p=k.spatialReference,A=k.x;k=k.y;w&&p&&!w.equals(p)&&w._canProject(p)&&(w=w.isWebMercator()?n.lngLatToXY(A,k):n.xyToLngLat(A,k,!0),A=w[0],k=w[1]);A=(A-g.xmin)*(e/g.getWidth());
k=(g.ymax-k)*(h/g.getHeight());m||(A=Math.round(A),k=Math.round(k));return new t(A,k)},toScreenGeometry:function(g,e,h,k){var m=g.xmin,w=g.ymax,p=e/g.getWidth(),A=h/g.getHeight(),C=F.forEach,z=Math.round;if(k instanceof n)return new n(z((k.x-m)*p),z((w-k.y)*A));if(k instanceof d){g=new d;var q=g.points;C(k.points,function(E,G){q[G]=[z((E[0]-m)*p),z((w-E[1])*A)]});return g}if(k instanceof f)return new f(z((k.xmin-m)*p),z((w-k.ymin)*A),z((k.xmax-m)*p),z((w-k.ymax)*p));if(k instanceof r){g=new r;var v=
g.paths,B;C(k.paths,function(E,G){B=v[G]=[];C(E,function(I,L){B[L]=[z((I[0]-m)*p),z((w-I[1])*A)]})});return g}if(k instanceof l){g=new l;var D=g.rings,x;C(k.rings,function(E,G){x=D[G]=[];C(E,function(I,L){x[L]=[z((I[0]-m)*p),z((w-I[1])*A)]})});return g}},_toScreenPath:function(g,e,h,k,m,w){var p=k instanceof r,A=g.spatialReference,C=k.spatialReference;if(A&&C&&!A.equals(C)&&A._canProject(C))if(A.isWebMercator())var z=n.lngLatToXY;else{z=n.xyToLngLat;var q=!0}return b(g.xmin,g.ymax,e/g.getWidth(),
h/g.getHeight(),m,w,p?k.paths:k.rings,z,q,p)},toMapPoint:function(g,e,h,k){return new n(g.xmin+k.x/(e/g.getWidth()),g.ymax-k.y/(h/g.getHeight()),g.spatialReference)},toMapGeometry:function(g,e,h,k){var m=g.xmin,w=g.ymax,p=g.spatialReference,A=e/g.getWidth(),C=h/g.getHeight(),z=F.forEach;if(k instanceof n)return new n(m+k.x/A,w-k.y/C,p);if(k instanceof d){g=new d(p);var q=g.points;z(k.points,function(E,G){q[G]=[m+E[0]/A,w-E[1]/C]});return g}if(k instanceof f)return new f(m+k.xmin/A,w-k.ymin/C,m+k.xmax/
A,w-k.ymax/C,p);if(k instanceof r){g=new r(p);var v=g.paths,B;z(k.paths,function(E,G){B=v[G]=[];z(E,function(I,L){B[L]=[m+I[0]/A,w-I[1]/C]})});return g}if(k instanceof l){g=new l(p);var D=g.rings,x;z(k.rings,function(E,G){x=D[G]=[];z(E,function(I,L){x[L]=[m+I[0]/A,w-I[1]/C]})});return g}}};a("extend-esri")&&y.mixin(y.getObject("geometry",!0,u),c);return c})},"esri/layers/GraphicsLayer":function(){define("require dojo/_base/declare dojo/_base/Deferred dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/window dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom dojox/gfx dojox/gfx/matrix ./gfxSniff!esri-svg?dojox/gfx/filters ./layer ./support/webglUtils ./support/WebGLSurface ../kernel ../lang ../sniff ../Color ../domUtils ../symbols/MarkerSymbol ../symbols/SimpleMarkerSymbol ../symbols/utils ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/mathUtils ../geometry/screenUtils ../PluginTarget ./gfxSniff!esri-svg?dojox/gfx/svgext".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m,w,p,A,C,z,q,v,B,D,x,E,G,I,L){var Y=-1!==c.renderer.toLowerCase().indexOf("svg"),X=-1!==c.renderer.toLowerCase().indexOf("canvas"),fa=X?"canvas-2d":c.renderer,sa=9>A("ie");r=10===A("ie");var T=void 0===A("ie")&&7==A("trident"),ka=r||T,ma=A("esri-touch"),wa=!!A("chrome"),ja=k.isWebGLEnabled(),ua=Y&&A("esri-will-change"),Ba=ja||X;k=y(null,{declaredClass:"esri.layers._GraphicsContainer",_setMap:function(M,Z){var ia=this._connects=[];this._map=M;this._useWillChange=
this._useGlobalTransform="css-transforms"===M.navigationMode&&ua;if(Ba){var qa=d.create("div",{style:{position:"absolute",overflow:"visible"}},Z);this._surface={getEventSource:function(){return qa}};X&&(ia.push(u.connect(qa,"onmousedown",this,this._canvasDownHandler)),ia.push(u.connect(qa,"onmouseup",this,this._canvasUpHandler)),ia.push(u.connect(qa,"onclick",this,this._canvasClickHandler)));ja&&(this._webglSurface=new m({map:M,node:qa}))}else qa=(this._surface=c.createSurface(Z,M.width,M.height)).getEventSource(),
this._useWillChange&&f.set(qa,"will-change","transform"),f.set(qa=sa?qa.parentNode:qa,{overflow:"visible",position:"absolute"});ia.push(u.connect(M,"onResize",this,"_onResizeHandler"));this._useGlobalTransform&&(ia.push(u.connect(M,"onPan",this,"_onPanHandler")),ia.push(u.connect(M,"onPanEnd",this,"_onPanEndHandler")),ia.push(u.connect(M,"onExtentChange",this,"_onExtentChangeHandler")));return qa},_reorderLayer:function(M,Z,ia){Z=Z.getEventSource();Ba&&"svg"===M.surfaceType&&(Z=Z.parentNode);d.place(Z,
this._surface.getEventSource(),ia)},_onPanHandler:function(M,Z){var ia=this._map.__visibleRect;M=ia.x+Z.x;Z=ia.y+Z.y;this._panDx=M;this._panDy=Z;Ba||f.set(this._surface.getEventSource(),w._css.names.transform,w._css.translate(M,Z))},_onPanEndHandler:function(M,Z){Z=this._map.__visibleRect;M=Z.x;Z=Z.y;this._panDx=M;this._panDy=Z;Ba||f.set(this._surface.getEventSource(),w._css.names.transform,w._css.translate(M,Z))},_onExtentChangeHandler:function(M,Z,ia,qa){ia&&(this._panDy=this._panDx=0,Ba||f.set(this._surface.getEventSource(),
w._css.names.transform,w._css.translate(0,0)))},_getTransform:function(){return{dx:this._panDx||0,dy:this._panDy||0}},_onResizeHandler:function(M,Z,ia){M=this._surface.getEventSource();var qa=this._map,ya;sa&&f.set(M=M.parentNode,{width:Z+"px",height:ia+"px",clip:"rect(0px "+Z+"px "+ia+"px 0px)"});l.set(M,"width",Z);l.set(M,"height",ia);this._surface.declaredClass||t.forEach(M.childNodes,function(Ca){l.set(Ca,"width",Z);l.set(Ca,"height",ia)});qa.loaded&&(qa.graphics.suspended||(qa.graphics._resized=
!0),t.forEach(qa.graphicsLayerIds,function(Ca){ya=qa.getLayer(Ca);ya.suspended||(ya._resized=!0,ya._childLayer&&(ya._childLayer._resized=!0));ya._updateSVGFilters(null,null,Z,ia)}),qa.graphics._updateSVGFilters(null,null,Z,ia),qa._labels&&qa._labels._updateSVGFilters(null,null,Z,ia))},_cleanUp:function(){t.forEach(this._connects,u.disconnect,u);this._map=this._surface=null},_processEvent:function(M){var Z=this._map;M.screenPoint=new x(M.pageX-Z.position.x,M.pageY-Z.position.y);M.mapPoint=Z.toMap(M.screenPoint)},
_canvasDownHandler:function(M){this._processEvent(M);this._downPt=M.screenPoint.x+","+M.screenPoint.y},_canvasUpHandler:function(M){this._processEvent(M);this._upPt=M.screenPoint.x+","+M.screenPoint.y},_tolerance:15,_isPrimaryMatch:function(M,Z,ia,qa){if(!M.visible||!Z)return!1;var ya=Z.getTransformedBoundingBox();if(ya){var Ca=new E(ya[0].x,ya[0].y,ya[2].x,ya[2].y);delete Ca.spatialReference;return ma?Ca.intersects(ia):Ca.contains(qa)}return t.some(Z.children||[],function(Ia){ya=Ia.getTransformedBoundingBox();
Ca=new E(ya[0].x,ya[0].y,ya[2].x,ya[2].y);delete Ca.spatialReference;return ma?Ca.intersects(ia):Ca.contains(qa)})},_canvasClickHandler:function(M){if(this._downPt&&this._upPt&&this._downPt===this._upPt){this._processEvent(M);var Z=this._map,ia=t.map(Z.graphicsLayerIds,function(na){return Z.getLayer(na)});ia.push(Z.graphics);ia.reverse();ia=t.filter(ia,function(na){return na.loaded&&!na.hasWebGLSurface()&&na._mouseEvents&&!na.suspended&&(!p.isDefined(na.opacity)||0<na.opacity)});var qa=M.screenPoint,
ya=this._tolerance,Ca=qa.x-ya,Ia=qa.y+ya,Oa=qa.x+ya;ya=qa.y-ya;var la=new E(Ca,ya,Oa,Ia);Ca=Z.toMap(new x(Ca,Ia));Oa=Z.toMap(new x(Oa,ya));Ia=Ca.spatialReference._getInfo();var N=new E(E.prototype._normalizeX(Ca.x,Ia).x,Ca.y,E.prototype._normalizeX(Oa.x,Ia).x,Oa.y,Ca.spatialReference),aa;delete la.spatialReference;t.some(ia,function(na){na=t.filter(na.graphics,function(ea){return this._isPrimaryMatch(ea,ea.getDojoShape(),la,qa)||!(!ea._bgShape||!this._isPrimaryMatch(ea,ea._bgShape,la,qa))},this);
na.reverse();if(0<na.length){var ca;t.some(na,function(ea){return ea.geometry&&N.intersects(ea.geometry)?(ca=ea,!0):!1});if(ca)return aa=ca,!0}return!1},this);aa&&(ia=aa.getLayer())&&(M.graphic=aa,ia.onClick(M))}}});h=y(h,{declaredClass:"esri.layers._GraphicsLayer",managedSuspension:!0,surfaceType:fa,webglEnabled:ja,renderer:null,_eventMap:{"graphic-add":["graphic"],"graphic-remove":["graphic"],"renderer-change":["renderer"]},_suspendGraphics:!1,constructor:function(M,Z){M=M||{};if(n.isString(M)||
n.isObject(M)&&(M.layerDefinition||M.query))M=Z;this._params=n.mixin({displayOnPan:!0,drawMode:!0,styling:!0},M);Z=this._params.dataAttributes;"string"===typeof Z&&(Z=[Z]);this.styling=Y?this._params.styling:!0;this.dataAttributes=Z;this.infoTemplate=M&&M.infoTemplate;this.graphics=[];this._draw=n.hitch(this,this._draw);this._refresh=n.hitch(this,this._refresh);this._acquireSVGMarker=n.hitch(this,this._acquireSVGMarker);this._evalSurfaceType=n.hitch(this,this._evalSurfaceType);this._setSurfaceType=
n.hitch(this,this._setSurfaceType);this.setWebGLEnabled(null!=this._params.webglEnabled?this._params.webglEnabled:this.webglEnabled);this.registerConnectEvents()},getNode:function(){return this._div&&this._div.getEventSource()},setDrawMode:function(M){this._params.drawMode=M},suspendGraphics:function(M){this._suspendGraphics=M;t.forEach(this.graphics,function(Z){Z._suspended=M})},setWebGLEnabled:function(M){var Z=this.webglEnabled;this.webglEnabled=(M||!1)&&ja;Z!==this.webglEnabled&&(this._evalSurfaceType(),
this.onWebGLEnabledChange())},hasWebGLSurface:function(){return"webgl"===this.surfaceType},_getSurfaceType:function(M){return M&&"webgl"===M.surfaceType?"webgl":fa},_evalSurfaceType:function(M){ja&&(M?this._setSurfaceType():null==this._evalSurfaceTimerHandle&&(this._evalSurfaceTimerHandle=setTimeout(this._setSurfaceType,0)))},_hasPendingSurfaceEval:function(){return!!this._evalSurfaceTimerHandle},_setSurfaceType:function(){clearTimeout(this._evalSurfaceTimerHandle);this._evalSurfaceTimerHandle=null;
var M=this._canUseWebGLSurface()?"webgl":fa;this.surfaceType!==M?(this.surfaceType=M,this._handleSurfaceChange(),this.onSurfaceChange()):this._pendingRedraw&&this._redraw()},_handleSurfaceChange:function(){this._cancelWebGLDepsLoad();this._webglDepsPromise=this._prepareToAttach(this._map);this._webglDepsPromise.always(n.hitch(this,function(M){this._webglDepsPromise=null;M&&"cancel"===M.dojoType||this._evalSurface()}))},_cancelWebGLDepsLoad:function(){this._webglDepsPromise&&!this._webglDepsPromise.isFulfilled()&&
this._webglDepsPromise.cancel();this._webglDepsPromise=null},_evalSurface:function(){var M=this._map,Z=this._div;M&&Z&&this._getSurfaceType(Z)!==this.surfaceType&&(M._detachGraphicsLayer(this),M._attachGraphicsLayer(this))},_canUseWebGLSurface:function(M){M=M||this._map;return this.webglEnabled&&(!M||M.webglEnabled&&(M.ownsWebGLContext(this)||M.isWebGLContextAvailable()))&&this._params.drawMode&&this._isWebGLCompatible()},_isWebGLCompatible:function(){return!1},_prepareToAttach:function(M){var Z=
new a;!this.webglDeps&&this._canUseWebGLSurface(M)?F(["./support/webglDeps"],n.hitch(this,function(ia){this.webglDeps=ia;Z.isFulfilled()||Z.resolve()})):Z.resolve();return Z.promise},_setMap:function(M,Z){this.inherited(arguments);this._map=M;this._evalSurfaceType(!0);this._webglChangeMapHandle=M.on("webgl-enabled-change",n.hitch(this,function(){this._evalSurfaceType()}));this._wrap=M.wrapAround180;this._srInfo=M.spatialReference._getInfo();this._svgFilters={};this._lineMarkers={};if(this.hasWebGLSurface())M.acquireWebGLContext(this),
this._div=M._gc._webglSurface.createRenderer(this.webglDeps.WebGLRenderer,M.width,M.height,this);else{if("svg"===this.surfaceType)if(Ba){Z=c.createSurface(Z.getEventSource(),M.width,M.height);var ia=Z.getEventSource();f.set(ia,{position:"absolute",overflow:"visible",pointerEvents:"none"});M._gc._useWillChange&&f.set(ia,"will-change","transform");this._div=Z.createGroup();f.set(this._div.getEventSource(),"pointer-events","auto")}else this._div=Z.createGroup();else Z=c.createSurface(Z.getEventSource(),
M.width,M.height),f.set(Z.rawNode,"position","absolute"),this._div=Z.createGroup(),this._renderProto=this._div.constructor.prototype._render,this._div._render=n.hitch(this,this._canvasRender);this._bgGroup=this._div.createGroup()}this._div.getEventSource().id=this.id+"_layer";this._initOpacity();return this._div},_unsetMap:function(M,Z){M.releaseWebGLContext(this);"webgl"===this._div.surfaceType?M._gc._webglSurface.destroyRenderer(this._div):(t.forEach(this.graphics,function(ia){ia._shape=null}),
"svg"===this.surfaceType?Ba?(Z=this._div.parent,this._div.clear(),Z.remove(this._div),d.destroy(this._div.getEventSource()),d.destroy(Z.getEventSource())):(this._div.clear(),Z.remove(this._div),d.destroy(this._div.getEventSource())):(Z=this._div.getParent(),Z._parent={},d.destroy(Z.rawNode),Z.destroy()));this._map=this._div=this._svgFilters=this._lineMarkers=null;this._pendingRedraw=!1;clearTimeout(this._wakeTimer);this._wakeTimer=null;clearTimeout(this._evalSurfaceTimerHandle);this._evalSurfaceTimerHandle=
null;this._webglChangeMapHandle&&this._webglChangeMapHandle.remove();this._cancelWebGLDepsLoad();this._disableDrawConnectors();this.inherited(arguments)},_initOpacity:function(){var M=this.opacity;p.isDefined(M)&&1>M&&this.setOpacity(M,!0)},_onZoomStartHandler:function(){this.hasWebGLSurface()||z.hide(this._div.getEventSource())},_onExtentChangeHandler:function(M,Z,ia,qa){clearTimeout(this._wakeTimer);this._wakeTimer=null;ia?(M=this._map.__visibleRect,Z=this._div,this._evalSDRenderer(),this._refresh(!0),
this._params._child||this._updateTransform(Z,M.x,M.y,!0),this._renderProto&&Z.surface.pendingRender?this._dirty=!0:this.suspended||z.show(Z.getEventSource())):this._resized&&(this._resized=!1,this._refresh(!1));if(0<this.graphics.length)this.onUpdate()},_canvasRender:function(){var M=this._div;this._dirty&&(delete this._dirty,this.suspended||z.show(M.getEventSource()));return this._renderProto.apply(M,arguments)},_refresh:function(M){if(!this.hasWebGLSurface()){var Z=this.graphics,ia=Z.length,qa,
ya=this._draw;for(qa=0;qa<ia;qa++)ya(Z[qa],M)}},refresh:function(){this._refresh(!0)},_redraw:function(){this._pendingRedraw=!1;this.hasWebGLSurface()?this._div&&this._div.redraw():this._refresh(!0)},redraw:function(){this._hasPendingSurfaceEval()?this._pendingRedraw=!0:this._redraw()},hasLocalNavigationTransform:function(){return!(this._map&&this._map._gc._useGlobalTransform)},getNavigationTransform:function(){var M={dx:0,dy:0};this._map&&(this.hasLocalNavigationTransform()?this._div&&!this.hasWebGLSurface()&&
(M=this._div.getTransform()):M=this._map._gc._getTransform());return M},_onPanHandler:function(M,Z){this._panDx=Z.x;this._panDy=Z.y;M=this._map.__visibleRect;this._updateTransform(this._div,M.x+Z.x,M.y+Z.y);T&&this._updateSVGMarkers()},_onPanEndUpdateHandler:function(M,Z){M=this._map.__visibleRect;this._params._child||Z.x===this._panDx&&Z.y===this._panDy?(this._updateSVGFilters(-M.x,-M.y),this._updateSVGMarkers()):this._updateTransform(this._div,M.x,M.y,!0);this._refresh(!1);if(this.graphics.length)this.onUpdate()},
_onPanStartHandler:function(){z.hide(this._div.getEventSource())},_onPanEndHandler:function(){var M=this._map.__visibleRect,Z=this._div;this._updateTransform(Z,M.x,M.y,!0);this._refresh(!1);this._renderProto&&Z.surface.pendingRender?this._dirty=!0:z.show(Z.getEventSource());if(this.graphics.length)this.onUpdate()},_updateTransform:function(M,Z,ia,qa){this.hasWebGLSurface()||(this.hasLocalNavigationTransform()?M.setTransform(g.translate({x:Z,y:ia})):Ba&&f.set(this._div.parent.getEventSource(),w._css.names.transform,
w._css.translate(Z,ia)),qa&&(this._updateSVGFilters(-Z,-ia),this._updateSVGMarkers()))},onSuspend:function(){this.inherited(arguments);z.hide(this._div.getEventSource());clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(M){this.inherited(arguments);M.firstOccurrence&&this._evalSDRenderer();this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(n.hitch(this,function(){this.suspended||this._map.__zooming||this._onExtentChangeHandler(null,
null,!0)}),0)},_enableDrawConnectors:function(){var M=this._map,Z=u.connect;this._disableDrawConnectors();this._params.displayOnPan?(this._params._child||(this._onPanHandler_connect=Z(M,"onPan",this,"_onPanHandler")),this._onPanEndHandler_connect=Z(M,"onPanEnd",this,"_onPanEndUpdateHandler")):(this._onPanStartHandler_connect=Z(M,"onPanStart",this,"_onPanStartHandler"),this._onPanEndHandler_connect=Z(M,"onPanEnd",this,"_onPanEndHandler"));this._onZoomStartHandler_connect=Z(M,"onZoomStart",this,"_onZoomStartHandler");
this._onExtentChangeHandler_connect=Z(M,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var M=u.disconnect;M(this._onExtentChangeHandler_connect);M(this._onZoomStartHandler_connect);M(this._onPanHandler_connect);M(this._onPanStartHandler_connect);M(this._onPanEndHandler_connect);this._onExtentChangeHandler_connect=this._onZoomStartHandler_connect=this._onPanHandler_connect=this._onPanStartHandler_connect=this._onPanEndHandler_connect=null},_updateExtent:function(M){var Z=
M.geometry;if(!Z)M._extent=null;else if(!(M._extent=Z.getExtent())){if("esri.geometry.Point"===Z.declaredClass){var ia=Z.x;var qa=Z.y}else if("esri.geometry.Multipoint"===Z.declaredClass)ia=Z.points[0][0],qa=Z.points[0][1];else{M._extent=null;return}M._extent=new E(ia,qa,ia,qa,Z.spatialReference)}},_intersects:function(M,Z,ia){var qa=M.spatialReference,ya=Z.spatialReference,Ca=qa&&ya&&!qa.equals(ya)&&qa._canProject(ya)&&4326===ya.wkid;if(this._wrap&&!ia){ia=[];qa=M._getFrameWidth();var Ia=this._srInfo,
Oa=M._clip?M._getAvailExtent():M.extent,la,N=[];var aa=Z._partwise;Ca&&(Oa=M.geographicExtent,Ia=ya._getInfo());M=Oa._getParts(Ia);if(aa&&aa.length)for(Z=[],ya=0,Ca=aa.length;ya<Ca;ya++)Z=Z.concat(aa[ya]._getParts(Ia));else Z=Z._getParts(Ia);ya=0;for(Ca=Z.length;ya<Ca;ya++){var na=Z[ya];Ia=0;for(Oa=M.length;Ia<Oa;Ia++){var ca=M[Ia];if(ca.extent.intersects(na.extent))for(aa=0,la=na.frameIds.length;aa<la;aa++)ia.push((ca.frameIds[0]-na.frameIds[aa])*qa)}}ya=0;for(Ca=ia.length;ya<Ca;ya++)aa=ia[ya],t.indexOf(ia,
aa)===ya&&N.push(aa);return N.length?N:null}return(Ca?M.geographicExtent:M.extent).intersects(Z)?[0]:null},_defaultMarker:{type:"simplemarkersymbol",style:"square",size:1,xoffset:0,yoffset:0,angle:0},_draw:function(M,Z){if(!this.hasWebGLSurface()&&this._params.drawMode&&this._map&&!this.suspended&&!this._map.__zooming&&!this._resized)try{var ia=M._extent,qa,ya,Ca=!Y||this.styling,Ia=Y&&this.dataAttributes,Oa=M.getDojoShape(),la;if(!M._suspended&&M.visible&&ia&&(qa=this._intersects(this._map,ia,M.geometry._originOnly))&&
(ya=Ca?this._getSymbol(M):this._defaultMarker)){if(M._offsets&&M._offsets.join(",")===qa.join(",")?la=!0:M._offsets=qa,!Oa||Z||!la){var N=M.geometry.type;Z={graphic:M};var aa=M._bgShape,na=Ca&&!M.symbol?this._getRenderer(M):null,ca=na&&na.backgroundFillSymbol;if("point"===N)this._isInvalidShape(ya,Oa)&&this._removeShape(M),M._shape=this._drawPoint(this._div,M.geometry,ya,M.getDojoShape(),qa,na,M),Ca&&this._symbolizePoint(M.getDojoShape(),ya,na,M);else if("multipoint"===N)this._drawMarkers(M,ya,qa,
na),Ca&&this._symbolizeMarkers(M,ya,na);else{var ea;N=ya;var oa;Ca&&(N=(ea="simplemarkersymbol"===ya.type||"picturemarkersymbol"===ya.type||"textsymbol"===ya.type?ya:null)?ca:ya);if(Ca&&N&&-1<N.type.indexOf("fillsymbol")){var ta=this._bgGroup;var O=!(!ta||!ea)}aa&&!O&&this._removeBgShape(M);if(N){!O&&(this._isInvalidShape(N,M._shape)||M._shape&&M._shape._isCentroidMarker)&&this._removeShape(M,!1);if(oa=this._drawShape(M,qa,ta||this._div,O?aa:M.getDojoShape()))oa._isCentroidMarker=!1;Ca&&this._symbolizeShape(oa,
N,na,N===ca,M);M[O?"_bgShape":"_shape"]=oa}if(ea){(this._isInvalidShape(ea,M._shape)||M._shape&&!M._shape._isCentroidMarker)&&this._removeShape(M,!1);var V=M.geometry.getCentroid();if(oa=V&&this._drawPoint(this._div,V,ea,M._shape,qa,na,M))oa._isCentroidMarker=!0,this._symbolizePoint(oa,ea,na,M);M._shape=oa}}X||(M._bgShape&&this._initNode(M,M._bgShape,M._bgShape!==aa,Z,Ia),M._shape&&this._initNode(M,M._shape,M._shape!==Oa,Z,Ia));M._applyDataAttrs();Z.node=M.getNode();this.onGraphicDraw(Z)}}else Oa&&
this._removeShape(M)}catch(pa){this._errorHandler(pa,M)}},_initNode:function(M,Z,ia,qa,ya){if(Z=Z&&Z.getNode())Z.e_graphic=M,this._addDataAttrs(M,ya,Z),ia&&(qa.node=Z,this.onGraphicNodeAdd(qa))},_removeShape:function(M,Z,ia){var qa=M.getDojoShape(),ya=qa&&qa.getNode();qa&&!ia&&(qa.removeShape(),qa.destroy());M._shape=M._offsets=null;!1!==Z&&this._removeBgShape(M,ia);if(ya&&(ya.e_graphic=null,!X))this.onGraphicNodeRemove({graphic:M,node:ya})},_removeBgShape:function(M,Z){var ia=M._bgShape,qa=ia&&ia.getNode();
ia&&!Z&&(ia.removeShape(),ia.destroy());M._bgShape=null;if(qa&&(qa.e_graphic=null,!X))this.onGraphicNodeRemove({graphic:M,node:qa})},_addDataAttrs:function(M,Z,ia){var qa=M.attributes,ya,Ca=Z?Z.length:0,Ia=this._getRenderer(M);if(ia&&qa){for(ya=0;ya<Ca;ya++)(ia=Z[ya])&&M.attr("data-"+ia,qa[ia]);!this.styling&&Ia&&(Ia.getBreakIndex?(Z=Ia.getBreakIndex(M),M.attr("data-class-break",-1!==Z?Z:null)):Ia.getUniqueValueInfo&&(Z=Ia.getUniqueValueInfo(M),M.attr("data-unique-value",Z?Z.value:null)))}},_drawShape:function(M,
Z,ia,qa){M=M.geometry;var ya=M.type,Ca=this._map,Ia=Ca.extent,Oa=Ca.width,la=Ca.height;Ca=Ca.__visibleRect;var N=[],aa;var na="extent"===ya;if("rect"===ya||na)N={x:0,y:0,spatialReference:M.spatialReference},N.x=na?M.xmin:M.x,N.y=na?M.ymax:M.y,ya=I.toScreenPoint(Ia,Oa,la,N),N.x=na?M.xmax:M.x+M.width,N.y=na?M.ymin:M.y+M.height,M=I.toScreenPoint(Ia,Oa,la,N),Z={x:ya.x-Ca.x+Z[0],y:ya.y-Ca.y,width:Math.abs(M.x-ya.x),height:Math.abs(M.y-ya.y)},0===Z.width&&(Z.width=1),0===Z.height&&(Z.height=1),qa=this._drawRect(ia,
qa,Z);else if("polyline"===ya||"polygon"===ya){na=0;for(aa=Z.length;na<aa;na++)N=N.concat(I._toScreenPath(Ia,Oa,la,M,-Ca.x+Z[na],-Ca.y));qa=this._drawPath(ia,qa,N);this._rendererLimits&&("polyline"===ya?this._clipPolyline(qa,M):this._clipPolygon(qa,M))}return qa},_drawRect:function(M,Z,ia){return Z?Z.setShape(ia):M.createRect(ia)},_drawImage:function(M,Z,ia){return Z?Z.setShape(ia):M.createImage(ia)},_drawCircle:function(M,Z,ia){return Z?Z.setShape(ia):M.createCircle(ia)},_drawPath:function(){return sa?
function(M,Z,ia,qa){ia=qa?ia:ia.join(" ");if(Z)return Z.setShape(ia);Z=M.createObject(qa?c.Path:c.EsriPath,ia);M._overrideSize(Z.getEventSource());return Z}:function(M,Z,ia,qa){ia=qa?ia:ia.join(" ");return Z?Z.setShape(ia):M.createPath(ia)}}(),_drawText:function(M,Z,ia){return Z?Z.setShape(ia):M.createText(ia)},_evalSDRenderer:function(M){var Z=this._map,ia=this.renderer,qa,ya=this._rndForScale;Z&&Z.loaded&&ia&&ia.getRendererInfo&&(qa="zoom"===ia.rangeType?ia.getRendererInfoByZoom(Z.getZoom()):ia.getRendererInfoByScale(Z.getScale()));
this._rndForScale=qa&&qa.renderer;M||this._rndForScale==ya||this.emit("renderer-change",{renderer:this._rndForScale})},_getRenderer:function(M){var Z=this._rndForScale||this.renderer;M&&Z&&Z.getObservationRenderer&&(Z=Z.getObservationRenderer(M));return Z},_getSymbol:function(M){var Z=this._getRenderer();return M.symbol||Z&&Z.getSymbol(M)},_getVariable:function(M,Z,ia){if(M)var qa=(M=M.getVisualVariablesForType(Z,ia))&&M[0];return qa},_applyOpacity:function(M,Z,ia,qa){Z=Z.getOpacity(qa,{opacityInfo:ia});
null!=Z&&(M=new C(M),M.a=Z);return M},_symbolizeShape:function(M,Z,ia,qa,ya){var Ca=Z.getStroke(),Ia=Z.getFill(),Oa=Z.type,la=-1!==Oa.indexOf("linesymbol"),N=-1!==Oa.indexOf("fillsymbol")?null:this._getVariable(ia,"sizeInfo",!1),aa=this._getVariable(ia,"colorInfo",!1),na=this._getVariable(ia,"opacityInfo",!1),ca=la?"none"!==Z.style:Z.outline&&"none"!==Z.outline.style,ea=la?null:this._getVariable(ia,"sizeInfo","outline");N=(N=qa?ea:ea||N)?ia.getSize(ya,{sizeInfo:N,resolution:this._map.getResolutionInMeters(),
scale:this._map.getScale()}):null;qa&&(aa=na=null);if((aa||na)&&"picturefillsymbol"!==Oa)if(la){var oa=Ca&&Ca.color;aa&&(oa=ia.getColor(ya,{colorInfo:aa})||oa);oa&&na&&(oa=this._applyOpacity(oa,ia,na,ya))}else if(Ia&&Ia.toCss){var ta=Ia;aa&&(ta=ia.getColor(ya,{colorInfo:aa})||ta);ta&&na&&(ta=this._applyOpacity(ta,ia,na,ya))}M.setStroke(!ca||null==N&&!oa?Ca:n.mixin({},Ca,null!=N?{width:N}:null,oa&&{color:oa})).setFill(ta||Ia);la&&B.applyLineMarker(M,Z,oa,this._acquireSVGMarker)},_smsToPath:function(){return sa?
function(M,Z,ia,qa,ya,Ca,Ia,Oa,la){switch(Z){case M.STYLE_SQUARE:return["M",ya+","+Ia,"L",Ca+","+Ia,Ca+","+Oa,ya+","+Oa,"X","E"];case M.STYLE_CROSS:return["M",ia+","+Ia,"L",ia+","+Oa,"M",ya+","+qa,"L",Ca+","+qa,"E"];case M.STYLE_X:return["M",ya+","+Ia,"L",Ca+","+Oa,"M",ya+","+Oa,"L",Ca+","+Ia,"E"];case M.STYLE_DIAMOND:return["M",ia+","+Ia,"L",Ca+","+qa,ia+","+Oa,ya+","+qa,"X","E"];case M.STYLE_TARGET:return["M",ya+","+Ia,"L",Ca+","+Ia,Ca+","+Oa,ya+","+Oa,ya+","+Ia,"M",ya-la+","+qa,"L",ya+","+qa,"M",
ia+","+(Ia-la),"L",ia+","+Ia,"M",Ca+la+","+qa,"L",Ca+","+qa,"M",ia+","+(Oa+la),"L",ia+","+Oa,"E"]}}:function(M,Z,ia,qa,ya,Ca,Ia,Oa,la){switch(Z){case M.STYLE_SQUARE:return["M",ya+","+Ia,Ca+","+Ia,Ca+","+Oa,ya+","+Oa,"Z"];case M.STYLE_TRIANGLE:return["M",ia+","+Ia,Ca+","+Oa,ya+","+Oa,"Z"];case M.STYLE_CROSS:return["M",ia+","+Ia,ia+","+Oa,"M",ya+","+qa,Ca+","+qa];case M.STYLE_X:return["M",ya+","+Ia,Ca+","+Oa,"M",ya+","+Oa,Ca+","+Ia];case M.STYLE_DIAMOND:return["M",ia+","+Ia,Ca+","+qa,ia+","+Oa,ya+","+
qa,"Z"];case M.STYLE_TARGET:return M=["M",ya+","+Ia,Ca+","+Ia,Ca+","+Oa,ya+","+Oa,ya+","+Ia],la&&M.push("M",ya-la+","+qa,ya+","+qa,"M",ia+","+(Ia-la),ia+","+Ia,"M",Ca+la+","+qa,Ca+","+qa,"M",ia+","+(Oa+la),ia+","+Oa),M}}}(),_pathStyles:{square:1,cross:1,x:1,diamond:1,target:1},_typeMaps:{picturemarkersymbol:"image",picturefillsymbol:"path",simplefillsymbol:"path",simplelinesymbol:"path",cartographiclinesymbol:"path",textsymbol:"text"},_isInvalidShape:function(M,Z){Z=Z&&Z.shape&&Z.shape.type;var ia=
M&&M.type;M=M&&M.style;"rect"===Z&&(Z="path");ia&&(M=this._typeMaps[ia]||M);this._pathStyles[M]&&(M="path");return"shieldlabelsymbol"===ia?!0:!(!Z||!M||Z===M)},_reArialFont:/\s*(^|,)\s*arial\s*(,|$)\s*/i,_fallbackFont:"Arial",_drawPoint:function(M,Z,ia,qa,ya,Ca,Ia){var Oa=ia.type,la=this._map,N=la.__visibleRect,aa=I.toScreenPoint(la.extent,la.width,la.height,Z).offset(-N.x+ya[0],-N.y);N=aa.x;var na=aa.y;Z=[];var ca=this._getVariable(Ca,"rotationInfo",!1);ca=ca?Ca.getRotationAngle(Ia,{rotationInfo:ca}):
null;var ea=this._getVariable(Ca,"sizeInfo",!1);la=null!=Ia.size?Ia.size:ea&&Ca.getSize(Ia,{sizeInfo:ea,shape:ia.style,resolution:la.getResolutionInMeters(),scale:la.getScale()});ca&&Z.push(g.rotategAt(ca,aa));if(0!==ia.xoffset||0!==ia.yoffset){var oa=g.translate(ia.xoffset,-ia.yoffset);Z.push(oa)}0!==ia.angle&&Z.push(g.rotategAt(ia.angle,aa));if("simplemarkersymbol"===Oa){var ta=ia.style;Ca=Math.round;null!=la?oa&&(null!=oa.dx&&(oa.dx=oa.dx/ia.size*la),null!=oa.dy&&(oa.dy=oa.dy/ia.size*la)):la=ia.size;
switch(ta){case v.STYLE_SQUARE:case v.STYLE_TRIANGLE:case v.STYLE_CROSS:case v.STYLE_X:case v.STYLE_DIAMOND:ia=isNaN(la)?16:la/2;ta=this._drawPath(M,qa,this._smsToPath(v,ta,N,na,Ca(N-ia),Ca(N+ia),Ca(na-ia),Ca(na+ia)));break;case v.STYLE_TARGET:Ia=ia._targetWidth/2;oa=ia._targetHeight/2;ta=this._drawPath(M,qa,this._smsToPath(v,ta,N,na,Ca(N-Ia),Ca(N+Ia),Ca(na-oa),Ca(na+oa),ia._spikeSize));break;case v.STYLE_PATH:ta=this._drawPath(M,qa,ia.path,!0);ia=ta.getBoundingBox();M=this._getScaleMatrix(ia,la);
1===M.xx&&1===M.yy||Z.push(g.scaleAt(M.xx,M.yy,aa));Z.push(g.translate(-(ia.x+ia.width/2)+N,-(ia.y+ia.height/2)+na));break;default:ia=isNaN(la)?16:la/2,ta=this._drawCircle(M,qa,{cx:N,cy:na,r:ia})}}else if("shieldlabelsymbol"===Oa)ta=ia.width,aa=ia.height,qa=M.createGroup(),ta=M.createImage({x:N-ta/2,y:na-aa/2,width:ta,height:aa,src:ia.url}),qa.add(ta),null!=ia.font&&(na+=.2*ia.getHeight(),M=M.createText({type:"text",text:ia.text,x:N,y:na,align:"middle",decoration:ia.decoration,rotated:ia.rotated,
kerning:ia.kerning}),M.setFont(ia.font),M.setFill(ia.color),qa.add(M)),ta=qa;else if("picturemarkersymbol"===Oa){if(null==la?(ta=ia.width,aa=ia.height):(aa=la,ta=ia.width/ia.height*aa,oa&&(null!=oa.dx&&(oa.dx=oa.dx/ia.width*ta),null!=oa.dy&&(oa.dy=oa.dy/ia.height*aa))),ta=this._drawImage(M,qa,{x:N-ta/2,y:na-aa/2,width:ta,height:aa,src:ia.url}),Y&&(M=ta.getNode()))ia=(ia=this._getVariable(Ca,"opacityInfo",!1))?Ca.getOpacity(Ia,{opacityInfo:ia}):null,null!=ia?M.setAttribute("opacity",ia):M.setAttribute("opacity",
1)}else if("textsymbol"===Oa){if(Ca=ia.font){ta=null!=la;Ia=Ca.family&&!this._reArialFont.test(Ca.family);if(ta||Ia||X)Ca=new Ca.constructor(Ca.toJson());ta&&Ca.setSize(la);X&&(Ca.size+="px");Ia&&Ca.setFamily(Ca.family+","+this._fallbackFont)}ta=this._drawText(M,qa,{type:"text",text:ia.text,x:N,y:na,align:ia.getSVGAlign(),decoration:ia.decoration||Ca&&Ca.decoration,rotated:ia.rotated,kerning:ia.kerning});Ca&&ta.setFont(Ca);Y&&(M=ta.getNode(),N=ia.getSVGBaseline(),na=ia.getSVGBaselineShift(),M&&(M.setAttribute("dominant-baseline",
N),na&&M.setAttribute("baseline-shift",na),this._applyHalo(ta,ia.haloColor,ia.haloSize)))}ta.setTransform(g.multiply(Z));ta._wrapOffsets=ya;return ta},_acquireSVGMarker:function(M,Z,ia,qa){M=this._getSVGMarkerId(Z,qa);var ya=this._getSVGMarker(M);ya||(ya=B.createSVGMarker(Z,M,ia,qa),this._div.getParent().defNode.appendChild(ya),this._lineMarkers[M]=ya);return ya},_getSVGMarkerId:function(M,Z){return"marker_"+this._map.id+"_"+M.r+"_"+M.g+"_"+M.b+"_"+Z},_getSVGMarker:function(M){return this._lineMarkers[M]},
_updateSVGMarkers:function(){if(Y&&ka){var M=this._lineMarkers,Z;for(Z in M){var ia=M[Z];ia.setAttribute("id",Z+"_temp");ia.setAttribute("id",Z)}}},_applyHalo:function(M,Z,ia){var qa=Z&&ia?this._getHaloId(Z,ia):null;M.setFilter(Z&&ia?A("webkit")||A("ff")?this._getDilateFilter(Z,ia,qa):this._getOffsetFilter(Z,ia,qa):null)},_getDilateFilter:function(M,Z,ia){var qa=this._getSVGFilter(ia);qa||(qa=this._createSVGFilter({id:ia},[e.feMorphology({operator:"dilate",radius:Z,result:"dilated"}),e.feFlood({"flood-color":M.toCss(!0)}),
e.feComposite({in2:"dilated",operator:"in",result:"composite"}),e.feMerge("composite","SourceGraphic")]));return qa},_getOffsetFilter:function(M,Z,ia){var qa=this._getSVGFilter(ia);if(!qa){M=M.toCss(!0);qa=this._offsetPrimitives;var ya,Ca=qa.length,Ia=[],Oa=[];for(ya=0;ya<Ca;ya++){var la=qa[ya],N="offset"+la.dir,aa="composite"+la.dir;Oa.push(aa);Ia.push(e.feOffset({dx:la.dx*Z,dy:la.dy*Z,"in":"SourceAlpha",result:N}),e.feFlood({"flood-color":M}),e.feComposite({in2:N,operator:"in",result:aa}))}Oa.push("SourceGraphic");
Ia.push(e.feMerge.apply(e.feMerge,Oa));qa=this._createSVGFilter({id:ia},Ia)}return qa},_offsetPrimitives:[{dir:"L",dx:-1,dy:0},{dir:"TL",dx:-1,dy:-1},{dir:"T",dx:0,dy:-1},{dir:"TR",dx:1,dy:-1},{dir:"R",dx:1,dy:0},{dir:"BR",dx:1,dy:1},{dir:"B",dx:0,dy:1},{dir:"BL",dx:-1,dy:1}],_getHaloId:function(M,Z){return"halo_"+this._map.id+"_"+this.id+"_"+M.r+"_"+M.g+"_"+M.b+"_"+M.a+"_"+Z},_getSVGFilter:function(M){return this._svgFilters[M]},_createSVGFilter:function(M,Z){Z=e.createFilter(M,Z);var ia=this._map,
qa=ia.__visibleRect;Z.x=-qa.x;Z.y=-qa.y;Z.width=ia.width;Z.height=ia.height;return this._svgFilters[M.id]=Z},_updateSVGFilters:function(M,Z,ia,qa){var ya=this._svgFilters,Ca,Ia,Oa;for(Ia in ya)if(Ca=ya[Ia]){if(Oa=b.byId(Ia))null!=M&&Oa.setAttribute("x",M),null!=Z&&Oa.setAttribute("y",Z),null!=ia&&Oa.setAttribute("width",ia),null!=qa&&Oa.setAttribute("height",qa);null!=M&&(Ca.x=M);null!=Z&&(Ca.y=Z);null!=ia&&(Ca.width=ia);null!=qa&&(Ca.height=qa)}},_getScaleMatrix:function(M,Z){var ia=M.width/M.height,
qa=1,ya=1;isNaN(Z)||(1<ia?(qa=Z/M.width,ya=Z/ia/M.height):(ya=Z/M.height,qa=Z*ia/M.width));return{xx:qa,yy:ya}},_symbolizePoint:function(M,Z,ia,qa){var ya=Z.type,Ca=Z.style;if("shieldlabelsymbol"!==ya&&"picturemarkersymbol"!==ya){var Ia=Z.getStroke();Z=Z.getFill();Ca=Ca===v.STYLE_X||Ca===v.STYLE_CROSS;var Oa=Ia&&Ia.color,la=Ca?Oa:Z;if(ia){var N=this._getVariable(ia,"colorInfo",!1),aa=this._getVariable(ia,"opacityInfo",!1);N&&(la=ia.getColor(qa,{colorInfo:N})||la);la&&aa&&(la=this._applyOpacity(la,
ia,aa,qa));la&&(Ca?la!==Oa&&(Ia=Ia?n.mixin({},Ia):{},Ia.color=la):la!==Z&&(Z=la))}"textsymbol"===ya?M.setFill(Z):"simplemarkersymbol"===ya&&M.setFill(Z).setStroke(Ia)}},_drawMarkers:function(M,Z,ia,qa){var ya=M.geometry,Ca=ya.points,Ia=M.getDojoShape()||this._div.createGroup(),Oa,la=Ca.length,N=[],aa=0,na,ca=ia?ia.length:0;Ia.children[0]&&this._isInvalidShape(Z,Ia.children[0])&&Ia.clear();for(Oa=0;Oa<la;Oa++){var ea=Ca[Oa];for(na=0;na<ca;na++)N[0]=ia[na],this._drawPoint(Ia,{x:ea[0],y:ea[1],spatialReference:ya.spatialReference},
Z,Ia.children[aa++],N,qa,M)}Z=Ia.children.length;if(la*ia.length<Z)for(Oa=Z-1;Oa>=la*ia.length;Oa--)Ia.children[Oa].removeShape();M._shape=Ia},_symbolizeMarkers:function(M,Z,ia){var qa=M.getDojoShape().children,ya,Ca=qa.length;for(ya=0;ya<Ca;ya++)this._symbolizePoint(qa[ya],Z,ia,M)},_errorHandler:function(M,Z){Z&&(M.message="Unable to draw graphic (geometry:"+(Z.geometry?Z.geometry.declaredClass:null)+", symbol:"+(Z.symbol?Z.symbol.declaredClass:null)+"): "+M.message);this.inherited(arguments)},_rendererLimits:function(){if(sa){var M=
1E5;var Z=-1E5;var ia=1E5}else A("chrome")&&6>A("chrome")&&(M=8150,Z=-1E4,ia=1E4);if(M)return{clipLimit:M,rangeMin:Z,rangeMax:ia,clipBBox:[-M,-M,M,M],clipSegments:[[[-M,-M],[M,-M]],[[M,-M],[M,M]],[[M,M],[-M,M]],[[-M,M],[-M,-M]]]}}(),_clipPolyline:function(M,Z){Z=this._getCorners(M,Z);var ia=Z.br,qa=this._rendererLimits,ya=qa.rangeMin,Ca=qa.rangeMax,Ia=qa.clipBBox,Oa=qa.clipSegments;qa=this._isPointWithinRange;var la=this._isPointWithinBBox,N=this._getClipperIntersection,aa=this._getPlaneIndex;if(!qa(Z.tl,
ya,Ca)||!qa(ia,ya,Ca)){sa&&this._createSegments(M);var na=[];t.forEach(M.segments,function(ca){ca=ca.args;var ea=ca.length,oa=[],ta;for(ta=0;ta<ea;ta+=2){var O=[ca[ta],ca[ta+1]],V=[ca[ta+2],ca[ta+3]],pa=la(O,Ia),za=la(V,Ia);if(pa^za){if(za=N([O,V],Oa))pa?(ta?oa.push(za[1]):oa.push(O,za[1]),na.push(oa),oa=[]):oa.push(za[1],V)}else pa?ta?oa.push(V):oa.push(O,V):(za=aa(O,Ia),pa=aa(V,Ia),-1!==za&&-1!==pa&&za!==pa&&(O=N([O,V],Oa,!0),0<O.length&&(O[za]||(za=O[za[0]]?za[0]:za[1]),O[pa]||(pa=O[pa[0]]?pa[0]:
pa[1]),V=O[za],O=O[pa],V&&oa.push(V),O&&(oa.push(O),na.push(oa),oa=[]))))}na.push(oa)});M.setShape(this._getPathStringFromPaths(na))}},_clipPolygon:function(M,Z){Z=this._getCorners(M,Z);var ia=Z.br,qa=this._rendererLimits,ya=qa.clipLimit,Ca=qa.rangeMin,Ia=qa.rangeMax,Oa=qa.clipBBox,la=qa.clipSegments;qa=this._isPointWithinRange;var N=this._isPointWithinBBox,aa=this._getClipperIntersection,na=this._getPlaneIndex,ca=G._pointLineDistance;qa(Z.tl,Ca,Ia)&&qa(ia,Ca,Ia)||(sa&&this._createSegments(M),Z=t.filter(M.segments,
function(ea){return ea.args&&ea.args.length}),Z=t.map(Z,function(ea){var oa=ea.args,ta=oa.length,O=[];ea=[];var V;for(V=0;V<ta;V+=2){var pa=[oa[V],oa[V+1]],za=[oa[V+2],oa[V+3]];if(V===ta-2){O.push(pa);break}var Ja=N(pa,Oa),Qa=N(za,Oa);O.push(pa);if(Ja^Qa){if(Qa=aa([pa,za],la))pa=Qa[1],pa[Ja?"inOut":"outIn"]=!0,O.push(pa),ea.push([Ja?"INOUT":"OUTIN",O.length-1,Qa[0]])}else if(!Ja){Ja=na(pa,Oa);var J=na(za,Oa);-1!==Ja&&-1!==J&&Ja!==J&&(Qa=aa([pa,za],la,!0),0<Qa.length?(Qa[Ja]||(Ja=Qa[Ja[0]]?Ja[0]:Ja[1]),
Qa[J]||(J=Qa[J[0]]?J[0]:J[1]),pa=Qa[Ja],za=Qa[J],pa&&(pa.outIn=!0,O.push(pa),ea.push(["OUTIN",O.length-1,Ja])),za&&(za.inOut=!0,O.push(za),ea.push(["INOUT",O.length-1,J]))):n.isArray(Ja)&&n.isArray(J)&&(Qa=Ja.concat(J),Qa.sort(),"0123"===Qa.join("")&&(Qa=[],3===Ja[0]+Ja[1]?Qa.push([ya,-ya],[-ya,ya]):Qa.push([-ya,-ya],[ya,ya]),Ja=ca(Qa[0],[pa,za]),pa=ca(Qa[1],[pa,za]),O.push(Ja<pa?Qa[0]:Qa[1]))))}}var U=Oa[0],ha=Oa[1],K=Oa[2],S=Oa[3];t.forEach(O,function(xa){xa[0]<U&&(xa[1]>=ha&&xa[1]<=S?xa[0]=U:(xa[0]=
U,xa[1]=xa[1]<ha?ha:S))});t.forEach(O,function(xa){xa[1]<ha&&(xa[0]>=U&&xa[0]<=K?xa[1]=ha:(xa[1]=ha,xa[0]=xa[0]<U?U:K))});t.forEach(O,function(xa){xa[0]>K&&(xa[1]>=ha&&xa[1]<=S?xa[0]=K:(xa[0]=K,xa[1]=xa[1]<ha?ha:S))});t.forEach(O,function(xa){xa[1]>S&&(xa[0]>=U&&xa[0]<=K?xa[1]=S:(xa[1]=S,xa[0]=xa[0]<U?U:K))});oa=0;ta=ea.length;if(0<ta){do{za=ea[oa];V=ea[(oa+1)%ta];if(za[2]===V[2]&&"INOUT"===za[0]&&"OUTIN"===V[0])if(pa=za[1],V=V[1],pa<V)for(pa+=1;pa<V;pa++)O[pa][2]=!0;else if(pa>V){for(pa+=1;pa<O.length;pa++)O[pa][2]=
!0;for(pa=0;pa<V;pa++)O[pa][2]=!0}oa=(oa+1)%ta}while(0!==oa)}ta=O[0];oa=O[O.length-1];ta[2]&&(oa[2]=!0,t.some(ea,function(xa){return 1===xa[1]?(O.splice(O.length-1,0,n.clone(O[1])),!0):!1}));O=t.filter(O,function(xa){return xa[2]?!1:!0});for(oa=0;oa<O.length-1;oa++)ta=O[oa],(V=O[oa+1])&&ta[0]===V[0]&&ta[1]===V[1]&&(V.outIn?ta.outIn=!0:V.inOut&&(ta.inOut=!0),O.splice(oa+1,1));ta=Math.abs;ea=[];for(oa=0;oa<O.length-1;oa++){za=O[oa];pa=za[0];za=za[1];Ja=ta(pa)===ya;Qa=ta(za)===ya;V=O[oa+1];J=V[0];V=
V[1];var ba=ta(J)===ya,ra=ta(V)===ya;Ja&&ra?ea.push([oa+1,[pa,V]]):Qa&&ba&&ea.push([oa+1,[J,za]])}for(oa=ea.length-1;0<=oa;oa--)V=ea[oa],pa=O[V[0]-1],ta=O[V[0]],pa.outIn||pa.inOut||ta.outIn||ta.inOut||O.splice(V[0],0,V[1]);ta=O[0];oa=O[O.length-1];ta[0]===oa[0]&&ta[1]===oa[1]||O.push(ta);return O}),M.setShape(this._getPathStringFromPaths(Z)))},_getCorners:function(M,Z){if(sa){M=this._map;var ia=Z.getExtent(),qa=ia.spatialReference;Z=M.toScreen(new D(ia.xmin,ia.ymax,qa));M=M.toScreen(new D(ia.xmax,
ia.ymin,qa));return{tl:Z,br:M}}M=M.getTransformedBoundingBox();return{tl:M[0],br:M[2]}},_createSegments:function(M){M.shape.path=M.vmlPath;M.segmented=!1;M._confirmSegmented();var Z=M.segments;1<Z.length&&(M.segments=t.filter(Z,function(ia,qa,ya){qa=ya[qa+1];return"M"===ia.action&&qa&&"L"===qa.action?(ia.args=ia.args.concat(qa.args),!0):!1}))},_getPathStringFromPaths:function(M){sa?(M=t.map(M,function(Z){return"m "+t.map(Z,function(ia,qa){return(1===qa?"l ":"")+ia.join(",")}).join(" ")}),M.push("e")):
M=t.map(M,function(Z){return"M "+t.map(Z,function(ia){return ia.join(",")}).join(" ")});return M.join(" ")},_isPointWithinBBox:function(M,Z){var ia=Z[1],qa=Z[2],ya=Z[3],Ca=M[0];M=M[1];return Ca>Z[0]&&Ca<qa&&M>ia&&M<ya?!0:!1},_isPointWithinRange:function(M,Z,ia){var qa=M.x;M=M.y;return qa<Z||M<Z||qa>ia||M>ia?!1:!0},_getClipperIntersection:function(M,Z,ia){var qa,ya=G._getLineIntersection2,Ca=Math.round,Ia={length:0};for(qa=0;4>qa;qa++){var Oa=ya(M,Z[qa]);if(Oa)if(Oa[0]=Ca(Oa[0]),Oa[1]=Ca(Oa[1]),ia)Ia[qa]=
Oa,Ia.length++;else return[qa,Oa]}return ia?Ia:null},_getPlaneIndex:function(M,Z){var ia=M[0];M=M[1];var qa=Z[0],ya=Z[1],Ca=Z[2];Z=Z[3];return ia<=qa?M>=ya&&M<=Z?3:M<ya?[0,3]:[2,3]:M<=ya?ia>=qa&&ia<=Ca?0:ia<qa?[3,0]:[1,0]:ia>=Ca?M>=ya&&M<=Z?1:M<ya?[0,1]:[2,1]:M>=Z?ia>=qa&&ia<=Ca?2:ia<qa?[3,2]:[1,2]:-1},onGraphicAdd:function(){},onGraphicRemove:function(){},onGraphicNodeAdd:function(){},onGraphicNodeRemove:function(){},onGraphicDraw:function(){},onGraphicsClear:function(){},onRendererChange:function(){},
onOpacityChange:function(){},onInfoTemplateChange:function(){},onSurfaceChange:function(){},onWebGLEnabledChange:function(){},setInfoTemplate:function(M){this.infoTemplate=M;this._evalSurfaceType();this.onInfoTemplateChange()},add:function(M,Z){if(M._graphicsLayer===this)return M;M._suspended=this._suspendGraphics;Z||this.graphics.push(M);M._graphicsLayer=this;M._sourceLayer||(M._layer&&"esri.layers.GraphicsLayer"!==M._layer.declaredClass?M._sourceLayer=M._layer:"esri.layers.GraphicsLayer"!==this.declaredClass&&
(M._sourceLayer=this));M._layer=this;this.hasWebGLSurface()||(this._updateExtent(M),this._draw(M));if(!Z)this.onGraphicAdd(M);return M},remove:function(M,Z,ia){if(!Z&&!ia){Z=this.graphics;var qa;if(-1===(qa=t.indexOf(Z,M)))return null;if(!wa||64<=wa)Z.splice(qa,1);else{var ya=Z.length;if(ya){for(;qa<ya;)Z[qa]=Z[qa+1],qa++;Z.length--}}}this.hasWebGLSurface()||M.getDojoShape()&&this._removeShape(M,null,ia);M._shape=M._graphicsLayer=null;this.onGraphicRemove(M);return M},clear:function(M,Z){M=this.graphics;
var ia,qa=!sa;for(ia=M.length-1;0<=ia;ia--)this.remove(M[ia],null,qa);this.graphics=[];this.hasWebGLSurface()||this._destroyAllNodes();if(!Z)this.onGraphicsClear()},_destroyAllNodes:function(){if(!sa&&this._div){var M;this._childLayer&&(M=this._childLayer.getNode())&&M.parentNode&&M.parentNode.removeChild(M);this._bgGroup.clear();this._div.clear();this._bgGroup=this._div.createGroup();M&&this._div.getEventSource().appendChild(M);this._initOpacity()}},clearNodes:function(){if(!this.hasWebGLSurface()){var M=
this.graphics,Z=M.length,ia;for(ia=0;ia<Z;ia++)this._removeShape(M[ia],!0,!0);this._destroyAllNodes()}},_graphicVisibilityChanged:function(M){},_setIEOpacity:function(M,Z){var ia=M&&M.getNode();if(ia){var qa=M.strokeStyle,ya=ia.stroke;qa&&ya&&(ya.opacity=qa.color.a*Z);M=M.fillStyle;qa=ia.fill;M&&qa&&("tile"===qa.type?f.set(ia,"opacity",Z):qa.opacity=M.a*Z)}},setOpacity:function(M,Z){if(Z||this.opacity!=M){var ia=this._div;ia&&!this.hasWebGLSurface()&&(sa?(t.forEach(this.graphics,function(qa){this._setIEOpacity(qa._shape,
M);this._setIEOpacity(qa._bgShape,M)},this),ia._esriIeOpacity=M,this._bgGroup._esriIeOpacity=M):"canvas-2d"===this.surfaceType?f.set(ia.getEventSource(),"opacity",M):ia.getEventSource().setAttribute("opacity",M));this.opacity=M;if(!Z)this.onOpacityChange(M)}},setRenderer:function(M){this.renderer=M;this._evalSDRenderer(!0);this._evalSurfaceType();this.emit("renderer-change",{renderer:this._rndForScale||M})}});y=y([h,L],{declaredClass:"esri.layers.GraphicsLayer",constructor:function(){this._processEvent=
n.hitch(this,this._processEvent);this._initLayer()},_initLayer:function(){this.loaded=!0;this.onLoad(this)},_setMap:function(){var M=this.inherited("_setMap",arguments);this.enableMouseEvents();return M},_unsetMap:function(){this.disableMouseEvents();this.inherited("_unsetMap",arguments)},_processEvent:function(M){var Z=this._map,ia=M.target,qa;M.screenPoint=new x(M.pageX-Z.position.x,M.pageY-Z.position.y);for(M.mapPoint=Z.toMap(M.screenPoint);ia&&!(qa=ia.e_graphic);)ia=ia.parentNode;if(qa)return M.graphic=
qa,M},_onMouseOverHandler:function(M){if(this._processEvent(M))this.onMouseOver(M)},_onMouseMoveHandler:function(M){if(this._processEvent(M))this.onMouseMove(M)},_onMouseDragHandler:function(M){if(this._processEvent(M))this.onMouseDrag(M)},_onMouseOutHandler:function(M){if(this._processEvent(M))this.onMouseOut(M)},_onMouseDownHandler:function(M){this._downGr=this._downPt=null;this._processEvent(M)&&(u.disconnect(this._onmousemove_connect),u.disconnect(this._onmousedrag_connect),this._onmousedrag_connect=
u.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseDragHandler"),this._downGr=M.graphic,this._downPt=M.screenPoint.x+","+M.screenPoint.y,this.onMouseDown(M))},_onMouseUpHandler:function(M){this._upGr=this._upPt=null;this._processEvent(M)&&(u.disconnect(this._onmousedrag_connect),u.disconnect(this._onmousemove_connect),this._onmousemove_connect=u.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseMoveHandler"),this._upGr=M.graphic,this._upPt=M.screenPoint.x+","+M.screenPoint.y,
this.onMouseUp(M))},_onClickHandler:function(M){if(this._processEvent(M)){var Z=this._downGr,ia=this._upGr;Z&&ia&&Z===ia&&this._downPt===this._upPt&&(sa&&(w._ieGraphic=M.graphic),this.onClick(M))}},_onDblClickHandler:function(M){if(this._processEvent(M))this.onDblClick(M)},onMouseOver:function(){},onMouseMove:function(){},onMouseDrag:function(){},onMouseOut:function(){},onMouseDown:function(){},onMouseUp:function(){},onClick:function(){},onDblClick:function(){},enableMouseEvents:function(){if(!this._mouseEvents){var M=
u.connect,Z=this._div.getEventSource();X||(this._onmouseover_connect=M(Z,"onmouseover",this,"_onMouseOverHandler"),this._onmousemove_connect=M(Z,"onmousemove",this,"_onMouseMoveHandler"),this._onmouseout_connect=M(Z,"onmouseout",this,"_onMouseOutHandler"),this._onmousedown_connect=M(Z,"onmousedown",this,"_onMouseDownHandler"),this._onmouseup_connect=M(Z,"onmouseup",this,"_onMouseUpHandler"),this._onclick_connect=M(Z,"onclick",this,"_onClickHandler"),this._ondblclick_connect=M(Z,"ondblclick",this,
"_onDblClickHandler"));this._mouseEvents=!0}},disableMouseEvents:function(){if(this._mouseEvents){var M=u.disconnect;M(this._onmouseover_connect);M(this._onmousemove_connect);M(this._onmousedrag_connect);M(this._onmouseout_connect);M(this._onmousedown_connect);M(this._onmouseup_connect);M(this._onclick_connect);M(this._ondblclick_connect);this._mouseEvents=!1}}});y._GraphicsContainer=k;y._GraphicsLayer=h;A("extend-esri")&&(n.setObject("layers.GraphicsLayer",y,w),n.setObject("layers._GraphicsContainer",
k,w),n.setObject("layers._GraphicsLayer",h,w));return y})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(F,y,a){y.switchTo(a);return y})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(F,y,a,u,n){var t=null;a.add("vml",function(r,l,d){d.innerHTML='\x3cv:shape adj\x3d"1"/\x3e';r="adj"in d.firstChild;d.innerHTML="";return r});return{load:function(r,l,d){function f(){l(["dojox/gfx/"+
b],function(e){F.renderer=b;t=e;d(e)})}if(t&&"force"!=r)d(t);else{var b=n.forceGfxRenderer;r=!b&&(y.isString(n.gfxRenderer)?n.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var c,g;!b&&r.length;)switch(r.shift()){case "svg":"SVGAngle"in u.global&&(b="svg");break;case "vml":a("vml")&&(b="vml");break;case "silverlight":try{a("ie")?(c=new ActiveXObject("AgControl.AgControl"),c.IsVersionSupported("1.0"))&&(g=!0):navigator.plugins["Silverlight Plug-In"]&&(g=!0)}catch(e){g=!1}finally{c=null}g&&
(b="silverlight");break;case "canvas":u.global.CanvasRenderingContext2D&&(b="canvas")}"canvas"===b&&!1!==n.canvasEvents&&(b="canvasWithEvents");n.isDebug&&console.log("gfx renderer \x3d "+b);"svg"==b&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(f):f()}}}})},"esri/layers/gfxSniff":function(){define(["dojo/has","dojox/gfx"],function(F,y){F.add("esri-svg",function(){return-1!==y.renderer.toLowerCase().indexOf("svg")});return F})},"esri/layers/layer":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h){var k=F([l],{declaredClass:"esri.layers.Layer",_eventMap:{error:["error"],load:["layer"],"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},constructor:function(m,w){this._attrs={};m&&u.isString(m)?this._url=g.urlToObject(this.url=g.normalize(m)):(this.url=this._url=null,(w=w||m)&&(w.layerDefinition||w.query)&&(w=null));this.spatialReference=new e(4326);this.initialExtent=new h(-180,-90,180,90,new e(4326));this._map=this._div=
null;this.normalization=!0;w&&(w.id&&(this.id=w.id),this.arcgisProps=w.arcgisProps,this.parentLayer=w.parentLayer,!1===w.visible&&(this.visible=!1),f.isDefined(w.opacity)&&(this.opacity=w.opacity),f.isDefined(w.minScale)&&this.setMinScale(w.minScale),f.isDefined(w.maxScale)&&this.setMaxScale(w.maxScale),this.attributionDataUrl=w.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,f.isDefined(w.showAttribution)&&(this.showAttribution=w.showAttribution),this.className=w.className,
this.refreshInterval=w.refreshInterval||0);this._errorHandler=u.hitch(this,this._errorHandler);this._scheduledRefresh=u.hitch(this,this._scheduledRefresh);this.refresh=u.hitch(this,this.refresh);if(this.managedSuspension){var p=this._setMap;this._setMap=function(A){var C=p.apply(this,arguments);this._fireAttach(A);this.evaluateSuspension();if(this.suspended&&!A.loaded)var z=a.connect(A,"onLoad",this,function(){a.disconnect(z);z=null;this.evaluateSuspension()});return C}}this.registerConnectEvents()},
id:null,visible:!0,opacity:1,loaded:!1,loadError:null,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attached:!1,attributionDataUrl:"",hasAttributionData:!1,showAttribution:!0,refreshInterval:0,_errorHandler:function(m){this.loaded||(this.loadError=m);this.onError(m)},_setMap:function(m,w,p,A){this._map=m;this._lyrZEHandle=a.connect(m,"onZoomEnd",this,this._processMapScale);if(m.loaded)this.visibleAtMapScale=this._isMapAtVisibleScale();else var C=a.connect(m,"onLoad",this,function(){a.disconnect(C);
C=null;this._processMapScale()})},_unsetMap:function(m,w){a.disconnect(this._lyrZEHandle);this._map=this._lyrZEHandle=null;this._resumedOnce=void 0;this.suspended=!0;this._fireDetach(m)},_fireAttach:function(m){this.attached=!0;this.onAttach({map:m})},_fireDetach:function(m){this.attached=!1;this.onDetach({map:m})},_cleanUp:function(){this._map=this._div=null},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart(),this._map&&this._map._incr())},
_fireUpdateEnd:function(m,w){this.updating&&(this.updating=!1,this.attr("data-updating"),this._refreshRT(),this.onUpdateEnd(m,w),this._map&&this._map._decr())},_getToken:function(){var m=this._url,w=this.credential;return m&&m.query&&m.query.token||w&&w.token||void 0},_findCredential:function(){this.credential=d.id&&this._url&&d.id.findCredential(this._url.path)},_useSSL:function(){var m=this._url,w=/^http:/i;this.url&&(this.url=this.url.replace(w,"https:"));m&&m.path&&(m.path=m.path.replace(w,"https:"))},
refresh:function(m){},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},setMinScale:function(m){this.setScaleRange(m)},setMaxScale:function(m){this.setScaleRange(null,m)},setScaleRange:function(m,w){var p=f.isDefined(m),A=f.isDefined(w);this.loaded||(this._hasMin=this._hasMin||p,this._hasMax=this._hasMax||A);var C=this.minScale,z=this.maxScale;this.minScale=(p?m:this.minScale)||0;this.maxScale=(A?w:this.maxScale)||0;if(C!==this.minScale||z!==this.maxScale)this.onScaleRangeChange(),
this._processMapScale()},suspend:function(){this._suspended=!0;this.evaluateSuspension()},resume:function(){this._suspended=!1;this.evaluateSuspension()},canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&!this._suspended},evaluateSuspension:function(){this.canResume()?this.suspended&&this._resume():this.suspended||this._suspend()},_suspend:function(){this.suspended=!0;this.attr("data-suspended","");this.onSuspend();if(this._map)this._map.onLayerSuspend(this)},
_resume:function(){this.suspended=!1;this.attr("data-suspended");var m=void 0===this._resumedOnce,w=this.className,p=this._attrs,A=this.getNode(),C;if(m){this._resumedOnce=!0;if(w&&A){var z=A.getAttribute("class")||"";(new RegExp("(^|\\s)"+w+"(\\s|$)","i")).test(z)||A.setAttribute("class",z+((z?" ":"")+w))}if(p&&A)for(C in p)p.hasOwnProperty(C)&&A.setAttribute(C,p[C])}this._refreshRT();this.onResume({firstOccurrence:m});if(this._map)this._map.onLayerResume(this)},_processMapScale:function(){var m=
this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();m!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension())},isVisibleAtScale:function(m){return m?k.prototype._isMapAtVisibleScale.apply(this,arguments):!1},_isMapAtVisibleScale:function(m,w){if(!(m||this._map&&this._map.loaded))return!1;var p=this._map;m=m||p.getScale();var A=this.minScale,C=this.maxScale,z=!A,q=!C,v;w&&(v=p.width>p.height?p.width:p.height);z||(m<=A?z=!0:w&&(z=Math.abs(A-m)/A<1/
v));q||(m>=C?q=!0:w&&(q=Math.abs(C-m)/C<1/v));return z&&q},getAttributionData:function(){var m=this.attributionDataUrl,w=new n(c._dfdCanceller);this.hasAttributionData&&m?(w._pendingDfd=b({url:m,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),w._pendingDfd.then(function(p){w.callback(p)},function(p){w.errback(p)})):(m=Error("Layer does not have attribution data"),m.log=!!y.isDebug,w.errback(m));return w},getResourceInfo:function(){var m=this.resourceInfo;return u.isString(m)?t.fromJson(m):
u.clone(m)},getMap:function(){return this._map},getNode:function(){return this._div},attr:function(m,w){var p=this.getNode();if("data-reference"===m&&11>r("ie"))return this;p&&(null==w?p.removeAttribute(m):p.setAttribute(m,w));this._attrs&&(null==w?delete this._attrs[m]:this._attrs[m]=w);return this},setRefreshInterval:function(m){var w=this.refreshInterval;this.refreshInterval=m;this._toggleRT(!1);m&&this._toggleRT(!0);if(w!==m)this.onRefreshIntervalChange();return this},_toggleRT:function(m){m&&
this.refreshInterval?(clearInterval(this._refreshTimer),this._refreshTimer=setInterval(this._scheduledRefresh,6E4*this.refreshInterval)):this._refreshTimer&&(clearInterval(this._refreshTimer),this._refreshTimer=null)},_refreshRT:function(){this._toggleRT(!1);this._toggleRT(!0)},_scheduledRefresh:function(){this.onRefreshTick();!this._map||this.suspended||this.updating||this.refresh({scheduled:!0})},_refreshTS:null,_reCheckTS:/[\?&]_ts=/ig,_reReplaceTS:/([\?&]_ts=)[0-9]+/ig,addTimestampToURL:function(m){var w=
this._refreshTS;w&&(m=this._reCheckTS.test(m)?m.replace(this._reReplaceTS,"$$$1"+w):m+((-1===m.indexOf("?")?"?":"\x26")+"_ts\x3d"+w));return m},setNormalization:function(m){this.normalization=m},setVisibility:function(m){this.visible!==m&&(this.visible=m,this.onVisibilityChange(this.visible),this.evaluateSuspension());this.attr("data-hidden",m?null:"")},onLoad:function(){},onAttach:function(m){},onDetach:function(m){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},
onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onRefreshTick:function(){},onError:function(){}});r("extend-esri")&&u.setObject("layers.Layer",k,d);return k})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/request/xhr ./core/request/script dojo/request/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils ./support/requestUtils".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m,w,p){function A(T){T=new t(T);return(T.host+(T.port?":"+T.port:"")).toLowerCase()}function C(T){return this._xhr?this._xhr.getResponseHeader(T):null}function z(T,ka){var ma=c.objectToQuery(T.content);ma&&(T.url+=(-1===T.url.indexOf("?")?"?":"\x26")+ma);if(2E3<T.url.length){if("data:"!==T.url.toLowerCase().slice(0,5))return T=new u,T.reject(n.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."})),T;if(3E6<T.url.length)return T=
new u,T.reject(n.mixin(Error(),{message:"When using responseType 'image', data URL length cannot exceed 3000000 characters."})),T}var wa=new Image;ka.allowImageDataAccess&&(wa.crossOrigin=T.withCredentials?"use-credentials":"anonymous");var ja=!1,ua=new u(function(Ba){ja=!0;wa.onload=wa.onerror=wa.onabort=null;wa.src=""});ka=function(Ba){wa.onload=wa.onerror=wa.onabort=null;ja||ua.reject(Error("Unable to load the resource"))};wa.onload=function(){wa.onload=wa.onerror=wa.onabort=null;ja||ua.resolve(this)};
wa.onerror=ka;wa.onabort=ka;wa.alt="";wa.src=T.url;return ua}function q(T,ka,ma,wa){var ja=!1,ua=!1,Ba=!1,M;if(k.isDefined(ka))if(n.isObject(ka)){ja=!!ka.useProxy;ua=!!ka.usePost;Ba=!!ka.returnProgress;var Z=ka.crossOrigin}else ja=!!ka;T=n.mixin({},T);delete T._credential;T._ssl&&(T.url=T.url.replace(/^http:/i,"https:"));10>h("ie")&&!fa.test(T.url)&&(T.url=encodeURI(T.url));var ia=T.content,qa=T.url,ya=ma&&T.form,Ca=L;Z=k.isDefined(Z)?Z:Ca.useCors;T.load=function(Pa){if(Pa){if(Pa.error){var Xa=n.mixin(Error(),
Pa.error);Xa.log=!!a.isDebug}else"error"===Pa.status&&(Xa=n.mixin(Error(),Pa),Xa.log=!!a.isDebug);Xa&&(T.failOk=!Xa.log,k.isDefined(Xa.httpCode)||(Xa.httpCode=Xa.code))}return Xa||Pa};T.error=function(Pa,Xa){Xa&&Xa.xhr&&Xa.xhr.abort();Pa instanceof Error||(Pa=n.mixin(Error(),Pa));Pa.log=!!a.isDebug;T.failOk=!Pa.log;Ca.errorHandler(Pa,Xa);return Pa};T._token&&(T.content=T.content||{},T.content.token=T._token);var Ia=0;if(ia&&qa){var Oa=c.objectToQuery(ia);Ia=Oa.length+qa.length+1;h("esri-url-encodes-apostrophe")&&
(Ia=Oa.replace(/'/g,"%27").length+qa.length+1)}T.timeout=k.isDefined(T.timeout)?T.timeout:Ca.timeout;T.handleAs=T.handleAs||"json";try{var la=Z&&m.canUseXhr(T.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(T.url),N=m.hasSameOrigin(T.url,window.location.href)||la,aa=ua||ma||Ia>Ca.postLength?!0:!1,na=N||-1===T.handleAs.indexOf("json")||!T.callbackParamName||ma?!1:!0,ca=m.getProxyRule(T.url)||Ca.alwaysUseProxy||ja||!("image"===T.handleAs&&!ka.allowImageDataAccess||na&&!aa||N)?!0:!1;ma&&!h("esri-file-upload")&&
!ca&&la&&(ca=!0);if(ca){var ea=m.getProxyUrl(qa,Z);var oa=ea.path;ea._xo&&(la=!0);!aa&&oa.length+1+Ia>Ca.postLength&&(aa=!0);T.url=oa+"?"+qa;if(aa)T.content=n.mixin(ea.query||{},ia);else{var ta=c.objectToQuery(n.mixin(ea.query||{},ia));ta&&(T.url+="?"+ta);T.content=null}}if(!na||aa||ca){var O=T.headers;!la||O&&O.hasOwnProperty("X-Requested-With")||(O=T.headers=O||{},O["X-Requested-With"]=null);if(ma){var V=T.callbackParamName||"callback.html",pa=T.callbackElementName||"textarea",za,Ja,Qa=ya.elements?
ya.elements.length:0;if(ia=T.content)for(za in ia.token&&/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(qa)&&(qa+=(-1===qa.indexOf("?")?"?":"\x26")+"token\x3d"+ia.token,T.url=ca?oa+"?"+qa:qa,delete ia.token),ia){var J=ia[za];if(k.isDefined(J)){var U=null;for(Ja=0;Ja<Qa;Ja++){var ha=ya.elements[Ja];if(ha.name===za){U=ha;break}}U?U.value=J:wa?ya.append(za,J):ya.appendChild(b.create("input",{type:"hidden",name:za,value:J}))}}if(h("esri-file-upload")){y.forEach(ya.elements,function(Pa){Pa.name===
V&&ya.removeChild(Pa)});var K=wa?ya:new FormData(ya);if(11<=h("safari")&&"entries"in K&&"delete"in K){wa=[];for(var S=K.entries(),ba=S.next();!ba.done;){var ra=ba.value;ra[1]instanceof File&&""===ra[1].name&&wa.push(ra[0]);ba=S.next()}wa.forEach(function(Pa){K.delete(Pa)})}T.contentType=!1;T.postData=K;delete T.form}else{ya.enctype="multipart/form-data";9>h("ie")&&(ya.encoding="multipart/form-data");ya.method="post";y.some(ya.elements,function(Pa){return Pa.name===V})||ya.appendChild(b.create("input",
{type:"hidden",name:V,value:pa}));if(-1!==qa.toLowerCase().indexOf("addattachment")||-1!==qa.toLowerCase().indexOf("updateattachment"))qa+=(-1===qa.indexOf("?")?"?":"\x26")+V+"\x3d"+pa,T.url=ca?oa+"?"+qa:qa;delete T.content}}if(la&&!T.hasOwnProperty("withCredentials")&&"with-credentials"===L.useCors){oa=ca?oa:qa;var xa=m.canUseXhr(oa,!0),La=-1<xa?L.corsEnabledServers[xa]:null;if(La&&La.hasOwnProperty("withCredentials"))La.withCredentials&&(T.withCredentials=!0);else if(g.id){var Ha=g.id.findServerInfo(oa);
Ha&&Ha.webTierAuth&&(T.withCredentials=!0)}}T=I?I(T):T;var Va=function(){if("image"===T.handleAs)return z(T,ka);if(aa){if(ma&&!h("esri-file-upload")){M=new u(function(){Pa.cancel()});var Pa=f.post(T.url,T).then(function(ab){M.resolve(ab)}).otherwise(function(ab){M.reject(ab)});M.addCallback(function(ab){return T.load(ab)});M.addErrback(function(ab){return T.error(ab)});return M}!ca&&h("safari")&&(T.url+=(-1===T.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+X++);if(Ba){T.uploadProgress=
!0;T.data=T.postData;T.query=T.content;M=new u(function(){Xa.cancel()});var Xa=l.post(T.url,T).then(function(ab){M.resolve(ab)},function(ab){M.reject(ab)},function(ab){M.progress({transferType:ab.transferType,loaded:ab.loaded,total:ab.total})});M.addCallback(function(ab){return T.load(ab)});M.addErrback(function(ab){return T.error(ab)});return M}return r.post(T)}return r.get(T)};return T.withCredentials&&p.isNoCorsRequestRequired(qa)?M=p.sendNoCorsRequest(qa,ia).addBoth(function(){var Pa=Va();M.ioArgs=
Pa.ioArgs;return Pa}):Va()}T=I?I(T):T;T.jsonp=T.callbackParamName;T.query=T.content;M=new u(function(){Ta.cancel()});var Ta=d.get(T.url,T).then(function(Pa){M.resolve(Pa)}).otherwise(function(Pa){M.reject(Pa)});M.addCallback(function(Pa){return T.load(Pa)});M.addErrback(function(Pa){return T.error(Pa)});return M}catch(Pa){return M=new u,M.errback(T.error(Pa)),M}}function v(T){var ka=L.corsStatus,ma=m.canUseXhr(T,!0);-1<ma&&L.corsEnabledServers.splice(ma,1);var wa=new u;wa.reject({log:!!a.isDebug});
ka[A(T)]=wa.promise;return ma}function B(T){var ka=L.corsStatus;try{var ma=A(T);if(L.corsDetection&&L.useCors&&h("esri-cors")&&T&&-1!==T.toLowerCase().indexOf("/rest/services")&&!m.hasSameOrigin(T,window.location.href)&&!m.canUseXhr(T)){if(ka[ma]&&!ka[ma].isCanceled())return ka[ma];var wa=new u(w._dfdCanceller);ka[ma]=wa.promise;var ja=r.get({url:T.substring(0,T.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*L.corsDetectionTimeout});
wa._pendingDfd=ja;ja.then(function(ua){ua?(m.canUseXhr(T)||L.corsEnabledServers.push(ma),wa.resolve()):wa.reject()},function(ua){wa.reject(ua)});return wa.promise}}catch(ua){console.log("esri._detectCors: an unknown error occurred while detecting CORS support")}return sa}function D(T){I=T}function x(T,ka,ma,wa){function ja(la){la._pendingDfd=q(ma,wa,ya,qa);if(!la._pendingDfd){la.ioArgs=la._pendingDfd&&la._pendingDfd.ioArgs;var N=Error("Deferred object is missing");N.log=!!a.isDebug;la.errback(N);
la._pendingDfd=null;return la}la._pendingDfd.addCallback(function(aa){if(!aa)return aa;var na=la._pendingDfd&&la._pendingDfd.ioArgs&&la._pendingDfd.ioArgs.xhr;if(!na)return aa;if(na=na.getResponseHeader("Content-Type"))if(na=na.toLowerCase(),-1===na.indexOf("text/plain")&&-1===na.indexOf("application/json"))return aa;if(aa instanceof ArrayBuffer&&750>=aa.byteLength)na=new Blob([aa]);else if(aa instanceof Blob&&750>=aa.size)na=aa;else return aa;var ca=new u,ea=new FileReader;ea.readAsText(na);ea.onloadend=
function(){if(!ea.error)try{var oa=JSON.parse(ea.result);if(oa.error)var ta=oa.error}catch(O){}ta?(ta=n.mixin(Error(),ta),ta.log=!!a.isDebug,null==ta.httpCode&&(ta.httpCode=ta.code),ca.reject(ta)):ca.resolve(aa)};return ca.promise}).addCallback(function(aa){la.ioArgs=la._pendingDfd&&la._pendingDfd.ioArgs;wa.returnFullResponse&&(aa={data:aa,_xhr:la.ioArgs&&la.ioArgs.xhr,getHeader:C});la.callback(aa);la._pendingDfd=null}).addErrback(function(aa){if(aa){var na=aa.code;var ca=aa.subcode;var ea=(ea=aa.messageCode)&&
ea.toUpperCase()}if(aa&&403==na&&(4==ca||aa.message&&-1<aa.message.toLowerCase().indexOf("ssl")&&-1===aa.message.toLowerCase().indexOf("permission"))){if(!ma._ssl){ma._ssl=ma._sslFromServer=!0;x(la,!0,ma,wa);return}}else if(aa&&415==aa.status){if(v(ma.url),!ma._err415){ma._err415=1;x(la,!0,ma,wa);return}}else if(g.id&&-1!==y.indexOf(g.id._errorCodes,na)&&!g.id._isPublic(ma.url)&&!Ba&&(403!=na||-1===y.indexOf(Y,ea)&&(!k.isDefined(ca)||2==ca&&ma._token))){la._pendingDfd=g.id.getCredential(ma.url,{token:ma._token,
error:aa});la._pendingDfd.addCallback(function(oa){ma._token=oa.token;ma._credential=oa;ma._ssl=ma._sslFromServer||oa.ssl;x(la,!0,ma,wa)}).addErrback(function(oa){la.errback(oa);la._pendingDfd=null});return}la.ioArgs=la._pendingDfd&&la._pendingDfd.ioArgs;la.isFulfilled()||la.errback(aa);la._pendingDfd=null}).then(null,null,function(aa){la.progress(aa)})}var ua=ma.form,Ba=wa.disableIdentityLookup,M=wa._preLookup,Z=!1;if(h("esri-workers")&&!1!==L.useWorkers)if(!0===wa.useWorkers||!0===L.useWorkers)Z=
!0;else if(wa.workerOptions){var ia=wa.workerOptions;if(ia.callback||ia.worker&&ia.worker.worker instanceof Worker)Z=!0}var qa=ua&&h("esri-file-upload")&&ua instanceof FormData,ya=ua&&(ua.elements?y.some(ua.elements,function(la){return"file"===la.type}):qa),Ca=-1!==ma.url.toLowerCase().indexOf("token\x3d")||ma.content&&ma.content.token||ya&&y.some(ua.elements,function(la){return"token"===la.name})?1:0;if(!ka){T.addCallback(function(la){if(la&&(/\/sharing\/rest\/accounts\/self/i.test(ma.url)||/\/sharing\/rest\/portals\/self/i.test(ma.url))){if(!Ca&&
!ma._token&&la.user&&la.user.username){L.webTierAuthServers.push(A(ma.url));var N=L.corsEnabledServers,aa=m.canUseXhr(ma.url,!0),na={host:A(ma.url),withCredentials:!0};if(-1===aa)N.push(na);else{var ca=N[aa];ca instanceof RegExp?(na.host=ca,N.splice(aa,1,na)):"object"===typeof ca?ca.withCredentials=!0:N.splice(aa,1,na)}}Array.isArray(la.authorizedCrossOriginNoCorsDomains)&&p.registerNoCorsDomains(la.authorizedCrossOriginNoCorsDomains)}if(la=ma._credential)if(N=(N=g.id.findServerInfo(la.server))&&
N.owningSystemUrl)N=N.replace(/\/?$/,"/sharing"),(la=g.id.findCredential(N,la.userId))&&-1===g.id._getIdenticalSvcIdx(N,la)&&la.resources.splice(0,0,N)});T.addBoth(function(la){delete ma._credential;!la||h("ie")&&la.nodeType||(la._ssl=ma._ssl)});var Ia=ma.load,Oa=ma.error;Ia&&T.addCallback(function(la){var N=T._pendingDfd;N=N&&N.ioArgs;return Ia.call(N&&N.args,la,N)});Oa&&T.addErrback(function(la){var N=T._pendingDfd;N=N&&N.ioArgs;return Oa.call(N&&N.args,la,N)})}!g.id||Ca||ma._token||g.id._isPublic(ma.url)||
Ba&&!M||!(ka=g.id.findCredential(ma.url))||(ma._token=ka.token,ma._ssl=ka.ssl);Z?wa.workerOptions&&wa.workerOptions.worker?(G||(G=r),r=wa.workerOptions.worker,ja(T)):F(["./workers/RequestClient"],function(la){G||(G=r);if(wa.workerOptions){var N=wa.workerOptions;r=la.getClient(N.callback,N.cbFunction)}else r=la.getClient();ja(T)}):(G&&(r=G,G=null),ja(T));return T}function E(T,ka){T.url=m.fixUrl(T.url);ka=ka||{};var ma=new u(w._dfdCanceller),wa=B(T.url);ma._pendingDfd=wa;wa.always(function(ja){ja&&
"cancel"===ja.dojoType?ma.reject(ja):x(ma,!1,T,ka)});return ma}var G=null,I,L=e.defaults.io,Y=["COM_0056","COM_0057","SB_0008"],X=0,fa=/%[0-9A-F]{2}/i,sa=function(){var T=new u;T.resolve();return T.promise}();E._makeRequest=q;E._processRequest=x;E._disableCors=v;E._detectCors=B;E.setRequestPreCallback=D;h("extend-esri")&&(g.request=E,g._makeRequest=q,g._processRequest=x,g._disableCors=v,g._detectCors=B,g.setRequestPreCallback=D);return E})},"esri/core/request/script":function(){define("require exports dojo/Deferred dojo/request/script dojo/text!./iframe.html ../sniff".split(" "),
function(F,y,a,u,n,t){function r(){var m=document.createElement("iframe");m.name="esri_core_jsonp_iframe";m.style.display="none";m.setAttribute("sandbox","allow-scripts");if(!t("ff")&&"srcdoc"in m){var w=F.toUrl("dojo/dojo.js"),p=n.replace("../../../dojo/dojo.js",w);w=w.slice(0,-7);p=p.replace("../../../dojo/",w);m.srcdoc=p}else p=F.toUrl("./iframe.html"),"http:"===window.location.protocol&&0===p.indexOf("https:")&&(p=p.replace("https:","http:")),m.src=p;document.body.appendChild(m);return m}function l(){var m=
new MessageChannel;m.port1.addEventListener("message",d);m.port1.start();return m}function d(m){var w=m.data;if("ready"===w){w=0;for(var p=h;w<p.length;w++)m=p[w],b(m,g);h=null}else if(m=k[w.id])delete k[w.id],w.isError?m.dfd.reject(Error(w.message)):m.dfd.resolve(w.response)}function f(m,w){m.addEventListener("load",function(){m.contentWindow.postMessage("init","*",[w.port2])})}function b(m,w){k[m.message.id]=m;w.port1.postMessage(m.message)}Object.defineProperty(y,"__esModule",{value:!0});var c,
g,e=0,h=[],k={};y.get=function(m,w){if(!t("esri-script-sandbox"))return u.get(m,w);var p=null;w&&(p={jsonp:w.jsonp,preventCache:w.preventCache,query:w.query,timeout:w.timeout});w=new a(function(){if(h){var C=h.indexOf(A);-1<C&&h.splice(C,1)}else A.message.id in k&&delete k[A.message.id]});var A={dfd:w,message:{id:"id"+(++e+Math.random()),url:m,options:p}};c||(c=r(),g=l(),f(c,g));h?h.push(A):b(A,g);return w.promise}})},"esri/core/sniff":function(){define(["../sniff"],function(F){return F})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom ../NodeList-manipulate".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c){function g(C){return!this.isFulfilled()}function e(C){return!!this._finished}function h(C,z){if(!z)try{var q=C.options,v=m.doc(m._frame),B=q.handleAs;if("html"!==B){if("xml"===B)if("html"===v.documentElement.tagName.toLowerCase()){l("a",v.documentElement).orphan();var D=v.documentElement.innerText||v.documentElement.textContent;D=D.replace(/>\s+</g,"\x3e\x3c");C.text=t.trim(D)}else C.data=v;else C.text=v.getElementsByTagName("textarea")[0].value;n(C)}else C.data=
v}catch(x){z=x}z?this.reject(z):this._finished?this.resolve(C):this.reject(Error("Invalid dojo/request/iframe request state"))}function k(C){this._callNext()}function m(C,z,q){var v=u.parseArgs(C,u.deepCreate(A,z),!0);C=v.url;z=v.options;if("GET"!==z.method&&"POST"!==z.method)throw Error(z.method+" not supported by dojo/request/iframe");m._frame||(m._frame=m.create(m._iframeName,p+"();"));C=u.deferred(v,null,g,e,h,k);C._callNext=function(){this._calledNext||(this._calledNext=!0,m._currentDfd=null,
m._fireNextRequest())};C._legacy=q;m._dfdQueue.push(C);m._fireNextRequest();a(C);return q?C:C.promise}var w=F.id.replace(/[\/\.\-]/g,"_"),p=w+"_onload";c.global[p]||(c.global[p]=function(){var C=m._currentDfd;if(C){var z=f.byId(C.response.options.form)||C._tmpForm;if(z){for(var q=C._contentToClean,v=0;v<q.length;v++)for(var B=q[v],D=0;D<z.childNodes.length;D++){var x=z.childNodes[D];if(x.name===B){b.destroy(x);break}}C._originalAction&&z.setAttribute("action",C._originalAction);C._originalMethod&&
(z.setAttribute("method",C._originalMethod),z.method=C._originalMethod);C._originalTarget&&(z.setAttribute("target",C._originalTarget),z.target=C._originalTarget)}C._tmpForm&&(b.destroy(C._tmpForm),delete C._tmpForm);C._finished=!0}else m._fireNextRequest()});var A={method:"POST"};m.create=function(C,z,q){if(c.global[C])return c.global[C];if(c.global.frames[C])return c.global.frames[C];q||(d("config-useXDomain")&&!d("config-dojoBlankHtmlUrl")&&console.warn("dojo/request/iframe: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl to the path on your domain to blank.html"),
q=d("config-dojoBlankHtmlUrl")||y.toUrl("dojo/resources/blank.html"));z=b.place('\x3ciframe id\x3d"'+C+'" name\x3d"'+C+'" src\x3d"'+q+'" onload\x3d"'+z+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',c.body());return c.global[C]=z};m.doc=function(C){if(C.contentDocument)return C.contentDocument;var z=C.name;if(z){var q=c.doc.getElementsByTagName("iframe");if(C.document&&q[z].contentWindow&&q[z].contentWindow.document)return q[z].contentWindow.document;
if(c.doc.frames[z]&&c.doc.frames[z].document)return c.doc.frames[z].document}return null};m.setSrc=function(C,z,q){C=c.global.frames[C.name];C.contentWindow&&(C=C.contentWindow);try{q?C.location.replace(z):C.location=z}catch(v){console.log("dojo/request/iframe.setSrc: ",v)}};m._iframeName=w+"_IoIframe";m._notifyStart=function(){};m._dfdQueue=[];m._currentDfd=null;m._fireNextRequest=function(){try{if(!m._currentDfd&&m._dfdQueue.length){do var C=m._currentDfd=m._dfdQueue.shift();while(C&&(C.canceled||
C.isCanceled&&C.isCanceled())&&m._dfdQueue.length);if(!C||C.canceled||C.isCanceled&&C.isCanceled())m._currentDfd=null;else{var z=C.response,q=z.options,v=C._contentToClean=[],B=f.byId(q.form),D=u.notify,x=q.data||null;if(!C._legacy&&"POST"===q.method&&!B)B=C._tmpForm=b.create("form",{name:w+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},c.body());else if("GET"===q.method&&B&&-1<z.url.indexOf("?")){var E=z.url.slice(z.url.indexOf("?")+1);x=t.mixin(r.queryToObject(E),x)}if(B){if(!C._legacy){var G=
B;do G=G.parentNode;while(G&&G!==c.doc.documentElement);G||(B.style.position="absolute",B.style.left="-1000px",B.style.top="-1000px",c.body().appendChild(B));B.name||(B.name=w+"_form")}if(x){G=function(T,ka){b.create("input",{type:"hidden",name:T,value:ka},B);v.push(T)};for(var I in x){var L=x[I];if(t.isArray(L)&&1<L.length)for(E=0;E<L.length;E++)G(I,L[E]);else{var Y=l("input[name\x3d'"+I+"']",B);-1==Y.indexOf()?G(I,L):Y.val(L)}}}var X=B.getAttributeNode("action"),fa=B.getAttributeNode("method"),
sa=B.getAttributeNode("target");z.url&&(C._originalAction=X?X.value:null,X?X.value=z.url:B.setAttribute("action",z.url));C._legacy?fa&&fa.value||(fa?fa.value=q.method:B.setAttribute("method",q.method)):(C._originalMethod=fa?fa.value:null,fa?fa.value=q.method:B.setAttribute("method",q.method));C._originalTarget=sa?sa.value:null;sa?sa.value=m._iframeName:B.setAttribute("target",m._iframeName);B.target=m._iframeName;D&&D.emit("send",z,C.promise.cancel);m._notifyStart(z);B.submit()}else q="",z.options.data&&
(q=z.options.data,"string"!==typeof q&&(q=r.objectToQuery(q))),G=z.url+(-1<z.url.indexOf("?")?"\x26":"?")+q,D&&D.emit("send",z,C.promise.cancel),m._notifyStart(z),m.setSrc(m._frame,G,!0)}}}catch(T){C.reject(T)}};u.addCommonMethods(m,["GET","POST"]);return m})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),function(F,y,a,u,n){function t(d){for(;d.childNodes[0]&&1==d.childNodes[0].nodeType;)d=d.childNodes[0];return d}
function r(d,f){"string"==typeof d?(d=u.toDom(d,f&&f.ownerDocument),11==d.nodeType&&(d=d.childNodes[0])):1==d.nodeType&&d.parentNode&&(d=d.cloneNode(!1));return d}var l=F.NodeList;y.extend(l,{_placeMultiple:function(d,f){d="string"==typeof d||d.nodeType?F(d):d;for(var b=[],c=0;c<d.length;c++)for(var g=d[c],e=this.length,h=e-1,k;k=this[h];h--)0<c&&(k=this._cloneNode(k),b.unshift(k)),h==e-1?u.place(k,g,f):g.parentNode.insertBefore(k,g),g=k;b.length&&(b.unshift(0),b.unshift(this.length-1),Array.prototype.splice.apply(this,
b));return this},innerHTML:function(d){return arguments.length?this.addContent(d,"only"):this[0].innerHTML},text:function(d){if(arguments.length){for(var f=0,b;b=this[f];f++)1==b.nodeType&&n.set(b,"textContent",d);return this}var c="";for(f=0;b=this[f];f++)c+=n.get(b,"textContent");return c},val:function(d){if(arguments.length){for(var f=y.isArray(d),b=0,c;c=this[b];b++){var g=c.nodeName.toUpperCase(),e=c.type,h=f?d[b]:d;if("SELECT"==g)for(g=c.options,e=0;e<g.length;e++){var k=g[e];k.selected=c.multiple?
-1!=a.indexOf(d,k.value):k.value==h}else"checkbox"==e||"radio"==e?c.checked=c.value==h:c.value=h}return this}if((c=this[0])&&1==c.nodeType){d=c.value||"";if("SELECT"==c.nodeName.toUpperCase()&&c.multiple){d=[];g=c.options;for(e=0;e<g.length;e++)k=g[e],k.selected&&d.push(k.value);d.length||(d=null)}return d}},append:function(d){return this.addContent(d,"last")},appendTo:function(d){return this._placeMultiple(d,"last")},prepend:function(d){return this.addContent(d,"first")},prependTo:function(d){return this._placeMultiple(d,
"first")},after:function(d){return this.addContent(d,"after")},insertAfter:function(d){return this._placeMultiple(d,"after")},before:function(d){return this.addContent(d,"before")},insertBefore:function(d){return this._placeMultiple(d,"before")},remove:l.prototype.orphan,wrap:function(d){if(this[0]){d=r(d,this[0]);for(var f=0,b;b=this[f];f++){var c=this._cloneNode(d);b.parentNode&&b.parentNode.replaceChild(c,b);t(c).appendChild(b)}}return this},wrapAll:function(d){if(this[0]){d=r(d,this[0]);this[0].parentNode.replaceChild(d,
this[0]);d=t(d);for(var f=0,b;b=this[f];f++)d.appendChild(b)}return this},wrapInner:function(d){if(this[0]){d=r(d,this[0]);for(var f=0;f<this.length;f++){var b=this._cloneNode(d);this._wrap(y._toArray(this[f].childNodes),null,this._NodeListCtor).wrapAll(b)}}return this},replaceWith:function(d){d=this._normalize(d,this[0]);for(var f=0,b;b=this[f];f++)this._place(d,b,"before",0<f),b.parentNode.removeChild(b);return this},replaceAll:function(d){d=F(d);for(var f=this._normalize(this,this[0]),b=0,c;c=
d[b];b++)this._place(f,c,"before",0<b),c.parentNode.removeChild(c);return this},clone:function(){for(var d=[],f=0;f<this.length;f++)d.push(this._cloneNode(this[f]));return this._wrap(d,this,this._NodeListCtor)}});l.prototype.html||(l.prototype.html=l.prototype.innerHTML);return l})},"esri/support/requestUtils":function(){define(["dojo/_base/Deferred","dojo/_base/url","../config","../urlUtils"],function(F,y,a,u){function n(r){r=new y(r);return r.scheme+"://"+r.authority}var t=a.defaults.io;return{registerNoCorsDomains:function(r){t.crossOriginNoCorsDomains||
(t.crossOriginNoCorsDomains={});for(var l=t.crossOriginNoCorsDomains,d=0;d<r.length;d++){var f=r[d];f=f.toLowerCase();/^https?:\/\//.test(f)?l[n(f)]=0:(l[n("http://"+f)]=0,l[n("https://"+f)]=0)}},isNoCorsRequestRequired:function(r){var l=t.crossOriginNoCorsDomains;return l?(r=n(r),r=r.toLowerCase(),!u.hasSameOrigin(r,window.location.origin)&&l[r]<Date.now()-36E5):!1},sendNoCorsRequest:function(r,l){var d=new F,f=t.crossOriginNoCorsDomains;f&&(f[n(r).toLowerCase()]=Date.now());f=u.urlToObject(r);r=
f.path;if(f.query&&"json"===f.query.f||l&&"json"===l.f)r+="?f\x3djson";fetch(r,{mode:"no-cors",credentials:"include"}).then(d.resolve,d.resolve);return d}}})},"esri/layers/support/webglUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","../../kernel"],function(F,y,a,u){var n=!1,t=a("esri-webgl-max-contexts");t=null!=t?t:a("esri-mobile")?8:16;var r={isWebGLSupported:function(){return!!n},isWebGLEnabled:function(){return this.isWebGLSupported()&&!!a("esri-featurelayer-webgl")},
createCanvas:function(l,d){var f=document.createElement("canvas");f.style.width=l+"px";f.style.height=d+"px";return f},createWebGLContext:function(l){var d;y.some(["webgl","experimental-webgl","webkit-3d","moz-webgl"],function(f){try{d=l.getContext?l.getContext(f):null}catch(b){d=null}return!!d});return d},_contextOwners:[],isContextAvailable:function(){return-1===t||0<t&&r._contextOwners.length<t},acquireContext:function(l){return-1!==y.indexOf(r._contextOwners,l)?!0:r.isContextAvailable()?(r._contextOwners.push(l),
!0):!1},releaseContext:function(l){l=y.indexOf(r._contextOwners,l);-1!==l&&r._contextOwners.splice(l,1)}};n=r.createWebGLContext(r.createCanvas());a("extend-esri")&&F.setObject("layers.support.webglUtils",r,u);return r})},"esri/layers/support/WebGLSurface":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","../../kernel"],function(F,y,a,u,n){F=F(null,{map:null,node:null,renderers:null,constructor:function(t){y.mixin(this,t);this.renderers=[]},destroy:function(){a.forEach(this.renderers,
function(t){t.destroy()});this.renderers=null},getEventSource:function(){return this.node},createRenderer:function(t,r,l,d){t=new t({surface:this,width:r,height:l,map:this.map,layer:d});this.renderers.push(t);return t},destroyRenderer:function(t){var r=a.indexOf(this.renderers,t);-1<r&&(t.destroy(),this.renderers.splice(r,1))},_createNode:function(){var t=document.createElement("div");t.style.pointerEvents="auto";t.style.position="absolute";return t}});u("extend-esri")&&y.setObject("layers.support.WebGLSurface",
F,n);return F})},"esri/domUtils":function(){define(["./kernel","dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(F,y,a,u,n){var t={show:function(r){if(r=t.getNode(r))r.style.display="block"},getNode:function(r){return r&&r.domNode||r},hide:function(r){if(r=t.getNode(r))r.style.display="none"},toggle:function(r){if(r=t.getNode(r))r.style.display="none"===r.style.display?"block":"none"},documentBox:8>=n("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:
{w:window.innerWidth,h:window.innerHeight},setScrollable:function(r){if(r=this.getNode(r)){var l=0,d=0,f=0,b=0,c=0,g=0;return[y.connect(r,"ontouchstart",function(e){l=e.touches[0].screenX;d=e.touches[0].screenY;f=r.scrollWidth;b=r.scrollHeight;c=r.clientWidth;g=r.clientHeight}),y.connect(r,"ontouchmove",function(e){e.preventDefault();var h=r.firstChild;h instanceof Text&&(h=r.childNodes[1]);var k=h._currentX||0,m=h._currentY||0;k+=e.touches[0].screenX-l;0<k?k=0:0>k&&Math.abs(k)+c>f&&(k=-1*(f-c));
h._currentX=k;m+=e.touches[0].screenY-d;0<m?m=0:0>m&&Math.abs(m)+g>b&&(m=-1*(b-g));h._currentY=m;u.set(h,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+k+"px, "+m+"px)"});l=e.touches[0].screenX;d=e.touches[0].screenY})]}}};n("extend-esri")&&a.mixin(F,t);return t})},"esri/symbols/MarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(F,y,a,u,n,t){F=F(t,{declaredClass:"esri.symbol.MarkerSymbol",
angle:0,xoffset:0,yoffset:0,size:12,constructor:function(r){r&&y.isObject(r)&&(this.size="auto"===this.size?this.size:u.pt2px(this.size),this.xoffset=u.pt2px(this.xoffset),this.yoffset=u.pt2px(this.yoffset),this.angle&&(this.angle*=-1))},setAngle:function(r){this.angle=r;return this},setSize:function(r){this.size=r;return this},setOffset:function(r,l){this.xoffset=r;this.yoffset=l;return this},toJson:function(){var r=u.px2pt(this.size);r=isNaN(r)?void 0:r;var l=u.px2pt(this.xoffset);l=isNaN(l)?void 0:
l;var d=u.px2pt(this.yoffset);d=isNaN(d)?void 0:d;return y.mixin(this.inherited("toJson",arguments),{size:"auto"===this.size?this.size:r,angle:this.angle&&-1*this.angle,xoffset:l,yoffset:d})}});a("extend-esri")&&y.setObject("symbol.MarkerSymbol",F,n);return F})},"esri/symbols/Symbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../Color".split(" "),function(F,y,a,u,n,t){F=F(null,{declaredClass:"esri.symbol.Symbol",color:new t([0,0,0,1]),type:null,constructor:function(r){r&&
y.isObject(r)&&(y.mixin(this,r),this.color&&n.isDefined(this.color[0])&&(this.color=t.toDojoColor(this.color)),(r=this.type)&&0===r.indexOf("esri")&&(this.type={esriSMS:"simplemarkersymbol",esriPMS:"picturemarkersymbol",esriSLS:"simplelinesymbol",esriCLS:"cartographiclinesymbol",esriSFS:"simplefillsymbol",esriPFS:"picturefillsymbol",esriTS:"textsymbol",esriSHD:"shieldlabelsymbol"}[r]))},setColor:function(r){this.color=r;return this},toJson:function(){return{color:t.toJsonColor(this.color)}}});a("extend-esri")&&
y.setObject("symbol.Symbol",F,u);return F})},"esri/symbols/SimpleMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./MarkerSymbol ./SimpleLineSymbol".split(" "),function(F,y,a,u,n,t,r,l,d){var f={STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_TRIANGLE:"triangle",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"},b={style:f.STYLE_CIRCLE,color:[255,255,255,.25],size:12,angle:0,
xoffset:0,yoffset:0};F=F(l,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",triangle:"esriSMSTriangle",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},constructor:function(c,g,e,h){c?y.isString(c)?(this.style=c,g&&(this.size=g),e&&(this.outline=e),h&&(this.color=h)):(this.style=r.valueOf(this._styles,this.style),c.outline&&(this.outline=new d(c.outline))):(y.mixin(this,b),this.size=n.pt2px(this.size),
this.outline=new d(this.outline),this.color=new a(this.color));this.style||(this.style=f.STYLE_CIRCLE)},setStyle:function(c){this.style=c;return this},setPath:function(c){this.path=c;this.setStyle(f.STYLE_PATH);return this},setOutline:function(c){this.outline=c;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return this.color},_setDim:function(c,g,e){this._targetWidth=c;this._targetHeight=g;this._spikeSize=e},getShapeDescriptors:function(){var c,
g=this.style,e=(this.size||n.pt2px(b.size))/2,h=0-e,k=0+e,m=0-e,w=0+e;switch(g){case f.STYLE_CIRCLE:var p={type:"circle",cx:0,cy:0,r:e};var A=this.getFill();if(c=this.getStroke())c.style=c.style||"Solid";break;case f.STYLE_CROSS:p={type:"path",path:"M "+h+",0 L "+k+",0 M 0,"+m+" L 0,"+w+" E"};A=null;c=this.getStroke();break;case f.STYLE_DIAMOND:p={type:"path",path:"M "+h+",0 L 0,"+m+" L "+k+",0 L 0,"+w+" L "+h+",0 Z"};A=this.getFill();c=this.getStroke();break;case f.STYLE_SQUARE:p={type:"path",path:"M "+
h+","+w+" L "+h+","+m+" L "+k+","+m+" L "+k+","+w+" L "+h+","+w+" Z"};A=this.getFill();c=this.getStroke();break;case f.STYLE_TRIANGLE:p={type:"path",path:"M "+h+","+w+" L 0,"+m+" L "+k+","+w+" L "+h+","+w+" Z"};A=this.getFill();c=this.getStroke();break;case f.STYLE_X:p={type:"path",path:"M "+h+","+w+" L "+k+","+m+" M "+h+","+m+" L "+k+","+w+" E"};A=null;c=this.getStroke();break;case f.STYLE_PATH:p={type:"path",path:this.path||""},A=this.getFill(),c=this.getStroke()}return{defaultShape:p,fill:A,stroke:c}},
toJson:function(){var c=this.style,g=this.outline,e=y.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[c]||"esriSMSCircle"});g&&(e.outline=g.toJson());"x"===c||"cross"===c?delete e.color:"target"===c&&(e.style="esriSMSSquare",delete e.color,0<this._targetHeight&&0<this._targetWidth&&(e.size=n.px2pt(Math.max(this._targetHeight,this._targetWidth))));e.path=this.path;return r.fixJson(e)}});y.mixin(F,f);F.defaultProps=b;u("extend-esri")&&(y.setObject("symbol.SimpleMarkerSymbol",
F,t),t.symbol.defaultSimpleMarkerSymbol=b);return F})},"esri/symbols/SimpleLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./LineSymbol".split(" "),function(F,y,a,u,n,t,r,l){var d={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",
STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot"},f={color:[0,0,0,1],style:d.STYLE_SOLID,width:1};F=F(l,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",marker:null,_styles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame",shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",shortdashdot:"esriSLSShortDashDot",shortdashdotdot:"esriSLSShortDashDotDot",
longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},constructor:function(b,c,g){b?y.isString(b)?(this.style=b,c&&(this.color=c),g&&(this.width=g)):(this.style=r.valueOf(this._styles,b.style)||d.STYLE_SOLID,this.marker=b.marker):(y.mixin(this,f),this.color=new a(this.color),this.width=n.pt2px(this.width))},setStyle:function(b){this.style=b;return this},setMarker:function(b){this.marker=b},getStroke:function(){return this.style===d.STYLE_NULL||0===this.width?null:{color:this.color,style:this.style,
width:this.width}},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){return r.fixJson(y.mixin(this.inherited("toJson",arguments),{type:"esriSLS",style:this._styles[this.style],marker:this.marker?y.clone(this.marker):void 0}))}});y.mixin(F,d);F.defaultProps=f;u("extend-esri")&&(y.setObject("symbol.SimpleLineSymbol",F,t),t.symbol.defaultSimpleLineSymbol=f);return F})},"esri/symbols/LineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),
function(F,y,a,u,n,t){F=F(t,{declaredClass:"esri.symbol.LineSymbol",constructor:function(r){y.isObject(r)?this.width=u.pt2px(this.width):this.width=12},setWidth:function(r){this.width=r;return this},toJson:function(){var r=u.px2pt(this.width);r=isNaN(r)?void 0:r;return y.mixin(this.inherited("toJson",arguments),{width:r})}});a("extend-esri")&&y.setObject("symbol.LineSymbol",F,n);return F})},"esri/symbols/utils":function(){define("dojo/_base/lang dojo/_base/window dojo/has dojox/gfx ../kernel ../Color".split(" "),
function(F,y,a,u,n,t){function r(g){g.removeAttribute("marker-start");g.removeAttribute("marker-end");g.removeAttribute("opacity")}function l(g,e){for(var h in e)g.setAttribute(h,e[h])}function d(g,e,h){e="url(#"+e.getAttribute("id")+")";g.rawNode.setAttribute("marker-"+h,e)}var f=-1!==u.renderer.toLowerCase().indexOf("svg"),b=9===a("ie"),c={marker:{markerWidth:"6",markerHeight:"6",markerUnits:"strokeWidth",orient:"auto"},spear:{marker:{end:{viewBox:"0 0 25.4 23.43",refX:"20",refY:"12.76"},start:{viewBox:"-25.4 0 25.4 23.43",
refX:"-20",refY:"12.76"}},path:{common:{d:"M1.63 23.43 L5.37 16.6 L5.37 8.93 L1.63 2.09 L25.4 12.76 L1.63 23.43 Z","stroke-width":"0","fill-opacity":"1"},start:{transform:"matrix(-1, 0, 0, 1, 0, 0)"}}}};u={applyLineMarker:function(g,e,h,k){if(f&&!b){var m=g&&g.rawNode,w=e.marker;h=h||e.color;m&&"none"!==e.style&&h&&w&&"arrow"===w.style&&w.placement?m.getTotalLength&&0===m.getTotalLength()?r(m):(e=-1!==w.placement.indexOf("begin"),w=-1!==w.placement.indexOf("end"),e||w?(m.removeAttribute("stroke-opacity"),
m.setAttribute("opacity",h.a),e?(e=k(g,h,"spear","start"),d(g,e,"start")):m.removeAttribute("marker-start"),w?(h=k(g,h,"spear","end"),d(g,h,"end")):m.removeAttribute("marker-end")):r(m)):m&&r(m)}},createSVGMarker:function(g,e,h,k){h=c[h];var m=y.doc.createElementNS("http://www.w3.org/2000/svg","marker");m.setAttribute("id",e);l(m,c.marker);l(m,h.marker[k]);e=y.doc.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("fill",g.toCss());l(e,h.path.common);l(e,h.path[k]);m.appendChild(e);
return m},create2DColorRamp:function(g){var e=g.surface.createGroup(),h=g.colors,k=g.numClasses;g=(g.size||75)/k;for(var m=0;m<k;m++)for(var w=m*g,p=0;p<k;p++){var A=h[m][p];e.createRect({x:p*g,y:w,width:g,height:g}).setFill(A).setStroke(null)}return e},setSymbolFillColor:function(g,e){if(g)switch(e=e?new t(e):null,g.type){case "simplemarkersymbol":"cross"===g.style||"x"===g.style?g.outline&&g.outline.setColor(e):g.setColor(e);break;case "simplelinesymbol":case "cartographiclinesymbol":case "simplefillsymbol":case "shieldlabelsymbol":case "textsymbol":g.setColor(e)}}};
a("extend-esri")&&F.setObject("renderer.utils",u,n);return u})},"esri/layers/TileInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../SpatialReference ../geometry/Point ./LOD".split(" "),function(F,y,a,u,n,t,r,l,d){F=F(null,{declaredClass:"esri.layers.TileInfo",constructor:function(f){y.mixin(this,f);this.width=this.cols;this.height=this.rows;this._levelToLOD={};f=this.spatialReference;var b=this.origin;f&&(f=this.spatialReference=new r(f.toJson?
f.toJson():f));b&&(this.origin=new l(b.toJson?b.toJson():b),!b.spatialReference&&f&&this.origin.setSpatialReference(new r(f.toJson())));this.lods=a.map(this.lods,function(e){return new d(e)});a.forEach(this.lods,function(e){this._levelToLOD[e.level]=e},this);f=!1;b=this.spatialReference;var c=this.origin;if(b&&c){var g=b._getInfo();g&&(f=b._isWrappable()&&Math.abs(g.origin[0]-c.x)<=g.dx)}this.isWrappable=f;this._initializeUpsampleLevels()},toJson:function(){return t.fixJson({rows:this.rows,cols:this.cols,
dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&a.map(this.lods,function(f){return f.toJson()})})},lodAt:function(f){return this._levelToLOD&&this._levelToLOD[f]||null},updateTileInfo:function(f){var b=this.lodAt(f.level),c=b.resolution*this.width;b=b.resolution*this.height;f.id=f.level+"/"+f.row+"/"+f.col;f.extent||(f.extent=[0,0,0,0]);f.extent[0]=
this.origin.x+f.col*c;f.extent[1]=this.origin.y-(f.row+1)*b;f.extent[2]=f.extent[0]+c;f.extent[3]=f.extent[1]+b},upsampleTile:function(f){var b=this._upsampleLevels[f.level];if(!b||-1===b.parentLevel)return!1;f.level=b.parentLevel;f.row=Math.floor(f.row/b.factor+.001);f.col=Math.floor(f.col/b.factor+.001);this.updateTileInfo(f);return!0},_initializeUpsampleLevels:function(){var f=this.lods;this._upsampleLevels=[];for(var b=null,c=0;c<f.length;c++){var g=f[c];this._upsampleLevels[g.level]={parentLevel:b?
b.level:-1,factor:b?b.resolution/g.resolution:0};b=g}}});u("extend-esri")&&y.setObject("layers.TileInfo",F,n);return F})},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(F,y,a,u,n){F=F(null,{declaredClass:"esri.layers.LOD",constructor:function(t){y.mixin(this,t)},toJson:function(){return n.fixJson({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}});a("extend-esri")&&y.setObject("layers.LOD",
F,u);return F})},"esri/layers/ArcGISTiledMapServiceLayer":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has dojo/io-query ../kernel ../urlUtils ../SpatialReference ./TiledMapServiceLayer ./ArcGISMapServiceLayer ./TileInfo ./TimeInfo ./TileMap".split(" "),function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h){y=y([b,c],{declaredClass:"esri.layers.ArcGISTiledMapServiceLayer",_agolAttrs:"Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" "),
_isReference:!1,_referenceLayers:"Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Reference Ocean/World_Ocean_Reference Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Reference_Overlay Reference/World_Transportation".split(" "),constructor:function(k,m){m&&(m.roundrobin&&(F.deprecated(this.declaredClass+" : Constructor option 'roundrobin' deprecated. Use option 'tileServers'."),m.tileServers=m.roundrobin),this._setTileServers(m.tileServers),
this._loadCallback=m.loadCallback);this._params=a.mixin({},this._url.query);this._initLayer=a.hitch(this,this._initLayer);(k=m&&m.resourceInfo)?this._initLayer(k):(this._load=a.hitch(this,this._load),this._load())},_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},_setTileServers:function(k){if(k&&0<k.length){this.tileServers=k;var m,w=k.length;for(m=0;m<w;m++)k[m]=d.urlToObject(k[m]).path}},_initLayer:function(k,m){this.inherited(arguments);this.resourceInfo=
n.toJson(k);this.tileInfo=new g(k.tileInfo);!1!==this.resampling&&(k.capabilities&&-1<k.capabilities.indexOf("Tilemap")?(this.resampling=!0,this.tileMap=new h(this)):this.resampling=!!k.resampling);!this.spatialReference&&this.tileInfo.spatialReference&&(this.spatialReference=new f(this.tileInfo.spatialReference.toJson()));this.isPNG32="PNG24"===this.tileInfo.format||"PNG32"===this.tileInfo.format;k.timeInfo&&(this.timeInfo=new e(k.timeInfo));k.mensurationCapabilities&&(this.mensurationCapabilities=
k.mensurationCapabilities);var w=this._url.path,p=this._loadCallback,A=d.getProtocolForWebResource(!0),C=w.match(/^https?:\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);C=C&&C[2];if(!this.tileServers)if(k.tileServers)this._setTileServers(k.tileServers);else{var z=-1!==w.search(/^https?:\/\/server\.arcgisonline\.com/i),q=-1!==w.search(/^https?:\/\/services\.arcgisonline\.com/i);(z||q)&&this._setTileServers([w,w.replace(z?/server\.arcgisonline/i:
/services\.arcgisonline/i,z?"services.arcgisonline":"server.arcgisonline")])}if(C){C=C.toLowerCase();for(w=0;w<this._agolAttrs.length;w++)if(z=this._agolAttrs[w],z.toLowerCase()===C){this.hasAttributionData=!0;this.attributionDataUrl=this.attributionDataUrl||A+"//static.arcgis.com/attribution/"+z;break}for(w=0;w<this._referenceLayers.length;w++)if(z=this._referenceLayers[w],z.toLowerCase()===C){this._isReference=!0;break}}this.loaded=!0;this.onLoad(this);p&&(delete this._loadCallback,p(this))},getTileUrl:function(k,
m,w){var p=this.tileServers,A=this._getToken(),C=this._url.query;k=(p?p[m%p.length]:this._url.path)+"/tile/"+k+"/"+m+"/"+w;k=d.upgradeToHTTPS(k);this.resampling&&!this.tileMap&&(k+="?blankTile\x3dfalse");C&&(k=this.resampling&&!this.tileMap?k+("\x26"+r.objectToQuery(C)):k+("?"+r.objectToQuery(C)));!A||C&&C.token||(k+=(-1===k.indexOf("?")?"?":"\x26")+"token\x3d"+A);k=this.addTimestampToURL(k);return d.addProxy(k)}});t("extend-esri")&&a.setObject("layers.ArcGISTiledMapServiceLayer",y,l);return y})},
"esri/layers/TiledMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/url dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/dom dojox/collections/ArrayList dojox/gfx/matrix ../kernel ../config ../sniff ../domUtils ../tileUtils ../geometry/Point ../geometry/Rect ../geometry/Extent ./layer".split(" "),function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m,w,p,A,C){F=F(C,{declaredClass:"esri.layers.TiledMapServiceLayer",constructor:function(z,
q){y.connect(this,"onLoad",this,"_initTiledLayer");this._lowestLevel=(this._displayLevels=q?q.displayLevels:null)?this._displayLevels[0]:0;this.resampling=q?q.resampling:void 0;this._resamplingTolerance=q?q.resamplingTolerance:null;this.exclusionAreas=q?q.exclusionAreas:null;z=a.hitch;this._addImage=z(this,this._addImage);this._tileLoadHandler=z(this,this._tileLoadHandler);this._tileErrorHandler=z(this,this._tileErrorHandler);this._popTile=z(this,this._popTile);this._cleanUpRemovedImages=z(this,this._cleanUpRemovedImages);
this._fireOnUpdateEvent=z(this,this._fireOnUpdateEvent);this._transitionEnd=z(this,this._transitionEnd);this._tileMapCallback=z(this,this._tileMapCallback)},opacity:1,isPNG32:!1,_multiple:1,isResampling:!1,_initTiledLayer:function(){var z=this.tileInfo,q=z.lods;this.resampling=null!=this.resampling?this.resampling:!1;this._tileW=z.width;this._tileH=z.height;var v=this.scales=[],B=this._displayLevels,D=-Infinity,x=Infinity,E=this.fullExtent,G=new w(E.xmin,E.ymax);E=new w(E.xmax,E.ymin);var I=m.getContainingTileCoords,
L,Y=q.length;for(L=0;L<Y;L++){var X=q[L];var fa=I(z,G,X);X.startTileRow=0>fa.row?0:fa.row;X.startTileCol=0>fa.col?0:fa.col;fa=I(z,E,X);X.endTileRow=fa.row;X.endTileCol=fa.col;B&&-1===u.indexOf(B,X.level)||(v[L]=X.scale,D=X.scale>D?X.scale:D,x=X.scale<x?X.scale:x)}-Infinity===D||this._hasMin||this.setMinScale(D);Infinity===x||this._hasMax||this.setMaxScale(x);this.setExclusionAreas(this.exclusionAreas);this._patchIE=6<=h("ie")&&7>h("ie")&&(this.isPNG32||"Mixed"===z.format)},isVisibleAtScale:function(z){return z?
C.prototype._isMapAtVisibleScale.call(this,z,!0):!1},_isMapAtVisibleScale:function(z){var q=this.inherited(arguments,[z,!0]);if(q){var v=this._map;q=this.scales;var B=v.getScale(),D=!1,x=v.width>v.height?v.width:v.height;for(v=0;v<q.length;v++)if(Math.abs(q[v]-B)/q[v]<1/x){D=!0;break}q=D}return q},_setMap:function(z,q,v,B){this.inherited(arguments);this._map=z;var D=this._div=t.create("div",null,q),x=z.__visibleDelta,E=y.connect,G=g._css.names,I={position:"absolute",width:z.width+"px",height:z.height+
"px",overflow:"visible"},L=e.defaults.map.zoomDuration;"css-transforms"===z.navigationMode?(I[G.transform]=g._css.translate(-x.x,-x.y),d.set(D,I),delete I[G.transform],I[G.transition]=G.transformName+" "+L+"ms ease",d.set(this._active=t.create("div",null,D),I),this._active._remove=0,this._passives=[]):(I.left=-x.x+"px",I.top=-x.y+"px",d.set(D,I));this._onResizeHandler_connect=E(z,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=E(this,"onOpacityChange",this,"_opacityChangeHandler");
x=this.tileInfo;E=x.spatialReference;G=E._getInfo();(this._wrap=z.wrapAround180&&E._isWrappable()&&Math.abs(G.origin[0]-x.origin.x)<=G.dx)&&m._addFrameInfo(x,G);this.setExclusionAreas(this.exclusionAreas);this.evaluateSuspension();if(this.suspended&&!z.loaded)var Y=y.connect(z,"onLoad",this,function(){y.disconnect(Y);Y=null;this.setExclusionAreas(this.exclusionAreas);this.evaluateSuspension()});return D},_unsetMap:function(z,q){this.suspended||this._suspendImpl();t.destroy(this._div);this._map=this._div=
null;var v=y.disconnect;v(this._onResizeHandler_connect);v(this._opacityChangeHandler_connect);this.inherited(arguments)},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(){k.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();var z=this._tiles,q=this._tileIds,v=this._loadingList,B,D,x=y.disconnect,E=t.destroy;v&&0<v.count&&(v.forEach(function(I){if(B=z[I])x(B._onload_connect),x(B._onerror_connect),x(B._onabort_connect),
B._onload_connect=B._onerror_connect=B._onabort_connect=null}),v.clear(),this._fireUpdateEnd());this._removeList.clear();for(v=q.length-1;0<=v;v--)(B=(D=q[v])&&z[D])&&E(B);if("css-transforms"===this._map.navigationMode){q=this._active;D=this._passives;this._noDom=0;for(v=D.length-1;0<=v;v--){var G=D[v];G._endHandle&&x(G._endHandle);G._matrix=G._multiply=G._endHandle=null;G._marked=G._remove=0;D.splice(v,1);E(G)}q._matrix=q._multiply=null;q._marked=q._remove=0}this._tileIds=this._tiles=this._tileBounds=
this._ct=this._loadingList=this._removeList=this._standby=null},onResume:function(){this.inherited(arguments);this._tileIds=[];this._tiles=[];this._tileBounds=[];this._ct=null;this._removeList=new b;this._loadingList=new b;k.show(this._div);this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(a.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD)}),0)},_enableDrawConnectors:function(){var z=this._map,q=y.connect;if("css-transforms"===
z.navigationMode){if(this._onScaleHandler_connect=q(z,"onScale",this,this._onScaleHandler),h("esri-mobile")){this._standby=[];var v=this,B=function(){v._noDom=1};this._onPanStartHandler_connect=q(z,"onPanStart",B);this._onZoomStartHandler_connect=q(z,"onZoomStart",B)}}else this._onZoomHandler_connect=q(z,"onZoom",this,"_onZoomHandler");this._onPanHandler_connect=q(z,"onPan",this,"_onPanHandler");this._onExtentChangeHandler_connect=q(z,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var z=
y.disconnect;z(this._onPanHandler_connect);z(this._onZoomHandler_connect);z(this._onScaleHandler_connect);z(this._onExtentChangeHandler_connect);z(this._onPanStartHandler_connect);z(this._onZoomStartHandler_connect);this._onPanHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=this._onExtentChangeHandler_connect=this._onPanStartHandler_connect=this._onZoomStartHandler_connect=null},_onResizeHandler:function(z,q,v){z={width:q+"px",height:v+"px"};q=d.set;q(this._div,z);if("css-transforms"===
this._map.navigationMode)for(this._active&&q(this._active,z),v=this._passives.length-1;0<=v;v--)q(this._passives[v],z)},_onExtentChangeHandler:function(z,q,v,B){q=this._map;var D=this._standby;clearTimeout(this._wakeTimer);this._wakeTimer=null;if(!q._isPanningOrZooming()){if("css-transforms"===q.navigationMode){if(v)for(B=this._passives.length-1;0<=B;B--){var x=this._passives[B];d.set(x,g._css.names.transition,"none");x._marked?(this._passives.splice(B,1),x.parentNode&&x.parentNode.removeChild(x),
t.destroy(x)):0<x.childNodes.length&&(x._multiply=x._multiply?c.multiply(x._matrix,x._multiply):x._matrix)}this._noDom=0;if(D&&D.length)for(B=D.length-1;0<=B;B--)x=D[B],d.set(x,"visibility","inherit"),this._popTile(x),D.splice(B,1)}this._fireUpdateStart();this._rrIndex=0;B=m.getCandidateTileInfo(q,this.tileInfo,z);z=q.__visibleDelta;if(!this._ct||B.lod.level!==this._ct.lod.level||v){x=B&&this._ct&&B.lod.level!==this._ct.lod.level;this._ct=B;var E=this._tiles,G=this._tileIds,I=this._tileBounds,L=this._removeList,
Y=G.length;this._cleanUpRemovedImages();for(B=0;B<Y;B++){D=G[B];var X=E[D];I[D]=G[B]=null;"css-transforms"===q.navigationMode&&x&&X.parentNode&&q.fadeOnZoom&&(X._fadeOut=x,X.parentNode._remove++);L.add(X)}v&&(this._tileIds=[],this._tiles=[],this._tileBounds=[])}B=z.x;v=z.y;"css-transforms"===q.navigationMode?(D={},D[g._css.names.transform]=g._css.translate(B,v),d.set(this._div,D)):d.set(this._div,{left:B+"px",top:v+"px"});this.__coords_dx=B;this.__coords_dy=v;this._updateImages(new p(0,0,z.width,
z.height));0===this._loadingList.count?(this._cleanUpRemovedImages(),this.onUpdate(),this._fireUpdateEnd()):this._fireOnUpdate=!0;v=this._tileW;E=this._tileH;z=new p(-z.x,-z.y,z.width,z.height);for(B=this._tileIds.length-1;0<=B;B--)(D=this._tileIds[B])?(x=this._tiles[D],G=l.getMarginBox(x),G=new p(G.l,G.t,v,E),"css-transforms"===q.navigationMode&&(G.x=x._left,G.y=x._top),z.intersects(G)?this._tileBounds[D]=G:(this._loadingList.contains(D)&&this._popTile(x),t.destroy(x),this._tileIds.splice(B,1),delete this._tileBounds[D],
delete this._tiles[D])):(this._tileIds.splice(B,1),delete this._tileBounds[D],delete this._tiles[D])}},_onPanHandler:function(z,q){z=this._map;q=z.__visibleDelta.offset(q.x,q.y);this.__coords_dx=this.__coords_dy=0;"css-transforms"===z.navigationMode?(z={},z[g._css.names.transform]=g._css.translate(q.x,q.y),d.set(this._div,z),h("esri-mobile")||this._updateImages({x:-q.x,y:-q.y,width:q.width,height:q.height})):(d.set(this._div,{left:q.x+"px",top:q.y+"px"}),this._updateImages({x:-q.x,y:-q.y,width:q.width,
height:q.height}));0<this._loadingList.count&&(this._fireUpdateStart(),this._fireOnUpdate=!0)},_onScaleHandler:function(z,q){var v,B={},D=g._css.names,x=this._map,E=e.defaults.map.zoomDuration;for(v=this._passives.length-1;0<=v;v--){var G=this._passives[v];0===G.childNodes.length?(this._passives.splice(v,1),t.destroy(G)):("none"===G.style[D.transition]&&d.set(G,D.transition,D.transformName+" "+E+"ms ease"),d.set(G,D.transition,q?"none":D.transformName+" "+E+"ms ease"),G._matrix=z,B[D.transform]=g._css.matrix(G._multiply?
c.multiply(z,G._multiply):z),d.set(G,B))}this._active&&0===this._active.childNodes.length||(d.set(this._active,D.transition,q?"none":D.transformName+" "+E+"ms ease"),this._active._matrix=z,B[D.transform]=g._css.matrix(this._active._matrix),d.set(this._active,B),this._passives.push(this._active),B={position:"absolute",width:x.width+"px",height:x.height+"px",overflow:"visible"},B[D.transition]=D.transformName+" "+E+"ms ease",d.set(this._active=t.create("div",null,this._div),B),this._active._remove=
0,x.fadeOnZoom&&t.place(this._active,this._div,"first"))},_onZoomHandler:function(z,q,v){z=l.getMarginBox(this._div);v=v.offset(-z.l,-z.t);this._previousScale&&1!==q||(this._previousScale=1);var B,D=this._tileW*q,x=this._tileH*q,E=this._tileBounds,G=this._tiles,I=this._previousScale,L=this._multiple,Y=d.set,X,fa;if((z=h("ie"))&&8>z)u.forEach(this._tileIds,function(wa){fa="";B=E[wa];X=G[wa].style.margin.split(" ");u.forEach(X,function(ja){""!==fa&&(fa+=" ");ja=parseFloat(ja);fa+=ja/I*q+"px"});Y(G[wa],
{left:B.x-(D-B.width)*(v.x-B.x)/B.width+"px",top:B.y-(x-B.height)*(v.y-B.y)/B.height+"px",margin:1!==L&&-1===fa.indexOf("NaN")?fa:"",zoom:q})});else{var sa=D*L,T=x*L,ka,ma;u.forEach(this._tileIds,function(wa){fa="";B=E[wa];ka=B.x-(D-B.width)*(v.x-B.x)/B.width;ma=B.y-(x-B.height)*(v.y-B.y)/B.height;X=G[wa].style.margin.split(" ");u.forEach(X,function(ja){""!==fa&&(fa+=" ");ja=parseFloat(ja);fa+=ja/I*q+"px"});Y(G[wa],{left:ka+"px",top:ma+"px",margin:1!==L&&-1===fa.indexOf("NaN")?fa:"",width:sa+"px",
height:T+"px"})})}this._previousScale=q},_updateImages:function(z){if(this._ct){var q=this._tileW,v=this._tileH,B=this._ct;var D=B.lod;B=B.tile;var x=B.offsets,E=B.coords,G=E.row;E=E.col;var I=D.level,L=this.opacity,Y=this._tileIds,X=this._loadingList,fa=this._addImage,sa=this._map.id,T=this.id,ka=z.x,ma=z.y,wa=D.startTileRow,ja=D.endTileRow,ua=D.startTileCol,Ba=D.endTileCol,M=u.indexOf,Z=x.x-this.__coords_dx,ia=x.y-this.__coords_dy;var qa=q-Z+-z.x;var ya=v-ia+-z.y;var Ca=Math.ceil;qa=0<qa?qa%q:q-
Math.abs(qa)%q;ya=0<ya?ya%v:v-Math.abs(ya)%v;ka=0<ka?Math.floor((ka+Z)/q):Ca((ka-(q-Z))/q);ma=0<ma?Math.floor((ma+ia)/v):Ca((ma-(v-ia))/v);ia=ka+Ca((z.width-qa)/q);z=ma+Ca((z.height-ya)/v);if(this._wrap){var Ia=D._frameInfo;var Oa=Ia[0];var la=Ia[1];Ia=Ia[2]}for(ya=ka;ya<=ia;ya++)for(ka=ma;ka<=z;ka++)Ca=G+ka,qa=E+ya,this._wrap&&(qa<la?(qa%=Oa,qa=qa<la?qa+Oa:qa):qa>Ia&&(qa%=Oa)),!this._isExcluded(I,Ca,qa)&&Ca>=wa&&Ca<=ja&&qa>=ua&&qa<=Ba&&(D=sa+"_"+T+"_tile_"+I+"_"+ka+"_"+ya,-1===M(Y,D)&&(X.add(D),
Y.push(D),fa(I,ka,Ca,ya,qa,D,q,v,L,B,x)))}},_cleanUpRemovedImages:function(){var z=this._removeList,q=t.destroy,v,B=g._css.names;z.forEach(function(x){x._fadeOut||(x.style.filter="",x.style.zoom=1,q(x))});if("css-transforms"===this._map.navigationMode)for(v=this._passives.length-1;0<=v;v--){var D=this._passives[v];0===D.childNodes.length?(this._passives.splice(v,1),q(D)):this._map.fadeOnZoom&&!D._marked&&D._remove===D.childNodes.length&&(D._marked=1,2048>g._css.getScaleFromMatrix(d.get(D,B.transform))?
(d.set(D,B.transition,"opacity 0.65s"),d.set(D,"opacity",0),y.disconnect(D._endHandle),D._endHandle=y.connect(D,B.endEvent,this._transitionEnd)):this._transitionEnd({propertyName:"opacity",target:D}))}z.clear()},_transitionEnd:function(z){var q=z.target;"opacity"===z.propertyName&&(y.disconnect(q._endHandle),q._endHandle=null,z=u.indexOf(this._passives,q),-1<z&&this._passives.splice(z,1),q.parentNode&&q.parentNode.removeChild(q),t.destroy(q))},_addImage:function(z,q,v,B,D,x,E,G,I,L,Y){if(this._patchIE)L=
this._tiles[x]=t.create("div"),L.id=x,r.add(L,"layerTile"),d.set(L,{left:E*B-Y.x+"px",top:G*q-Y.y+"px",width:E+"px",height:G+"px",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+this.getTileUrl(z,v,D)+"', sizingMethod\x3d'scale')"}),1>I&&d.set(L,"opacity",I),z=L.appendChild(t.create("div")),d.set(z,{opacity:0,width:E+"px",height:G+"px"}),this._div.appendChild(L),L=null,this._loadingList.remove(x),this._fireOnUpdateEvent();else{L=this._tiles[x]=t.create("img");var X=y.connect;
L.id=x;L._uid=z+"_"+v+"_"+D;L.alt="";r.add(L,"layerTile");B=E*B-Y.x;Y=G*q-Y.y;q=this._map;var fa=g._css.names;E={width:E+"px",height:G+"px",visibility:"hidden"};"css-transforms"===q.navigationMode?(E[fa.transform]=g._css.translate(B,Y),d.set(L,E),L._left=B,L._top=Y):(E.left=B+"px",E.top=Y+"px",d.set(L,E));1>I&&d.set(L,"opacity",I);L._onload_connect=X(L,"onload",this,"_tileLoadHandler");L._onerror_connect=X(L,"onerror",a.hitch(this,"_tileErrorHandler",v,D));L._onabort_connect=X(L,"onabort",this,"_tileAbortHandler");
if(this.tileMap)this.tileMap.getTile(z,v,D,x,this._tileMapCallback);else if(x=this.getTileUrl(z,v,D,L))this._failedRequests&&this._failedRequests[x]?(d.set(L,this._failedRequests[x].css),L.src=this._failedRequests[x].src,this._multiple=parseInt(this._failedRequests[x].css.width)/this._tileW,this.isResampling=1!==this._multiple):(this._multiple=1,this.isResampling=!1,L.src=x);"css-transforms"===q.navigationMode?this._active.appendChild(L):this._div.appendChild(L);L=null}},_tileMapCallback:function(z,
q){if(!this.suspended){var v=this._tiles[q.id]||f.byId(q.id);var B=q.level+"_"+q.row+"_"+q.col;v&&v._uid===B?(this._multiple=2*(q.level-z.level)||1,this.isResampling=1!==this._multiple,q=this.tileMap.style(z,q),d.set(v,q),v.src=this.getTileUrl(z.level,z.row,z.col)):this._popTile(q)}},getTileUrl:function(z,q,v){},refresh:function(){this.suspended||(this._refreshTS=Date.now(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},_popTile:function(z){var q=y.disconnect;q(z._onload_connect);
q(z._onerror_connect);q(z._onabort_connect);z._onload_connect=z._onerror_connect=z._onabort_connect=null;this._loadingList.remove(z.id);this._fireOnUpdateEvent()},_tileLoadHandler:function(z){z=z.currentTarget;this._noDom?this._standby.push(z):(d.set(z,"visibility","inherit"),this._popTile(z))},_tileAbortHandler:function(z){z=z.currentTarget;this.onError(Error("Unable to load tile: "+z.src));d.set(z,"visibility","hidden");this._popTile(z)},_tileErrorHandler:function(z,q,v){v=v.currentTarget;var B=
!0;if(this.tileMap||!this.resampling)B=!1;else{var D=new n(v.src);D=D.path.split("/");D=parseInt(D[D.length-3]);var x=this._ct.lod.level-D+1;this._multiple=Math.pow(2,x);if(D===this._lowestLevel||0===this._resamplingTolerance||this._resamplingTolerance&&Math.log(this._multiple)/Math.LN2>this._resamplingTolerance)B=!1}B?(this.isResampling=!0,this._resample(v,z,q)):(this.onError(Error("Unable to load tile: "+v.src)),d.set(v,"visibility","hidden"),this._popTile(v))},_resample:function(z,q,v){var B=(new n(z.src)).path.split("/"),
D=this._multiple,x=parseInt(B[B.length-3])-1,E=parseInt(q/D),G=parseInt(v/D);B=v%D;var I=q%D;E=this.getTileUrl(x,E,G);q=this.getTileUrl(x+Math.log(D)/Math.LN2,q,v);D={width:this._tileW*D+"px",height:this._tileH*D+"px",margin:"-"+this._tileW*I+"px 0 0 -"+(this._tileH*B+"px")};this._failedRequests||(this._failedRequests={});this._failedRequests[q]={src:E,css:D};d.set(z,D);h("chrome")&&z.setAttribute("src",null);z.src=E},_fireOnUpdateEvent:function(){0===this._loadingList.count&&(this._cleanUpRemovedImages(),
this._fireOnUpdate&&(this._fireOnUpdate=!1,this.onUpdate(),this._fireUpdateEnd()))},setOpacity:function(z){if(this.opacity!=z)this.onOpacityChange(this.opacity=z)},onOpacityChange:function(){},_opacityChangeHandler:function(z){var q=d.set,v,B;if("css-transforms"===this._map.navigationMode){if(this._active){var D=this._active.childNodes;for(v=D.length-1;0<=v;v--)q(D[v],"opacity",z)}for(v=this._passives.length-1;0<=v;v--)for(D=this._passives[v].childNodes,B=D.length-1;0<=B;B--)q(D[B],"opacity",z)}else for(D=
this._div.childNodes,v=D.length-1;0<=v;v--)q(D[v],"opacity",z)},setExclusionAreas:function(z){this.exclusionAreas=z;if(this.loaded&&this._map&&this._map.loaded){var q=this._map.spatialReference,v=this.tileInfo,B=v.origin,D=v.lods,x=D[0].level,E=D[D.length-1].level,G,I,L;if(this.exclusionAreas&&this.exclusionAreas.length){this._exclusionsPerZoom=[];var Y=0;for(G=z.length;Y<G;Y++){var X=z[Y];if((L=X.geometry)&&"extent"===L.type&&L.xmin<=L.xmax&&L.ymin<=L.ymax){if(!q.equals(L.spatialReference))if(q._canProject(L.spatialReference)){if(q.isWebMercator()){var fa=
w.lngLatToXY(L.xmin,L.ymin);L=w.lngLatToXY(L.xmax,L.ymax)}else fa=w.xyToLngLat(L.xmin,L.ymin,!0),L=w.xyToLngLat(L.xmax,L.ymax,!0);L=new A(fa[0],fa[1],L[0],L[1],q)}else continue;var sa=-1;if(X.minZoom&&-1!==X.minZoom)sa=X.minZoom;else if(X.minScale&&-1!==X.minScale){var T=0;for(I=D.length;T<I;T++)if(D[T].scale<=X.minScale){sa=D[T].level;break}}sa=Math.max(sa,x);fa=-1;if(X.maxZoom&&-1!==X.maxZoom)fa=X.maxZoom;else if(X.maxScale&&-1!==X.maxScale)for(T=0,I=D.length;T<I;T++)if(D[T].scale<X.maxScale){fa=
D[T-1].level;break}else if(D[T].scale===X.maxScale){fa=D[T].level;break}fa=-1===fa?E:Math.min(fa,E);for(X=sa;X<=fa;X++){T=0;for(I=D.length;T<I;T++)if(D[T].level===X){var ka=D[T];break}ka&&(this._exclusionsPerZoom[X]||(this._exclusionsPerZoom[X]=[]),T=1/ka.resolution/v.rows,I=1/ka.resolution/v.cols,this._exclusionsPerZoom[X].push({rowFrom:Math.floor((B.y-L.ymax)*T),rowTo:Math.ceil((B.y-L.ymin)*T),colFrom:Math.floor((L.xmin-B.x)*I),colTo:Math.ceil((L.xmax-B.x)*I)}))}}}}else this._exclusionsPerZoom=
null;this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD)}},_isExcluded:function(z,q,v){var B;if(!this._exclusionsPerZoom)return!1;var D=this._exclusionsPerZoom[z];if(!D)return!1;var x=0;for(B=D.length;x<B;x++)if(z=D[x],q>=z.rowFrom&&q<z.rowTo&&v>=z.colFrom&&v<z.colTo)return!0;return!1}});h("extend-esri")&&a.setObject("layers.TiledMapServiceLayer",F,g);return F})},"dojox/collections/ArrayList":function(){define(["dojo/_base/kernel","dojo/_base/array","./_base"],function(F,
y,a){a.ArrayList=function(u){var n=[];u&&(n=n.concat(u));this.count=n.length;this.add=function(t){n.push(t);this.count=n.length};this.addRange=function(t){if(t.getIterator)for(t=t.getIterator();!t.atEnd();)this.add(t.get());else for(var r=0;r<t.length;r++)n.push(t[r]);this.count=n.length};this.clear=function(){n.splice(0,n.length);this.count=0};this.clone=function(){return new a.ArrayList(n)};this.contains=function(t){for(var r=0;r<n.length;r++)if(n[r]==t)return!0;return!1};this.forEach=function(t,
r){F.forEach(n,t,r)};this.getIterator=function(){return new a.Iterator(n)};this.indexOf=function(t){for(var r=0;r<n.length;r++)if(n[r]==t)return r;return-1};this.insert=function(t,r){n.splice(t,0,r);this.count=n.length};this.item=function(t){return n[t]};this.remove=function(t){t=this.indexOf(t);0<=t&&n.splice(t,1);this.count=n.length};this.removeAt=function(t){n.splice(t,1);this.count=n.length};this.reverse=function(){n.reverse()};this.sort=function(t){t?n.sort(t):n.sort()};this.setByIndex=function(t,
r){n[t]=r;this.count=n.length};this.toArray=function(){return[].concat(n)};this.toString=function(t){return n.join(t||",")}};return a.ArrayList})},"dojox/collections/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(F,y,a){F=y.getObject("dojox.collections",!0);F.DictionaryEntry=function(u,n){this.key=u;this.value=n;this.valueOf=function(){return this.value};this.toString=function(){return String(this.value)}};F.Iterator=function(u){var n=0;this.element=u[n]||
null;this.atEnd=function(){return n>=u.length};this.get=function(){return this.atEnd()?null:this.element=u[n++]};this.map=function(t,r){return a.map(u,t,r)};this.reset=function(){n=0;this.element=u[n]}};F.DictionaryIterator=function(u){var n=[],t={},r;for(r in u)t[r]||n.push(u[r]);var l=0;this.element=n[l]||null;this.atEnd=function(){return l>=n.length};this.get=function(){return this.atEnd()?null:this.element=n[l++]};this.map=function(d,f){return a.map(n,d,f)};this.reset=function(){l=0;this.element=
n[l]}};return F})},"esri/layers/ArcGISMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../request ../SpatialReference ../geometry/Extent ./LayerInfo".split(" "),function(F,y,a,u,n,t,r,l,d,f){F=F(null,{declaredClass:"esri.layers.ArcGISMapServiceLayer",infoTemplates:null,constructor:function(b,c){this.layerInfos=[];c&&(this.infoTemplates=c.infoTemplates||null);b=this._params={};if(c=this._url.query?this._url.query.token:null)b.token=
c},setInfoTemplates:function(b){this.infoTemplates=b},_load:function(){r({url:this._url.path,content:y.mixin({f:"json"},this._params),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler})},spatialReference:null,initialExtent:null,fullExtent:null,description:null,units:null,_initLayer:function(b,c){try{this._findCredential();(this.credential&&this.credential.ssl||b&&b._ssl)&&this._useSSL();this.description=b.description;this.copyright=b.copyrightText;this.spatialReference=b.spatialReference&&
new l(b.spatialReference);this.initialExtent=b.initialExtent&&new d(b.initialExtent);this.fullExtent=b.fullExtent&&new d(b.fullExtent);this.units=b.units;this.maxRecordCount=b.maxRecordCount;this.maxImageHeight=b.maxImageHeight;this.maxImageWidth=b.maxImageWidth;this.supportsDynamicLayers=b.supportsDynamicLayers;var g=this.layerInfos=[],e=b.layers,h=this._defaultVisibleLayers=[];a.forEach(e,function(k,m){g[m]=new f(k);k.defaultVisibility&&h.push(k.id)});this.visibleLayers||(this.visibleLayers=h);
this.version=b.currentVersion;this.cimVersion=b.cimVersion;this.version||(this.version="capabilities"in b||"tables"in b?10:"supportedImageFormatTypes"in b?9.31:9.3);this.capabilities=b.capabilities;t.isDefined(b.minScale)&&!this._hasMin&&this.setMinScale(b.minScale);t.isDefined(b.maxScale)&&!this._hasMax&&this.setMaxScale(b.maxScale)}catch(k){this._errorHandler(k)}}});u("extend-esri")&&y.setObject("layers.ArcGISMapServiceLayer",F,n);return F})},"esri/layers/LayerInfo":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../lang"],function(F,y,a,u,n){F=F(null,{declaredClass:"esri.layers.LayerInfo",constructor:function(t){y.mixin(this,t)},toJson:function(){return n.fixJson({defaultVisibility:this.defaultVisibility,id:this.id,maxScale:this.maxScale,minScale:this.minScale,name:this.name,parentLayerId:this.parentLayerId,subLayerIds:this.subLayerIds})}});a("extend-esri")&&y.setObject("layers.LayerInfo",F,u);return F})},"esri/layers/TimeInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../TimeExtent ./TimeReference ./LayerTimeOptions".split(" "),
function(F,y,a,u,n,t,r){F=F(null,{declaredClass:"esri.layers.TimeInfo",constructor:function(l){null!==l&&(y.mixin(this,l),l.exportOptions&&(this.exportOptions=new r(l.exportOptions)),this.timeExtent=null,l.timeExtent&&2===l.timeExtent.length&&(this.timeExtent=new n(l.timeExtent)),this.timeReference=new t(l.timeReference))}});y.mixin(F,{UNIT_CENTURIES:"esriTimeUnitsCenturies",UNIT_DAYS:"esriTimeUnitsDays",UNIT_DECADES:"esriTimeUnitsDecades",UNIT_HOURS:"esriTimeUnitsHours",UNIT_MILLISECONDS:"esriTimeUnitsMilliseconds",
UNIT_MINUTES:"esriTimeUnitsMinutes",UNIT_MONTHS:"esriTimeUnitsMonths",UNIT_SECONDS:"esriTimeUnitsSeconds",UNIT_UNKNOWN:"esriTimeUnitsUnknown",UNIT_WEEKS:"esriTimeUnitsWeeks",UNIT_YEARS:"esriTimeUnitsYears"});a("extend-esri")&&y.setObject("layers.TimeInfo",F,u);return F})},"esri/TimeExtent":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel"],function(F,y,a,u){var n=F(null,{declaredClass:"esri.TimeExtent",constructor:function(t){if(1<arguments.length)this._create(arguments[0],
arguments[1]);else if(t)if(y.isArray(t)){var r=t[0],l=t[1];this.startTime=null===r||"null"===r?null:new Date(r);this.endTime=null===l||"null"===l?null:new Date(l)}else t instanceof Date&&this._create(t,null)},offset:function(t,r){var l=new n,d=this.startTime,f=this.endTime;d&&(l.startTime=this._getOffsettedDate(d,t,r));f&&(l.endTime=this._getOffsettedDate(f,t,r));return l},intersection:function(t){return this._intersection(this,t)},toJson:function(){var t=[],r=this.startTime;t.push(r?r.getTime():
"null");r=this.endTime;t.push(r?r.getTime():"null");return t},_create:function(t,r){this.startTime=t?new Date(t.getTime()):null;this.endTime=r?new Date(r.getTime()):null},_refData:{esriTimeUnitsMilliseconds:{getter:"getUTCMilliseconds",setter:"setUTCMilliseconds",multiplier:1},esriTimeUnitsSeconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},esriTimeUnitsMinutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},esriTimeUnitsHours:{getter:"getUTCHours",setter:"setUTCHours",
multiplier:1},esriTimeUnitsDays:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},esriTimeUnitsWeeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},esriTimeUnitsMonths:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},esriTimeUnitsYears:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},esriTimeUnitsDecades:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},esriTimeUnitsCenturies:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}},_intersection:function(t,
r){if(t&&r){var l=t.startTime;t=t.endTime;var d=r.startTime;r=r.endTime;l=l?l.getTime():-Infinity;d=d?d.getTime():-Infinity;t=t?t.getTime():Infinity;r=r?r.getTime():Infinity;var f,b;d>=l&&d<=t?f=d:l>=d&&l<=r&&(f=l);t>=d&&t<=r?b=t:r>=l&&r<=t&&(b=r);if(isNaN(f)||isNaN(b))return null;l=new n;l.startTime=-Infinity===f?null:new Date(f);l.endTime=Infinity===b?null:new Date(b);return l}return null},_getOffsettedDate:function(t,r,l){var d=this._refData;t=new Date(t.getTime());r&&l&&(d=d[l],t[d.setter](t[d.getter]()+
r*d.multiplier));return t}});a("extend-esri")&&(u.TimeExtent=n);return n})},"esri/layers/TimeReference":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(F,y,a,u){F=F(null,{declaredClass:"esri.layers.TimeReference",constructor:function(n){n&&y.mixin(this,n)}});a("extend-esri")&&y.setObject("layers.TimeReference",F,u);return F})},"esri/layers/LayerTimeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(F,
y,a,u,n){F=F(null,{declaredClass:"esri.layers.LayerTimeOptions",constructor:function(t){t&&y.mixin(this,t)},toJson:function(){return n.fixJson({timeDataCumulative:this.timeDataCumulative,timeOffset:this.timeOffset,timeOffsetUnits:this.timeOffsetUnits,useTime:this.useTime})}});a("extend-esri")&&y.setObject("layers.LayerTimeOptions",F,u);return F})},"esri/layers/TileMap":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/io-query ../request ../urlUtils".split(" "),
function(F,y,a,u,n,t,r){return F(null,{declaredClass:"esri.layers.TileMap",constructor:function(l){this.layer=l;this._tileMaps={}},getTile:function(l,d,f,b,c){l={id:b,level:l,row:d,col:f};d=this._getResamplingBudget();0<d?this._process({tile:l,requestedTile:l,callback:c,resamplingBudget:d}):(c||this.callback).call(this,l,l)},statusOf:function(l,d,f){var b=this._getResamplingBudget();l={level:l,row:d,col:f};if(0===b)return 1;for(;0<=b;){d=this._tileToTileMap(l);if(!this._tileMaps[d.uid])return-1;d=
this._tileMaps[d.uid];if(!d.promise.isFulfilled())return-1;if(this._isTileAvailable(l,d))return 1;l=this._parentTile(l);if(!l)break;b--}return 0},style:function(l,d){if(l.level!==d.level||l.row!==d.row||l.col!==d.col){var f=this.layer.tileInfo,b=f.lods,c=f.cols;f=f.rows;for(var g,e,h=b.length-1;!g||!e;)g||b[h].level!==l.level||(g=b[h]),e||b[h].level!==d.level||(e=b[h]),h--;b=Math.round(g.resolution/e.resolution);l=d.col%b*-1*c;d=d.row%b*-1*f;b={width:c*b+"px",height:f*b+"px",margin:d+"px 0 0 "+l+
"px","will-change":"transform"};l=0===l?0:-1*l;d=0===d?0:-1*d;b.clip="rect("+d+"px,"+(l+c)+"px,"+(d+f)+"px,"+l+"px)";return b}},_process:function(l){var d=l.tile,f=this._tileToTileMap(d),b=this._parentTile(d);this._getTileMap(f).then(y.hitch(this,function(c){f=c;this._isTileAvailable(d,f)?(l.callback||this.callback).call(this,d,l.requestedTile):0<l.resamplingBudget&&b?(l.resamplingBudget--,l.tile=b,this._process(l)):(l.callback||this.callback).call(this,l.requestedTile,l.requestedTile)}),y.hitch(this,
function(){(l.callback||this.callback).call(this,l.requestedTile,l.requestedTile)}))},_getTileMap:function(l){var d,f,b=null;if(this._tileMaps[l.uid]){l=this._tileMaps[l.uid];var c=l.promise}else{this._tileMaps[l.uid]=l;var g=new u;t({url:this._getTileMapUrl(l.level,l.row,l.col),handleAs:"json",content:{f:"json"},callbackParamName:"callback",timeout:3E3,load:function(e){y.mixin(l,e);if(l.data&&0<l.data.length){f=l.data.length;if(1===f)b=l.data[0];else for(b=l.data[0],d=1;d<f;d++)if(l.data[d]!==b){b=
null;break}null!==b&&(delete l.data,l.value=b);null==l.valid&&(l.valid=!0)}g.resolve(l)},error:function(e){e&&422===e.code?(y.mixin(l,{location:{top:l.row,left:l.col,width:8,height:8},valid:!0,value:0}),g.resolve(l)):g.reject()}});c=l.promise=g.promise}return c},_parentTile:function(l){var d=this.layer.tileInfo.lods,f,b,c=null;a.some(d,function(g,e){return l.level===g.level?(f=g,b=e,!0):!1});0<b&&(d=d[b-1],c={id:l.id,level:d.level,row:Math.floor(l.row*f.resolution/d.resolution+.01),col:Math.floor(l.col*
f.resolution/d.resolution+.01)});return c},_tileToTileMap:function(l){var d=8*Math.floor(l.row/8),f=8*Math.floor(l.col/8);return{uid:l.level+"_"+d+"_"+f,level:l.level,row:d,col:f}},_isTileAvailable:function(l,d){if(d.valid)if(void 0!==d.value)l=d.value;else{var f=d.location.left;var b=d.location.top;l=(l.row-b)*d.location.width+(l.col-f);l=l<d.data.length?d.data[l]:0}else l=0;return l},_getTileMapUrl:function(l,d,f){var b=this.layer,c=b.tileServers,g=b._getToken(),e=b._url.query;l=(c?c[d%c.length]:
b._url.path)+"/tilemap/"+l+"/"+d+"/"+f+"/8/8";e&&(l+="?"+n.objectToQuery(e));!g||e&&e.token||(l+=(-1===l.indexOf("?")?"?":"\x26")+"token\x3d"+g);return l=b.addTimestampToURL(l)},_getResamplingBudget:function(){var l=this.layer,d=0;l.resampling&&(d=l._resamplingTolerance,null===d||void 0===d)&&(d=l.tileInfo.lods.length);return d}})})},"esri/layers/MapImageLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style ../kernel ../config ../sniff ../domUtils ../geometry/Point ../geometry/webMercatorUtils ./layer".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g){var e=F([g],{declaredClass:"esri.layers.MapImageLayer","-chains-":{constructor:"manual"},constructor:function(h){this.inherited(arguments,[null,h]);this._mapImages=[];var k=a.hitch;this._panStart=k(this,this._panStart);this._pan=k(this,this._pan);this._extentChange=k(this,this._extentChange);this._zoom=k(this,this._zoom);this._zoomStart=k(this,this._zoomStart);this._scale=k(this,this._scale);this._resize=k(this,this._resize);y.connect(this,"onSuspend",this,this._onSuspend);
y.connect(this,"onResume",this,this._onResume);this.loaded=!0;this.onLoad(this)},opacity:1,addImage:function(h){var k=this._mapImages.push(h);--k;h._idx=k;h._layer=this;this._div&&this._createImage(h,k)},removeImage:function(h){if(h){var k=h._idx,m=this._mapImages;if(m[k]===h){delete m[k];if(k=h._node)this._clearEvents(k),k.e_idx=k.e_bl=k.e_tr=k.e_l=k.e_t=k.e_w=k.e_h=null,k.parentNode&&(k.parentNode.removeChild(k),n.destroy(k));h._node=h._idx=h._layer=null}}},removeAllImages:function(){var h=this._mapImages,
k,m=h.length;for(k=0;k<m;k++){var w=h[k];w&&this.removeImage(w)}this._mapImages=[]},getImages:function(){var h=this._mapImages,k=[],m,w=h.length;for(m=0;m<w;m++)h[m]&&k.push(h[m]);return k},setOpacity:function(h){this.opacity!=h&&(this._opacityChanged(this.opacity=h),this.onOpacityChange())},onOpacityChange:function(){},_opacityChanged:function(h){var k=this._div;if(k)if(!d("ie")||8<d("ie"))t.set(k,"opacity",h);else{var m=k.childNodes;var w=m.length;for(k=0;k<w;k++)t.set(m[k],"opacity",h)}},_createImage:function(h,
k){var m=n.create("img");t.set(m,{position:"absolute"});1>h.opacity?t.set(m,"opacity",h.opacity):8>=d("ie")&&t.set(m,"opacity",this.opacity);!h.rotation||9>d("ie")||t.set(m,r._css.names.transform,r._css.rotate(360-h.rotation));h._node=m;m.e_idx=k;m.e_layer=this;m.e_load=y.connect(m,"onload",e.prototype._imageLoaded);m.e_error=y.connect(m,"onerror",e.prototype._imageError);m.e_abort=y.connect(m,"onabort",e.prototype._imageError);m.src=h.href},_imageLoaded:function(h,k){h=k||h.target||h.currentTarget;
k=h.e_layer;var m=k._mapImages[h.e_idx],w=k._map;w&&(w.__zooming||w.__panning||!k._sr)?k._standby.push(h):(k._clearEvents(h),m&&m._node===h&&w&&k._attach(m))},_imageError:function(h){h=h.target||h.currentTarget;var k=h.e_layer,m=k._mapImages[h.e_idx];k._clearEvents(h);m&&(m._node=null)},_clearEvents:function(h){var k=y.disconnect;k(h.e_load);k(h.e_error);k(h.e_abort);h.e_load=h.e_error=h.e_abort=h.e_layer=null},_attach:function(h){var k=h.extent,m=k.spatialReference,w=this._sr,p=this._div,A=h._node,
C=new b({x:k.xmin,y:k.ymin,spatialReference:m});k=new b({x:k.xmax,y:k.ymax,spatialReference:m});w.equals(m)||(w.isWebMercator()&&4326===m.wkid?(C=c.geographicToWebMercator(C),k=c.geographicToWebMercator(k)):m.isWebMercator()&&4326===w.wkid&&(C=c.webMercatorToGeographic(C),k=c.webMercatorToGeographic(k)));A.e_bl=C;A.e_tr=k;h.visible&&(this._setPos(A,p._left,p._top),(this._active||p).appendChild(A))},_setPos:function(h,k,m){var w=h.e_bl,p=h.e_tr,A=this._map;w=A.toScreen(w);p=A.toScreen(p);k=w.x-k;m=
p.y-m;var C=Math.abs(p.x-w.x);w=Math.abs(w.y-p.y);p={width:C+"px",height:w+"px"};var z=this._mapImages[h.e_idx];"css-transforms"===A.navigationMode?p[r._css.names.transform]=r._css.translate(k,m)+(z.rotation?" "+r._css.rotate(360-z.rotation):""):(p.left=k+"px",p.top=m+"px");t.set(h,p);h.e_l=k;h.e_t=m;h.e_w=C;h.e_h=w},managedSuspension:!0,_setMap:function(h,k){this.inherited(arguments);var m=this._div=n.create("div",null,k),w=r._css.names,p={position:"absolute"},A=h.__visibleDelta;if(!d("ie")||8<d("ie"))p.opacity=
this.opacity;"css-transforms"===h.navigationMode?(p[w.transform]=r._css.translate(A.x,A.y),t.set(m,p),m._left=A.x,m._top=A.y,p={position:"absolute",width:h.width+"px",height:h.height+"px",overflow:"visible"},this._active=n.create("div",null,m),t.set(this._active,p),this._passive=n.create("div",null,m),t.set(this._passive,p)):(m._left=0,m._top=0,t.set(m,p));this._standby=[];w=this._mapImages;A=w.length;for(p=0;p<A;p++){var C=w[p];C._node||this._createImage(C,C._idx)}f.hide(m);return m},_unsetMap:function(h,
k){this._disconnect();var m=this._div;if(m){var w=this._mapImages,p,A=w.length;for(p=0;p<A;p++){var C=w[p];if(C){var z=C._node;z&&(this._clearEvents(z),z.e_idx=z.e_bl=z.e_tr=z.e_l=z.e_t=z.e_w=z.e_h=null);C._node=null}}k.removeChild(m);n.destroy(m)}this._map=this._div=this._sr=this._active=this._passive=this._standby=null;this.inherited(arguments)},_onSuspend:function(){this._disconnect();f.hide(this._div)},_onResume:function(h){h.firstOccurrence&&(this._sr=this._map.spatialReference,this._processStandbyList());
h=this._map;var k=this._div,m=h.__visibleDelta;"css-transforms"===h.navigationMode&&(k._left=m.x,k._top=m.y,t.set(k,r._css.names.transform,r._css.translate(k._left,k._top)));this._redraw("css-transforms"===h.navigationMode);this._connect(h);f.show(k)},_connect:function(h){if(!this._connections){var k=y.connect,m="css-transforms"===h.navigationMode;this._connections=[k(h,"onPanStart",this._panStart),k(h,"onPan",this._pan),k(h,"onExtentChange",this._extentChange),m&&k(h,"onZoomStart",this._zoomStart),
m?k(h,"onScale",this._scale):k(h,"onZoom",this._zoom),m&&k(h,"onResize",this._resize)];m&&this._resize(h.extent,h.width,h.height)}},_disconnect:function(){this._connections&&(u.forEach(this._connections,y.disconnect),this._connections=null)},_panStart:function(){this._panL=this._div._left;this._panT=this._div._top},_pan:function(h,k){h=this._div;h._left=this._panL+k.x;h._top=this._panT+k.y;"css-transforms"===this._map.navigationMode?t.set(h,r._css.names.transform,r._css.translate(h._left,h._top)):
t.set(h,{left:h._left+"px",top:h._top+"px"})},_extentChange:function(h,k,m){m?this._redraw("css-transforms"===this._map.navigationMode):k&&this._pan(h,k);this._processStandbyList()},_processStandbyList:function(){var h,k=this._standby;if(k&&k.length)for(h=k.length-1;0<=h;h--)this._imageLoaded(null,k[h]),k.splice(h,1)},_redraw:function(h){if(h){h=this._passive;var k=r._css.names;t.set(h,k.transition,"none");this._moveImages(h,this._active);t.set(h,k.transform,"none")}h=this._active||this._div;k=this._div._left;
var m=this._div._top,w,p=h.childNodes.length;for(w=0;w<p;w++){var A=h.childNodes[w];this._setPos(A,k,m)}},_zoom:function(h,k,m){h=this._div;var w=h._left,p=h._top,A,C=h.childNodes.length;for(A=0;A<C;A++){var z=h.childNodes[A];var q=z.e_w*k,v=z.e_h*k,B=(m.x-w-z.e_l)*(q-z.e_w)/z.e_w,D=(m.y-p-z.e_t)*(v-z.e_h)/z.e_h;B=isNaN(B)?0:B;D=isNaN(D)?0:D;t.set(z,{left:z.e_l-B+"px",top:z.e_t-D+"px",width:q+"px",height:v+"px"})}},_zoomStart:function(){this._moveImages(this._active,this._passive)},_moveImages:function(h,
k){h=h.childNodes;var m=h.length;if(0<m)for(--m;0<=m;m--)k.appendChild(h[m])},_scale:function(h,k){var m=r._css.names,w=this._passive;t.set(w,m.transition,k?"none":m.transformName+" "+l.defaults.map.zoomDuration+"ms ease");({})[m.transform]=r._css.matrix(h);t.set(w,m.transform,r._css.matrix(h))},_resize:function(h,k,m){t.set(this._active,{width:k+"px",height:m+"px"});t.set(this._passive,{width:k+"px",height:m+"px"})}});d("extend-esri")&&a.setObject("layers.MapImageLayer",e,r);return e})},"esri/layers/OpenStreetMapLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../urlUtils ../SpatialReference ../geometry/Extent ./TiledMapServiceLayer ./TileInfo".split(" "),
function(F,y,a,u,n,t,r,l,d){F=F(l,{declaredClass:"esri.layers.OpenStreetMapLayer",constructor:function(f){this.spatialReference=new t({wkid:102100});this.tileInfo=new d({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:0,scale:5.91657527591555E8,resolution:156543.033928},{level:1,scale:2.95828763795777E8,resolution:78271.5169639999},{level:2,scale:1.47914381897889E8,resolution:39135.7584820001},
{level:3,scale:7.3957190948944E7,resolution:19567.8792409999},{level:4,scale:3.6978595474472E7,resolution:9783.93962049996},{level:5,scale:1.8489297737236E7,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,
resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:.597164283559817},{level:19,scale:1128.497176,resolution:.298582141647617}]});this.fullExtent=
new r({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,spatialReference:{wkid:102100}});this.initialExtent=new r({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,spatialReference:{wkid:102100}});this.tileServers=f&&f.tileServers||["//a.tile.openstreetmap.org","//b.tile.openstreetmap.org","//c.tile.openstreetmap.org"];this.serversLength=this.tileServers.length;this._displayLevels=f?f.displayLevels:null;this.copyright=f&&f.copyright||"Map data \u00a9 OpenStreetMap contributors, CC-BY-SA";
this.loaded=!0;this.onLoad(this);(f=f&&f.loadCallback)&&f(this)},getTileUrl:function(f,b,c){f=this.tileServers[b%this.serversLength]+"/"+f+"/"+c+"/"+b+".png";f=n.normalize(f);f=this.addTimestampToURL(f);return n.addProxy(f)}});a("extend-esri")&&y.setObject("layers.OpenStreetMapLayer",F,u);return F})},"esri/dijit/Popup":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/kernel dojo/has dojo/window dojo/Stateful dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/registry ../kernel ../lang ../domUtils ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/normalizeUtils ../InfoWindowBase ../PopupBase dojo/i18n!../nls/jsapi dojo/NodeList-dom dojo/has!extend-esri?./PopupTemplate dojo/has!extend-esri?./PopupRenderer".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m,w,p,A,C,z,q,v,B,D){F=F([v,B,l],{declaredClass:"esri.dijit.Popup",offsetX:3,offsetY:3,zoomFactor:4,marginLeft:25,marginTop:25,highlight:!0,pagingControls:!0,pagingInfo:!0,keepHighlightOnHide:!1,popupWindow:!0,titleInBody:!0,anchor:"auto",visibleWhenEmpty:!0,hideDelay:1E3,location:null,constructor:function(x,E){this.initialize();y.mixin(this,x);this.domNode=f.byId(E);E=this._nls=y.mixin({},D.widgets.popup);x=this.domNode;c.add(x,"esriPopup");(this._isRTL=!e.isBodyLtr())&&
h.set(x,"direction","rtl");b.set(x,"innerHTML","\x3cdiv class\x3d'esriPopupWrapper' style\x3d'position: absolute;'\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'titlePane'\x3e\x3cdiv class\x3d'spinner hidden' title\x3d'"+E.NLS_searching+"...'\x3e\x3c/div\x3e\x3cdiv class\x3d'title'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton prev hidden' title\x3d'"+E.NLS_prevFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton next hidden' title\x3d'"+E.NLS_nextFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton maximize' title\x3d'"+
E.NLS_maximize+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton close' title\x3d'"+E.NLS_close+"'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer content'\x3e\x3cdiv class\x3d'contentPane'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'actionsPane'\x3e\x3cdiv class\x3d'actionList hidden'\x3e\x3ca title\x3d'"+E.NLS_zoomTo+"' class\x3d'action zoomTo' href\x3d'javascript:void(0);'\x3e\x3cspan\x3e"+E.NLS_zoomTo+"\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'pointer hidden'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'outerPointer hidden'\x3e\x3c/div\x3e");
this._sizers=n.query(".sizer",x);E=n.query(".titlePane",x)[0];this._title=n.query(".title",E)[0];this._prevFeatureButton=n.query(".prev",E)[0];this._nextFeatureButton=n.query(".next",E)[0];this._maxButton=n.query(".maximize",E)[0];this._spinner=n.query(".spinner",E)[0];this._contentPane=n.query(".contentPane",x)[0];this._positioner=n.query(".esriPopupWrapper",x)[0];this._pointer=n.query(".pointer",x)[0];this._outerPointer=n.query(".outerPointer",x)[0];this._actionList=n.query(".actionsPane .actionList",
x)[0];this._contentUpdateHandles={};this._eventConnections=[u.connect(n.query(".close",E)[0],"onclick",this,this.hide),u.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),u.connect(this._nextFeatureButton,"onclick",this,this.selectNext),u.connect(this._maxButton,"onclick",this,this._toggleSize),u.connect(n.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature),u.connect(this,"onClearFeatures",this,this._featuresCleared),u.connect(this,"onSelectionChange",this,this._featureSelected),
u.connect(this,"onDfdComplete",this,this._updateUI)];t("esri-touch")&&(x=p.setScrollable(this._contentPane),this._eventConnections.push(x[0],x[1]));this._toggleVisibility(!1)},onMaximize:function(){},onRestore:function(){},setMap:function(x){this.inherited(arguments);g.place(this.domNode,x.root);this.highlight&&this.enableHighlight(x);this._maxHeight=h.get(this._contentPane,"maxHeight")},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments)},setTitle:function(x){this.popupWindow&&
(w.isDefined(x)&&""!==x||(x="\x26nbsp;"),this.destroyDijits(this._title),this.place(x,this._title),this.isShowing&&(this.startupDijits(this._title),this.reposition()))},setContent:function(x){this.popupWindow&&(w.isDefined(x)&&""!==x||(x="\x26nbsp;"),this._destroyContent(),this.place(x,this._contentPane),this.isShowing&&(this._startupContent(),this.reposition()))},show:function(x,E){if(this.popupWindow)if(this._delayHide=!1,x){var G=this.map;x.spatialReference?(this.location=x,x=G.toScreen(x)):this.location=
G.toMap(x);var I=G._getFrameWidth();if(-1!==I&&(x.x%=I,0>x.x&&(x.x+=I),G.width>I))for(G=(G.width-I)/2;x.x<G;)x.x+=I;this._maximized?this.restore():this._setPosition(x);E&&E.closestFirst&&this.showClosestFirst(this.location);this.isShowing||(this._toggleVisibility(!0),this._followMap(),this.startupDijits(this._title),this._startupContent(),this.reposition(),this.showHighlight(),this.onShow())}else this._toggleVisibility(!0)},hide:function(){this.isShowing&&(this._toggleVisibility(!1),this._unfollowMap(),
this.keepHighlightOnHide||this.hideHighlight(),this.onHide())},resize:function(x,E){this.popupWindow&&(this._sizers.style({width:x+"px"}),h.set(this._contentPane,"maxHeight",E+"px"),this._maxHeight=E,this.isShowing&&this.reposition())},reposition:function(){this.popupWindow&&this.map&&this.location&&!this._maximized&&this.isShowing&&this._setPosition(this.map.toScreen(this.location))},addActions:function(x){return a.map(x,function(E){var G=g.create("a",{href:"javascript:void(0);",className:"action "+
E.className,title:E.title,innerHTML:E.title},this._actionList);u.connect(G,"onclick",E.callback);return{action:E,node:G}},this)},removeActions:function(x){a.forEach(x,function(E){g.destroy(E.node)})},getCurrentAnchor:function(){return this._anchor},maximize:function(){var x=this.map;if(x&&!this._maximized&&this.popupWindow){this._maximized=!0;var E=this._maxButton;c.remove(E,"maximize");c.add(E,"restore");b.set(E,"title",this._nls.NLS_restore);E=this.marginLeft;var G=this.marginTop,I=x.width-2*E;
x=x.height-2*G;h.set(this.domNode,{left:this._isRTL?null:E+"px",right:this._isRTL?E+"px":null,top:G+"px",bottom:null});h.set(this._positioner,{left:null,right:null,top:null,bottom:null});this._savedWidth=h.get(this._sizers[0],"width");this._savedHeight=h.get(this._contentPane,"maxHeight");this._sizers.style({width:I+"px"});h.set(this._contentPane,{maxHeight:x-65+"px",height:x-65+"px"});this._showPointer("");this._unfollowMap();c.add(this.domNode,"esriPopupMaximized");this.onMaximize()}},restore:function(){if(this.map&&
this._maximized&&this.popupWindow){this._maximized=!1;var x=this._maxButton;c.remove(x,"restore");c.add(x,"maximize");b.set(x,"title",this._nls.NLS_maximize);h.set(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this.location);this._followMap();c.remove(this.domNode,"esriPopupMaximized");this.onRestore()}},startup:function(){},destroy:function(){this.map&&this.unsetMap();this.cleanup();this.isShowing&&this.hide();this.destroyDijits(this._title);
this._destroyContent();a.forEach(this._eventConnections,u.disconnect);g.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._positioner=this._pointer=this._outerPointer=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=this._pagerScope=this._targetLocation=this._nls=this._maxButton=null},selectNext:function(){this.select(this.selectedIndex+1)},selectPrevious:function(){this.select(this.selectedIndex-1)},setFeatures:function(x,E){this._transientAnchor=
E&&E.anchor;this.inherited(arguments);this._updateUI()},clearFeatures:function(x){x||(this._transientAnchor=null);this.inherited(arguments)},postscript:null,_highlightSetter:function(x){var E=this.highlight,G=this.map;this.highlight=x;if(G&&x!==E)if(x){if(this.enableHighlight(G),x=this.features&&this.features[this.selectedIndex])this.updateHighlight(G,x),this.showHighlight()}else this.disableHighlight(G)},_pagingControlsSetter:function(x){var E=this.pagingControls,G=this.map;this.pagingControls=x;
G&&x!==E&&this._updatePagingControls()},_pagingInfoSetter:function(x){var E=this.pagingInfo,G=this.map;this.pagingInfo=x;G&&x!==E&&this.features&&this.features.length&&this._updatePagingInfo()},_popupWindowSetter:function(x){var E=this.popupWindow,G=this.map;this.popupWindow=x;G&&x!==E&&(x?(this._updateUI(),this._updateWindow()):(this.hide(),this.showHighlight()))},_anchorSetter:function(x){var E=this.anchor;this.anchor=x;this.map&&x!==E&&this.reposition()},_startupContent:function(){var x=this._contentPane;
this.startupDijits(x);a.forEach(this._getPopupRendererDijits(x),function(E){if(!this._contentUpdateHandles[E.id]){var G=E.on("content-update",y.hitch(this,function(){this.reposition()}));this._contentUpdateHandles[E.id]=G}},this)},_destroyContent:function(){var x=this._contentPane;a.forEach(this._getPopupRendererDijits(x),function(E){var G=this._contentUpdateHandles[E.id];G&&(G.remove(),delete this._contentUpdateHandles[E.id])},this);this.destroyDijits(x)},_getPopupRendererDijits:function(x){x=this.getDijits(x);
return x=a.filter(x,function(E){return E&&E.set&&/_PopupRenderer/.test(E.declaredClass)})},_featuresCleared:function(){this.setTitle("\x26nbsp;");this.setContent("\x26nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight()},_featureSelected:function(){this._updateUI();this._updateWindow()},_updateWindow:function(){var x=this.selectedIndex;if(0<=x){var E=this.features[x].getContent();if(!this.titleInBody&&E&&y.isString(E.id)){var G=k.byId(E.id);G&&G.set&&/_PopupRenderer/.test(G.declaredClass)&&
G.set("showTitle",!1)}this.setContent(E);this.updateHighlight(this.map,this.features[x]);this.showHighlight()}},_toggleVisibility:function(x){this._setVisibility(x);this.isShowing=x},_setVisibility:function(x){c.toggle(this.domNode,"esriPopupVisible",x);c.toggle(this.domNode,"esriPopupHidden",!x)},_waitAndHide:function(x){var E=this;this._delayHide=!0;setTimeout(function(){E._delayHide&&(E._delayHide=!1,E.hide())},x)},_followMap:function(){this._unfollowMap();var x=this.map;this._handles=[u.connect(x,
"onPanStart",this,this._onPanStart),u.connect(x,"onPan",this,this._onPan),u.connect(x,"onZoomStart",this,this._onZoomStart),u.connect(x,"onExtentChange",this,this._onExtentChange)]},_unfollowMap:function(){var x=this._handles;x&&(a.forEach(x,u.disconnect),this._handles=null)},_onPanStart:function(){var x=this.domNode.style;this._panOrigin={left:x.left,top:x.top,right:x.right,bottom:x.bottom}},_onPan:function(x,E){var G=this._panOrigin;x=E.x;E=E.y;var I=G.left,L=G.top,Y=G.right;G=G.bottom;I&&(I=parseFloat(I)+
x+"px");L&&(L=parseFloat(L)+E+"px");Y&&(Y=parseFloat(Y)-x+"px");G&&(G=parseFloat(G)-E+"px");h.set(this.domNode,{left:I,top:L,right:Y,bottom:G})},_onZoomStart:function(){this._setVisibility(!1)},_onExtentChange:function(x,E,G){G&&(this._setVisibility(!0),this.show(this._targetLocation||this.location));this._targetLocation=null},_toggleSize:function(){this._maximized?this.restore():this.maximize()},_getTargetAnchor:function(){return this._transientAnchor||this.anchor},_setPosition:function(x){var E=
x.x,G=x.y;x=this.offsetX||0;var I=this.offsetY||0,L=0,Y=0,X=this.map,fa=X.position.x,sa=X.position.y,T=X.width,ka=X.height;X="Left";var ma="bottom",wa="right",ja="top",ua=e.getContentBox(this._positioner),Ba=ua.w/2,M=ua.h/2,Z=h.get(this._sizers[0],"height")+this._maxHeight+h.get(this._sizers[2],"height"),ia=Z/2,qa=0,ya=0,Ca=T,Ia=ka,Oa=E,la=G,N=this._getTargetAnchor().toLowerCase();if("auto"===N){if(N=r.getBox)N=N(),qa=Math.max(N.l,fa),Ca=Math.min(N.l+N.w,fa+T),ya=Math.max(N.t,sa),Ia=Math.min(N.t+
N.h,sa+ka),Oa+=fa,la+=sa;fa=la-ya>=Z;sa=Ia-la>=Z;T=Ca-Oa>=ua.w;ua=Oa-qa>=ua.w;la-ya>ia&&Ia-la>=ia&&(T?(ma="",X="Left",ja="",wa="right"):ua&&(ma="",X="Right",ja="",wa="left"));X&&ma&&Oa-qa>Ba&&Ca-Oa>=Ba&&(fa?(X="",ma="bottom",wa="",ja="top"):sa&&(X="",ma="top",wa="",ja="bottom"));X&&ma&&(T&&fa?(X="Left",ma="bottom",wa="right",ja="top"):T&&sa?(X="Left",ma="top",wa="right",ja="bottom"):ua&&sa?(X="Right",ma="top",wa="left",ja="bottom"):ua&&fa&&(X="Right",ma="bottom",wa="left",ja="top"));this._anchor=
ja&&wa?ja+"-"+wa:ja||wa}else ma=X="",-1!==N.indexOf("top")?ma="bottom":-1!==N.indexOf("bottom")&&(ma="top"),-1!==N.indexOf("left")?X="Right":-1!==N.indexOf("right")&&(X="Left"),this._anchor=this._getTargetAnchor();wa=ma+X;switch(wa){case "top":case "bottom":Y=14;break;case "Left":case "Right":L=13;break;case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":Y=14,L=-16}h.set(this.domNode,{left:E+"px",top:G+"px",right:null,bottom:null});E={left:null,right:null,top:null,bottom:null};X?E[X.toLowerCase()]=
L+x+"px":E.left=-Ba+"px";ma?E[ma]=Y+I+"px":E.top=-M+"px";h.set(this._positioner,E);this._showPointer(wa)},_showPointer:function(x){c.remove(this._pointer,"top bottom right left topLeft topRight bottomRight bottomLeft hidden".split(" "));c.remove(this._outerPointer,["right","left","hidden"]);"Right"===x||"Left"===x?(x=x.toLowerCase(),c.add(this._outerPointer,x)):c.add(this._pointer,x)},_setPagerCallbacks:function(x,E,G){if(this.pagingControls&&(x!==this||this._pagerScope&&this._pagerScope!==this)&&
x!==this._pagerScope){this._pagerScope=x;x===this&&(E=this.selectPrevious,G=this.selectNext);var I=this._eventConnections;u.disconnect(I[1]);u.disconnect(I[2]);E&&(I[1]=u.connect(this._prevFeatureButton,"onclick",x,E));G&&(I[2]=u.connect(this._nextFeatureButton,"onclick",x,G))}},_getLocation:function(x){var E=x&&x.geometry;if(E)switch(E.type){case "point":var G=E;if(x.isAggregate()){x=x.getChildGraphics();var I=x[0];x=(I=I.geometry&&I.geometry.spatialReference)&&new z({points:a.map(x,function(L){L=
L.geometry;return[L.x,L.y]}),spatialReference:I.toJson()});I=q.getDenormalizedExtent(x)}break;case "multipoint":G=E.getPoint(0);I=q.getDenormalizedExtent(E);break;case "polyline":case "polygon":G=E.getPoint(0,0),I=q.getDenormalizedExtent(E)}return[G,I]},_zoomToFeature:function(x){x.preventDefault();var E=this.features,G=this.selectedIndex;x=this.map;if(E)if(G=this._getLocation(E[G]),E=G[0],G=G[1],E||(E=this.location),G&&G.intersects(this.location)||(this.location=E),G&&G.getWidth()&&G.getHeight())x.setExtent(G,
!0);else{var I=x.getNumLevels();G=x.getLevel();var L=x.getMaxZoom(),Y=this.zoomFactor||1;0<I?G!==L&&(I=G+Y,I>L&&(I=L),x.navigationManager._wheelZoom({value:I-G,mapPoint:E},!0)):x.navigationManager._wheelZoom({value:1/Math.pow(2,Y)*2,mapPoint:E},!0)}},_updatePagingControls:function(){var x=this._prevFeatureButton,E=this._nextFeatureButton,G=this.selectedIndex,I=this.features?this.features.length:0;this.pagingControls&&1<I?(0===G?c.add(x,"hidden"):c.remove(x,"hidden"),G===I-1?c.add(E,"hidden"):c.remove(E,
"hidden")):(c.add(x,"hidden"),c.add(E,"hidden"))},_updatePagingInfo:function(){var x=this.features?this.features.length:0,E=this._nls,G="\x26nbsp;";this.pagingInfo&&1<x&&E.NLS_pagingInfo&&(G=w.substitute({index:this.selectedIndex+1,total:x},E.NLS_pagingInfo));x&&(E=this.getSelectedFeature(),x=E.getInfoTemplate(),E=E.getTitle(),x&&!/esri\.InfoTemplate/.test(x.declaredClass)&&this.titleInBody||!E||(G=E+("\x26nbsp;"===G?"":" "+G)));this.setTitle(G)},_updateUI:function(){if(this.popupWindow){var x=this.features,
E=this.deferreds,G=x?x.length:0,I=this._spinner,L=this._actionList,Y=this._nls;this._updatePagingControls();this._updatePagingInfo();G?c.remove(L,"hidden"):c.add(L,"hidden");E&&E.length?x?c.remove(I,"hidden"):this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+Y.NLS_searching+"...\x3c/div\x3e"):c.add(I,"hidden");G||E&&E.length?this._delayHide=!1:(this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+Y.NLS_noInfo+".\x3c/div\x3e"),this.visibleWhenEmpty||this._waitAndHide(this.hideDelay))}}});
t("extend-esri")&&y.setObject("dijit.Popup",F,m);return F})},"esri/geometry/normalizeUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/has ../kernel ../config ../deferredUtils ./Extent ./Polyline ./Polygon ./webMercatorUtils ./jsonUtils".split(" "),function(F,y,a,u,n,t,r,l,d,f,b,c){function g(B,D){return Math.ceil((B-D)/(2*D))}function e(B,D){var x=B.paths||B.rings,E,G,I=x.length;for(E=0;E<I;E++){var L=x[E].length;for(G=0;G<L;G++){var Y=B.getPoint(E,G);B.setPoint(E,
G,Y.offset(D,0))}}return B}function h(B,D){if(!(B instanceof d||B instanceof f))throw console.error("_straightLineDensify: the input geometry is neither polyline nor polygon"),Error("_straightLineDensify: the input geometry is neither polyline nor polygon");var x=B instanceof d,E=[],G;F.forEach(x?B.paths:B.rings,function(I){E.push(G=[]);G.push([I[0][0],I[0][1]]);var L,Y;for(L=0;L<I.length-1;L++){var X=I[L][0];var fa=I[L][1];var sa=I[L+1][0];var T=I[L+1][1];var ka=Math.sqrt((sa-X)*(sa-X)+(T-fa)*(T-
fa));var ma=(T-fa)/ka;var wa=(sa-X)/ka;var ja=ka/D;if(1<ja){for(Y=1;Y<=ja-1;Y++){var ua=Y*D;var Ba=wa*ua+X;ua=ma*ua+fa;G.push([Ba,ua])}Y=(ka+Math.floor(ja-1)*D)/2;Ba=wa*Y+X;ua=ma*Y+fa;G.push([Ba,ua])}G.push([sa,T])}});return x?new d({paths:E,spatialReference:B.spatialReference}):new f({rings:E,spatialReference:B.spatialReference})}function k(B,D,x){D&&(B=h(B,1E6),B=b.webMercatorToGeographic(B,!0));x&&(B=e(B,x));return B}function m(B,D,x){var E=B.x||B[0];if(E>D){var G=g(E,D);B.x?B=B.offset(-2*G*D,
0):B[0]=E+-2*G*D}else E<x&&(G=g(E,x),B.x?B=B.offset(-2*G*x,0):B[0]=E+-2*G*x);return B}function w(B,D){var x=-1;F.forEach(D.cutIndexes,function(E,G){var I=D.geometries[G];F.forEach(I.rings||I.paths,function(L,Y){F.some(L,function(X){if(!(180>X[0])){X=0;var fa,sa=L.length;for(fa=0;fa<sa;fa++){var T=L[fa][0];X=T>X?T:X}X=Number(X.toFixed(9));X=-360*g(X,180);sa=L.length;for(fa=0;fa<sa;fa++)T=I.getPoint(Y,fa),I.setPoint(Y,fa,T.offset(X,0))}return!0})});E===x?I.rings?F.forEach(I.rings,function(L){B[E]=B[E].addRing(L)}):
F.forEach(I.paths,function(L){B[E]=B[E].addPath(L)}):(x=E,B[E]=I)});return B}function p(B,D,x,E){var G=new a;G.addCallbacks(x,E);D=D||t.defaults.geometryService;var I=[],L=[],Y,X,fa,sa,T,ka,ma,wa,ja=0;F.forEach(B,function(Z){if(Z)if(Y||(Y=Z.spatialReference,X=Y._getInfo(),sa=(fa=Y._isWebMercator())?2.0037508342788905E7:180,T=fa?-2.0037508342788905E7:-180,ka=fa?102100:4326,ma=new d({paths:[[[sa,T],[sa,sa]]],spatialReference:{wkid:ka}}),wa=new d({paths:[[[T,T],[T,sa]]],spatialReference:{wkid:ka}})),
X){var ia=c.fromJson(Z.toJson()),qa=Z.getExtent();"point"===Z.type?I.push(m(ia,sa,T)):"multipoint"===Z.type?(ia.points=F.map(ia.points,function(ya){return m(ya,sa,T)}),I.push(ia)):"extent"===Z.type?(ia=qa._normalize(null,null,X),I.push(ia.rings?new f(ia):ia)):qa?(Z=2*g(qa.xmin,T)*sa,ia=0===Z?ia:e(ia,Z),qa=qa.offset(Z,0),qa.intersects(ma)&&qa.xmax!==sa?(ja=qa.xmax>ja?qa.xmax:ja,ia=k(ia,fa),L.push(ia),I.push("cut")):qa.intersects(wa)&&qa.xmin!==T?(ja=2*qa.xmax*sa>ja?2*qa.xmax*sa:ja,ia=k(ia,fa,360),
L.push(ia),I.push("cut")):I.push(ia)):I.push(ia)}else I.push(Z);else I.push(Z)});x=new d;E=g(ja,sa);for(var ua=-90,Ba=E;0<E;){var M=-180+360*E;x.addPath([[M,ua],[M,-1*ua]]);ua*=-1;E--}0<L.length&&0<Ba?D?D.cut(L,x,function(Z){L=w(L,Z);var ia=[];F.forEach(I,function(qa,ya){"cut"===qa&&(qa=L.shift(),B[ya].rings&&1<B[ya].rings.length&&qa.rings.length>=B[ya].rings.length?(I[ya]="simplify",ia.push(qa)):I[ya]=!0===fa?b.geographicToWebMercator(qa):qa)});0<ia.length?D.simplify(ia,function(qa){F.forEach(I,
function(ya,Ca){"simplify"===ya&&(I[Ca]=!0===fa?b.geographicToWebMercator(qa.shift()):qa.shift())});G.callback(I)},function(qa){G.errback(qa)}):G.callback(I)},function(Z){G.errback(Z)}):G.errback(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):(F.forEach(I,function(Z,ia){"cut"===Z&&(Z=L.shift(),I[ia]=!0===fa?b.geographicToWebMercator(Z):Z)}),G.callback(I));return G}function A(B,D,x,E){var G=!1,I;y.isObject(B)&&B&&(y.isArray(B)?B.length&&((I=B[0]&&B[0].declaredClass)&&
-1!==I.indexOf("Graphic")?(B=F.map(B,function(L){return L.geometry}),G=B.length?!0:!1):I&&-1!==I.indexOf("esri.geometry.")&&(G=!0)):(I=B.declaredClass)&&-1!==I.indexOf("FeatureSet")?(B=F.map(B.features||[],function(L){return L.geometry}),G=B.length?!0:!1):I&&-1!==I.indexOf("esri.geometry.")&&(G=!0));G&&D.push({index:x,property:E,value:B})}function C(B,D){var x=[];F.forEach(D,function(E){var G=E.i,I=B[G];E=E.p;var L;if(y.isObject(I)&&I)if(E)if("*"===E[0])for(L in I)I.hasOwnProperty(L)&&A(I[L],x,G,
L);else F.forEach(E,function(Y){A(y.getObject(Y,!1,I),x,G,Y)});else A(I,x,G)});return x}function z(B,D){var x=0,E={};F.forEach(D,function(G){var I=G.index,L=G.property,Y=G.value,X=Y.length||1,fa=B.slice(x,x+X);y.isArray(Y)||(fa=fa[0]);x+=X;delete G.value;L?(E[I]=E[I]||{},E[I][L]=fa):E[I]=fa});return E}function q(B){for(var D=[],x=0,E=0,G=Math.min,I=Math.max,L=0;L<B.length;L++){for(var Y=B[L],X=null,fa=0;fa<Y.length;fa++)X=Y[fa],D.push(X),0===fa?E=x=X[0]:(x=G(x,X[0]),E=I(E,X[0]));X&&D.push([(x+E)/
2,0])}return D}var v={normalizeCentralMeridian:p,_foldCutResults:w,_prepareGeometryForCut:k,_offsetMagnitude:g,_pointNormalization:m,_updatePolyGeometry:e,_straightLineDensify:h,_createWrappers:function(B){var D=y.isObject(B)?B.prototype:y.getObject(B+".prototype");F.forEach(D.__msigns,function(x){var E=D[x.n];D[x.n]=function(){var G=this,I=[],L,Y=new a(r._dfdCanceller);x.f&&r._fixDfd(Y);for(L=0;L<x.c;L++)I[L]=arguments[L];var X={dfd:Y};I.push(X);var fa=[],sa;if(G.normalization&&!G._isTable){var T=
C(I,x.a);F.forEach(T,function(ka){fa=fa.concat(ka.value)});fa.length&&(sa=p(fa))}sa?(Y._pendingDfd=sa,sa.addCallbacks(function(ka){Y.canceled||(X.assembly=z(ka,T),Y._pendingDfd=E.apply(G,I))},function(ka){var ma=G.declaredClass;ma&&-1!==ma.indexOf("FeatureLayer")?G._resolve([ka],null,I[x.e],Y,!0):G._errorHandler(ka,I[x.e],Y)})):Y._pendingDfd=E.apply(G,I);return Y}})},_disassemble:C,_addToBucket:A,_reassemble:z,getDenormalizedExtent:function(B){if(!B)return null;var D=B.getExtent();if(!D)return null;
var x=B.spatialReference&&B.spatialReference._getInfo();if(!x)return D;var E=x.valid[0];x=x.valid[1];var G=2*x,I=D.getWidth(),L=D.xmax,Y=D.xmin;if("extent"===B.type||0===I||I<=x||I>G||L<E||Y>x)return D;switch(B.type){case "polygon":if(1<B.rings.length)var X=q(B.rings);else return D;break;case "polyline":if(1<B.paths.length)X=q(B.paths);else return D;break;case "multipoint":X=B.points}B=Math.min;E=Math.max;G=new l(D.toJson());for(var fa=0;fa<X.length;fa++){var sa=X[fa][0];0>sa?(sa+=x,Y=E(sa,Y)):(sa-=
x,L=B(sa,L))}G.xmin=L;G.xmax=Y;return G.getWidth()<I?(G.xmin-=x,G.xmax-=x,G):D}};u("extend-esri")&&y.mixin(y.getObject("geometry",!0,n),v);return v})},"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../lang ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(F,y,a,u,n,t,r,l,d){function f(e,h,k){var m=e.rings||e.paths,w,p;var A=0;for(w=m.length;A<w;A++){var C=m[A];var z=0;for(p=C.length;z<p;z++){var q=C[z];if(0<z)v+=q[0],B+=q[1];else{var v=q[0];var B=
q[1]}q[0]=h(v);q[1]=k(B)}}return e}var b={esriGeometryPoint:function(e,h,k){e.x=h(e.x);e.y=k(e.y);return e},esriGeometryPolyline:f,esriGeometryPolygon:f,esriGeometryEnvelope:function(e,h,k){e.xmin=h(e.xmin);e.ymin=k(e.ymin);e.xmax=h(e.xmax);e.ymax=k(e.ymax);return e},esriGeometryMultipoint:function(e,h,k){var m=e.points,w;var p=0;for(w=m.length;p<w;p++){var A=m[p];if(0<p)C+=A[0],z+=A[1];else{var C=A[0];var z=A[1]}A[0]=h(C);A[1]=k(z)}return e}},c={esriGeometryPoint:function(e,h,k){e.x=h(e.x);e.y=k(e.y);
return e}},g={createInstance:function(e,h){e=new e;h&&u.mixin(e,h);return e},fromJson:function(e){if(void 0!==e.x&&void 0!==e.y)return new n(e);if(void 0!==e.paths)return new t(e);if(void 0!==e.rings)return new r(e);if(void 0!==e.points)return new l(e);if(void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax)return new d(e)},getJsonType:function(e){return e instanceof n?"esriGeometryPoint":e instanceof t?"esriGeometryPolyline":e instanceof r?"esriGeometryPolygon":e instanceof d?"esriGeometryEnvelope":
e instanceof l?"esriGeometryMultipoint":null},getGeometryType:function(e){return"esriGeometryPoint"===e?n:"esriGeometryPolyline"===e?t:"esriGeometryPolygon"===e?r:"esriGeometryEnvelope"===e?d:"esriGeometryMultipoint"===e?l:null},supportsLazyUnquantization:function(e){return"esriGeometryPoint"===e||"esriGeometryPolyline"===e||"esriGeometryPolygon"===e||"esriGeometryMultipoint"===e},unquantizeFunction:function(e,h){if(e&&h){var k=h.translate[0],m=h.translate[1],w=h.scale[0],p=h.scale[1],A=function(q){return q*
w+k},C=function(q){return m-q*p},z=b[e];return function(q){return q?z(q,A,C):null}}},unquantize:function(e,h,k){if(h=g.unquantizeFunction(h,k)){var m=e.length;for(k=0;k<m;k++)h(e[k].geometry)}},quantizeFunction:function(e,h){if(e&&"esriGeometryPoint"===e&&h){var k=h.translate[0],m=h.translate[1],w=h.scale[0],p=h.scale[1],A=function(q){return Math.round((q-k)/w)},C=function(q){return Math.round((m-q)/p)},z=c[e];return function(q){return q?z(q,A,C):null}}},quantize:function(e,h,k){if(h=g.quantizeFunction(h,
k)){var m=e.length;for(k=0;k<m;k++)h(e[k].geometry)}}};y("extend-esri")&&F.mixin(F.getObject("geometry",!0,a),g);return g})},"esri/InfoWindowBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/dom-construct dojo/has dijit/registry ./kernel ./lang ./geometry/ScreenPoint".split(" "),function(F,y,a,u,n,t,r,l,d,f,b){F=F(null,{declaredClass:"esri.InfoWindowBase",constructor:function(){var c=y.hitch;this.__set_title=c(this,this.__set_title);
this.__err_title=c(this,this.__err_title);this.__set_content=c(this,this.__set_content);this.__err_content=c(this,this.__err_content)},setMap:function(c){this.map=c},unsetMap:function(c){delete this.map},setTitle:function(){},setContent:function(){},show:function(){},hide:function(){},resize:function(){},onShow:function(){},onHide:function(){},place:function(c,g){f.isDefined(c)?y.isObject(c)?t.place(c,g,"only"):g.innerHTML=c:g.innerHTML=""},startupDijits:function(c){this._processDijits(c)},destroyDijits:function(c){this._processDijits(c,
!0)},getDijits:function(c){var g=[];c&&1===c.children.length&&(c=c.children[0])&&(g=(g=l.byNode(c))?[g]:l.findWidgets(c));return g},_processDijits:function(c,g){c=this.getDijits(c);a.forEach(c,function(e){if(g){if(e._started&&!e._destroyed)try{e.destroyRecursive?e.destroyRecursive():e.destroy&&e.destroy()}catch(h){console.debug("An error occurred when destroying a widget embedded within InfoWindow: "+h.message)}}else if(!e._started)try{e.startup()}catch(h){console.debug("An error occurred when starting a widget embedded within InfoWindow: "+
h.message)}})},__registerMapListeners:function(){this.__unregisterMapListeners();var c=this.map;this.__handles=[u.connect(c,"onPan",this,this.__onMapPan),u.connect(c,"onZoomStart",this,this.__onMapZmStart),u.connect(c,"onExtentChange",this,this.__onMapExtChg)]},__unregisterMapListeners:function(){var c=this.__handles;c&&(a.forEach(c,u.disconnect,u),this.__handles=null)},__onMapPan:function(c,g){this.move(g,!0)},__onMapZmStart:function(){this.__mcoords=this.mapCoords||this.map.toMap(new b(this.coords));
this.hide(null,!0)},__onMapExtChg:function(c,g,e){c=this.map;var h=this.mapCoords;h?this.show(h,null,!0):(g=e?c.toScreen(this.__mcoords):this.coords.offset(g&&g.x||0,g&&g.y||0),this.show(g,null,!0))},__setValue:function(c,g){this[c].innerHTML="";var e="_dfd"+c,h=this[e];h&&-1===h.fired&&(h.cancel(),this[e]=null);f.isDefined(g)&&(g instanceof n?(this[e]=g,g.addCallbacks(this["__set"+c],this["__err"+c])):this.__render(c,g))},__set_title:function(c){this._dfd_title=null;this.__render("_title",c)},__err_title:function(c){this._dfd_title=
null},__set_content:function(c){this._dfd_content=null;this.__render("_content",c)},__err_content:function(c){this._dfd_content=null},__render:function(c,g){var e=this[c];this.place(g,e);this.isShowing&&(this.startupDijits(e),"_title"===c&&this._adjustContentArea&&this._adjustContentArea())}});r("extend-esri")&&(d.InfoWindowBase=F);return F})},"esri/PopupBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Color dojo/_base/Deferred dojo/has ./kernel ./graphic ./geometry/Point ./geometry/jsonUtils ./geometry/mathUtils ./geometry/webMercatorUtils ./symbols/SimpleMarkerSymbol ./symbols/SimpleLineSymbol ./symbols/CartographicLineSymbol ./symbols/SimpleFillSymbol ./tasks/query ./Evented dojo/has!extend-esri?./PopupInfo".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m,w){function p(A){return"sizeInfo"===A.type}F=F(w,{declaredClass:"esri.PopupBase",_featureLayers:{},_updateEndHandles:[],_mapLevelChangeHandle:null,_evtMap:{"set-features":!0,"clear-features":!0,"selection-change":!0,"dfd-complete":!0},onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){},initialize:function(){this.count=0;this.selectedIndex=-1;this.on("clear-features",y.hitch(this,this._resetUpdateEndListeners));
this.on("dfd-complete",y.hitch(this,this._processFeatures));this.on("set-features",y.hitch(this,this._processFeatures));this.on("selection-change",y.hitch(this,this._checkFeatureResolution))},cleanup:function(){this.features=this.deferreds=null;this._resetUpdateEndListeners();this._untrackMapLevelChange()},setFeatures:function(A){if(A&&A.length){this.clearFeatures(!0);var C,z;A[0]instanceof n?z=A:C=A;C?this._updateFeatures(null,C):(this.deferreds=z,z=z.slice(0),a.forEach(z,function(q){q.addBoth(y.hitch(this,
this._updateFeatures,q))},this))}},clearFeatures:function(A){this.features=this.deferreds=this._marked=null;this.count=0;var C=this.selectedIndex;this.selectedIndex=-1;if(-1<C)this.onSelectionChange();this.onClearFeatures({isIntermediate:!!A})},getSelectedFeature:function(){var A=this.features;if(A)return A[this.selectedIndex]},select:function(A){0>A||A>=this.count||(this.selectedIndex=A,this.onSelectionChange())},enableHighlight:function(A){this._highlighted=A.graphics.add(new l(new d(0,0,A.spatialReference)));
this._highlighted.attr("data-popup-highlight","");this._highlighted.hide();this._trackMapLevelChange(A);this.markerSymbol||(A=this.markerSymbol=new g,A.setStyle(g.STYLE_TARGET),A._setDim(16,16,0),A.setOutline(new h(e.STYLE_SOLID,new u([0,255,255]),2,h.CAP_ROUND,h.JOIN_ROUND)),A.setColor(new u([0,0,0,0])));this.lineSymbol||(this.lineSymbol=new e(e.STYLE_SOLID,new u([0,255,255]),2));this.fillSymbol||(this.fillSymbol=new k(k.STYLE_NULL,new e(e.STYLE_SOLID,new u([0,255,255]),2),new u([0,0,0,0])));this.clusterFillSymbol||
(this.clusterFillSymbol=new k(k.STYLE_SOLID,new e(e.STYLE_SOLID,new u([0,255,255]),1.33),null))},disableHighlight:function(A){var C=this._highlighted;C&&(C.hide(),A.graphics.remove(C),delete this._highlighted);this._untrackMapLevelChange();this.markerSymbol=this.lineSymbol=this.fillSymbol=null},showHighlight:function(){var A=this.features&&this.features[this.selectedIndex];this._highlighted&&A&&A.geometry&&this._highlighted.show()},hideHighlight:function(){this._highlighted&&this._highlighted.hide()},
updateHighlight:function(A,C){var z=C.geometry,q=this._highlighted;if(z&&q){q.hide();!q._graphicsLayer&&A&&A.graphics.add(q);q.setGeometry(f.fromJson(z.toJson()));switch(z.type){case "point":case "multipoint":var v=C.getLayer(),B=C.symbol||v&&v._getSymbol(C);if(v&&B){var D;z=B.xoffset||0;var x=B.yoffset||0,E=B.angle||0;switch(B.type){case "simplemarkersymbol":var G=D=B.size||0;break;case "picturemarkersymbol":G=B.width||0;D=B.height||0;break;case "textsymbol":G=D=B.font&&B.font.size||0}var I=C.symbol?
null:v._getRenderer(C);(v=this._getSizeInfo(I))?A=C=I.getSize(C,{sizeInfo:v,shape:B.style,resolution:A&&A.getResolutionInMeters&&A.getResolutionInMeters()}):null!=C.size?A=C=C.size:(A=G,C=D);I=this.markerSymbol;A&&C&&(z&&(z=z/G*A),x&&(x=x/D*C),I._setDim(A+4,C+4,0));I.setOffset(z,x);I.setAngle(E)}break;case "polyline":I=this.lineSymbol;break;case "polygon":I=this.fillSymbol}q.setSymbol(I)}else q&&q.hide()},showClosestFirst:function(A){var C=this.features;if(C&&C.length){if(1<C.length){var z,q=Infinity,
v=-1,B,D=b.getLength,x=A.spatialReference;A=A.normalize();for(z=C.length-1;0<=z;z--)if(B=C[z].geometry){var E=B.spatialReference;var G=0;try{var I="point"===B.type?B:B.getExtent().getCenter();I=I.normalize();x&&E&&!x.equals(E)&&x._canProject(E)&&(I=x.isWebMercator()?c.geographicToWebMercator(I):c.webMercatorToGeographic(I));G=D(A,I)}catch(L){}0<G&&G<q&&(q=G,v=z)}0<v&&(C.splice(0,0,C.splice(v,1)[0]),this.select(0))}}else this.deferreds&&(this._marked=A)},_trackMapLevelChange:function(A){this._untrackMapLevelChange();
this._mapLevelChangeHandle=A.on("extent-change",y.hitch(this,function(C){C.levelChange&&this._checkFeatureResolution()}))},_untrackMapLevelChange:function(){this._mapLevelChangeHandle&&(this._mapLevelChangeHandle.remove(),this._mapLevelChangeHandle=null)},_unbind:function(A){A=a.indexOf(this.deferreds,A);if(-1!==A)return this.deferreds.splice(A,1),this.deferreds.length?1:(this.deferreds=null,2)},_fireComplete:function(A){var C=this._marked;C&&(this._marked=null,this.showClosestFirst(C));this.onDfdComplete(A)},
_updateFeatures:function(A,C){if(A){if(this.deferreds&&(A=this._unbind(A)))if(C&&C instanceof Error){if(this._fireComplete(C),2===A)this.onSetFeatures()}else if(C&&C.length)if(this.features){if(C=a.filter(C,function(z){return-1===a.indexOf(this.features,z)},this),this.features=this.features.concat(C),this.count=this.features.length,this._fireComplete(),2===A)this.onSetFeatures()}else{this.features=C;this.count=C.length;this.selectedIndex=0;this._fireComplete();if(2===A)this.onSetFeatures();this.select(0)}else if(this._fireComplete(),
2===A)this.onSetFeatures()}else this.features=C,this.count=C.length,this.selectedIndex=0,this.onSetFeatures(),this.select(0)},_getSizeInfo:function(A){return A?A.sizeInfo||a.filter(A.visualVariables,p)[0]:null},_resetUpdateEndListeners:function(){this._featureLayers={};a.forEach(this._updateEndHandles,function(A){A.remove()});this._updateEndHandles=[]},_processFeatures:function(){a.forEach(this.features,function(A){(A=A.getLayer())&&!this._featureLayers[A.id]&&(1===A.currentMode||0===A.currentMode&&
6===A.mode)&&A.objectIdField&&A.hasXYFootprint&&A.queryFeatures&&(this._featureLayers[A.id]=A,A=A.on("update-end",y.hitch(this,this._fLyrUpdateEndHandler)),this._updateEndHandles.push(A))},this)},_fLyrUpdateEndHandler:function(A){if(!A.error){var C=this,z=A.target,q=z.getSelectedFeatures(),v=0===z.currentMode&&6===z.mode,B={},D=[];a.forEach(this.features,function(x){if(x.getLayer()===z){var E=x.attributes[z.objectIdField];B[E]=x;D.push(E)}});D.length&&(A=new m,A.objectIds=D,z.queryFeatures(A,function(x){a.forEach(x.features,
function(E){var G=B[E.attributes[z.objectIdField]],I=!1;G.geometry!==E.geometry||z.hasWebGLSurface()?(G.setGeometry(E.geometry),I=!0):v&&q&&-1!==a.indexOf(q,E)&&(I=!0);I&&this._highlighted&&G===this.getSelectedFeature()&&this._highlighted.setGeometry(E.geometry)},C)}))}},_checkFeatureResolution:function(){var A=this.getSelectedFeature(),C=this.map;if(A&&C){var z=A.getLayer();if(z){var q=A.getResolution();2===z.currentMode&&A.geometry&&q&&q>C.getResolution()&&(C=C.getResolutionForPopup(),(z=this._refetchFeature(A,
C,z))&&z.then(y.hitch(this,this._updateFeatureResolution,A,C)))}}},_refetchFeature:function(A,C,z){if(A=this._createQueryForCustomResolution(A,C,z))return z.queryFeatures(A).then(function(q){return q&&q.features[0]})},_createQueryForCustomResolution:function(A,C,z){z=z.objectIdField;var q=A.attributes;q=q&&z&&q[z];if(null==q)return null;var v=new m;v.objectIds=[q];v.maxAllowableOffset=C;v.outFields=[z];v.outSpatialReference=A.geometry.spatialReference;return v},_updateFeatureResolution:function(A,
C,z){A.getResolution()!==C&&(A.setResolution(C),A.setGeometry(z.geometry),this._highlighted&&A===this.getSelectedFeature()&&this._highlighted.setGeometry(A.geometry))}});t("extend-esri")&&(r.PopupBase=F);return F})},"esri/graphic":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./domUtils ./lang ./InfoTemplate ./geometry/jsonUtils ./symbols/jsonUtils".split(" "),function(F,y,a,u,n,t,r,l,d){function f(){}F=F(null,{declaredClass:"esri.Graphic",constructor:function(b,c,g,e){this._construct();
b&&!b.declaredClass?(this.geometry=b.geometry?l.fromJson(b.geometry):null,this.symbol=b.symbol?d.fromJson(b.symbol):null,this.attributes=b.attributes||null,this.infoTemplate=b.infoTemplate?new r(b.infoTemplate):null):(this.geometry=b,this.symbol=c,this.attributes=g,this.infoTemplate=e)},_geomVersion:0,_resolution:null,_shape:null,_bgShape:null,_dataAttrs:null,_layer:null,_sourceLayer:null,_graphicsLayer:null,_parentGraphic:null,_suspended:!1,size:null,visible:!0,_aggregationSourceLayer:null,_aggregationInfo:null,
_computedAttributes:null,_computedVersion:null,_computedGeomVersion:null,_isSnapTarget:!0,getParentGraphic:function(){return this._parentGraphic},setParentGraphic:function(b){this._parentGraphic=b},setSize:function(b){this.size=b;return this},getAggregationSourceLayer:function(){return this._aggregationSourceLayer},setAggregationSourceLayer:function(b){this._aggregationSourceLayer=b;return this},isAggregate:function(){return!!this._aggregationInfo},getAggregationInfo:function(){return this._aggregationInfo},
setAggregationInfo:function(b){this._aggregationInfo=b;return this},getChildGraphics:function(){var b=this.getAggregationSourceLayer();return b?b.getChildGraphics(this):[]},getDojoShape:function(){return this._shape},getShapes:function(){var b=[];this._shape&&b.push(this._shape);this._bgShape&&b.push(this._bgShape);return b},getNode:function(){var b=this._shape&&this._shape.getNode();return b&&b.nodeType?b:null},getNodes:function(){var b=this.getShapes(),c,g,e=b.length,h=[];for(g=0;g<e;g++)(c=b[g]&&
b[g].getNode())&&c.nodeType&&h.push(c);return h},getLayer:function(){return this._layer},getSourceLayer:function(){return this._sourceLayer||this._layer},clone:function(){var b=new this.constructor(this.toJson());b.visible=this.visible;b._layer=this._layer;b._sourceLayer=this._sourceLayer;b._aggregationSourceLayer=this._aggregationSourceLayer;b._aggregationInfo=this._aggregationInfo;b._resolution=this._resolution;return b},draw:function(){var b=this._graphicsLayer;b&&b._draw(this,!0);return this},
setGeometry:function(b){this.geometry=b;this._geomVersion++;var c=this._graphicsLayer;c&&(c._updateExtent(this),this.draw(),b&&"polyline"===b.type&&c._updateSVGMarkers());return this},setResolution:function(b){this._resolution=b;return this},getResolution:function(){return this._resolution},setSymbol:function(b,c){var g=this._graphicsLayer,e=this._shape;this.symbol=b;g&&(c&&e&&g._removeShape(this),this.draw());return this},setAttributes:function(b){this.attributes=b;this.clearCache();return this},
setInfoTemplate:function(b){this.infoTemplate=b;return this},getInfoTemplate:function(){return this._getEffInfoTemplate()},_getEffInfoTemplate:function(){var b=this.getLayer();return this.infoTemplate||b&&b.infoTemplate},getTitle:function(){var b=this.getInfoTemplate(),c=b&&b.title;if(y.isFunction(c))c=c.call(b,this);else if(y.isString(c)){var g=(b=this.getLayer())&&b._getDateOpts;c=t.substitute(this.attributes,c,{first:!0,dateFormat:g&&g.call(b)})}return c},getContent:function(){var b=this.getInfoTemplate(),
c=b&&b.content;if(y.isFunction(c))c=c.call(b,this);else if(y.isString(c)){var g=(b=this.getLayer())&&b._getDateOpts;c=t.substitute(this.attributes,c,{dateFormat:g&&g.call(b)})}return c},attr:function(b,c){null==c||this._dataAttrs||(this._dataAttrs={});this._dataAttrs&&(this._dataAttrs[b]=c,this._setDataAttr(b,c));return this},_isSuspended:function(){return this._suspended},_suspend:function(){this._suspended=!0;this.draw()},_resume:function(){this._suspended=!1;this.draw()},show:function(){this.visible=
!0;this.attr("data-hidden");var b;if(this.getShapes().length){var c=this.getNodes();var g=c.length;for(b=0;b<g;b++)n.show(c[b])}else this.draw();(c=this._graphicsLayer)&&c._graphicVisibilityChanged(this);return this},hide:function(){this.visible=!1;this.attr("data-hidden","");var b=this._graphicsLayer,c,g;if(b){if("canvas-2d"===b.surfaceType)b._removeShape(this);else{var e=this.getNodes();if(g=e.length)for(c=0;c<g;c++)n.hide(e[c])}b._graphicVisibilityChanged(this)}return this},toJson:function(){var b=
{};this.geometry&&(b.geometry=this.geometry.toJson());this.attributes&&(b.attributes=y.mixin({},this.attributes));this.symbol&&(b.symbol=this.symbol.toJson());this.infoTemplate&&(b.infoTemplate=this.infoTemplate.toJson());return b},_setDataAttr:function(b,c){var g=this.getNodes(),e,h=g.length;for(e=0;e<h;e++)this._setDOMDataAttr(g[e],b,c)},_setDOMDataAttr:function(b,c,g){null==g?b.removeAttribute(c):b.setAttribute(c,g)},_applyDataAttrs:function(){var b=this._dataAttrs;if(b){var c=this.getNodes(),
g,e=c.length;for(g=0;g<e;g++)for(var h in b)this._setDOMDataAttr(c[g],h,b[h])}},_getViewInfo:function(b){return(b=(b=b||this.getLayer())&&b.getMap())&&b.getViewInfo()},evaluateExpression:function(b,c){return this._getDataValue(b._attributeDef,b._attributeCache,null,null,b,c)},_getDataValue:function(b,c,g,e,h,k){var m=c.id,w=this.attributes,p=b.field,A=c.isNumeric,C=null;if(m){var z=this._computedAttributes,q=this._computedVersion,v=this._computedGeomVersion;e=this._getViewInfo(e);var B=!(!h||!h.async),
D=k&&k.skipCache||B,x=!k||!1!==k.strictReturnType,E=c.dependsOnView||c.isJSFunc,G=c.dependsOnGeometry;z||(z=this._computedAttributes={});E&&!q&&(q=this._computedVersion={});G&&!v&&(v=this._computedGeomVersion={});var I=E&&q[m]!==e.version||G&&v[m]!==this._geomVersion;C=z[m];if(void 0===C||I||D)C=null,c.hasExpr?C=h?h.evaluate(k&&k.context):g.executeFunction(c.compiledFunc,g.createExecContext(this,e)):c.isJSFunc?C=p(this,b):w&&(C=w[p],A&&this._isValidNumber(C)&&(c=b.normalizationType||"field",g=C,C=
null,h=b.normalizationTotal,b=w[b.normalizationField],"log"===c&&0!==g?C=Math.log(g)*Math.LOG10E:"percent-of-total"===c&&this._isValidNumber(h)&&0!==h?C=g/h*100:"field"===c&&this._isValidNumber(b)&&0!==b&&(C=g/b))),x&&(B?A&&(this._construct(),C=C.then(this._sanitizeNumericValue)):C=this._sanitizeValue(C,A)),D||(z[m]=C,E&&(q[m]=e.version),G&&(v[m]=this._geomVersion))}else w&&(C=this._sanitizeValue(w[p],A));return C},_sanitizeValue:function(b,c){c&&!this._isValidNumber(b)&&(b=null);return b},_sanitizeNumericValue:function(b){return this._sanitizeValue(b,
!0)},_construct:function(){this._constructed||(this._sanitizeNumericValue=y.hitch(this,this._sanitizeNumericValue),this._constructed=!0)},_isValidNumber:function(b){return"number"===typeof b&&!isNaN(b)&&Infinity!==b&&-Infinity!==b},clearCache:function(b){if(null!=b){var c=this._computedAttributes,g=this._computedVersion,e=this._computedGeomVersion;c&&(c[b]=void 0);g&&(g[b]=void 0);e&&(e[b]=void 0)}else this._computedAttributes=this._computedVersion=this._computedGeomVersion=null}});F.prototype.getShape=
F.prototype.getDojoShape;f.prototype=F.prototype;F.simpleConstructor=f;a("extend-esri")&&(u.Graphic=F);return F})},"esri/InfoTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(F,y,a,u,n){F=F(null,{declaredClass:"esri.InfoTemplate",constructor:function(t,r){t&&y.isObject(t)&&!y.isFunction(t)?y.mixin(this,t):(this.title=t||"${*}",this.content=r||"${*}")},setTitle:function(t){this.title=t;return this},setContent:function(t){this.content=t;return this},
toJson:function(){return n.fixJson({title:this.title,content:this.content})}});a("extend-esri")&&(u.InfoTemplate=F);return F})},"esri/symbols/jsonUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has ../kernel ./SimpleMarkerSymbol ./PictureMarkerSymbol ./SimpleLineSymbol ./CartographicLineSymbol ./SimpleFillSymbol ./PictureFillSymbol ./TextSymbol".split(" "),function(F,y,a,u,n,t,r,l,d,f,b){var c={createDefaultSymbol:function(g){switch(g){case "esriGeometryPoint":case "esriGeometryMultipoint":var e=
c.createDefaultMarkerSymbol();break;case "esriGeometryPolyline":e=c.createDefaultLineSymbol();break;case "esriGeometryPolygon":case "esriGeometryEnvelope":case "esriGeometryMultiPatch":e=c.createDefaultFillSymbol()}return e},createDefaultMarkerSymbol:function(){return new n},createDefaultLineSymbol:function(){return new r},createDefaultFillSymbol:function(){return new d},getFirstSupportedSymbol:function(g){var e;y.some(g,function(h){h&&-1<c.supportedSymbolTypes.indexOf(h.type)&&(e=h);return!!e});
return e},isPointSymbol:function(g){return g?-1<c.supportedPointSymbolTypes.indexOf(g.type):!1},supportedPointSymbolTypes:["esriSMS","esriPMS","esriTS"],supportedSymbolTypes:"esriSMS esriPMS esriTS esriSLS esriCLS esriSFS esriPFS".split(" "),fromJson:function(g,e){var h=null;switch(g.type){case "esriSMS":h=new n(g);break;case "esriPMS":h=new t(g);break;case "esriTS":h=new b(g);break;case "esriSLS":h=void 0!==g.cap?new l(g):new r(g);break;case "esriCLS":h=new l(g);break;case "esriSFS":h=new d(g);break;
case "esriPFS":h=new f(g);break;default:h=(g=e&&e.geometryType)?c.createDefaultSymbol(g):null}return h},getShapeDescriptors:function(g){return g&&g.getShapeDescriptors?g.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null}}};a("extend-esri")&&F.mixin(F.getObject("symbol",!0,u),c);return c})},"esri/symbols/PictureMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol".split(" "),function(F,y,a,u,n,t,r,l){var d=
{url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};F=F(l,{declaredClass:"esri.symbol.PictureMarkerSymbol",type:"picturemarkersymbol",constructor:function(f,b,c){f?y.isString(f)?(this.url=f,b&&(this.width=b),c&&(this.height=c)):(this.width=u.pt2px(null==f.width?d.width:f.width),this.height=u.pt2px(null==f.height?d.height:f.height),b=f.imageData,9>a("ie")||!b||(c=this.url,this.url="data:"+(f.contentType||"image")+";base64,"+b,this.imageData=c)):(y.mixin(this,d),this.width=u.pt2px(this.width),this.height=
u.pt2px(this.height))},getStroke:function(){return null},getFill:function(){return null},setWidth:function(f){this.width=f;return this},setHeight:function(f){this.height=f;return this},setUrl:function(f){f!==this.url&&(delete this.imageData,delete this.contentType);this.url=f;return this},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null}},toJson:function(){var f=
this.url,b=this.imageData;if(0===f.indexOf("data:")){var c=f;f=b;b=c.indexOf(";base64,")+8;b=c.substr(b)}!y.isString(f)||0!==f.indexOf("/")&&0!==f.indexOf("//")&&0!==f.indexOf("./")&&0!==f.indexOf("../")||(f=r.getAbsoluteUrl(f));c=u.px2pt(this.width);c=isNaN(c)?void 0:c;var g=u.px2pt(this.height);g=isNaN(g)?void 0:g;f=t.fixJson(y.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:f,imageData:b,contentType:this.contentType,width:c,height:g}));delete f.color;delete f.size;f.imageData||delete f.imageData;
return f}});F.defaultProps=d;a("extend-esri")&&(y.setObject("symbol.PictureMarkerSymbol",F,n),n.symbol.defaultPictureMarkerSymbol=d);return F})},"esri/symbols/CartographicLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./SimpleLineSymbol".split(" "),function(F,y,a,u,n,t,r,l){var d={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",
STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},f={color:[0,0,0,1],style:d.STYLE_SOLID,width:1,cap:d.CAP_BUTT,join:d.JOIN_MITER,miterLimit:10};F=F(l,{declaredClass:"esri.symbol.CartographicLineSymbol",type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",
round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",bevel:"esriLJSBevel"},constructor:function(b,c,g,e,h,k){b?y.isString(b)?(this.style=b,c&&(this.color=c),void 0!==g&&(this.width=g),e&&(this.cap=e),h&&(this.join=h),void 0!==k&&(this.miterLimit=k)):(this.cap=r.valueOf(this._caps,b.cap),this.join=r.valueOf(this._joins,b.join),this.width=n.pt2px(b.width),this.miterLimit=n.pt2px(b.miterLimit)):(y.mixin(this,f),this.color=new a(this.color),this.width=n.pt2px(this.width),
this.miterLimit=n.pt2px(this.miterLimit))},setCap:function(b){this.cap=b;return this},setJoin:function(b){this.join=b;return this},setMiterLimit:function(b){this.miterLimit=b;return this},getStroke:function(){return y.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:this.join===d.JOIN_MITER?this.miterLimit:this.join})},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){var b=
n.px2pt(this.miterLimit);b=isNaN(b)?void 0:b;return r.fixJson(y.mixin(this.inherited("toJson",arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:b}))}});y.mixin(F,d);F.defaultProps=f;u("extend-esri")&&(y.setObject("symbol.CartographicLineSymbol",F,t),t.symbol.defaultCartographicLineSymbol=f);return F})},"esri/symbols/SimpleFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./FillSymbol ./SimpleLineSymbol require".split(" "),
function(F,y,a,u,n,t,r,l,d,f){var b={STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"},c={style:b.STYLE_SOLID,color:[0,0,0,.25]};F=F(l,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",
_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(g,e,h){g?y.isString(g)?(this.style=g,void 0!==e&&(this.outline=e),void 0!==h&&(this.color=h)):this.style=r.valueOf(this._styles,g.style):(y.mixin(this,c),this.outline=new d(this.outline),this.color=new a(this.color))},setStyle:function(g){this.style=
g;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){var g=this.style;return g===b.STYLE_NULL?null:g===b.STYLE_SOLID?this.color:y.mixin({},n.defaultPattern,{src:f.toUrl("../images/symbol/sfs/"+g+".png"),width:10,height:10})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){return r.fixJson(y.mixin(this.inherited("toJson",
arguments),{type:"esriSFS",style:this._styles[this.style]}))}});y.mixin(F,b);F.defaultProps=c;u("extend-esri")&&(y.setObject("symbol.SimpleFillSymbol",F,t),t.symbol.defaultSimpleFillSymbol=c);return F})},"esri/symbols/FillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Symbol ./SimpleLineSymbol".split(" "),function(F,y,a,u,n,t){F=F(n,{declaredClass:"esri.symbol.FillSymbol",constructor:function(r){r&&y.isObject(r)&&r.outline&&(this.outline=new t(r.outline))},setOutline:function(r){this.outline=
r;return this},toJson:function(){var r=this.inherited("toJson",arguments);this.outline&&(r.outline=this.outline.toJson());return r}});a("extend-esri")&&y.setObject("symbol.FillSymbol",F,u);return F})},"esri/symbols/PictureFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./FillSymbol".split(" "),function(F,y,a,u,n,t,r,l){var d={xoffset:0,yoffset:0,width:12,height:12};F=F(l,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",
xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(f,b,c,g){f?y.isString(f)?(this.url=f,void 0!==b&&(this.outline=b),void 0!==c&&(this.width=c),void 0!==g&&(this.height=g)):(this.xoffset=u.pt2px(f.xoffset),this.yoffset=u.pt2px(f.yoffset),this.width=u.pt2px(f.width),this.height=u.pt2px(f.height),b=f.imageData,9>a("ie")||!b||(c=this.url,this.url="data:"+(f.contentType||"image")+";base64,"+b,this.imageData=c)):(y.mixin(this,d),this.width=u.pt2px(this.width),this.height=u.pt2px(this.height))},
setWidth:function(f){this.width=f;return this},setHeight:function(f){this.height=f;return this},setOffset:function(f,b){this.xoffset=f;this.yoffset=b;return this},setUrl:function(f){f!==this.url&&(delete this.imageData,delete this.contentType);this.url=f;return this},setXScale:function(f){this.xscale=f;return this},setYScale:function(f){this.yscale=f;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return y.mixin({},u.defaultPattern,{src:this.url,
width:this.width*this.xscale,height:this.height*this.yscale,x:this.xoffset,y:this.yoffset})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var f=this.url,b=this.imageData;if(0===f.indexOf("data:")){var c=f;f=b;b=c.indexOf(";base64,")+8;b=c.substr(b)}!y.isString(f)||0!==f.indexOf("/")&&0!==f.indexOf("//")&&0!==f.indexOf("./")&&0!==f.indexOf("../")||(f=r.getAbsoluteUrl(f));
c=u.px2pt(this.width);c=isNaN(c)?void 0:c;var g=u.px2pt(this.height);g=isNaN(g)?void 0:g;var e=u.px2pt(this.xoffset);e=isNaN(e)?void 0:e;var h=u.px2pt(this.yoffset);h=isNaN(h)?void 0:h;f=t.fixJson(y.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:f,imageData:b,contentType:this.contentType,width:c,height:g,xoffset:e,yoffset:h,xscale:this.xscale,yscale:this.yscale}));f.imageData||delete f.imageData;return f}});F.defaultProps=d;a("extend-esri")&&(y.setObject("symbol.PictureFillSymbol",F,
n),n.symbol.defaultPictureFillSymbol=d);return F})},"esri/symbols/TextSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Symbol ./Font".split(" "),function(F,y,a,u,n,t,r,l,d){var f={type:"textsymbol",x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:u.defaultFont,angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},b={start:"left",middle:"center",end:"right"},c={left:"start",center:"middle",right:"end",justify:"start"},
g={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},e=document.createElement("canvas");F=F(l,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(h,k,m){y.mixin(this,f);this.font=new d(this.font);this.color=new r(this.color);h&&(y.isObject(h)?(y.mixin(this,h),this.color&&t.isDefined(this.color[0])&&(this.color=r.toDojoColor(this.color)),this.type="textsymbol",this.font=new d(this.font),this.xoffset=u.pt2px(this.xoffset),this.yoffset=
u.pt2px(this.yoffset),this.angle&&(this.angle*=-1),this.haloSize&&(this.haloSize=u.pt2px(this.haloSize)),this.haloColor&&(this.haloColor=r.toDojoColor(this.haloColor))):(this.text=h,k&&(this.font=k),m&&(this.color=m)));this.setAlign(this.align||this.getSVGAlign())},setFont:function(h){this.font=h;return this},setSize:function(h){this.font.size=h;return this},setAngle:function(h){this.angle=h;return this},setOffset:function(h,k){this.xoffset=h;this.yoffset=k;return this},setHaloColor:function(h){this.haloColor=
h;return this},setHaloSize:function(h){this.haloSize=h;return this},setAlign:function(h){this.align=h;this.setHorizontalAlignment(h&&b[h.toLowerCase()]||"center");return this},setHorizontalAlignment:function(h){this.horizontalAlignment=h;return this},getSVGAlign:function(){var h=this.horizontalAlignment;return h=h&&c[h.toLowerCase()]||"middle"},setVerticalAlignment:function(h){this.verticalAlignment=h;return this},getSVGBaseline:function(){var h=this.verticalAlignment;return h&&g[h.toLowerCase()]||
"alphabetic"},getSVGBaselineShift:function(){return"bottom"===this.verticalAlignment?"super":null},setDecoration:function(h){this.decoration=h;this.font||this.setFont(new d);this.font.setDecoration(h);return this},setRotated:function(h){this.rotated=h;return this},setKerning:function(h){this.kerning=h;return this},setText:function(h){this.text=h;return this},getStroke:function(){return null},getFill:function(){return this.color},getWidth:function(){var h=e&&e.getContext&&e.getContext("2d");if(h){var k=
this.font;h.font=(k.style?k.style:u.defaultFont.style)+" "+(k.weight?k.weight:u.defaultFont.weight)+" "+(k.size?k.size:u.defaultFont.size)+"px "+(k.family?k.family:u.defaultFont.family);return h.measureText(this.text).width}h=this.getHeight();k=0;var m;for(m=0;m<this.text.length;m++){var w=this.text.charAt(m);k=w==w.toUpperCase()?k+.7*h:k+.5*h}return k},getHeight:function(){return u.normalizedLength(this.font.size)},getShapeDescriptors:function(){var h=this.font;if(h){var k={};h.size&&(k.size=h.size);
h.style&&(k.style=h.style);h.variant&&(k.variant=h.variant);h.decoration&&(k.decoration=h.decoration);h.weight&&(k.weight=h.weight);h.family&&(k.family=h.family)}return{defaultShape:{type:"text",text:this.text,x:0,y:this.getHeight()/4,align:"middle",decoration:this.decoration||h&&h.decoration,rotated:this.rotated,kerning:this.kerning},font:k,fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var h=u.px2pt(this.xoffset),k=u.px2pt(this.yoffset),m=u.px2pt(this.haloSize);h=isNaN(h)?void 0:
h;k=isNaN(k)?void 0:k;m=isNaN(m)?void 0:m;return t.fixJson(y.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,haloSize:m,haloColor:this.haloColor&&r.toJsonColor(this.haloColor),verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle&&-1*this.angle,xoffset:h,yoffset:k,text:this.text,rotated:this.rotated,
kerning:this.kerning,font:this.font.toJson()}))}});y.mixin(F,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});F.defaultProps=f;a("extend-esri")&&(y.setObject("symbol.TextSymbol",F,n),n.symbol.defaultTextSymbol=f);return F})},"esri/symbols/Font":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang".split(" "),function(F,
y,a,u,n,t){F=F(null,{declaredClass:"esri.symbol.Font",constructor:function(r,l,d,f,b){r?y.isObject(r)?y.mixin(this,r):(this.size=r,parseFloat(this.size)==this.size&&(this.size+="px"),void 0!==l&&(this.style=l),void 0!==d&&(this.variant=d),void 0!==f&&(this.weight=f),void 0!==b&&(this.family=b)):y.mixin(this,u.defaultFont);parseFloat(this.size)==this.size&&(this.size+="pt");9>a("ie")&&this.size&&y.isString(this.size)&&-1<this.size.indexOf("em")&&(this.size=u.pt2px(12*parseFloat(this.size))+"px");this.size=
this._convert2PxSize(this.size)},setSize:function(r){this.size=this._convert2PxSize(r);return this},_convert2PxSize:function(r){var l;parseFloat(r)==r?l=r:y.isString(r)&&(-1<r.indexOf("pt")?l=u.pt2px(parseFloat(r)):-1<r.indexOf("px")?l=parseFloat(r):-1<r.indexOf("em")?l=u.pt2px(12*parseFloat(r)):-1<r.indexOf("%")&&(l=u.pt2px(.12*parseFloat(r))));return l},setStyle:function(r){this.style=r;return this},setVariant:function(r){this.variant=r;return this},setWeight:function(r){this.weight=r;return this},
setFamily:function(r){this.family=r;return this},setDecoration:function(r){this.decoration=r;return this},toJson:function(){return t.fixJson({size:u.px2pt(this.size),style:this.style,decoration:this.decoration,weight:this.weight,family:this.family})}});y.mixin(F,{STYLE_NORMAL:"normal",STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});a("extend-esri")&&y.setObject("symbol.Font",
F,n);return F})},"esri/tasks/query":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../geometry/jsonUtils ./SpatialRelationship dojo/has!extend-esri?./QueryTask dojo/has!extend-esri?./RelationshipQuery dojo/has!extend-esri?./StatisticDefinition".split(" "),function(F,y,a,u,n,t,r,l){var d=F(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=d.SPATIAL_REL_INTERSECTS},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,
objectIds:null,returnGeometry:!1,returnCentroid:null,returnDistinctValues:!1,returnExceededLimitFeatures:null,maxRecordCountFactor:null,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,distance:null,units:null,resultOffset:null,resultRecordCount:null,resultType:null,cacheHint:null,sqlFormat:null,quantizationParameters:null,_units:{meters:"esriSRUnit_Meter",kilometers:"esriSRUnit_Kilometer",feet:"esriSRUnit_Foot",miles:"esriSRUnit_StatuteMile",
"nautical-miles":"esriSRUnit_NauticalMile","us-nautical-miles":"esriSRUnit_USNauticalMile"},toJson:function(f){var b={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision,sqlFormat:this.sqlFormat},c=f&&f.geometry||this.geometry,g=this.objectIds,e=this.outFields,h=this.outSpatialReference,k=this.groupByFieldsForStatistics,m=this.orderByFields,w=this.outStatistics;f=
this.distance;c&&(b.geometry=c,b.geometryType=r.getJsonType(c),b.inSR=c.spatialReference.wkid||u.toJson(c.spatialReference.toJson()));g&&(b.objectIds=g.join(","));e&&(b.outFields=e.join(","));null!=this.returnCentroid&&(b.returnCentroid=this.returnCentroid);this.returnDistinctValues&&(b.returnDistinctValues=!0);null!=this.returnExceededLimitFeatures&&(b.returnExceededLimitFeatures=this.returnExceededLimitFeatures);null!=this.maxRecordCountFactor&&(b.maxRecordCountFactor=this.maxRecordCountFactor);
k&&(b.groupByFieldsForStatistics=k.join(","));m&&(b.orderByFields=m.join(","));if(w){var p=[];a.forEach(w,function(A){p.push(A.toJson())});b.outStatistics=u.toJson(p)}h?b.outSR=h.wkid||u.toJson(h.toJson()):c&&(b.outSR=c.spatialReference.wkid||u.toJson(c.spatialReference.toJson()));c=this.timeExtent;b.time=c?c.toJson().join(","):null;(c=this.relationParam)&&this.spatialRelationship===d.SPATIAL_REL_RELATION&&(b.relationParam=c);f&&(b.distance=this.distance,this.hasOwnProperty("units")?b.units=this._units[this.units]||
this._units.meters:(console.warn("esri/tasks/query::no distance unit provided, defaulting to meters"),b.units=this._units.meters));this.hasOwnProperty("start")&&(b.resultOffset=this.start,b.resultRecordCount=10,""===b.where&&(b.where="1\x3d1"));this.hasOwnProperty("num")&&(b.resultRecordCount=this.num);b.resultType=this.resultType;null!=this.cacheHint&&(b.cacheHint=this.cacheHint);b.pixelSize=this.pixelSize?u.toJson(this.pixelSize.toJson()):null;b.multipatchOption=this.multipatchOption;this.quantizationParameters&&
(b.quantizationParameters=u.toJson(this.quantizationParameters));b._ts=this._ts;return b}});y.mixin(d,l);n("extend-esri")&&y.setObject("tasks.Query",d,t);return d})},"esri/tasks/SpatialRelationship":function(){define(["dojo/_base/lang","dojo/has","../kernel"],function(F,y,a){var u={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",
SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};y("extend-esri")&&F.setObject("tasks._SpatialRelationship",u,a);return u})},"esri/plugins/popupManager":function(){define(["../PopupManager"],function(F){return{add:function(y,a){y.popupManager||(y.popupManager=new F(a),y.popupManager.setMap(y))},remove:function(y){var a=y.popupManager;a&&(a.unsetMap(),y.popupManager=void 0)}}})},
"esri/PopupManager":function(){define("./geometry/Extent ./geometry/ScreenPoint ./kernel ./layerUtils ./tasks/query dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/lang esri/sniff dojo/on dojo/promise/all dojo/Stateful require".split(" "),function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h){var k;l=l(e,{declaredClass:"esri.PopupManager",enabled:!1,map:null,_mapClickHandle:null,_featureLayersCache:{},constructor:function(m){this._mapClickHandler=f.hitch(this,this._mapClickHandler)},
setMap:function(m){if(this.map)if(m!==this.map)this.unsetMap();else return;this.map=m;this._setupClickHandler()},unsetMap:function(){this.map&&(this.map=null);this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null)},getMapLayer:function(m){var w;if(m&&(w=m.getLayer())&&(m=w.id,this._featureLayersCache[m])){var p=m.lastIndexOf("_");-1<p&&(m=m.substring(0,p),w=this.map.getLayer(m))}return w},_enabledSetter:function(m){this.enabled=m;this._setupClickHandler()},_setupClickHandler:function(){this._mapClickHandle&&
(this._mapClickHandle.remove(),this._mapClickHandle=null);this.enabled&&this.map&&(this._mapClickHandle=this.map.on("click",this._mapClickHandler))},_mapClickHandler:function(m){var w=this.map.infoWindow,p=m.graphic;w&&this.map.loaded&&(w.clearFeatures&&w.setFeatures?this._showPopup(m):p&&p.getInfoTemplate()&&this._showInfoWindow(p,m.mapPoint))},_showPopup:function(m){var w=this.map,p=w.infoWindow,A=this,C=[],z=[w.graphics].concat(r.map(w.graphicsLayerIds,w.getLayer,w));r.forEach(z,function(B){var D=
B.getFeatureReduction&&B.getFeatureReduction();B&&B.loaded&&B.infoTemplate&&!B.suspended&&(!D||!A._isReductionEnabled(B)||D.infoTemplate&&!D.disablePopup)&&C.push(B)});var q=[];r.forEach(w.layerIds,function(B){(B=w.getLayer(B))&&B.loaded&&!B.suspended&&(A._isImageServiceLayer(B)&&B.infoTemplate?C.push(B):"esri.layers.WMSLayer"===B.declaredClass&&B.getFeatureInfoURL?C.push(B):"esri.layers.ArcGISDynamicMapServiceLayer"!==B.declaredClass&&"esri.layers.ArcGISTiledMapServiceLayer"!==B.declaredClass||!B.infoTemplates||
q.push(B))});var v=w.getResolutionForPopup();this._getSubLayerFeatureLayers(q,v).then(function(B){C=C.concat(B);B=m.graphic&&m.graphic.getParentGraphic()||m.graphic;var D=null;B&&B.getInfoTemplate()&&!A._isImageServiceLayer(B.getLayer())&&(D=B);if(C.length||D){var x=A._calculateClickTolerance(C),E=m.screenPoint;B=w.toMap(new y(E.x-x,E.y+x));x=w.toMap(new y(E.x+x,E.y-x));var G=new F(B.x,B.y,x.x,x.y,w.spatialReference);if(G=G.intersects(w.extent)){var I=new n,L=!!D,Y=!0;B=r.map(C,function(X){I.timeExtent=
X.useMapTime?w.timeExtent:null;var fa=A._isReductionEnabled(X);X=fa?X.getFeatureReductionLayer():X;var sa=A._featureLayersCache[X.id];if(A._isImageServiceLayer(X)){I.geometry=m.mapPoint;Y=!1;var T={rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0};A._isTiledImageServiceLayer(X)?T=X.fetchPopupFromTiles(I):(T=X.queryVisibleRasters(I,T),T.addCallback(function(){var ma=X.getVisibleRasters();L=L||0<ma.length;return ma}))}else if("esri.layers.WMSLayer"===X.declaredClass){T=new d;var ka=X._getPopupGraphic(w,
m.screenPoint);ka?(T.resolve([ka]),L=!0):T.resolve([])}else sa||"function"===typeof X.queryFeatures&&(0===X.currentMode||1===X.currentMode)?(I.geometry=G,T=X.queryFeatures(I),T.addCallback(function(ma){var wa=[];r.forEach(ma.features,function(ja){ja.visible&&(wa.push(ja),sa&&ja.setResolution(v))});L=L||0<wa.length;return wa})):(T=new d,ka=r.filter(X.graphics,function(ma){return ma&&ma.visible&&G.intersects(ma.geometry)}),fa&&A._isParentLayer(X,D)&&(fa=A._findGraphicById(ka,D,"cluster_id"))&&(D=fa),
L=L||0<ka.length,T.resolve(ka));return T});D&&(x=new d,x.resolve([D]),B.unshift(x));r.some(B,function(X){return!X.isFulfilled()})||L?(p.setFeatures(B),p.show(m.mapPoint,{closestFirst:Y})):(p.hide(),p.clearFeatures())}}})},_getSubLayerFeatureLayers:function(m,w,p){w=w||null;var A=p||new d,C=[];p=m.length;var z=this.map.getScale(),q=!1,v=this,B=0;a:for(;B<p;B++){var D=m[B],x=D.dynamicLayerInfos||D.layerInfos;if(x){var E=null;D._params&&(D._params.layers||D._params.dynamicLayers)&&(E=D.visibleLayers);
E=u._getVisibleLayers(x,E);for(var G=u._getLayersForScale(z,x),I=x.length,L=0;L<I;L++){var Y=x[L],X=Y.id,fa=D.infoTemplates[X];if(!Y.subLayerIds&&fa&&fa.infoTemplate&&-1<r.indexOf(E,X)&&-1<r.indexOf(G,X)){if(!k){q=!0;break a}var sa=D.id+"_"+X,T=this._featureLayersCache[sa];T&&T.loadError||(T||((T=fa.layerUrl)||(T=Y.source?this._getLayerUrl(D.url,"/dynamicLayer"):this._getLayerUrl(D.url,X)),T=new k(T,{parentLayer:D,id:sa,drawMode:!1,mode:k.MODE_SELECTION,outFields:this._getOutFields(fa.infoTemplate),
resourceInfo:fa.resourceInfo,source:Y.source}),this._featureLayersCache[sa]=T),T.setDefinitionExpression(D.layerDefinitions&&D.layerDefinitions[X]),T.setGDBVersion(D.gdbVersion),T.setInfoTemplate(fa.infoTemplate),T.setMaxAllowableOffset(w),T.setUseMapTime(!!D.useMapTime),D.layerDrawingOptions&&D.layerDrawingOptions[X]&&D.layerDrawingOptions[X].renderer&&T.setRenderer(D.layerDrawingOptions[X].renderer),C.push(T))}}}}if(q){var ka=new d;h(["./layers/FeatureLayer"],function(wa){k=wa;ka.resolve()});ka.then(function(){v._getSubLayerFeatureLayers(m,
w,A)})}else{var ma=[];r.forEach(C,function(wa){if(!wa.loaded){var ja=new d;c.once(wa,"load, error",function(){ja.resolve()});ma.push(ja.promise)}});ma.length?g(ma).then(function(){C=r.filter(C,function(wa){return!wa.loadError&&wa.isVisibleAtScale(z)});A.resolve(C)}):(C=r.filter(C,function(wa){return wa.isVisibleAtScale(z)}),A.resolve(C))}return A.promise},_getLayerUrl:function(m,w){var p=m.indexOf("?");return-1===p?m+"/"+w:m.substring(0,p)+"/"+w+m.substring(p)},_getOutFields:function(m){var w=m.info&&
m.info.fieldInfos;if(w&&w.length&&"esri.dijit.PopupTemplate"===m.declaredClass){var p=[];r.forEach(w,function(A){var C=A.fieldName&&A.fieldName.toLowerCase();C&&"shape"!==C&&0!==C.indexOf("relationships/")&&p.push(A.fieldName)})}else p=["*"];return p},_calculateClickTolerance:function(m){var w=b("esri-touch")?9:6,p,A;r.forEach(m,function(C){if(p=C.renderer)"esri.renderer.SimpleRenderer"===p.declaredClass?((A=p.symbol)&&A.xoffset&&(w=Math.max(w,Math.abs(A.xoffset))),A&&A.yoffset&&(w=Math.max(w,Math.abs(A.yoffset)))):
"esri.renderer.UniqueValueRenderer"!==p.declaredClass&&"esri.renderer.ClassBreaksRenderer"!==p.declaredClass||r.forEach(p.infos,function(z){(A=z.symbol)&&A.xoffset&&(w=Math.max(w,Math.abs(A.xoffset)));A&&A.yoffset&&(w=Math.max(w,Math.abs(A.yoffset)))})});return w},_showInfoWindow:function(m,w){var p=this.map.infoWindow,A=m.geometry;w=A&&"point"===A.type?A:w;A=m.getContent();p.setTitle(m.getTitle());A&&f.isString(A.id)&&(m=t.byId(A.id))&&m.set&&/_PopupRenderer/.test(m.declaredClass)&&m.set("showTitle",
!1);p.setContent(A);p.show(w)},_findGraphicById:function(m,w,p){var A,C=(w=w.attributes)&&w[p];r.some(m,function(z){var q=z.attributes;q&&q[p]===C&&(A=z);return!!A});return A},_isParentLayer:function(m,w){w=w&&w.getLayer();return m&&w===m},_isReductionEnabled:function(m){return m&&m.isFeatureReductionActive&&m.isFeatureReductionActive()},_isImageServiceLayer:function(m){return"esri.layers.ArcGISImageServiceLayer"===m.declaredClass||"esri.layers.ArcGISImageServiceVectorLayer"===m.declaredClass||"esri.layers.RasterXLayer"===
m.declaredClass},_isTiledImageServiceLayer:function(m){return"esri.layers.RasterXLayer"===m.declaredClass}});b("extend-esri")&&(a.PopupManager=l);return l})},"esri/layerUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","./kernel"],function(F,y,a,u,n){var t={_serializeLayerDefinitions:function(r,l){var d=[],f=/[:;]/;if(r&&(y.forEach(r,function(c,g){c&&(d.push([g,c]),!l&&f.test(c)&&(l=!0))}),0<d.length)){if(l){var b={};y.forEach(d,function(c){b[c[0]]=c[1]});
b=a.toJson(b)}else b=[],y.forEach(d,function(c){b.push(c[0]+":"+c[1])}),b=b.join(";");return b}return null},_serializeTimeOptions:function(r,l){if(r){var d=[];y.forEach(r,function(f,b){f&&(f=f.toJson(),l&&-1!==y.indexOf(l,b)&&(f.useTime=!1),d.push('"'+b+'":'+a.toJson(f)))});if(d.length)return"{"+d.join(",")+"}"}},_getVisibleLayers:function(r,l){var d=[],f;if(!r)return d;if(l)for(d=l.concat(),f=0;f<r.length;f++){l=r[f];var b=y.indexOf(r,l.id);l.subLayerIds&&-1<b&&(d.splice(b,1),d=d.concat(l.subLayerIds))}else d=
this._getDefaultVisibleLayers(r);return d},_getDefaultVisibleLayers:function(r){var l=[],d;if(!r)return l;for(d=0;d<r.length;d++)0<=r[d].parentLayerId&&-1===y.indexOf(l,r[d].parentLayerId)&&y.some(r,function(f){return f.id===r[d].parentLayerId})||r[d].defaultVisibility&&l.push(r[d].id);return l},_getLayersForScale:function(r,l){var d=[];if(0<r&&l){var f;for(f=0;f<l.length;f++)if(!(0<=l[f].parentLayerId&&-1===y.indexOf(d,l[f].parentLayerId)&&y.some(l,function(e){return e.id===l[f].parentLayerId}))&&
0<=l[f].id){var b=!0,c=l[f].maxScale,g=l[f].minScale;if(0<c||0<g)0<c&&0<g?b=c<=r&&r<=g:0<c?b=c<=r:0<g&&(b=r<=g);b&&d.push(l[f].id)}}return d}};u("extend-esri")&&F.mixin(n,t);return t})},"esri/MapNavigationManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/event dojo/mouse dojo/keys dijit/focus ./kernel ./MouseEvents ./TouchEvents ./PointerEvents ./config ./sniff ./lang ./fx ./graphic ./tileUtils ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./symbols/SimpleFillSymbol".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m,w,p,A,C,z,q){var v=u.connect,B=u.disconnect,D=e("chrome"),x=e("safari"),E=[r.NUMPAD_PLUS,61,187,r.NUMPAD_MINUS,173,189,r.UP_ARROW,r.NUMPAD_8,r.RIGHT_ARROW,r.NUMPAD_6,r.DOWN_ARROW,r.NUMPAD_2,r.LEFT_ARROW,r.NUMPAD_4,r.PAGE_UP,r.NUMPAD_9,r.PAGE_DOWN,r.NUMPAD_3,r.END,r.NUMPAD_1,r.HOME,r.NUMPAD_7];F=F(null,{declaredClass:"esri.MapNavigationManager",eventModel:"",constructor:function(G,I){this.map=G;y.mixin(this,I);I=G.__container;e("esri-pointer")?(this.pointerEvents=
new c(I,{map:G}),this.eventModel="pointer"):e("esri-touch")?(e("ios")||(this.mouseEvents=new f(I,{map:G})),this.touchEvents=new b(I,{map:G,mouseEvents:this.mouseEvents}),this.eventModel="touch"):(this.mouseEvents=new f(I,{map:G}),this.eventModel="mouse");this._zoomRect=new m(null,new q(g.defaults.map.zoomSymbol));this._keyDx=this._keyDy=0;this._adjustPinch=y.hitch(this,this._adjustPinch);this._adjustPinchEnd=y.hitch(this,this._adjustPinchEnd)},_panInit:function(G){var I=this.mouseEvents;t.isLeft(G)&&
this.map.isPan&&!G.shiftKey&&(this._dragOrigin=new p(0,0),y.mixin(this._dragOrigin,G.screenPoint),B(this._panStartHandle),B(this._panHandle),B(this._panEndHandle),this._panStartHandle=v(I,"onMouseDragStart",this,this._panStart),this._panHandle=v(I,"onMouseDrag",this,this._pan),this._panEndHandle=v(I,"onMouseUp",this,this._panEnd),D||x)&&(G.preventDefault(),l.curNode&&l.curNode.blur())},_panStart:function(G){this.map.setCursor("move");this.map.__panStart(G.screenPoint.x,G.screenPoint.y)},_pan:function(G){this.map.__pan(G.screenPoint.x-
this._dragOrigin.x,G.screenPoint.y-this._dragOrigin.y)},_panEnd:function(G){B(this._panStartHandle);B(this._panHandle);B(this._panEndHandle);this._panStartHandle=this._panHandle=this._panEndHandle=null;var I=this.map;I.__panning&&(I.__panEnd(G.screenPoint.x-this._dragOrigin.x,G.screenPoint.y-this._dragOrigin.y),I.resetMapCursor())},_zoomInit:function(G){var I=this.map,L=this.pointerEvents||this.mouseEvents;(t.isLeft(G)||G.pointerType)&&I.isRubberBandZoom&&G.shiftKey&&(I.setCursor("crosshair"),this._dragOrigin=
y.mixin({},G.screenPoint),this._zoomDir=G.ctrlKey||G.metaKey?-1:1,this.pointerEvents?(this._zoomHandle=v(L,"onSwipeMove",this,this._zoom),this._zoomEndHandle=v(L,"onSwipeEnd",this,this._zoomEnd)):(this._zoomHandle=v(L,"onMouseDrag",this,this._zoom),this._zoomEndHandle=v(L,"onMouseUp",this,this._zoomEnd)),D&&G.preventDefault())},_zoom:function(G){var I=this.map,L=this._normalizeRect(G).offset(I.__visibleRect.x,I.__visibleRect.y);G=I.graphics;var Y=this._zoomRect;Y.geometry||I.setCursor("crosshair");
Y.geometry&&G.remove(Y,!0);var X=I.toMap(new p(L.x,L.y));L=I.toMap(new p(L.x+L.width,L.y+L.height));L=new C(X.x,X.y,L.x-X.x,X.y-L.y,I.spatialReference);L._originOnly=!0;Y.setGeometry(L);G.add(Y,!0)},_zoomEnd:function(G){var I=this._zoomRect,L=this.map,Y=L.extent,X=L.spatialReference;B(this._zoomHandle);B(this._zoomEndHandle);this._zoomHandle=this._zoomEndHandle=null;if(L._canZoom(this._zoomDir)&&I.getDojoShape()){L.graphics.remove(I);I.geometry=null;G=this._normalizeRect(G);G.x+=L.__visibleRect.x;
G.y+=L.__visibleRect.y;if(-1===this._zoomDir){var fa=Y.getWidth();G=(fa*L.width/G.width-fa)/2;X=new A(Y.xmin-G,Y.ymin-G,Y.xmax+G,Y.ymax+G,X)}else Y=L.toMap({x:G.x,y:G.y+G.height}),G=L.toMap({x:G.x+G.width,y:G.y}),X=new A(Y.x,Y.y,G.x,G.y,X);L._extentUtil(null,null,X)}I.getDojoShape()&&L.graphics.remove(I,!0);this._zoomDir=0;L.resetMapCursor()},_wheelZoom:function(G,I){var L=this.map;if(!I){if(L.smartNavigation&&!G.shiftKey&&!L._isPanningOrZooming()){L.disableScrollWheelZoom();this._setScrollWheelPan(!0);
this._wheelPan(G);return}I=G.timeStamp;if(!h.isDefined(I)||0>=I)I=(new Date).getTime();if(100>(this._mwts?I-this._mwts:I))return;this._mwts=I}L._canZoom(G.value)&&L._extentUtil({numLevels:G.value,mapAnchor:G.mapPoint,screenAnchor:G.screenPoint})},_wheelPan:function(G){var I=this.map;if(G.shiftKey&&!I._isPanningOrZooming())this._setScrollWheelPan(!1),I.enableScrollWheelZoom(),this._wheelZoom(G);else{var L=0,Y=0;e("ff")?G.axis===G.HORIZONTAL_AXIS?L=-G.detail:Y=-G.detail:(L=G.wheelDeltaX,Y=G.wheelDeltaY);
I.translate(L,Y)}},_setScrollWheelPan:function(G){this.map.isScrollWheelPan=G;this.mouseEvents&&this.mouseEvents.enableMouseWheel(G);B(this._mwMacHandle);this._mwMacHandle=null;G&&(this._mwMacHandle=v(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelPan))},_recenter:function(G){G.shiftKey&&!this.map._isPanningOrZooming()&&this.map.centerAt(G.mapPoint)},_recenterZoom:function(G){G.shiftKey&&!this.map._isPanningOrZooming()&&(G.value=G.ctrlKey||G.metaKey?-1:1,this._wheelZoom(G,!0))},
_dblClickZoom:function(G){this.map._isPanningOrZooming()||(G.value=1,this._wheelZoom(G,!0))},_twoFingerTap:function(G){this.map._isPanningOrZooming()||(G.value=-1,this._wheelZoom(G,!0))},_keyDown:function(G){var I=G.keyCode,L=this.map;if(-1!==a.indexOf(E,I)){if(I===r.NUMPAD_PLUS||61===I||187===I)L._extentUtil({numLevels:1});else if(I===r.NUMPAD_MINUS||173===I||189===I)L._extentUtil({numLevels:-1});else{L.__panning||L.__panStart(0,0);switch(I){case r.UP_ARROW:case r.NUMPAD_8:this._keyDy+=10;break;
case r.RIGHT_ARROW:case r.NUMPAD_6:this._keyDx-=10;break;case r.DOWN_ARROW:case r.NUMPAD_2:this._keyDy-=10;break;case r.LEFT_ARROW:case r.NUMPAD_4:this._keyDx+=10;break;case r.PAGE_UP:case r.NUMPAD_9:this._keyDx-=10;this._keyDy+=10;break;case r.PAGE_DOWN:case r.NUMPAD_3:this._keyDx-=10;this._keyDy-=10;break;case r.END:case r.NUMPAD_1:this._keyDx+=10;this._keyDy-=10;break;case r.HOME:case r.NUMPAD_7:this._keyDx+=10;this._keyDy+=10;break;default:return}L.__pan(this._keyDx,this._keyDy)}n.stop(G)}},_keyEnd:function(G){var I=
this.map;I.__panning&&G.keyCode!==r.SHIFT&&(I.__panEnd(this._keyDx,this._keyDy),this._keyDx=this._keyDy=0)},_swipeInit:function(G){var I=this.map;I=I._zoomAnim||I._panAnim;if(G.shiftKey)return!1;I&&I._active&&(I.stop(),I._fire("onEnd",[I.node]));this._dragOrigin=new p(0,0);y.mixin(this._dragOrigin,G.screenPoint);B(this._swipeHandle);B(this._swipeEndHandle);this._swipeHandle=v(this.touchEvents||this.pointerEvents,"onSwipeMove",this,this._swipe);this._swipeEndHandle=v(this.touchEvents||this.pointerEvents,
"onSwipeEnd",this,this._swipeEnd)},_swipe:function(G){var I=this.map;I.__panning?(this._panX=G.screenPoint.x,this._panY=G.screenPoint.y,I.__pan(G.screenPoint.x-this._dragOrigin.x,G.screenPoint.y-this._dragOrigin.y)):(I.setCursor("move"),I.__panStart(G.screenPoint.x,G.screenPoint.y))},_swipeEnd:function(G){B(this._swipeHandle);B(this._swipeEndHandle);this._swipeHandle=this._swipeEndHandle=null;var I=this.map;I.__panning&&(I.resetMapCursor(),I.__panEnd(G.screenPoint.x-this._dragOrigin.x,G.screenPoint.y-
this._dragOrigin.y))},_pinchInit:function(G){var I=this.map,L=I._zoomAnim||I._panAnim;L&&L._active?(L.stop(),L._fire("onEnd",[L.node])):I.__panning&&(G.screenPoint=new p(this._panX,this._panY),G.mapPoint=I.toMap(G.screenPoint),this._swipeEnd(G));B(this._pinchHandle);B(this._pinchEndHandle);this._pinchHandle=v(this.touchEvents||this.pointerEvents,"onPinchMove",this,this._pinch);this._pinchEndHandle=v(this.touchEvents||this.pointerEvents,"onPinchEnd",this,this._pinchEnd)},_pinch:function(G){var I=this.map;
if(G.screenPoints){this.currLength=z.getLength(G.screenPoints[0],G.screenPoints[1]);if(I.__zooming){var L=this.currLength/this._length;this._zoomStartExtent=this.__scaleExtent(I.extent,L,this._dragOrigin);I.__zoom(this._zoomStartExtent,L,this._dragOrigin)}else this._dragOrigin=new p((G.screenPoints[0].x+G.screenPoints[1].x)/2,(G.screenPoints[0].y+G.screenPoints[1].y)/2),this._length=this.currLength,I.__zoomStart(I.extent,this._dragOrigin);this._pinchScale=L;I._fireOnScale(this.currLength/this._length,
this._dragOrigin,!0)}},_pinchEnd:function(G){G=this.map;B(this._pinchHandle);B(this._pinchEndHandle);this._pinchHandle=this._pinchEndHandle=null;this._pinchScale=0;if(G.__zooming&&null===G._zoomAnim){var I=this.currLength/this._length,L=G.extent.getWidth();this._zoomAnimAnchor=G.toMap(this._dragOrigin);this._zoomStartExtent=this.__scaleExtent(G.extent,1/I,this._zoomAnimAnchor);if(G.__tileInfo){var Y=w.getCandidateTileInfo(G,G.__tileInfo,this._zoomStartExtent),X=G.__getExtentForLevel(Y.lod.level,this._zoomAnimAnchor),
fa=G.getMinZoom(),sa=G.getMaxZoom(),T=X.extent;X=X.lod;var ka=L/T.getWidth(),ma=Y.lod.level;1>I?ka>I&&ma--:ka<I&&ma++;ma<fa?ma=fa:ma>sa&&(ma=sa);ma!==Y.lod.level&&(X=G.__getExtentForLevel(ma,this._zoomAnimAnchor),T=X.extent,X=X.lod);this._zoomEndExtent=T;this._zoomEndLod=X;G._zoomAnim=k.animateRange({range:{start:L/this._zoomStartExtent.getWidth(),end:ka},duration:g.defaults.map.zoomDuration,rate:g.defaults.map.zoomRate,onAnimate:this._adjustPinch,onEnd:this._adjustPinchEnd});G._zoomAnim.play();G._fireOnScale(G.extent.getWidth()/
this._zoomEndExtent.getWidth(),this._dragOrigin)}else this._zoomEndExtent=this._zoomStartExtent,G._fireOnScale(G.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin),this._adjustPinchEnd()}},_adjustPinch:function(G){var I=this.__scaleExtent(this.map.extent,G,this._zoomAnimAnchor);this.map.__zoom(I,G,this._dragOrigin)},_adjustPinchEnd:function(){var G=this.map,I=G.extent.getWidth()/this._zoomEndExtent.getWidth(),L=this.__scaleExtent(G.extent,1/I,this._zoomAnimAnchor),Y=this._dragOrigin,
X=this._zoomEndLod;this._zoomStartExtent=this._zoomEndExtent=this._zoomEndLod=this._dragOrigin=G._zoomAnim=this._zoomAnimAnchor=null;G.__zoomEnd(L,I,Y,X,!0)},__scaleExtent:function(G,I,L){L=L||G.getCenter();I=G.expand(I);var Y=G.xmin-(I.getWidth()-G.getWidth())*(L.x-G.xmin)/G.getWidth();L=G.ymax-(I.getHeight()-G.getHeight())*(L.y-G.ymax)/G.getHeight();return new A(Y,L-I.getHeight(),Y+I.getWidth(),L,G.spatialReference)},_normalizeRect:function(G){G=G.screenPoint;var I=this._dragOrigin.x,L=this._dragOrigin.y;
G=new C((G.x<I?G.x:I)-this.map.__visibleRect.x,(G.y<L?G.y:L)-this.map.__visibleRect.y,Math.abs(G.x-I),Math.abs(G.y-L));delete G.spatialReference;0===G.width&&(G.width=1);0===G.height&&(G.height=1);return G},setImmediateClick:function(G){switch(this.eventModel){case "mouse":this.mouseEvents.setImmediateClick(G);break;case "touch":this.touchEvents.setImmediateTap(G);this.mouseEvents&&this.mouseEvents.setImmediateClick(G);break;case "pointer":this.pointerEvents.setImmediateTap(G)}},enablePan:function(){this.disablePan();
switch(this.eventModel){case "mouse":this._panInitHandle=v(this.mouseEvents,"onMouseDown",this,this._panInit);break;case "touch":this._panInitHandle=v(this.mouseEvents,"onMouseDown",this,this._panInit);this._swipeInitHandle=v(this.touchEvents,"onSwipeStart",this,this._swipeInit);break;case "pointer":this._swipeInitHandle=v(this.pointerEvents,"onSwipeStart",this,this._swipeInit)}},disablePan:function(){B(this._panInitHandle);this._panInitHandle=null;B(this._swipeInitHandle);this._swipeInitHandle=null},
enableRubberBandZoom:function(){this.disableRubberBandZoom();this._zoomInitHandle=this.pointerEvents?v(this.pointerEvents,"onSwipeStart",this,this._zoomInit):v(this.mouseEvents,"onMouseDown",this,this._zoomInit)},disableRubberBandZoom:function(){B(this._zoomInitHandle);this._zoomInitHandle=null},enablePinchZoom:function(){this.disablePinchZoom();if("touch"===this.eventModel||"pointer"===this.eventModel)this._pinchInitHandle=v(this.touchEvents||this.pointerEvents,"onPinchStart",this,this._pinchInit)},
disablePinchZoom:function(){B(this._pinchInitHandle);this._pinchInitHandle=null},enableScrollWheelZoom:function(){this.disableScrollWheelZoom();this._wheelHandle=v(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelZoom)},disableScrollWheelZoom:function(){B(this._wheelHandle);this._wheelHandle=null},enableScrollWheelPan:function(){var G=this.map;G&&G.loaded&&G.smartNavigation&&(this.disableScrollWheelPan(),this._setScrollWheelPan(!0))},disableScrollWheelPan:function(){var G=this.map;
G&&G.loaded&&G.smartNavigation&&this._setScrollWheelPan(!1)},enableDoubleClickZoom:function(){this.disableDoubleClickZoom();switch(this.eventModel){case "mouse":this._dblClickHandle=v(this.mouseEvents,"onDblClick",this,this._dblClickZoom);break;case "touch":this._dblClickHandle=v(this.mouseEvents,"onDblClick",this,this._dblClickZoom);this._dblTapHandle=v(this.touchEvents,"onDoubleTap",this,this._dblClickZoom);this._zoomOutHandle=v(this.touchEvents,"onTwoFingerTap",this,this._twoFingerTap);break;case "pointer":this._dblTapHandle=
v(this.pointerEvents,"onDoubleTap",this,this._dblClickZoom),this._zoomOutHandle=v(this.pointerEvents,"onTwoFingerTap",this,this._twoFingerTap)}},disableDoubleClickZoom:function(){B(this._dblClickHandle);B(this._zoomOutHandle);this._dblTapHandle&&B(this._dblTapHandle);this._dblClickHandle=this._zoomOutHandle=this._dblTapHandle=null},enableShiftDoubleClickZoom:function(){this.disableShiftDoubleClickZoom();this._sDblClickHandle=v(this.pointerEvents||this.mouseEvents,"onDblClick",this,this._recenterZoom)},
disableShiftDoubleClickZoom:function(){B(this._sDblClickHandle);this._sDblClickHandle=null},enableClickRecenter:function(){this.disableClickRecenter();this._recenterHandle=v(this.pointerEvents||this.mouseEvents,"onClick",this,this._recenter)},disableClickRecenter:function(){B(this._recenterHandle);this._recenterHandle=null},enableKeyboardNavigation:function(){this.disableKeyboardNavigation();this._keyHandle=v(this.pointerEvents||this.mouseEvents,"onKeyDown",this,this._keyDown);this._keyEndHandle=
v(this.pointerEvents||this.mouseEvents,"onKeyUp",this,this._keyEnd)},disableKeyboardNavigation:function(){B(this._keyHandle);B(this._keyEndHandle);this._keyHandle=this._keyEndHandle=null},enableScrollWheel:function(){var G=this.map;G&&(G.smartNavigation?this.enableScrollWheelPan():G.enableScrollWheelZoom())},disableScrollWheel:function(){var G=this.map;G&&(G.disableScrollWheelZoom(),G.smartNavigation&&this.disableScrollWheelPan())},enableNavigation:function(){var G=this.map;G&&G.loaded&&(G._evalNavigationFeature("DoubleClickZoom"),
G._evalNavigationFeature("ClickRecenter"),G._evalNavigationFeature("Pan"),G._evalNavigationFeature("RubberBandZoom"),G._evalNavigationFeature("PinchZoom"),G._evalNavigationFeature("KeyboardNavigation"),G._evalNavigationFeature("ScrollWheel"))},disableNavigation:function(){var G=this.map;G&&G.loaded&&(G._evalNavigationFeature("DoubleClickZoom"),G._evalNavigationFeature("ClickRecenter"),G._evalNavigationFeature("Pan"),G._evalNavigationFeature("RubberBandZoom"),G._evalNavigationFeature("PinchZoom"),
G._evalNavigationFeature("KeyboardNavigation"),G._evalNavigationFeature("ScrollWheel"))},destroy:function(){this.touchEvents&&this.touchEvents.destroy();this.mouseEvents&&this.mouseEvents.destroy();this.pointerEvents&&this.pointerEvents.destroy();var G,I=[this._panInitHandle,this._panStartHandle,this._panHandle,this._panEndHandle,this._zoomInitHandle,this._zoomHandle,this._zoomEndHandle,this._wheelHandle,this._mwMacHandle,this._dblClickHandle,this._zoomOutHandle,this._recenterHandle,this._sDblClickHandle,
this._dblTapHandle,this._keyHandle,this._keyEndHandle,this._swipeInitHandle,this._swipeHandle,this._swipeEndHandle,this._pinchInitHandle,this._pinchHandle,this._pinchEndHandle];for(G=0;G<I.length;G++)B(I[G]);this.map=this.touchEvents=this.mouseEvents=this.eventModel=this.pointerEvents=this._zoomRect=this._dragOrigin=this._panInitHandle=this._panStartHandle=this._panHandle=this._panEndHandle=this._zoomInitHandle=this._zoomHandle=this._zoomEndHandle=this._wheelHandle=this._mwMacHandle=this._dblClickHandle=
this._zoomOutHandle=this._recenterHandle=this._sDblClickHandle=this._dblTapHandle=this._keyHandle=this._keyEndHandle=this._swipeInitHandle=this._swipeHandle=this._swipeEndHandle=this._pinchInitHandle=this._pinchHandle=this._pinchEndHandle=null}});e("extend-esri")&&(d.MapNavigationManager=F);return F})},"esri/MouseEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/_base/connect dojo/_base/event ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),
function(F,y,a,u,n,t,r,l,d,f){var b=n.connect,c=n.disconnect;F=F([l],{declaredClass:"esri.MouseEvents",doubleClickDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==u("mac")?1:3,wheelDivisor:2>u("chrome")?360:120,preventPageScroll:!0,map:null,constructor:function(g,e){this.node=g;a.mixin(this,e);e=function(h){t.stop(h);return!1};u("mozilla")&&y.style(g,"MozUserSelect","none");this._handles=[b(g,"onselectstart",e),b(g,"ondragstart",e),b(g,"onmouseenter",this,this._onMouseEnterHandler),
b(g,"onmouseleave",this,this._onMouseLeaveHandler),b(g,"onmousedown",this,this._onMouseDownHandler),b(g,"onclick",this,this._onClickHandler),b(g,"ondblclick",this,this._onDblClickHandler)];this._onMouseMoveHandler_connect=b(g,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=b(g,"onmouseup",this,this._onMouseUpHandler);this._fireClickEvent=a.hitch(this,this._fireClickEvent);this._initialDuration=this.doubleClickDuration;this.preventPageScroll=(g=this.map)?g.isScrollWheelZoom||
g.isScrollWheelPan:this.preventPageScroll;this.enableMouseWheel(!1)},_fire:function(g,e){if(!this._preventClick||"onClick"!==g&&"onDblClick"!==g){if(this[g])this[g](e);if(this.map&&this.map[g])this.map[g](e)}},_processEvent:function(g){g=t.fix(g,g.target);var e=this.map,h=e&&e.position;h&&("DOMMouseScroll"===g.type&&3>u("ff")?g.screenPoint=new f(window.scrollX+g.screenX-h.x,window.scrollY+g.screenY-h.y):g.screenPoint=new f(g.pageX-h.x,g.pageY-h.y),g.mapPoint=e.extent?e.toMap(g.screenPoint):new d);
g.numPoints=0;return g},_onMouseEnterHandler:function(g){c(this._onKeyDown_connect);c(this._onKeyUp_connect);this._onKeyDown_connect=b(document,"onkeydown",this,this._onKeyDownHandler);this._onKeyUp_connect=b(document,"onkeyup",this,this._onKeyUpHandler);this._fire("onMouseOver",this._processEvent(g))},_onMouseLeaveHandler:function(g){c(this._onKeyDown_connect);c(this._onKeyUp_connect);this._onKeyDown_connect=this._onKeyUp_connect=null;this._fire("onMouseOut",this._processEvent(g))},_onMouseMoveHandler:function(g){this._dragEnd?
this._dragEnd=!1:this._fire("onMouseMove",this._processEvent(g))},_onMouseDownHandler:function(g){c(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=null;this.node.setCapture&&this.node.setCapture(!1);c(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=b(document,"onmousemove",this,this._onMouseDragHandler);this._startX=g.pageX;this._startY=g.pageY;this._fire("onMouseDown",this._processEvent(g))},_onMouseUpHandler:function(g){var e=this.node;e.releaseCapture&&e.releaseCapture();
c(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=null;c(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=b(e,"onmousemove",this,this._onMouseMoveHandler);this._fire("onMouseUp",this._processEvent(g))},_onMouseDragHandler:function(g){c(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=b(document,"onmousemove",this,this._onMouseDraggingHandler);c(this._onMouseUpHandler_connect);this._onMouseUpHandler_connect=b(document,"onmouseup",this,this._onDragMouseUpHandler);
this._docLeaveConnect=b(document,"onmouseout",this,this._onDocMouseOut);this._fire("onMouseDragStart",this._processEvent(g))},_onMouseDraggingHandler:function(g){t.stop(g);this._fire("onMouseDrag",this._processEvent(g))},_onDragMouseUpHandler:function(g){var e=this.node;e.releaseCapture&&e.releaseCapture();this._dragEnd=!0;c(this._docLeaveConnect);c(this._onMouseDragHandler_connect);c(this._onMouseUpHandler_connect);this._docLeaveConnect=this._onMouseDragHandler_connect=null;this._onMouseMoveHandler_connect=
b(e,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=b(e,"onmouseup",this,this._onMouseUpHandler);g=this._processEvent(g);this._fire("onMouseDragEnd",g);this._fire("onMouseUp",g)},_onDocMouseOut:function(g){var e=9>u("ie")?g.toElement:g.relatedTarget,h=e&&e.nodeName.toLowerCase();(!e||(u("chrome")||u("safari"))&&"html"===h)&&this._onDragMouseUpHandler(g)},_onClickHandler:function(g){g=this._processEvent(g);if(g.pageX===this._startX&&g.pageY===this._startY){clearTimeout(this._clickTimer);
var e={},h="movementX"in g,k;for(k in g)"mozInputSource"===k||"mozPressure"===k||h&&("webkitMovementX"===k||"webkitMovementY"===k)||(e[k]=g[k]);this._clickEvent=e;this._clickTimer=setTimeout(this._fireClickEvent,this.doubleClickDuration)}},_fireClickEvent:function(){clearTimeout(this._clickTimer);9>u("ie")&&(this._clickEvent.graphic=r._ieGraphic,delete r._ieGraphic);this._fire("onClick",this._clickEvent)},_onDblClickHandler:function(g){clearTimeout(this._clickTimer);this._fire("onDblClick",this._processEvent(g))},
_onMouseWheelHandler:function(g){var e=this.map;(e?e.isScrollWheelZoom||e.isScrollWheelPan:this.preventPageScroll)&&t.stop(g);e=u("ff")||u("mozilla")?-g.detail/this.mozWheelDivisor:g.wheelDelta/this.wheelDivisor;var h=Math.abs(e);h=h<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;g.value=0>e?-h:h;this._fire("onMouseWheel",this._processEvent(g))},_onKeyDownHandler:function(g){this._fire("onKeyDown",g)},_onKeyUpHandler:function(g){this._fire("onKeyUp",g)},enableMouseWheel:function(g){c(this._scrollHandle);
this._scrollHandle=b(this.node,u("ff")||u("mozilla")?g?"MozMousePixelScroll":"DOMMouseScroll":"onmousewheel",this,this._onMouseWheelHandler)},setImmediateClick:function(g){this.doubleClickDuration=g?0:this._initialDuration},preventClickEvents:function(g){this._preventClick=g},destroy:function(){var g=this._handles.concat([this._onMouseMoveHandler_connect,this._onMouseUpHandler_connect,this._onMouseDragHandler_connect,this._scrollHandle,this._onKeyDown_connect,this._onKeyUp_connect,this._docLeaveConnect]),
e;for(e=0;e<g.length;e++)c(g[e]);clearTimeout(this._clickTimer);this.node=this.map=this._handles=this._clickEvent=this._onMouseMoveHandler_connect=this._onMouseUpHandler_connect=this._onMouseDragHandler_connect=this._scrollHandle=this._onKeyDown_connect=this._onKeyUp_connect=this._docLeaveConnect=null}});u("extend-esri")&&(r.MouseEvents=F);return F})},"esri/TouchEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/dom ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),
function(F,y,a,u,n,t,r,l,d){F=F([r],{declaredClass:"esri.TouchEvents",tapRadius:8,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,map:null,constructor:function(f,b){this.node=f;a.mixin(this,b);y.setSelectable(f,!1);this._touchStart=a.hitch(this,this._touchStart);this._touchMove=a.hitch(this,this._touchMove);this._touchEnd=a.hitch(this,this._touchEnd);this._touchCancel=a.hitch(this,this._touchCancel);this._fireClickEvent=a.hitch(this,this._fireClickEvent);f.addEventListener("touchstart",
this._touchStart,!1);f.addEventListener("touchmove",this._touchMove,!1);f.addEventListener("touchend",this._touchEnd,!1);f.addEventListener("touchcancel",this._touchCancel,!1);this.map&&u("ios")&&(this._mouseOver=a.hitch(this,this._mouseOver),this._mouseOut=a.hitch(this,this._mouseOut),this._mouseDown=a.hitch(this,this._mouseDown),this._mouseUp=a.hitch(this,this._mouseUp),this._mouseClick=a.hitch(this,this._mouseClick),f.addEventListener("mouseover",this._mouseOver,!1),f.addEventListener("mouseout",
this._mouseOut,!1),f.addEventListener("mousedown",this._mouseDown,!1),f.addEventListener("mouseup",this._mouseUp,!1),f.addEventListener("click",this._mouseClick,!1));this._numTouches=0;this._nodeTouches=[];this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_touchStart:function(f){var b=this._touches,c,g=f.changedTouches.length,e,h,k=(new Date).getTime();this._touchStartTS=k;if(!(u("android")&&u("safari")&&1===f.targetTouches.length&&f.touches.length===f.targetTouches.length&&f.targetTouches.length===
f.changedTouches.length&&0===f.changedTouches[0].identifier&&b[f.changedTouches[0].identifier])){this._addTouch(f);for(c=0;c<g;c++){var m=f.changedTouches[c];var w=b[m.identifier]={};w.startX=m.pageX;w.startY=m.pageY;w.startTS=k;-1===this._touchIds.indexOf(m.identifier)&&this._touchIds.push(m.identifier)}this._swipeActive&&(e=this._nodeTouches[0]);this._pinchActive&&(h=this._nodeTouches[1]);1===this._numTouches?this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(f,
e))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(f,[e,h]))):2===this._numTouches?this._swipeActive&&(e&&(w=b[this._touchIds[0]],w.startX=e.pageX,w.startY=e.pageY,w.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(f,e))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(f,e))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(f,[e,h])))}},_touchMove:function(f){f.preventDefault();
this._updateTouch(f);var b=this._touches,c,g=f.changedTouches.length,e;if(!(u("android")&&u("safari")&&1===f.targetTouches.length&&f.touches.length===f.targetTouches.length&&f.targetTouches.length===f.changedTouches.length&&0===f.changedTouches[0].identifier&&b[f.changedTouches[0].identifier]&&1<this._touchIds.length)){for(c=0;c<g;c++){var h=f.changedTouches[c];if(e=b[h.identifier]){var k=Math.abs(h.pageX-e.startX);h=Math.abs(h.pageY-e.startY);!e.moved&&(k>=this.tapRadius||h>=this.tapRadius)&&(e.moved=
e.absMoved=!0);var m=m?m:e.moved}}1===this._numTouches?(b=f.changedTouches[0],this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(f,b)):m&&(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(f,b)))):2===this._numTouches&&(c=this._nodeTouches[0],g=this._nodeTouches[1],this._pinchActive?this._fire("onPinchMove",this._processTouchEvent(f,[c,g])):m&&(m=b[c.identifier],e=b[g.identifier],b=Math.abs(m.startX-e.startX),m=Math.abs(m.startY-e.startY),e=Math.abs(c.pageX-g.pageX),
k=Math.abs(c.pageY-g.pageY),Math.abs(Math.sqrt(e*e+k*k)-Math.sqrt(b*b+m*m))>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(f,[c,g])))))}},_touchEnd:function(f){this._removeTouch(f);var b=this._touches,c=f.changedTouches,g,e=c.length,h,k,m=(new Date).getTime(),w=this._touchIds;for(g=0;g<e;g++)if(k=b[c[g].identifier])k.absMoved&&(h=!0),k.pageX=c[g].pageX,k.pageY=c[g].pageY,k.endTS=m;if(0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=
!1,this._fire("onSwipeEnd",this._processTouchEvent(f,c[0]));else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(f,c));else{if(!h){e=Infinity;h=-Infinity;m=Infinity;var p=-Infinity,A=this.tapStartTolerance,C=[],z=!0;for(g=0;g<w.length;g++)k=b[w[g]],C.push(k),k.startTS<e&&(e=k.startTS),k.startTS>h&&(h=k.startTS),k.endTS<m&&(m=k.endTS),k.endTS>p&&(p=k.endTS),delete b[w[g]];1===C.length&&c[0]&&(b=Math.abs(c[0].pageY-C[0].startY),Math.abs(c[0].pageX-C[0].startX)>=
this.tapRadius||b>=this.tapRadius)&&(z=!1);z&&Math.abs(h-e)<=A&&Math.abs(p-m)<=A&&this._basicTap(f,C)}}else 1===this._numTouches&&this._pinchActive&&(g=this._nodeTouches[0],k=b[g.identifier],k.startX=g.pageX,k.startY=g.pageY,this._pinchActive=k.moved=!1,this._fire("onPinchEnd",this._processTouchEvent(f,[c[0],g])))},_touchCancel:function(f){this._numTouches&&this._touchEnd(f)},_basicTap:function(f,b){var c=(new Date).getTime(),g=this;f=this._processTouchEvent(f,b);this._taps.push({touchInfos:b,ts:c,
event:f});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",f);clearTimeout(this._tapTimer);this._immediate?this._analyzeTap(!0):this._tapTimer=setTimeout(function(){var e=g;g=null;clearTimeout(e._tapTimer);e._analyzeTap()},2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration)},_analyzeTap:function(f){var b=this._taps,c=b[0],g=b[1],e=c.touchInfos,h=g&&g.touchInfos;b.length&&(f||(this._taps=[]),c&&g?e.length===h.length?g.ts-c.ts<=this.doubleTapDuration?(1===e.length?
(f=Math.abs(e[0].startX-h[0].startX),e=Math.abs(e[0].startY-h[0].startY),e=f<=this.doubleTapRadius&&e<=this.doubleTapRadius):e=!0,e?this._processedDoubleTap(b):this._processedTap(g)):this._processedTap(g):this._processedTap(g):this._processedTap(c||g))},_processedTap:function(f){var b=f.event;this._fire("onProcessedTap",b);1===f.touchInfos.length?this._fire("onTap",this._fixEvent(b)):2===f.touchInfos.length&&this._fire("onTwoFingerTap",b)},_processedDoubleTap:function(f){var b=1===f[1].touchInfos.length;
if(b){var c=[this._fixEvent(f[0].event),this._fixEvent(f[1].event)];c[1].relatedEvents=c}f=[f[0].event,f[1].event];f[1].relatedEvents=f;this._fire("onProcessedDoubleTap",f[1]);b&&(this._fire("onDoubleTap",c[1]),this._fire("onDblClick",c[1]))},_addTouch:function(f){var b=f.changedTouches,c=this._nodeTouches,g;this._numTouches+=b.length;for(f=0;f<b.length;f++){var e=c.length;var h=!1;for(g=0;g<e&&!(h=c[g].identifier===b[f].identifier);g++);h?this._numTouches--:c.push(b[f])}for(f=c.length-1;0<=f;f--)n.isDescendant(c[f].target,
document.body)||(c.splice(f,1),this._numTouches--);0>this._numTouches&&(this._numTouches=0)},_removeTouch:function(f){var b=[],c=[],g=f.changedTouches,e=this._nodeTouches;this._numTouches-=g.length;0>this._numTouches&&(this._numTouches=0);for(f=0;f<g.length;f++)b.push(g[f].identifier);for(f=e.length-1;0<=f;f--)-1!==b.indexOf(e[f].identifier)&&c.push(e.splice(f,1)[0]);return c},_updateTouch:function(f){var b=[],c=f.changedTouches,g=this._nodeTouches;for(f=0;f<c.length;f++)b.push(c[f].identifier);for(f=
0;f<g.length;f++){var e=b.indexOf(g[f].identifier);-1!==e&&g.splice(f,1,c[e])}},_mouseOver:function(f){this._fire("onMouseOver",this._processMouseEvent(f))},_mouseOut:function(f){this._fire("onMouseOut",this._processMouseEvent(f))},_mouseDown:function(f){this._fire("onMouseDown",this._processMouseEvent(f))},_mouseUp:function(f){this._fire("onMouseUp",this._processMouseEvent(f))},_mouseClick:function(f){clearTimeout(this._clickTimer);300<(new Date).getTime()-this._touchStartTS?this._fire("onClick",
this._processMouseEvent(f)):(this._clickEvent=f,this._clickTimer=setTimeout(this._fireClickEvent,this.doubleTapDuration))},_fireClickEvent:function(){clearTimeout(this._clickTimer);this._fire("onClick",this._processMouseEvent(this._clickEvent))},_fire:function(f,b){"onDblClick"===f&&clearTimeout(this._clickTimer);if("onDblClick"===f&&this.mouseEvents){this.mouseEvents.preventClickEvents(!0);var c=this;setTimeout(function(){c.mouseEvents.preventClickEvents(!1)},350)}if(this[f])this[f](b);if(this.map&&
this.map[f])this.map[f](b)},_fixEvent:function(f){var b={},c;for(c in f)b[c]=f[c];this.map&&(b.screenPoint=b.screenPoints[0],b.mapPoint=b.mapPoints[0]);return b},_processTouchEvent:function(f,b){var c=this.map,g=c&&c.position,e=0;if(g&&b)if(a.isArray(b)){var h;f.screenPoints=[];f.mapPoints=[];for(h=0;h<b.length;h++)if(b[h]){var k=new d(b[h].pageX-g.x,b[h].pageY-g.y);f.screenPoints.push(k);f.mapPoints.push(c.extent?c.toMap(k):new l)}else e++}else f.screenPoint=new d(b.pageX-g.x,b.pageY-g.y),f.mapPoint=
c.extent?c.toMap(f.screenPoint):new l;f.numPoints=b?a.isArray(b)?b.length-e:1:0;return f},_processMouseEvent:function(f){var b=this.map,c=b&&b.position;c&&(f.screenPoint=new d(f.pageX-c.x,f.pageY-c.y),f.mapPoint=b.extent?b.toMap(f.screenPoint):new l);return f},setImmediateTap:function(f){this._immediate=f},destroy:function(){var f=this.node;f.removeEventListener("touchstart",this._touchStart,!1);f.removeEventListener("touchmove",this._touchMove,!1);f.removeEventListener("touchend",this._touchEnd,
!1);f.removeEventListener("touchcancel",this._touchCancel,!1);this.map&&(f.removeEventListener("mouseover",this._mouseOver,!1),f.removeEventListener("mouseout",this._mouseOut,!1),f.removeEventListener("mousedown",this._mouseDown,!1),f.removeEventListener("mouseup",this._mouseUp,!1),f.removeEventListener("click",this._mouseClick,!1));y.setSelectable(f,!0);clearTimeout(this._tapTimer);clearTimeout(this._clickTimer);this.node=this.map=this._numTouches=this._nodeTouches=this._touches=this._touchIds=this._taps=
null}});u("extend-esri")&&(t.TouchEvents=F);return F})},"esri/PointerEvents":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(F,y,a,u,n,t,r,l){F=F([t],{declaredClass:"esri.PointerEvents",tapRadius:8,clickRadius:2,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==u("mac")?1:3,wheelDivisor:120,preventPageScroll:!0,_dragging:!1,
constructor:function(d,f){this.node=d;y.mixin(this,f);void 0!==d.style.msTouchAction?d.style.msTouchAction="none":void 0!==d.style.touchAction&&(d.style.touchAction="none");f=navigator.msPointerEnabled;var b=function(c){c.preventDefault()};d.addEventListener("selectstart",b,!1);d.addEventListener("dragstart",b,!1);this._pointerDown=y.hitch(this,this._pointerDown);this._pointerMove=y.hitch(this,this._pointerMove);this._pointerUp=y.hitch(this,this._pointerUp);this._pointerCancel=y.hitch(this,this._pointerCancel);
d.addEventListener(f?"MSPointerDown":"pointerdown",this._pointerDown,!1);d.addEventListener(f?"MSPointerMove":"pointermove",this._pointerMove,!1);d.addEventListener(f?"MSPointerUp":"pointerup",this._pointerUp,!1);d.addEventListener(f?"MSPointerCancel":"pointercancel",this._pointerCancel,!1);this.map&&(this._mouseOver=y.hitch(this,this._mouseOver),this._mouseOut=y.hitch(this,this._mouseOut),this._mouseLeave=y.hitch(this,this._mouseLeave),this._mouseDown=y.hitch(this,this._mouseDown),this._mouseUp=
y.hitch(this,this._mouseUp),this._mouseClick=y.hitch(this,this._mouseClick),this._mouseWheel=y.hitch(this,this._mouseWheel),this._mouseMove=y.hitch(this,this._mouseMove),this._mouseEnter=y.hitch(this,this._mouseEnter),this._onKeyDown=y.hitch(this,this._onKeyDown),this._onKeyUp=y.hitch(this,this._onKeyUp),d.addEventListener("mouseover",this._mouseOver,!1),d.addEventListener("mouseout",this._mouseOut,!1),d.addEventListener("mouseleave",this._mouseLeave,!1),d.addEventListener("mousedown",this._mouseDown,
!1),d.addEventListener("mouseup",this._mouseUp,!1),d.addEventListener("click",this._mouseClick,!1),d.addEventListener("mousewheel",this._mouseWheel,!1),d.addEventListener("mousemove",this._mouseMove,!1),d.addEventListener("mouseenter",this._mouseEnter,!1));this._numTouches=0;this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_pointerDown:function(d){if(-1<a.indexOf(this._touchIds,d.pointerId))this._pointerUp(d);else{var f=this._touches,b=d.target,c=d.pointerId,g=this._touchIds,e=
(new Date).getTime();var h=f[c]={};h.pointerId=c;h.startX=h.pageX=d.pageX;h.startY=h.pageY=d.pageY;h.startTS=e;g.push(c);this._numTouches++;b.setPointerCapture?b.setPointerCapture(c):b.msSetPointerCapture&&b.msSetPointerCapture(c);b=f[g[0]];f=f[g[1]];1!==this._numTouches&&(2===this._numTouches?this._swipeActive&&(b&&(b.startX=b.pageX,b.startY=b.pageY,b.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(d,b))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",
this._processTouchEvent(d,b))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(d,[b,f]))))}},_pointerMove:function(d){var f=this._touches,b=this._touchIds,c;if((c=f[d.pointerId])&&(c.pageX!==d.pageX||c.pageY!==d.pageY)){c.pageX=d.pageX;c.pageY=d.pageY;var g=Math.abs(c.pageX-c.startX);var e=Math.abs(c.pageY-c.startY);!c.moved&&(g>=this.tapRadius||e>=this.tapRadius)&&(c.moved=c.absMoved=!0);if(1===this._numTouches)this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(d,
d)):c.moved&&(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(d,d)));else if(2===this._numTouches)if(c=f[b[0]],f=f[b[1]],this._pinchActive)this._fire("onPinchMove",this._processTouchEvent(d,[c,f]));else if(c.moved||f.moved){b=Math.abs(c.startX-f.startX);g=Math.abs(c.startY-f.startY);e=Math.abs(c.pageX-f.pageX);var h=Math.abs(c.pageY-f.pageY);Math.abs(Math.sqrt(e*e+h*h)-Math.sqrt(b*b+g*g))>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(d,
[c,f])))}}},_pointerUp:function(d){var f=this._touches,b,c=this.node,g=d.target,e=d.pointerId,h=this._touchIds,k=h.slice(0),m=a.map(k,function(C){return f[C]}),w=(new Date).getTime();if(b=f[e])if(b.pageX=d.pageX,b.pageY=d.pageY,b.endTS=w,this._numTouches--,g.releasePointerCapture?g.releasePointerCapture(e):g.msReleasePointerCapture&&g.msReleasePointerCapture(e),0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(d,
d));else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(d,d));else{if(!b.absMoved){g=Infinity;e=-Infinity;h=Infinity;w=-Infinity;var p=this.tapStartTolerance,A;for(A=0;A<k.length;A++)b=m[A],b.startTS<g&&(g=b.startTS),b.startTS>e&&(e=b.startTS),b.endTS<h&&(h=b.endTS),b.endTS>w&&(w=b.endTS);Math.abs(e-g)<=p&&Math.abs(w-h)<=p&&this._basicTap(d,m)}}else 1===this._numTouches&&this._pinchActive&&(h.splice(a.indexOf(h,d.pointerId),1),delete f[d.pointerId],b=f[h[0]],
b.startX=b.pageX,b.startY=b.pageY,b.moved=!1,document.msElementsFromPoint&&(k=document.msElementsFromPoint(b.pageX,b.pageY),a.some(k,function(C){return C===c})||(this._touches={},this._touchIds=[],this._numTouches=0)),this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(d,[d,b])))},_pointerCancel:function(d){this._numTouches&&this._pointerUp(d)},_basicTap:function(d,f){var b=(new Date).getTime(),c=this,g=this._immediate;d=this._processTouchEvent(d,f);this._taps.push({touchInfos:f,
ts:b,event:d});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",d);clearTimeout(this._tapTimer);d=2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration;this._tapTimer=setTimeout(function(){var e=c;c=null;clearTimeout(e._tapTimer);e._analyzeTap(g)},g?0:d)},_analyzeTap:function(d){var f=this._taps,b=f[0],c=f[1],g=b.touchInfos,e=c&&c.touchInfos;f.length&&(d||(this._taps=[]),b&&c?g.length===e.length?c.ts-b.ts<=this.doubleTapDuration?(1===g.length?(d=Math.abs(g[0].startX-
e[0].startX),g=Math.abs(g[0].startY-e[0].startY),g=d<=this.doubleTapRadius&&g<=this.doubleTapRadius):g=!0,g?this._processedDoubleTap(f):this._processedTap(c)):this._processedTap(c):this._processedTap(c):this._processedTap(b||c))},_processedTap:function(d){var f=d.event;this._fire("onProcessedTap",f);1===d.touchInfos.length?this._fire("onTap",this._fixEvent(f)):2===d.touchInfos.length&&this._fire("onTwoFingerTap",f)},_processedDoubleTap:function(d){var f=1===d[1].touchInfos.length;if(f){var b=[this._fixEvent(d[0].event),
this._fixEvent(d[1].event)];b[1].relatedEvents=b}d=[d[0].event,d[1].event];d[1].relatedEvents=d;this._fire("onProcessedDoubleTap",d[1]);f&&(this._fire("onDoubleTap",b[1]),this._fire("onDblClick",b[1]))},_mouseOver:function(d){this._fire("onMouseOver",this._processMouseEvent(d))},_mouseMove:function(d){this._dragging?this._fire("onMouseDrag",this._processMouseEvent(d)):this._fire("onMouseMove",this._processMouseEvent(d))},_mouseOut:function(d){this._fire("onMouseOut",this._processMouseEvent(d))},_mouseLeave:function(d){document.removeEventListener("keydown",
this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseOut",this._processMouseEvent(d))},_mouseDown:function(d){this._downX=d.pageX;this._downY=d.pageY;this._fire("onMouseDown",this._processMouseEvent(d));0===d.button&&(this._dragging=!0,this._fire("onMouseDragStart",this._processMouseEvent(d)))},_mouseUp:function(d){this._dragging&&(this._dragging=!1,this._fire("onMouseDragEnd",this._processMouseEvent(d)));this._fire("onMouseUp",this._processMouseEvent(d))},
_mouseClick:function(d){Math.abs(d.pageX-this._downX)<=this.clickRadius&&Math.abs(d.pageY-this._downY)<=this.clickRadius&&this._fire("onClick",this._processMouseEvent(d))},_mouseWheel:function(d){var f=this.map;(f?f.isScrollWheelZoom||f.isScrollWheelPan:this.preventPageScroll)&&d.preventDefault();f=d.wheelDelta?d.wheelDelta/this.wheelDivisor:-d.detail/this.mozWheelDivisor;var b=Math.abs(f);b=b<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;d.value=0>f?-b:b;this._fire("onMouseWheel",this._processMouseEvent(d))},
_mouseEnter:function(d){document.removeEventListener("keydown",this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);document.addEventListener("keydown",this._onKeyDown,!1);document.addEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseEnter",this._processMouseEvent(d))},_onKeyDown:function(d){this._fire("onKeyDown",d)},_onKeyUp:function(d){this._fire("onKeyUp",d)},_fire:function(d,f){if(this[d])this[d](f);if(this.map&&this.map[d])this.map[d](f)},_fixEvent:function(d){var f=
{},b;for(b in d)f[b]=d[b];f.preventDefault=function(){d.preventDefault()};f.stopPropagation=function(){d.stopPropagation()};this.map&&(f.screenPoint=f.screenPoints[0],f.mapPoint=f.mapPoints[0]);return f},_processTouchEvent:function(d,f){var b=this.map,c=b&&b.position,g=0;if(c&&f)if(y.isArray(f)){var e;d.screenPoints=[];d.mapPoints=[];for(e=0;e<f.length;e++)if(f[e]){var h=new l(f[e].pageX-c.x,f[e].pageY-c.y);d.screenPoints.push(h);d.mapPoints.push(b.extent?b.toMap(h):new r)}else g++}else d.screenPoint=
new l(f.pageX-c.x,f.pageY-c.y),d.mapPoint=b.extent?b.toMap(d.screenPoint):new r;d.numPoints=f?y.isArray(f)?f.length-g:1:0;return d},_processMouseEvent:function(d){var f=this.map,b=f&&f.position;b&&(d.screenPoint=new l(d.pageX-b.x,d.pageY-b.y),d.mapPoint=f.extent?f.toMap(d.screenPoint):new r);return d},setImmediateTap:function(d){this._immediate=d},destroy:function(){var d=this.node;d.removeEventListener("MSPointerDown",this._pointerDown,!1);d.removeEventListener("MSPointerMove",this._pointerMove,
!1);d.removeEventListener("MSPointerUp",this._pointerUp,!1);d.removeEventListener("MSPointerCancel",this._pointerCancel,!1);this.map&&(d.removeEventListener("mouseover",this._mouseOver,!1),d.removeEventListener("mousemove",this._mouseMove,!1),d.removeEventListener("mouseout",this._mouseOut,!1),d.removeEventListener("mouseleave",this._mouseLeave,!1),d.removeEventListener("mousedown",this._mouseDown,!1),d.removeEventListener("mouseup",this._mouseUp,!1),d.removeEventListener("click",this._mouseClick,
!1),d.removeEventListener("mouseenter",this._mouseEnter,!1));clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._touches=this._touchIds=this._taps=null}});u("extend-esri")&&(n.PointerEvents=F);return F})},"esri/geometry":function(){define("./units ./SpatialReference ./geometry/Geometry ./geometry/Point ./geometry/ScreenPoint ./geometry/Multipoint ./geometry/Polyline ./geometry/Polygon ./geometry/Extent ./geometry/Rect ./geometry/geodesicUtils ./geometry/jsonUtils ./geometry/mathUtils ./geometry/normalizeUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m){return{units:F,SpatialReference:y,Geometry:a,Point:u,ScreenPoint:n,Multipoint:t,Polyline:r,Polygon:l,Extent:d,Rect:f,geodesicUtils:b,jsonUtils:c,mathUtils:g,normalizeUtils:e,scaleUtils:h,screenUtils:k,webMercatorUtils:m}})},"esri/units":function(){define(["dojo/has","./kernel"],function(F,y){var a={CENTIMETERS:"esriCentimeters",DECIMAL_DEGREES:"esriDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds",DECIMETERS:"esriDecimeters",FEET:"esriFeet",
FEET_US:"esriFeetUS",INCHES:"esriInches",KILOMETERS:"esriKilometers",METERS:"esriMeters",MILES:"esriMiles",MILES_US:"esriMilesUS",MILLIMETERS:"esriMillimeters",NAUTICAL_MILES:"esriNauticalMiles",POINTS:"esriPoints",UNKNOWN:"esriUnknownUnits",YARDS:"esriYards",YARDS_US:"esriYardsUS",ACRES:"esriAcres",ACRES_US:"esriAcresUS",ARES:"esriAres",SQUARE_KILOMETERS:"esriSquareKilometers",SQUARE_MILES:"esriSquareMiles",SQUARE_MILES_US:"esriSquareMilesUS",SQUARE_FEET:"esriSquareFeet",SQUARE_FEET_US:"esriSquareFeetUS",
SQUARE_METERS:"esriSquareMeters",HECTARES:"esriHectares",SQUARE_YARDS:"esriSquareYards",SQUARE_YARDS_US:"esriSquareYardsUS",SQUARE_INCHES:"esriSquareInches",SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters",SQUARE_NAUTICAL_MILES:"esriSquareNauticalMiles",METERS_PER_SECOND:"esriMetersPerSecond",KILOMETERS_PER_HOUR:"esriKilometersPerHour",KNOTS:"esriKnots",FEET_PER_SECOND:"esriFeetPerSecond",MILES_PER_HOUR:"esriMilesPerHour",
RADIANS:"esriDURadians"};F("extend-esri")&&(y.Units=a);return a})},"esri/geometry/geodesicUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point ./Polyline ./Polygon".split(" "),function(F,y,a,u,n,t,r,l){function d(w){return!!(w&&w.wkid&&m[w.wkid])}function f(w){return d(w)?m[w.wkid]:m[4326]}function b(w){var p=w.spatialReference,A=f(p),C=A.a;A=A.eSq;var z=Math.sqrt(A),q=Math.sin(w.y*k);return new t(C*w.x*k,0<A?C*(1-A)*(q/(1-A*q*q)-1/(2*z)*Math.log((1-
z*q)/(1+z*q)))*.5:C*q,p)}function c(w,p,A,C,z){var q=f(z),v=q.a,B=q.b;q=q.f;var D=Math.sin(A);A=Math.cos(A);var x=(1-q)*Math.tan(w);w=1/Math.sqrt(1+x*x);var E=x*w,G=Math.atan2(x,A);x=w*D;var I=x*x,L=1-I;v=L*(v*v-B*B)/(B*B);var Y=1+v/16384*(4096+v*(-768+v*(320-175*v))),X=v/1024*(256+v*(-128+v*(74-47*v)));v=C/(B*Y);for(var fa=2*Math.PI,sa,T,ka,ma;1E-12<Math.abs(v-fa);)ka=Math.cos(2*G+v),sa=Math.sin(v),T=Math.cos(v),ma=X*sa*(ka+X/4*(T*(-1+2*ka*ka)-X/6*ka*(-3+4*sa*sa)*(-3+4*ka*ka))),fa=v,v=C/(B*Y)+ma;
C=E*sa-w*T*A;B=q/16*L*(4+q*(4-3*L));return new t((p+(Math.atan2(sa*D,w*T-E*sa*A)-(1-B)*q*x*(v+B*sa*(ka+B*T*(-1+2*ka*ka)))))/k,Math.atan2(E*T+w*sa*A,(1-q)*Math.sqrt(I+C*C))/k,z)}function g(w,p,A,C,z){var q=f(z),v=q.a;z=q.b;var B=q.f,D=C-p,x=Math.atan((1-B)*Math.tan(w)),E=Math.atan((1-B)*Math.tan(A)),G=Math.sin(x);x=Math.cos(x);var I=Math.sin(E);E=Math.cos(E);var L=D,Y=1E3;do{var X=Math.sin(L);var fa=Math.cos(L);var sa=Math.sqrt(E*X*E*X+(x*I-G*E*fa)*(x*I-G*E*fa));if(0===sa)return 0;fa=G*I+x*E*fa;var T=
Math.atan2(sa,fa);var ka=x*E*X/sa;var ma=1-ka*ka;X=fa-2*G*I/ma;isNaN(X)&&(X=0);var wa=B/16*ma*(4+B*(4-3*ma));var ja=L;L=D+(1-wa)*B*ka*(T+wa*sa*(X+wa*fa*(-1+2*X*X)))}while(1E-12<Math.abs(L-ja)&&0<--Y);if(0===Y)return z=C-p,{azimuth:Math.atan2(Math.sin(z)*Math.cos(A),Math.cos(w)*Math.sin(A)-Math.sin(w)*Math.cos(A)*Math.cos(z)),geodesicDistance:Math.acos(Math.sin(w)*Math.sin(A)+Math.cos(w)*Math.cos(A)*Math.cos(C-p))*q.radius};w=ma*(v*v-z*z)/(z*z);p=w/1024*(256+w*(-128+w*(74-47*w)));return{azimuth:Math.atan2(E*
Math.sin(L),x*I-G*E*Math.cos(L)),geodesicDistance:z*(1+w/16384*(4096+w*(-768+w*(320-175*w))))*(T-p*sa*(X+p/4*(fa*(-1+2*X*X)-p/6*X*(-3+4*sa*sa)*(-3+4*X*X)))),reverseAzimuth:Math.atan2(x*Math.sin(L),x*I*Math.cos(L)-G*E)}}function e(w,p){if(!(w instanceof r||w instanceof l))throw console.error("_geodesicDensify: the input geometry is neither polyline nor polygon"),Error("_geodesicDensify: the input geometry is neither polyline nor polygon");var A=w.spatialReference,C=f(A).radius/1E4;p<C&&(p=C);C=w instanceof
r;var z=[],q;F.forEach(C?w.paths:w.rings,function(v){z.push(q=[]);q.push([v[0][0],v[0][1]]);var B,D;var x=v[0][0]*k;var E=v[0][1]*k;for(B=0;B<v.length-1;B++){var G=v[B+1][0]*k;var I=v[B+1][1]*k;if(x!==G||E!==I){I=g(E,x,I,G,A);G=I.azimuth;I=I.geodesicDistance;var L=I/p;if(1<L){for(D=1;D<=L-1;D++){var Y=c(E,x,G,D*p,A);q.push([Y.x,Y.y])}D=c(E,x,G,(I+Math.floor(L-1)*p)/2,A);q.push([D.x,D.y])}E=c(E,x,G,I,A);q.push([E.x,E.y]);x=E.x*k;E=E.y*k}}});return C?new r({paths:z,spatialReference:A}):new l({rings:z,
spatialReference:A})}var h={esriMeters:1,esriKilometers:1E3,esriYards:.9144,esriFeet:.3048,esriMiles:1609.344,esriNauticalMiles:1852,esriInches:.0254,esriDecimeters:.1,esriCentimeters:.01,esriMillimeters:.001,esriSquareMeters:1,esriSquareKilometers:1E6,esriSquareYards:.83612736,esriSquareFeet:.09290304,esriSquareMiles:2589988.110336,esriAcres:4046.8564224,esriHectares:1E4,esriAres:100,esriSquareInches:6.4516E-4,esriSquareMillimeters:1E-6,esriSquareCentimeters:1E-4,esriSquareDecimeters:.01},k=Math.PI/
180,m={4326:{a:6378137,b:6356752.31424518,f:1/298.257223563,eSq:.006694379990197414,radius:6371008.771415059},104900:{a:2439700,b:2439700,f:0,eSq:0,radius:2439700},104901:{a:6051E3,b:6051E3,f:0,eSq:0,radius:6051E3},104902:{a:6051800,b:6051800,f:0,eSq:0,radius:6051800},104903:{a:1737400,b:1737400,f:0,eSq:0,radius:1737400},104904:{a:3393400,b:3375730,f:1/192.04301075,eSq:.01038722,radius:3387510},104905:{a:3396190,b:3376200,f:1/169.89444722,eSq:.01173737,radius:3389526.6666666665},104906:{a:6200,b:6200,
f:0,eSq:0,radius:6200},104907:{a:11100,b:11100,f:0,eSq:0,radius:11100},104912:{a:2409300,b:2409300,f:0,eSq:0,radius:2409300},104915:{a:1562090,b:1562090,f:0,eSq:0,radius:1562090},104916:{a:2632345,b:2632345,f:0,eSq:0,radius:2632345},104918:{a:1821460,b:1821460,f:0,eSq:0,radius:1821460},104929:{a:249400,b:249400,f:0,eSq:0,radius:249400},104943:{a:2575E3,b:2575E3,f:0,eSq:0,radius:2575E3},104971:{a:3396190,b:3396190,f:0,eSq:0,radius:3396190},104972:{a:47E4,b:47E4,f:0,eSq:0,radius:47E4},104973:{a:255E3,
b:255E3,f:0,eSq:0,radius:255E3},104974:{a:2439400,b:2439400,f:0,eSq:0,radius:2439400}};n={isSupported:d,getSpheroidInfo:f,geodesicDensify:e,geodesicLengths:function(w,p){var A=[];F.forEach(w,function(C,z){var q=0,v=C.spatialReference;F.forEach(C.paths,function(B,D){D=0;var x;for(x=1;x<B.length;x++){var E=B[x-1][0]*k;var G=B[x][0]*k;var I=B[x-1][1]*k;var L=B[x][1]*k;if(I!==L||E!==G)E=g(I,E,L,G,v),D+=E.geodesicDistance}q+=D});q/=h[p];A.push(q)});return A},geodesicAreas:function(w,p){var A=[],C=[];F.forEach(w,
function(z,q){q=.0015696101447650193*f(z.spatialReference).radius;A.push(e(z,q))});F.forEach(A,function(z,q){var v=0,B=z.spatialReference;F.forEach(z.rings,function(D,x){x=b(new t(D[0][0],D[0][1],B));var E=b(new t(D[D.length-1][0],D[D.length-1][1],B)),G=E.x*x.y-x.x*E.y,I;for(I=0;I<D.length-1;I++)x=b(new t(D[I+1][0],D[I+1][1],B)),E=b(new t(D[I][0],D[I][1],B)),G+=E.x*x.y-x.x*E.y;v+=G});v/=h[p];C.push(v/-2)});return C},_unitsDictionary:h,_toEqualAreaPoint:b,_directGeodeticSolver:c,_inverseGeodeticSolver:g};
a("extend-esri")&&y.mixin(y.getObject("geometry",!0,u),n);return n})},"esri/symbol":function(){define("./symbols/Symbol ./symbols/MarkerSymbol ./symbols/SimpleMarkerSymbol ./symbols/PictureMarkerSymbol ./symbols/LineSymbol ./symbols/SimpleLineSymbol ./symbols/CartographicLineSymbol ./symbols/FillSymbol ./symbols/SimpleFillSymbol ./symbols/PictureFillSymbol ./symbols/Font ./symbols/TextSymbol ./symbols/jsonUtils".split(" "),function(F,y,a,u,n,t,r,l,d,f,b,c,g){return{Symbol:F,MarkerSymbol:y,SimpleMarkerSymbol:a,
PictureMarkerSymbol:u,LineSymbol:n,SimpleLineSymbol:t,CartographicLineSymbol:r,FillSymbol:l,SimpleFillSymbol:d,PictureFillSymbol:f,Font:b,TextSymbol:c,jsonUtils:g}})},"esri/renderer":function(){define("./renderers/Renderer ./renderers/SimpleRenderer ./renderers/UniqueValueRenderer ./renderers/ClassBreaksRenderer ./renderers/TemporalRenderer ./renderers/SymbolAger ./renderers/TimeClassBreaksAger ./renderers/TimeRampAger ./renderers/StretchRenderer ./renderers/jsonUtils".split(" "),function(F,y,a,u,
n,t,r,l,d,f){return{Renderer:F,SimpleRenderer:y,UniqueValueRenderer:a,ClassBreaksRenderer:u,TemporalRenderer:n,SymbolAger:t,TimeClassBreaksAger:r,TimeRampAger:l,StretchRenderer:d,jsonUtils:f}})},"esri/renderers/Renderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojox/gfx/_base ../kernel ../Color ../layers/support/attributeUtils ../support/expressionUtils ../arcadeProfiles/visualizationProfile".split(" "),function(F,y,a,u,n,t,r,l,d,f){var b=Math.PI;F=F(null,{declaredClass:"esri.renderer.Renderer",
constructor:function(c){this._cache={};if(c&&!c.declaredClass){this.rotationInfo=c.rotationInfo;if(!this.rotationInfo){var g=c.rotationType,e=c.rotationExpression;if(g||e)this.rotationInfo={type:g,expression:e}}this.setRotationInfo(this.rotationInfo);this.setSizeInfo(this._readSizeInfo(c.sizeInfo));this.setColorInfo(this._readColorInfo(c.colorInfo));this.setOpacityInfo(this._readOpacityInfo(c.transparencyInfo));this.setVisualVariables(this._readVariables(c.visualVariables));this.setAuthoringInfo(c.authoringInfo)}this.getSymbol=
y.hitch(this,this.getSymbol)},getSymbol:function(c){},_readSizeInfo:function(c){if(c){var g=c.minSize,e=c.maxSize;g&&(c.minSize="number"===typeof g?n.pt2px(g):this._readSizeInfo(g));e&&(c.maxSize="number"===typeof e?n.pt2px(e):this._readSizeInfo(e));c.stops&&a.forEach(c.stops,function(h){h.size&&"number"===typeof h.size&&(h.size=n.pt2px(h.size))})}return c},_readColorInfo:function(c){c&&(a.forEach(c.colors,function(g,e){y.isArray(g)&&(c.colors[e]=r.toDojoColor(g))}),a.forEach(c.stops,function(g,e){g.color&&
y.isArray(g.color)&&(c.stops[e].color=r.toDojoColor(g.color))}));return c},_readOpacityInfo:function(c){if(c){var g=y.mixin({},c);g.transparencyValues&&(g.opacityValues=a.map(g.transparencyValues,function(e){return 1-e/100}),delete g.transparencyValues);g.stops&&(g.stops=a.map(g.stops,function(e){e=y.mixin({},e);e.opacity=1-e.transparency/100;delete e.transparency;return e}))}return g},_readVariables:function(c){c&&(c=a.map(c,function(g){"sizeInfo"===g.type?g=this._readSizeInfo(g):"colorInfo"===g.type?
g=this._readColorInfo(g):"transparencyInfo"===g.type&&(g=this._readOpacityInfo(g),g.type="opacityInfo");return g},this));return c},setAuthoringInfo:function(c){this.authoringInfo=c},setRotationInfo:function(c){if(c=this.rotationInfo="string"===typeof c?{field:c}:c){if(c.expression&&!y.isFunction(c.expression)&&!c.field){var g=c.expression.match(this.rotationRE);g&&g[1]&&(c.field=g[1])}c.rotationType=c.type}this._cache.rotationInfo=this._processRotationInfo(c);return this},rotationRE:/^\[([^\]]+)\]$/i,
_processRotationInfo:function(c){c&&!c.rotationType&&(c.rotationType="geographic");return this._createCache(c)},getRotationAngle:function(c,g){var e=this._getVarInfo(g&&g.rotationInfo,"rotationInfo");g=e.variable;e=this._cache[e.cacheKey];var h="arithmetic"===this._getRotationType(g),k=e&&e.hasExpr,m=null;if(g.field||k)m=this._getDataValue(c,g,null,e),null!=m&&(m=(m+(h?-90:0))*(h?-1:1));return m},_getRotationType:function(c){return c&&("rotationInfo"===c.type?c.rotationType:c.type)},_getDataValue:function(c,
g,e,h,k){h||(h=this._getVarInfo(g,e),g=h.variable,h=this._cache[h.cacheKey],"sizeInfo"===e&&(h=h.root));return c._getDataValue(g,h,d,k)},setVisualVariables:function(c){var g=this._cache;a.forEach(this.visualVariables,function(e,h){g.hasOwnProperty(h)&&(g[h]=null)},this);this.visualVariables=c;a.some(c,function(e){return!!e.target})&&c.sort(function(e,h){return e.target===h.target?0:e.target?1:-1});a.forEach(c,function(e,h){"colorInfo"===e.type?g[h]=this._processColorInfo(e):"opacityInfo"===e.type?
g[h]=this._processOpacityInfo(e):"sizeInfo"===e.type?g[h]=this._processSizeInfo(e):"rotationInfo"===e.type&&(g[h]=this._processRotationInfo(e))},this);return this},getVisualVariableValues:function(c){var g=this.visualVariables,e;g&&(e=a.map(g,function(h){switch(h.type){case "sizeInfo":var k=this.getSize(c,{sizeInfo:h});break;case "colorInfo":k=this.getColor(c,{colorInfo:h});break;case "opacityInfo":k=this.getOpacity(c,{opacityInfo:h});break;case "rotationInfo":k=this.getRotationAngle(c,{rotationInfo:h})}return{variable:h,
value:k}},this));return e},getFieldsUsedInExpressions:function(c){var g=[];a.forEach(this._getCacheObjects(),function(e){e.syntaxTree&&(g=g.concat(d.extractFieldNames(e.syntaxTree,c)))});g.sort();return a.filter(g,function(e,h){return 0===h||g[h-1]!==e})},hasGeometryOperations:function(){return a.some(this._getCacheObjects(),function(c){return c.syntaxTree?d.hasGeometryOperations(c.syntaxTree):!1})},initializeArcadeEngine:function(){var c=[];a.forEach(this._getCacheObjects(),function(g){g.syntaxTree&&
c.push(g.syntaxTree)});return f.initialize(c)},hasVisualVariables:function(c,g){return c?!!this.getVisualVariablesForType(c,g):!!(this.getVisualVariablesForType("sizeInfo",g)||this.getVisualVariablesForType("colorInfo",g)||this.getVisualVariablesForType("opacityInfo",g)||this.getVisualVariablesForType("rotationInfo",g))},getVisualVariablesForType:function(c,g){var e=this.visualVariables;if(!g&&this[c]){"rotationInfo"===c&&(this[c].rotationType=this[c].type);var h=[this[c]]}else e&&(h=a.filter(e,function(k){return k.type===
c&&("string"===typeof g?k.target===g:!1===g?!k.target:!0)}))&&0===h.length&&(h=void 0);return h},setSizeInfo:function(c){this.sizeInfo=this.proportionalSymbolInfo=c;this._cache.sizeInfo=this._processSizeInfo(c);return this},_processSizeInfo:function(c){return c&&{root:this._createCache(c),minSize:this._createCache(c.minSize),maxSize:this._createCache(c.maxSize)}},_convertExpressionToArcade:function(c){c&&c.expression&&(c.valueExpression="$view.scale")},_getVarInfo:function(c,g){if(c&&c.type===g){var e=
a.indexOf(this.visualVariables,c);c=this.visualVariables[e]}else e=g,c=this[g];return{variable:c,cacheKey:e}},setProportionalSymbolInfo:function(c){this.setSizeInfo(c);return this},getSize:function(c,g){var e=this._getVarInfo(g&&g.sizeInfo,"sizeInfo"),h=e.variable;e=this._cache[e.cacheKey];var k=null;if(h){var m=h.minSize;k=h.maxSize;m="object"===typeof m&&m?this._getSize(c,m,e&&e.minSize,g):m;k="object"===typeof k&&k?this._getSize(c,k,e&&e.maxSize,g):k;k=this._getSize(c,h,e&&e.root,g,[m,k])}return k},
_getSize:function(c,g,e,h,k){var m=g.stops,w=0,p=e&&e.hasExpr,A=e&&e.ipData,C=e&&e.isScaleDriven,z="object"===typeof c&&!!c,q="number"===typeof c?c:null;if(g.field||C||p){var v=h&&h.scale;p=k?k[0]:g.minSize;k=k?k[1]:g.maxSize;var B=g.minDataValue,D=g.maxDataValue,x=g.valueUnit||"unknown",E=g.valueRepresentation,G=g.scaleBy,I=h&&h.shape;C?q=v:"number"!==typeof q&&z&&(q=this._getDataValue(c,g,null,e));if(!this._isValidNumber(q))return null;if(m)p=this._lookupData(q,A),q=p[0],k=p[1],q===k?w=m[q].size:
(q=m[q].size,m=m[k].size,w=q+(m-q)*p[2]);else if(null!=p&&null!=k&&null!=B&&null!=D)q<=B?w=p:q>=D?w=k:(m=(q-B)/(D-B),"area"===G&&I?(p=(q="circle"===I)?b*Math.pow(p/2,2):p*p,m=p+m*((q?b*Math.pow(k/2,2):k*k)-p),w=q?2*Math.sqrt(m/b):Math.sqrt(m)):w=p+m*(k-p));else if("unknown"===x)null!=p&&null!=B&&(p&&B?(m=q/B,w="circle"===I?2*Math.sqrt(m*Math.pow(p/2,2)):"square"===I||"diamond"===I||"image"===I?Math.sqrt(m*Math.pow(p,2)):m*p):w=q+(p||B),w=w<p?p:w,null!=k&&w>k&&(w=k));else{m=(h&&h.resolution?h.resolution:
1)*this._meterIn[x];if("area"===E)w=Math.sqrt(q/b)/m,w*=2;else if(w=q/m,"radius"===E||"distance"===E)w*=2;null!=p&&w<p&&(w=p);null!=k&&w>k&&(w=k)}}else w=m&&m[0]&&m[0].size,null==w&&(w=g.minSize);return w=isNaN(w)?0:w},getSizeRangeAtScale:function(c,g){c=this._getVarInfo(c,"sizeInfo");var e=this._cache[c.cacheKey],h={scale:g};if((c=c.variable)&&g){var k=c.minSize;g=c.maxSize;var m=c.stops;m&&m.length?(c=m[0].size,e=m[m.length-1].size):(c="object"===typeof k&&k?this._getSize({},k,e&&e.minSize,h):k,
e="object"===typeof g&&g?this._getSize({},g,e&&e.maxSize,h):g);if(null!=c||null!=e){if(c>e){var w=e;e=c;c=w}w={minSize:c,maxSize:e}}}return w},setColorInfo:function(c){this.colorInfo=c;this._cache.colorInfo=this._processColorInfo(c);return this},_createCache:function(c,g){if(g=l.createAttributeCache(c,g))g.ipData=this._interpolateData(c);return g},_getCacheObjects:function(c){var g;c=c||this._cache;var e=[];for(g in c){var h=c[g];c.hasOwnProperty(g)&&h&&"object"===typeof h&&(h.hasOwnProperty("idSource")?
e.push(h):e=e.concat(this._getCacheObjects(h)))}return e},_processColorInfo:function(c){c&&(a.forEach(c.colors,function(g,e){y.isArray(g)&&(c.colors[e]=new r(g))}),a.forEach(c.stops,function(g,e){g.color&&y.isArray(g.color)&&(c.stops[e].color=new r(g.color))}));return this._createCache(c)},getColor:function(c,g){g=this._getVarInfo(g&&g.colorInfo,"colorInfo");return this._getColorComponent(c,g.variable,this._cache[g.cacheKey])},setOpacityInfo:function(c){this.opacityInfo=c;this._cache.opacityInfo=
this._processOpacityInfo(c);return this},_processOpacityInfo:function(c){return this._createCache(c)},getOpacity:function(c,g){g=this._getVarInfo(g&&g.opacityInfo,"opacityInfo");return this._getColorComponent(c,g.variable,this._cache[g.cacheKey],!0)},_getColorComponent:function(c,g,e,h,k){var m="number"===typeof c?c:null,w=e&&e.hasExpr,p=e&&e.ipData,A;g&&g.field||w?("number"!==typeof m&&"object"===typeof c&&c&&(m=this._getDataValue(c,g,null,e)),this._isValidNumber(m)||(m=null),null!=m&&(A=h?this._getOpacity(m,
g,p):this._getColor(m,g,p))):g&&(c=g.stops,h?(A=c&&c[0]&&c[0].opacity,null==A&&(A=g.opacityValues&&g.opacityValues[0])):A=c&&c[0]&&c[0].color||g.colors&&g.colors[0]);k&&(k.data=m,k.value=A);return k||A},_isValidNumber:function(c){return"number"===typeof c&&!isNaN(c)&&Infinity!==c&&-Infinity!==c},_interpolateData:function(c){if(c)if(c.colors||c.opacityValues){var g=(c.colors||c.opacityValues).length,e=c.minDataValue,h=(c.maxDataValue-e)/(g-1);var k=[];for(c=0;c<g;c++)k[c]=e+c*h}else c.stops&&(k=a.map(c.stops,
function(m){return m.value}));return k},_getOpacity:function(c,g,e){c=this._lookupData(c,e);g=g||this.opacityInfo;if(c){e=c[0];var h=c[1];e===h?h=this._getOpacValue(g,e):(e=this._getOpacValue(g,e),g=this._getOpacValue(g,h),h=e+(g-e)*c[2])}return h},_getOpacValue:function(c,g){return c.opacityValues?c.opacityValues[g]:c.stops[g].opacity},_getColor:function(c,g,e){c=this._lookupData(c,e);g=g||this.colorInfo;if(c){var h=c[0];e=c[1];h=h===e?this._getColorObj(g,h):r.blendColors(this._getColorObj(g,h),
this._getColorObj(g,e),c[2])}return h},_getColorObj:function(c,g){return c.colors?c.colors[g]:c.stops[g].color},_lookupData:function(c,g){if(g){var e=0,h=g.length-1;a.some(g,function(m,w){if(c<m)return h=w,!0;e=w;return!1});var k=[e,h,(c-g[e])/(g[h]-g[e])]}return k},_meterIn:{inches:1/.0254,feet:1/.3048,yards:1/.9144,miles:1/1609.344,"nautical-miles":1/1852,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:.001,"decimal-degrees":180/20015077},_writeSizeInfo:function(c){if(c){c=y.mixin({},
c);this._convertExpressionToArcade(c);var g=c.minSize,e=c.maxSize;g&&(c.minSize="number"===typeof g?n.px2pt(g):this._writeSizeInfo(g));e&&(c.maxSize="number"===typeof e?n.px2pt(e):this._writeSizeInfo(e));if(g=c.legendOptions)if(c.legendOptions=y.mixin({},g),g=g.customValues)c.legendOptions.customValues=g.slice(0);c.stops&&(c.stops=a.map(c.stops,function(h){h=y.mixin({},h);h.size&&"number"===typeof h.size&&(h.size=n.px2pt(h.size));return h}))}return c},_writeColorInfo:function(c){c&&(c=y.mixin({},
c),c.colors&&(c.colors=a.map(c.colors,function(g){return r.toJsonColor(g)})),c.stops&&(c.stops=a.map(c.stops,function(g){g=y.mixin({},g);g.color&&(g.color=r.toJsonColor(g.color));return g})),c.legendOptions&&(c.legendOptions=y.mixin({},c.legendOptions)));return c},_writeOpacityInfo:function(c){if(c){var g=y.mixin({},c);g.opacityValues&&(g.transparencyValues=a.map(g.opacityValues,function(e){return 100*(1-e)}),delete g.opacityValues);g.stops&&(g.stops=a.map(g.stops,function(e){e=y.mixin({},e);e.transparency=
100*(1-e.opacity);delete e.opacity;return e}));g.legendOptions&&(g.legendOptions=y.mixin({},g.legendOptions))}return g},toJson:function(c){var g=this.visualVariables,e=y.clone(this.authoringInfo),h=c&&c.useLegacyRotationProperties,k=(c=(c=this.getVisualVariablesForType("rotationInfo",!1))&&c[0])&&c.field,m;c&&(c===this.rotationInfo||h)&&(m=c.expression||k&&(y.isFunction(k)?k:"["+k+"]"));g&&(g=a.map(g,function(w){"sizeInfo"===w.type?w=this._writeSizeInfo(w):"colorInfo"===w.type?w=this._writeColorInfo(w):
"opacityInfo"===w.type?(w=this._writeOpacityInfo(w),w.type="transparencyInfo"):"rotationInfo"===w.type&&(w=h?null:y.mixin({},w));return w},this),g=a.filter(g,function(w){return null!=w}));e&&a.forEach(e.visualVariables,function(w){"opacityInfo"===w.type&&(w.type="transparencyInfo")});return{rotationType:m&&(this._getRotationType(c)||"geographic"),rotationExpression:m,colorInfo:this._writeColorInfo(this.colorInfo),transparencyInfo:this._writeOpacityInfo(this.opacityInfo),sizeInfo:this._writeSizeInfo(this.sizeInfo),
visualVariables:g,authoringInfo:e}}});u("extend-esri")&&y.setObject("renderer.Renderer",F,t);return F})},"esri/layers/support/attributeUtils":function(){define("dojo/_base/lang dojo/has dojox/encoding/digests/_base dojox/encoding/digests/MD5 ../../kernel ../../support/expressionUtils".split(" "),function(F,y,a,u,n,t){var r={viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,getAttributeId:function(l){return"string"===typeof l?u(l,a.outputTypes.Hex):null},getAttributeIdSource:function(l){if(!l)return null;
var d=l.field,f=l.valueExpression,b=null;if(f)b=f;else if(F.isFunction(d))b=d.toString();else if(d){var c=(f=l.normalizationField)?"field":l.normalizationType;l=parseFloat(l.normalizationTotal);c&&(c=c.toLowerCase(),b=d.toLowerCase()+",norm:"+c,f?b+=","+f.toLowerCase():"percent-of-total"===c&&(d=l,"number"===typeof d&&!isNaN(d)&&Infinity!==d&&-Infinity!==d&&0!==l||(l=null),b+=","+l))}return b},createAttributeCache:function(l,d){if(!l)return null;var f=l.valueExpression,b=t.createSyntaxTree(f),c=r.getAttributeIdSource(l);
return{attributeInfo:l,isNumeric:!d,idSource:c,id:r.getAttributeId(c),hasExpr:!!f,compiledFunc:t.createFunction(b),syntaxTree:b,isScaleDriven:!!l.expression||r.viewScaleRE.test(f),dependsOnView:b?t.dependsOnView(b):!1,dependsOnGeometry:b?t.hasGeometryOperations(b):!1,isJSFunc:F.isFunction(l.field)}}};y("extend-esri")&&F.setObject("layers.support.attributeUtils",r,n);return r})},"dojox/encoding/digests/_base":function(){define(["dojo/_base/lang"],function(F){F=F.getObject("dojox.encoding.digests",
!0);F.outputTypes={Base64:0,Hex:1,String:2,Raw:3};F.addWords=function(y,a){var u=(y&65535)+(a&65535);return(y>>16)+(a>>16)+(u>>16)<<16|u&65535};F.stringToWord=function(y){for(var a=[],u=0,n=8*y.length;u<n;u+=8)a[u>>5]|=(y.charCodeAt(u/8)&255)<<u%32;return a};F.wordToString=function(y){for(var a=[],u=0,n=32*y.length;u<n;u+=8)a.push(String.fromCharCode(y[u>>5]>>>u%32&255));return a.join("")};F.wordToHex=function(y){for(var a=[],u=0,n=4*y.length;u<n;u++)a.push("0123456789abcdef".charAt(y[u>>2]>>u%4*
8+4&15)+"0123456789abcdef".charAt(y[u>>2]>>u%4*8&15));return a.join("")};F.wordToBase64=function(y){for(var a=[],u=0,n=4*y.length;u<n;u+=3)for(var t=(y[u>>2]>>u%4*8&255)<<16|(y[u+1>>2]>>(u+1)%4*8&255)<<8|y[u+2>>2]>>(u+2)%4*8&255,r=0;4>r;r++)8*u+6*r>32*y.length?a.push("\x3d"):a.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t>>6*(3-r)&63));return a.join("")};F.stringToUtf8=function(y){for(var a="",u=-1,n,t;++u<y.length;)n=y.charCodeAt(u),t=u+1<y.length?y.charCodeAt(u+
1):0,55296<=n&&56319>=n&&56320<=t&&57343>=t&&(n=65536+((n&1023)<<10)+(t&1023),u++),127>=n?a+=String.fromCharCode(n):2047>=n?a+=String.fromCharCode(192|n>>>6&31,128|n&63):65535>=n?a+=String.fromCharCode(224|n>>>12&15,128|n>>>6&63,128|n&63):2097151>=n&&(a+=String.fromCharCode(240|n>>>18&7,128|n>>>12&63,128|n>>>6&63,128|n&63));return a};return F})},"dojox/encoding/digests/MD5":function(){define(["./_base"],function(F){function y(l,d){return l<<d|l>>>32-d}function a(l,d,f,b,c,g){return F.addWords(y(F.addWords(F.addWords(d,
l),F.addWords(b,g)),c),f)}function u(l,d,f,b,c,g,e){return a(d&f|~d&b,l,d,c,g,e)}function n(l,d,f,b,c,g,e){return a(d&b|f&~b,l,d,c,g,e)}function t(l,d,f,b,c,g,e){return a(f^(d|~b),l,d,c,g,e)}function r(l,d){l[d>>5]|=128<<d%32;l[(d+64>>>9<<4)+14]=d;d=1732584193;for(var f=-271733879,b=-1732584194,c=271733878,g=0;g<l.length;g+=16){var e=d,h=f,k=b,m=c;d=u(d,f,b,c,l[g+0],7,-680876936);c=u(c,d,f,b,l[g+1],12,-389564586);b=u(b,c,d,f,l[g+2],17,606105819);f=u(f,b,c,d,l[g+3],22,-1044525330);d=u(d,f,b,c,l[g+
4],7,-176418897);c=u(c,d,f,b,l[g+5],12,1200080426);b=u(b,c,d,f,l[g+6],17,-1473231341);f=u(f,b,c,d,l[g+7],22,-45705983);d=u(d,f,b,c,l[g+8],7,1770035416);c=u(c,d,f,b,l[g+9],12,-1958414417);b=u(b,c,d,f,l[g+10],17,-42063);f=u(f,b,c,d,l[g+11],22,-1990404162);d=u(d,f,b,c,l[g+12],7,1804603682);c=u(c,d,f,b,l[g+13],12,-40341101);b=u(b,c,d,f,l[g+14],17,-1502002290);f=u(f,b,c,d,l[g+15],22,1236535329);d=n(d,f,b,c,l[g+1],5,-165796510);c=n(c,d,f,b,l[g+6],9,-1069501632);b=n(b,c,d,f,l[g+11],14,643717713);f=n(f,b,
c,d,l[g+0],20,-373897302);d=n(d,f,b,c,l[g+5],5,-701558691);c=n(c,d,f,b,l[g+10],9,38016083);b=n(b,c,d,f,l[g+15],14,-660478335);f=n(f,b,c,d,l[g+4],20,-405537848);d=n(d,f,b,c,l[g+9],5,568446438);c=n(c,d,f,b,l[g+14],9,-1019803690);b=n(b,c,d,f,l[g+3],14,-187363961);f=n(f,b,c,d,l[g+8],20,1163531501);d=n(d,f,b,c,l[g+13],5,-1444681467);c=n(c,d,f,b,l[g+2],9,-51403784);b=n(b,c,d,f,l[g+7],14,1735328473);f=n(f,b,c,d,l[g+12],20,-1926607734);d=a(f^b^c,d,f,l[g+5],4,-378558);c=a(d^f^b,c,d,l[g+8],11,-2022574463);
b=a(c^d^f,b,c,l[g+11],16,1839030562);f=a(b^c^d,f,b,l[g+14],23,-35309556);d=a(f^b^c,d,f,l[g+1],4,-1530992060);c=a(d^f^b,c,d,l[g+4],11,1272893353);b=a(c^d^f,b,c,l[g+7],16,-155497632);f=a(b^c^d,f,b,l[g+10],23,-1094730640);d=a(f^b^c,d,f,l[g+13],4,681279174);c=a(d^f^b,c,d,l[g+0],11,-358537222);b=a(c^d^f,b,c,l[g+3],16,-722521979);f=a(b^c^d,f,b,l[g+6],23,76029189);d=a(f^b^c,d,f,l[g+9],4,-640364487);c=a(d^f^b,c,d,l[g+12],11,-421815835);b=a(c^d^f,b,c,l[g+15],16,530742520);f=a(b^c^d,f,b,l[g+2],23,-995338651);
d=t(d,f,b,c,l[g+0],6,-198630844);c=t(c,d,f,b,l[g+7],10,1126891415);b=t(b,c,d,f,l[g+14],15,-1416354905);f=t(f,b,c,d,l[g+5],21,-57434055);d=t(d,f,b,c,l[g+12],6,1700485571);c=t(c,d,f,b,l[g+3],10,-1894986606);b=t(b,c,d,f,l[g+10],15,-1051523);f=t(f,b,c,d,l[g+1],21,-2054922799);d=t(d,f,b,c,l[g+8],6,1873313359);c=t(c,d,f,b,l[g+15],10,-30611744);b=t(b,c,d,f,l[g+6],15,-1560198380);f=t(f,b,c,d,l[g+13],21,1309151649);d=t(d,f,b,c,l[g+4],6,-145523070);c=t(c,d,f,b,l[g+11],10,-1120210379);b=t(b,c,d,f,l[g+2],15,
718787259);f=t(f,b,c,d,l[g+9],21,-343485551);d=F.addWords(d,e);f=F.addWords(f,h);b=F.addWords(b,k);c=F.addWords(c,m)}return[d,f,b,c]}F.MD5=function(l,d){d=d||F.outputTypes.Base64;l=r(F.stringToWord(l),8*l.length);switch(d){case F.outputTypes.Raw:return l;case F.outputTypes.Hex:return F.wordToHex(l);case F.outputTypes.String:return F.wordToString(l);default:return F.wordToBase64(l)}};F.MD5._hmac=function(l,d,f){f=f||F.outputTypes.Base64;var b=F.stringToWord(d);16<b.length&&(b=r(b,8*d.length));var c=
[];d=[];for(var g=0;16>g;g++)c[g]=b[g]^909522486,d[g]=b[g]^1549556828;l=r(c.concat(F.stringToWord(l)),512+8*l.length);l=r(d.concat(l),640);switch(f){case F.outputTypes.Raw:return l;case F.outputTypes.Hex:return F.wordToHex(l);case F.outputTypes.String:return F.wordToString(l);default:return F.wordToBase64(l)}};return F.MD5})},"esri/support/expressionUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../kernel ../arcade/arcade ../arcade/Feature".split(" "),function(F,
y,a,u,n,t,r){function l(g){var e=new u;g.then(function(h){if(!e.isFulfilled())return e.resolve(h)},function(h){if(!e.isFulfilled())return e.reject(h)});return e.promise}function d(g){return g.replace(/[|\\{}()[\]^$+*?.]/g,"\\$\x26")}var f={vars:{$feature:"any",$view:"any"}},b=/^\$(feature|aggregatedFeatures)\./i,c={_getSyntaxTree:function(g){return"string"===typeof g?c.createSyntaxTree(g):g},createSyntaxTree:function(g){try{var e=g?t.parseScript(g):null}catch(h){e=null}return e},createFunction:function(g,
e){e=e||F.clone(f);g=c._getSyntaxTree(g);try{var h=g?t.compileScript(g,e):null}catch(k){console.log("expressionUtils.createFunction: compilation failed. "+(k.message||"")),h=null}return h},createExecContext:function(g,e){return{vars:{$feature:g?r.createFromGraphic(g):new r,$view:e&&e.view},spatialReference:e&&e.sr}},evalSyntaxTree:function(g,e){try{var h=t.executeScript(g,e)}catch(k){h=null}return h},executeFunction:function(g,e){try{var h=g?g(e):null}catch(k){h=null}return h},executeAsyncFunction:function(g,
e){try{var h=g?l(g(e)):(new u).reject(Error("expressionUtils.executeAsyncFunction: Invalid argument. compiledFunc is missing."))}catch(k){h=(new u).reject(k)}return h},extractFieldNames:function(g,e){g=c._getSyntaxTree(g);g=t.extractExpectedFieldLiterals(g);var h=[];y.forEach(g,function(m){b.test(m)&&(m=m.replace(b,""),h.push(m))});var k=y.filter(h,function(m){return-1!==m.indexOf("*")});h=y.filter(h,function(m){return-1===k.indexOf(m)});e&&y.forEach(k,function(m){var w=new RegExp("^"+m.split(/\*+/).map(d).join(".*")+
"$","i");y.forEach(e,function(p){w.test(p)&&h.push(p)})});h.sort();return y.filter(h,function(m,w){return 0===w||h[w-1]!==m})},dependsOnView:function(g){return c.hasVariable(g,"$view")},hasGeometryFunctions:function(g){return(g=c._getSyntaxTree(g))?t.scriptTouchesGeometry(g):!1},hasGeometryOperations:function(g){return(g=c._getSyntaxTree(g))?t.scriptUsesGeometryEngine(g):!1},enableGeometryOperations:function(){return l(t.enableGeometrySupport())},hasVariable:function(g,e){return(g=c._getSyntaxTree(g))?
t.referencesMember(g,e):!1},hasFunction:function(g,e){return(g=c._getSyntaxTree(g))?t.referencesFunction(g,e):!1},createFeatureSetFromLayer:function(g,e){e=e||{};var h=t.featureSetUtils();return h?h.constructFeatureSet(g,e.spatialReference,e.outFields,e.returnGeometry,e.cache):null},createFeatureSetFromLayerUrl:function(g,e){e=e||{};var h=t.featureSetUtils();return h?h.constructFeatureSetFromUrlRaw(g,e.spatialReference,e.outFields,e.returnGeometry,e.cache):null},createFeatureSetCollectionFromMap:function(g,
e){var h=t.featureSetUtils();return h?h.createFeatureSetCollectionFromMap(g,g.spatialReference,e&&e.cache):null},createFeatureSetCollectionFromServiceUrl:function(g,e){e=e||{};var h=t.featureSetUtils();return h?h.createFeatureSetCollectionFromService(g,e.spatialReference,e.cache):null},hasFeatureSetOperations:function(g){return(g=c._getSyntaxTree(g))?t.scriptUsesFeatureSet(g):!1},enableFeatureSetOperations:function(){return l(t.enableFeatureSetSupport().then(function(){var g=t.featureSetUtils();g&&
g.initialiseMetaDataCache()}))},enableAsyncOperations:function(){return l(t.enableAsyncSupport())}};a("extend-esri")&&F.setObject("support.expressionUtils",c,n);return c})},"esri/arcade/arcade":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./arcadeCompiler ./arcadeRuntime ./parser ./treeAnalysis dojo/has".split(" "),function(F,y,a,u,n,t,r,l,d){function f(X,fa){if(null===x)throw Error("Async Arcade must be enabled for this script");return d("esri-csp-restrictions")||
!1===v?function(sa){return x.executeScript(X,sa)}:n.compileScript(X,fa,!0)}function b(X,fa){void 0===fa&&(fa=[]);return r.parseScript(X,fa)}function c(X,fa){if(!0===fa.useAsync||!0===X.isAsync){if(null===x)throw Error("Async Arcade must be enabled for this script");return x.executeScript(X,fa)}return t.executeScript(X,fa)}function g(X,fa){return t.referencesMember(X,fa)}function e(X,fa){void 0===fa&&(fa=[]);void 0===X.usesGeometry&&l.findScriptDependencies(X,fa);return!0===X.usesGeometry}function h(){return G?
G:G=k()}function k(){return a(this,void 0,void 0,function(){return u(this,function(X){return[2,new Promise(function(fa,sa){F(["../geometry/geometryEngine","./functions/geomsync"],function(T,ka){D=!0;ka.setGeometryEngine(T);fa(!0)},function(T){sa(T)})})]})})}function m(){return null!==I?I:I=w()}function w(){return a(this,void 0,void 0,function(){var X,fa,sa;return u(this,function(T){switch(T.label){case 0:return[4,n.enableAsyncSupport()];case 1:return T.sent(),[4,new Promise(function(ka,ma){F(["./arcadeAsyncRuntime"],
function(wa){ka(wa)},ma)})];case 2:x=T.sent();X=0;for(fa=E;X<fa.length;X++)sa=fa[X],x.extend(sa),n.extend(sa,"async");E=null;return[2,!0]}})})}function p(){return x?!0:!1}function A(){return L?L:L=C()}function C(){return a(this,void 0,void 0,function(){var X;return u(this,function(fa){switch(fa.label){case 0:return[4,m()];case 1:return fa.sent(),[4,new Promise(function(sa,T){F(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],
function(ka,ma,wa,ja,ua){sa({featuresetutils:ka,libraries:[ma,wa,ja,ua]})},T)})];case 2:return X=fa.sent(),Y=X.featuresetutils,x.extend(X.libraries),n.extend(X.libraries,"async"),B=!0,[2,!0]}})})}function z(X,fa){void 0===fa&&(fa=[]);void 0===X.usesFeatureSet&&l.findScriptDependencies(X,fa);return!0===X.usesFeatureSet}Object.defineProperty(y,"__esModule",{value:!0});y.featureSetUtils=y.scriptTouchesGeometry=y.loadScriptDependencies=y.scriptIsAsync=y.scriptUsesFeatureSet=y.enableFeatureSetSupportImpl=
y.enableFeatureSetSupport=y.isGeometryEnabled=y.isAsyncEnabled=y.isFeatureSetSupportEnabled=y.enableAsyncSupportImpl=y.enableAsyncSupport=y.enableGeometrySupportImpl=y.enableGeometrySupport=y.scriptUsesGeometryEngine=y.extractExpectedFieldLiterals=y.extractFieldLiterals=y.referencesFunction=y.referencesMember=y.executeScript=y.parseAndExecuteScript=y.scriptCheck=y.validateScript=y.parseScript=y.extend=y.compileScript=void 0;var q="feature angle bearing centroid envelopeintersects extent geometry isselfintersecting ringisclockwise".split(" "),
v=function(){if(d("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(X){return!1}}(),B=!1,D=!1,x=null,E=[];y.compileScript=function(X,fa){return!0===fa.useAsync||!0===X.isAsync?f(X,fa):d("esri-csp-restrictions")?function(sa){return t.executeScript(X,sa)}:n.compileScript(X,fa)};y.extend=function(X){t.extend(X);n.extend(X,"sync");null===x?E.push(X):(n.extend(X,"async"),x.extend(X))};y.parseScript=b;y.validateScript=function(X,fa,sa){void 0===sa&&(sa="");
return r.validateScript(X,fa,sa)};y.scriptCheck=function(X,fa,sa,T){void 0===T&&(T="");return r.scriptCheck(X,fa,sa,T)};y.parseAndExecuteScript=function(X,fa,sa){void 0===sa&&(sa=[]);X=r.parseScript(X,sa);return c(X,fa)};y.executeScript=c;y.referencesMember=g;y.referencesFunction=function(X,fa){return t.referencesFunction(X,fa)};y.extractFieldLiterals=function(X,fa){void 0===fa&&(fa=!1);return r.extractFieldLiterals(X,fa)};y.extractExpectedFieldLiterals=function(X){return r.extractExpectedFieldLiterals(X)};
y.scriptUsesGeometryEngine=e;var G=null;y.enableGeometrySupport=h;y.enableGeometrySupportImpl=k;var I=null;y.enableAsyncSupport=m;y.enableAsyncSupportImpl=w;y.isFeatureSetSupportEnabled=function(){return B};y.isAsyncEnabled=p;y.isGeometryEnabled=function(){return D};var L=null;y.enableFeatureSetSupport=A;y.enableFeatureSetSupportImpl=C;y.scriptUsesFeatureSet=z;y.scriptIsAsync=function(X,fa){void 0===fa&&(fa=[]);void 0===X.isAsync&&l.findScriptDependencies(X,fa);return!0===X.isAsync};y.loadScriptDependencies=
function(X,fa,sa,T){void 0===sa&&(sa=[]);void 0===T&&(T=!1);return a(this,void 0,void 0,function(){var ka,ma;return u(this,function(wa){switch(wa.label){case 0:ka="string"===typeof X?b(X):X;ma=[];if(ka&&(!1===D&&(e(ka)||T)&&ma.push(h()),!1===p()&&(!0===ka.isAsync||fa)&&ma.push(m()),!1===B)){if(!(wa=z(ka)))a:{wa=ka;if(sa)for(var ja=0,ua=sa;ja<ua.length;ja++)if(g(wa,ua[ja])){wa=!0;break a}wa=!1}wa&&ma.push(A())}return ma.length?[4,Promise.all(ma)]:[3,2];case 1:return wa.sent(),[2,!0];case 2:return[2,
!0]}})})};y.scriptTouchesGeometry=function(X){if(e(X))return!0;X=l.findFunctionCalls(X);for(var fa=!1,sa=0;sa<X.length;sa++)if(q.includes(X[sa])){fa=!0;break}return fa};var Y=null;y.featureSetUtils=function(){return Y}})},"esri/arcade/arcadeCompiler":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./ArcadePortal ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m,w,p,A,C,z,q,v,B,D,x,E,G){function I(O,V,pa){try{return pa(O,null,V.arguments)}catch(za){throw za;}}function L(O,V){try{switch(V.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return T(O,V);case "VariableDeclaration":for(var pa=[],za=0;za<V.declarations.length;za++)pa.push(L(O,V.declarations[za]));return pa.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return sa(O,V);case "FunctionDeclaration":var Ja=
V.id.name.toLowerCase(),Qa={isAsync:O.isAsync,spatialReference:O.spatialReference,console:O.console,lrucache:O.lrucache,interceptor:O.interceptor,services:O.services,symbols:O.symbols,mangleMap:O.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:O.depthCounter+1,globalScope:O.globalScope};if(64<Qa.depthCounter)throw Error("Exceeded maximum function depth");pa="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(za=0;za<V.params.length;za++){var J=V.params[za].name.toLowerCase(),U=ia(O);Qa.localScope._SymbolsMap[J]=U;Qa.mangleMap[J]=U;pa+="lscope['"+U+"']\x3darguments["+za.toString()+"];\n"}!0===O.isAsync?(pa=pa+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(sa(Qa,V.body)+"\n return lastStatement; "),pa=pa+"});  }, runtimeCtx),"+(V.params.length+")")):pa+=sa(Qa,V.body)+"\n return lastStatement; }, runtimeCtx),"+V.params.length+")";pa+="\n lastStatement \x3d lc.voidOperation; \n";if(void 0!==
O.globalScope[Ja])var ha="gscope['"+Ja+"']\x3d"+pa;else void 0!==O.globalScope._SymbolsMap[Ja]?ha="gscope['"+O.globalScope._SymbolsMap[Ja]+"']\x3d"+pa:(U=ia(O),O.globalScope._SymbolsMap[Ja]=U,O.mangleMap[Ja]=U,ha="gscope['"+U+"']\x3d"+pa);return ha;case "ReturnStatement":var K=null===V.argument?"return lc.voidOperation":"return "+L(O,V.argument);return K;case "IfStatement":if("AssignmentExpression"===V.test.type||"UpdateExpression"===V.test.type)throw Error(e.nodeErrorMessage(V.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
var S=L(O,V.test),ba=qa(O),ra="var "+ba+" \x3d "+S+";\n if ("+ba+" \x3d\x3d\x3d true) {\n"+fa(O,V.consequent)+"\n }\n";ra=null!==V.alternate?ra+("else if ("+ba+"\x3d\x3d\x3dfalse)   { \n"+fa(O,V.alternate)+"}\n"):ra+("else if ("+ba+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return ra+="else { lang.error({type: '"+V.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var xa="AssignmentExpression"===V.expression.type?"lastStatement \x3d lc.voidOperation; "+
L(O,V.expression)+"; \n ":"lastStatement \x3d "+L(O,V.expression)+"; ";return xa;case "AssignmentExpression":return X(O,V);case "UpdateExpression":return Y(O,V);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{var La=[];Ja=ha=0;for(za=V.quasis;Ja<za.length;Ja++){var Ha=za[Ja];La.push(Ha.value?JSON.stringify(Ha.value.cooked):JSON.stringify(""));!1===Ha.tail&&(La.push(V.expressions[ha]?"lang.castString(lang.aCheck("+L(O,V.expressions[ha])+", 'TemplateLiteral'))":
""),ha++)}pa="(["+La.join(",")+"]).join('')"}catch(mb){throw mb;}return pa;case "TemplateElement":return JSON.stringify(V.value?V.value.cooked:"");case "ForStatement":pa="lastStatement \x3d lc.voidOperation; \n";null!==V.init&&(pa+=L(O,V.init)+"; ");var Va=qa(O),Ta=qa(O);pa+="var "+Va+" \x3d true; \n do { ";null!==V.update&&(pa+=" if ("+Va+"\x3d\x3d\x3dfalse) {\n "+L(O,V.update)+"  \n}\n "+Va+"\x3dfalse; \n");null!==V.test&&(pa+="var "+Ta+" \x3d "+L(O,V.test)+"; ",pa+="if ("+Ta+"\x3d\x3d\x3dfalse) { break; } else if ("+
Ta+"!\x3d\x3dtrue) { lang.error({type: '"+V.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");pa+=L(O,V.body);null!==V.update&&(pa+="\n "+L(O,V.update));return pa+("\n"+Va+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var Pa=qa(O),Xa=qa(O),ab=qa(O),Ya="var "+Pa+" \x3d "+L(O,V.right)+";\n";"VariableDeclaration"===V.left.type&&(Ya+=L(O,V.left));var hb="VariableDeclaration"===V.left.type?V.left.declarations[0].id.name:V.left.name;hb=hb.toLowerCase();
pa="";null!==O.localScope&&(void 0!==O.localScope[hb]?pa="lscope['"+hb+"']":void 0!==O.localScope._SymbolsMap[hb]&&(pa="lscope['"+O.localScope._SymbolsMap[hb]+"']"));""===pa&&(void 0!==O.globalScope[hb]?pa="gscope['"+hb+"']":void 0!==O.globalScope._SymbolsMap[hb]&&(pa="gscope['"+O.globalScope._SymbolsMap[hb]+"']"));Ya=Ya+("if ("+Pa+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+(Pa+") || lc.isString("+Pa+")) {var ")+(Xa+"\x3d"+Pa+".length; \nfor(var ")+(ab+"\x3d0; "+
ab+"\x3c"+Xa+"; "+ab+"++) {\n");Ya+=pa+"\x3d"+ab+";\n";Ya+=L(O,V.body);Ya+="\n}\n";Ya+=" lastStatement \x3d lc.voidOperation; \n";Ya+=" \n}\n";Ya+="else if (lc.isImmutableArray("+Pa+")) {";Ya=Ya+("var "+Xa+"\x3d"+Pa+".length(); \nfor(var ")+(ab+"\x3d0; "+ab+"\x3c"+Xa+"; "+ab+"++) {\n");Ya+=pa+"\x3d"+ab+";\n";Ya+=L(O,V.body);Ya+="\n}\n";Ya+=" lastStatement \x3d lc.voidOperation; \n";Ya+=" \n}\n";Ya+="else if (( "+Pa+" instanceof lang.Dictionary) || ( "+Pa+" instanceof lang.Feature)) {";Ya=Ya+("var "+
Xa+"\x3d"+Pa+".keys(); \nfor(var ")+(ab+"\x3d0; "+ab+"\x3c"+Xa+".length; "+ab+"++) {\n");Ya+=pa+"\x3d"+Xa+"["+ab+"];\n";Ya+=L(O,V.body);Ya+="\n}\n";Ya+=" lastStatement \x3d lc.voidOperation; \n";Ya+=" \n}\n";O.isAsync&&(Ya+="else if (lc.isFeatureSet("+Pa+")) {",Ya=Ya+("var "+Xa+"\x3d"+Pa+".iterator(runtimeCtx.abortSignal); \nfor(var ")+(ab+"\x3dlang. graphicToFeature( yield "+Xa+".next(),"+Pa+"); "+ab+"!\x3dnull; "+ab+"\x3dlang. graphicToFeature( yield "+Xa+".next(),"+Pa+")) {\n")+(pa+"\x3d"+ab+";\n"),
Ya+=L(O,V.body),Ya+="\n}\n",Ya+=" lastStatement \x3d lc.voidOperation; \n",Ya+=" \n}\n");return Ya+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return ma(O,V);case "MemberExpression":try{pa=void 0;pa=!0===V.computed?L(O,V.property):"'"+V.property.name+"'";var eb="lang.member("+L(O,V.object)+","+pa+")"}catch(mb){throw mb;}return eb;case "Literal":return null===V.value||void 0===V.value?"null":JSON.stringify(V.value);case "ThisExpression":throw Error(e.nodeErrorMessage(V,"RUNTIME",
"NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==V.callee.type)throw Error(e.nodeErrorMessage(V,"RUNTIME","ONLYNODESSUPPORTED"));var kb=V.callee.name.toLowerCase();pa="";null!==O.localScope&&(void 0!==O.localScope[kb]?pa="lscope['"+kb+"']":void 0!==O.localScope._SymbolsMap[kb]&&(pa="lscope['"+O.localScope._SymbolsMap[kb]+"']"));""===pa&&(void 0!==O.globalScope[kb]?pa="gscope['"+kb+"']":void 0!==O.globalScope._SymbolsMap[kb]&&(pa="gscope['"+O.globalScope._SymbolsMap[kb]+"']"));if(""!==
pa){za="[";for(Ha=0;Ha<V.arguments.length;Ha++)0<Ha&&(za+=", "),za+=L(O,V.arguments[Ha]);za+="]";La=O.isAsync?"(yield lang.callfunc("+pa+","+za+",runtimeCtx) )":"lang.callfunc("+pa+","+za+",runtimeCtx)"}else throw Error(e.nodeErrorMessage(V,"RUNTIME","NOTFOUND"));}catch(mb){throw mb;}return La;case "UnaryExpression":try{var sb="lang.unary("+L(O,V.argument)+",'"+V.operator+"')"}catch(mb){throw mb;}return sb;case "BinaryExpression":try{var qb="lang.binary("+L(O,V.left)+","+L(O,V.right)+",'"+V.operator+
"')"}catch(mb){throw mb;}return qb;case "LogicalExpression":try{if("AssignmentExpression"===V.left.type||"UpdateExpression"===V.left.type)throw Error(e.nodeErrorMessage(V.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===V.right.type||"UpdateExpression"===V.right.type)throw Error(e.nodeErrorMessage(V.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===V.operator||"||"===V.operator)var gb="(lang.logicalCheck("+L(O,V.left)+") "+V.operator+" lang.logicalCheck("+
L(O,V.right)+"))";else throw Error(e.nodeErrorMessage(V,"RUNTIME","ONLYORORAND"));}catch(mb){throw mb;}return gb;case "ConditionalExpression":throw Error(e.nodeErrorMessage(V,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{pa=[];for(za=0;za<V.elements.length;za++)"Literal"===V.elements[za].type?pa.push(L(O,V.elements[za])):pa.push("lang.aCheck("+L(O,V.elements[za])+",'ArrayExpression')");var pb="["+pa.join(",")+"]"}catch(mb){throw mb;}return pb;case "ObjectExpression":pa="lang.dictionary([";
for(za=0;za<V.properties.length;za++){var Ab=V.properties[za],Db="Identifier"===Ab.key.type?"'"+Ab.key.name+"'":L(O,Ab.key),xb=L(O,Ab.value);0<za&&(pa+=",");pa+="lang.strCheck("+Db+",'ObjectExpression'),lang.aCheck("+xb+", 'ObjectExpression')"}return pa+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(e.nodeErrorMessage(V,"RUNTIME","NOTSUPPORTED"));default:throw Error(e.nodeErrorMessage(V,"RUNTIME","UNREOGNISED"));}}catch(mb){throw mb;}}function Y(O,V){var pa=null,
za="";if("MemberExpression"===V.argument.type)return pa=L(O,V.argument.object),za=!0===V.argument.computed?L(O,V.argument.property):"'"+V.argument.property.name+"'","lang.memberupdate("+pa+","+za+",'"+V.operator+"',"+V.prefix+")";pa=V.argument.name.toLowerCase();if(null!==O.localScope){if(void 0!==O.localScope[pa])return"lang.update(lscope, '"+pa+"','"+V.operator+"',"+V.prefix+")";if(void 0!==O.localScope._SymbolsMap[pa])return"lang.update(lscope, '"+O.localScope._SymbolsMap[pa]+"','"+V.operator+
"',"+V.prefix+")"}if(void 0!==O.globalScope[pa])return"lang.update(gscope, '"+pa+"','"+V.operator+"',"+V.prefix+")";if(void 0!==O.globalScope._SymbolsMap[pa])return"lang.update(gscope, '"+O.globalScope._SymbolsMap[pa]+"','"+V.operator+"',"+V.prefix+")";throw Error("Variable not recognised");}function X(O,V){var pa=L(O,V.right),za=null,Ja="";if("MemberExpression"===V.left.type)return za=L(O,V.left.object),Ja=!0===V.left.computed?L(O,V.left.property):"'"+V.left.property.name+"'","lang.assignmember("+
za+","+Ja+",'"+V.operator+"',"+pa+")";za=V.left.name.toLowerCase();if(null!==O.localScope){if(void 0!==O.localScope[za])return"lscope['"+za+"']\x3dlang.assign("+pa+",'"+V.operator+"', lscope['"+za+"'])";if(void 0!==O.localScope._SymbolsMap[za])return"lscope['"+O.localScope._SymbolsMap[za]+"']\x3dlang.assign("+pa+",'"+V.operator+"', lscope['"+O.localScope._SymbolsMap[za]+"'])"}if(void 0!==O.globalScope[za])return"gscope['"+za+"']\x3dlang.assign("+pa+",'"+V.operator+"', gscope['"+za+"'])";if(void 0!==
O.globalScope._SymbolsMap[za])return"gscope['"+O.globalScope._SymbolsMap[za]+"']\x3dlang.assign("+pa+",'"+V.operator+"', gscope['"+O.globalScope._SymbolsMap[za]+"'])";throw Error("Variable not recognised");}function fa(O,V){return"BlockStatement"===V.type?L(O,V):"ReturnStatement"===V.type||"BreakStatement"===V.type||"ContinueStatement"===V.type?L(O,V)+"; ":"UpdateExpression"===V.type?"lastStatement \x3d "+L(O,V)+"; ":"ExpressionStatement"===V.type?L(O,V):"ObjectExpression"===V.type?"lastStatement \x3d "+
L(O,V)+"; ":L(O,V)+"; "}function sa(O,V){for(var pa="",za=0;za<V.body.length;za++)pa="ReturnStatement"===V.body[za].type?pa+(L(O,V.body[za])+"; \n"):"BreakStatement"===V.body[za].type?pa+(L(O,V.body[za])+"; \n"):"ContinueStatement"===V.body[za].type?pa+(L(O,V.body[za])+"; \n"):"UpdateExpression"===V.body[za].type?pa+("lastStatement \x3d "+L(O,V.body[za])+"; \n"):"ObjectExpression"===V.body[za].type?pa+("lastStatement \x3d "+L(O,V.body[za])+"; \n"):pa+(L(O,V.body[za])+" \n");return pa}function T(O,
V){var pa=null===V.init?null:L(O,V.init);pa===g.voidOperation&&(pa=null);V=V.id.name.toLowerCase();if(null!==O.localScope){if(void 0!==O.localScope[V])return"lscope['"+V+"']\x3d"+pa+"; ";if(void 0!==O.localScope._SymbolsMap[V])return"lscope['"+O.localScope._SymbolsMap[V]+"']\x3d"+pa+"; ";var za=ia(O);O.localScope._SymbolsMap[V]=za;O.mangleMap[V]=za;return"lscope['"+za+"']\x3d"+pa+"; "}if(void 0!==O.globalScope[V])return"gscope['"+V+"']\x3d"+pa+"; ";if(void 0!==O.globalScope._SymbolsMap[V])return"gscope['"+
O.globalScope._SymbolsMap[V]+"']\x3d"+pa+"; ";za=ia(O);O.globalScope._SymbolsMap[V]=za;O.mangleMap[V]=za;return"gscope['"+za+"']\x3d"+pa+"; "}function ka(O,V,pa){V=V.toLowerCase();switch(V){case "hasz":return O=O.hasZ,void 0===O?!1:O;case "hasm":return O=O.hasM,void 0===O?!1:O;case "spatialreference":return V=O.spatialReference._arcadeCacheId,void 0===V&&(pa=!0,Object.freeze&&Object.isFrozen(O.spatialReference)&&(pa=!1),pa&&(la++,V=O.spatialReference._arcadeCacheId=la)),O=new d({wkt:O.spatialReference.wkt,
wkid:O.spatialReference.wkid}),void 0!==V&&(O._arcadeCacheId="SPREF"+V.toString()),O}switch(O.type){case "extent":switch(V){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return O=O[V],void 0!==O?O:null;case "type":return"Extent"}break;case "polygon":switch(V){case "rings":return V=O.getCacheValue("_arcadeCacheId"),void 0===V&&(la++,V=la,O.setCacheValue("_arcadeCacheId",V)),O=new b(O.rings,O.spatialReference,!0===O.hasZ,!0===O.hasM,V);case "type":return"Polygon"}break;
case "point":switch(V){case "x":case "y":case "z":case "m":return void 0!==O[V]?O[V]:null;case "type":return"Point"}break;case "polyline":switch(V){case "paths":return V=O.getCacheValue("_arcadeCacheId"),void 0===V&&(la++,V=la,O.setCacheValue("_arcadeCacheId",V)),O=new b(O.paths,O.spatialReference,!0===O.hasZ,!0===O.hasM,V);case "type":return"Polyline"}break;case "multipoint":switch(V){case "points":return V=O.getCacheValue("_arcadeCacheId"),void 0===V&&(la++,V=la,O.setCacheValue("_arcadeCacheId",
V)),O=new c(O.points,O.spatialReference,!0===O.hasZ,!0===O.hasM,V,1);case "type":return"Multipoint"}}throw Error(e.nodeErrorMessage(pa,"RUNTIME","PROPERTYNOTFOUND"));}function ma(O,V){try{var pa=V.name.toLowerCase();if(null!==O.localScope){if(void 0!==O.localScope[pa])return"lscope['"+pa+"']";if(void 0!==O.localScope._SymbolsMap[pa])return"lscope['"+O.localScope._SymbolsMap[pa]+"']"}if(void 0!==O.globalScope[pa])return"gscope['"+pa+"']";if(void 0!==O.globalScope._SymbolsMap[pa])return"gscope['"+O.globalScope._SymbolsMap[pa]+
"']";throw Error(e.nodeErrorMessage(V,"RUNTIME","VARIABLENOTFOUND"));}catch(za){throw za;}}function wa(O){return null===O?"":g.isArray(O)||g.isImmutableArray(O)?"Array":g.isDate(O)?"Date":g.isString(O)?"String":g.isBoolean(O)?"Boolean":g.isNumber(O)?"Number":O instanceof l?"Attachment":O instanceof r?"Portal":O instanceof d?"Dictionary":g.isFeature(O)?"Feature":O instanceof D?"Point":O instanceof x?"Polygon":O instanceof E?"Polyline":O instanceof B?"Multipoint":O instanceof q?"Extent":g.isFunctionParameter(O)?
"Function":g.isFeatureSet(O)?"FeatureSet":g.isFeatureSetCollection(O)?"FeatureSetCollection":O===g.voidOperation?"":"number"===typeof O&&isNaN(O)?"Number":"Unrecognised Type"}function ja(O,V,pa,za){try{if(g.equalityTest(V[pa],za))return V[pa+1];var Ja=V.length-pa;return 1===Ja?V[pa]:2===Ja?null:3===Ja?V[pa+2]:ja(O,V,pa+2,za)}catch(Qa){throw Qa;}}function ua(O,V,pa,za){try{if(!0===za)return V[pa+1];if(3===V.length-pa)return V[pa+2];var Ja=V[pa+2];if(!1===g.isBoolean(Ja))throw Error("WHEN needs boolean test conditions");
return ua(O,V,pa+2,Ja)}catch(Qa){throw Qa;}}function Ba(O,V){var pa=O.length,za=Math.floor(pa/2);if(0===pa)return[];if(1===pa)return[O[0]];var Ja=Ba(O.slice(0,za),V);O=Ba(O.slice(za,pa),V);for(pa=[];0<Ja.length||0<O.length;)0<Ja.length&&0<O.length?(za=V(Ja[0],O[0]),isNaN(za)&&(za=0),0>=za?(pa.push(Ja[0]),Ja=Ja.slice(1)):(pa.push(O[0]),O=O.slice(1))):0<Ja.length?(pa.push(Ja[0]),Ja=Ja.slice(1)):0<O.length&&(pa.push(O[0]),O=O.slice(1));return pa}function M(O,V){return a(this,void 0,void 0,function(){var pa,
za,Ja,Qa;return u(this,function(J){switch(J.label){case 0:pa=O.length;za=Math.floor(pa/2);if(0===pa)return[2,[]];if(1===pa)return[2,[O[0]]];Ja=[M(O.slice(0,za),V),M(O.slice(za,pa),V)];return[4,Promise.all(Ja)];case 1:return Qa=J.sent(),[2,Z(Qa[0],Qa[1],V,[])]}})})}function Z(O,V,pa,za){return a(this,void 0,void 0,function(){var Ja,Qa;return u(this,function(J){switch(J.label){case 0:return Ja=za,0<O.length||0<V.length?0<O.length&&0<V.length?[4,pa(O[0],V[0])]:[3,2]:[3,4];case 1:return Qa=J.sent(),isNaN(Qa)&&
(Qa=1),0>=Qa?(Ja.push(O[0]),O=O.slice(1)):(Ja.push(V[0]),V=V.slice(1)),[2,Z(O,V,pa,za)];case 2:if(0<O.length)return Ja.push(O[0]),O=O.slice(1),[2,Z(O,V,pa,za)];if(0<V.length)return Ja.push(V[0]),V=V.slice(1),[2,Z(O,V,pa,za)];J.label=3;case 3:return[3,5];case 4:return[2,za];case 5:return[2]}})})}function ia(O){O.symbols.symbolCounter++;return"_T"+O.symbols.symbolCounter.toString()}function qa(O){O.symbols.symbolCounter++;return"_Tvar"+O.symbols.symbolCounter.toString()}function ya(O,V,pa){var za={};
O||(O={});pa||(pa={});za._SymbolsMap={};za.textformatting=1;za.infinity=1;za.pi=1;for(var Ja in V)za[Ja]=1;for(Ja in pa)za[Ja]=1;for(Ja in O)za[Ja]=1;return za}function Ca(O,V){for(var pa={mode:V,compiled:!0,functions:{},signatures:[],standardFunction:I,standardFunctionAsync:I,evaluateIdentifier:Ia},za=0;za<O.length;za++)O[za].registerFunctions(pa);if("sync"===V){for(var Ja in pa.functions)N[Ja]=new g.NativeFunction(pa.functions[Ja]),ca.prototype[Ja]=N[Ja];for(za=0;za<pa.signatures.length;za++)e.addFunctionDeclaration(pa.signatures[za],
"sync")}else{for(Ja in pa.functions)aa[Ja]=new g.NativeFunction(pa.functions[Ja]),ea.prototype[Ja]=aa[Ja];for(za=0;za<pa.signatures.length;za++)e.addFunctionDeclaration(pa.signatures[za],"async")}}function Ia(O,V){V=V.name;if("_SymbolsMap"===V)throw Error("Illegal");if(0<O.localStack.length){if("_t"!==V.substr(0,2).toLowerCase()&&void 0!==O.localStack[O.localStack.length-1][V])return O.localStack[O.localStack.length-1][V];var pa=O.mangleMap[V];if(void 0!==pa&&void 0!==O.localStack[O.localStack.length-
1][pa])return O.localStack[O.localStack.length-1][pa]}if("_t"!==V.substr(0,2).toLowerCase()&&void 0!==O.globalScope[V]||1===O.globalScope._SymbolsMap[V])return O.globalScope[V];V=O.mangleMap[V];if(void 0!==V)return O.globalScope[V]}function Oa(O){console.log(O)}Object.defineProperty(y,"__esModule",{value:!0});y.enableAsyncSupport=y.compileScript=y.referencesFunction=y.referencesMember=y.validateScript=y.extractExpectedFieldLiterals=y.extractFieldLiterals=y.executeScript=y.extend=y.functionHelper=
void 0;var la=0,N={};k.registerFunctions(N,I);C.registerFunctions(N,I);p.registerFunctions(N,I);m.registerFunctions(N,I);A.registerFunctions(N,I);N["typeof"]=function(O,V){return I(O,V,function(pa,za,Ja){g.pcCheck(Ja,1,1);pa=wa(Ja[0]);if("Unrecognised Type"===pa)throw Error("Unrecognised Type");return pa})};N.iif=function(O,V){try{return I(O,V,function(pa,za,Ja){g.pcCheck(Ja,3,3);if(!1===g.isBoolean(Ja[0]))throw Error("IF Function must have a boolean test condition");return Ja[0]?Ja[1]:Ja[2]})}catch(pa){throw pa;
}};N.decode=function(O,V){try{return I(O,V,function(pa,za,Ja){if(2>Ja.length)throw Error("Missing Parameters");if(2===Ja.length)return Ja[1];if(0===(Ja.length-1)%2)throw Error("Must have a default value result.");return ja(O,Ja,1,Ja[0])})}catch(pa){throw pa;}};N.when=function(O,V){try{return I(O,V,function(pa,za,Ja){if(3>Ja.length)throw Error("Missing Parameters");if(0===Ja.length%2)throw Error("Must have a default value result.");pa=Ja[0];if(!1===g.isBoolean(pa))throw Error("WHEN needs boolean test conditions");
return ua(O,Ja,0,pa)})}catch(pa){throw pa;}};N.top=function(O,V){return I(O,V,function(pa,za,Ja){g.pcCheck(Ja,2,2);if(g.isArray(Ja[0]))return g.toNumber(Ja[1])>=Ja[0].length?Ja[0].slice(0):Ja[0].slice(0,g.toNumber(Ja[1]));if(g.isImmutableArray(Ja[0]))return g.toNumber(Ja[1])>=Ja[0].length()?Ja[0].slice(0):Ja[0].slice(0,g.toNumber(Ja[1]));throw Error("Top cannot accept this parameter type");})};N.first=function(O,V){return I(O,V,function(pa,za,Ja){g.pcCheck(Ja,1,1);return g.isArray(Ja[0])?0===Ja[0].length?
null:Ja[0][0]:g.isImmutableArray(Ja[0])?0===Ja[0].length()?null:Ja[0].get(0):null})};N.sort=function(O,V){return I(O,V,function(pa,za,Ja){g.pcCheck(Ja,1,2);za=Ja[0];g.isImmutableArray(za)&&(za=za.toArray());if(!1===g.isArray(za))throw Error("Illegal Argument");if(1<Ja.length){if(!1===g.isFunctionParameter(Ja[1]))throw Error("Illegal Argument");var Qa=function(S,ba){return ta.callfunc(Ja[1],[S,ba],pa)};return O.isAsync?M(za,Qa):za=Ba(za,function(S,ba){return Qa(S,ba)})}if(0===za.length)return[];for(var J=
{},U=0;U<za.length;U++){var ha=wa(za[U]);""!==ha&&(J[ha]=!0)}if(!0===J.Array||!0===J.Dictionary||!0===J.Feature||!0===J.Point||!0===J.Polygon||!0===J.Polyline||!0===J.Multipoint||!0===J.Extent||!0===J.Function)return za.slice(0);U=0;ha="";for(var K in J)U++,ha=K;return za=1<U||"String"===ha?Ba(za,function(S,ba){if(null===S||void 0===S||S===g.voidOperation)return null===ba||void 0===ba||ba===g.voidOperation?0:1;if(null===ba||void 0===ba||ba===g.voidOperation)return-1;S=g.toString(S);ba=g.toString(ba);
return S<ba?-1:S===ba?0:1}):"Number"===ha?Ba(za,function(S,ba){return S-ba}):"Boolean"===ha?Ba(za,function(S,ba){return S===ba?0:ba?-1:1}):"Date"===ha?Ba(za,function(S,ba){return ba-S}):za.slice(0)})};var aa={},na;for(na in N)aa[na]=new g.NativeFunction(N[na]);w.registerFunctions(N,I);for(na in N)N[na]=new g.NativeFunction(N[na]);var ca=function(){};ca.prototype=N;var ea=function(){};ea.prototype=aa;y.functionHelper={fixSpatialReference:g.fixSpatialReference,parseArguments:function(O,V){for(var pa=
[],za=0;za<V.arguments.length;za++)pa.push(L(O,V.arguments[za]));return pa},standardFunction:I};y.extend=Ca;Ca([h],"sync");Ca([h],"async");y.executeScript=function(O,V){return O(V)};y.extractFieldLiterals=function(O,V){void 0===V&&(V=!1);return e.findFieldLiterals(O)};y.extractExpectedFieldLiterals=function(O){return e.findExpectedFieldLiterals(O)};y.validateScript=function(O,V){return e.validateScript(O,V,"sync")};y.referencesMember=function(O,V){return e.referencesMember(O,V)};y.referencesFunction=
function(O,V){return e.referencesFunction(O,V)};var oa=0,ta={error:function(O,V,pa){throw Error(e.nodeErrorMessage(O,V,pa));},__awaiter:function(O,V,pa,za){return new Promise(function(Ja,Qa){function J(K){try{ha(za.next(K))}catch(S){Qa(S)}}function U(K){try{ha(za["throw"](K))}catch(S){Qa(S)}}function ha(K){K.done?Ja(K.value):K.value&&K.value.then?K.value.then(J,U):(oa++,0===oa%100?setTimeout(function(){oa=0;J(K.value)},0):J(K.value))}ha((za=za.apply(O,V||[])).next())})},functionDepthchecker:function(O,
V){return function(){V.depthCounter++;V.localStack.push([]);if(64<V.depthCounter)throw Error("Exceeded maximum function depth");var pa=O.apply(this,arguments);if(z.isPromiseLike(pa))return pa.then(function(za){V.depthCounter--;--V.localStack.length;return za});V.depthCounter--;--V.localStack.length;return pa}},castString:function(O){return g.toString(O)},aCheck:function(O,V){if(g.isFunctionParameter(O))throw Error(e.nodeErrorMessage({type:V},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return O===g.voidOperation?
null:O},Dictionary:d,Feature:f,dictionary:function(O){for(var V={},pa=0;pa<O.length;pa+=2){if(g.isFunctionParameter(O[pa+1]))throw Error("Illegal Argument");if(!1===g.isString(O[pa]))throw Error("Illegal Argument");V[O[pa].toString()]=O[pa+1]===g.voidOperation?null:O[pa+1]}O=new d(V);O.immutable=!1;return O},strCheck:function(O){if(!1===g.isString(O))throw Error("Illegal Argument");return O},unary:function(O,V){if(g.isBoolean(O)){if("!"===V)return!O;if("-"===V)return-1*g.toNumber(O);if("+"===V)return 1*
g.toNumber(O);if("~"===V)return~g.toNumber(O);throw Error(e.nodeErrorMessage({type:"UnaryExpression",operator:V,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===V)return-1*g.toNumber(O);if("+"===V)return 1*g.toNumber(O);if("~"===V)return~g.toNumber(O);throw Error(e.nodeErrorMessage({type:"UnaryExpression",operator:V,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(O){if(!1===g.isBoolean(O))throw Error(e.nodeErrorMessage({type:"LogicalExpression",
operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return O},logical:function(O,V,pa){if(g.isBoolean(O)&&g.isBoolean(V))switch(pa){case "||":return O||V;case "\x26\x26":return O&&V}throw Error(e.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));},binary:function(O,V,pa){switch(pa){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return g.binaryOperator(g.toNumber(O),g.toNumber(V),pa);case "\x3d\x3d":return g.equalityTest(O,
V);case "\x3d":return g.equalityTest(O,V);case "!\x3d":return!g.equalityTest(O,V);case "\x3c":return g.greaterThanLessThan(O,V,pa);case "\x3e":return g.greaterThanLessThan(O,V,pa);case "\x3c\x3d":return g.greaterThanLessThan(O,V,pa);case "\x3e\x3d":return g.greaterThanLessThan(O,V,pa);case "+":return g.isString(O)||g.isString(V)?g.toString(O)+g.toString(V):g.toNumber(O)+g.toNumber(V);case "-":return g.toNumber(O)-g.toNumber(V);case "*":return g.toNumber(O)*g.toNumber(V);case "/":return g.toNumber(O)/
g.toNumber(V);case "%":return g.toNumber(O)%g.toNumber(V);default:throw Error(e.nodeErrorMessage({type:"BinaryExpression",operator:pa,left:O,right:V},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(O,V,pa){switch(V){case "\x3d":return O===g.voidOperation?null:O;case "/\x3d":return g.toNumber(pa)/g.toNumber(O);case "*\x3d":return g.toNumber(pa)*g.toNumber(O);case "-\x3d":return g.toNumber(pa)-g.toNumber(O);case "+\x3d":return g.isString(pa)||g.isString(O)?g.toString(pa)+g.toString(O):g.toNumber(pa)+
g.toNumber(O);case "%\x3d":return g.toNumber(pa)%g.toNumber(O);default:throw Error(e.nodeErrorMessage({type:"AssignmentExpression",operator:V,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(O,V,pa,za){var Ja=g.toNumber(O[V]);O[V]="++"===pa?Ja+1:Ja-1;return!1===za?Ja:"++"===pa?Ja+1:Ja-1},graphicToFeature:function(O,V){return null===O?null:f.createFromGraphicLikeObject(O.geometry,O.attributes,V)},memberupdate:function(O,V,pa,za){if(g.isArray(O))if(g.isNumber(V)){0>V&&(V=
O.length+V);if(0>V||V>=O.length)throw Error("Assignment outside of array bounds");var Ja=g.toNumber(O[V]);O[V]="++"===pa?Ja+1:Ja-1}else throw Error("Invalid Parameter");else if(O instanceof d){if(!1===g.isString(V))throw Error("Dictionary accessor must be a string");if(!0===O.hasField(V))Ja=g.toNumber(O.field(V)),O.setField(V,"++"===pa?Ja+1:Ja-1);else throw Error("Invalid Parameter");}else if(g.isFeature(O)){if(!1===g.isString(V))throw Error("Feature accessor must be a string");if(!0===O.hasField(V))Ja=
g.toNumber(O.field(V)),O.setField(V,"++"===pa?Ja+1:Ja-1);else throw Error("Invalid Parameter");}else{if(g.isImmutableArray(O))throw Error("Array is Immutable");throw Error("Invalid Parameter");}return!1===za?Ja:"++"===pa?Ja+1:Ja-1},assignmember:function(O,V,pa,za){if(g.isArray(O))if(g.isNumber(V)){0>V&&(V=O.length+V);if(0>V||V>O.length)throw Error("Assignment outside of array bounds");if(V===O.length&&"\x3d"!==pa)throw Error("Invalid Parameter");O[V]=this.assign(za,pa,O[V])}else throw Error("Invalid Parameter");
else if(O instanceof d){if(!1===g.isString(V))throw Error("Dictionary accessor must be a string");if(!0===O.hasField(V))O.setField(V,this.assign(za,pa,O.field(V)));else{if("\x3d"!==pa)throw Error("Invalid Parameter");O.setField(V,this.assign(za,pa,null))}}else if(g.isFeature(O)){if(!1===g.isString(V))throw Error("Feature accessor must be a string");if(!0===O.hasField(V))O.setField(V,this.assign(za,pa,O.field(V)));else{if("\x3d"!==pa)throw Error("Invalid Parameter");O.setField(V,this.assign(za,pa,
null))}}else{if(g.isImmutableArray(O))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(O,V){if(null===O)throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","NOTFOUND"));if(O instanceof d||g.isFeature(O)){if(g.isString(V))return O.field(V);throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(O instanceof v){if(g.isString(V))return ka(O,
V,"MemberExpression");throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(g.isArray(O)){if(g.isNumber(V)&&isFinite(V)&&Math.floor(V)===V){0>V&&(V=O.length+V);if(V>=O.length||0>V)throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return O[V]}throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));
}if(g.isString(O)){if(g.isNumber(V)&&isFinite(V)&&Math.floor(V)===V){0>V&&(V=O.length+V);if(V>=O.length||0>V)throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return O[V]}throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(g.isImmutableArray(O)&&g.isNumber(V)&&isFinite(V)&&Math.floor(V)===V){0>V&&(V=O.length()+V);if(V>=O.length()||0>V)throw Error(e.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return O.get(V)}throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));},callfunc:function(O,V,pa){return O instanceof g.NativeFunction?O.fn(pa,{arguments:V,preparsed:!0}):O instanceof g.SizzleFunction?O.fn.apply(this,V):O.apply(this,V)}};y.compileScript=function(O,V,pa){void 0===V&&(V=null);void 0===pa&&(pa=!1);null===V&&(V={vars:{},customfunctions:{}});V={isAsync:pa,
globalScope:ya(V.vars,pa?aa:N,V.customfunctions),localScope:null,mangleMap:{},console:Oa,lrucache:V.lrucache,interceptor:V.interceptor,services:V.services,symbols:{symbolCounter:0}};O=L(V,O.body[0].body);""===O&&(O="lc.voidOperation; ");V={lc:g,lang:ta,mangles:V.mangleMap,postProcess:function(za){za instanceof g.ReturnResult&&(za=za.value);za instanceof g.ImplicitResult&&(za=za.value);za===g.voidOperation&&(za=null);if(za===g.breakResult)throw Error("Cannot return BREAK");if(za===g.continueResult)throw Error("Cannot return CONTINUE");
if(g.isFunctionParameter(za))throw Error("Cannot return FUNCTION");return za},prepare:function(za,Ja){var Qa=za.spatialReference;if(null===Qa||void 0===Qa)Qa=new G({wkid:102100});var J=za.vars,U=za.customfunctions,ha=Ja?new ea:new ca;J||(J={});U||(U={});var K=new d({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});K.immutable=!1;ha._SymbolsMap={textformatting:1,infinity:1,pi:1};ha.textformatting=K;ha.infinity=Number.POSITIVE_INFINITY;ha.pi=Math.PI;for(var S in U)ha[S]=
U[S],ha._SymbolsMap[S]=1;for(S in J)ha._SymbolsMap[S]=1,ha[S]=J[S]&&"esri.Graphic"===J[S].declaredClass?f.createFromGraphic(J[S]):J[S];return{localStack:[],isAsync:Ja,mangleMap:this.mangles,spatialReference:Qa,globalScope:ha,abortSignal:void 0===za.abortSignal||null===za.abortSignal?{aborted:!1}:za.abortSignal,localScope:null,services:za.services,console:za.console?za.console:Oa,lrucache:za.lrucache,interceptor:za.interceptor,symbols:{symbolCounter:0},depthCounter:1}}};return(new Function("context",
"spatialReference",pa?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+O+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+
O+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(V)};y.enableAsyncSupport=function(){return new Promise(function(O,V){F(["./functions/geomasync"],function(pa){Ca([pa],"async");O(!0)},function(pa){V(pa)})})}})},"esri/arcade/ArcadePortal":function(){define(["require","exports","./polyfill/tsSupport/extends","./Dictionary"],function(F,y,a,u){return function(n){function t(r){var l=n.call(this)||this;l.immutable=!1;l.setField("url",r);l.immutable=!0;return l}a(t,n);return t}(u)})},
"esri/arcade/Attachment":function(){define(["require","exports","./polyfill/tsSupport/extends","./Dictionary"],function(F,y,a,u){return function(n){function t(r,l,d,f,b,c){var g=n.call(this)||this;g.attachmentUrl=b;g.immutable=!1;g.setField("id",r);g.setField("name",l);g.setField("contenttype",d);g.setField("size",f);g.setField("exifinfo",c);g.immutable=!0;return g}a(t,n);return t}(u)})},"esri/arcade/Feature":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/jsonUtils".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c){return function(){function g(){this.arcadeDeclaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=null;this.immutable=this._datesfixed=!0;this._datefields=null;this.immutable=!0}g.createFromGraphic=function(e){var h=new g;h._geometry=e.geometry?e.geometry:null;h.attributes=void 0===e.attributes?{}:null===e.attributes?{}:e.attributes;e._sourceLayer?(h._layer=e._sourceLayer,h._datesfixed=!1):e._layer?(h._layer=e._layer,h._datesfixed=!1):e.layer&&
"fields"in e.layer?(h._layer=e.layer,h._datesfixed=!1):e.sourceLayer&&"fields"in e.sourceLayer&&(h._layer=e.sourceLayer,h._datesfixed=!1);return h};g.createFromArcadeFeature=function(e){var h=new g;h._datesfixed=e._datesfixed;h.attributes=e.attributes;h._geometry=e._geometry;e._layer&&(h._layer=e._layer);return h};g.createFromArcadeDictionary=function(e){var h=new g;h.attributes=e.field("attributes");null!==h.attributes?h.attributes instanceof r?(h.attributes=h.attributes.attributes,null===h.attributes&&
(h.attributes={})):h.attributes={}:h.attributes={};h._geometry=e.field("geometry");null!==h._geometry&&(h._geometry instanceof r?h._geometry=g.parseGeometryFromDictionary(h._geometry):h._geometry instanceof f||(h._geometry=null));return h};g.createFromGraphicLikeObject=function(e,h,k){void 0===k&&(k=null);var m=new g;null===h&&(h={});m.attributes=h;m._geometry=e?e:null;m._layer=k;m._layer&&(m._datesfixed=!1);return m};g.prototype.repurposeFromGraphicLikeObject=function(e,h,k){void 0===k&&(k=null);
null===h&&(h={});this.attributes=h;this._geometry=e?e:null;this._datesfixed=(this._layer=k)?!1:!0};g.prototype.castToText=function(){var e="";!1===this._datesfixed&&this._fixDates();for(var h in this.attributes){""!==e&&(e+=",");var k=this.attributes[h];null==k?e+=JSON.stringify(h)+":null":d.isBoolean(k)||d.isNumber(k)||d.isString(k)?e+=JSON.stringify(h)+":"+JSON.stringify(k):k instanceof f?e+=JSON.stringify(h)+":"+d.toStringExplicit(k):k instanceof l?e+=JSON.stringify(h)+":"+d.toStringExplicit(k):
k instanceof Array?e+=JSON.stringify(h)+":"+d.toStringExplicit(k):k instanceof Date?e+=JSON.stringify(h)+":"+JSON.stringify(k):null!==k&&"object"===typeof k&&void 0!==k.castToText&&(e+=JSON.stringify(h)+":"+k.castToText())}return'{"geometry":'+(null===this.geometry()?"null":d.toStringExplicit(this.geometry()))+',"attributes":{'+e+"}}"};g.prototype._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);else{for(var e=[],h=0;h<this._layer.fields.length;h++){var k=
this._layer.fields[h];"date"!==k.type&&"esriFieldTypeDate"!==k.type||e.push(k.name)}this._datefields=e;0<e.length&&this._fixDateFields(e)}this._datesfixed=!0};g.prototype._fixDateFields=function(e){this.attributes=n({},this.attributes);for(var h=0;h<e.length;h++){var k=this.attributes[e[h]];if(null!==k)if(void 0===k)for(var m in this.attributes){if(m.toLowerCase()===e[h].toLowerCase()){k=this.attributes[m];null===k||k instanceof Date||(this.attributes[m]=new Date(k));break}}else k instanceof Date||
(this.attributes[e[h]]=new Date(k))}};g.prototype.geometry=function(){if(null===this._geometry)return this._geometry;this._geometry instanceof f||(this._geometry=c.fromJson(this._geometry));return this._geometry};g.prototype.field=function(e){!1===this._datesfixed&&this._fixDates();var h=this.attributes[e];if(void 0!==h)return h;h=e.toLowerCase();for(var k in this.attributes)if(k.toLowerCase()===h)return this.attributes[k];if(this._hasFieldDefinition(h))return null;throw Error("Field not Found : "+
e);};g.prototype._hasFieldDefinition=function(e){if(null===this._layer)return!1;for(var h=0;h<this._layer.fields.length;h++)if(this._layer.fields[h].name.toLowerCase()===e)return!0;return!1};g.prototype.setField=function(e,h){if(this.immutable)throw Error("Feature is Immutable");if(!1===d.isSimpleType(h))throw Error("Illegal Value Assignment to Feature");var k=e.toLowerCase();if(void 0===this.attributes[e])for(var m in this.attributes)if(m.toLowerCase()===k){this.attributes[m]=h;return}this.attributes[e]=
h};g.prototype.hasField=function(e){var h=e.toLowerCase();if(void 0!==this.attributes[e])return!0;for(var k in this.attributes)if(k.toLowerCase()===h)return!0;return this._hasFieldDefinition(h)?!0:!1};g.prototype.keys=function(){var e=[],h={},k;for(k in this.attributes)e.push(k),h[k.toLowerCase()]=1;if(null!==this._layer)for(k=0;k<this._layer.fields.length;k++){var m=this._layer.fields[k];1!==h[m.name.toLowerCase()]&&e.push(m.name)}return e=e.sort()};g.parseGeometryFromDictionary=function(e){e=g._convertDictionaryToJson(e,
!0);void 0!==e.hasm&&(e.hasM=e.hasm,delete e.hasm);void 0!==e.hasz&&(e.hasZ=e.hasz,delete e.hasz);void 0!==e.spatialreference&&(e.spatialReference=e.spatialreference,delete e.spatialreference);void 0!==e.rings&&(e.rings=this._fixPathArrays(e.rings,!0===e.hasZ,!0===e.hasZ));void 0!==e.paths&&(e.paths=this._fixPathArrays(e.paths,!0===e.hasZ,!0===e.hasM));void 0!==e.points&&(e.points=this._fixPointArrays(e.points,!0===e.hasZ,!0===e.hasM));return c.fromJson(e)};g._fixPathArrays=function(e,h,k){var m=
[];if(e instanceof Array)for(var w=0;w<e.length;w++)m.push(this._fixPointArrays(e[w],h,k));else if(e instanceof l)for(w=0;w<e.length();w++)m.push(this._fixPointArrays(e.get(w),h,k));return m};g._fixPointArrays=function(e,h,k){var m=[];if(e instanceof Array)for(var w=0;w<e.length;w++){var p=e[w];p instanceof b?h&&k?m.push([p.x,p.y,p.z,p.m]):h?m.push([p.x,p.y,p.z]):k?m.push([p.x,p.y,p.m]):m.push([p.x,p.y]):p instanceof l?m.push(p.toArray()):m.push(p)}else if(e instanceof l)for(w=0;w<e.length();w++)p=
e.get(w),p instanceof b?h&&k?m.push([p.x,p.y,p.z,p.m]):h?m.push([p.x,p.y,p.z]):k?m.push([p.x,p.y,p.m]):m.push([p.x,p.y]):p instanceof l?m.push(p.toArray()):m.push(p);return m};g._convertDictionaryToJson=function(e,h){void 0===h&&(h=!1);var k={},m;for(m in e.attributes){var w=e.attributes[m];w instanceof r&&(w=g._convertDictionaryToJson(w));h?k[m.toLowerCase()]=w:k[m]=w}return k};g.parseAttributesFromDictionary=function(e){var h={},k;for(k in e.attributes){var m=e.attributes[k];if(d.isSimpleType(m))h[k]=
m;else throw Error("Illegal Argument");}return h};g.fromJson=function(e){var h=null;null!==e.geometry&&void 0!==e.geometry&&(h=c.fromJson(e.geometry));var k={};if(null!==e.attributes&&void 0!==e.attributes)for(var m in e.attributes){var w=e.attributes[m];if(null===w)k[m]=w;else if(d.isString(w)||d.isNumber(w)||d.isBoolean(w)||d.isDate(w))k[m]=w;else throw Error("Illegal Argument");}return g.createFromGraphicLikeObject(h,k,null)};g.prototype.fullSchema=function(){return this._layer};g.prototype.gdbVersion=
function(){if(null===this._layer)return"";var e=this._layer.gdbVersion;return void 0===e?"":""===e&&this._layer.capabilities&&this._layer.capabilities.isVersioned?"SDE.DEFAULT":e};g.prototype.castAsJson=function(e){var h={attributes:{},geometry:!0===(null===e||void 0===e?void 0:e.keepGeometryType)?this.geometry():this.geometry().toJson()},k;for(k in this.attributes){var m=this.attributes[k];void 0!==m&&(h.attributes[k]=d.castAsJson(m,e))}return h};g.prototype.castAsJsonAsync=function(e,h){void 0===
e&&(e=null);return a(this,void 0,void 0,function(){return u(this,function(k){return[2,this.castAsJson(h)]})})};return g}()})},"esri/arcade/treeAnalysis":function(){define(["require","exports","./polyfill/tsSupport/awaiter","./polyfill/tsSupport/generator"],function(F,y,a,u){function n(v){return"string"===typeof v||v instanceof String}function t(v,B){return"0"!==v.min&&B.length<Number(v.min)||"*"!==v.max&&B.length>Number(v.max)?-2:1}function r(v,B,D){if(null!==D.localScope&&void 0!==D.localScope[v.toLowerCase()]){var x=
D.localScope[v.toLowerCase()];if("FormulaFunction"===x.type||"any"===x.type)return void 0===x.signature&&(x.signature={min:"0",max:"*"}),t(x.signature,B)}return void 0!==D.globalScope[v.toLowerCase()]&&(x=D.globalScope[v.toLowerCase()],"FormulaFunction"===x.type||"any"===x.type)?(void 0===x.signature&&(x.signature={min:"0",max:"*"}),t(x.signature,B)):-1}function l(v,B){if(v)for(var D=0;D<v.length;D++)d(v[D],B)}function d(v,B){if(v&&!1!==B(v))switch(v.type){case "ArrayExpression":l(v.elements,B);break;
case "AssignmentExpression":case "BinaryExpression":d(v.left,B);d(v.right,B);break;case "BlockStatement":l(v.body,B);break;case "CallExpression":d(v.callee,B);l(v.arguments,B);break;case "ExpressionStatement":d(v.expression,B);break;case "ForInStatement":d(v.left,B);d(v.right,B);d(v.body,B);break;case "ForStatement":d(v.init,B);d(v.test,B);d(v.update,B);d(v.body,B);break;case "FunctionDeclaration":d(v.id,B);l(v.params,B);d(v.body,B);break;case "IfStatement":d(v.test,B);d(v.consequent,B);d(v.alternate,
B);break;case "LogicalExpression":d(v.left,B);d(v.right,B);break;case "MemberExpression":d(v.object,B);d(v.property,B);break;case "ObjectExpression":l(v.properties,B);break;case "Program":l(v.body,B);break;case "Property":d(v.key,B);d(v.value,B);break;case "ReturnStatement":d(v.argument,B);break;case "UnaryExpression":d(v.argument,B);break;case "UpdateExpression":d(v.argument,B);break;case "VariableDeclaration":l(v.declarations,B);break;case "VariableDeclarator":d(v.id,B);d(v.init,B);break;case "TemplateLiteral":l(v.expressions,
B),l(v.quasis,B)}}function f(v,B){void 0===B&&(B=!0);var D=k(v,"SYNTAX","UNREOGNISED");try{switch(v.type){case "VariableDeclarator":return"Identifier"!==v.id.type?k(v,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==v.init?f(v.init,!1):"";case "VariableDeclaration":for(var x=0;x<v.declarations.length;x++)if(D=f(v.declarations[x],B),""!==D)return D;return"";case "ForInStatement":D=f(v.left,B);if(""!==D)break;if("VariableDeclaration"===v.left.type){if(1<v.left.declarations.length)return k(v,"SYNTAX","ONLY1VAR");
if(null!==v.left.declarations[0].init)return k(v,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==v.left.type)return k(v,"SYNTAX","LEFTNOTVAR");D=f(v.right,B);if(""!==D)break;D=f(v.body,B);if(""!==D)break;return"";case "ForStatement":if(null!==v.test&&(D=f(v.test,B),""!==D))break;if(null!==v.init&&(D=f(v.init,B),""!==D))break;if(null!==v.update&&(D=f(v.update,B),""!==D))break;if(null!==v.body&&(D=f(v.body,B),""!==D))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";
case "BreakStatement":return"";case "IfStatement":D=f(v.test,B);if(""!==D)break;if(null!==v.consequent&&(D=f(v.consequent,!1),""!==D))break;if(null!==v.alternate&&(D=f(v.alternate,!1),""!==D))break;return"";case "BlockStatement":var E=[];for(x=0;x<v.body.length;x++)"EmptyStatement"!==v.body[x].type&&E.push(v.body[x]);v.body=E;for(x=0;x<v.body.length;x++)if(D=f(v.body[x],B),""!==D)return D;return"";case "FunctionDeclaration":return!1===B?k(v,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==v.id.type?
k(v,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):f(v.body,!1);case "ReturnStatement":return null!==v.argument?f(v.argument,B):"";case "UpdateExpression":return"Identifier"!==v.argument.type&&"MemberExpression"!==v.argument.type?k(v,"SYNTAX","ASSIGNMENTTOVARSONLY"):f(v.argument,B);case "AssignmentExpression":if("Identifier"!==v.left.type&&"MemberExpression"!==v.left.type)return k(v,"SYNTAX","ASSIGNMENTTOVARSONLY");D=f(v.left,B);if(""!==D)break;switch(v.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;
default:return k(v,"SYNTAX","OPERATORNOTRECOGNISED")}return f(v.right,!1);case "ExpressionStatement":return f(v.expression,!1);case "Identifier":D="";break;case "MemberExpression":D=f(v.object,B);if(""!==D)break;return!0===v.computed?f(v.property,B):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==v.callee.type)return k(v,"SYNTAX","ONLYNODESSUPPORTED");D="";for(x=0;x<v.arguments.length;x++)if(D=f(v.arguments[x],B),""!==D)return D;return"";case "UnaryExpression":D=
f(v.argument,B);break;case "BinaryExpression":D=f(v.left,B);if(""!==D)break;D=f(v.right,B);if(""!==D)break;switch(v.operator){case "|":case "\x26":case "\x3e\x3e":case "\x3c\x3c":case "\x3e\x3e\x3e":case "^":case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:return k(v,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":D=f(v.left,B);if(""!==D)break;D=f(v.right);if(""!==D)break;switch(v.operator){case "\x26\x26":case "||":break;
default:return k(v,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ArrayExpression":D="";for(x=0;x<v.elements.length&&(D=f(v.elements[x],B),""===D);x++);break;case "TemplateLiteral":D="";for(x=0;x<v.quasis.length;x++)if(D=f(v.quasis[x],B),""!==D)return D;for(x=0;x<v.expressions.length&&(D=f(v.expressions[x],B),""===D);x++);break;case "ObjectExpression":D="";for(x=0;x<v.properties.length;x++){D="";if(null!==v.properties[x].key&&("Literal"!==v.properties[x].key.type&&"Identifier"!==v.properties[x].key.type&&
(D=k(v,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===v.properties[x].key.type)){E=v.properties[x].key;var G="value"in E?E.value:null;"string"===typeof G||G instanceof String||(D=k(v,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===D&&(D=f(v.properties[x],B));if(""!==D)break}break;case "Property":if("Literal"!==v.key.type&&"Identifier"!==v.key.type)return k(v,"SYNTAX","ONLYLITERAL");if("Identifier"!==v.key.type&&(D=f(v.key,B),""!==D))break;D=f(v.value,B)}return D}catch(I){throw I;}}function b(v,
B){var D=k(v,"SYNTAX","UNREOGNISED"),x=null,E="";try{switch(v.type){case "VariableDeclarator":var G=null===v.init?"":b(v.init,B);if(""!==G)return G;"Identifier"===v.id.type&&(null===B.localScope?B.globalScope[v.id.name.toLowerCase()]={type:"any"}:B.localScope[v.id.name.toLowerCase()]={type:"any"});return"";case "FunctionDeclaration":x=g(v.id.name.toLowerCase(),v);E=e(v,B);if(""!==E)return E;if(null!==B.localScope)return k(v,"SYNTAX","GLOBALFUNCTIONSONLY");x.isnative=!1;B.globalScope[v.id.name.toLowerCase()]=
{type:"FormulaFunction",signature:[x]};return"";case "VariableDeclaration":D="";for(var I=0;I<v.declarations.length&&(D=b(v.declarations[I],B),""===D);I++);break;case "IfStatement":D=b(v.test,B);if(""!==D)break;if("AssignmentExpression"===v.test.type||"UpdateExpression"===v.test.type)return k(v.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==v.consequent&&(D=b(v.consequent,B),""!==D))break;if(null!==v.alternate&&(D=b(v.alternate,B),""!==D))break;return"";case "EmptyStatement":return"";
case "BlockStatement":for(I=0;I<v.body.length;I++)if(D=b(v.body[I],B),""!==D)return D;return"";case "ReturnStatement":return null!==v.argument?b(v.argument,B):"";case "ForInStatement":if("VariableDeclaration"===v.left.type){if(1<v.left.declarations.length)return k(v,"SYNTAX","ONLY1VAR");if(null!==v.left.declarations[0].init)return k(v,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==v.left.type)return k(v,"SYNTAX","LEFTNOTVAR");D=b(v.left,B);if(""!==D)break;D=b(v.right,B);if(""!==D)break;D=b(v.body,
B);if(""!==D)break;return"";case "ForStatement":if(null!==v.init&&(D=b(v.init,B),""!==D))break;if(null!==v.test&&(D=b(v.test,B),""!==D))break;if(null!==v.body&&(D=b(v.body,B),""!==D))break;if(null!==v.update&&(D=b(v.update,B),""!==D))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==v.argument.type&&"MemberExpression"!==v.argument.type)return k(v,"SYNTAX","ASSIGNMENTTOVARSONLY");var L=!1;if("MemberExpression"===v.argument.type)return b(v.argument,
B);null!==B.localScope&&void 0!==B.localScope[v.argument.name.toLowerCase()]&&(L=!0);void 0!==B.globalScope[v.argument.name.toLowerCase()]&&(L=!0);return!1===L?"Identifier "+v.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==v.left.type&&"MemberExpression"!==v.left.type)return k(v,"SYNTAX","ASSIGNMENTTOVARSONLY");var Y=b(v.right,B);if(""!==Y)return Y;L=!1;if("MemberExpression"===v.left.type)return Y=b(v.left,B),""!==Y?Y:"";null!==B.localScope&&void 0!==B.localScope[v.left.name.toLowerCase()]&&
(L=!0);void 0!==B.globalScope[v.left.name.toLowerCase()]&&(L=!0);return!1===L?"Identifier "+v.left.name+" has not been declared.":"";case "ExpressionStatement":return b(v.expression,B);case "Identifier":var X=v.name.toLowerCase();if(null!==B.localScope&&void 0!==B.localScope[X])return"";D=void 0!==B.globalScope[X]?"":k(v,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":D=b(v.object,B);if(""!==D)break;return!0===v.computed?b(v.property,B):"";case "Literal":return"";case "TemplateElement":return"";
case "CallExpression":if("Identifier"!==v.callee.type)return k(v,"SYNTAX","ONLYNODESSUPPORTED");D="";for(I=0;I<v.arguments.length;I++)if(D=b(v.arguments[I],B),""!==D)return D;var fa=r(v.callee.name,v.arguments,B);-1===fa&&(D=k(v,"SYNTAX","NOTFOUND"));-2===fa&&(D=k(v,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":D=b(v.argument,B);break;case "BinaryExpression":D=b(v.left,B);if(""!==D)break;D=b(v.right,B);if(""!==D)break;return"";case "LogicalExpression":D=b(v.left,B);if(""!==D)break;if("AssignmentExpression"===
v.left.type||"UpdateExpression"===v.left.type)return k(v.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");D=b(v.right,B);if(""!==D)break;return"AssignmentExpression"===v.right.type||"UpdateExpression"===v.right.type?k(v.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ArrayExpression":D="";for(I=0;I<v.elements.length&&(D=b(v.elements[I],B),""===D);I++);break;case "TemplateLiteral":D="";for(I=0;I<v.quasis.length;I++)if(D=b(v.quasis[I],B),""!==D)return D;for(I=0;I<v.expressions.length&&
(D=b(v.expressions[I],B),""===D);I++);break;case "ObjectExpression":D="";for(I=0;I<v.properties.length;I++){D="";if(null!==v.properties[I].key&&("Literal"!==v.properties[I].key.type&&"Identifier"!==v.properties[I].key.type&&(D=k(v,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===v.properties[I].key.type)){var sa=v.properties[I].key,T="value"in sa?sa.value:null;"string"===typeof T||T instanceof String||(D=k(v,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===D&&(D=b(v.properties[I],B));if(""!==D)break}break;
case "Property":if("Literal"!==v.key.type&&"Identifier"!==v.key.type)return k(v,"SYNTAX","ONLYLITERAL");if("Identifier"!==v.key.type&&(D=b(v.key,B),""!==D))break;D=b(v.value,B)}return D}catch(ka){throw ka;}}function c(v,B){var D=!1,x=B.toLowerCase();d(v,function(E){if(D)return!1;"Identifier"===E.type&&E.name&&E.name.toLowerCase()===x&&(D=!0);return!0});return D}function g(v,B){var D=[];if(void 0!==B.params&&null!==B.params)for(var x=0;x<B.params.length;x++)D.push("any");return{name:v,return:"any",
params:D}}function e(v,B){B={globalScope:B.globalScope,localScope:{}};for(var D=0;D<v.params.length;D++)B.localScope[v.params[D].name.toLowerCase()]={type:"any"};return b(v.body,B)}function h(v,B,D,x){var E={};if(void 0===v||null===v)v={};if(void 0===D||null===D)D={};E.infinity={type:"any"};E.textformatting={type:"any"};E.pi={type:"any"};for(var G in B)"sync"===x&&void 0!==B[G].min?E[G]={type:"FormulaFunction",signature:{min:B[G].min,max:B[G].max}}:"sync"!==x&&void 0!==B[G].fmin&&(E[G]={type:"FormulaFunction",
signature:{min:B[G].fmin,max:B[G].fmax}});for(B=0;B<D.length;B++)G=D[B],E[G.name]={type:"FormulaFunction",signature:G};for(G in v)E[G]=v[G],E[G].type="any";return E}function k(v,B,D){var x="";switch(B){case "SYNTAX":x="Syntax Error: ";break;case "RUNTIME":x="Runtime Error: ";break;default:x="Syntax Error: "}try{switch(v.type){case "IfStatement":switch(D){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":x+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":x+=" Non Boolean used as Condition"}break;
case "UpdateExpression":case "AssignmentExpression":switch(D){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":x+=" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":x+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":x+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(D){case "GLOBALFUNCTIONSONLY":x+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":x+=" Function Definition must have an identifier"}break;
case "VariableDeclaration":x+=" Only 1 variable can be declared at a time";break;case "VariableDeclarator":switch(D){case "FUNCTIONVARIABLEDECLARATOR":x+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":x+=" Variable Definition must have an identifier"}break;case "Identifier":x+=" Identifier Not Found. ";x+=v.name;break;case "ObjectExpression":switch(D){case "OBJECTPROPERTYMUSTBESTRING":x+=" Property name must be a string"}break;case "ForStatement":switch(D){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":x+=
" Non Boolean used as Condition"}break;case "ForInStatement":switch(D){case "ONLY1VAR":x+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":x+=" Can only declare value for use with IN";break;case "LEFTNOVAR":x+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":x+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":x+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(D){case "PROPERTYNOTFOUND":x+=
"Cannot find member property. ";x+=!1===v.computed?"Identifier"===v.property.type?v.property.name:"":"";break;case "OUTOFBOUNDS":x+="Out of Bounds. ";x+=!1===v.computed?"Identifier"===v.property.type?v.property.name:"":"";break;case "NOTFOUND":x+="Cannot call member method on null. ";x+=!1===v.computed?"Identifier"===v.property.type?v.property.name:"":"";break;case "INVALIDTYPE":x+="Cannot call member property on object of this type. ",x+=!1===v.computed?"Identifier"===v.property.type?v.property.name:
"":""}break;case "Property":switch(D){case "ONLYLITERAL":x+="Property names must be literals or identifiers"}break;case "Literal":break;case "CallExpression":switch(D){case "WRONGSIGNATURE":x+="Function signature does not match: ";x+="Identifier"===v.callee.type?v.callee.name:"";break;case "ONLYNODESUPPORTED":x+="Functions must be declared.";x+="Identifier"===v.callee.type?v.callee.name:"";break;case "NOTAFUNCTION":x+="Not a Function: ";x+="Identifier"===v.callee.type?v.callee.name:"";break;case "NOTFOUND":x+=
"Function Not Found: "+("Identifier"===v.callee.type?v.callee.name:"")}break;case "UnaryExpression":switch(D){case "NOTSUPPORTEDUNARYOPERATOR":x+="Operator "+v.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":x+="Unary operator "+v.operator+" cannot be used with this argument."}case "BinaryExpression":switch(D){case "OPERATORNOTRECOGNISED":x+="Binary Operator not recognised "+v.operator}break;case "LogicalExpression":switch(D){case "ONLYBOOLEAN":x+=
"Operator "+v.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":x+="Logical Expression "+v.operator+" being applied to parameters that are not boolean."}break;case "ArrayExpression":switch(D){case "FUNCTIONCONTEXTILLEGAL":x+=" Cannot Put Function inside Array."}break;default:x+="Expression contains unrecognised code structures."}}catch(E){throw E;}return x}function m(v,B,D){return{line:v.loc.start.line,character:v.loc.start.column,reason:k(v,B,D)}}function w(v,
B,D,x){B={globalScope:B.globalScope,localScope:{}};for(var E=0;E<v.params.length;E++)B.localScope[v.params[E].name.toLowerCase()]={type:"any"};p(v.body,B,D,x,!1)}function p(v,B,D,x,E){void 0===E&&(E=!0);if(null===v)throw Error("Unnexpexted Expression Syntax");var G=null;try{switch(v.type){case "VariableDeclarator":"Identifier"!==v.id.type?x.push(m(v,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(v.id.name.toLowerCase(),null===B.localScope?B.globalScope[v.id.name.toLowerCase()]={type:"any"}:B.localScope[v.id.name.toLowerCase()]=
{type:"any"});null!==v.init&&p(v.init,B,D,x,E);break;case "FunctionDeclaration":!1===E&&x.push(m(v,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==v.id.type&&x.push(m(v,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));G=g("",v);w(v,B,D,x);null!==B.localScope&&x.push(m(v,"SYNTAX","GLOBALFUNCTIONSONLY"));G.isnative=!1;"Identifier"===v.id.type&&(B.globalScope[v.id.name.toLowerCase()]={type:"FormulaFunction",signature:[G]});break;case "VariableDeclaration":for(var I=0;I<v.declarations.length;I++)p(v.declarations[I],
B,D,x,E);break;case "IfStatement":null!==v.test&&(p(v.test,B,D,x,E),"AssignmentExpression"!==v.test.type&&"UpdateExpression"!==v.test.type||x.push(m(v.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==v.consequent&&p(v.consequent,B,D,x,E);null!==v.alternate&&p(v.alternate,B,D,x,E);break;case "EmptyStatement":break;case "BlockStatement":if(null!==v.body)for(I=0;I<v.body.length;I++)p(v.body[I],B,D,x,E);break;case "ReturnStatement":null!==v.argument&&p(v.argument,B,D,x,E);break;case "ForInStatement":"VariableDeclaration"===
v.left.type?(1<v.left.declarations.length&&x.push(m(v,"SYNTAX","ONLY1VAR")),null!==v.left.declarations[0].init&&x.push(m(v,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==v.left.type&&x.push(m(v,"SYNTAX","LEFTNOTVAR"));p(v.left,B,D,x,E);p(v.right,B,D,x,E);p(v.body,B,D,x,E);break;case "ForStatement":null!==v.init&&p(v.init,B,D,x,E);null!==v.test&&p(v.test,B,D,x,E);null!==v.body&&p(v.body,B,D,x,E);null!==v.update&&p(v.update,B,D,x,E);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":if("Identifier"!==
v.argument.type&&"MemberExpression"!==v.argument.type)x.push(m(v,"SYNTAX","ASSIGNMENTTOVARSONLY"));else{if("Identifier"===v.argument.type){var L=!1;!1===D&&(null!==B.localScope&&void 0!==B.localScope[v.argument.name.toLowerCase()]&&(L=!0),void 0!==B.globalScope[v.argument.name.toLowerCase()]&&(L=!0),!1===L&&x.push({line:null===v?0:v.loc.start.line,character:null===v?0:v.loc.start.column,reason:"Identifier "+v.argument.name+" has not been declared."}))}"MemberExpression"===v.argument.type&&p(v.argument,
B,D,x,E)}break;case "AssignmentExpression":"Identifier"!==v.left.type&&"MemberExpression"!==v.left.type&&x.push(m(v,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(v.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:x.push(m(v,"SYNTAX","OPERATORNOTRECOGNISED"))}p(v.right,B,D,x,E);L=!1;"Identifier"===v.left.type&&(null!==B.localScope&&void 0!==B.localScope[v.left.name.toLowerCase()]&&(L=!0),void 0!==B.globalScope[v.left.name.toLowerCase()]&&(L=!0),!1===D&&
!1===L&&x.push({line:null===v?0:v.loc.start.line,character:null===v?0:v.loc.start.column,reason:"Identifier "+v.left.name+" has not been declared."}));"MemberExpression"===v.left.type&&p(v.left,B,D,x,E);break;case "ExpressionStatement":p(v.expression,B,D,x,E);break;case "Identifier":var Y=v.name.toLowerCase();if(null!==B.localScope&&void 0!==B.localScope[Y]||void 0!==B.globalScope[Y])break;!1===D&&x.push(m(v,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":p(v.object,B,D,x,E);!0===v.computed&&
p(v.property,B,D,x,E);break;case "Literal":break;case "TemplateElement":break;case "CallExpression":"Identifier"!==v.callee.type&&x.push(m(v,"SYNTAX","ONLYNODESSUPPORTED"));for(I=0;I<v.arguments.length;I++)p(v.arguments[I],B,D,x,E);if("Identifier"===v.callee.type){var X=r(v.callee.name,v.arguments,B);!1===D&&-1===X&&x.push(m(v,"SYNTAX","NOTFOUND"));-2===X&&x.push(m(v,"SYNTAX","WRONGSIGNATURE"))}break;case "UnaryExpression":p(v.argument,B,D,x,E);break;case "BinaryExpression":p(v.left,B,D,x,E);p(v.right,
B,D,x,E);switch(v.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":case "\x26":case "|":case "^":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":break;default:x.push(m(v,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(v.operator){case "\x26\x26":case "||":break;default:x.push(m(v,"SYNTAX","OPERATORNOTRECOGNISED"))}p(v.left,B,D,x,E);"AssignmentExpression"!==v.left.type&&"UpdateExpression"!==
v.left.type||x.push(m(v,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));p(v.right,B,D,x,E);"AssignmentExpression"!==v.right.type&&"UpdateExpression"!==v.right.type||x.push(m(v,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ArrayExpression":for(I=0;I<v.elements.length;I++)p(v.elements[I],B,D,x,E);break;case "TemplateLiteral":for(I=0;I<v.quasis.length;I++)p(v.quasis[I],B,D,x,E);for(I=0;I<v.expressions.length;I++)p(v.expressions[I],B,D,x,E);break;case "ObjectExpression":for(I=0;I<v.properties.length;I++)p(v.properties[I],
B,D,x,E);break;case "Property":"Literal"!==v.key.type&&"Identifier"!==v.key.type&&x.push(m(v,"SYNTAX","ONLYLITERAL"));"Literal"===v.key.type&&p(v.key,B,D,x,E);p(v.value,B,D,x,E);break;default:x.push(m(v,"SYNTAX","UNRECOGNISED"))}}catch(fa){x.push({line:null===v?0:v.loc.start.line,character:null===v?0:v.loc.start.column,reason:"Unnexpected Syntax"})}}function A(v){var B=[];d(v,function(D){"CallExpression"===D.type&&"Identifier"===D.callee.type&&B.push(D.callee.name.toLowerCase());return!0});return B}
Object.defineProperty(y,"__esModule",{value:!0});y.scriptUsesFeatureSet=y.findScriptDependencies=y.findFunctionCalls=y.checkScript=y.extractAllIssues=y.extractAllIssuesInFunction=y.makeError=y.nodeErrorMessage=y.validateLanguage=y.validateScript=y.constructGlobalScope=y.validateFunction=y.extractFunctionDeclaration=y.findExpectedFieldLiterals=y.findFieldLiterals=y.referencesFunction=y.referencesMember=y.testValidityOfExpression=y.validateLanguageNode=y.walk=y.findFunction=y.checkFunctionSignature=
y.addFunctionDeclaration=y.functionDecls=void 0;y.functionDecls={all:{min:"2",max:"2"},none:{min:"2",max:"2"},any:{min:"2",max:"2"},reduce:{min:"2",max:"3"},map:{min:"2",max:"2"},filter:{min:"2",max:"2"},fromcodepoint:{min:"1",max:"*"},fromcharcode:{min:"1",max:"*"},tocodepoint:{min:"1",max:"2"},tocharcode:{min:"1",max:"2"},concatenate:{min:"0",max:"*"},expects:{min:"1",max:"*"},getfeatureset:{min:"1",max:"2"},week:{min:"1",max:"2"},fromjson:{min:"1",max:"1"},length3d:{min:"1",max:"2"},tohex:{min:"1",
max:"1"},hash:{min:"1",max:"1"},isoweek:{min:"1",max:"1"},isoweekday:{min:"1",max:"1"},isomonth:{min:"1",max:"1"},isoyear:{min:"1",max:"1"},resize:{min:"2",max:"3"},slice:{min:"0",max:"*"},splice:{min:"0",max:"*"},push:{min:"2",max:"2"},pop:{min:"1",max:"1"},includes:{min:"2",max:"2"},array:{min:"1",max:"2"},front:{min:"1",max:"1"},back:{min:"1",max:"1"},insert:{min:"3",max:"3"},erase:{min:"2",max:"2"},split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},
bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",
max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},
count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",
max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},boolean:{min:"1",max:"1"},dictionary:{min:"0",max:"*"},typeof:{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",
max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distancegeodetic:{min:"2",max:"3"},
distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},isselfintersecting:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"},portal:{min:"1",max:"1"},getuser:{min:"1",max:"2"},subtypes:{min:"1",max:"1"},subtypecode:{min:"1",
max:"1"},subtypename:{min:"1",max:"1"},domain:{min:"2",max:"3"},convertdirection:{min:"3",max:"3"},schema:{min:"1",max:"1"}};for(var C in y.functionDecls)y.functionDecls[C].fmin=y.functionDecls[C].min,y.functionDecls[C].fmax=y.functionDecls[C].max;var z="featureset getuser featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl getfeatureset attachments featuresetbyportalitem".split(" "),q="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length length3d lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");
y.addFunctionDeclaration=function(v,B){var D=y.functionDecls[v.name.toLowerCase()];void 0===D?"sync"===B?y.functionDecls[v.name.toLowerCase()]={min:v.min,max:v.max}:y.functionDecls[v.name.toLowerCase()]={fmin:v.min,fmax:v.max}:"sync"===B?(D.min=v.min,D.max=v.max):(D.fmin=v.min,D.fmax=v.max)};y.checkFunctionSignature=t;y.findFunction=r;y.walk=d;y.validateLanguageNode=f;y.testValidityOfExpression=b;y.referencesMember=c;y.referencesFunction=function(v,B){var D=!1,x=B.toLowerCase();d(v,function(E){return D?
!1:"CallExpression"===E.type&&"Identifier"===E.callee.type&&E.callee.name&&E.callee.name.toLowerCase()===x?(D=!0,!1):!0});return D};y.findFieldLiterals=function(v){var B=[];d(v,function(D){if("MemberExpression"!==D.type||"Identifier"!==D.object.type)return!0;!1===D.computed&&D.object&&D.object.name&&D.property&&"Identifier"===D.property.type&&D.property.name?B.push(D.object.name.toLowerCase()+"."+D.property.name.toLowerCase()):D.object&&D.object.name&&D.property&&"Literal"===D.property.type&&"string"===
typeof D.property.value&&B.push(D.object.name.toLowerCase()+"."+D.property.value.toString().toLowerCase());return!1});return B};y.findExpectedFieldLiterals=function(v){var B=[];d(v,function(D){if("CallExpression"===D.type){if("Identifier"===D.callee.type&&"expects"===D.callee.name.toLowerCase()){for(var x="",E=0;E<(D.arguments||[]).length;E++)0===E?"Identifier"===D.arguments[E].type&&(x=D.arguments[E].name.toLowerCase()):x&&"Literal"===D.arguments[E].type&&n(D.arguments[E].value)&&B.push(x+"."+D.arguments[E].value.toLowerCase());
return!1}if("Identifier"===D.callee.type&&["domainname","domaincode","domain","haskey"].includes(D.callee.name.toLowerCase())&&2<=D.arguments.length)return x="","Identifier"===D.arguments[0].type&&(x=D.arguments[0].name.toLowerCase()),x&&"Literal"===D.arguments[1].type&&n(D.arguments[1].value)&&B.push(x+"."+D.arguments[1].value.toLowerCase()),!1}if("MemberExpression"!==D.type||"Identifier"!==D.object.type)return!0;!1===D.computed&&D.object&&D.object.name&&D.property&&"Identifier"===D.property.type&&
D.property.name?B.push(D.object.name.toLowerCase()+"."+D.property.name.toLowerCase()):D.object&&D.object.name&&D.property&&"Literal"===D.property.type&&"string"===typeof D.property.value&&B.push(D.object.name.toLowerCase()+"."+D.property.value.toString().toLowerCase());return!1});return B};y.extractFunctionDeclaration=g;y.validateFunction=e;y.constructGlobalScope=h;y.validateScript=function(v,B,D,x){void 0===D&&(D="async");void 0===x&&(x=y.functionDecls);B={globalScope:h(B.vars,x,B.customFunctions,
D),localScope:null};return b(v.body[0].body,B)};y.validateLanguage=function(v){return"BlockStatement"!==v.body[0].body.type?"Invalid formula content.":f(v.body[0].body)};y.nodeErrorMessage=k;y.makeError=m;y.extractAllIssuesInFunction=w;y.extractAllIssues=p;y.checkScript=function(v,B,D,x,E){void 0===x&&(x="async");void 0===E&&(E=y.functionDecls);var G=[];if("BlockStatement"!==v.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===B||void 0===B)B={vars:{},customFunctions:[]};
B={globalScope:h(B.vars,E,B.customFunctions,x),localScope:null};try{p(v.body[0].body,B,D,G)}catch(I){}return G};y.findFunctionCalls=A;y.findScriptDependencies=function(v,B){void 0===B&&(B=[]);var D=null;if(void 0===v.usesFeatureSet){null===D&&(D=A(v));v.usesFeatureSet=!1;for(var x=0;x<D.length;x++)z.includes(D[x])&&(v.usesFeatureSet=!0,v.isAsync=!0);if(!1===v.usesFeatureSet&&B&&0<B.length)for(x=0;x<B.length;x++)if(c(v,B[x])){v.usesFeatureSet=!0;v.isAsync=!0;break}}if(void 0===v.usesGeometry)for(v.usesGeometry=
!1,null===D&&(D=A(v)),x=0;x<D.length;x++)q.includes(D[x])&&(v.usesGeometry=!0)};y.scriptUsesFeatureSet=function(v){v=A(v);for(var B=0;B<v.length;B++)if(z.includes(v[B]))return!0;return!1}})},"esri/arcade/functions/array":function(){define("require exports ../polyfill/tsSupport/awaiter ../polyfill/tsSupport/generator ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../FunctionWrapper ../ImmutableArray ../languageUtils ../polyfill/promiseUtils".split(" "),function(F,y,a,u,n,t,r,l,d,f){Object.defineProperty(y,
"__esModule",{value:!0});y.registerFunctions=void 0;y.registerFunctions=function(b){function c(e,h){if(h instanceof r)return b.arcadeCustomFunctionHandler(h);if(h instanceof d.NativeFunction)return function(){for(var k=[],m=0;m<arguments.length;m++)k[m]=arguments[m];return h.fn(e,{preparsed:!0,arguments:k})};if(h instanceof d.SizzleFunction)return function(){for(var k=[],m=0;m<arguments.length;m++)k[m]=arguments[m];if(k.length!==h.paramCount)throw Error("Invalid parameters");return h.fn.apply(h,k)};
throw Error("Invalid Parameter");}function g(e){if(e instanceof l)return e.toArray();if(d.isArray(e))return e;throw Error("Invalid Parameter");}b.functions.array=function(e,h){return b.standardFunction(e,h,function(k,m,w){d.pcCheck(w,1,2);k=d.toNumber(w[0]);if(isNaN(k)||!1===d.isInteger(k))throw Error("Invalid Parameter");w=d.defaultUndefined(w[1],null);k=Array(k);k.fill(w);return k})};b.functions.front=function(e,h){return b.standardFunction(e,h,function(k,m,w){d.pcCheck(w,1,1);if(d.isImmutableArray(w[0])){if(0>=
w[0].length())throw Error("Array is empty");return w[0].get(0)}if(d.isArray(w[0])){if(0>=w[0].length)throw Error("Array is empty");return w[0][0]}throw Error("Invalid Parameter");})};b.functions.back=function(e,h){return b.standardFunction(e,h,function(k,m,w){d.pcCheck(w,1,1);if(d.isImmutableArray(w[0])){if(0>=w[0].length())throw Error("Array is empty");return w[0].get(w[0].length()-1)}if(d.isArray(w[0])){if(0>=w[0].length)throw Error("Array is empty");return w[0][w[0].length-1]}throw Error("Invalid Parameter");
})};b.functions.push=function(e,h){return b.standardFunction(e,h,function(k,m,w){d.pcCheck(w,1,2);if(d.isArray(w[0]))return w[0][w[0].length]=w[1],w[0].length;throw Error("Invalid Parameter");})};b.functions.pop=function(e,h){return b.standardFunction(e,h,function(k,m,w){d.pcCheck(w,1,1);if(d.isArray(w[0])){if(0>=w[0].length)throw Error("Array is empty");k=w[0][w[0].length-1];--w[0].length;return k}throw Error("Invalid Parameter");})};b.functions.erase=function(e,h){return b.standardFunction(e,h,
function(k,m,w){d.pcCheck(w,2,2);if(d.isArray(w[0])){k=d.toNumber(w[1]);if(isNaN(k)||!1===d.isInteger(k))throw Error("Invalid Parameter");w=w[0];if(0>=w.length)throw Error("Array is empty");0>k&&(k=w.length+k);if(0>k)throw Error("Element not found");if(k>=w.length)throw Error("Index is greater than array");w.splice(k,1);return d.voidOperation}throw Error("Invalid Parameter");})};b.functions.insert=function(e,h){return b.standardFunction(e,h,function(k,m,w){d.pcCheck(w,3,3);if(d.isArray(w[0])){k=d.toNumber(w[1]);
if(isNaN(k)||!1===d.isInteger(k))throw Error("Invalid Parameter");m=w[2];w=w[0];if(k>w.length)throw Error("Index is greater than array");if(0>k&&k<-1*w.length)throw Error("Index is greater than array");if(k===w.length)return w[k]=m,d.voidOperation;w.splice(k,0,m);return d.voidOperation}throw Error("Invalid Parameter");})};b.functions.resize=function(e,h){return b.standardFunction(e,h,function(k,m,w){d.pcCheck(w,2,3);if(d.isArray(w[0])){m=d.toNumber(w[1]);if(isNaN(m)||!1===d.isInteger(m))throw Error("Invalid Parameter");
if(0>m)throw Error("Size cannot be negative");k=d.defaultUndefined(w[2],null);w=w[0];if(w.length>=m)return w.length=m,d.voidOperation;var p=w.length;w.length=m;for(m=p;m<w.length;m++)w[m]=k;return d.voidOperation}throw Error("Invalid Parameter");})};b.functions.includes=function(e,h){return b.standardFunction(e,h,function(k,m,w){d.pcCheck(w,2,2);if(d.isArray(w[0])){var p=w[1];k=w[0];return-1<k.findIndex(function(C){return d.equalityTest(C,p)})?!0:!1}if(d.isImmutableArray(w[0])){var A=w[1];k=w[0].toArray();
return-1<k.findIndex(function(C){return d.equalityTest(C,A)})?!0:!1}throw Error("Invalid Parameter");})};b.functions.slice=function(e,h){return b.standardFunction(e,h,function(k,m,w){d.pcCheck(w,1,3);if(d.isArray(w[0])){k=d.toNumber(d.defaultUndefined(w[1],0));m=d.toNumber(d.defaultUndefined(w[2],w[0].length));if(isNaN(k)||!1===d.isInteger(k))throw Error("Invalid Parameter");if(isNaN(m)||!1===d.isInteger(m))throw Error("Invalid Parameter");var p=w[0];return p.slice(k,m)}if(d.isImmutableArray(w[0])){p=
w[0];k=d.toNumber(d.defaultUndefined(w[1],0));m=d.toNumber(d.defaultUndefined(w[2],p.length()));if(isNaN(k)||!1===d.isInteger(k))throw Error("Invalid Parameter");if(isNaN(m)||!1===d.isInteger(m))throw Error("Invalid Parameter");return p.toArray().slice(k,m)}throw Error("Invalid Parameter");})};b.functions.splice=function(e,h){return b.standardFunction(e,h,function(k,m,w){k=[];for(m=0;m<w.length;m++)d.isArray(w[m])?k.push.apply(k,w[m]):d.isImmutableArray(w[m])?k.push.apply(k,w[m].toArray()):k.push(w[m]);
return k})};"sync"===b.mode&&(b.functions.any=function(e,h){return b.standardFunction(e,h,function(k,m,w){d.pcCheck(w,2,2);k=c(e,w[1]);m=0;for(w=g(w[0]);m<w.length;m++){var p=k(w[m]);if(d.isBoolean(p)&&!0===p)return!0}return!1})},b.functions.all=function(e,h){return b.standardFunction(e,h,function(k,m,w){d.pcCheck(w,2,2);k=c(e,w[1]);m=0;for(w=g(w[0]);m<w.length;m++)if(!0!==k(w[m]))return!1;return!0})},b.functions.none=function(e,h){return b.standardFunction(e,h,function(k,m,w){d.pcCheck(w,2,2);k=
c(e,w[1]);m=0;for(w=g(w[0]);m<w.length;m++)if(!0===k(w[m]))return!1;return!0})},b.functions.reduce=function(e,h){return b.standardFunction(e,h,function(k,m,w){d.pcCheck(w,2,3);var p=c(e,w[1]);k=g(w[0]);return 2===w.length?0===k.length?null:k.reduce(function(A,C){A=p(A,C);return A=void 0!==A&&A!==d.voidOperation?A:null}):k.reduce(function(A,C){A=p(A,C);return A=void 0!==A&&A!==d.voidOperation?A:null},w[2])})},b.functions.map=function(e,h){return b.standardFunction(e,h,function(k,m,w){d.pcCheck(w,2,
2);k=c(e,w[1]);m=[];var p=0;for(w=g(w[0]);p<w.length;p++){var A=k(w[p]);void 0!==A&&A!==d.voidOperation?m.push(A):m.push(null)}return m})},b.functions.filter=function(e,h){return b.standardFunction(e,h,function(k,m,w){d.pcCheck(w,2,2);k=c(e,w[1]);m=[];var p=0;for(w=g(w[0]);p<w.length;p++){var A=w[p];!0===k(A)&&m.push(A)}return m})});"async"===b.mode&&(b.functions.any=function(e,h){return b.standardFunctionAsync(e,h,function(k,m,w){return a(this,void 0,void 0,function(){var p,A,C,z,q,v,B;return u(this,
function(D){switch(D.label){case 0:d.pcCheck(w,2,2),p=c(e,w[1]),A=g(w[0]),C=0,z=A,D.label=1;case 1:if(!(C<z.length))return[3,7];q=z[C];return[4,p(q)];case 2:return v=D.sent(),B=null,f.isPromiseLike(B)?[4,v]:[3,4];case 3:return B=D.sent(),[3,5];case 4:B=v,D.label=5;case 5:if(d.isBoolean(B)&&!0===B)return[2,!0];D.label=6;case 6:return C++,[3,1];case 7:return[2,!1]}})})})},b.functions.all=function(e,h){return b.standardFunctionAsync(e,h,function(k,m,w){return a(this,void 0,void 0,function(){var p,A,
C,z,q,v,B;return u(this,function(D){switch(D.label){case 0:d.pcCheck(w,2,2),p=c(e,w[1]),A=g(w[0]),C=0,z=A,D.label=1;case 1:if(!(C<z.length))return[3,7];q=z[C];return[4,p(q)];case 2:return v=D.sent(),B=null,f.isPromiseLike(B)?[4,v]:[3,4];case 3:return B=D.sent(),[3,5];case 4:B=v,D.label=5;case 5:if(!0!==B)return[2,!1];D.label=6;case 6:return C++,[3,1];case 7:return[2,!0]}})})})},b.functions.none=function(e,h){return b.standardFunctionAsync(e,h,function(k,m,w){return a(this,void 0,void 0,function(){var p,
A,C,z,q,v,B;return u(this,function(D){switch(D.label){case 0:d.pcCheck(w,2,2),p=c(e,w[1]),A=g(w[0]),C=0,z=A,D.label=1;case 1:if(!(C<z.length))return[3,7];q=z[C];return[4,p(q)];case 2:return v=D.sent(),B=null,f.isPromiseLike(B)?[4,v]:[3,4];case 3:return B=D.sent(),[3,5];case 4:B=v,D.label=5;case 5:if(!0===B)return[2,!1];D.label=6;case 6:return C++,[3,1];case 7:return[2,!0]}})})})},b.functions.filter=function(e,h){return b.standardFunctionAsync(e,h,function(k,m,w){return a(this,void 0,void 0,function(){var p,
A,C,z,q,v,B,D;return u(this,function(x){switch(x.label){case 0:d.pcCheck(w,2,2),p=c(e,w[1]),A=g(w[0]),C=[],z=0,q=A,x.label=1;case 1:if(!(z<q.length))return[3,7];v=q[z];return[4,p(v)];case 2:return B=x.sent(),D=null,f.isPromiseLike(D)?[4,B]:[3,4];case 3:return D=x.sent(),[3,5];case 4:D=B,x.label=5;case 5:!0===D&&C.push(v),x.label=6;case 6:return z++,[3,1];case 7:return[2,C]}})})})},b.functions.reduce=function(e,h){return b.standardFunctionAsync(e,h,function(k,m,w){var p=this;d.pcCheck(w,2,3);var A=
c(e,w[1]);k=g(w[0]);m=null;if(2<w.length)w=d.defaultUndefined(w[2],null),m=k.reduce(function(C,z){return a(p,void 0,void 0,function(){var q;return u(this,function(v){switch(v.label){case 0:return[4,C];case 1:q=v.sent();if(void 0===q||q===d.voidOperation)q=null;return[2,A(q,z)]}})})},Promise.resolve(w));else{if(0===k.length)return null;m=k.reduce(function(C,z,q){return a(p,void 0,void 0,function(){var v;return u(this,function(B){switch(B.label){case 0:return 1>=q?[2,A(C,z)]:[4,C];case 1:v=B.sent();
if(void 0===v||v===d.voidOperation)v=null;return[2,A(v,z)]}})})})}return m.then(function(C){return void 0!==C&&C!==d.voidOperation?C:null})})},b.functions.map=function(e,h){return b.standardFunctionAsync(e,h,function(k,m,w){return a(this,void 0,void 0,function(){var p,A,C,z,q,v,B,D;return u(this,function(x){switch(x.label){case 0:d.pcCheck(w,2,2),p=c(e,w[1]),A=g(w[0]),C=[],z=0,q=A,x.label=1;case 1:if(!(z<q.length))return[3,7];v=q[z];return[4,p(v)];case 2:return B=x.sent(),D=null,f.isPromiseLike(D)?
[4,B]:[3,4];case 3:return D=x.sent(),[3,5];case 4:D=B,x.label=5;case 5:void 0!==D&&D!==d.voidOperation?C.push(D):C.push(null),x.label=6;case 6:return z++,[3,1];case 7:return[2,C]}})})})})}})},"esri/arcade/polyfill/promiseUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/all"],function(F,y,a,u){function n(d,f){var b=new a(f);d(function(c){return l(c).then(b.resolve)},b.reject);return b.promise}function t(d){if(d){if("function"!==typeof d.forEach){var f=Object.keys(d),b=f.map(function(g){return d[g]});
return t(b).then(function(g){var e={};f.forEach(function(h,k){return e[h]=g[k]});return e})}var c=null;return n(function(g,e){var h=[],k=d.length;0===k&&g(h);d.forEach(function(m){var w={promise:m};h.push(w);m.then(function(p){w.value=p}).catch(function(p){w.error=p}).then(function(){--k;0===k&&(c?e(Error("AbortError")):g(h))})})},function(g){c=g||"Invocation cancellation";d.forEach(function(e){return e.cancel(g)})})}}function r(d){void 0===d&&(d=void 0);var f=new a;f.resolve(d);return f.promise}
function l(d){return d&&"function"===typeof d.then?d:r(d)}Object.defineProperty(y,"__esModule",{value:!0});y.createResolver=y.when=y.isPromiseLike=y.wrapCallback=y.timeout=y.after=y.resolve=y.reject=y.first=y.eachAlwaysValues=y.eachAlways=y.createDeferred=y.create=y.filter=y.all=void 0;y.all=function(d){return u(d)};y.filter=function(d,f){var b=d.slice();return u(d.map(function(c,g){return f(c,g)})).then(function(c){return b.filter(function(g,e){return c[e]})})};y.create=n;y.createDeferred=function(d){var f=
null;d=n(function(b,c){f={resolve:b,reject:c}},d);f.promise=d;f.cancel=function(){f.reject(Error("AbortError"))};return f};y.eachAlways=t;y.eachAlwaysValues=function(d){return t(d).then(function(f){return f.filter(function(b){return!!b.value}).map(function(b){return b.value})})};y.first=function(d){return d&&d.length?n(function(f,b){for(var c=0;c<d.length;c++)d[c].then(f,b)}):r()};y.reject=function(d){var f=new a;f.reject(d);return f.promise};y.resolve=r;y.after=function(d,f){void 0===f&&(f=void 0);
var b=0;return n(function(c){b=setTimeout(function(){c(f)},d)},function(){b&&(clearTimeout(b),b=0)})};y.timeout=function(d,f,b){var c=0,g=new a(d.cancel);d.then(function(e){g.isFulfilled()||(g.resolve(e),c&&(clearTimeout(c),c=0))});d.catch(function(e){g.isFulfilled()||(g.reject(e),c&&(clearTimeout(c),c=0))});c=setTimeout(function(){g.reject(b||Error("promiseUtils:timeout"))},f);return g.promise};y.wrapCallback=function(d){var f=!1;return n(function(){d(function(b){f||r(b)})},function(){return f=!0})};
y.isPromiseLike=function(d){return d&&"function"===typeof d.then};y.when=l;y.createResolver=function(d){var f,b;d=n(function(g,e){f=g;b=e},d);var c=function(g){f(g)};c.resolve=function(g){return f(g)};c.reject=function(g){return b(g)};c.promise=d;return c}})},"esri/arcade/functions/date":function(){define(["require","exports","../languageUtils","../../libs/luxon/luxon","dojo/_base/kernel"],function(F,y,a,u,n){function t(b){b=new Date(b.getTime());var c=b.getFullYear(),g=new Date(0);g.setFullYear(c+
1,0,4);g.setHours(0,0,0,0);g=r(g);var e=new Date(0);e.setFullYear(c,0,4);e.setHours(0,0,0,0);e=r(e);return b.getTime()>=g.getTime()?c+1:b.getTime()>=e.getTime()?c:c-1}function r(b){b=new Date(b.getTime());var c=b.getDay();c=(1>c?7:0)+c-1;b.setDate(b.getDate()-c);b.setHours(0,0,0,0);return b}function l(b){return null===b?b:isNaN(b.getTime())?null:b}Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=void 0;var d=[0,31,59,90,120,151,181,212,243,273,304,334],f=[0,31,60,91,121,152,182,
213,244,274,305,335];y.registerFunctions=function(b,c){b.today=function(g,e){return c(g,e,function(h,k,m){a.pcCheck(m,0,0);h=new Date;h.setHours(0,0,0,0);return h})};b.now=function(g,e){return c(g,e,function(h,k,m){a.pcCheck(m,0,0);return new Date})};b.timestamp=function(g,e){return c(g,e,function(h,k,m){a.pcCheck(m,0,0);h=new Date;return h=new Date(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds())})};b.toutc=function(g,e){return c(g,
e,function(h,k,m){a.pcCheck(m,1,1);h=a.toDate(m[0]);return null===h?null:new Date(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds())})};b.tolocal=function(g,e){return c(g,e,function(h,k,m){a.pcCheck(m,1,1);h=a.toDate(m[0]);return null===h?null:u.DateTime.utc(h.getFullYear(),h.getMonth()+1,h.getDate(),h.getHours(),h.getMinutes(),h.getSeconds(),h.getMilliseconds()).toJSDate()})};b.day=function(g,e){return c(g,e,function(h,k,
m){a.pcCheck(m,1,1);h=a.toDate(m[0]);return null===h?NaN:h.getDate()})};b.month=function(g,e){return c(g,e,function(h,k,m){a.pcCheck(m,1,1);h=a.toDate(m[0]);return null===h?NaN:h.getMonth()})};b.year=function(g,e){return c(g,e,function(h,k,m){a.pcCheck(m,1,1);h=a.toDate(m[0]);return null===h?NaN:h.getFullYear()})};b.hour=function(g,e){return c(g,e,function(h,k,m){a.pcCheck(m,1,1);h=a.toDate(m[0]);return null===h?NaN:h.getHours()})};b.second=function(g,e){return c(g,e,function(h,k,m){a.pcCheck(m,1,
1);h=a.toDate(m[0]);return null===h?NaN:h.getSeconds()})};b.millisecond=function(g,e){return c(g,e,function(h,k,m){a.pcCheck(m,1,1);h=a.toDate(m[0]);return null===h?NaN:h.getMilliseconds()})};b.minute=function(g,e){return c(g,e,function(h,k,m){a.pcCheck(m,1,1);h=a.toDate(m[0]);return null===h?NaN:h.getMinutes()})};b.week=function(g,e){return c(g,e,function(h,k,m){a.pcCheck(m,1,2);h=a.toDate(m[0]);if(null===h)return NaN;m=a.toNumber(a.defaultUndefined(m[1],0));if(0>m||6<m)throw Error("Invalid Parameter");
k=h.getDate();var w=h.getMonth(),p=h.getFullYear();h=h.getDay();k=k+(0!==p%4||0===p%100&&0!==p%400?d:f)[w]-1;w=Math.floor(k/7);return h-m+(0>h-m?7:0)<k-7*w?w+1:w})};b.weekday=function(g,e){return c(g,e,function(h,k,m){a.pcCheck(m,1,1);h=a.toDate(m[0]);return null===h?NaN:h.getDay()})};b.isoweekday=function(g,e){return c(g,e,function(h,k,m){a.pcCheck(m,1,1);h=a.toDate(m[0]);if(null===h)return NaN;h=h.getDay();0===h&&(h=7);return h})};b.isomonth=function(g,e){return c(g,e,function(h,k,m){a.pcCheck(m,
1,1);h=a.toDate(m[0]);return null===h?NaN:h.getMonth()+1})};b.isoweek=function(g,e){return c(g,e,function(h,k,m){a.pcCheck(m,1,1);k=a.toDate(m[0]);if(null===k)return NaN;h=r(k).getTime();k=t(k);m=new Date(0);m.setFullYear(k,0,4);m.setHours(0,0,0,0);k=r(m);h-=k.getTime();return Math.round(h/6048E5)+1})};b.isoyear=function(g,e){return c(g,e,function(h,k,m){a.pcCheck(m,1,1);h=a.toDate(m[0]);return null===h?NaN:t(h)})};b.date=function(g,e){return c(g,e,function(h,k,m){a.pcCheck(m,0,7);if(3===m.length)return l(new Date(a.toNumber(m[0]),
a.toNumber(m[1]),a.toNumber(m[2]),0,0,0,0));if(4===m.length)return l(new Date(a.toNumber(m[0]),a.toNumber(m[1]),a.toNumber(m[2]),a.toNumber(m[3]),0,0,0));if(5===m.length)return l(new Date(a.toNumber(m[0]),a.toNumber(m[1]),a.toNumber(m[2]),a.toNumber(m[3]),a.toNumber(m[4]),0,0));if(6===m.length)return l(new Date(a.toNumber(m[0]),a.toNumber(m[1]),a.toNumber(m[2]),a.toNumber(m[3]),a.toNumber(m[4]),a.toNumber(m[5]),0));if(7===m.length)return l(new Date(a.toNumber(m[0]),a.toNumber(m[1]),a.toNumber(m[2]),
a.toNumber(m[3]),a.toNumber(m[4]),a.toNumber(m[5]),a.toNumber(m[6])));if(2===m.length){h=a.toString(m[1]);if(""===h)return null;h=a.standardiseDateFormat(h);k=void 0;k="X"===h?u.DateTime.fromSeconds(a.toNumber(m[0])):"x"===h?u.DateTime.fromMillis(a.toNumber(m[0])):u.DateTime.fromFormat(a.toString(m[0]),h,{locale:n.locale,numberingSystem:"latn"});return k.isValid?k.toJSDate():null}if(1===m.length){if(a.isString(m[0])){if(""===m[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===
/^[0-9][0-9][0-9][0-9]$/.test(m[0]))return a.toDate(m[0]+"-01-01")}h=a.toNumber(m[0]);return!1===isNaN(h)?l(new Date(h)):a.toDate(m[0])}if(0===m.length)return new Date})};b.datediff=function(g,e){return c(g,e,function(h,k,m){a.pcCheck(m,2,3);h=a.toDateTime(m[0]);k=a.toDateTime(m[1]);if(null===h||null===k)return NaN;switch(a.toString(m[2]).toLowerCase()){case "days":case "day":case "d":return h.diff(k,"days").days;case "months":case "month":return h.diff(k,"months").months;case "minutes":case "minute":case "m":return"M"===
m[2]?h.diff(k,"months").months:h.diff(k,"minutes").minutes;case "seconds":case "second":case "s":return h.diff(k,"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return h.diff(k).milliseconds;case "hours":case "hour":case "h":return h.diff(k,"hours").hours;case "years":case "year":case "y":return h.diff(k,"years").years;default:return h.diff(k).milliseconds}})};b.dateadd=function(g,e){return c(g,e,function(h,k,m){var w;a.pcCheck(m,2,3);h=a.toDateTime(m[0]);if(null===h)return null;
k=a.toNumber(m[1]);if(isNaN(k))return h.toJSDate();var p="milliseconds";switch(a.toString(m[2]).toLowerCase()){case "days":case "day":case "d":p="days";k=a.absRound(k);break;case "months":case "month":p="months";k=a.absRound(k);break;case "minutes":case "minute":case "m":p="M"===m[2]?"months":"minutes";break;case "seconds":case "second":case "s":p="seconds";break;case "milliseconds":case "millisecond":case "ms":p="milliseconds";break;case "hours":case "hour":case "h":p="hours";break;case "years":case "year":case "y":p=
"years"}return h.plus((w={},w[p]=k,w)).toJSDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/jsonUtils".split(" "),function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k){function m(w){return w&&
"esri.arcade.Feature"===w.arcadeDeclaredClass}Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=void 0;y.registerFunctions=function(w,p){w.ringisclockwise=function(A,C){return p(A,C,function(z,q,v){l.pcCheck(v,1,1);z=[];if(null===v[0])return!1;if(l.isArray(v[0])){var B=0;for(v=v[0];B<v.length;B++)if(q=v[B],q instanceof c)z.push([q.x,q.y]);else throw Error("Invalid Argument");}else if(v[0]instanceof r)z=v[0]._elements;else if(l.isImmutableArray(v[0])){B=0;for(var D=v[0].toArray();B<
D.length;B++)if(q=D[B],q instanceof c)z.push([q.x,q.y]);else throw Error("Invalid Argument");0<z.length&&(v[0].get(0),v[0].get(0))}else throw Error("Invalid Argument");return 3>z.length?!1:(new g({rings:[],spatialReference:{wkid:4326}})).isClockwise(z)})};w.polygon=function(A,C){return p(A,C,function(z,q,v){l.pcCheck(v,1,1);z=null;if(v[0]instanceof n){if(z=l.fixSpatialReference(t.parseGeometryFromDictionary(v[0]),A.spatialReference),!1===z instanceof g)throw Error("Illegal Parameter");}else z=v[0]instanceof
g?k.fromJson(v[0].toJson()):l.fixSpatialReference(new g(JSON.parse(v[0])),A.spatialReference);if(null!==z&&!1===z.spatialReference.equals(A.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return l.fixNullGeometry(z)})};w.polyline=function(A,C){return p(A,C,function(z,q,v){l.pcCheck(v,1,1);z=null;if(v[0]instanceof n){if(z=l.fixSpatialReference(t.parseGeometryFromDictionary(v[0]),A.spatialReference),!1===z instanceof e)throw Error("Illegal Parameter");
}else z=v[0]instanceof e?k.fromJson(v[0].toJson()):l.fixSpatialReference(new e(JSON.parse(v[0])),A.spatialReference);if(null!==z&&!1===z.spatialReference.equals(A.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return l.fixNullGeometry(z)})};w.point=function(A,C){return p(A,C,function(z,q,v){l.pcCheck(v,1,1);z=null;if(v[0]instanceof n){if(z=l.fixSpatialReference(t.parseGeometryFromDictionary(v[0]),A.spatialReference),
!1===z instanceof c)throw Error("Illegal Parameter");}else z=v[0]instanceof c?k.fromJson(v[0].toJson()):l.fixSpatialReference(new c(JSON.parse(v[0])),A.spatialReference);if(null!==z&&!1===z.spatialReference.equals(A.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return l.fixNullGeometry(z)})};w.multipoint=function(A,C){return p(A,C,function(z,q,v){l.pcCheck(v,1,1);z=null;if(v[0]instanceof n){if(z=l.fixSpatialReference(t.parseGeometryFromDictionary(v[0]),
A.spatialReference),!1===z instanceof b)throw Error("Illegal Parameter");}else z=v[0]instanceof b?k.fromJson(v[0].toJson()):l.fixSpatialReference(new b(JSON.parse(v[0])),A.spatialReference);if(null!==z&&!1===z.spatialReference.equals(A.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return l.fixNullGeometry(z)})};w.extent=function(A,C){return p(A,C,function(z,q,v){v=l.autoCastFeatureToGeometry(v);l.pcCheck(v,1,1);z=null;
v[0]instanceof n?z=l.fixSpatialReference(t.parseGeometryFromDictionary(v[0]),A.spatialReference):v[0]instanceof c?(z={xmin:v[0].x,ymin:v[0].y,xmax:v[0].x,ymax:v[0].y,spatialReference:v[0].spatialReference.toJson()},v=v[0],v.hasZ?(z.zmin=v.z,z.zmax=v.z):v.hasM&&(z.mmin=v.m,z.mmax=v.m),z=k.fromJson(z)):z=v[0]instanceof g?k.fromJson(v[0].getExtent().toJson()):v[0]instanceof e?k.fromJson(v[0].getExtent().toJson()):v[0]instanceof b?k.fromJson(v[0].getExtent().toJson()):v[0]instanceof d?k.fromJson(v[0].toJson()):
l.fixSpatialReference(new d(JSON.parse(v[0])),A.spatialReference);if(null!==z&&!1===z.spatialReference.equals(A.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return l.fixNullGeometry(z)})};w.geometry=function(A,C){return p(A,C,function(z,q,v){l.pcCheck(v,1,1);z=null;if(null===v[0])return null;z=m(v[0])?l.fixSpatialReference(v[0].geometry(),A.spatialReference):v[0]instanceof n?l.fixSpatialReference(t.parseGeometryFromDictionary(v[0]),
A.spatialReference):l.fixSpatialReference(k.fromJson(JSON.parse(v[0])),A.spatialReference);if(null!==z&&!1===z.spatialReference.equals(A.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return l.fixNullGeometry(z)})};w.setgeometry=function(A,C){return p(A,C,function(z,q,v){l.pcCheck(v,2,2);if(m(v[0])){if(!0===v[0].immutable)throw Error("Feature is Immutable");if(v[1]instanceof f||null===v[1])v[0]._geometry=v[1];else throw Error("Illegal Argument");
}else throw Error("Illegal Argument");return l.voidOperation})};w.feature=function(A,C){return p(A,C,function(z,q,v){if(0===v.length)throw Error("Missing Parameters");z=null;if(1===v.length)if(l.isString(v[0]))z=t.fromJson(JSON.parse(v[0]));else if(m(v[0]))z=t.createFromArcadeFeature(v[0]);else if(v[0]instanceof f)z=t.createFromGraphicLikeObject(v[0],null,null);else if(v[0]instanceof n)z=v[0].hasField("geometry")?v[0].field("geometry"):null,q=v[0].hasField("attributes")?v[0].field("attributes"):null,
null!==z&&z instanceof n&&(z=t.parseGeometryFromDictionary(z)),null!==q&&(q=t.parseAttributesFromDictionary(q)),z=t.createFromGraphicLikeObject(z,q,null);else throw Error("Illegal Argument");else{if(2===v.length){q=z=null;if(null!==v[0])if(v[0]instanceof f)z=v[0];else if(z instanceof n)z=t.parseGeometryFromDictionary(v[0]);else throw Error("Illegal Argument");if(null!==v[1])if(v[1]instanceof n)q=t.parseAttributesFromDictionary(v[1]);else throw Error("Illegal Argument");}else{z=null;q={};if(null!==
v[0])if(v[0]instanceof f)z=v[0];else if(z instanceof n)z=t.parseGeometryFromDictionary(v[0]);else throw Error("Illegal Argument");for(var B=1;B<v.length;B+=2){var D=l.toString(v[B]),x=v[B+1];if(null===x||void 0===x||l.isString(x)||isNaN(x)||l.isDate(x)||l.isNumber(x)||l.isBoolean(x)){if(l.isFunctionParameter(x)||!1===l.isSimpleType(x))throw Error("Illegal Argument");q[D]=x===l.voidOperation?null:x}else throw Error("Illegal Argument");}}z=t.createFromGraphicLikeObject(z,q,null)}z._geometry=l.fixSpatialReference(z.geometry(),
A.spatialReference);z.immutable=!1;return z})};w.dictionary=function(A,C){return p(A,C,function(z,q,v){if(0===v.length)return v=new n,v.immutable=!1,v;if(1===v.length&&l.isString(v[0]))try{var B=JSON.parse(v[0]),D=n.convertObjectToArcadeDictionary(B,!1);D.immutable=!1;return D}catch(x){throw Error("Missing Parameters or Illegal Json");}if(0!==v.length%2)throw Error("Missing Parameters");z={};for(q=0;q<v.length;q+=2)if(B=l.toString(v[q]),D=v[q+1],null===D||void 0===D||l.isString(D)||isNaN(D)||l.isDate(D)||
l.isNumber(D)||l.isBoolean(D)||l.isArray(D)||l.isImmutableArray(D)){if(l.isFunctionParameter(D))throw Error("Illegal Argument");z[B]=D===l.voidOperation?null:D}else throw Error("Illegal Argument");v=new n(z);v.immutable=!1;return v})};w.haskey=function(A,C){return p(A,C,function(z,q,v){l.pcCheck(v,2,2);z=l.toString(v[1]);if(m(v[0])||v[0]instanceof n)return v[0].hasField(z);throw Error("Illegal Argument");})};w.indexof=function(A,C){return p(A,C,function(z,q,v){l.pcCheck(v,2,2);z=v[1];if(l.isArray(v[0])){for(q=
0;q<v[0].length;q++)if(l.equalityTest(z,v[0][q]))return q;return-1}if(l.isImmutableArray(v[0])){var B=v[0].length();for(q=0;q<B;q++)if(l.equalityTest(z,v[0].get(q)))return q;return-1}throw Error("Illegal Argument");})};w.angle=function(A,C){return p(A,C,function(z,q,v){v=l.autoCastFeatureToGeometry(v);l.pcCheck(v,2,3);if(!(v[0]instanceof c))throw Error("Illegal Argument");if(!(v[1]instanceof c))throw Error("Illegal Argument");if(2<v.length&&!(v[2]instanceof c))throw Error("Illegal Argument");return 2===
v.length?h.angle2D(v[0],v[1]):h.angleBetween2D(v[0],v[1],v[2])})};w.bearing=function(A,C){return p(A,C,function(z,q,v){v=l.autoCastFeatureToGeometry(v);l.pcCheck(v,2,3);if(!(v[0]instanceof c))throw Error("Illegal Argument");if(!(v[1]instanceof c))throw Error("Illegal Argument");if(2<v.length&&!(v[2]instanceof c))throw Error("Illegal Argument");return 2===v.length?h.bearing2D(v[0],v[1]):h.bearingBetween2D(v[0],v[1],v[2])})};w.isselfintersecting=function(A,C){return p(A,C,function(z,q,v){v=l.autoCastFeatureToGeometry(v);
l.pcCheck(v,1,1);z=v[0];if(z instanceof g)return z.isSelfIntersecting(z);if(z instanceof e)return z=z.paths,h.pathsSelfIntersecting(z);if(z instanceof b)for(q=z.points,v=0;v<q.length;v++)for(var B=0;B<q.length;B++)if(B!==v){for(var D=!0,x=0;x<q[v].length;x++)if(q[v][x]!==q[B][x]){D=!1;break}if(!0===D)return!0}return l.isArray(z)||l.isImmutableArray(z)?(z=l.autoCastArrayOfPointsToPolyline(z,A.spatialReference),null!==z&&(z=z.paths),h.pathsSelfIntersecting(z)):!1})}}})},"esri/arcade/functions/centroid":function(){define(["require",
"exports","../../geometry/Point"],function(F,y,a){function u(b,c,g){var e={x:0,y:0};c&&(e.z=0);g&&(e.m=0);for(var h=0,k=b[0],m=0;m<b.length;m++){var w=b[m];a:if(w.length!==k.length)var p=!1;else{for(p=0;p<w.length;p++)if(w[p]!==k[p]){p=!1;break a}p=!0}if(!1===p){p=n(k,w,c);var A=w,C=c,z=g,q={x:(k[0]+A[0])/2,y:(k[1]+A[1])/2};C&&(q.z=(k[2]+A[2])/2);C&&z?q.m=(k[3]+A[3])/2:z&&(q.m=(k[2]+A[2])/2);k=q;k.x*=p;k.y*=p;e.x+=k.x;e.y+=k.y;c&&(k.z*=p,e.z+=k.z);g&&(k.m*=p,e.m+=k.m);h+=p;k=w}}0<h?(e.x/=h,e.y/=h,
c&&(e.z/=h),g&&(e.m/=h)):(e.x=b[0][0],e.y=b[0][1],c&&(e.z=b[0][2]),g&&c?e.m=b[0][3]:g&&(e.m=b[0][2]));return e}function n(b,c,g){var e=c[0]-b[0];b=c[1]-b[1];return g?(c=c[2]-c[2],Math.sqrt(e*e+b*b+c*c)):Math.sqrt(e*e+b*b)}function t(b,c,g){for(void 0===g&&(g=0);b<g;)b+=c;for(g+=c;b>=g;)b-=c;return b}function r(b,c){return Math.atan2(c.y-b.y,c.x-b.x)}function l(b,c,g){var e=b.x-c.x;b=b.y-c.y;var h=g.x-c.x;c=g.y-c.y;return Math.atan2(e*c-h*b,e*h+b*c)}function d(b,c,g,e,h){var k=b[0];b=b[1];var m=c[0];
c=c[1];var w=g[0],p=g[1];g=e[0]-w;w=k-w;var A=m-k;e=e[1]-p;p=b-p;var C=c-b,z=e*A-g*C;if(0===z)return!1;g=(g*p-e*w)/z;w=(A*p-C*w)/z;return 0<=g&&1>=g&&0<=w&&1>=w?(h&&(h[0]=k+g*(m-k),h[1]=b+g*(c-b)),!0):!1}Object.defineProperty(y,"__esModule",{value:!0});y.pathsSelfIntersecting=y.bearingBetween2D=y.angleBetween2D=y.angleBetweenRad=y.bearing2D=y.angle2D=y.angleRad=y.centroidMultiPoint=y.centroidPolyline=void 0;y.centroidPolyline=function(b){for(var c={x:0,y:0,spatialReference:b.spatialReference.toJson()},
g={x:0,y:0,spatialReference:b.spatialReference.toJson()},e=0,h=0,k=0;k<b.paths.length;k++)if(0!==b.paths[k].length){var m=b.paths[k];var w=!0===b.hasZ;if(1>=m.length)m=0;else{for(var p=0,A=1;A<m.length;A++)p+=n(m[A-1],m[A],w);m=p}0===m?(w=u(b.paths[k],!0===b.hasZ,!0===b.hasM),c.x+=w.x,c.y+=w.y,!0===b.hasZ&&(c.z+=w.z),!0===b.hasM&&(c.m+=w.m),++e):(w=u(b.paths[k],!0===b.hasZ,!0===b.hasM),g.x+=w.x*m,g.y+=w.y*m,!0===b.hasZ&&(g.z+=w.z*m),!0===b.hasM&&(g.m+=w.m*m),h+=m)}return 0<h?(g.x/=h,g.y/=h,!0===b.hasZ&&
(g.z/=h),!0===b.hasM&&(g.m/=h),new a(g)):0<e?(c.x/=e,c.y/=e,!0===b.hasZ&&(g.z/=e),!0===b.hasM&&(c.m/=e),new a(c)):null};y.centroidMultiPoint=function(b){if(0===b.points.length)return null;for(var c=0,g=0,e=0,h=0,k=0;k<b.points.length;k++){var m=b.getPoint(k);!0===m.hasZ&&(e+=m.z);!0===m.hasM&&(h+=m.m);c+=m.x;g+=m.y;h+=m.m}c={x:c/b.points.length,y:g/b.points.length,spatialReference:null};c.spatialReference=b.spatialReference.toJson();!0===b.hasZ&&(c.z=e/b.points.length);!0===b.hasM&&(c.m=h/b.points.length);
return new a(c)};y.angleRad=r;y.angle2D=function(b,c){return t(r(b,c),2*Math.PI)*(180/Math.PI)};y.bearing2D=function(b,c){return t(Math.PI/2-r(b,c),2*Math.PI)*(180/Math.PI)};y.angleBetweenRad=l;y.angleBetween2D=function(b,c,g){return t(l(b,c,g),2*Math.PI)*(180/Math.PI)};y.bearingBetween2D=function(b,c,g){return t(-1*l(b,c,g),2*Math.PI)*(180/Math.PI)};var f=[0,0];y.pathsSelfIntersecting=function(b){for(var c=0;c<b.length;c++){for(var g=b[c],e=0;e<g.length-1;e++)for(var h=g[e],k=g[e+1],m=c+1;m<b.length;m++)for(var w=
0;w<b[m].length-1;w++){var p=b[m][w],A=b[m][w+1],C=d(h,k,p,A,f);if(C&&!(f[0]===h[0]&&f[1]===h[1]||f[0]===p[0]&&f[1]===p[1]||f[0]===k[0]&&f[1]===k[1]||f[0]===A[0]&&f[1]===A[1]))return!0}w=g.length;if(!(3>w))for(e=0;e<=w-2;e++)for(h=g[e],k=g[e+1],m=e+2;m<=w-2;m++)if(p=g[m],A=g[m+1],(C=d(h,k,p,A,f))&&!(f[0]===h[0]&&f[1]===h[1]||f[0]===p[0]&&f[1]===p[1]||f[0]===k[0]&&f[1]===k[1]||f[0]===A[0]&&f[1]===A[1]))return!0}return!1}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/jsonUtils".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g){function e(k){return 0===a.version.indexOf("4.")?b.fromExtent(k):new b({spatialReference:k.spatialReference,rings:[[[k.xmin,k.ymin],[k.xmin,k.ymax],[k.xmax,k.ymax],[k.xmax,k.ymin],[k.xmin,k.ymin]]]})}Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=y.setGeometryEngine=void 0;var h=null;y.setGeometryEngine=function(k){h=k};y.registerFunctions=function(k,m){function w(p){n.pcCheck(p,2,2);if(!(p[0]instanceof l&&p[1]instanceof l||p[0]instanceof l&&
null===p[1]||p[1]instanceof l&&null===p[0]||null===p[0]&&null===p[1]))throw Error("Illegal Argument");}k.disjoint=function(p,A){return m(p,A,function(C,z,q){q=n.autoCastFeatureToGeometry(q);w(q);return null===q[0]||null===q[1]?!0:h.disjoint(q[0],q[1])})};k.intersects=function(p,A){return m(p,A,function(C,z,q){q=n.autoCastFeatureToGeometry(q);w(q);return null===q[0]||null===q[1]?!1:h.intersects(q[0],q[1])})};k.touches=function(p,A){return m(p,A,function(C,z,q){q=n.autoCastFeatureToGeometry(q);w(q);
return null===q[0]||null===q[1]?!1:h.touches(q[0],q[1])})};k.crosses=function(p,A){return m(p,A,function(C,z,q){q=n.autoCastFeatureToGeometry(q);w(q);return null===q[0]||null===q[1]?!1:h.crosses(q[0],q[1])})};k.within=function(p,A){return m(p,A,function(C,z,q){q=n.autoCastFeatureToGeometry(q);w(q);return null===q[0]||null===q[1]?!1:h.within(q[0],q[1])})};k.contains=function(p,A){return m(p,A,function(C,z,q){q=n.autoCastFeatureToGeometry(q);w(q);return null===q[0]||null===q[1]?!1:h.contains(q[0],q[1])})};
k.overlaps=function(p,A){return m(p,A,function(C,z,q){q=n.autoCastFeatureToGeometry(q);w(q);return null===q[0]||null===q[1]?!1:h.overlaps(q[0],q[1])})};k.equals=function(p,A){return m(p,A,function(C,z,q){n.pcCheck(q,2,2);return q[0]===q[1]?!0:q[0]instanceof l&&q[1]instanceof l?h.equals(q[0],q[1]):n.isDate(q[0])&&n.isDate(q[1])?q[0].getTime()===q[1].getTime():!1})};k.relate=function(p,A){return m(p,A,function(C,z,q){q=n.autoCastFeatureToGeometry(q);n.pcCheck(q,3,3);if(q[0]instanceof l&&q[1]instanceof
l)return h.relate(q[0],q[1],n.toString(q[2]));if(q[0]instanceof l&&null===q[1]||q[1]instanceof l&&null===q[0]||null===q[0]&&null===q[1])return!1;throw Error("Illegal Argument");})};k.intersection=function(p,A){return m(p,A,function(C,z,q){q=n.autoCastFeatureToGeometry(q);w(q);return null===q[0]||null===q[1]?null:h.intersect(q[0],q[1])})};k.union=function(p,A){return m(p,A,function(C,z,q){q=n.autoCastFeatureToGeometry(q);C=[];if(0===q.length)throw Error("Function called with wrong number of Parameters");
if(1===q.length)if(n.isArray(q[0]))for(q=n.autoCastFeatureToGeometry(q[0]),z=0;z<q.length;z++){if(null!==q[z]){if(!(q[z]instanceof l))throw Error("Illegal Argument");C.push(q[z])}}else if(n.isImmutableArray(q[0]))for(q=n.autoCastFeatureToGeometry(q[0].toArray()),z=0;z<q.length;z++){if(null!==q[z]){if(!(q[z]instanceof l))throw Error("Illegal Argument");C.push(q[z])}}else{if(q[0]instanceof l)return n.fixSpatialReference(u.cloneGeometry(q[0]),p.spatialReference);if(null===q[0])return null;throw Error("Illegal Argument");
}else for(z=0;z<q.length;z++)if(null!==q[z]){if(!(q[z]instanceof l))throw Error("Illegal Argument");C.push(q[z])}return 0===C.length?null:h.union(C)})};k.difference=function(p,A){return m(p,A,function(C,z,q){q=n.autoCastFeatureToGeometry(q);w(q);return null!==q[0]&&null===q[1]?u.cloneGeometry(q[0]):null===q[0]?null:h.difference(q[0],q[1])})};k.symmetricdifference=function(p,A){return m(p,A,function(C,z,q){q=n.autoCastFeatureToGeometry(q);w(q);return null===q[0]&&null===q[1]?null:null===q[0]?u.cloneGeometry(q[1]):
null===q[1]?u.cloneGeometry(q[0]):h.symmetricDifference(q[0],q[1])})};k.clip=function(p,A){return m(p,A,function(C,z,q){q=n.autoCastFeatureToGeometry(q);n.pcCheck(q,2,2);if(!(q[1]instanceof r)&&null!==q[1])throw Error("Illegal Argument");if(null===q[0])return null;if(!(q[0]instanceof l))throw Error("Illegal Argument");return null===q[1]?null:h.clip(q[0],q[1])})};k.cut=function(p,A){return m(p,A,function(C,z,q){q=n.autoCastFeatureToGeometry(q);n.pcCheck(q,2,2);if(!(q[1]instanceof c)&&null!==q[1])throw Error("Illegal Argument");
if(null===q[0])return[];if(!(q[0]instanceof l))throw Error("Illegal Argument");return null===q[1]?[u.cloneGeometry(q[0])]:h.cut(q[0],q[1])})};k.area=function(p,A){return m(p,A,function(C,z,q){n.pcCheck(q,1,2);q=n.autoCastFeatureToGeometry(q);if(null===q[0])return 0;if(n.isArray(q[0])||n.isImmutableArray(q[0]))return C=n.autoCastArrayOfPointsToPolygon(q[0],p.spatialReference),null===C?0:h.planarArea(C,u.convertSquareUnitsToCode(n.defaultUndefined(q[1],-1)));if(!(q[0]instanceof l))throw Error("Illegal Argument");
return h.planarArea(q[0],u.convertSquareUnitsToCode(n.defaultUndefined(q[1],-1)))})};k.areageodetic=function(p,A){return m(p,A,function(C,z,q){n.pcCheck(q,1,2);q=n.autoCastFeatureToGeometry(q);if(null===q[0])return 0;if(n.isArray(q[0])||n.isImmutableArray(q[0]))return C=n.autoCastArrayOfPointsToPolygon(q[0],p.spatialReference),null===C?0:h.geodesicArea(C,u.convertSquareUnitsToCode(n.defaultUndefined(q[1],-1)));if(!(q[0]instanceof l))throw Error("Illegal Argument");return h.geodesicArea(q[0],u.convertSquareUnitsToCode(n.defaultUndefined(q[1],
-1)))})};k.length=function(p,A){return m(p,A,function(C,z,q){n.pcCheck(q,1,2);q=n.autoCastFeatureToGeometry(q);if(null===q[0])return 0;if(n.isArray(q[0])||n.isImmutableArray(q[0]))return C=n.autoCastArrayOfPointsToPolyline(q[0],p.spatialReference),null===C?0:h.planarLength(C,u.convertLinearUnitsToCode(n.defaultUndefined(q[1],-1)));if(!(q[0]instanceof l))throw Error("Illegal Argument");return h.planarLength(q[0],u.convertLinearUnitsToCode(n.defaultUndefined(q[1],-1)))})};k.length3d=function(p,A){return m(p,
A,function(C,z,q){n.pcCheck(q,1,2);q=n.autoCastFeatureToGeometry(q);if(null===q[0])return 0;if(n.isArray(q[0])||n.isImmutableArray(q[0]))return C=n.autoCastArrayOfPointsToPolyline(q[0],p.spatialReference),null===C?0:h.planarLength(C,u.convertLinearUnitsToCode(n.defaultUndefined(q[1],-1)));if(!(q[0]instanceof l))throw Error("Illegal Argument");return h.planarLength(q[0],u.convertLinearUnitsToCode(n.defaultUndefined(q[1],-1)))})};k.lengthgeodetic=function(p,A){return m(p,A,function(C,z,q){n.pcCheck(q,
1,2);q=n.autoCastFeatureToGeometry(q);if(null===q[0])return 0;if(n.isArray(q[0])||n.isImmutableArray(q[0]))return C=n.autoCastArrayOfPointsToPolyline(q[0],p.spatialReference),null===C?0:h.geodesicLength(C,u.convertLinearUnitsToCode(n.defaultUndefined(q[1],-1)));if(!(q[0]instanceof l))throw Error("Illegal Argument");return h.geodesicLength(q[0],u.convertLinearUnitsToCode(n.defaultUndefined(q[1],-1)))})};k.distance=function(p,A){return m(p,A,function(C,z,q){q=n.autoCastFeatureToGeometry(q);n.pcCheck(q,
2,3);C=q[0];if(n.isArray(q[0])||n.isImmutableArray(q[0]))C=n.autoCastArrayOfPointsToMultiPoint(q[0],p.spatialReference);z=q[1];if(n.isArray(q[1])||n.isImmutableArray(q[1]))z=n.autoCastArrayOfPointsToMultiPoint(q[1],p.spatialReference);if(!(C instanceof l))throw Error("Illegal Argument");if(!(z instanceof l))throw Error("Illegal Argument");return h.distance(C,z,u.convertLinearUnitsToCode(n.defaultUndefined(q[2],-1)))})};k.distancegeodetic=function(p,A){return m(p,A,function(C,z,q){q=n.autoCastFeatureToGeometry(q);
n.pcCheck(q,2,3);C=q[0];z=q[1];if(!(C instanceof f))throw Error("Illegal Argument");if(!(z instanceof f))throw Error("Illegal Argument");var v=new c({paths:[],spatialReference:C.spatialReference});v.addPath([C,z]);return h.geodesicLength(v,u.convertLinearUnitsToCode(n.defaultUndefined(q[2],-1)))})};k.densify=function(p,A){return m(p,A,function(C,z,q){q=n.autoCastFeatureToGeometry(q);n.pcCheck(q,2,3);if(null===q[0])return null;if(!(q[0]instanceof l))throw Error("Illegal Argument");C=n.toNumber(q[1]);
if(isNaN(C))throw Error("Illegal Argument");if(0>=C)throw Error("Illegal Argument");return q[0]instanceof b||q[0]instanceof c?h.densify(q[0],C,u.convertLinearUnitsToCode(n.defaultUndefined(q[2],-1))):q[0]instanceof r?h.densify(e(q[0]),C,u.convertLinearUnitsToCode(n.defaultUndefined(q[2],-1))):q[0]})};k.densifygeodetic=function(p,A){return m(p,A,function(C,z,q){q=n.autoCastFeatureToGeometry(q);n.pcCheck(q,2,3);if(null===q[0])return null;if(!(q[0]instanceof l))throw Error("Illegal Argument");C=n.toNumber(q[1]);
if(isNaN(C))throw Error("Illegal Argument");if(0>=C)throw Error("Illegal Argument");return q[0]instanceof b||q[0]instanceof c?h.geodesicDensify(q[0],C,u.convertLinearUnitsToCode(n.defaultUndefined(q[2],-1))):q[0]instanceof r?h.geodesicDensify(e(q[0]),C,u.convertLinearUnitsToCode(n.defaultUndefined(q[2],-1))):q[0]})};k.generalize=function(p,A){return m(p,A,function(C,z,q){q=n.autoCastFeatureToGeometry(q);n.pcCheck(q,2,4);if(null===q[0])return null;if(!(q[0]instanceof l))throw Error("Illegal Argument");
C=n.toNumber(q[1]);if(isNaN(C))throw Error("Illegal Argument");return h.generalize(q[0],C,n.toBoolean(n.defaultUndefined(q[2],!0)),u.convertLinearUnitsToCode(n.defaultUndefined(q[3],-1)))})};k.buffer=function(p,A){return m(p,A,function(C,z,q){q=n.autoCastFeatureToGeometry(q);n.pcCheck(q,2,3);if(null===q[0])return null;if(!(q[0]instanceof l))throw Error("Illegal Argument");C=n.toNumber(q[1]);if(isNaN(C))throw Error("Illegal Argument");return 0===C?u.cloneGeometry(q[0]):h.buffer(q[0],C,u.convertLinearUnitsToCode(n.defaultUndefined(q[2],
-1)))})};k.buffergeodetic=function(p,A){return m(p,A,function(C,z,q){q=n.autoCastFeatureToGeometry(q);n.pcCheck(q,2,3);if(null===q[0])return null;if(!(q[0]instanceof l))throw Error("Illegal Argument");C=n.toNumber(q[1]);if(isNaN(C))throw Error("Illegal Argument");return 0===C?u.cloneGeometry(q[0]):h.geodesicBuffer(q[0],C,u.convertLinearUnitsToCode(n.defaultUndefined(q[2],-1)))})};k.offset=function(p,A){return m(p,A,function(C,z,q){q=n.autoCastFeatureToGeometry(q);n.pcCheck(q,2,6);if(null===q[0])return null;
if(!(q[0]instanceof b||q[0]instanceof c))throw Error("Illegal Argument");C=n.toNumber(q[1]);if(isNaN(C))throw Error("Illegal Argument");z=n.toNumber(n.defaultUndefined(q[4],10));if(isNaN(z))throw Error("Illegal Argument");var v=n.toNumber(n.defaultUndefined(q[5],0));if(isNaN(v))throw Error("Illegal Argument");return h.offset(q[0],C,u.convertLinearUnitsToCode(n.defaultUndefined(q[2],-1)),n.toString(n.defaultUndefined(q[3],"round")).toLowerCase(),z,v)})};k.rotate=function(p,A){return m(p,A,function(C,
z,q){q=n.autoCastFeatureToGeometry(q);n.pcCheck(q,2,3);C=q[0];if(null===C)return null;if(!(C instanceof l))throw Error("Illegal Argument");C instanceof r&&(C=b.fromExtent(C));z=n.toNumber(q[1]);if(isNaN(z))throw Error("Illegal Argument");q=n.defaultUndefined(q[2],null);if(null===q)return h.rotate(C,z);if(q instanceof f)return h.rotate(C,z,q);throw Error("Illegal Argument");})};k.centroid=function(p,A){return m(p,A,function(C,z,q){q=n.autoCastFeatureToGeometry(q);n.pcCheck(q,1,1);if(null===q[0])return null;
C=q[0];if(n.isArray(q[0])||n.isImmutableArray(q[0]))C=n.autoCastArrayOfPointsToMultiPoint(q[0],p.spatialReference);if(null===C)return null;if(!(C instanceof l))throw Error("Illegal Argument");return C instanceof f?n.fixSpatialReference(u.cloneGeometry(q[0]),p.spatialReference):C instanceof b?C.getCentroid():C instanceof c?t.centroidPolyline(C):C instanceof d?t.centroidMultiPoint(C):C instanceof r?C.getCenter():null})};k.multiparttosinglepart=function(p,A){return m(p,A,function(C,z,q){q=n.autoCastFeatureToGeometry(q);
n.pcCheck(q,1,1);z=[];if(null===q[0])return null;if(!(q[0]instanceof l))throw Error("Illegal Argument");if(q[0]instanceof f||q[0]instanceof r)return[n.fixSpatialReference(u.cloneGeometry(q[0]),p.spatialReference)];C=h.simplify(q[0]);if(C instanceof b){z=[];var v=[];for(q=0;q<C.rings.length;q++)if(C.isClockwise(C.rings[q])){var B=g.fromJson({rings:[C.rings[q]],hasZ:!0===C.hasZ,hasM:!0===C.hasM,spatialReference:C.spatialReference.toJson()});z.push(B)}else v.push({ring:C.rings[q],pt:C.getPoint(q,0)});
for(C=0;C<v.length;C++)for(q=0;q<z.length;q++)if(z[q].contains(v[C].pt)){z[q].addRing(v[C].ring);break}return z}if(C instanceof c){z=[];for(q=0;q<C.paths.length;q++)v=g.fromJson({paths:[C.paths[q]],hasZ:!0===C.hasZ,hasM:!0===C.hasM,spatialReference:C.spatialReference.toJson()}),z.push(v);return z}if(q[0]instanceof d){C=n.fixSpatialReference(u.cloneGeometry(q[0]),p.spatialReference);for(q=0;q<C.points.length;q++)z.push(C.getPoint(q));return z}return null})};k.issimple=function(p,A){return m(p,A,function(C,
z,q){q=n.autoCastFeatureToGeometry(q);n.pcCheck(q,1,1);if(null===q[0])return!0;if(!(q[0]instanceof l))throw Error("Illegal Argument");return h.isSimple(q[0])})};k.simplify=function(p,A){return m(p,A,function(C,z,q){q=n.autoCastFeatureToGeometry(q);n.pcCheck(q,1,1);if(null===q[0])return null;if(!(q[0]instanceof l))throw Error("Illegal Argument");return h.simplify(q[0])})}}})},"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent","../geometry/jsonUtils"],function(F,y,a,u){Object.defineProperty(y,
"__esModule",{value:!0});y.cloneGeometry=y.sameGeomType=y.convertLinearUnitsToCode=y.shapeExtent=y.convertSquareUnitsToCode=void 0;y.convertSquareUnitsToCode=function(n){if(void 0===n)return null;if("number"===typeof n)return n;n=n.toLowerCase();n=n.replace(/\s/g,"");n=n.replace(/-/g,"");switch(n){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109413;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;
case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nm":case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};y.shapeExtent=function(n){if(null===n)return null;switch(n.type){case "polygon":case "multipoint":case "polyline":return n.extent;
case "point":return new a({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference});case "extent":return n}return null};y.convertLinearUnitsToCode=function(n){if(void 0===n)return null;if("number"===typeof n)return n;n=n.toLowerCase();n=n.replace(/\s/g,"");n=n.replace(/-/g,"");switch(n){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;case "miles":case "mile":case "squaremile":case "squaremiles":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nm":case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};y.sameGeomType=function(n,t){return n===t||"point"===n&&"esriGeometryPoint"===t||"polyline"===n&&"esriGeometryPolyline"===t||"polygon"===n&&"esriGeometryPolygon"===t||"extent"===n&&"esriGeometryEnvelope"===
t||"multipoint"===n&&"esriGeometryMultipoint"===t||"point"===t&&"esriGeometryPoint"===n||"polyline"===t&&"esriGeometryPolyline"===n||"polygon"===t&&"esriGeometryPolygon"===n||"extent"===t&&"esriGeometryEnvelope"===n||"multipoint"===t&&"esriGeometryMultipoint"===n?!0:!1};y.cloneGeometry=function(n){if(null===n)return null;var t=u.fromJson(n.toJson());n.getCacheValue("_geVersion")&&t.setCacheValue("_geVersion",n.getCacheValue("_geVersion"));return t}})},"esri/arcade/functions/maths":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../languageUtils dojo/number".split(" "),
function(F,y,a,u,n,t){function r(l,d,f){if("undefined"===typeof f||0===+f)return Math[l](d);d=+d;f=+f;if(isNaN(d)||"number"!==typeof f||0!==f%1)return NaN;d=d.toString().split("e");d=Math[l](+(d[0]+"e"+(d[1]?+d[1]-f:-f)));d=d.toString().split("e");return+(d[0]+"e"+(d[1]?+d[1]+f:f))}Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=void 0;y.registerFunctions=function(l,d){function f(b,c,g){b=n.toNumber(b);return isNaN(b)?b:isNaN(c)||isNaN(g)||c>g?NaN:b<c?c:b>g?g:b}l.number=function(b,
c){return d(b,c,function(g,e,h){n.pcCheck(h,1,2);g=h[0];return n.isNumber(g)?g:null===g?0:n.isDate(g)||n.isBoolean(g)?Number(g):n.isArray(g)?NaN:""===g||void 0===g?Number(g):n.isString(g)?void 0!==h[1]?(h=n.multiReplace(h[1],"\u2030",""),h=n.multiReplace(h,"\u00a4",""),t.parse(g,{pattern:h})):Number(g.trim()):Number(g)})};l.abs=function(b,c){return d(b,c,function(g,e,h){n.pcCheck(h,1,1);return Math.abs(n.toNumber(h[0]))})};l.acos=function(b,c){return d(b,c,function(g,e,h){n.pcCheck(h,1,1);return Math.acos(n.toNumber(h[0]))})};
l.asin=function(b,c){return d(b,c,function(g,e,h){n.pcCheck(h,1,1);return Math.asin(n.toNumber(h[0]))})};l.atan=function(b,c){return d(b,c,function(g,e,h){n.pcCheck(h,1,1);return Math.atan(n.toNumber(h[0]))})};l.atan2=function(b,c){return d(b,c,function(g,e,h){n.pcCheck(h,2,2);return Math.atan2(n.toNumber(h[0]),n.toNumber(h[1]))})};l.ceil=function(b,c){return d(b,c,function(g,e,h){n.pcCheck(h,1,2);return 2===h.length?(g=n.toNumber(h[1]),isNaN(g)&&(g=0),r("ceil",n.toNumber(h[0]),-1*g)):Math.ceil(n.toNumber(h[0]))})};
l.round=function(b,c){return d(b,c,function(g,e,h){n.pcCheck(h,1,2);return 2===h.length?(g=n.toNumber(h[1]),isNaN(g)&&(g=0),r("round",n.toNumber(h[0]),-1*g)):Math.round(n.toNumber(h[0]))})};l.floor=function(b,c){return d(b,c,function(g,e,h){n.pcCheck(h,1,2);return 2===h.length?(g=n.toNumber(h[1]),isNaN(g)&&(g=0),r("floor",n.toNumber(h[0]),-1*g)):Math.floor(n.toNumber(h[0]))})};l.cos=function(b,c){return d(b,c,function(g,e,h){n.pcCheck(h,1,1);return Math.cos(n.toNumber(h[0]))})};l.isnan=function(b,
c){return d(b,c,function(g,e,h){n.pcCheck(h,1,1);return"number"===typeof h[0]&&isNaN(h[0])})};l.exp=function(b,c){return d(b,c,function(g,e,h){n.pcCheck(h,1,1);return Math.exp(n.toNumber(h[0]))})};l.log=function(b,c){return d(b,c,function(g,e,h){n.pcCheck(h,1,1);return Math.log(n.toNumber(h[0]))})};l.pow=function(b,c){return d(b,c,function(g,e,h){n.pcCheck(h,2,2);return Math.pow(n.toNumber(h[0]),n.toNumber(h[1]))})};l.random=function(b,c){return d(b,c,function(g,e,h){n.pcCheck(h,0,0);return Math.random()})};
l.sin=function(b,c){return d(b,c,function(g,e,h){n.pcCheck(h,1,1);return Math.sin(n.toNumber(h[0]))})};l.sqrt=function(b,c){return d(b,c,function(g,e,h){n.pcCheck(h,1,1);return Math.sqrt(n.toNumber(h[0]))})};l.tan=function(b,c){return d(b,c,function(g,e,h){n.pcCheck(h,1,1);return Math.tan(n.toNumber(h[0]))})};l.defaultvalue=function(b,c){return d(b,c,function(g,e,h){n.pcCheck(h,2,2);return null===h[0]||""===h[0]||void 0===h[0]?h[1]:h[0]})};l.isempty=function(b,c){return d(b,c,function(g,e,h){n.pcCheck(h,
1,1);return null===h[0]||""===h[0]||void 0===h[0]?!0:!1})};l["boolean"]=function(b,c){return d(b,c,function(g,e,h){n.pcCheck(h,1,1);return n.toBoolean(h[0])})};l.constrain=function(b,c){return d(b,c,function(g,e,h){n.pcCheck(h,3,3);g=n.toNumber(h[1]);e=n.toNumber(h[2]);if(n.isArray(h[0])){var k=[],m=0;for(h=h[0];m<h.length;m++)k.push(f(h[m],g,e));return k}if(n.isImmutableArray(h[0])){k=[];for(m=0;m<h[0].length();m++)k.push(f(h[0].get(m),g,e));return k}return f(h[0],g,e)})}}})},"esri/arcade/functions/stats":function(){define(["require",
"exports","../languageUtils","./fieldStats"],function(F,y,a,u){function n(t,r,l,d){if(1===d.length){if(a.isArray(d[0]))return u.calculateStat(t,d[0],-1);if(a.isImmutableArray(d[0]))return u.calculateStat(t,d[0].toArray(),-1)}return u.calculateStat(t,d,-1)}Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=void 0;y.registerFunctions=function(t,r){t.stdev=function(l,d){return r(l,d,function(f,b,c){return n("stdev",f,b,c)})};t.variance=function(l,d){return r(l,d,function(f,b,c){return n("variance",
f,b,c)})};t.average=function(l,d){return r(l,d,function(f,b,c){return n("mean",f,b,c)})};t.mean=function(l,d){return r(l,d,function(f,b,c){return n("mean",f,b,c)})};t.sum=function(l,d){return r(l,d,function(f,b,c){return n("sum",f,b,c)})};t.min=function(l,d){return r(l,d,function(f,b,c){return n("min",f,b,c)})};t.max=function(l,d){return r(l,d,function(f,b,c){return n("max",f,b,c)})};t.distinct=function(l,d){return r(l,d,function(f,b,c){return n("distinct",f,b,c)})};t.count=function(l,d){return r(l,
d,function(f,b,c){a.pcCheck(c,1,1);if(a.isArray(c[0])||a.isString(c[0]))return c[0].length;if(a.isImmutableArray(c[0]))return c[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(F,y,a){function u(t){for(var r=0,l=0;l<t.length;l++)r+=t[l];return r/t.length}function n(t){for(var r=u(t),l=0,d=0;d<t.length;d++)l+=Math.pow(r-t[d],2);return l/t.length}Object.defineProperty(y,"__esModule",
{value:!0});y.calculateStat=y.decodeStatType=void 0;y.decodeStatType=function(t){switch(t.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};y.calculateStat=function(t,r,l){void 0===l&&(l=1E3);switch(t.toLowerCase()){case "distinct":a:{t=l;l=[];for(var d={},f=[],b=0;b<r.length;b++){if(void 0!==
r[b]&&null!==r[b]&&r[b]!==a.voidOperation){var c=r[b];if(a.isNumber(c)||a.isString(c))void 0===d[c]&&(l.push(c),d[c]=1);else{for(var g=!1,e=0;e<f.length;e++)!0===a.equalityTest(f[e],c)&&(g=!0);!1===g&&(f.push(c),l.push(c))}}if(l.length>=t&&-1!==t){r=l;break a}}r=l}return r;case "avg":case "mean":return u(a.toNumberArray(r));case "min":return Math.min.apply(Math,a.toNumberArray(r));case "sum":r=a.toNumberArray(r);for(l=t=0;l<r.length;l++)t+=r[l];return t;case "max":return Math.max.apply(Math,a.toNumberArray(r));
case "stdev":case "stddev":return Math.sqrt(n(a.toNumberArray(r)));case "var":case "variance":return n(a.toNumberArray(r));case "count":return r.length}return 0}})},"esri/arcade/functions/string":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../ArcadePortal ../Attachment ../Dictionary ../languageUtils ../featureset/support/shared ./convertdirection ./hash ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../SpatialReference".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m){function w(p,A,C){if(null===p)A.updateUint8Array([0,139]);else if(l.isArray(p)){A.updateUint8Array([61]);if(C.map.has(p))p=C.map.get(p),A.updateIntArray([p^61237541]);else{C.map.set(p,C.currentLength++);for(var z=0;z<p.length;z++){var q=p[z];w(q,A,C)}C.map.delete(p);C.currentLength--}A.updateUint8Array([199])}else if(l.isImmutableArray(p)){A.updateUint8Array([61]);if(C.map.has(p))p=C.map.get(p),A.updateIntArray([p^61237541]);else{C.map.set(p,C.currentLength++);
z=0;for(var v=p.toArray();z<v.length;z++)q=v[z],w(q,A,C);C.map.delete(p);C.currentLength--}A.updateUint8Array([199])}else if(l.isDate(p))A.updateIntArray([p.getTime()]),A.updateUint8Array([241]);else if(l.isString(p))A.updateIntArray([p.length]),A.updateWithString(p),A.updateUint8Array([41]);else if(l.isBoolean(p))A.updateUint8Array([!0===p?1:0,113]);else if(l.isNumber(p))A.updateFloatArray([p]),A.updateUint8Array([173]);else{if(p instanceof t)throw Error("Type not supported in Hash");if(p instanceof
n)throw Error("Type not supported in Hash");if(p instanceof r){A.updateUint8Array([223]);if(C.map.has(p))p=C.map.get(p),A.updateIntArray([p^61237541]);else{C.map.set(p,C.currentLength++);z=0;for(v=p.keys();z<v.length;z++)q=v[z],A.updateIntArray([q.length]),A.updateWithString(q),A.updateUint8Array([251]),q=p.field(q),w(q,A,C),A.updateUint8Array([239]);C.map.delete(p);C.currentLength--}A.updateUint8Array([73])}else{if(l.isFeature(p))throw Error("Type not supported in Hash");if(p instanceof e)A.updateIntArray([3833836621]),
A.updateIntArray([0]),A.updateFloatArray([p.x]),A.updateIntArray([1]),A.updateFloatArray([p.y]),A.updateIntArray([3765347959]),w(p.spatialReference.wkid,A,C);else if(p instanceof h){A.updateIntArray([1266616829]);for(z=0;z<p.rings.length;z++){v=p.rings[z];var B=[],D=null,x=null;for(q=0;q<v.length;q++){var E=p.getPoint(z,q);if(0===q)D=E;else if(x.x===E.x&&x.y===E.y)continue;x=E;q===v.length-1&&D.x===E.x&&D.y===E.y||B.push(E)}A.updateIntArray([1397116793,B.length]);for(q=0;q<B.length;q++)E=B[q],A.updateIntArray([3962308117,
q]),w(E,A,C),A.updateIntArray([2716288009]);A.updateIntArray([2278822459])}A.updateIntArray([3878477243]);w(p.spatialReference.wkid,A,C)}else if(p instanceof k){A.updateIntArray([4106883559]);for(z=0;z<p.paths.length;z++){v=p.paths[z];A.updateIntArray([1397116793,v.length]);for(q=0;q<v.length;q++)A.updateIntArray([3962308117,q]),w(p.getPoint(z,q),A,C),A.updateIntArray([2716288009]);A.updateIntArray([2278822459])}A.updateIntArray([2568784753]);w(p.spatialReference.wkid,A,C)}else if(p instanceof g){A.updateIntArray([588535921,
p.points.length]);for(q=0;q<p.points.length;q++)z=p.getPoint(q),A.updateIntArray([q]),w(z,A,C);A.updateIntArray([1700171621]);w(p.spatialReference.wkid,A,C)}else if(p instanceof c)A.updateIntArray([3483648373]),A.updateIntArray([0]),A.updateFloatArray([p.xmax]),A.updateIntArray([1]),A.updateFloatArray([p.xmin]),A.updateIntArray([2]),A.updateFloatArray([p.ymax]),A.updateIntArray([3]),A.updateFloatArray([p.ymin]),A.updateIntArray([3622027469]),w(p.spatialReference.wkid,A,C);else if(p instanceof m)A.updateIntArray([14]),
void 0!==p.wkid&&null!==p.wkid&&A.updateIntArray([p.wkid]),p.wkt&&A.updateWithString(p.wkt);else{if(l.isFunctionParameter(p))throw Error("Type not supported in Hash");if(l.isFeatureSet(p))throw Error("Type not supported in Hash");l.isFeatureSetCollection(p);throw Error("Type not supported in Hash");}}}}Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=void 0;y.registerFunctions=function(p,A){p.portal=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,1,1);return new n(l.toString(B[0]))})};
p.trim=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,1,1);return l.toString(B[0]).trim()})};p.tohex=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,1,1);q=l.toNumber(B[0]);return isNaN(q)?q:q.toString(16)})};p.upper=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,1,1);return l.toString(B[0]).toUpperCase()})};p.proper=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,1,2);q=1;2===B.length&&"firstword"===l.toString(B[1]).toLowerCase()&&(q=2);v=/\s/;B=l.toString(B[0]);for(var D=
"",x=!0,E=0;E<B.length;E++){var G=B[E];v.test(G)?1===q&&(x=!0):G.toUpperCase()!==G.toLowerCase()&&(x?(G=G.toUpperCase(),x=!1):G=G.toLowerCase());D+=G}return D})};p.lower=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,1,1);return l.toString(B[0]).toLowerCase()})};p.guid=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,0,1);if(0<B.length)switch(l.toString(B[0]).toLowerCase()){case "digits":return l.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return l.generateUUID();
case "digits-hyphen-parentheses":return"("+l.generateUUID()+")"}return"{"+l.generateUUID()+"}"})};p.console=function(C,z){return A(C,z,function(q,v,B){0!==B.length&&(1===B.length?C.console(l.toString(B[0])):C.console(l.toString(B)));return l.voidOperation})};p.mid=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,2,3);q=l.toNumber(B[1]);if(isNaN(q))return"";0>q&&(q=0);if(2===B.length)return l.toString(B[0]).substr(q);v=l.toNumber(B[2]);if(isNaN(v))return"";0>v&&(v=0);return l.toString(B[0]).substr(q,
v)})};p.find=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,2,3);q=0;if(2<B.length){q=l.toNumber(l.defaultUndefined(B[2],0));if(isNaN(q))return-1;0>q&&(q=0)}return l.toString(B[1]).indexOf(l.toString(B[0]),q)})};p.left=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,2,2);q=l.toNumber(B[1]);if(isNaN(q))return"";0>q&&(q=0);return l.toString(B[0]).substr(0,q)})};p.right=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,2,2);q=l.toNumber(B[1]);if(isNaN(q))return"";0>q&&(q=0);return l.toString(B[0]).substr(-1*
q,q)})};p.split=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,2,4);q=l.toNumber(l.defaultUndefined(B[2],-1));v=l.toBoolean(l.defaultUndefined(B[3],!1));-1===q||null===q||!0===v?B=l.toString(B[0]).split(l.toString(B[1])):(isNaN(q)&&(q=-1),-1>q&&(q=-1),B=l.toString(B[0]).split(l.toString(B[1]),q));if(!1===v)return B;v=[];for(var D=0;D<B.length&&!(-1!==q&&v.length>=q);D++)""!==B[D]&&void 0!==B[D]&&v.push(B[D]);return v})};p.text=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,1,2);return l.toStringExplicit(B[0],
B[1])})};p.concatenate=function(C,z){return A(C,z,function(q,v,B){q=[];if(1>B.length)return"";if(l.isArray(B[0])){v=l.defaultUndefined(B[2],"");for(var D=0;D<B[0].length;D++)q[D]=l.toStringExplicit(B[0][D],v);return 1<B.length?q.join(B[1]):q.join("")}if(l.isImmutableArray(B[0])){v=l.defaultUndefined(B[2],"");for(D=0;D<B[0].length();D++)q[D]=l.toStringExplicit(B[0].get(D),v);return 1<B.length?q.join(B[1]):q.join("")}for(D=0;D<B.length;D++)q[D]=l.toStringExplicit(B[D]);return q.join("")})};p.reverse=
function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,1,1);if(l.isArray(B[0]))return q=B[0].slice(0),q.reverse(),q;if(l.isImmutableArray(B[0]))return q=B[0].toArray().slice(0),q.reverse(),q;throw Error("Invalid Parameter");})};p.replace=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,3,4);q=l.toString(B[0]);v=l.toString(B[1]);var D=l.toString(B[2]);return(4===B.length?l.toBoolean(B[3]):1)?l.multiReplace(q,v,D):q.replace(v,D)})};p.schema=function(C,z){return A(C,z,function(q,v,B){if(l.isFeature(B[0]))return(q=
l.featureSchema(B[0]))?r.convertObjectToArcadeDictionary(q):null;throw Error("Invalid Parameter");})};p.subtypes=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,1,1);if(l.isFeature(B[0]))return(q=l.featureSubtypes(B[0]))?r.convertObjectToArcadeDictionary(q):null;throw Error("Invalid Parameter");})};p.subtypecode=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,1,1);if(l.isFeature(B[0])){v=l.featureSubtypes(B[0]);if(!v)return null;if(v.subtypeField&&B[0].hasField(v.subtypeField))for(B=
B[0].field(v.subtypeField),q=0,v=v.subtypes;q<v.length;q++){var D=v[q];if(D.code===B)return D.code}return null}throw Error("Invalid Parameter");})};p.subtypename=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,1,1);if(l.isFeature(B[0])){v=l.featureSubtypes(B[0]);if(!v)return"";if(v.subtypeField&&B[0].hasField(v.subtypeField))for(B=B[0].field(v.subtypeField),q=0,v=v.subtypes;q<v.length;q++){var D=v[q];if(D.code===B)return D.name}return""}throw Error("Invalid Parameter");})};p.gdbversion=function(C,
z){return A(C,z,function(q,v,B){l.pcCheck(B,1,1);if(l.isFeature(B[0]))return B[0].gdbVersion();throw Error("Invalid Parameter");})};p.domain=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,2,3);if(l.isFeature(B[0]))return(q=l.featureFullDomain(B[0],l.toString(B[1]),void 0===B[2]?void 0:l.toNumber(B[2])))&&q.domain?"coded-value"===q.domain.type||"codedValue"===q.domain.type?r.convertObjectToArcadeDictionary({type:"codedValue",name:q.domain.name,dataType:d.layerFieldEsriConstants[q.field.type],
codedValues:q.domain.codedValues.map(function(D){return{name:D.name,code:D.code}})}):r.convertObjectToArcadeDictionary({type:"range",name:q.domain.name,dataType:d.layerFieldEsriConstants[q.field.type],min:q.domain.min,max:q.domain.max}):null;throw Error("Invalid Parameter");})};p.domainname=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,2,4);if(l.isFeature(B[0]))return l.featureDomainValueLookup(B[0],l.toString(B[1]),B[2],void 0===B[3]?void 0:l.toNumber(B[3]));throw Error("Invalid Parameter");
})};p.domaincode=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,2,4);if(l.isFeature(B[0]))return l.featureDomainCodeLookup(B[0],l.toString(B[1]),B[2],void 0===B[3]?void 0:l.toNumber(B[3]));throw Error("Invalid Parameter");})};p.urlencode=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,1,1);if(null===B[0])return"";if(B[0]instanceof r){q="";v=0;for(var D=B[0].keys();v<D.length;v++){var x=D[v],E=B[0].field(x);""!==q&&(q+="\x26");q=null===E?q+(encodeURIComponent(x)+"\x3d"):q+(encodeURIComponent(x)+
"\x3d"+encodeURIComponent(E))}return q}return encodeURIComponent(l.toString(B[0]))})};p.hash=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,1,1);q=new b.XXH(0);w(B[0],q,{map:new Map,currentLength:0});return q.digest()})};p.convertdirection=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,3,3);return f.convertDirection(B[0],B[1],B[2])})};p.fromjson=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,1,1);if(!1===l.isString(B[0]))throw Error("Invalid Parameter");return r.convertJsonToArcade(JSON.parse(l.toString(B[0])))})};
p.expects=function(C,z){return A(C,z,function(q,v,B){if(1>B.length)throw Error("Function called with wrong number of Parameters");return l.voidOperation})};p.tocharcode=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,1,2);q=l.toNumber(l.defaultUndefined(B[1],0));v=l.toString(B[0]);if(0===v.length&&1===B.length)return null;if(v.length<=q||0>q)throw Error("Illegal argument");return v.charCodeAt(q)})};p.tocodepoint=function(C,z){return A(C,z,function(q,v,B){l.pcCheck(B,1,2);q=l.toNumber(l.defaultUndefined(B[1],
0));v=l.toString(B[0]);if(0===v.length&&1===B.length)return null;if(v.length<=q||0>q)throw Error("Illegal argument");return v.codePointAt(q)})};p.fromcharcode=function(C,z){return A(C,z,function(q,v,B){if(1>B.length)throw Error("Function called with wrong number of Parameters");q=B.map(function(D){return Math.trunc(l.toNumber(D))}).filter(function(D){return 0<=D&&65535>=D});return 0===q.length?null:String.fromCharCode.apply(null,q)})};p.fromcodepoint=function(C,z){return A(C,z,function(q,v,B){if(1>
B.length)throw Error("Function called with wrong number of Parameters");try{var D=B.map(function(x){return Math.trunc(l.toNumber(x))}).filter(function(x){return 1114111>=x&&x>>>0===x})}catch(x){return null}return 0===D.length?null:String.fromCodePoint.apply(null,D)})}}})},"esri/arcade/functions/convertdirection":function(){define(["require","exports","../Dictionary","../languageUtils"],function(F,y,a,u){function n(ja){if(!1===u.isString(ja))throw Error("Invalid Parameter");return ja}function t(ja,
ua){ua=Math.pow(10,ua);return Math.round(ja*ua)/ua}function r(ja){ja=+ja;return isFinite(ja)?ja-ja%1||(0>ja?-0:0===ja?ja:0):ja}function l(ja){var ua=parseFloat(ja.toString().replace(r(ja).toString(),"0"))*((0<ja)-(0>ja)||+ja);return 0>ja?{fraction:ua,integer:Math.ceil(ja)}:{fraction:ua,integer:Math.floor(ja)}}function d(ja,ua){switch(ja){case 0:return"SHORT"===ua?"N":"North";case 1:return"SHORT"===ua?"E":"East";case 2:return"SHORT"===ua?"S":"South";case 3:return"SHORT"===ua?"W":"West"}}function f(ja,
ua,Ba){for(;ja.length<Ba;)ja=ua+ja;return ja}function b(ja,ua){return ja-Math.floor(ja/ua)*ua}function c(ja){switch(ja){case 6:case 1:return 360;case 4:return E;case 5:return 400;case 2:return 1296E3;case 7:return 60;case 8:return 60;default:throw Error("Unnexpected evaluations");}}function g(ja){switch(ja.toUpperCase().trim()){case "NORTH":case "NORTHAZIMUTH":case "NORTH AZIMUTH":return 1;case "POLAR":return 2;case "QUADRANT":return 3;case "SOUTH":case "SOUTHAZIMUTH":case "SOUTH AZIMUTH":return 4}throw Error("Unsupported direction type");
}function e(ja){switch(ja.toUpperCase().trim()){case "D":case "DD":case "DECIMALDEGREE":case "DECIMAL DEGREE":case "DEGREE":case "DECIMALDEGREES":case "DECIMAL DEGREES":case "DEGREES":return 1;case "DMS":case "DEGREESMINUTESSECONDS":case "DEGREES MINUTES SECONDS":return 3;case "R":case "RAD":case "RADS":case "RADIAN":case "RADIANS":return 4;case "G":case "GON":case "GONS":case "GRAD":case "GRADS":case "GRADIAN":case "GRADIANS":return 5}throw Error("Unsupported units");}function h(ja,ua,Ba){var M=
null;switch(ua){case 1:M=y.preciseMultiply(ja,3600);break;case 2:M=ja;break;case 5:M=y.preciseMultiply(ja,3240);break;case 4:M=y.preciseMultiply(ja,G);break;default:throw Error("Unnexpected evaluation");}switch(Ba){case 1:return y.preciseDivide(M,3600);case 2:return M;case 5:return y.preciseDivide(M,3240);case 4:return M/G;default:throw Error("Unnexpected evaluation");}}function k(ja){switch(ja){case 1:case 6:case 3:return 1;case 5:return 5;case 7:return 7;case 4:return 4;case 2:case 8:return 2}}
function m(ja){switch(u.toNumber(ja)){case 1:return{first:0,second:1};case 2:return{first:2,second:1};case 3:return{first:2,second:3};case 4:return{first:0,second:3}}return null}function w(ja){switch(ja.toUpperCase().trim()){case "N":case "NORTH":return 0;case "E":case "EAST":return 1;case "S":case "SOUTH":return 2;case "W":case "WEST":return 3}return null}function p(ja){ja=parseFloat(ja);if(u.isNumber(ja)){if(isNaN(ja))throw Error("Invalid conversion");return ja}throw Error("Invalid conversion");
}function A(ja,ua,Ba){var M=3===Ba,Z=null,ia=null,qa=0,ya=0;ya=0;if(M){if(2>ja.length)throw Error("Conversion Error");ya=1;(ia=m(u.toString(ja[ja.length-1])))?(Z=ia.first,ia=ia.second):(qa=1,Z=w(u.toString(ja[0])),ia=w(u.toString(ja[ja.length-1])));if(null===Z||null===ia)throw Error("Invalid Conversion");}switch(ua){case 1:case 4:case 5:if(0===ja.length)throw Error("Invalid Conversion");return M?ka.createFromAngleMeridianAndDirection(ma.createFromAngleAndUnits(p(ja[qa]),k(ua)),Z,ia):ka.createFromAngleAndDirection(ma.createFromAngleAndUnits(p(ja[qa]),
k(ua)),Ba);case 3:ya=ja.length-ya-qa;if(3===ya)return ja=ma.createFromDegreesMinutesSeconds(p(ja[qa]),p(ja[qa+1]),p(ja[qa+2])),M?ka.createFromAngleMeridianAndDirection(ja,Z,ia):ka.createFromAngleAndDirection(ja,Ba);if(1===ya)return ja=p(ja[qa]),ja=sa.numberToDms(ja),ja=ma.createFromDegreesMinutesSeconds(ja.m_degrees,ja.m_minutes,ja.m_seconds),M?ka.createFromAngleMeridianAndDirection(ja,Z,ia):ka.createFromAngleAndDirection(ja,Ba)}throw Error("Conversion Error");}function C(ja){for(var ua=[" ","-",
"/","'",'"',"\\","^","\u00b0",I,"\t","\r","\n","*"],Ba="",M=0;M<ja.length;M++){var Z=ja.charAt(M);Ba=ua.includes(Z)?Ba+"RRSPLITRRSPLITRR":Ba+Z}return Ba.split("RRSPLITRRSPLITRR").filter(function(ia){return""!==ia})}function z(ja,ua,Ba){for(var M={padding:0,rounding:0,newpos:ua},Z=!1;ua<ja.length;){var ia=ja[ua];if(ia===Ba)Z?M.rounding++:M.padding++,ua++;else if("."===ia)Z=!0,ua++;else break}M.newpos=ua-1;return M}Object.defineProperty(y,"__esModule",{value:!0});y.convertDirection=y.preciseDivide=
y.preciseMultiply=y.preciseMinus=y.preciseAdd=void 0;var q=function(ja){return function(ua,Ba,M){M=M||14;return+ja(ua,Ba).toFixed(M)}},v=function(ja,ua){return ja+ua},B=function(ja,ua){return ja-ua},D=function(ja,ua){return ja*ua},x=function(ja,ua){return ja/ua};y.preciseAdd=function(ja,ua,Ba){return q(v)(ja,ua,Ba)};y.preciseMinus=function(ja,ua,Ba){return q(B)(ja,ua,Ba)};y.preciseMultiply=function(ja,ua,Ba){return q(D)(ja,ua,Ba)};y.preciseDivide=function(ja,ua,Ba){return q(x)(ja,ua,Ba)};var E=2*
Math.PI,G=648E3/Math.PI,I=String.fromCharCode(7501),L;(function(ja){ja[ja.north=0]="north";ja[ja.east=1]="east";ja[ja.south=2]="south";ja[ja.west=3]="west"})(L||(L={}));var Y;(function(ja){ja[ja.decimal_degrees=1]="decimal_degrees";ja[ja.seconds=2]="seconds";ja[ja.degrees_minutes_seconds=3]="degrees_minutes_seconds";ja[ja.radians=4]="radians";ja[ja.gradians=5]="gradians";ja[ja.truncated_degrees=6]="truncated_degrees";ja[ja.fractional_degree_minutes=7]="fractional_degree_minutes";ja[ja.fractional_minute_seconds=
8]="fractional_minute_seconds"})(Y||(Y={}));var X;(function(ja){ja[ja.north_azimuth=1]="north_azimuth";ja[ja.polar=2]="polar";ja[ja.quadrant=3]="quadrant";ja[ja.south_azimuth=4]="south_azimuth"})(X||(X={}));var fa;(function(ja){ja[ja.meridian=0]="meridian";ja[ja.direction=1]="direction"})(fa||(fa={}));var sa=function(){function ja(ua,Ba,M){this.m_degrees=ua;this.m_minutes=Ba;this.m_seconds=M}ja.prototype.getField=function(ua){switch(ua){case 1:case 6:return this.m_degrees;case 7:return this.m_minutes;
case 2:case 8:return this.m_seconds;default:throw Error("Unnexpected evaluation");}};ja.secondsToDMS=function(ua){var Ba=l(ua).fraction;ua=l(ua).integer;var M=Math.floor(ua/3600);ua-=3600*M;var Z=Math.floor(ua/60);return new ja(M,Z,ua-60*Z+Ba)};ja.numberToDms=function(ua){var Ba=l(ua).fraction;ua=l(ua).integer;var M=y.preciseMultiply(l(100*Ba).fraction,100);Ba=l(100*Ba).integer;return new ja(ua,Ba,M)};ja.prototype.format=function(ua,Ba){Ba=t(this.m_seconds,Ba);var M=this.m_minutes,Z=this.m_degrees;
if(2===ua||8===ua)60<=Ba&&(Ba-=60,++M),60<=M&&(M=0,++Z),360<=Z&&(Z=0);else if(7===ua)Ba=0,M=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,Z=this.m_degrees,60<=M&&(M=0,++Z),360<=Z&&(Z=0);else if(1===ua||6===ua)ua=y.preciseDivide(this.m_seconds,3600),Ba=y.preciseDivide(this.m_minutes,60),Z=Math.round(this.m_degrees+Ba+ua),Ba=M=0;return new ja(Z,M,Ba)};ja.dmsToSeconds=function(ua,Ba,M){return 3600*ua+60*Ba+M};return ja}(),T=function(){function ja(ua,Ba,M){this.meridian=ua;this.angle=Ba;this.direction=
M}ja.prototype.fetchAzimuth=function(ua){return ua===fa.meridian?this.meridian:this.direction};return ja}(),ka=function(){function ja(ua){this.m_angle=ua}ja.createFromAngleAndDirection=function(ua,Ba){return new ja(new ma(ja._convertDirectionFormat(ua.extractAngularUnits(2),Ba,1)))};ja.prototype.getAngle=function(ua){var Ba=this.m_angle.extractAngularUnits(2);switch(ua){case 1:case 4:case 2:return ua=new ma(ja._convertDirectionFormat(Ba,1,ua));case 3:return ua=ja.secondsNorthAzimuthToQuadrant(Ba),
ua=new ma(ua.angle)}};ja.prototype.getMeridian=function(ua){var Ba=this.m_angle.extractAngularUnits(2);switch(ua){case 1:return 0;case 4:return 2;case 2:return 1;case 3:return ja.secondsNorthAzimuthToQuadrant(Ba).meridian}};ja.prototype.getDirection=function(ua){var Ba=this.m_angle.extractAngularUnits(2);switch(ua){case 1:return 1;case 4:return 3;case 2:return 0;case 3:return ja.secondsNorthAzimuthToQuadrant(Ba).direction}};ja.secondsNorthAzimuthToQuadrant=function(ua){var Ba=324E3>=ua||972E3<=ua?
0:2;return new T(Ba,0===Ba?Math.min(1296E3-ua,ua):Math.abs(ua-648E3),648E3<ua?3:1)};ja.createFromAngleMeridianAndDirection=function(ua,Ba,M){return new ja(new ma(ja.secondsQuadrantToNorthAzimuth(ua.extractAngularUnits(2),Ba,M)))};ja.secondsQuadrantToNorthAzimuth=function(ua,Ba,M){return 0===Ba?1===M?ua:1296E3-ua:1===M?648E3-ua:648E3+ua};ja._convertDirectionFormat=function(ua,Ba,M){var Z=0;switch(Ba){case 1:Z=ua;break;case 2:Z=324E3-ua;break;case 3:throw Error("Unnexpected evaluation");case 4:Z=ua+
648E3}ua=0;switch(M){case 1:ua=Z;break;case 2:ua=324E3-Z;break;case 3:throw Error("Unnexpected evaluation");case 4:ua=Z-648E3}ua%=1296E3;return 0>ua?1296E3+ua:ua};return ja}(),ma=function(){function ja(ua){this.m_seconds=ua}ja.createFromAngleAndUnits=function(ua,Ba){return new ja(h(ua,Ba,2))};ja.prototype.extractAngularUnits=function(ua){return h(this.m_seconds,2,k(ua))};ja.createFromDegreesMinutesSeconds=function(ua,Ba,M){return new ja(y.preciseAdd(y.preciseAdd(y.preciseMultiply(ua,3600),y.preciseMultiply(Ba,
60)),M))};return ja}(),wa=function(){function ja(ua,Ba,M,Z){this.m_view=ua;this.m_angle=Ba;this.m_merdian=M;this.m_direction=Z;this.m_formatted_dms=this.m_dms=null}ja.createFromStringAndBearing=function(ua,Ba,M){return new ja(ua,Ba.getAngle(M),Ba.getMeridian(M),Ba.getDirection(M))};ja.prototype.fetchAngle=function(){return this.m_angle};ja.prototype.fetchMeridian=function(){return this.m_merdian};ja.prototype.fetchDirection=function(){return this.m_direction};ja.prototype.fetchView=function(){return this.m_view};
ja.prototype.fetchDms=function(){null===this.m_dms&&this._calculateDms();return this.m_dms};ja.prototype.fetchFormattedDms=function(){null===this.m_formatted_dms&&this._calculateDms();return this.m_formatted_dms};ja.prototype._calculateDms=function(){var ua=null,Ba=6,M=0;for(ua=0;ua<this.m_view.length;ua++){var Z=this.m_view[ua];switch(Z){case "m":ua=z(this.m_view,ua,Z);Ba=6===Ba?7:Ba;ua=ua.newpos;continue;case "s":ua=z(this.m_view,ua,Z),Ba=8,M=M<ua.rounding?ua.rounding:M,ua=ua.newpos}}this.m_dms=
sa.secondsToDMS(this.m_angle.extractAngularUnits(2));this.m_formatted_dms=sa.secondsToDMS(this.m_angle.extractAngularUnits(2)).format(Ba,M)};return ja}();y.convertDirection=function(ja,ua,Ba){if(!(ua instanceof a))throw Error("Invalid Parameter");if(!1===ua.hasField("directionType"))throw Error("Invalid Parameter - Missing directionType");if(!1===ua.hasField("angleType"))throw Error("Invalid Parameter - Missing directionType");var M=g(n(ua.field("directiontype")));ua=e(n(ua.field("angletype")));if(u.isNumber(ja)){ja=
u.toNumber(ja);if(3===M)throw Error("Conversion error");3===ua?(ja=sa.numberToDms(ja),ua=ka.createFromAngleAndDirection(ma.createFromDegreesMinutesSeconds(ja.m_degrees,ja.m_minutes,ja.m_seconds),M)):ua=ka.createFromAngleAndDirection(ma.createFromAngleAndUnits(ja,k(ua)),M)}else if(u.isString(ja))ua=A(C(ja),ua,M);else if(u.isArray(ja))ua=A(ja,ua,M);else if(u.isImmutableArray(ja))ua=A(ja.toArray(),ua,M);else throw Error("Conversion Error");if(!(Ba instanceof a))throw Error("Invalid Parameter");if(!1===
Ba.hasField("directionType"))throw Error("Invalid Parameter - Missing directionType");if(!1===Ba.hasField("outputType"))throw Error("Invalid Parameter - Missing directionType");M=g(n(Ba.field("directiontype")));ja=Ba.hasField("angleType")?e(n(Ba.field("angletype"))):null;var Z=n(Ba.field("outputType")).toUpperCase().trim();if(!M||!Z)throw Error("Conversion error");if(!(ja||"TEXT"===Z&&Ba.hasField("format")))throw Error("Invalid unit");switch(Z){case "VALUE":if(3===M||3===ja)return Ba=ua,ua=Ba.getAngle(M),
3===M&&3===ja?(ja=sa.secondsToDMS(ua.extractAngularUnits(2)),M=[d(Ba.getMeridian(M),"SHORT"),ja.m_degrees,ja.m_minutes,ja.m_seconds,d(Ba.getDirection(M),"SHORT")]):3===ja?(ja=sa.secondsToDMS(ua.extractAngularUnits(2)),M=[ja.m_degrees,ja.m_minutes,ja.m_seconds]):M=3===M?[d(Ba.getMeridian(M),"SHORT"),ua.extractAngularUnits(ja),d(Ba.getDirection(M),"SHORT")]:[ua.extractAngularUnits(ja)],M;Ba=ua;if((ua=k(ja))&&3!==ja)M=Ba.getAngle(M).extractAngularUnits(ua);else throw Error("Conversion Error");return M;
case "TEXT":Z="";Ba.hasField("format")&&(Z=u.toString(Ba.field("format")));if(null===Z||""===Z){Ba="";switch(ja){case 1:Ba=3===M?"DD.DD\u00b0":"DDD.DD\u00b0";break;case 3:Ba=3===M?"dd\u00b0 mm' ss\"":"ddd\u00b0 mm' ss.ss\"";break;case 4:Ba="R.RR";break;case 5:Ba="GGG.GG"+I;break;default:throw Error("Conversion error");}3===M&&(Ba="p "+Ba+" b");Z=Ba}Ba=ua;ja=Z;var ia="",qa=null,ya=null;ua=wa.createFromStringAndBearing(ja,Ba,M);Z={D:1,d:6,m:7,s:8,R:4,G:5};for(ya=0;ya<ja.length;ya++){var Ca=ja[ya];switch(Ca){case "[":qa=
ja;Ca={escaped:"",newpos:ya};for(ya++;ya<qa.length;){var Ia=qa[ya];ya++;if("]"===Ia)break;Ca.escaped+=Ia}Ca.newpos=ya-1;qa=Ca;ia+=qa.escaped;ya=qa.newpos;continue;case "D":case "d":case "m":case "s":case "R":case "G":qa=z(ja,ya,Ca);ya=Ba.getAngle(M);a:{Ca=Z[Ca];Ia=qa.padding;var Oa=qa.rounding,la=ua,N=null;switch(Ca){case 1:case 4:case 5:N=b(t(ya.extractAngularUnits(Ca),Oa),c(Ca));ya=f(N.toFixed(Oa),"0",Ia+Oa+(0<Oa?1:0));break a;case 6:case 7:N=b(la.fetchFormattedDms().getField(Ca),c(Ca));ya=f(N.toFixed(Oa),
"0",Ia+Oa+(0<Oa?1:0));break a;case 8:N=b(t(la.fetchDms().getField(Ca),Oa),c(Ca));ya=f(N.toFixed(Oa),"0",Ia+Oa+(0<Oa?1:0));break a;default:throw Error("Unnexepected evaluation");}}ia+=ya;ya=qa.newpos;continue;case "P":case "p":ia+=d(ua.fetchMeridian(),"p"===Ca?"SHORT":"LONG");continue;case "B":case "b":ia+=d(ua.fetchDirection(),"b"===Ca?"SHORT":"LONG");continue;default:ia+=Ca}}return ia;default:throw Error("Invalid Parameter");}}})},"esri/arcade/functions/hash":function(){define(["require","exports"],
function(F,y){function a(u){for(var n=[],t=0,r=u.length;t<r;t++){var l=u.charCodeAt(t);128>l?n.push(l):2048>l?n.push(192|l>>6,128|l&63):55296>l||57344<=l?n.push(224|l>>12,128|l>>6&63,128|l&63):(t++,l=65536+((l&1023)<<10|u.charCodeAt(t)&1023),n.push(240|l>>18,128|l>>12&63,128|l>>6&63,128|l&63))}return new Uint8Array(n)}Object.defineProperty(y,"__esModule",{value:!0});y.XXH=void 0;F=function(){function u(n){this.seed=n;this.totallen=0;this.bufs=[];this.init()}u.prototype.init=function(){this.bufs=[];
this.totallen=0;return this};u.prototype.updateFloatArray=function(n){for(var t=[],r=0;r<n.length;r++){var l=n[r];isNaN(l)?t.push("NaN"):Infinity===l?t.push("Infinity"):-Infinity===l?t.push("-Infinity"):0===l?t.push("0"):t.push(l.toString(16))}this.update(a(t.join("")))};u.prototype.updateIntArray=function(n){n=Int32Array.from(n);this.update(new Uint8Array(n.buffer))};u.prototype.updateUint8Array=function(n){this.update(Uint8Array.from(n))};u.prototype.updateWithString=function(n){return this.update(a(n))};
u.prototype.update=function(n){this.bufs.push(n);this.totallen+=n.length;return this};u.prototype.digest=function(){for(var n=new Uint8Array(this.totallen),t=0,r=0,l=this.bufs;r<l.length;r++){var d=l[r];n.set(d,t);t+=d.length}this.init();return this._xxHash32(n,this.seed)};u.prototype._xxHash32=function(n,t){void 0===t&&(t=0);var r=t+374761393&4294967295,l=0;if(16<=n.length){r=[t+2654435761+2246822519&4294967295,t+2246822519&4294967295,t+0&4294967295,t-2654435761&4294967295];var d=n.length-16;for(l=
t=0;(l&4294967280)<=d;l+=4){var f=l,b=n[f+0]+(n[f+1]<<8);f=n[f+2]+(n[f+3]<<8);b=r[t]+(2246822519*b+(2246822519*f<<16))&4294967295;b=b<<13|b>>>19;r[t]=2654435761*(b&65535)+(2654435761*(b>>>16)<<16)&4294967295;t=t+1&3}r=(r[0]<<1|r[0]>>>31)+(r[1]<<7|r[1]>>>25)+(r[2]<<12|r[2]>>>20)+(r[3]<<18|r[3]>>>14)&4294967295}r=r+n.length&4294967295;for(t=n.length-4;l<=t;l+=4)f=l,b=n[f+0]+(n[f+1]<<8),f=n[f+2]+(n[f+3]<<8),r=r+(3266489917*b+(3266489917*f<<16))&4294967295,r=r<<17|r>>>15,r=668265263*(r&65535)+(668265263*
(r>>>16)<<16)&4294967295;for(;l<n.length;++l)t=n[l],r+=374761393*t,r=r<<11|r>>>21,r=2654435761*(r&65535)+(2654435761*(r>>>16)<<16)&4294967295;r^=r>>>15;r=(2246822519*(r&65535)&4294967295)+(2246822519*(r>>>16)<<16);r^=r>>>13;r=(3266489917*(r&65535)&4294967295)+(3266489917*(r>>>16)<<16);r^=r>>>16;return 0>r?r+4294967296:r};return u}();y.XXH=F})},"esri/arcade/arcadeRuntime":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./ArcadePortal ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m,w,p,A,C,z,q,v,B,D,x,E,G){function I(ca,ea){for(var oa=[],ta=0;ta<ea.arguments.length;ta++)oa.push(Y(ca,ea.arguments[ta]));return oa}function L(ca,ea,oa){try{return!0===ea.preparsed?oa(ca,null,ea.arguments):oa(ca,ea,I(ca,ea))}catch(ta){throw ta;}}function Y(ca,ea){try{switch(ea.type){case "EmptyStatement":return e.voidOperation;case "VariableDeclarator":var oa=null===ea.init?null:Y(ca,ea.init);oa===e.voidOperation&&(oa=null);if("Identifier"!==ea.id.type)throw Error("Can only assign a regular variable");
var ta=ea.id.name.toLowerCase();null!==ca.localScope?ca.localScope[ta]={value:oa,valueset:!0,node:ea.init}:ca.globalScope[ta]={value:oa,valueset:!0,node:ea.init};return e.voidOperation;case "VariableDeclaration":for(var O=0;O<ea.declarations.length;O++)Y(ca,ea.declarations[O]);return e.voidOperation;case "BlockStatement":a:{var V=e.voidOperation;for(O=0;O<ea.body.length;O++)if(V=Y(ca,ea.body[O]),V instanceof e.ReturnResult||V===e.breakResult||V===e.continueResult){var pa=V;break a}pa=V}return pa;
case "FunctionDeclaration":var za=ea.id.name.toLowerCase();ca.globalScope[za]={valueset:!0,node:null,value:new b(ea,ca)};return e.voidOperation;case "ReturnStatement":if(null===ea.argument)var Ja=new e.ReturnResult(e.voidOperation);else{var Qa=Y(ca,ea.argument);Ja=new e.ReturnResult(Qa)}return Ja;case "IfStatement":if("AssignmentExpression"===ea.test.type||"UpdateExpression"===ea.test.type)throw Error(h.nodeErrorMessage(ea.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var J=Y(ca,ea.test);
if(!0===J)var U=Y(ca,ea.consequent);else if(!1===J)U=null!==ea.alternate?Y(ca,ea.alternate):e.voidOperation;else throw Error(h.nodeErrorMessage(ea,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return U;case "ExpressionStatement":if("AssignmentExpression"===ea.expression.type||"UpdateExpression"===ea.expression.type)var ha=Y(ca,ea.expression);else{var K=Y(ca,ea.expression);ha=K===e.voidOperation?e.voidOperation:new e.ImplicitResult(K)}return ha;case "AssignmentExpression":var S=Y(ca,ea.right);O=
null;var ba="";if("MemberExpression"===ea.left.type){O=Y(ca,ea.left.object);!0===ea.left.computed?ba=Y(ca,ea.left.property):"Identifier"===ea.left.property.type&&(ba=ea.left.property.name);if(e.isArray(O))if(e.isNumber(ba)){0>ba&&(ba=O.length+ba);if(0>ba||ba>O.length)throw Error("Assignment outside of array bounds");if(ba===O.length&&"\x3d"!==ea.operator)throw Error("Invalid Parameter");O[ba]=fa(S,ea.operator,O[ba],ea)}else throw Error("Invalid Parameter");else if(O instanceof d){if(!1===e.isString(ba))throw Error("Dictionary accessor must be a string");
if(!0===O.hasField(ba))O.setField(ba,fa(S,ea.operator,O.field(ba),ea));else{if("\x3d"!==ea.operator)throw Error("Invalid Parameter");O.setField(ba,fa(S,ea.operator,null,ea))}}else if(e.isFeature(O)){if(!1===e.isString(ba))throw Error("Feature accessor must be a string");if(!0===O.hasField(ba))O.setField(ba,fa(S,ea.operator,O.field(ba),ea));else{if("\x3d"!==ea.operator)throw Error("Invalid Parameter");O.setField(ba,fa(S,ea.operator,null,ea))}}else{if(e.isImmutableArray(O))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}var ra=e.voidOperation}else if(O=ea.left.name.toLowerCase(),null!==ca.localScope&&void 0!==ca.localScope[O])ca.localScope[O]={value:fa(S,ea.operator,ca.localScope[O].value,ea),valueset:!0,node:ea.right},ra=e.voidOperation;else if(void 0!==ca.globalScope[O])ca.globalScope[O]={value:fa(S,ea.operator,ca.globalScope[O].value,ea),valueset:!0,node:ea.right},ra=e.voidOperation;else throw Error("Variable not recognised");return ra;case "UpdateExpression":O=null;ba="";if("MemberExpression"===
ea.argument.type){O=Y(ca,ea.argument.object);!0===ea.argument.computed?ba=Y(ca,ea.argument.property):"Identifier"===ea.argument.property.type&&(ba=ea.argument.property.name);if(e.isArray(O))if(e.isNumber(ba)){0>ba&&(ba=O.length+ba);if(0>ba||ba>=O.length)throw Error("Assignment outside of array bounds");var xa=e.toNumber(O[ba]);O[ba]="++"===ea.operator?xa+1:xa-1}else throw Error("Invalid Parameter");else if(O instanceof d){if(!1===e.isString(ba))throw Error("Dictionary accessor must be a string");
if(!0===O.hasField(ba))xa=e.toNumber(O.field(ba)),O.setField(ba,"++"===ea.operator?xa+1:xa-1);else throw Error("Invalid Parameter");}else if(e.isFeature(O)){if(!1===e.isString(ba))throw Error("Feature accessor must be a string");if(!0===O.hasField(ba))xa=e.toNumber(O.field(ba)),O.setField(ba,"++"===ea.operator?xa+1:xa-1);else throw Error("Invalid Parameter");}else{if(e.isImmutableArray(O))throw Error("Array is Immutable");throw Error("Invalid Parameter");}var La=!1===ea.prefix?xa:"++"===ea.operator?
xa+1:xa-1}else{O="Identifier"===ea.argument.type?ea.argument.name.toLowerCase():"";if(!O)throw Error("Invalid identifier");if(null!==ca.localScope&&void 0!==ca.localScope[O])xa=e.toNumber(ca.localScope[O].value),ca.localScope[O]={value:"++"===ea.operator?xa+1:xa-1,valueset:!0,node:ea},La=!1===ea.prefix?xa:"++"===ea.operator?xa+1:xa-1;else if(void 0!==ca.globalScope[O])xa=e.toNumber(ca.globalScope[O].value),ca.globalScope[O]={value:"++"===ea.operator?xa+1:xa-1,valueset:!0,node:ea},La=!1===ea.prefix?
xa:"++"===ea.operator?xa+1:xa-1;else throw Error("Variable not recognised");}return La;case "BreakStatement":return e.breakResult;case "ContinueStatement":return e.continueResult;case "TemplateElement":return ea.value?ea.value.cooked:"";case "TemplateLiteral":var Ha="",Va=0;ra=0;for(O=ea.quasis;ra<O.length;ra++)if(ba=O[ra],Ha+=ba.value?ba.value.cooked:"",!1===ba.tail){var Ta=ea.expressions[Va]?e.toString(Y(ca,ea.expressions[Va])):"";Ha+=Ta;Va++}return Ha;case "ForStatement":null!==ea.init&&Y(ca,ea.init);
Va={testResult:!0,lastAction:e.voidOperation};do b:{O=ca;ba=ea;Ta=Va;if(null!==ba.test){Ta.testResult=Y(O,ba.test);if(!1===Ta.testResult)break b;if(!0!==Ta.testResult)throw Error(h.nodeErrorMessage(ba,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}Ta.lastAction=Y(O,ba.body);Ta.lastAction===e.breakResult?Ta.testResult=!1:Ta.lastAction instanceof e.ReturnResult?Ta.testResult=!1:null!==ba.update&&Y(O,ba.update)}while(!0===Va.testResult);Ha=Va.lastAction instanceof e.ReturnResult?Va.lastAction:e.voidOperation;
return Ha;case "ForInStatement":return X(ca,ea);case "Identifier":return ja(ca,ea);case "MemberExpression":return T(ca,ea);case "Literal":return ea.value;case "CallExpression":return ua(ca,ea);case "UnaryExpression":return ka(ca,ea);case "BinaryExpression":return ma(ca,ea);case "LogicalExpression":return wa(ca,ea);case "ArrayExpression":try{for(O=[],ba=0;ba<ea.elements.length;ba++){var Pa=Y(ca,ea.elements[ba]);if(e.isFunctionParameter(Pa))throw Error(h.nodeErrorMessage(ea,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));
Pa===e.voidOperation?O.push(null):O.push(Pa)}}catch(Ya){throw Ya;}return O;case "ObjectExpression":O={};for(ba=0;ba<ea.properties.length;ba++){var Xa=Y(ca,ea.properties[ba]);if(e.isFunctionParameter(Xa.value))throw Error("Illegal Argument");if(!1===e.isString(Xa.key))throw Error("Illegal Argument");O[Xa.key.toString()]=Xa.value===e.voidOperation?null:Xa.value}var ab=new d(O);ab.immutable=!1;return ab;case "Property":return{key:"Identifier"===ea.key.type?ea.key.name:Y(ca,ea.key),value:Y(ca,ea.value)};
default:throw Error(h.nodeErrorMessage(ea,"RUNTIME","UNREOGNISED"));}}catch(Ya){throw Ya;}}function X(ca,ea){var oa=Y(ca,ea.right);"VariableDeclaration"===ea.left.type&&Y(ca,ea.left);var ta=null,O="";if("VariableDeclaration"===ea.left.type){var V=ea.left.declarations[0].id;"Identifier"===V.type&&(O=V.name)}else"Identifier"===ea.left.type&&(O=ea.left.name);if(!O)throw Error(h.nodeErrorMessage(ea,"RUNTIME","INVALIDVARIABLE"));O=O.toLowerCase();null!==ca.localScope&&void 0!==ca.localScope[O]&&(ta=ca.localScope[O]);
null===ta&&void 0!==ca.globalScope[O]&&(ta=ca.globalScope[O]);if(null===ta)throw Error(h.nodeErrorMessage(ea,"RUNTIME","VARIABLENOTDECLARED"));if(e.isArray(oa)||e.isString(oa)){oa=oa.length;for(V=0;V<oa;V++){ta.value=V;O=Y(ca,ea.body);if(O===e.breakResult)break;if(O instanceof e.ReturnResult)return O}return e.voidOperation}if(e.isImmutableArray(oa)){for(V=0;V<oa.length();V++){ta.value=V;O=Y(ca,ea.body);if(O===e.breakResult)break;if(O instanceof e.ReturnResult)return O}return e.voidOperation}if(oa instanceof
d||e.isFeature(oa))for(oa=oa.keys(),V=0;V<oa.length;V++){ta.value=oa[V];O=Y(ca,ea.body);if(O===e.breakResult)break;if(O instanceof e.ReturnResult)return O}else return e.voidOperation}function fa(ca,ea,oa,ta){switch(ea){case "\x3d":return ca===e.voidOperation?null:ca;case "/\x3d":return e.toNumber(oa)/e.toNumber(ca);case "*\x3d":return e.toNumber(oa)*e.toNumber(ca);case "-\x3d":return e.toNumber(oa)-e.toNumber(ca);case "+\x3d":return e.isString(oa)||e.isString(ca)?e.toString(oa)+e.toString(ca):e.toNumber(oa)+
e.toNumber(ca);case "%\x3d":return e.toNumber(oa)%e.toNumber(ca);default:throw Error(h.nodeErrorMessage(ta,"RUNTIME","OPERATORNOTRECOGNISED"));}}function sa(ca,ea,oa){ea=ea.toLowerCase();switch(ea){case "hasz":return ca=ca.hasZ,void 0===ca?!1:ca;case "hasm":return ca=ca.hasM,void 0===ca?!1:ca;case "spatialreference":return ea=ca.spatialReference._arcadeCacheId,void 0===ea&&(oa=!0,Object.freeze&&Object.isFrozen(ca.spatialReference)&&(oa=!1),oa&&(la++,ea=ca.spatialReference._arcadeCacheId=la)),ca=new d({wkt:ca.spatialReference.wkt,
wkid:ca.spatialReference.wkid}),void 0!==ea&&(ca._arcadeCacheId="SPREF"+ea.toString()),ca}switch(ca.type){case "extent":switch(ea){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return ca=ca[ea],void 0!==ca?ca:null;case "type":return"Extent"}break;case "polygon":switch(ea){case "rings":return ea=ca.getCacheValue("_arcadeCacheId"),void 0===ea&&(la++,ea=la,ca.setCacheValue("_arcadeCacheId",ea)),ca=new c(ca.rings,ca.spatialReference,!0===ca.hasZ,!0===
ca.hasM,ea);case "type":return"Polygon"}break;case "point":switch(ea){case "x":case "y":case "z":case "m":return void 0!==ca[ea]?ca[ea]:null;case "type":return"Point"}break;case "polyline":switch(ea){case "paths":return ea=ca.getCacheValue("_arcadeCacheId"),void 0===ea&&(la++,ea=la,ca.setCacheValue("_arcadeCacheId",ea)),ca=new c(ca.paths,ca.spatialReference,!0===ca.hasZ,!0===ca.hasM,ea);case "type":return"Polyline"}break;case "multipoint":switch(ea){case "points":return ea=ca.getCacheValue("_arcadeCacheId"),
void 0===ea&&(la++,ea=la,ca.setCacheValue("_arcadeCacheId",ea)),ca=new g(ca.points,ca.spatialReference,!0===ca.hasZ,!0===ca.hasM,ea,1);case "type":return"Multipoint"}}throw Error(h.nodeErrorMessage(oa,"RUNTIME","PROPERTYNOTFOUND"));}function T(ca,ea){try{var oa=Y(ca,ea.object);if(null===oa)throw Error(h.nodeErrorMessage(ea,"RUNTIME","NOTFOUND"));if(!1===ea.computed){if("Identifier"===ea.property.type){if(oa instanceof d||e.isFeature(oa))return oa.field(ea.property.name);if(oa instanceof v)return sa(oa,
ea.property.name,ea)}throw Error(h.nodeErrorMessage(ea,"RUNTIME","INVALIDTYPE"));}var ta=Y(ca,ea.property);if(oa instanceof d||e.isFeature(oa)){if(e.isString(ta))return oa.field(ta);throw Error(h.nodeErrorMessage(ea,"RUNTIME","INVALIDTYPE"));}if(oa instanceof v){if(e.isString(ta))return sa(oa,ta,ea);throw Error(h.nodeErrorMessage(ea,"RUNTIME","INVALIDTYPE"));}if(e.isArray(oa)){if(e.isNumber(ta)&&isFinite(ta)&&Math.floor(ta)===ta){0>ta&&(ta=oa.length+ta);if(ta>=oa.length||0>ta)throw Error(h.nodeErrorMessage(ea,
"RUNTIME","OUTOFBOUNDS"));return oa[ta]}throw Error(h.nodeErrorMessage(ea,"RUNTIME","INVALIDTYPE"));}if(e.isString(oa)){if(e.isNumber(ta)&&isFinite(ta)&&Math.floor(ta)===ta){0>ta&&(ta=oa.length+ta);if(ta>=oa.length||0>ta)throw Error(h.nodeErrorMessage(ea,"RUNTIME","OUTOFBOUNDS"));return oa[ta]}throw Error(h.nodeErrorMessage(ea,"RUNTIME","INVALIDTYPE"));}if(e.isImmutableArray(oa)&&e.isNumber(ta)&&isFinite(ta)&&Math.floor(ta)===ta){0>ta&&(ta=oa.length()+ta);if(ta>=oa.length()||0>ta)throw Error(h.nodeErrorMessage(ea,
"RUNTIME","OUTOFBOUNDS"));return oa.get(ta)}throw Error(h.nodeErrorMessage(ea,"RUNTIME","INVALIDTYPE"));}catch(O){throw O;}}function ka(ca,ea){try{var oa=Y(ca,ea.argument);if(e.isBoolean(oa)){if("!"===ea.operator)return!oa;if("-"===ea.operator)return-1*e.toNumber(oa);if("+"===ea.operator)return 1*e.toNumber(oa);if("~"===ea.operator)return~e.toNumber(oa);throw Error(h.nodeErrorMessage(ea,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("~"===ea.operator)return~e.toNumber(oa);if("-"===ea.operator)return-1*
e.toNumber(oa);if("+"===ea.operator)return 1*e.toNumber(oa);throw Error(h.nodeErrorMessage(ea,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(ta){throw ta;}}function ma(ca,ea){try{var oa=[Y(ca,ea.left),Y(ca,ea.right)],ta=oa[0],O=oa[1];switch(ea.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return e.binaryOperator(e.toNumber(ta),e.toNumber(O),ea.operator);case "\x3d\x3d":return e.equalityTest(ta,O);case "!\x3d":return!e.equalityTest(ta,O);case "\x3c":return e.greaterThanLessThan(ta,
O,ea.operator);case "\x3e":return e.greaterThanLessThan(ta,O,ea.operator);case "\x3c\x3d":return e.greaterThanLessThan(ta,O,ea.operator);case "\x3e\x3d":return e.greaterThanLessThan(ta,O,ea.operator);case "+":return e.isString(ta)||e.isString(O)?e.toString(ta)+e.toString(O):e.toNumber(ta)+e.toNumber(O);case "-":return e.toNumber(ta)-e.toNumber(O);case "*":return e.toNumber(ta)*e.toNumber(O);case "/":return e.toNumber(ta)/e.toNumber(O);case "%":return e.toNumber(ta)%e.toNumber(O);default:throw Error(h.nodeErrorMessage(ea,
"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(V){throw V;}}function wa(ca,ea){try{if("AssignmentExpression"===ea.left.type||"UpdateExpression"===ea.left.type)throw Error(h.nodeErrorMessage(ea.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===ea.right.type||"UpdateExpression"===ea.right.type)throw Error(h.nodeErrorMessage(ea.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var oa=Y(ca,ea.left);if(e.isBoolean(oa))switch(ea.operator){case "||":if(!0===oa)return oa;
var ta=Y(ca,ea.right);if(e.isBoolean(ta))return ta;throw Error(h.nodeErrorMessage(ea,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===oa)return oa;ta=Y(ca,ea.right);if(e.isBoolean(ta))return ta;throw Error(h.nodeErrorMessage(ea,"RUNTIME","ONLYORORAND"));default:throw Error(h.nodeErrorMessage(ea,"RUNTIME","ONLYORORAND"));}throw Error(h.nodeErrorMessage(ea,"RUNTIME","ONLYBOOLEAN"));}catch(O){throw O;}}function ja(ca,ea){try{var oa=ea.name.toLowerCase();if(null!==ca.localScope&&void 0!==ca.localScope[oa]){var ta=
ca.localScope[oa];if(!0===ta.valueset)return ta.value;ta.value=Y(ca,ta.node);ta.valueset=!0;return ta.value}if(void 0!==ca.globalScope[oa]){ta=ca.globalScope[oa];if(!0===ta.valueset)return ta.value;ta.value=Y(ca,ta.node);ta.valueset=!0;return ta.value}throw Error(h.nodeErrorMessage(ea,"RUNTIME","VARIABLENOTFOUND"));}catch(O){throw O;}}function ua(ca,ea){try{if("Identifier"!==ea.callee.type)throw Error(h.nodeErrorMessage(ea,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==ca.localScope&&void 0!==ca.localScope[ea.callee.name.toLowerCase()]){var oa=
ca.localScope[ea.callee.name.toLowerCase()];if(oa.value instanceof e.NativeFunction)return oa.value.fn(ca,ea);if(oa.value instanceof b)return ya(ca,ea,oa.value.definition);throw Error(h.nodeErrorMessage(ea,"RUNTIME","NOTAFUNCTION"));}if(void 0!==ca.globalScope[ea.callee.name.toLowerCase()]){oa=ca.globalScope[ea.callee.name.toLowerCase()];if(oa.value instanceof e.NativeFunction)return oa.value.fn(ca,ea);if(oa.value instanceof b)return ya(ca,ea,oa.value.definition);throw Error(h.nodeErrorMessage(ea,
"RUNTIME","NOTAFUNCTION"));}throw Error(h.nodeErrorMessage(ea,"RUNTIME","NOTFOUND"));}catch(ta){throw ta;}}function Ba(ca){return null==ca?"":e.isArray(ca)||e.isImmutableArray(ca)?"Array":e.isDate(ca)?"Date":e.isString(ca)?"String":e.isBoolean(ca)?"Boolean":e.isNumber(ca)?"Number":ca instanceof l?"Attachment":ca instanceof r?"Portal":ca instanceof d?"Dictionary":e.isFeature(ca)?"Feature":ca instanceof D?"Point":ca instanceof x?"Polygon":ca instanceof E?"Polyline":ca instanceof B?"Multipoint":ca instanceof
q?"Extent":e.isFunctionParameter(ca)?"Function":e.isFeatureSet(ca)?"FeatureSet":e.isFeatureSetCollection(ca)?"FeatureSetCollection":ca===e.voidOperation?"":"number"===typeof ca&&isNaN(ca)?"Number":"Unrecognised Type"}function M(ca,ea,oa,ta){try{var O=Y(ca,ea.arguments[oa]);if(e.equalityTest(O,ta))return Y(ca,ea.arguments[oa+1]);var V=ea.arguments.length-oa;return 1===V?Y(ca,ea.arguments[oa]):2===V?null:3===V?Y(ca,ea.arguments[oa+2]):M(ca,ea,oa+2,ta)}catch(pa){throw pa;}}function Z(ca,ea,oa,ta){try{if(!0===
ta)return Y(ca,ea.arguments[oa+1]);if(3===ea.arguments.length-oa)return Y(ca,ea.arguments[oa+2]);var O=Y(ca,ea.arguments[oa+2]);if(!1===e.isBoolean(O))throw Error("WHEN needs boolean test conditions");return Z(ca,ea,oa+2,O)}catch(V){throw V;}}function ia(ca,ea){var oa=ca.length,ta=Math.floor(oa/2);if(0===oa)return[];if(1===oa)return[ca[0]];var O=ia(ca.slice(0,ta),ea);ca=ia(ca.slice(ta,oa),ea);for(oa=[];0<O.length||0<ca.length;)0<O.length&&0<ca.length?(ta=ea(O[0],ca[0]),isNaN(ta)&&(ta=0),0>=ta?(oa.push(O[0]),
O=O.slice(1)):(oa.push(ca[0]),ca=ca.slice(1))):0<O.length?(oa.push(O[0]),O=O.slice(1)):0<ca.length&&(oa.push(ca[0]),ca=ca.slice(1));return oa}function qa(ca,ea,oa){try{var ta=ca.body;if(oa.length!==ca.params.length)throw Error("Invalid Parameter calls to function.");for(var O=0;O<oa.length;O++)ea.localScope[ca.params[O].name.toLowerCase()]={value:oa[O],valueset:!0,node:null};var V=Y(ea,ta);if(V instanceof e.ReturnResult)return V.value;if(V===e.breakResult)throw Error("Cannot Break from a Function");
if(V===e.continueResult)throw Error("Cannot Continue from a Function");return V instanceof e.ImplicitResult?V.value:V}catch(pa){throw pa;}}function ya(ca,ea,oa){return L(ca,ea,function(ta,O,V){ta={spatialReference:ca.spatialReference,globalScope:ca.globalScope,depthCounter:ca.depthCounter+1,console:ca.console,lrucache:ca.lrucache,interceptor:ca.interceptor,localScope:{}};if(64<ta.depthCounter)throw Error("Exceeded maximum function depth");return qa(oa,ta,V)})}function Ca(ca){return function(){var ea=
{spatialReference:ca.context.spatialReference,console:ca.context.console,lrucache:ca.context.lrucache,interceptor:ca.context.interceptor,localScope:{},depthCounter:ca.context.depthCounter+1,globalScope:ca.context.globalScope};if(64<ea.depthCounter)throw Error("Exceeded maximum function depth");return qa(ca.definition,ea,arguments)}}function Ia(ca){console.log(ca)}function Oa(ca){for(var ea={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:L,evaluateIdentifier:ja,arcadeCustomFunctionHandler:Ca},
oa=0;oa<ca.length;oa++)ca[oa].registerFunctions(ea);for(var ta in ea.functions)N[ta]={value:new e.NativeFunction(ea.functions[ta]),valueset:!0,node:null},na.prototype[ta]=N[ta];for(oa=0;oa<ea.signatures.length;oa++)h.addFunctionDeclaration(ea.signatures[oa],"async")}Object.defineProperty(y,"__esModule",{value:!0});y.findFunctionCalls=y.referencesFunction=y.referencesMember=y.validateScript=y.extractExpectedFieldLiterals=y.extractFieldLiterals=y.executeScript=y.extend=y.functionHelper=void 0;var la=
0,N={};m.registerFunctions(N,L);z.registerFunctions(N,L);A.registerFunctions(N,L);w.registerFunctions(N,L);C.registerFunctions(N,L);p.registerFunctions(N,L);N["typeof"]=function(ca,ea){return L(ca,ea,function(oa,ta,O){e.pcCheck(O,1,1);oa=Ba(O[0]);if("Unrecognised Type"===oa)throw Error("Unrecognised Type");return oa})};N.iif=function(ca,ea){try{e.pcCheck(null===ea.arguments?[]:ea.arguments,3,3);var oa=Y(ca,ea.arguments[0]);if(!1===e.isBoolean(oa))throw Error("IF Function must have a boolean test condition");
var ta=Y(ca,ea.arguments[1]),O=Y(ca,ea.arguments[2]);return!0===oa?ta:O}catch(V){throw V;}};N.decode=function(ca,ea){try{if(2>ea.arguments.length)throw Error("Missing Parameters");if(2===ea.arguments.length)return Y(ca,ea.arguments[1]);if(0===(ea.arguments.length-1)%2)throw Error("Must have a default value result.");var oa=Y(ca,ea.arguments[0]);return M(ca,ea,1,oa)}catch(ta){throw ta;}};N.when=function(ca,ea){try{if(3>ea.arguments.length)throw Error("Missing Parameters");if(0===ea.arguments.length%
2)throw Error("Must have a default value result.");var oa=Y(ca,ea.arguments[0]);if(!1===e.isBoolean(oa))throw Error("WHEN needs boolean test conditions");return Z(ca,ea,0,oa)}catch(ta){throw ta;}};N.top=function(ca,ea){return L(ca,ea,function(oa,ta,O){e.pcCheck(O,2,2);if(e.isArray(O[0]))return e.toNumber(O[1])>=O[0].length?O[0].slice(0):O[0].slice(0,e.toNumber(O[1]));if(e.isImmutableArray(O[0]))return e.toNumber(O[1])>=O[0].length()?O[0].slice(0):O[0].slice(0,e.toNumber(O[1]));throw Error("Top cannot accept this parameter type");
})};N.first=function(ca,ea){return L(ca,ea,function(oa,ta,O){e.pcCheck(O,1,1);return e.isArray(O[0])?0===O[0].length?null:O[0][0]:e.isImmutableArray(O[0])?0===O[0].length()?null:O[0].get(0):null})};N.sort=function(ca,ea){return L(ca,ea,function(oa,ta,O){e.pcCheck(O,1,2);oa=O[0];e.isImmutableArray(oa)&&(oa=oa.toArray());if(!1===e.isArray(oa))throw Error("Illegal Argument");if(1<O.length){if(!1===e.isFunctionParameter(O[1]))throw Error("Illegal Argument");var V=Ca(O[1]);return oa=ia(oa,function(Ja,
Qa){return V(Ja,Qa)})}if(0===oa.length)return[];O={};for(ta=0;ta<oa.length;ta++){var pa=Ba(oa[ta]);""!==pa&&(O[pa]=!0)}if(!0===O.Array||!0===O.Dictionary||!0===O.Feature||!0===O.Point||!0===O.Polygon||!0===O.Polyline||!0===O.Multipoint||!0===O.Extent||!0===O.Function)return oa.slice(0);ta=0;pa="";for(var za in O)ta++,pa=za;return oa=1<ta||"String"===pa?ia(oa,function(Ja,Qa){if(null===Ja||void 0===Ja||Ja===e.voidOperation)return null===Qa||void 0===Qa||Qa===e.voidOperation?0:1;if(null===Qa||void 0===
Qa||Qa===e.voidOperation)return-1;Ja=e.toString(Ja);Qa=e.toString(Qa);return Ja<Qa?-1:Ja===Qa?0:1}):"Number"===pa?ia(oa,function(Ja,Qa){return Ja-Qa}):"Boolean"===pa?ia(oa,function(Ja,Qa){return Ja===Qa?0:Qa?-1:1}):"Date"===pa?ia(oa,function(Ja,Qa){return Qa-Ja}):oa.slice(0)})};for(var aa in N)N[aa]={value:new e.NativeFunction(N[aa]),valueset:!0,node:null};var na=function(){};na.prototype=N;na.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};na.prototype.pi={value:Math.PI,
valueset:!0,node:null};y.functionHelper={fixSpatialReference:e.fixSpatialReference,parseArguments:I,standardFunction:L};y.extend=Oa;Oa([k]);y.executeScript=function(ca,ea){var oa=ea.spatialReference;if(null===oa||void 0===oa)oa=new G({wkid:102100});var ta=ea.vars,O=ea.customfunctions,V=new na;ta||(ta={});O||(O={});var pa=new d({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});pa.immutable=!1;V.textformatting={value:pa,valueset:!0,node:null};for(var za in O)V[za]=
{value:new e.NativeFunction(O[za]),native:!0,valueset:!0,node:null};for(za in ta)V[za]=ta[za]&&"esri.Graphic"===ta[za].declaredClass?{value:f.createFromGraphic(ta[za]),valueset:!0,node:null}:{value:ta[za],valueset:!0,node:null};ca=Y({spatialReference:oa,globalScope:V,localScope:null,console:ea.console?ea.console:Ia,lrucache:ea.lrucache,interceptor:ea.interceptor,depthCounter:1},ca.body[0].body);ca instanceof e.ReturnResult&&(ca=ca.value);ca instanceof e.ImplicitResult&&(ca=ca.value);ca===e.voidOperation&&
(ca=null);if(ca===e.breakResult)throw Error("Cannot return BREAK");if(ca===e.continueResult)throw Error("Cannot return CONTINUE");if(ca instanceof b)throw Error("Cannot return FUNCTION");if(ca instanceof e.NativeFunction)throw Error("Cannot return FUNCTION");return ca};y.extractFieldLiterals=function(ca,ea){void 0===ea&&(ea=!1);return h.findFieldLiterals(ca)};y.extractExpectedFieldLiterals=function(ca){return h.findExpectedFieldLiterals(ca)};y.validateScript=function(ca,ea){return h.validateScript(ca,
ea,"simple")};y.referencesMember=function(ca,ea){return h.referencesMember(ca,ea)};y.referencesFunction=function(ca,ea){return h.referencesFunction(ca,ea)};y.findFunctionCalls=function(ca){return h.findFunctionCalls(ca)}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/arcade-parser"],function(F,y,a,u){Object.defineProperty(y,"__esModule",{value:!0});y.referencesFunction=y.referencesMember=y.extractExpectedFieldLiterals=y.validateScript=y.extractFieldLiterals=
y.scriptCheck=y.parseScript=void 0;y.parseScript=function(n,t){void 0===t&&(t=[]);n=u.parse("function _() { "+n+"\n}");if(null===n.body||void 0===n.body)throw Error("No formula provided.");if(0===n.body.length)throw Error("No formula provided.");if(0===n.body.length)throw Error("No formula provided.");if("BlockStatement"!==n.body[0].body.type)throw Error("Invalid formula content.");var r=a.validateLanguage(n);if(""!==r)throw Error(r);a.findScriptDependencies(n,t);return n};y.scriptCheck=function(n,
t,r,l,d){var f=[];n="function _() { \n"+n+"\n}";try{var b=u.parse(n,{tolerant:!0,loc:!0,range:!0}),c=b.errors;if(0<c.length)for(var g=0;g<c.length;g++)f.push({line:c[g].lineNumber-2,character:c[g].column,reason:c[g].description});var e=a.checkScript(b,t,r,l,d);for(t=0;t<e.length;t++)e[t].line-=2,e[t].range&&(e[t].range=[e[t][0]-15,e[t][1]-15]),e[t].loc&&(e[t].loc.start.line-=2,e[t].loc.end.line-=2),f.push(e[t])}catch(k){try{if("Unexpected token }"===k.description){var h=n.split("\n").length;k.lineNumber===
h?(k.index=n.length-1,f.push({line:k.lineNumber-4,character:k.column,reason:"Unexpected end of script"})):(k.index=n.length-1,f.push({line:k.lineNumber-2,character:k.column,reason:"Unexpected end of script"}))}else f.push({line:k.lineNumber-2,character:k.column,reason:k.description})}catch(m){}}return f};y.extractFieldLiterals=function(n,t){void 0===t&&(t=!1);return a.findFieldLiterals(n)};y.validateScript=function(n,t,r){return a.validateScript(n,t,r)};y.extractExpectedFieldLiterals=function(n){return a.findExpectedFieldLiterals(n)};
y.referencesMember=function(n,t){return a.referencesMember(n,t)};y.referencesFunction=function(n,t){return a.referencesFunction(n,t)}})},"esri/arcade/lib/arcade-parser":function(){define("require exports ../polyfill/tsSupport/exportstar ./comment-handler ./parser ./tokenizer ./syntax ./token ./nodes".split(" "),function(F,y,a,u,n,t,r,l,d){Object.defineProperty(y,"__esModule",{value:!0});y.version=y.Syntax=y.tokenize=y.parse=void 0;y.parse=function(f,b,c){var g=null,e=function(w,p){c&&c(w,p);g&&g.visit(w,
p)},h="function"===typeof c?e:void 0,k=!1;if(b){k="boolean"===typeof b.comment&&b.comment;var m="boolean"===typeof b.attachComment&&b.attachComment;if(k||m)g=new u.CommentHandler,g.attach=m,b.comment=!0,h=e}f=new n.Parser(f,b,h);b=f.parseScript();k&&g&&(b.comments=g.comments);f.config.tokens&&(b.tokens=f.tokens);f.config.tolerant&&(b.errors=f.errorHandler.errors);return b};y.tokenize=function(f,b,c){f=new t.Tokenizer(f,b);b=[];var g=void 0;try{for(;;){var e=f.getNextToken();if(!e)break;c&&(e=c(e));
b.push(e)}}catch(h){f.errorHandler.tolerate(h)}f.errorHandler.tolerant&&(g=f.errors());return{tokens:b,errors:g}};Object.defineProperty(y,"Syntax",{enumerable:!0,get:function(){return r.Syntax}});a(l,y);a(d,y);y.version="4.0.0-dev"})},"esri/arcade/polyfill/tsSupport/exportstar":function(){define([],function(){return function(){var F=this&&this.__createBinding||(Object.create?function(y,a,u,n){void 0===n&&(n=u);Object.defineProperty(y,n,{enumerable:!0,get:function(){return a[u]}})}:function(y,a,u,
n){void 0===n&&(n=u);y[n]=a[u]});return function(y,a){for(var u in y)"default"===u||Object.prototype.hasOwnProperty.call(a,u)||F(a,y,u)}}()})},"esri/arcade/lib/comment-handler":function(){define(["require","exports","./syntax"],function(F,y,a){Object.defineProperty(y,"__esModule",{value:!0});y.CommentHandler=void 0;F=function(){function u(){this.attach=!1;this.comments=[];this.stack=[];this.leading=[];this.trailing=[]}u.prototype.insertInnerComments=function(n,t){if(n.type===a.Syntax.BlockStatement&&
0===n.body.length){for(var r=[],l=this.leading.length-1;0<=l;--l){var d=this.leading[l];t.end.offset>=d.start&&(r.unshift(d.comment),this.leading.splice(l,1),this.trailing.splice(l,1))}r.length&&(n.innerComments=r)}};u.prototype.findTrailingComments=function(n){var t=[];if(0<this.trailing.length){for(var r=this.trailing.length-1;0<=r;--r){var l=this.trailing[r];l.start>=n.end.offset&&t.unshift(l.comment)}this.trailing.length=0;return t}(r=this.stack[this.stack.length-1])&&r.node.trailingComments&&
(l=r.node.trailingComments[0])&&l.range[0]>=n.end.offset&&(t=r.node.trailingComments,delete r.node.trailingComments);return t};u.prototype.findLeadingComments=function(n){for(var t=[],r;0<this.stack.length;){var l=this.stack[this.stack.length-1];if(l&&l.start>=n.start.offset)r=l.node,this.stack.pop();else break}if(r){for(var d=(r.leadingComments?r.leadingComments.length:0)-1;0<=d;--d)l=r.leadingComments[d],l.range[1]<=n.start.offset&&(t.unshift(l),r.leadingComments.splice(d,1));r.leadingComments&&
0===r.leadingComments.length&&delete r.leadingComments;return t}for(d=this.leading.length-1;0<=d;--d)l=this.leading[d],l.start<=n.start.offset&&(t.unshift(l.comment),this.leading.splice(d,1));return t};u.prototype.visitNode=function(n,t){if(!(n.type===a.Syntax.Program&&0<n.body.length)){this.insertInnerComments(n,t);var r=this.findTrailingComments(t),l=this.findLeadingComments(t);0<l.length&&(n.leadingComments=l);0<r.length&&(n.trailingComments=r);this.stack.push({node:n,start:t.start.offset})}};
u.prototype.visitComment=function(n,t){this.comments.push(n);this.attach&&(t={comment:{type:n.type,value:n.value,range:[t.start.offset,t.end.offset]},start:t.start.offset},n.loc&&(t.comment.loc=n.loc),this.leading.push(t),this.trailing.push(t))};u.prototype.visit=function(n,t){"Line"===n.type||"Block"===n.type?this.visitComment(n,t):this.attach&&this.visitNode(n,t)};return u}();y.CommentHandler=F})},"esri/arcade/lib/syntax":function(){define(["require","exports"],function(F,y){Object.defineProperty(y,
"__esModule",{value:!0});y.Syntax=void 0;y.Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ContinueStatement:"ContinueStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",
Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"}})},"esri/arcade/lib/parser":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../polyfill/tsSupport/extends ./assert ./error-handler ./messages ./nodes ./scanner ./syntax ./token".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c){Object.defineProperty(y,"__esModule",{value:!0});y.Parser=void 0;F=function(){function g(e,h,k){void 0===h&&(h={});this.config={range:"boolean"===typeof h.range&&h.range,loc:"boolean"===typeof h.loc&&h.loc,source:null,tokens:"boolean"===typeof h.tokens&&h.tokens,comment:"boolean"===typeof h.comment&&h.comment,tolerant:"boolean"===typeof h.tolerant&&h.tolerant,globalReturn:!!h.globalReturn};this.config.loc&&h.source&&null!==h.source&&(this.config.source=String(h.source));
this.delegate=k;this.errorHandler=new r.ErrorHandler;this.errorHandler.tolerant=this.config.tolerant;this.scanner=new f.Scanner(e,this.errorHandler);this.scanner.trackComment=this.config.comment;this.operatorPrecedence={")":0,";":0,",":0,"\x3d":0,"]":0,"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,"\x3d\x3d\x3d":6,"!\x3d\x3d":6,"\x3c":7,"\x3e":7,"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":11,"/":11,"%":11};this.lookahead={type:c.TokenType.EOF,
value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0};this.hasLineTerminator=!1;this.context={allowIn:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,curlyParsing:"asObject"};this.tokens=[];this.startMarker={index:0,line:this.scanner.lineNumber,column:0};this.lastMarker={index:0,line:this.scanner.lineNumber,column:0};this.nextToken();this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-
this.scanner.lineStart}}g.prototype.tolerateError=function(e){for(var h=[],k=1;k<arguments.length;k++)h[k-1]=arguments[k];var m=h.slice();h=e.replace(/%(\d)/g,function(w,p){t.assert(p<m.length,"Message reference must be in range");return m[p]});this.errorHandler.tolerateError(this.lastMarker.index,this.scanner.lineNumber,this.lastMarker.column+1,h)};g.prototype.unexpectedTokenError=function(e,h){var k=h||l.Messages.UnexpectedToken;e?(h||(k=e.type===c.TokenType.EOF?l.Messages.UnexpectedEOS:e.type===
c.TokenType.Identifier?l.Messages.UnexpectedIdentifier:e.type===c.TokenType.NumericLiteral?l.Messages.UnexpectedNumber:e.type===c.TokenType.StringLiteral?l.Messages.UnexpectedString:e.type===c.TokenType.Template?l.Messages.UnexpectedTemplate:l.Messages.UnexpectedToken),h=e.value.toString()):h="ILLEGAL";k=k.replace("%0",h);return e&&"number"===typeof e.lineNumber?this.errorHandler.createError(e.start,e.lineNumber,e.start-(this.lastMarker.index-this.lastMarker.column)+1,k):this.errorHandler.createError(this.lastMarker.index,
this.lastMarker.line,this.lastMarker.column+1,k)};g.prototype.throwUnexpectedToken=function(e,h){throw this.unexpectedTokenError(e,h);};g.prototype.tolerateUnexpectedToken=function(e,h){this.errorHandler.tolerate(this.unexpectedTokenError(e,h))};g.prototype.collectComments=function(){if(this.config.comment){var e=this.scanner.scanComments();if(e&&0<e.length&&this.delegate)for(var h=0;h<e.length;++h){var k=e[h],m=new d.Comment(k.multiLine?"Block":"Line",this.scanner.source.slice(k.slice[0],k.slice[1]));
this.config.range&&(m.range=k.range);this.config.loc&&(m.loc=k.loc);this.delegate(m,{start:{line:k.loc.start.line,column:k.loc.start.column,offset:k.range[0]},end:{line:k.loc.end.line,column:k.loc.end.column,offset:k.range[1]}})}}else this.scanner.scanComments()};g.prototype.peekAhead=function(e){var h=this,k=this.scanner.saveState();e.call(this,function(){h.scanner.scanComments();return h.scanner.lex()});this.scanner.restoreState(k)};g.prototype.getTokenRaw=function(e){return this.scanner.source.slice(e.start,
e.end)};g.prototype.convertToken=function(e){var h={type:c.TokenName[e.type],value:this.getTokenRaw(e)};this.config.range&&(h.range=[e.start,e.end]);this.config.loc&&(h.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}});e.type===c.TokenType.RegularExpression&&(h.regex={pattern:e.pattern,flags:e.flags});return h};g.prototype.nextToken=function(){var e=this.lookahead;this.lastMarker.index=this.scanner.index;
this.lastMarker.line=this.scanner.lineNumber;this.lastMarker.column=this.scanner.index-this.scanner.lineStart;this.collectComments();this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var h=this.scanner.lex();this.hasLineTerminator=e.lineNumber!==h.lineNumber;this.lookahead=h;this.config.tokens&&h.type!==c.TokenType.EOF&&this.tokens.push(this.convertToken(h));
return e};g.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}};g.prototype.startNode=function(e,h){void 0===h&&(h=0);var k=e.start-e.lineStart,m=e.lineNumber;0>k&&(k+=h,m--);return{index:e.start,line:m,column:k}};g.prototype.finalize=function(e,h){this.config.range&&(h.range=[e.index,this.lastMarker.index]);this.config.loc&&(h.loc={start:{line:e.line,column:e.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},
this.config.source&&(h.loc.source=this.config.source));this.delegate&&this.delegate(h,{start:{line:e.line,column:e.column,offset:e.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}});return h};g.prototype.expect=function(e){var h=this.nextToken();h.type===c.TokenType.Punctuator&&h.value===e||this.throwUnexpectedToken(h)};g.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var e=this.lookahead;e.type===c.TokenType.Punctuator&&","===e.value?
this.nextToken():e.type===c.TokenType.Punctuator&&";"===e.value?(this.nextToken(),this.tolerateUnexpectedToken(e)):this.tolerateUnexpectedToken(e,l.Messages.UnexpectedToken)}else this.expect(",")};g.prototype.expectKeyword=function(e){var h=this.nextToken();h.type===c.TokenType.Keyword&&h.value.toString().toLowerCase()===e.toLowerCase()||this.throwUnexpectedToken(h)};g.prototype.match=function(e){return this.lookahead.type===c.TokenType.Punctuator&&this.lookahead.value===e};g.prototype.matchKeyword=
function(e){return this.lookahead.type===c.TokenType.Keyword&&this.lookahead.value.toLowerCase()===e.toLowerCase()};g.prototype.matchContextualKeyword=function(e){return this.lookahead.type===c.TokenType.Identifier&&this.lookahead.value===e};g.prototype.matchAssign=function(){return this.lookahead.type!==c.TokenType.Punctuator?!1:d.AssignmentOperators.includes(this.lookahead.value)};g.prototype.isolateCoverGrammar=function(e){var h=this.context.isBindingElement,k=this.context.isAssignmentTarget,m=
this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;e=e.call(this);null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError);this.context.isBindingElement=h;this.context.isAssignmentTarget=k;this.context.firstCoverInitializedNameError=m;return e};g.prototype.inheritCoverGrammar=function(e){var h=this.context.isBindingElement,
k=this.context.isAssignmentTarget,m=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;e=e.call(this);this.context.isBindingElement=this.context.isBindingElement&&h;this.context.isAssignmentTarget=this.context.isAssignmentTarget&&k;this.context.firstCoverInitializedNameError=m||this.context.firstCoverInitializedNameError;return e};g.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():
this.hasLineTerminator||(this.lookahead.type===c.TokenType.EOF||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)};g.prototype.parsePrimaryExpression=function(){var e=this.createNode();switch(this.lookahead.type){case c.TokenType.Identifier:e=this.finalize(e,new d.Identifier(this.nextToken().value));break;case c.TokenType.NumericLiteral:case c.TokenType.StringLiteral:this.context.isAssignmentTarget=
!1;this.context.isBindingElement=!1;var h=this.nextToken();var k=this.getTokenRaw(h);e=this.finalize(e,new d.Literal(h.value,k));break;case c.TokenType.BooleanLiteral:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;h=this.nextToken();k=this.getTokenRaw(h);e=this.finalize(e,new d.Literal("true"===h.value.toString().toLowerCase(),k));break;case c.TokenType.NullLiteral:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;h=this.nextToken();k=this.getTokenRaw(h);e=this.finalize(e,
new d.Literal(null,k));break;case c.TokenType.Template:e=this.parseTemplateLiteral();break;case c.TokenType.Punctuator:switch(this.lookahead.value){case "(":this.context.isBindingElement=!1;e=this.inheritCoverGrammar(this.parseGroupExpression);break;case "[":e=this.inheritCoverGrammar(this.parseArrayInitializer);break;case "{":e=this.inheritCoverGrammar(this.parseObjectInitializer);break;default:e=this.throwUnexpectedToken(this.nextToken())}break;case c.TokenType.Keyword:this.context.isAssignmentTarget=
!1;this.context.isBindingElement=!1;e=this.throwUnexpectedToken(this.nextToken());break;default:e=this.throwUnexpectedToken(this.nextToken())}return e};g.prototype.parseArrayInitializer=function(){var e=this.createNode(),h=[];for(this.expect("[");!this.match("]");)this.match(",")?(this.nextToken(),h.push(null)):(h.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(","));this.expect("]");return this.finalize(e,new d.ArrayExpression(h))};g.prototype.parseObjectPropertyKey=
function(){var e=this.createNode(),h=this.nextToken();switch(h.type){case c.TokenType.StringLiteral:case c.TokenType.NumericLiteral:e=this.finalize(e,new d.Literal(h.value,this.getTokenRaw(h)));break;case c.TokenType.Identifier:case c.TokenType.BooleanLiteral:case c.TokenType.NullLiteral:case c.TokenType.Keyword:e=this.finalize(e,new d.Identifier(h.value));break;default:e=this.throwUnexpectedToken(h)}return e};g.prototype.parseObjectProperty=function(){var e=this.createNode(),h=this.lookahead,k=!1,
m=!1,w=null;if(h.type===c.TokenType.Identifier){var p=h.value;this.nextToken();k=this.match("[");w=this.finalize(e,new d.Identifier(p))}else this.match("*")?this.nextToken():(k=this.match("["),w=this.parseObjectPropertyKey());w||this.throwUnexpectedToken(this.lookahead);p=null;this.match(":")?(this.nextToken(),p=this.inheritCoverGrammar(this.parseAssignmentExpression)):h.type===c.TokenType.Identifier?(p=this.finalize(e,new d.Identifier(h.value)),m=!0):this.throwUnexpectedToken(this.nextToken());return this.finalize(e,
new d.Property("init",w,k,p,!1,m))};g.prototype.parseObjectInitializer=function(){var e=this.createNode();this.expect("{");for(var h=[];!this.match("}");)h.push(this.parseObjectProperty()),this.match("}")||this.expectCommaSeparator();this.expect("}");return this.finalize(e,new d.ObjectExpression(h))};g.prototype.parseTemplateHead=function(){t.assert(this.lookahead.head,"Template literal must start with a template head");var e=this.createNode(),h=this.nextToken();return this.finalize(e,new d.TemplateElement({raw:h.value,
cooked:h.cooked},h.tail))};g.prototype.parseTemplateElement=function(){this.lookahead.type!==c.TokenType.Template&&this.throwUnexpectedToken();var e=this.createNode(),h=this.nextToken();return this.finalize(e,new d.TemplateElement({raw:h.value,cooked:h.cooked},h.tail))};g.prototype.parseTemplateLiteral=function(){var e=this.createNode(),h=[],k=[],m=this.parseTemplateHead();for(k.push(m);!m.tail;)h.push(this.parseExpression()),m=this.parseTemplateElement(),k.push(m);return this.finalize(e,new d.TemplateLiteral(k,
h))};g.prototype.parseGroupExpression=function(){this.expect("(");this.context.isBindingElement=!0;var e=this.inheritCoverGrammar(this.parseAssignmentExpression);this.expect(")");this.context.isBindingElement=!1;return e};g.prototype.parseArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var h=this.isolateCoverGrammar(this.parseAssignmentExpression);e.push(h);if(this.match(")"))break;this.expectCommaSeparator();if(this.match(")"))break}this.expect(")");return e};g.prototype.isIdentifierName=
function(e){return e.type===c.TokenType.Identifier||e.type===c.TokenType.Keyword||e.type===c.TokenType.BooleanLiteral||e.type===c.TokenType.NullLiteral};g.prototype.parseIdentifierName=function(){var e=this.createNode(),h=this.nextToken();this.isIdentifierName(h)||this.throwUnexpectedToken(h);return this.finalize(e,new d.Identifier(h.value))};g.prototype.parseLeftHandSideExpressionAllowCall=function(){var e=this.lookahead,h=this.context.allowIn;this.context.allowIn=!0;for(var k=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("(")){this.context.isBindingElement=
!1;this.context.isAssignmentTarget=!1;var m=this.parseArguments();k=this.finalize(this.startNode(e),new d.CallExpression(k,m))}else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),m=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),k=this.finalize(this.startNode(e),new d.ComputedMemberExpression(k,m));else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),m=this.parseIdentifierName(),
k=this.finalize(this.startNode(e),new d.StaticMemberExpression(k,m));else break;this.context.allowIn=h;return k};g.prototype.parseLeftHandSideExpression=function(){t.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var e=this.startNode(this.lookahead),h=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!0;this.expect("[");var k=this.isolateCoverGrammar(this.parseExpression);
this.expect("]");h=this.finalize(e,new d.ComputedMemberExpression(h,k))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),k=this.parseIdentifierName(),h=this.finalize(e,new d.StaticMemberExpression(h,k));else break;return h};g.prototype.parseUpdateExpression=function(){var e=this.lookahead;if(this.match("++")||this.match("--")){e=this.startNode(e);var h=this.nextToken();var k=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.isAssignmentTarget||
this.tolerateError(l.Messages.InvalidLHSInAssignment);k=this.finalize(e,new d.UpdateExpression(h.value,k,!0));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else k=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),this.hasLineTerminator||this.lookahead.type!==c.TokenType.Punctuator||!this.match("++")&&!this.match("--")||(this.context.isAssignmentTarget||this.tolerateError(l.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=
!1,h=this.nextToken().value,k=this.finalize(this.startNode(e),new d.UpdateExpression(h,k,!1)));return k};g.prototype.parseUnaryExpression=function(){if(this.match("+")||this.match("-")||this.match("~")||this.match("!")){var e=this.startNode(this.lookahead),h=this.nextToken();var k=this.inheritCoverGrammar(this.parseUnaryExpression);k=this.finalize(e,new d.UnaryExpression(h.value,k));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else k=this.parseUpdateExpression();return k};g.prototype.binaryPrecedence=
function(e){var h=e.value;return e.type===c.TokenType.Punctuator?this.operatorPrecedence[h]||0:e.type===c.TokenType.Keyword?this.context.allowIn&&"in"===h?12:0:0};g.prototype.parseBinaryExpression=function(){var e=this.lookahead,h=this.inheritCoverGrammar(this.parseUnaryExpression),k=this.lookahead,m=this.binaryPrecedence(k);if(0<m){this.nextToken();this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;e=[e,this.lookahead];var w=this.inheritCoverGrammar(this.parseUnaryExpression);k=
[h,k.value,w];for(var p=[m];;){m=this.binaryPrecedence(this.lookahead);if(0>=m)break;for(;2<k.length&&m<=p[p.length-1];){w=k.pop();var A=k.pop();p.pop();h=k.pop();e.pop();var C=e[e.length-1],z=this.startNode(C,C.lineStart);k.push(this.finalize(z,new d.BinaryExpression(A,h,w)))}k.push(this.nextToken().value);p.push(m);e.push(this.lookahead);k.push(this.inheritCoverGrammar(this.parseUnaryExpression))}m=k.length-1;h=k[m];for(A=e.pop();1<m;){C=e.pop();if(!C)break;z=this.startNode(C,A&&A.lineStart);A=
k[m-1];h=this.finalize(z,new d.BinaryExpression(A,k[m-2],h));m-=2;A=C}}return h};g.prototype.parseAssignmentExpression=function(){var e=this.lookahead,h=e,k=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.matchAssign()){this.context.isAssignmentTarget||this.tolerateError(l.Messages.InvalidLHSInAssignment);this.match("\x3d")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);h=this.nextToken();h=h.value;var m=this.isolateCoverGrammar(this.parseAssignmentExpression);
k=this.finalize(this.startNode(e),new d.AssignmentExpression(h,k,m));this.context.firstCoverInitializedNameError=null}return k};g.prototype.parseExpression=function(){return this.isolateCoverGrammar(this.parseAssignmentExpression)};g.prototype.parseStatementListItem=function(){this.context.isAssignmentTarget=!0;this.context.isBindingElement=!0;if(this.lookahead.type===c.TokenType.Keyword)switch(this.lookahead.value){case "function":var e=this.parseFunctionDeclaration();break;default:e=this.parseStatement()}else e=
this.parseStatement();return e};g.prototype.parseBlock=function(){var e=this.createNode();this.expect("{");for(var h=[];!this.match("}");)h.push(this.parseStatementListItem());this.expect("}");return this.finalize(e,new d.BlockStatement(h))};g.prototype.parseObjectStatement=function(){var e=this.createNode(),h=this.parseObjectInitializer();return this.finalize(e,new d.ExpressionStatement(h))};g.prototype.parseBlockOrObjectStatement=function(){var e="asObject"===this.context.curlyParsing;"asObjectOrBlock"===
this.context.curlyParsing&&this.peekAhead(function(h){var k=h();if(k.type===c.TokenType.Identifier||k.type===c.TokenType.StringLiteral)k=h(),k.type===c.TokenType.Punctuator&&":"===k.value&&(e=!0)});return e?this.parseObjectStatement():this.parseBlock()};g.prototype.parseVariableIdentifier=function(){var e=this.createNode(),h=this.nextToken();h.type!==c.TokenType.Identifier&&this.throwUnexpectedToken(h,l.Messages.IdentiferExpected);return this.finalize(e,new d.Identifier(h.value))};g.prototype.parseVariableDeclaration=
function(e){var h=this.createNode(),k=this.parseVariableIdentifier(),m=null;this.match("\x3d")?(this.nextToken(),m=this.isolateCoverGrammar(this.parseAssignmentExpression)):k.type===b.Syntax.Identifier||e.inFor||this.expect("\x3d");return this.finalize(h,new d.VariableDeclarator(k,m))};g.prototype.parseVariableDeclarationList=function(e){for(var h=[this.parseVariableDeclaration(e)];this.match(",");)this.nextToken(),h.push(this.parseVariableDeclaration(e));return h};g.prototype.parseVariableStatement=
function(){var e=this.createNode();this.expectKeyword("var");var h=this.parseVariableDeclarationList({inFor:!1});this.consumeSemicolon();return this.finalize(e,new d.VariableDeclaration(h,"var"))};g.prototype.parseEmptyStatement=function(){var e=this.createNode();this.expect(";");return this.finalize(e,new d.EmptyStatement)};g.prototype.parseExpressionStatement=function(){var e=this.createNode(),h=this.parseExpression();this.consumeSemicolon();return this.finalize(e,new d.ExpressionStatement(h))};
g.prototype.parseIfClause=function(){var e=this.context.curlyParsing;this.context.curlyParsing="asObjectOrBlock";var h=this.parseStatement();this.context.curlyParsing=e;return h};g.prototype.parseIfStatement=function(){var e=this.createNode(),h=null;this.expectKeyword("if");this.expect("(");var k=this.parseExpression();if(!this.match(")")&&this.config.tolerant){this.tolerateUnexpectedToken(this.nextToken());var m=this.finalize(this.createNode(),new d.EmptyStatement)}else this.expect(")"),m=this.parseIfClause(),
this.matchKeyword("else")&&(this.nextToken(),h=this.parseIfClause());return this.finalize(e,new d.IfStatement(k,m,h))};g.prototype.parseForStatement=function(){var e=null,h=null,k=null,m=null,w=null,p=this.createNode();this.expectKeyword("for");this.expect("(");if(this.match(";"))this.nextToken();else if(this.matchKeyword("var")){var A=this.createNode();this.nextToken();var C=this.context.allowIn;this.context.allowIn=!1;var z=this.parseVariableDeclarationList({inFor:!0});this.context.allowIn=C;1===
z.length&&this.matchKeyword("in")?(z[0].init&&this.tolerateError(l.Messages.ForInOfLoopInitializer,"for-in"),m=this.finalize(A,new d.VariableDeclaration(z,"var")),this.nextToken(),w=this.parseExpression()):(e=this.finalize(A,new d.VariableDeclaration(z,"var")),this.expect(";"))}else{A=this.context.isBindingElement;z=this.context.isAssignmentTarget;var q=this.context.firstCoverInitializedNameError;C=this.context.allowIn;this.context.allowIn=!1;e=this.inheritCoverGrammar(this.parseAssignmentExpression);
this.context.allowIn=C;this.matchKeyword("in")?(this.context.isAssignmentTarget&&e.type!==b.Syntax.AssignmentExpression||this.tolerateError(l.Messages.InvalidLHSInForIn),this.nextToken(),m=e,w=this.parseExpression(),e=null):(this.context.isBindingElement=A,this.context.isAssignmentTarget=z,this.context.firstCoverInitializedNameError=q,this.expect(";"))}m||(this.match(";")||(h=this.isolateCoverGrammar(this.parseExpression)),this.expect(";"),this.match(")")||(k=this.isolateCoverGrammar(this.parseExpression)));
!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),C=this.finalize(this.createNode(),new d.EmptyStatement)):(this.expect(")"),A=this.context.inIteration,z=this.context.curlyParsing,this.context.inIteration=!0,this.context.curlyParsing="asObjectOrBlock",C=this.isolateCoverGrammar(this.parseStatement),this.context.curlyParsing=z,this.context.inIteration=A);return m&&w?this.finalize(p,new d.ForInStatement(m,w,C)):this.finalize(p,new d.ForStatement(e,h,k,C))};g.prototype.parseContinueStatement=
function(){var e=this.createNode();this.expectKeyword("continue");this.consumeSemicolon();return this.finalize(e,new d.ContinueStatement)};g.prototype.parseBreakStatement=function(){var e=this.createNode();this.expectKeyword("break");this.consumeSemicolon();return this.finalize(e,new d.BreakStatement)};g.prototype.parseReturnStatement=function(){this.config.globalReturn||this.context.inFunctionBody||this.tolerateError(l.Messages.IllegalReturn);var e=this.createNode();this.expectKeyword("return");
var h=(this.match(";")||this.match("}")||this.hasLineTerminator||this.lookahead.type===c.TokenType.EOF)&&this.lookahead.type!==c.TokenType.StringLiteral&&this.lookahead.type!==c.TokenType.Template?null:this.parseExpression();this.consumeSemicolon();return this.finalize(e,new d.ReturnStatement(h))};g.prototype.parseStatement=function(){switch(this.lookahead.type){case c.TokenType.BooleanLiteral:case c.TokenType.NullLiteral:case c.TokenType.NumericLiteral:case c.TokenType.StringLiteral:case c.TokenType.Template:case c.TokenType.Identifier:var e=
this.parseExpressionStatement();break;case c.TokenType.Punctuator:e=this.lookahead.value;e="{"===e?this.parseBlockOrObjectStatement():"("===e?this.parseExpressionStatement():";"===e?this.parseEmptyStatement():this.parseExpressionStatement();break;case c.TokenType.Keyword:switch(this.lookahead.value.toLowerCase()){case "break":e=this.parseBreakStatement();break;case "continue":e=this.parseContinueStatement();break;case "for":e=this.parseForStatement();break;case "function":e=this.parseFunctionDeclaration();
break;case "if":e=this.parseIfStatement();break;case "return":e=this.parseReturnStatement();break;case "var":e=this.parseVariableStatement();break;default:e=this.parseExpressionStatement()}break;default:e=this.throwUnexpectedToken(this.lookahead)}return e};g.prototype.parseFunctionSourceElements=function(){var e=this.createNode();this.expect("{");var h=this.context.inIteration,k=this.context.inFunctionBody;this.context.inIteration=!1;this.context.inFunctionBody=!0;for(var m=[];this.lookahead.type!==
c.TokenType.EOF&&!this.match("}");)m.push(this.parseStatementListItem());this.expect("}");this.context.inIteration=h;this.context.inFunctionBody=k;return this.finalize(e,new d.BlockStatement(m))};g.prototype.parseFormalParameters=function(){var e=[];this.expect("(");if(!this.match(")"))for(;this.lookahead.type!==c.TokenType.EOF;){e.push(this.parseVariableIdentifier());if(this.match(")"))break;this.expect(",");if(this.match(")"))break}this.expect(")");return e};g.prototype.parseFunctionDeclaration=
function(){var e=this.createNode();this.expectKeyword("function");var h=this.parseVariableIdentifier(),k=this.parseFormalParameters(),m=this.parseFunctionSourceElements();return this.finalize(e,new d.FunctionDeclaration(h,k,m))};g.prototype.parseScript=function(){for(var e=this.createNode(),h=[];this.lookahead.type!==c.TokenType.EOF;)h.push(this.parseStatementListItem());return this.finalize(e,new d.Program(h))};return g}();y.Parser=F})},"esri/arcade/lib/assert":function(){define(["require","exports"],
function(F,y){Object.defineProperty(y,"__esModule",{value:!0});y.assert=void 0;y.assert=function(a,u){if(!a)throw Error("ASSERT: "+u);}})},"esri/arcade/lib/error-handler":function(){define(["require","exports"],function(F,y){Object.defineProperty(y,"__esModule",{value:!0});y.ErrorHandler=void 0;F=function(){function a(){this.errors=[];this.tolerant=!1}a.prototype.recordError=function(u){this.errors.push(u)};a.prototype.tolerate=function(u){if(this.tolerant)this.recordError(u);else throw u;};a.prototype.constructError=
function(u,n){u=Error(u);try{throw u;}catch(t){Object.create&&Object.defineProperty&&(u=Object.create(t),Object.defineProperty(u,"column",{value:n}))}return u};a.prototype.createError=function(u,n,t,r){t=this.constructError("Line "+n+": "+r,t);t.index=u;t.lineNumber=n;t.description=r;return t};a.prototype.throwError=function(u,n,t,r){throw this.createError(u,n,t,r);};a.prototype.tolerateError=function(u,n,t,r){u=this.createError(u,n,t,r);if(this.tolerant)this.recordError(u);else throw u;};return a}();
y.ErrorHandler=F})},"esri/arcade/lib/messages":function(){define(["require","exports"],function(F,y){Object.defineProperty(y,"__esModule",{value:!0});y.Messages=void 0;y.Messages={ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",
IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidRegExp:"Invalid regular expression",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictParamDupe:"Strict mode function may not have duplicate parameter names",
TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnterminatedRegExp:"Invalid regular expression: missing /",IdentiferExpected:"Identifier expected"}})},"esri/arcade/lib/nodes":function(){define("require exports ../polyfill/tsSupport/awaiter ../polyfill/tsSupport/generator ../polyfill/tsSupport/extends ./syntax".split(" "),
function(F,y,a,u,n,t){Object.defineProperty(y,"__esModule",{value:!0});y.VariableDeclarator=y.VariableDeclaration=y.UpdateExpression=y.UpdateOperators=y.UnaryExpression=y.UnaryOperators=y.TemplateLiteral=y.TemplateElement=y.Program=y.ReturnStatement=y.Property=y.ObjectExpression=y.Literal=y.IfStatement=y.Identifier=y.FunctionDeclaration=y.ForStatement=y.ForInStatement=y.ExpressionStatement=y.EmptyStatement=y.ContinueStatement=y.StaticMemberExpression=y.ComputedMemberExpression=y.CallExpression=y.BreakStatement=
y.BlockStatement=y.BinaryExpression=y.BinaryOperators=y.LogicalOperators=y.AssignmentExpression=y.AssignmentOperators=y.ArrayExpression=y.Comment=void 0;F=function(){return function(){}}();a=function(r){function l(d,f){var b=r.call(this)||this;b.type=d;b.value=f;return b}n(l,r);return l}(F);y.Comment=a;a=function(r){function l(d){var f=r.call(this)||this;f.elements=d;f.type=t.Syntax.ArrayExpression;return f}n(l,r);return l}(F);y.ArrayExpression=a;y.AssignmentOperators="\x3d /\x3d *\x3d %\x3d +\x3d -\x3d".split(" ");
a=function(r){function l(d,f,b){var c=r.call(this)||this;c.operator=d;c.left=f;c.right=b;c.type=t.Syntax.AssignmentExpression;return c}n(l,r);return l}(F);y.AssignmentExpression=a;y.LogicalOperators=["||","\x26\x26"];y.BinaryOperators="| \x26 \x3e\x3e \x3c\x3c \x3e\x3e \x3e\x3e\x3e ^ \x3d\x3d !\x3d \x3c \x3c\x3d \x3e \x3e\x3d + - * / %".split(" ");a=function(r){function l(d,f,b){var c=r.call(this)||this;c.operator=d;c.left=f;c.right=b;c.type=y.LogicalOperators.includes(d)?t.Syntax.LogicalExpression:
t.Syntax.BinaryExpression;return c}n(l,r);return l}(F);y.BinaryExpression=a;a=function(r){function l(d){var f=r.call(this)||this;f.body=d;f.type=t.Syntax.BlockStatement;return f}n(l,r);return l}(F);y.BlockStatement=a;a=function(r){function l(){var d=null!==r&&r.apply(this,arguments)||this;d.type=t.Syntax.BreakStatement;return d}n(l,r);return l}(F);y.BreakStatement=a;a=function(r){function l(d,f){var b=r.call(this)||this;b.callee=d;b.args=f;b.type=t.Syntax.CallExpression;b.arguments=f;return b}n(l,
r);return l}(F);y.CallExpression=a;a=function(r){function l(d,f){var b=r.call(this)||this;b.object=d;b.property=f;b.type=t.Syntax.MemberExpression;b.computed=!0;return b}n(l,r);return l}(F);y.ComputedMemberExpression=a;a=function(r){function l(d,f){var b=r.call(this)||this;b.object=d;b.property=f;b.type=t.Syntax.MemberExpression;b.computed=!1;return b}n(l,r);return l}(F);y.StaticMemberExpression=a;a=function(r){function l(){var d=null!==r&&r.apply(this,arguments)||this;d.type=t.Syntax.ContinueStatement;
return d}n(l,r);return l}(F);y.ContinueStatement=a;a=function(r){function l(){var d=null!==r&&r.apply(this,arguments)||this;d.type=t.Syntax.EmptyStatement;return d}n(l,r);return l}(F);y.EmptyStatement=a;a=function(r){function l(d){var f=r.call(this)||this;f.expression=d;f.type=t.Syntax.ExpressionStatement;return f}n(l,r);return l}(F);y.ExpressionStatement=a;a=function(r){function l(d,f,b){var c=r.call(this)||this;c.left=d;c.right=f;c.body=b;c.type=t.Syntax.ForInStatement;c.each=!1;return c}n(l,r);
return l}(F);y.ForInStatement=a;a=function(r){function l(d,f,b,c){var g=r.call(this)||this;g.init=d;g.test=f;g.update=b;g.body=c;g.type=t.Syntax.ForStatement;return g}n(l,r);return l}(F);y.ForStatement=a;a=function(r){function l(d,f,b){var c=r.call(this)||this;c.id=d;c.params=f;c.body=b;c.type=t.Syntax.FunctionDeclaration;c.generator=!1;c.expression=!1;c.async=!1;return c}n(l,r);return l}(F);y.FunctionDeclaration=a;a=function(r){function l(d){var f=r.call(this)||this;f.name=d;f.type=t.Syntax.Identifier;
return f}n(l,r);return l}(F);y.Identifier=a;a=function(r){function l(d,f,b){var c=r.call(this)||this;c.test=d;c.consequent=f;c.alternate=b;c.type=t.Syntax.IfStatement;return c}n(l,r);return l}(F);y.IfStatement=a;a=function(r){function l(d,f){var b=r.call(this)||this;b.value=d;b.raw=f;b.type=t.Syntax.Literal;return b}n(l,r);return l}(F);y.Literal=a;a=function(r){function l(d){var f=r.call(this)||this;f.properties=d;f.type=t.Syntax.ObjectExpression;return f}n(l,r);return l}(F);y.ObjectExpression=a;
a=function(r){function l(d,f,b,c,g,e){var h=r.call(this)||this;h.kind=d;h.key=f;h.computed=b;h.value=c;h.method=g;h.shorthand=e;h.type=t.Syntax.Property;return h}n(l,r);return l}(F);y.Property=a;a=function(r){function l(d){var f=r.call(this)||this;f.argument=d;f.type=t.Syntax.ReturnStatement;return f}n(l,r);return l}(F);y.ReturnStatement=a;a=function(r){function l(d){var f=r.call(this)||this;f.body=d;f.type=t.Syntax.Program;return f}n(l,r);return l}(F);y.Program=a;a=function(r){function l(d,f){var b=
r.call(this)||this;b.value=d;b.tail=f;b.type=t.Syntax.TemplateElement;return b}n(l,r);return l}(F);y.TemplateElement=a;a=function(r){function l(d,f){var b=r.call(this)||this;b.quasis=d;b.expressions=f;b.type=t.Syntax.TemplateLiteral;return b}n(l,r);return l}(F);y.TemplateLiteral=a;y.UnaryOperators=["-","+","!","~"];a=function(r){function l(d,f){var b=r.call(this)||this;b.operator=d;b.argument=f;b.type=t.Syntax.UnaryExpression;b.prefix=!0;return b}n(l,r);return l}(F);y.UnaryExpression=a;y.UpdateOperators=
["++","--"];a=function(r){function l(d,f,b){var c=r.call(this)||this;c.operator=d;c.argument=f;c.prefix=b;c.type=t.Syntax.UpdateExpression;return c}n(l,r);return l}(F);y.UpdateExpression=a;a=function(r){function l(d,f){var b=r.call(this)||this;b.declarations=d;b.kind=f;b.type=t.Syntax.VariableDeclaration;return b}n(l,r);return l}(F);y.VariableDeclaration=a;F=function(r){function l(d,f){var b=r.call(this)||this;b.id=d;b.init=f;b.type=t.Syntax.VariableDeclarator;return b}n(l,r);return l}(F);y.VariableDeclarator=
F})},"esri/arcade/lib/scanner":function(){define("require exports ./assert ./character ./messages ./token".split(" "),function(F,y,a,u,n,t){Object.defineProperty(y,"__esModule",{value:!0});y.Scanner=void 0;F=function(){function r(l,d){this.source=l;this.errorHandler=d;this.isModule=this.trackComment=!1;this.length=l.length;this.index=0;this.lineNumber=0<l.length?1:0;this.lineStart=0;this.curlyStack=[]}r.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,
curlyStack:this.curlyStack.slice()}};r.prototype.restoreState=function(l){this.index=l.index;this.lineNumber=l.lineNumber;this.lineStart=l.lineStart;this.curlyStack=l.curlyStack};r.prototype.eof=function(){return this.index>=this.length};r.prototype.throwUnexpectedToken=function(l){void 0===l&&(l=n.Messages.UnexpectedTokenIllegal);return this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,l)};r.prototype._tolerateUnexpectedToken=function(l){void 0===l&&(l=n.Messages.UnexpectedTokenIllegal);
this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,l)};r.prototype._skipSingleLineComment=function(l){var d=[],f=0,b=null;this.trackComment&&(d=[],f=this.index-l,b={start:{line:this.lineNumber,column:this.index-this.lineStart-l},end:{line:0,column:0}});for(;!this.eof();){var c=this.source.charCodeAt(this.index);++this.index;if(u.Character.isLineTerminator(c))return b&&(b.end={line:this.lineNumber,column:this.index-this.lineStart-1},l={multiLine:!1,slice:[f+l,this.index-
1],range:[f,this.index-1],loc:b},d.push(l)),13===c&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,d}b&&(b.end={line:this.lineNumber,column:this.index-this.lineStart},l={multiLine:!1,slice:[f+l,this.index],range:[f,this.index],loc:b},d.push(l));return d};r.prototype._skipMultiLineComment=function(){var l=[],d=0,f=null;this.trackComment&&(d=this.index-2,f={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}});for(;!this.eof();){var b=
this.source.charCodeAt(this.index);if(u.Character.isLineTerminator(b))13===b&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===b&&47===this.source.charCodeAt(this.index+1))return this.index+=2,f&&(f.end={line:this.lineNumber,column:this.index-this.lineStart},d={multiLine:!0,slice:[d+2,this.index-2],range:[d,this.index],loc:f},l.push(d)),l;++this.index}}f&&(f.end={line:this.lineNumber,column:this.index-this.lineStart},d={multiLine:!0,
slice:[d+2,this.index],range:[d,this.index],loc:f},l.push(d));this._tolerateUnexpectedToken();return l};r.prototype.scanComments=function(){var l=null;this.trackComment&&(l=[]);for(var d=0===this.index;!this.eof();){var f=this.source.charCodeAt(this.index);if(u.Character.isWhiteSpace(f))++this.index;else if(u.Character.isLineTerminator(f))++this.index,13===f&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,d=!0;else if(47===f)if(f=this.source.charCodeAt(this.index+
1),47===f)this.index+=2,f=this._skipSingleLineComment(2),l&&(l=l.concat(f)),d=!0;else if(42===f)this.index+=2,f=this._skipMultiLineComment(),l&&(l=l.concat(f));else break;else if(d&&45===f)if(45===this.source.charCodeAt(this.index+1)&&62===this.source.charCodeAt(this.index+2))this.index+=3,f=this._skipSingleLineComment(3),l&&(l=l.concat(f));else break;else if(60!==f||this.isModule)break;else if("!--"===this.source.slice(this.index+1,this.index+4))this.index+=4,f=this._skipSingleLineComment(4),l&&
(l=l.concat(f));else break}return l};r.prototype._isKeyword=function(l){l=l.toLowerCase();switch(l.length){case 2:return"if"===l||"in"===l;case 3:return"var"===l||"for"===l;case 4:return"else"===l;case 5:return"break"===l;case 6:return"return"===l;case 8:return"function"===l||"continue"===l;default:return!1}};r.prototype._codePointAt=function(l){var d=this.source.charCodeAt(l);55296<=d&&56319>=d&&(l=this.source.charCodeAt(l+1),56320<=l&&57343>=l&&(d=1024*(d-55296)+l-56320+65536));return d};r.prototype._scanHexEscape=
function(l){l="u"===l?4:2;for(var d=0,f=0;f<l;++f)if(!this.eof()&&u.Character.isHexDigit(this.source.charCodeAt(this.index)))d=16*d+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;return String.fromCharCode(d)};r.prototype._scanUnicodeCodePointEscape=function(){var l=this.source[this.index],d=0;for("}"===l&&this.throwUnexpectedToken();!this.eof();){l=this.source[this.index++];if(!u.Character.isHexDigit(l.charCodeAt(0)))break;d=16*d+"0123456789abcdef".indexOf(l.toLowerCase())}(1114111<
d||"}"!==l)&&this.throwUnexpectedToken();return u.Character.fromCodePoint(d)};r.prototype._getIdentifier=function(){for(var l=this.index++;!this.eof();){var d=this.source.charCodeAt(this.index);if(92===d||55296<=d&&57343>d)return this.index=l,this._getComplexIdentifier();if(u.Character.isIdentifierPart(d))++this.index;else break}return this.source.slice(l,this.index)};r.prototype._getComplexIdentifier=function(){var l=this._codePointAt(this.index),d=u.Character.fromCodePoint(l);this.index+=d.length;
if(92===l){117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken();++this.index;if("{"===this.source[this.index]){++this.index;var f=this._scanUnicodeCodePointEscape()}else f=this._scanHexEscape("u"),null!==f&&"\\"!==f&&u.Character.isIdentifierStart(f.charCodeAt(0))||this.throwUnexpectedToken();d=f}for(;!this.eof();){l=this._codePointAt(this.index);if(!u.Character.isIdentifierPart(l))break;f=u.Character.fromCodePoint(l);d+=f;this.index+=f.length;92===l&&(d=d.substr(0,d.length-1),117!==
this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,f=this._scanUnicodeCodePointEscape()):(f=this._scanHexEscape("u"),null!==f&&"\\"!==f&&u.Character.isIdentifierPart(f.charCodeAt(0))||this.throwUnexpectedToken()),d+=f)}return d};r.prototype._octalToDecimal=function(l){var d="0"!==l,f="01234567".indexOf(l);!this.eof()&&u.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(d=!0,f=8*f+"01234567".indexOf(this.source[this.index++]),
"0123".includes(l)&&!this.eof()&&u.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(f=8*f+"01234567".indexOf(this.source[this.index++])));return{code:f,octal:d}};r.prototype._scanIdentifier=function(){var l=this.index,d=92===this.source.charCodeAt(l)?this._getComplexIdentifier():this._getIdentifier();var f=1===d.length?t.TokenType.Identifier:this._isKeyword(d)?t.TokenType.Keyword:"null"===d.toLowerCase()?t.TokenType.NullLiteral:"true"===d.toLowerCase()||"false"===d.toLowerCase()?t.TokenType.BooleanLiteral:
t.TokenType.Identifier;if(f!==t.TokenType.Identifier&&l+d.length!==this.index){var b=this.index;this.index=l;this._tolerateUnexpectedToken(n.Messages.InvalidEscapedReservedWord);this.index=b}return{type:f,value:d,lineNumber:this.lineNumber,lineStart:this.lineStart,start:l,end:this.index}};r.prototype._scanPunctuator=function(){var l=this.index,d=this.source[this.index];switch(d){case "(":case "{":"{"===d&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;break;case "}":++this.index;
this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;break;default:d=this.source.substr(this.index,4),"\x3e\x3e\x3e\x3d"===d?this.index+=4:(d=d.substr(0,3),"\x3d\x3d\x3d"===d||"!\x3d\x3d"===d||"\x3e\x3e\x3e"===d||"\x3c\x3c\x3d"===d||"\x3e\x3e\x3d"===d||"**\x3d"===d?this.index+=3:(d=d.substr(0,2),"\x26\x26"===d||"||"===d||"\x3d\x3d"===d||"!\x3d"===d||"+\x3d"===d||"-\x3d"===d||"*\x3d"===d||"/\x3d"===d||"++"===d||"--"===d||"\x3c\x3c"===d||"\x3e\x3e"===
d||"\x26\x3d"===d||"|\x3d"===d||"^\x3d"===d||"%\x3d"===d||"\x3c\x3d"===d||"\x3e\x3d"===d||"\x3d\x3e"===d||"**"===d?this.index+=2:(d=this.source[this.index],"\x3c\x3e\x3d!+-*%\x26|^/".includes(d)&&++this.index)))}this.index===l&&this.throwUnexpectedToken();return{type:t.TokenType.Punctuator,value:d,lineNumber:this.lineNumber,lineStart:this.lineStart,start:l,end:this.index}};r.prototype._scanHexLiteral=function(l){for(var d="";!this.eof()&&u.Character.isHexDigit(this.source.charCodeAt(this.index));)d+=
this.source[this.index++];0===d.length&&this.throwUnexpectedToken();u.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:t.TokenType.NumericLiteral,value:parseInt("0x"+d,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:l,end:this.index}};r.prototype._scanBinaryLiteral=function(l){for(var d="";!this.eof();){var f=this.source[this.index];if("0"!==f&&"1"!==f)break;d+=this.source[this.index++]}0===d.length&&this.throwUnexpectedToken();
this.eof()||(f=this.source.charCodeAt(this.index),(u.Character.isIdentifierStart(f)||u.Character.isDecimalDigit(f))&&this.throwUnexpectedToken());return{type:t.TokenType.NumericLiteral,value:parseInt(d,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:l,end:this.index}};r.prototype._scanOctalLiteral=function(l,d){var f="",b=!1;u.Character.isOctalDigit(l.charCodeAt(0))?(b=!0,f="0"+this.source[this.index++]):++this.index;for(;!this.eof()&&u.Character.isOctalDigit(this.source.charCodeAt(this.index));)f+=
this.source[this.index++];b||0!==f.length||this.throwUnexpectedToken();(u.Character.isIdentifierStart(this.source.charCodeAt(this.index))||u.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken();return{type:t.TokenType.NumericLiteral,value:parseInt(f,8),octal:b,lineNumber:this.lineNumber,lineStart:this.lineStart,start:d,end:this.index}};r.prototype._scanNumericLiteral=function(){var l=this.index,d=this.source[l];a.assert(u.Character.isDecimalDigit(d.charCodeAt(0))||
"."===d,"Numeric literal must start with a decimal digit or a decimal point");var f="";if("."!==d){f=this.source[this.index++];d=this.source[this.index];if("0"===f){if("x"===d||"X"===d)return++this.index,this._scanHexLiteral(l);if("b"===d||"B"===d)return++this.index,this._scanBinaryLiteral(l);if("o"===d||"O"===d)return this._scanOctalLiteral(d,l)}for(;u.Character.isDecimalDigit(this.source.charCodeAt(this.index));)f+=this.source[this.index++];d=this.source[this.index]}if("."===d){for(f+=this.source[this.index++];u.Character.isDecimalDigit(this.source.charCodeAt(this.index));)f+=
this.source[this.index++];d=this.source[this.index]}if("e"===d||"E"===d){f+=this.source[this.index++];d=this.source[this.index];if("+"===d||"-"===d)f+=this.source[this.index++];if(u.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;u.Character.isDecimalDigit(this.source.charCodeAt(this.index));)f+=this.source[this.index++];else this.throwUnexpectedToken()}u.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:t.TokenType.NumericLiteral,
value:parseFloat(f),lineNumber:this.lineNumber,lineStart:this.lineStart,start:l,end:this.index}};r.prototype._scanStringLiteral=function(){var l=this.index,d=this.source[l];a.assert("'"===d||'"'===d,"String literal must starts with a quote");++this.index;for(var f=!1,b="";!this.eof();){var c=this.source[this.index++];if(c===d){d="";break}if("\\"===c)if((c=this.source[this.index++])&&u.Character.isLineTerminator(c.charCodeAt(0)))++this.lineNumber,"\r"===c&&"\n"===this.source[this.index]&&++this.index,
this.lineStart=this.index;else switch(c){case "u":"{"===this.source[this.index]?(++this.index,b+=this._scanUnicodeCodePointEscape()):(c=this._scanHexEscape(c),null===c&&this.throwUnexpectedToken(),b+=c);break;case "x":c=this._scanHexEscape(c);null===c&&this.throwUnexpectedToken(n.Messages.InvalidHexEscapeSequence);b+=c;break;case "n":b+="\n";break;case "r":b+="\r";break;case "t":b+="\t";break;case "b":b+="\b";break;case "f":b+="\f";break;case "v":b+="\x0B";break;case "8":case "9":b+=c;this._tolerateUnexpectedToken();
break;default:c&&u.Character.isOctalDigit(c.charCodeAt(0))?(c=this._octalToDecimal(c),f=c.octal||f,b+=String.fromCharCode(c.code)):b+=c}else if(u.Character.isLineTerminator(c.charCodeAt(0)))break;else b+=c}""!==d&&(this.index=l,this.throwUnexpectedToken());return{type:t.TokenType.StringLiteral,value:b,octal:f,lineNumber:this.lineNumber,lineStart:this.lineStart,start:l,end:this.index}};r.prototype._scanTemplate=function(){var l="",d=!1,f=this.index,b="`"===this.source[f],c=!1,g=2;for(++this.index;!this.eof();){var e=
this.source[this.index++];if("`"===e){g=1;d=c=!0;break}if("$"===e){if("{"===this.source[this.index]){this.curlyStack.push("${");++this.index;d=!0;break}l+=e}else if("\\"===e)if(e=this.source[this.index++],u.Character.isLineTerminator(e.charCodeAt(0)))++this.lineNumber,"\r"===e&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(e){case "n":l+="\n";break;case "r":l+="\r";break;case "t":l+="\t";break;case "u":if("{"===this.source[this.index])++this.index,l+=this._scanUnicodeCodePointEscape();
else{var h=this.index,k=this._scanHexEscape(e);null!==k?l+=k:(this.index=h,l+=e)}break;case "x":e=this._scanHexEscape(e);null===e&&this.throwUnexpectedToken(n.Messages.InvalidHexEscapeSequence);l+=e;break;case "b":l+="\b";break;case "f":l+="\f";break;case "v":l+="\v";break;default:"0"===e?(u.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(n.Messages.TemplateOctalLiteral),l+="\x00"):u.Character.isOctalDigit(e.charCodeAt(0))?this.throwUnexpectedToken(n.Messages.TemplateOctalLiteral):
l+=e}else u.Character.isLineTerminator(e.charCodeAt(0))?(++this.lineNumber,"\r"===e&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,l+="\n"):l+=e}d||this.throwUnexpectedToken();b||this.curlyStack.pop();return{type:t.TokenType.Template,value:this.source.slice(f+1,this.index-g),cooked:l,head:b,tail:c,lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};r.prototype._testRegExp=function(l,d){var f=this,b=l;d.includes("u")&&(b=b.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,
function(c,g,e){c=parseInt(g||e,16);1114111<c&&f.throwUnexpectedToken(n.Messages.InvalidRegExp);return 65535>=c?String.fromCharCode(c):"\uffff"}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"\uffff"));try{RegExp(b)}catch(c){this.throwUnexpectedToken(n.Messages.InvalidRegExp)}try{return new RegExp(l,d)}catch(c){return null}};r.prototype._scanRegExpBody=function(){var l=this.source[this.index];a.assert("/"===l,"Regular expression literal must start with a slash");for(var d=this.source[this.index++],f=
!1,b=!1;!this.eof();)if(l=this.source[this.index++],d+=l,"\\"===l)l=this.source[this.index++],u.Character.isLineTerminator(l.charCodeAt(0))&&this.throwUnexpectedToken(n.Messages.UnterminatedRegExp),d+=l;else if(u.Character.isLineTerminator(l.charCodeAt(0)))this.throwUnexpectedToken(n.Messages.UnterminatedRegExp);else if(f)"]"===l&&(f=!1);else{if("/"===l){b=!0;break}"["===l&&(f=!0)}b||this.throwUnexpectedToken(n.Messages.UnterminatedRegExp);return d.substr(1,d.length-2)};r.prototype._scanRegExpFlags=
function(){for(var l="";!this.eof();){var d=this.source[this.index];if(!u.Character.isIdentifierPart(d.charCodeAt(0)))break;++this.index;if("\\"!==d||this.eof())l+=d;else{d=this.source[this.index];if("u"===d){++this.index;d=this.index;var f=this._scanHexEscape("u");if(null!==f)for(l+=f;d<this.index;++d);else this.index=d,l+="u"}this._tolerateUnexpectedToken()}}return l};r.prototype.scanRegExp=function(){var l=this.index,d=this._scanRegExpBody(),f=this._scanRegExpFlags(),b=this._testRegExp(d,f);return{type:t.TokenType.RegularExpression,
value:"",pattern:d,flags:f,regex:b,lineNumber:this.lineNumber,lineStart:this.lineStart,start:l,end:this.index}};r.prototype.lex=function(){if(this.eof())return{type:t.TokenType.EOF,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var l=this.source.charCodeAt(this.index);return u.Character.isIdentifierStart(l)?this._scanIdentifier():40===l||41===l||59===l?this._scanPunctuator():39===l||34===l?this._scanStringLiteral():46===l?u.Character.isDecimalDigit(this.source.charCodeAt(this.index+
1))?this._scanNumericLiteral():this._scanPunctuator():u.Character.isDecimalDigit(l)?this._scanNumericLiteral():96===l||125===l&&"${"===this.curlyStack[this.curlyStack.length-1]?this._scanTemplate():55296<=l&&57343>l&&u.Character.isIdentifierStart(this._codePointAt(this.index))?this._scanIdentifier():this._scanPunctuator()};return r}();y.Scanner=F})},"esri/arcade/lib/character":function(){define(["require","exports"],function(F,y){Object.defineProperty(y,"__esModule",{value:!0});y.Character=void 0;
var a=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
u=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
y.Character={fromCodePoint:function(n){return 65536>n?String.fromCharCode(n):String.fromCharCode(55296+(n-65536>>10))+String.fromCharCode(56320+(n-65536&1023))},isWhiteSpace:function(n){return 32===n||9===n||11===n||12===n||160===n||5760<=n&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(n)},isLineTerminator:function(n){return 10===n||13===n||8232===n||8233===n},isIdentifierStart:function(n){return 36===n||95===n||65<=n&&90>=n||97<=n&&122>=n||92===n||
128<=n&&a.test(y.Character.fromCodePoint(n))},isIdentifierPart:function(n){return 36===n||95===n||65<=n&&90>=n||97<=n&&122>=n||48<=n&&57>=n||92===n||128<=n&&u.test(y.Character.fromCodePoint(n))},isDecimalDigit:function(n){return 48<=n&&57>=n},isHexDigit:function(n){return 48<=n&&57>=n||65<=n&&70>=n||97<=n&&102>=n},isOctalDigit:function(n){return 48<=n&&55>=n}}})},"esri/arcade/lib/token":function(){define(["require","exports"],function(F,y){Object.defineProperty(y,"__esModule",{value:!0});y.TokenName=
y.TokenType=void 0;var a=F=y.TokenType||(y.TokenType={});a[a.BooleanLiteral=1]="BooleanLiteral";a[a.EOF=2]="EOF";a[a.Identifier=3]="Identifier";a[a.Keyword=4]="Keyword";a[a.NullLiteral=5]="NullLiteral";a[a.NumericLiteral=6]="NumericLiteral";a[a.Punctuator=7]="Punctuator";a[a.StringLiteral=8]="StringLiteral";a[a.RegularExpression=9]="RegularExpression";a[a.Template=10]="Template";y.TokenName={};y.TokenName[F.BooleanLiteral]="Boolean";y.TokenName[F.EOF]="\x3cend\x3e";y.TokenName[F.Identifier]="Identifier";
y.TokenName[F.Keyword]="Keyword";y.TokenName[F.NullLiteral]="Null";y.TokenName[F.NumericLiteral]="Numeric";y.TokenName[F.Punctuator]="Punctuator";y.TokenName[F.StringLiteral]="String";y.TokenName[F.RegularExpression]="RegularExpression";y.TokenName[F.Template]="Template"})},"esri/arcade/lib/tokenizer":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ./error-handler ./nodes ./scanner ./token".split(" "),function(F,y,a,u,n,t,r,l){Object.defineProperty(y,
"__esModule",{value:!0});y.Tokenizer=void 0;var d=function(){function f(){this.values=[];this.curly=this.paren=-1}f.prototype.beforeFunctionExpression=function(b){return u(u(u(u(["(","{","[","return",","],t.AssignmentOperators),t.BinaryOperators),t.LogicalOperators),t.UnaryOperators).includes(b)};f.prototype.isRegexStart=function(){var b=this.values[this.values.length-1],c=null!==b;switch(b){case "this":case "]":c=!1;break;case ")":b=this.values[this.paren-1];c="if"===b||"while"===b||"for"===b||"with"===
b;break;case "}":c=!0,"function"===this.values[this.curly-3]?c=(b=this.values[this.curly-4])?!this.beforeFunctionExpression(b):!1:"function"===this.values[this.curly-4]&&(c=(b=this.values[this.curly-5])?!this.beforeFunctionExpression(b):!0)}return c};f.prototype.push=function(b){b.type===l.TokenType.Punctuator||b.type===l.TokenType.Keyword?("{"===b.value?this.curly=this.values.length:"("===b.value&&(this.paren=this.values.length),this.values.push(b.value)):this.values.push(null)};return f}();F=function(){function f(b,
c){this.errorHandler=new n.ErrorHandler;this.errorHandler.tolerant=c?"boolean"===typeof c.tolerant&&c.tolerant:!1;this.scanner=new r.Scanner(b,this.errorHandler);this.scanner.trackComment=c?"boolean"===typeof c.comment&&c.comment:!1;this.trackRange=c?"boolean"===typeof c.range&&c.range:!1;this.trackLoc=c?"boolean"===typeof c.loc&&c.loc:!1;this.buffer=[];this.reader=new d}f.prototype.errors=function(){return this.errorHandler.errors};f.prototype.getNextToken=function(){if(0===this.buffer.length){var b=
this.scanner.scanComments();if(b)for(var c=0;c<b.length;++c){var g=b[c],e=this.scanner.source.slice(g.slice[0],g.slice[1]);e={type:g.multiLine?"BlockComment":"LineComment",value:e};this.trackRange&&(e.range=g.range);this.trackLoc&&(e.loc=g.loc);this.buffer.push(e)}if(!this.scanner.eof()){b=null;this.trackLoc&&(b={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{line:0,column:0}});c=void 0;if("/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()){g=
this.scanner.saveState();try{c=this.scanner.scanRegExp()}catch(h){this.scanner.restoreState(g),c=this.scanner.lex()}}else c=this.scanner.lex();this.reader.push(c);g={type:l.TokenName[c.type],value:this.scanner.source.slice(c.start,c.end)};this.trackRange&&(g.range=[c.start,c.end]);this.trackLoc&&b&&(b.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},g.loc=b);c.type===l.TokenType.RegularExpression&&(g.regex={pattern:c.pattern,flags:c.flags});this.buffer.push(g)}}return this.buffer.shift()};
return f}();y.Tokenizer=F})},"esri/arcadeProfiles/visualizationProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../support/expressionUtils ./utils".split(" "),function(F,y,a,u,n,t,r){F=new (F(null,{declaredClass:"esri.arcadeProfiles.VisualizationProfile",initialize:function(l){var d=[];r.hasGeometryOperations(l)&&d.push(t.enableGeometryOperations());return n(d)}}));a("extend-esri")&&y.setObject("arcadeProfiles.visualizationProfile",F,u);return F})},
"esri/arcadeProfiles/utils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","../kernel","../support/expressionUtils"],function(F,y,a,u,n){var t=/(\/(MapServer|FeatureServer)).*/ig,r={hasGeometryOperations:function(l){return y.some(l,function(d){return d.hasGeometryOperations?d.hasGeometryOperations():n.hasGeometryOperations(d)})},hasFeatureSetOperations:function(l){return y.some(l,function(d){return d.hasFeatureSetOperations?d.hasFeatureSetOperations():n.hasFeatureSetOperations(d)})},
hasVariables:function(l,d){return y.some(l,function(f){return y.some(d,function(b){return f.hasVariable?f.hasVariable(b):n.hasVariable(f,b)})})},isAsync:function(l){return y.some(l,function(d){return d.async})},getServiceUrl:function(l){return t.test(l)?l.replace(t,"$1"):null}};a("extend-esri")&&F.setObject("arcadeProfiles.utils",r,u);return r})},"esri/renderers/SimpleRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer".split(" "),
function(F,y,a,u,n,t,r){F=F(r,{declaredClass:"esri.renderer.SimpleRenderer",constructor:function(l,d){if(l&&!l.declaredClass){var f=l;this.symbol=(l=f.symbol)&&(l.declaredClass?l:t.fromJson(l,d));this.label=f.label;this.description=f.description}else this.symbol=l},getSymbol:function(l){return this.symbol},toJson:function(){var l=y.mixin(this.inherited(arguments),{type:"simple",label:this.label,description:this.description,symbol:this.symbol&&this.symbol.toJson()});return n.fixJson(l)}});a("extend-esri")&&
y.setObject("renderer.SimpleRenderer",F,u);return F})},"esri/renderers/UniqueValueRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),function(F,y,a,u,n,t,r,l,d){F=F(l,{declaredClass:"esri.renderer.UniqueValueRenderer",constructor:function(f,b,c,g,e,h){this.values=[];this._symbols={};this.infos=[];f&&!f.declaredClass?(b=f,c=h&&h.geometryType,this.defaultSymbol=(f=b.defaultSymbol)&&
(f.declaredClass?f:r.fromJson(f,h)),this.attributeField=b.field1,this.attributeField2=b.field2,this.attributeField3=b.field3,this.fieldDelimiter=b.fieldDelimiter,this.defaultLabel=b.defaultLabel,this.setValueExpression(b.valueExpression),this.valueExpressionTitle=b.valueExpressionTitle,this.legendOptions=b.legendOptions,b.backgroundFillSymbol&&(this.backgroundFillSymbol=r.fromJson(b.backgroundFillSymbol,c?{geometryType:"esriGeometryPolygon"}:null)),"esriGeometryPolygon"===c&&this.hasVisualVariables("sizeInfo",
!1)&&(h={geometryType:"esriGeometryPoint"}),y.forEach(b.uniqueValueInfos,function(k){this._addValueInfo(k,h)},this)):(this.defaultSymbol=f,this.attributeField=b,this.attributeField2=c,this.attributeField3=g,this.fieldDelimiter=e);this._multiple=!!this.attributeField2},addValue:function(f,b){f=a.isObject(f)?f:{value:f,symbol:b};this._addValueInfo(f)},removeValue:function(f){var b=y.indexOf(this.values,f);-1!==b&&(this.values.splice(b,1),this._hasNullKeyword=this._evalNullKeyword(this.values),delete this._symbols[f],
this.infos.splice(b,1))},getUniqueValueInfo:function(f){var b=this.attributeField,c=f.attributes;if(this.valueExpression)b=this._getDataValue(f,this._uvInfo,null,this._cache.uvInfo),b=this._normalizeNullValue(b);else if(this._multiple){f=this.attributeField2;var g=this.attributeField3,e=[];b&&e.push(this._normalizeNullValue(c[b]));f&&e.push(this._normalizeNullValue(c[f]));g&&e.push(this._normalizeNullValue(c[g]));b=e.join(this.fieldDelimiter||"")}else b=a.isFunction(b)?b(f):c[b],b=this._normalizeNullValue(b);
return this._symbols[b]},setValueExpression:function(f){this.valueExpression=f;this._uvInfo={valueExpression:f};this._cache.uvInfo=this._createCache(this._uvInfo,!0)},getFieldsUsedInExpressions:function(f){var b=this.inherited(arguments);this.valueExpression&&(b=b.concat(d.extractFieldNames(this.valueExpression,f)));b.sort();return y.filter(b,function(c,g){return 0===g||b[g-1]!==c})},getSymbol:function(f){return(f=this.getUniqueValueInfo(f))&&f.symbol||this.defaultSymbol},_addValueInfo:function(f,
b){var c=f.value;this.values.push(c);this._hasNullKeyword=this._evalNullKeyword(this.values);this.infos.push(f);var g=f.symbol;g&&!g.declaredClass&&(f.symbol=r.fromJson(g,b));this._symbols[c]=f},_nullCode:"\x3cNull\x3e",_normalizeNullValue:function(f){return this._hasNullKeyword&&null==f?this._nullCode:f},_evalNullKeyword:function(f){var b=this.fieldDelimiter||"",c=new RegExp("(^|"+b+")("+this._nullCode+")("+b+"|$)");return y.some(f,function(g){return c.test(g)})},toJson:function(){var f=t.fixJson;
var b={type:"uniqueValue",field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,fieldDelimiter:this.fieldDelimiter,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:a.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,uniqueValueInfos:y.map(this.infos||[],function(c){c=a.mixin({},c);c.symbol=c.symbol&&c.symbol.toJson();c.value+="";return f(c)})};this.backgroundFillSymbol&&
(b.backgroundFillSymbol=this.backgroundFillSymbol.toJson());b=a.mixin(this.inherited(arguments),b);return f(b)}});u("extend-esri")&&a.setObject("renderer.UniqueValueRenderer",F,n);return F})},"esri/renderers/ClassBreaksRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),function(F,y,a,u,n,t,r,l,d){F=F(l,{declaredClass:"esri.renderer.ClassBreaksRenderer",constructor:function(f,
b,c){this.breaks=[];this._symbols={};this.infos=[];this.isMaxInclusive=!0;if(f&&!f.declaredClass){var g=f;b=c&&c.geometryType;this.attributeField=g.field;this.setValueExpression(g.valueExpression);this.valueExpressionTitle=g.valueExpressionTitle;this.legendOptions=g.legendOptions;this.defaultSymbol=(f=g.defaultSymbol)&&(f.declaredClass?f:r.fromJson(f,c));this.backgroundFillSymbol=(f=g.backgroundFillSymbol)&&(f.declaredClass?f:r.fromJson(f,b?{geometryType:"esriGeometryPolygon"}:null));this._copy(["defaultLabel",
"classificationMethod:rest","normalizationType:rest","normalizationField","normalizationTotal"],g,this);var e=g.minValue;(f=g.classBreakInfos)&&f[0]&&t.isDefined(f[0].classMaxValue)&&y.forEach(f,function(h){var k=h.classMaxValue;h.minValue=e;e=h.maxValue=k},this);"esriGeometryPolygon"===b&&(this.hasVisualVariables("sizeInfo",!1)||r.isPointSymbol(r.getFirstSupportedSymbol(y.map(f,function(h){return h.symbol}))))&&(c={geometryType:"esriGeometryPoint"});y.forEach(f,function(h){this._addBreakInfo(h,c)},
this)}else this.defaultSymbol=f,this.attributeField=b},addBreak:function(f,b,c){f=a.isObject(f)?f:{minValue:f,maxValue:b,symbol:c};this._addBreakInfo(f)},removeBreak:function(f,b){var c=this.breaks,g,e=c.length,h=this._symbols;for(g=0;g<e;g++){var k=c[g];if(k[0]==f&&k[1]==b){c.splice(g,1);delete h[f+"-"+b];this.infos.splice(g,1);break}}},clearBreaks:function(){this.breaks=[];this._symbols={};this.infos=[]},getBreakIndex:function(f){var b=this.attributeField,c=f.attributes,g=this.breaks,e=g.length,
h=this.isMaxInclusive;if(this.valueExpression)f=this._getDataValue(f,this._cbInfo,null,this._cache.cbInfo);else if(a.isFunction(b))f=b(f);else if(f=parseFloat(c[b]),b=this.normalizationType,b){var k=parseFloat(this.normalizationTotal);c=parseFloat(c[this.normalizationField]);if("log"===b)f=Math.log(f)*Math.LOG10E;else if("percent-of-total"===b&&!isNaN(k))f=f/k*100;else if("field"===b){if(isNaN(f)||isNaN(c))return-1;f/=c}}if(null!=f&&!isNaN(f)&&"number"===typeof f)for(c=0;c<e;c++)if(b=g[c],b[0]<=f&&
(h?f<=b[1]:f<b[1]))return c;return-1},getBreakInfo:function(f){f=this.getBreakIndex(f);return-1!==f?this.infos[f]:null},getSymbol:function(f){return(f=this.breaks[this.getBreakIndex(f)])?this._symbols[f[0]+"-"+f[1]]:this.defaultSymbol},setMaxInclusive:function(f){this.isMaxInclusive=f},setValueExpression:function(f){this.valueExpression=f;this._cbInfo={valueExpression:f};this._cache.cbInfo=this._createCache(this._cbInfo)},getFieldsUsedInExpressions:function(f){var b=this.inherited(arguments);this.valueExpression&&
(b=b.concat(d.extractFieldNames(this.valueExpression,f)));b.sort();return y.filter(b,function(c,g){return 0===g||b[g-1]!==c})},isContinuousRenderer:function(){var f=!1;if(this.infos&&1===this.infos.length){var b=this.attributeField,c=this.normalizationField,g=this.valueExpression;f=this.getVisualVariablesForType("colorInfo",!1)||[];var e=this.getVisualVariablesForType("sizeInfo",!1)||[],h=this.getVisualVariablesForType("opacityInfo",!1)||[];f=f.concat(e).concat(h);f=y.some(f,function(k){return(k.field===
b||k.valueExpression===g)&&k.normalizationField==c})}return f},_normalizationTypeEnums:[["field","esriNormalizeByField"],["log","esriNormalizeByLog"],["percent-of-total","esriNormalizeByPercentOfTotal"]],_classificationMethodEnums:[["natural-breaks","esriClassifyNaturalBreaks"],["equal-interval","esriClassifyEqualInterval"],["quantile","esriClassifyQuantile"],["standard-deviation","esriClassifyStandardDeviation"],["geometrical-interval","esriClassifyGeometricalInterval"],["defined-interval","esriClassifyDefinedInterval"],
["manual-interval","esriClassifyManual"]],_copy:function(f,b,c){y.forEach(f,function(g){var e=g.split(":");if(1<e.length){g=e[0];var h=this["_"+g+"Enums"];if("rest"===e[1]){var k="1";var m="0"}else"sdk"===e[1]&&(k="0",m="1")}e=b[g];if(void 0!==e&&(c[g]=e,h&&k)){var w,p=h.length;for(w=0;w<p;w++)if(h[w][k]===e){c[g]=h[w][m];break}}},this)},_addBreakInfo:function(f,b){var c=f.minValue,g=f.maxValue;this.breaks.push([c,g]);this.infos.push(f);var e=f.symbol;e&&!e.declaredClass&&(f.symbol=r.fromJson(e,b));
this._symbols[c+"-"+g]=f.symbol},toJson:function(){var f=this.infos||[],b=t.fixJson,c=f[0]&&f[0].minValue,g=this.backgroundFillSymbol;f=a.mixin(this.inherited(arguments),{type:"classBreaks",field:this.attributeField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:a.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),backgroundFillSymbol:g&&g.toJson(),minValue:-Infinity===c?-Number.MAX_VALUE:c,classBreakInfos:y.map(f,
function(e){e=a.mixin({},e);e.symbol=e.symbol&&e.symbol.toJson();e.classMaxValue=Infinity===e.maxValue?Number.MAX_VALUE:e.maxValue;delete e.minValue;delete e.maxValue;return b(e)})});this._copy(["defaultLabel","classificationMethod:sdk","normalizationType:sdk","normalizationField","normalizationTotal"],this,f);f.hasOwnProperty("normalizationType")&&!f.normalizationType&&delete f.normalizationType;f.hasOwnProperty("classificationMethod")&&!f.classificationMethod&&delete f.classificationMethod;return b(f)}});
u("extend-esri")&&a.setObject("renderer.ClassBreaksRenderer",F,n);return F})},"esri/renderers/TemporalRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Renderer"],function(F,y,a,u,n){F=F(n,{declaredClass:"esri.renderer.TemporalRenderer",constructor:function(t,r,l,d){this.observationRenderer=t;this.latestObservationRenderer=r;this.trackRenderer=l;this.observationAger=d},getSymbol:function(t){var r=t.getLayer(),l=this.getObservationRenderer(t),d=l&&l.getSymbol(t),
f=this.observationAger;r.timeInfo&&r._map.timeExtent&&l===this.observationRenderer&&f&&d&&(d=f.getAgedSymbol(d,t));return d},getObservationRenderer:function(t){return 0===t.getLayer()._getKind(t)?this.observationRenderer:this.latestObservationRenderer||this.observationRenderer},toJson:function(){var t={type:"temporal"};t.observationRenderer=this.observationRenderer.toJson();this.latestObservationRenderer&&(t.latestObservationRenderer=this.latestObservationRenderer.toJson());this.trackRenderer&&(t.trackRenderer=
this.trackRenderer.toJson());this.observationAger&&(t.observationAger=this.observationAger.toJson());return t}});a("extend-esri")&&y.setObject("renderer.TemporalRenderer",F,u);return F})},"esri/renderers/SymbolAger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(F,y,a,u){F=F(null,{declaredClass:"esri.renderer.SymbolAger",getAgedSymbol:function(n,t){},_setSymbolSize:function(n,t){switch(n.type){case "simplemarkersymbol":n.setSize(t);break;case "picturemarkersymbol":n.setWidth(t);
n.setHeight(t);break;case "simplelinesymbol":case "cartographiclinesymbol":n.setWidth(t);break;case "simplefillsymbol":case "picturefillsymbol":n.outline&&n.outline.setWidth(t)}}});a("extend-esri")&&y.setObject("renderer.SymbolAger",F,u);return F})},"esri/renderers/TimeClassBreaksAger":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has dojo/date ../kernel ../lang ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),function(F,y,a,u,n,t,r,l,d,f){var b=F(f,{declaredClass:"esri.renderer.TimeClassBreaksAger",
constructor:function(c,g){this.infos=c;this.timeUnits=g||"day";c.sort(function(e,h){return e.minAge<h.minAge?-1:e.minAge>h.minAge?1:0})},getAgedSymbol:function(c,g){var e=g.getLayer();g=g.attributes;var h=r.isDefined;c=l.fromJson(c.toJson());var k=e._map.timeExtent.endTime;if(!k)return c;var m=n.difference(new Date(g[e._startTimeField]),k,this.timeUnits);y.some(this.infos,function(w){if(m>=w.minAge&&m<=w.maxAge){var p=w.color,A=w.size;w=w.alpha;p&&c.setColor(p);h(A)&&this._setSymbolSize(c,A);h(w)&&
c.color&&(c.color.a=w);return!0}},this);return c},toJson:function(){var c={agerClassBreakInfos:[]},g;c.timeUnits=this._getRestUnits(this.timeUnits);for(g=0;g<this.infos.length;g+=1){var e=this.infos[g];var h={};h.oldestAge=Infinity===e.maxAge?null:e.maxAge;h.size=e.size;e.color&&(h.color=d.toJsonColor(e.color));e.alpha&&(h.alpha=Math.round(255*e.alpha));c.agerClassBreakInfos[g]=h}return c},_getRestUnits:function(c){var g="esriTimeUnitsDays";switch(c){case b.UNIT_SECONDS:g="esriTimeUnitsSeconds";break;
case b.UNIT_MILLISECONDS:g="esriTimeUnitsMilliseconds";break;case b.UNIT_HOURS:g="esriTimeUnitsHours";break;case b.UNIT_MINUTES:g="esriTimeUnitsMinutes";break;case b.UNIT_MONTHS:g="esriTimeUnitsMonths";break;case b.UNIT_WEEKS:g="esriTimeUnitsWeeks";break;case b.UNIT_YEARS:g="esriTimeUnitsYears"}return g}});a.mixin(b,{UNIT_DAYS:"day",UNIT_HOURS:"hour",UNIT_MILLISECONDS:"millisecond",UNIT_MINUTES:"minute",UNIT_MONTHS:"month",UNIT_SECONDS:"second",UNIT_WEEKS:"week",UNIT_YEARS:"year"});u("extend-esri")&&
a.setObject("renderer.TimeClassBreaksAger",b,t);return b})},"esri/renderers/TimeRampAger":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has ../kernel ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),function(F,y,a,u,n,t,r,l){F=F(l,{declaredClass:"esri.renderer.TimeRampAger",constructor:function(d,f,b){this.colorRange=d;this.sizeRange=f;this.alphaRange=b},getAgedSymbol:function(d,f){var b=f.getLayer(),c=f.attributes;d=t.fromJson(d.toJson());var g=b._map.timeExtent;
f=g.startTime;g=g.endTime;if(!f||!g)return d;f=f.getTime();g=g.getTime();b=new Date(c[b._startTimeField]);b=b.getTime();b<f&&(b=f);b=g===f?1:(b-f)/(g-f);if(f=this.sizeRange)c=f[0],g=f[1],f=Math.abs(g-c)*b,this._setSymbolSize(d,c<g?c+f:c-f);if(f=this.colorRange){g=f[0];var e=f[1],h=Math.round;c=new a;var k=g.r,m=e.r;f=Math.abs(m-k)*b;c.r=h(k<m?k+f:k-f);k=g.g;m=e.g;f=Math.abs(m-k)*b;c.g=h(k<m?k+f:k-f);k=g.b;m=e.b;f=Math.abs(m-k)*b;c.b=h(k<m?k+f:k-f);g=g.a;e=e.a;f=Math.abs(e-g)*b;c.a=g<e?g+f:g-f;d.setColor(c)}c=
d.color;(f=this.alphaRange)&&c&&(g=f[0],e=f[1],f=Math.abs(e-g)*b,c.a=g<e?g+f:g-f);return d},toJson:function(){var d={};this.sizeRange&&(d.sizeRange=this.sizeRange);this.colorRange&&(d.colorRange=[r.toJsonColor(this.colorRange[0]),r.toJsonColor(this.colorRange[1])]);this.alphaRange&&(d.alphaRange=[Math.round(255*this.alphaRange[0]),Math.round(255*this.alphaRange[1])]);return d}});u("extend-esri")&&y.setObject("renderer.TimeRampAger",F,n);return F})},"esri/renderers/StretchRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),
function(F,y,a,u,n,t,r,l){var d={TYPE_NONE:"none",TYPE_STANDARDDEVIATION:"standardDeviation",TYPE_HISTOGRAMEQUALIZATION:"histogramEqualization",TYPE_MINMAX:"minMax",TYPE_PERCENTCLIP:"percentClip",TYPE_SIGMOID:"sigmoid"};F=F(null,{declaredClass:"esri.renderer.StretchRenderer",constructor:function(f){f=f||{};this.stretchType=d.TYPE_NONE;this.dra=!0;this.statistics=[];this.gamma=[];this.computeGamma=this.useGamma=!1;this.sigmoidStrengthLevel=this.numberOfStandardDeviations=this.minPercent=this.maxPercent=
this.min=this.max=null;a.mixin(this,f);this.colorRamp=l.fromJson(f.colorRamp)},toJson:function(){var f={type:"rasterStretch",stretchType:this.stretchType,colorRamp:this.colorRamp&&this.colorRamp.toJson(),min:this.min,max:this.max,numberOfStandardDeviations:this.numberOfStandardDeviations,statistics:a.clone(this.statistics),dra:this.dra,minPercent:this.minPercent,maxPercent:this.maxPercent,useGamma:this.useGamma,gamma:a.clone(this.gamma),computeGamma:this.computeGamma,sigmoidStrengthLevel:this.sigmoidStrengthLevel};
return t.fixJson(f)},toRenderingRule:function(f){f=f||{};var b=new r;b.functionName="Stretch";var c=this._convertStretchTypeEnumToIndex(this.stretchType),g={StretchType:c,Statistics:this.statistics,DRA:this.dra,UseGamma:this.useGamma,Gamma:this.gamma,ComputeGamma:this.computeGamma};t.isDefined(this.min)&&(g.Min=this.min);t.isDefined(this.min)&&(g.Max=this.max);3===c?(g.NumberOfStandardDeviations=this.numberOfStandardDeviations,b.outputPixelType="U8"):6===c?(g.MinPercent=parseFloat(this.minPercent),
g.MaxPercent=parseFloat(this.maxPercent),b.outputPixelType="U8"):5===c?b.outputPixelType="U8":9===c&&(g.SigmoidStrengthLevel=this.sigmoidStrengthLevel);b.functionArguments=g;b.variableName="Raster";return this.colorRamp?(c=new r,c.functionArguments=f.convertToColormap?{Colormap:l.convertColorRampToColormap(this.colorRamp,256)}:{colorRamp:this.colorRamp.toJson()},c.variableName="Raster",c.functionName="Colormap",c.functionArguments.Raster=b,c):b},_convertStretchTypeEnumToIndex:function(f){var b=0;
f===d.TYPE_STANDARDDEVIATION?b=3:f===d.TYPE_HISTOGRAMEQUALIZATION?b=4:f===d.TYPE_MINMAX?b=5:f===d.TYPE_PERCENTCLIP?b=6:f===d.TYPE_SIGMOID&&(b=9);return b},_convertStretchTypeIndexToEnum:function(f){var b=d.TYPE_NONE;3===f?b=d.TYPE_STANDARDDEVIATION:4===f?b=d.TYPE_HISTOGRAMEQUALIZATION:5===f?b=d.TYPE_MINMAX:6===f?b=d.TYPE_PERCENTCLIP:9===f&&(b=d.TYPE_SIGMOID);return b}});a.mixin(F,d);u("extend-esri")&&a.setObject("renderer.StretchRenderer",F,n);return F})},"esri/layers/RasterFunction":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../lang"],function(F,y,a,u,n){var t=F(null,{declaredClass:"esri.layers.RasterFunction",functionName:null,arguments:null,functionArguments:null,variableName:null,outputPixelType:null,_isTemplate:null,_templateJson:null,constructor:function(r){if(y.isObject(r)){this._isRFTJson(r)&&(this._isTemplate=!0,this._templateJson=r);var l=0;this.functionName=r.rasterFunction||r.name;this.functionArguments=y.clone(r.rasterFunctionArguments||r.arguments);y.mixin(this,r);
if(r=this.functionArguments)if(r.Raster=this._toRasterFunction(r.Raster),r.Raster2=this._toRasterFunction(r.Raster2),r.DEM=this._toRasterFunction(r.DEM),r.FillRaster=this._toRasterFunction(r.FillRaster),r.Rasters&&r.Rasters.length)for(l=0;l<r.Rasters.length;l++)r.Rasters[l]=this._toRasterFunction(r.Rasters[l])}},_isRFTJson:function(r){return r.name&&r.arguments&&r.function&&r.hasOwnProperty("functionType")},_toRasterFunction:function(r){return r&&(r.rasterFunction||r.functionName)?new t(r):r},_rfToJson:function(r){r&&
"esri.layers.RasterFunction"===r.declaredClass&&(r=r.toJson());return r},toJson:function(){if(this._isTemplate)return this._templateJson;var r=y.clone(this.functionArguments||this.arguments);if(r&&(r.Raster=this._rfToJson(r.Raster),r.Raster2=this._rfToJson(r.Raster2),r.DEM=this._rfToJson(r.DEM),r.FillRaster=this._rfToJson(r.FillRaster),r.Rasters&&r.Rasters.length)){var l,d=[];for(l=0;l<r.Rasters.length;l++)d.push(this._rfToJson(r.Rasters[l]));r.Rasters=d}return n.filter({rasterFunction:this.functionName,
rasterFunctionArguments:r,variableName:this.variableName,outputPixelType:this.outputPixelType?this.outputPixelType:null},function(f){if(null!==f&&void 0!==f)return!0})}});a("extend-esri")&&y.setObject("layers.RasterFunction",t,u);return t})},"esri/renderers/colorRampUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/store/Memory ../tasks/AlgorithmicColorRamp ../tasks/MultipartColorRamp ../Color ./colorUtils".split(" "),function(F,y,a,u,n,t,r){function l(p){if(null==p||"algorithmic"!==
p.type&&!p.fromColor)return p;var A=p.declaredClass?new u:F.clone(p);A.fromColor=p.toColor;A.toColor=p.fromColor;A.algorithm=p.algorithm;return A}function d(p){if(null==p)return null;if("multipart"===p.type||p.colorRamps&&0<p.colorRamps.length){var A=p.declaredClass?new n:F.clone(p);A.colorRamps=y.map(p.colorRamps.slice().reverse(),function(C){return l(C)});return A}return l(p)}function f(p,A,C){if(!p)return{id:null,isInverted:!1};var z=p.name;z&&(p.fromColor||p.colorRamps)&&(p.name=void 0);var q=
b(p,A,C);if(q)return z&&(p.name=z),{id:q,isInverted:!1};q=b(p,A,C,!0);z&&(p.name=z);return q?{id:q,isInverted:!0}:z&&(q=b(p,A,C))?{id:q,isInverted:!1}:{id:null,isInverted:!1}}function b(p,A,C,z){if(p){z&&(p=d(p));A=A||k;C=C||m;var q=null;z=p.declaredClass;var v,B;if((v="string"===typeof p?p:p.name)&&y.some(C,function(D){if(D.name===v)return q=D.id,!0})&&q)return q;"esri.tasks.AlgorithmicColorRamp"===z?y.some(A,function(D){if(g(p.fromColor.toRgb(),D.fromColor)&&g(p.toColor.toRgb(),D.toColor))return q=
D.id,!0},this):"esri.tasks.MultipartColorRamp"===z&&y.some(A,function(D){if(p.colorRamps&&D.colorRamps&&p.colorRamps.length===D.colorRamps.length&&(B=p.colorRamps,!y.some(D.colorRamps,function(x,E){if(!g(B[E].fromColor.toRgb(),x.fromColor)||!g(B[E].toColor.toRgb(),x.toColor))return!0},this))){if(q)return!0;q=D.id}},this);return q}}function c(p){var A=new u,C=p.algorithm;A.fromColor=t.toDojoColor(p.fromColor);A.toColor=t.toDojoColor(p.toColor);C?"esriCIELabAlgorithm"===C?A.algorithm="cie-lab":"esriHSVAlgorithm"===
C?A.algorithm="hsv":"esriLabLChAlgorithm"===C&&(A.algorithm="lab-lch"):A.algorithm="hsv";return A}function g(p,A){if(!p||!A)return!1;p=p.slice(0,3);A=A.slice(0,3);return!y.some(p,function(C,z){if(C>A[z]+2||C<A[z]-2)return!0})}function e(p,A,C){p=r.toLAB(p);A=r.toLAB(A);return r.toRGB({l:p.l*(1-C)+C*A.l,a:p.a*(1-C)+C*A.a,b:p.b*(1-C)+C*A.b})}var h={},k=[{id:"none",selected:!0},{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,
181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,
229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",
colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"cividis_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,32,77,255],toColor:[0,33,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,33,79,255],toColor:[0,34,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,34,80,255],toColor:[0,35,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[0,35,82,255],toColor:[0,35,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,35,84,255],toColor:[0,36,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,36,85,255],toColor:[0,37,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,37,87,255],toColor:[0,38,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,38,89,255],toColor:[0,38,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
38,91,255],toColor:[0,39,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,39,92,255],toColor:[0,40,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,40,94,255],toColor:[0,40,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,40,96,255],toColor:[0,41,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,41,98,255],toColor:[0,42,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,42,100,
255],toColor:[0,42,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,42,101,255],toColor:[0,43,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,43,103,255],toColor:[0,44,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,44,105,255],toColor:[0,45,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,45,107,255],toColor:[0,45,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,45,
109,255],toColor:[0,46,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,46,110,255],toColor:[0,47,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,111,255],toColor:[0,47,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,112,255],toColor:[0,47,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,112,255],toColor:[0,48,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
48,112,255],toColor:[0,49,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,49,112,255],toColor:[0,49,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,49,112,255],toColor:[0,50,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,50,112,255],toColor:[0,51,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,51,111,255],toColor:[0,52,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
52,111,255],toColor:[0,52,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,52,111,255],toColor:[0,53,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,53,111,255],toColor:[1,54,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,54,111,255],toColor:[6,55,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,55,110,255],toColor:[11,55,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,
55,110,255],toColor:[15,56,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[15,56,110,255],toColor:[18,57,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,57,110,255],toColor:[21,57,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,57,110,255],toColor:[24,58,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,58,110,255],toColor:[26,59,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[26,59,109,255],toColor:[29,60,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[29,60,109,255],toColor:[31,60,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,60,109,255],toColor:[33,61,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,61,109,255],toColor:[35,62,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,62,109,255],toColor:[37,63,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[37,63,109,255],toColor:[38,63,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,63,109,255],toColor:[40,64,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,64,108,255],toColor:[42,65,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,65,108,255],toColor:[43,65,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,65,108,255],toColor:[45,66,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[45,66,108,255],toColor:[46,67,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,67,108,255],toColor:[48,68,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,68,108,255],toColor:[49,68,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,68,108,255],toColor:[51,69,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,69,108,255],toColor:[52,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[52,70,108,255],toColor:[53,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,70,108,255],toColor:[55,71,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,71,108,255],toColor:[56,72,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,72,108,255],toColor:[57,73,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,73,108,255],toColor:[58,73,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[58,73,108,255],toColor:[60,74,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,74,108,255],toColor:[61,75,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,75,108,255],toColor:[62,75,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,75,108,255],toColor:[63,76,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,76,108,255],toColor:[64,77,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[64,77,108,255],toColor:[65,78,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,78,108,255],toColor:[67,78,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,78,108,255],toColor:[68,79,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,79,108,255],toColor:[69,80,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,80,108,255],toColor:[70,80,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[70,80,108,255],toColor:[71,81,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,81,108,255],toColor:[72,82,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,82,108,255],toColor:[73,83,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,83,108,255],toColor:[74,83,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[74,83,108,255],toColor:[75,84,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[75,84,108,255],toColor:[76,85,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,85,108,255],toColor:[77,86,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[77,86,108,255],toColor:[78,86,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,86,108,255],toColor:[79,87,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[79,87,108,255],toColor:[80,88,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[80,88,108,255],toColor:[81,88,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[81,88,109,255],toColor:[82,89,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[82,89,109,255],toColor:[83,90,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,90,109,255],toColor:[84,91,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[84,91,109,255],toColor:[85,91,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[85,91,109,255],toColor:[86,92,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,92,109,255],toColor:[87,93,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[87,93,109,255],toColor:[88,93,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,93,109,255],toColor:[89,94,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[89,94,110,255],toColor:[90,95,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[90,95,110,255],toColor:[91,96,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,96,110,255],toColor:[92,96,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,96,110,255],toColor:[93,97,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[93,97,110,255],toColor:[94,98,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,98,110,255],toColor:[94,99,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[94,99,111,255],toColor:[95,99,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[95,99,111,255],toColor:[96,100,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[96,100,111,255],toColor:[97,101,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,101,111,255],toColor:[98,101,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[98,101,111,255],toColor:[99,102,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[99,102,112,255],toColor:[100,103,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[100,103,112,255],toColor:[101,104,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,104,112,255],toColor:[102,104,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,104,112,255],toColor:[103,105,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[103,105,113,255],toColor:[104,106,113,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[104,106,113,255],toColor:[104,107,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[104,107,113,255],toColor:[105,107,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,107,113,255],toColor:[106,108,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[106,108,114,255],toColor:[107,109,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[107,109,114,255],toColor:[108,
109,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,109,114,255],toColor:[109,110,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[109,110,115,255],toColor:[110,111,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,111,115,255],toColor:[111,112,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[111,112,115,255],toColor:[111,112,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[111,
112,115,255],toColor:[112,113,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,113,116,255],toColor:[113,114,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,114,116,255],toColor:[114,115,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[114,115,116,255],toColor:[115,115,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,115,117,255],toColor:[116,116,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[116,116,117,255],toColor:[117,117,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[117,117,117,255],toColor:[117,118,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[117,118,118,255],toColor:[118,118,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,118,118,255],toColor:[119,119,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[119,119,119,255],toColor:[120,120,119,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[120,120,119,255],toColor:[121,121,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[121,121,119,255],toColor:[122,121,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,121,120,255],toColor:[123,122,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[123,122,120,255],toColor:[124,123,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,123,120,255],toColor:[124,
124,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,124,121,255],toColor:[125,124,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,124,121,255],toColor:[126,125,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[126,125,121,255],toColor:[127,126,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,126,121,255],toColor:[128,127,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[128,
127,121,255],toColor:[129,127,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[129,127,121,255],toColor:[130,128,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,128,121,255],toColor:[131,129,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[131,129,121,255],toColor:[132,130,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[132,130,121,255],toColor:[133,130,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[133,130,121,255],toColor:[134,131,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[134,131,121,255],toColor:[135,132,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[135,132,121,255],toColor:[136,133,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[136,133,121,255],toColor:[137,134,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,134,121,255],toColor:[138,134,121,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[138,134,121,255],toColor:[139,135,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[139,135,121,255],toColor:[140,136,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,136,121,255],toColor:[141,137,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,137,121,255],toColor:[142,137,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[142,137,121,255],toColor:[143,
138,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[143,138,121,255],toColor:[144,139,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,139,121,255],toColor:[145,140,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,140,121,255],toColor:[146,141,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,141,121,255],toColor:[147,141,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,
141,121,255],toColor:[148,142,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[148,142,121,255],toColor:[149,143,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[149,143,121,255],toColor:[150,144,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,144,121,255],toColor:[151,145,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[151,145,120,255],toColor:[152,145,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[152,145,120,255],toColor:[153,146,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[153,146,120,255],toColor:[154,147,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,147,120,255],toColor:[155,148,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,148,120,255],toColor:[156,149,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[156,149,120,255],toColor:[157,149,120,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[157,149,120,255],toColor:[158,150,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,150,120,255],toColor:[159,151,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[159,151,119,255],toColor:[160,152,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,152,119,255],toColor:[161,153,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[161,153,119,255],toColor:[162,
153,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,153,119,255],toColor:[163,154,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[163,154,119,255],toColor:[164,155,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,155,118,255],toColor:[165,156,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,156,118,255],toColor:[166,157,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[166,
157,118,255],toColor:[167,158,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[167,158,118,255],toColor:[168,158,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[168,158,118,255],toColor:[169,159,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,159,117,255],toColor:[170,160,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,160,117,255],toColor:[171,161,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[171,161,117,255],toColor:[172,162,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[172,162,117,255],toColor:[173,162,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,162,116,255],toColor:[174,163,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,163,116,255],toColor:[175,164,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[175,164,116,255],toColor:[177,165,115,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[177,165,115,255],toColor:[178,166,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[178,166,115,255],toColor:[179,167,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,167,115,255],toColor:[180,168,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[180,168,115,255],toColor:[181,168,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[181,168,114,255],toColor:[182,
169,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,169,114,255],toColor:[183,170,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[183,170,114,255],toColor:[184,171,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,171,113,255],toColor:[185,172,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,172,113,255],toColor:[186,173,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[186,
173,113,255],toColor:[187,173,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,173,112,255],toColor:[188,174,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,174,112,255],toColor:[189,175,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[189,175,111,255],toColor:[190,176,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,176,111,255],toColor:[191,177,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[191,177,111,255],toColor:[192,178,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[192,178,110,255],toColor:[194,179,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[194,179,110,255],toColor:[195,180,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,180,109,255],toColor:[196,180,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,180,109,255],toColor:[197,181,109,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[197,181,109,255],toColor:[198,182,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,182,108,255],toColor:[199,183,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[199,183,108,255],toColor:[200,184,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,184,107,255],toColor:[201,185,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,185,107,255],toColor:[202,
186,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[202,186,106,255],toColor:[203,187,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,187,106,255],toColor:[204,187,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,187,105,255],toColor:[205,188,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,188,105,255],toColor:[207,189,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,
189,104,255],toColor:[208,190,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[208,190,104,255],toColor:[209,191,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,191,103,255],toColor:[210,192,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[210,192,103,255],toColor:[211,193,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,193,102,255],toColor:[212,194,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[212,194,101,255],toColor:[213,195,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[213,195,101,255],toColor:[214,196,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,196,100,255],toColor:[215,196,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[215,196,100,255],toColor:[217,197,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[217,197,99,255],toColor:[218,198,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[218,198,98,255],toColor:[219,199,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,199,98,255],toColor:[220,200,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,200,97,255],toColor:[221,201,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,201,96,255],toColor:[222,202,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[222,202,96,255],toColor:[223,203,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[223,203,95,255],toColor:[224,204,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,204,94,255],toColor:[226,205,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,205,94,255],toColor:[227,206,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,206,93,255],toColor:[228,207,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,207,92,255],toColor:[229,208,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[229,208,91,255],toColor:[230,209,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,209,91,255],toColor:[231,209,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,209,90,255],toColor:[233,210,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,210,89,255],toColor:[234,211,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,211,88,255],toColor:[235,212,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[235,212,87,255],toColor:[236,213,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,213,86,255],toColor:[237,214,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,214,86,255],toColor:[238,215,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,215,85,255],toColor:[239,216,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,216,84,255],toColor:[241,217,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[241,217,83,255],toColor:[242,218,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,218,82,255],toColor:[243,219,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,219,81,255],toColor:[244,220,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,220,80,255],toColor:[245,221,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,221,79,255],toColor:[246,222,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[246,222,78,255],toColor:[248,223,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,223,77,255],toColor:[249,224,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,224,75,255],toColor:[250,225,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,225,74,255],toColor:[251,226,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,226,73,255],toColor:[252,227,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,227,72,255],toColor:[254,228,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,228,71,255],toColor:[255,229,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,229,69,255],toColor:[255,230,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,230,68,255],toColor:[255,231,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,231,67,255],toColor:[255,232,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,232,66,255],toColor:[255,233,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,233,67,255],toColor:[255,234,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,234,69,255],toColor:[255,235,70,255]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},
{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,
0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,
255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",
fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"inferno_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,0,4,255],toColor:[1,0,5,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,0,5,255],toColor:[1,1,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,
1,6,255],toColor:[1,1,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,8,255],toColor:[2,1,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,1,10,255],toColor:[2,2,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,12,255],toColor:[2,2,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,14,255],toColor:[3,2,16,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[3,2,16,255],toColor:[4,
3,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[4,3,18,255],toColor:[4,3,21,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[4,3,21,255],toColor:[5,4,23,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[5,4,23,255],toColor:[6,4,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,4,25,255],toColor:[7,5,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[7,5,27,255],toColor:[8,6,29,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[8,6,29,255],toColor:[9,6,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[9,6,32,255],toColor:[10,7,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[10,7,34,255],toColor:[11,7,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,7,36,255],toColor:[12,8,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[12,8,38,255],toColor:[13,8,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[13,8,41,255],toColor:[14,9,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[14,9,43,255],toColor:[16,9,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,9,45,255],toColor:[17,10,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[17,10,48,255],toColor:[18,10,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,10,50,255],toColor:[20,11,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[20,
11,53,255],toColor:[21,11,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,11,55,255],toColor:[22,11,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[22,11,58,255],toColor:[24,12,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,12,60,255],toColor:[25,12,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,12,62,255],toColor:[27,12,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[27,
12,65,255],toColor:[28,12,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[28,12,67,255],toColor:[30,12,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[30,12,70,255],toColor:[31,12,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,12,72,255],toColor:[33,12,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,12,74,255],toColor:[35,12,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,
12,77,255],toColor:[36,12,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,12,79,255],toColor:[38,12,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,12,81,255],toColor:[40,11,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,11,83,255],toColor:[42,11,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,11,85,255],toColor:[43,11,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,
11,87,255],toColor:[45,11,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,11,89,255],toColor:[47,10,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,10,91,255],toColor:[49,10,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,10,93,255],toColor:[51,10,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,10,94,255],toColor:[52,10,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,
10,96,255],toColor:[54,9,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,9,97,255],toColor:[56,9,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,9,98,255],toColor:[58,9,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,9,99,255],toColor:[59,9,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,9,100,255],toColor:[61,9,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,9,
101,255],toColor:[63,9,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,9,102,255],toColor:[64,10,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,10,103,255],toColor:[66,10,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,10,104,255],toColor:[68,10,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,10,105,255],toColor:[69,10,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,
10,105,255],toColor:[71,11,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,11,106,255],toColor:[73,11,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,11,107,255],toColor:[74,12,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[74,12,107,255],toColor:[76,12,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,12,108,255],toColor:[78,13,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[78,13,108,255],toColor:[79,13,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[79,13,108,255],toColor:[81,14,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[81,14,109,255],toColor:[83,14,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,14,109,255],toColor:[84,15,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[84,15,109,255],toColor:[86,15,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[86,15,110,255],toColor:[87,16,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[87,16,110,255],toColor:[89,17,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[89,17,110,255],toColor:[91,17,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,17,110,255],toColor:[92,18,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,18,110,255],toColor:[94,18,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[94,18,111,255],toColor:[95,19,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[95,19,111,255],toColor:[97,20,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,20,111,255],toColor:[99,20,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,20,111,255],toColor:[100,21,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[100,21,111,255],toColor:[102,21,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[102,21,111,255],toColor:[103,22,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[103,22,111,255],toColor:[105,23,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,23,111,255],toColor:[107,23,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[107,23,111,255],toColor:[108,24,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,24,111,255],toColor:[110,24,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[110,24,111,255],toColor:[111,25,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[111,25,111,255],toColor:[113,25,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,25,110,255],toColor:[115,26,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,26,110,255],toColor:[116,27,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[116,27,110,255],toColor:[118,27,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[118,27,110,255],toColor:[119,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[119,28,110,255],toColor:[121,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[121,28,110,255],toColor:[123,29,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[123,29,109,255],toColor:[124,29,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,29,109,255],toColor:[126,30,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[126,30,109,255],toColor:[127,31,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,31,109,255],toColor:[129,31,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[129,31,108,255],toColor:[130,32,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,32,108,255],toColor:[132,32,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[132,32,108,255],toColor:[134,33,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[134,33,107,255],toColor:[135,33,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[135,33,107,255],toColor:[137,34,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,34,107,255],toColor:[138,34,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,34,106,255],toColor:[140,35,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,35,106,255],toColor:[142,36,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[142,36,105,255],toColor:[143,36,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[143,36,105,255],toColor:[145,37,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,37,105,255],toColor:[146,37,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,37,104,255],toColor:[148,38,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[148,38,104,255],toColor:[150,38,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[150,38,103,255],toColor:[151,39,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[151,39,102,255],toColor:[153,40,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[153,40,102,255],toColor:[154,40,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,40,101,255],toColor:[156,41,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[156,41,101,255],toColor:[158,41,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[158,41,100,255],toColor:[159,42,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[159,42,100,255],toColor:[161,43,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[161,43,99,255],toColor:[162,43,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,43,98,255],toColor:[164,44,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,44,98,255],toColor:[165,45,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[165,45,97,255],toColor:[167,45,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[167,45,96,255],toColor:[169,46,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,46,95,255],toColor:[170,46,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,46,95,255],toColor:[172,47,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[172,47,94,255],toColor:[173,48,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[173,48,93,255],toColor:[175,49,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[175,49,92,255],toColor:[176,49,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[176,49,92,255],toColor:[178,50,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[178,50,91,255],toColor:[179,51,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,51,90,255],toColor:[181,51,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[181,51,89,255],toColor:[182,52,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,52,88,255],toColor:[184,53,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,53,87,255],toColor:[185,54,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,54,86,255],toColor:[187,54,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,54,85,255],toColor:[188,55,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[188,55,85,255],toColor:[190,56,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,56,84,255],toColor:[191,57,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,57,83,255],toColor:[193,58,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,58,82,255],toColor:[194,59,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[194,59,81,255],toColor:[196,60,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[196,60,80,255],toColor:[197,60,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[197,60,79,255],toColor:[198,61,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,61,78,255],toColor:[200,62,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,62,77,255],toColor:[201,63,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,63,76,255],toColor:[203,64,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[203,64,75,255],toColor:[204,65,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,65,74,255],toColor:[205,66,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,66,72,255],toColor:[207,67,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,67,71,255],toColor:[208,68,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[208,68,70,255],toColor:[209,69,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[209,69,69,255],toColor:[211,70,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,70,68,255],toColor:[212,72,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,72,67,255],toColor:[213,73,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[213,73,66,255],toColor:[214,74,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,74,65,255],toColor:[216,75,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[216,75,64,255],toColor:[217,76,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[217,76,62,255],toColor:[218,77,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,77,61,255],toColor:[219,79,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,79,60,255],toColor:[220,80,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,80,59,255],toColor:[221,81,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[221,81,58,255],toColor:[223,82,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,82,57,255],toColor:[224,84,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,84,56,255],toColor:[225,85,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[225,85,54,255],toColor:[226,86,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,86,53,255],toColor:[227,88,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[227,88,52,255],toColor:[228,89,51,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,89,51,255],toColor:[229,90,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,90,50,255],toColor:[230,92,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,92,48,255],toColor:[231,93,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,93,47,255],toColor:[232,95,46,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[232,95,46,255],toColor:[233,96,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,96,45,255],toColor:[234,98,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,98,43,255],toColor:[235,99,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,99,42,255],toColor:[235,101,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,101,41,255],toColor:[236,102,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[236,102,40,255],toColor:[237,104,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,104,38,255],toColor:[238,105,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,105,37,255],toColor:[239,107,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,107,36,255],toColor:[240,109,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,109,35,255],toColor:[240,110,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[240,110,33,255],toColor:[241,112,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,112,32,255],toColor:[242,113,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,113,31,255],toColor:[242,115,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,115,30,255],toColor:[243,117,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,117,28,255],toColor:[244,118,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[244,118,27,255],toColor:[244,120,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,120,26,255],toColor:[245,122,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,122,24,255],toColor:[246,123,23,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,123,23,255],toColor:[246,125,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,125,22,255],toColor:[247,127,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,127,20,255],toColor:[247,129,19,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,129,19,255],toColor:[248,130,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,130,18,255],toColor:[248,132,16,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,132,16,255],toColor:[249,134,15,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,134,15,255],toColor:[249,136,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[249,136,14,255],toColor:[249,137,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,137,12,255],toColor:[250,139,11,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,139,11,255],toColor:[250,141,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,141,10,255],toColor:[250,143,9,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,143,9,255],toColor:[251,145,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,145,8,255],toColor:[251,146,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,146,7,255],toColor:[251,148,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,148,7,255],toColor:[252,150,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,150,6,255],toColor:[252,152,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,152,6,255],toColor:[252,154,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,154,6,255],toColor:[252,156,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,156,6,255],toColor:[252,158,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,158,7,255],toColor:[253,160,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,160,7,255],toColor:[253,161,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,161,8,255],toColor:[253,163,9,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,163,9,255],toColor:[253,165,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,165,10,255],toColor:[253,167,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,167,12,255],toColor:[253,169,13,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,169,13,255],toColor:[253,171,15,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,171,15,255],toColor:[253,173,17,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,173,17,255],toColor:[253,175,19,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,175,19,255],toColor:[253,177,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,177,20,255],toColor:[253,179,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,179,22,255],toColor:[253,181,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,181,25,255],toColor:[252,183,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,183,27,255],toColor:[252,185,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,185,29,255],toColor:[252,186,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,186,31,255],toColor:[252,188,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,188,33,255],toColor:[252,190,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,190,35,255],toColor:[251,192,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,192,38,255],toColor:[251,194,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,194,40,255],toColor:[251,196,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,196,43,255],toColor:[251,198,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,198,45,255],toColor:[250,200,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,200,48,255],toColor:[250,202,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[250,202,50,255],toColor:[250,204,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,204,53,255],toColor:[249,206,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,206,56,255],toColor:[249,208,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,208,58,255],toColor:[248,210,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,210,61,255],toColor:[248,212,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[248,212,64,255],toColor:[247,214,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,214,67,255],toColor:[247,216,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,216,70,255],toColor:[246,218,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,218,73,255],toColor:[246,220,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,220,76,255],toColor:[245,222,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[245,222,80,255],toColor:[245,224,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,224,83,255],toColor:[244,226,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,226,86,255],toColor:[244,228,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,228,90,255],toColor:[244,229,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,229,94,255],toColor:[243,231,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[243,231,97,255],toColor:[243,233,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,233,101,255],toColor:[243,235,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,235,105,255],toColor:[242,237,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,237,109,255],toColor:[242,238,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,238,113,255],toColor:[242,240,117,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[242,240,117,255],toColor:[242,242,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,242,122,255],toColor:[243,243,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,243,126,255],toColor:[243,245,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,245,130,255],toColor:[244,246,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,246,134,255],toColor:[244,
247,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,247,138,255],toColor:[245,249,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,249,142,255],toColor:[246,250,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,250,146,255],toColor:[247,251,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,251,150,255],toColor:[249,252,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,
252,154,255],toColor:[250,253,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,253,158,255],toColor:[251,254,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,254,162,255],toColor:[253,255,165,255]}]},{id:"magma_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,0,4,255],toColor:[1,0,5,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,0,5,255],toColor:[1,1,6,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[1,1,6,255],toColor:[1,1,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,8,255],toColor:[2,1,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,1,10,255],toColor:[2,2,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,12,255],toColor:[2,2,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,14,255],toColor:[3,3,16,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[3,3,16,255],toColor:[4,3,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[4,3,18,255],toColor:[4,4,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[4,4,20,255],toColor:[5,4,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[5,4,22,255],toColor:[6,5,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,5,24,255],toColor:[6,5,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,5,26,
255],toColor:[7,6,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[7,6,28,255],toColor:[8,7,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[8,7,30,255],toColor:[9,7,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[9,7,32,255],toColor:[10,8,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[10,8,34,255],toColor:[11,9,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,9,36,255],toColor:[12,
9,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[12,9,38,255],toColor:[13,10,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[13,10,41,255],toColor:[14,11,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[14,11,43,255],toColor:[16,11,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,11,45,255],toColor:[17,12,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[17,12,47,255],toColor:[18,
13,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,13,50,255],toColor:[19,13,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[19,13,52,255],toColor:[20,14,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[20,14,54,255],toColor:[21,14,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,14,57,255],toColor:[23,15,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[23,15,59,255],toColor:[24,
15,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,15,61,255],toColor:[25,16,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,16,64,255],toColor:[26,16,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[26,16,66,255],toColor:[28,16,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[28,16,68,255],toColor:[29,17,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[29,17,71,255],toColor:[30,
17,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[30,17,73,255],toColor:[32,17,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,17,76,255],toColor:[33,17,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,17,78,255],toColor:[35,18,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,18,81,255],toColor:[36,18,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,18,83,255],toColor:[38,
18,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,18,86,255],toColor:[39,18,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,18,88,255],toColor:[41,18,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,18,90,255],toColor:[42,17,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,17,93,255],toColor:[44,17,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,17,95,255],toColor:[46,
17,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,17,97,255],toColor:[47,17,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,17,99,255],toColor:[49,17,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,17,101,255],toColor:[51,16,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,16,103,255],toColor:[52,16,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,16,105,255],toColor:[54,
16,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,16,107,255],toColor:[56,16,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,16,109,255],toColor:[58,15,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,15,111,255],toColor:[59,15,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,15,112,255],toColor:[61,15,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,15,113,255],
toColor:[63,15,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,15,115,255],toColor:[65,15,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,15,116,255],toColor:[66,15,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,15,117,255],toColor:[68,15,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,15,118,255],toColor:[70,16,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,
16,119,255],toColor:[71,16,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,16,120,255],toColor:[73,16,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,16,121,255],toColor:[75,17,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,17,122,255],toColor:[76,17,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,17,122,255],toColor:[78,17,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[78,17,123,255],toColor:[79,18,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[79,18,124,255],toColor:[81,18,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[81,18,124,255],toColor:[83,19,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,19,125,255],toColor:[84,19,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[84,19,125,255],toColor:[86,20,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[86,20,126,255],toColor:[87,21,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[87,21,126,255],toColor:[89,21,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[89,21,126,255],toColor:[91,22,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,22,127,255],toColor:[92,22,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,22,127,255],toColor:[94,23,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[94,23,127,255],toColor:[95,24,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[95,24,128,255],toColor:[97,24,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,24,128,255],toColor:[98,25,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[98,25,128,255],toColor:[100,26,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[100,26,128,255],toColor:[101,26,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[101,26,129,255],toColor:[103,27,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[103,27,129,255],toColor:[105,28,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,28,129,255],toColor:[106,28,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[106,28,129,255],toColor:[108,29,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,29,129,255],toColor:[109,30,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[109,30,129,255],toColor:[111,30,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[111,30,130,255],toColor:[112,31,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,31,130,255],toColor:[114,31,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[114,31,130,255],toColor:[116,32,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[116,32,130,255],toColor:[117,33,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[117,33,130,255],toColor:[119,33,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[119,33,130,255],toColor:[120,34,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,34,130,255],toColor:[122,34,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,34,130,255],toColor:[123,35,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[123,35,130,255],toColor:[125,36,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[125,36,130,255],toColor:[127,36,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,36,130,255],toColor:[128,37,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[128,37,130,255],toColor:[130,37,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,37,130,255],toColor:[131,38,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[131,38,130,255],toColor:[133,39,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[133,39,130,255],toColor:[134,39,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[134,39,130,255],toColor:[136,40,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[136,40,130,255],toColor:[138,40,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,40,130,255],toColor:[139,41,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[139,41,130,255],toColor:[141,41,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[141,41,129,255],toColor:[142,42,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[142,42,129,255],toColor:[144,42,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,42,129,255],toColor:[146,43,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,43,129,255],toColor:[147,43,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,43,129,255],toColor:[149,44,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[149,44,129,255],toColor:[151,44,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[151,44,129,255],toColor:[152,45,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[152,45,128,255],toColor:[154,46,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,46,128,255],toColor:[155,46,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,46,128,255],toColor:[157,47,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[157,47,128,255],toColor:[159,47,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[159,47,127,255],toColor:[160,48,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,48,127,255],toColor:[162,48,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,48,127,255],toColor:[164,49,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,49,127,255],toColor:[165,49,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[165,49,126,255],toColor:[167,50,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[167,50,126,255],toColor:[169,50,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,50,126,255],toColor:[170,51,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,51,125,255],toColor:[172,51,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[172,51,125,255],toColor:[174,52,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[174,52,124,255],toColor:[175,52,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[175,52,124,255],toColor:[177,53,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[177,53,124,255],toColor:[178,53,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[178,53,123,255],toColor:[180,54,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[180,54,123,255],toColor:[182,54,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[182,54,122,255],toColor:[183,55,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[183,55,122,255],toColor:[185,56,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,56,121,255],toColor:[187,56,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,56,121,255],toColor:[188,57,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,57,120,255],toColor:[190,57,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[190,57,120,255],toColor:[192,58,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[192,58,119,255],toColor:[193,59,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,59,118,255],toColor:[195,59,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,59,118,255],toColor:[196,60,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,60,117,255],toColor:[198,60,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[198,60,117,255],toColor:[200,61,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,61,116,255],toColor:[201,62,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,62,115,255],toColor:[203,63,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,63,115,255],toColor:[204,63,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,63,114,255],toColor:[206,64,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[206,64,113,255],toColor:[208,65,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[208,65,112,255],toColor:[209,66,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,66,112,255],toColor:[211,66,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,66,111,255],toColor:[212,67,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,67,110,255],toColor:[214,68,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[214,68,109,255],toColor:[215,69,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[215,69,109,255],toColor:[217,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[217,70,108,255],toColor:[218,71,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,71,107,255],toColor:[220,72,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,72,106,255],toColor:[221,73,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[221,73,106,255],toColor:[222,74,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[222,74,105,255],toColor:[224,75,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,75,104,255],toColor:[225,76,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[225,76,103,255],toColor:[226,77,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,77,102,255],toColor:[228,78,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[228,78,102,255],toColor:[229,79,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,79,101,255],toColor:[230,81,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,81,100,255],toColor:[231,82,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,82,99,255],toColor:[233,83,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,83,99,255],toColor:[234,84,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[234,84,98,255],toColor:[235,86,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,86,97,255],toColor:[236,87,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,87,97,255],toColor:[237,89,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,89,96,255],toColor:[238,90,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,90,95,255],toColor:[239,92,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[239,92,95,255],toColor:[240,93,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,93,94,255],toColor:[241,95,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,95,94,255],toColor:[242,97,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,97,93,255],toColor:[242,98,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,98,93,255],toColor:[243,100,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[243,100,93,255],toColor:[244,102,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,102,93,255],toColor:[245,104,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,104,92,255],toColor:[245,105,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,105,92,255],toColor:[246,107,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,107,92,255],toColor:[247,109,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,109,92,255],toColor:[247,111,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,111,92,255],toColor:[248,113,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,113,92,255],toColor:[248,114,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,114,92,255],toColor:[249,116,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,116,92,255],toColor:[249,118,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[249,118,93,255],toColor:[250,120,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,120,93,255],toColor:[250,122,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,122,93,255],toColor:[250,124,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,124,94,255],toColor:[251,126,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,126,94,255],toColor:[251,128,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,128,95,255],toColor:[251,130,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,130,95,255],toColor:[252,131,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,131,96,255],toColor:[252,133,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,133,96,255],toColor:[252,135,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,135,97,255],toColor:[253,137,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,137,98,255],toColor:[253,139,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,139,99,255],toColor:[253,141,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,141,99,255],toColor:[253,143,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,143,100,255],toColor:[253,145,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,145,101,255],toColor:[254,147,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,147,102,255],toColor:[254,149,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,149,103,255],toColor:[254,150,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,150,104,255],toColor:[254,152,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,152,105,255],toColor:[254,154,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,154,106,255],toColor:[254,156,107,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[254,156,107,255],toColor:[255,158,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,158,108,255],toColor:[255,160,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,160,109,255],toColor:[255,162,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,162,111,255],toColor:[255,164,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,164,112,255],toColor:[255,
165,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,165,113,255],toColor:[255,167,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,167,114,255],toColor:[255,169,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,169,116,255],toColor:[255,171,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,171,117,255],toColor:[255,173,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,
173,118,255],toColor:[255,175,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,175,119,255],toColor:[255,177,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,177,121,255],toColor:[255,179,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,179,122,255],toColor:[255,180,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,180,124,255],toColor:[255,182,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,182,125,255],toColor:[255,184,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,184,126,255],toColor:[255,186,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,186,128,255],toColor:[255,188,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,188,129,255],toColor:[255,190,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,190,131,255],toColor:[255,191,132,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[255,191,132,255],toColor:[255,193,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,193,134,255],toColor:[255,195,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,195,135,255],toColor:[255,197,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,197,137,255],toColor:[255,199,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,199,139,255],toColor:[255,
201,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,201,140,255],toColor:[255,203,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,203,142,255],toColor:[255,204,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,204,143,255],toColor:[255,206,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,206,145,255],toColor:[255,208,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,
208,147,255],toColor:[255,210,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,210,148,255],toColor:[255,212,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,212,150,255],toColor:[255,214,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,214,152,255],toColor:[255,215,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,215,153,255],toColor:[255,217,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,217,155,255],toColor:[254,219,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,219,157,255],toColor:[254,221,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,221,159,255],toColor:[254,223,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,223,160,255],toColor:[254,225,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,225,162,255],toColor:[254,226,164,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[254,226,164,255],toColor:[254,228,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,228,166,255],toColor:[254,230,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,230,167,255],toColor:[254,232,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,232,169,255],toColor:[254,234,171,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,234,171,255],toColor:[254,
236,173,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,236,173,255],toColor:[253,237,175,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,237,175,255],toColor:[253,239,177,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,239,177,255],toColor:[253,241,179,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,241,179,255],toColor:[253,243,180,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,
243,180,255],toColor:[253,245,182,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,245,182,255],toColor:[253,247,184,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,247,184,255],toColor:[253,248,186,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,248,186,255],toColor:[253,250,188,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,250,188,255],toColor:[253,252,190,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,252,190,255],toColor:[253,254,192,255]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",
colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",
type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"plasma_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[13,8,135,255],toColor:[16,7,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,
7,136,255],toColor:[19,7,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[19,7,138,255],toColor:[22,7,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[22,7,139,255],toColor:[25,6,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,6,140,255],toColor:[27,6,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[27,6,141,255],toColor:[29,6,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[29,
6,142,255],toColor:[32,6,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,6,143,255],toColor:[34,6,144,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,6,144,255],toColor:[36,6,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,6,145,255],toColor:[38,5,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,5,146,255],toColor:[40,5,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,
5,147,255],toColor:[42,5,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,5,148,255],toColor:[44,5,149,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,5,149,255],toColor:[46,5,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,5,150,255],toColor:[48,5,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,5,150,255],toColor:[50,5,151,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,
5,151,255],toColor:[51,5,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,5,152,255],toColor:[53,4,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,4,153,255],toColor:[55,4,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,4,153,255],toColor:[57,4,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,4,154,255],toColor:[58,4,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,
4,155,255],toColor:[60,4,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,4,156,255],toColor:[62,4,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,4,156,255],toColor:[64,4,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,4,157,255],toColor:[65,4,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,4,158,255],toColor:[67,3,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,
3,158,255],toColor:[69,3,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,3,159,255],toColor:[70,3,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,3,159,255],toColor:[72,3,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,3,160,255],toColor:[73,3,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,3,161,255],toColor:[75,3,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,
3,161,255],toColor:[77,2,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[77,2,162,255],toColor:[78,2,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,2,162,255],toColor:[80,2,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[80,2,163,255],toColor:[82,2,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[82,2,163,255],toColor:[83,2,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,
2,164,255],toColor:[85,2,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[85,2,164,255],toColor:[86,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,1,165,255],toColor:[88,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,1,165,255],toColor:[90,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[90,1,165,255],toColor:[91,1,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,
1,166,255],toColor:[93,1,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[93,1,166,255],toColor:[94,1,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,1,167,255],toColor:[96,1,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[96,1,167,255],toColor:[98,0,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[98,0,167,255],toColor:[99,0,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,
0,167,255],toColor:[101,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,0,168,255],toColor:[102,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,0,168,255],toColor:[104,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[104,0,168,255],toColor:[105,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,0,168,255],toColor:[107,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[107,
0,169,255],toColor:[108,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,0,169,255],toColor:[110,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,0,169,255],toColor:[112,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,0,169,255],toColor:[113,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,0,169,255],toColor:[115,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,
1,169,255],toColor:[116,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[116,1,169,255],toColor:[118,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,1,169,255],toColor:[119,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[119,1,169,255],toColor:[121,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[121,1,169,255],toColor:[122,2,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,
2,169,255],toColor:[124,2,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,2,169,255],toColor:[125,3,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,3,169,255],toColor:[127,3,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,3,168,255],toColor:[128,4,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[128,4,168,255],toColor:[130,4,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,
4,168,255],toColor:[131,5,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[131,5,168,255],toColor:[133,6,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[133,6,167,255],toColor:[134,6,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[134,6,167,255],toColor:[136,7,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[136,7,167,255],toColor:[137,8,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,
8,166,255],toColor:[138,9,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,9,166,255],toColor:[140,10,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,10,166,255],toColor:[141,11,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,11,165,255],toColor:[143,12,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[143,12,165,255],toColor:[144,13,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[144,13,164,255],toColor:[145,14,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,14,164,255],toColor:[147,15,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,15,163,255],toColor:[148,16,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[148,16,163,255],toColor:[150,18,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,18,162,255],toColor:[151,19,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[151,19,161,255],toColor:[152,20,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[152,20,161,255],toColor:[154,21,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,21,160,255],toColor:[155,22,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,22,159,255],toColor:[156,23,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[156,23,159,255],toColor:[158,24,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[158,24,158,255],toColor:[159,25,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[159,25,157,255],toColor:[160,26,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,26,156,255],toColor:[162,28,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,28,156,255],toColor:[163,29,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[163,29,155,255],toColor:[164,30,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[164,30,154,255],toColor:[165,31,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,31,153,255],toColor:[167,32,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[167,32,152,255],toColor:[168,33,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[168,33,152,255],toColor:[169,34,151,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,34,151,255],toColor:[170,35,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[170,35,150,255],toColor:[171,37,149,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[171,37,149,255],toColor:[173,38,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,38,148,255],toColor:[174,39,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,39,147,255],toColor:[175,40,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[175,40,146,255],toColor:[176,41,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[176,41,145,255],toColor:[177,42,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[177,42,145,255],toColor:[179,43,144,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,43,144,255],toColor:[180,45,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[180,45,143,255],toColor:[181,46,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[181,46,142,255],toColor:[182,47,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[182,47,141,255],toColor:[183,48,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[183,48,140,255],toColor:[184,49,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,49,139,255],toColor:[185,50,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,50,138,255],toColor:[186,51,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[186,51,137,255],toColor:[187,52,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[187,52,136,255],toColor:[188,54,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,54,135,255],toColor:[189,55,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[189,55,134,255],toColor:[191,56,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,56,133,255],toColor:[192,57,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[192,57,132,255],toColor:[193,58,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[193,58,131,255],toColor:[194,59,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[194,59,130,255],toColor:[195,60,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,60,129,255],toColor:[196,62,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,62,129,255],toColor:[197,63,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[197,63,128,255],toColor:[198,64,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[198,64,127,255],toColor:[199,65,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[199,65,126,255],toColor:[200,66,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,66,125,255],toColor:[201,67,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,67,124,255],toColor:[202,68,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[202,68,123,255],toColor:[202,69,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[202,69,122,255],toColor:[203,71,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,71,121,255],toColor:[204,72,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,72,120,255],toColor:[205,73,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,73,119,255],toColor:[206,74,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[206,74,118,255],toColor:[207,75,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[207,75,117,255],toColor:[208,76,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[208,76,117,255],toColor:[209,77,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,77,116,255],toColor:[210,79,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[210,79,115,255],toColor:[211,80,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,80,114,255],toColor:[212,81,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[212,81,113,255],toColor:[212,82,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,82,112,255],toColor:[213,83,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[213,83,111,255],toColor:[214,84,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,84,110,255],toColor:[215,85,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[215,85,109,255],toColor:[216,87,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[216,87,109,255],toColor:[217,88,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[217,88,108,255],toColor:[218,89,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,89,107,255],toColor:[218,90,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,90,106,255],toColor:[219,91,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,91,105,255],toColor:[220,92,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[220,92,104,255],toColor:[221,93,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,93,103,255],toColor:[222,95,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[222,95,102,255],toColor:[223,96,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,96,102,255],toColor:[223,97,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,97,101,255],toColor:[224,98,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[224,98,100,255],toColor:[225,99,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[225,99,99,255],toColor:[226,100,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,100,98,255],toColor:[226,102,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,102,97,255],toColor:[227,103,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,103,96,255],toColor:[228,104,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[228,104,96,255],toColor:[229,105,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,105,95,255],toColor:[229,106,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,106,94,255],toColor:[230,108,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,108,93,255],toColor:[231,109,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,109,92,255],toColor:[232,110,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[232,110,91,255],toColor:[232,111,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,111,90,255],toColor:[233,112,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,112,90,255],toColor:[234,114,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,114,89,255],toColor:[234,115,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,115,88,255],toColor:[235,116,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[235,116,87,255],toColor:[236,117,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,117,86,255],toColor:[236,119,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,119,85,255],toColor:[237,120,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,120,84,255],toColor:[238,121,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,121,83,255],toColor:[238,122,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[238,122,83,255],toColor:[239,124,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,124,82,255],toColor:[240,125,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,125,81,255],toColor:[240,126,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,126,80,255],toColor:[241,127,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,127,79,255],toColor:[241,129,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[241,129,78,255],toColor:[242,130,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,130,77,255],toColor:[242,131,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,131,77,255],toColor:[243,133,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,133,76,255],toColor:[244,134,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,134,75,255],toColor:[244,135,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[244,135,74,255],toColor:[245,136,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,136,73,255],toColor:[245,138,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,138,72,255],toColor:[246,139,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,139,71,255],toColor:[246,140,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,140,70,255],toColor:[247,142,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,142,70,255],toColor:[247,143,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,143,69,255],toColor:[248,144,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,144,68,255],toColor:[248,146,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,146,67,255],toColor:[248,147,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,147,66,255],toColor:[249,149,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[249,149,65,255],toColor:[249,150,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,150,64,255],toColor:[250,151,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,151,64,255],toColor:[250,153,63,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,153,63,255],toColor:[250,154,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,154,62,255],toColor:[251,156,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,156,61,255],toColor:[251,157,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,157,60,255],toColor:[251,158,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,158,59,255],toColor:[252,160,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,160,58,255],toColor:[252,161,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,161,58,255],toColor:[252,163,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,163,57,255],toColor:[253,164,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,164,56,255],toColor:[253,166,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,166,55,255],toColor:[253,167,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,167,54,255],toColor:[253,168,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,168,53,255],toColor:[253,170,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,170,52,255],toColor:[254,171,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,171,52,255],toColor:[254,173,51,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,173,51,255],toColor:[254,174,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,174,50,255],toColor:[254,176,49,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,176,49,255],toColor:[254,177,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,177,48,255],toColor:[254,179,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,179,48,255],toColor:[254,180,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,180,47,255],toColor:[254,182,46,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,182,46,255],toColor:[255,183,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,183,45,255],toColor:[255,185,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,185,45,255],toColor:[255,187,44,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,187,44,255],toColor:[255,188,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,188,43,255],toColor:[255,190,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,190,43,255],toColor:[255,191,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,191,42,255],toColor:[255,193,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,193,41,255],toColor:[254,194,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,194,41,255],toColor:[254,196,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,196,40,255],toColor:[254,198,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,198,40,255],toColor:[254,199,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,199,39,255],toColor:[254,201,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,201,39,255],toColor:[254,202,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,202,38,255],toColor:[254,204,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,204,38,255],toColor:[253,206,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,206,38,255],toColor:[253,207,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,207,37,255],toColor:[253,209,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,209,37,255],toColor:[253,211,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,211,37,255],toColor:[252,212,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,212,37,255],toColor:[252,214,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,214,36,255],toColor:[252,216,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,216,36,255],toColor:[251,217,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,217,36,255],toColor:[251,219,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,219,36,255],toColor:[250,221,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,221,37,255],toColor:[250,222,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,222,37,255],toColor:[249,224,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,224,37,255],toColor:[249,226,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[249,226,37,255],toColor:[248,227,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,227,37,255],toColor:[248,229,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,229,38,255],toColor:[247,231,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,231,38,255],toColor:[247,232,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,232,38,255],toColor:[246,234,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[246,234,39,255],toColor:[246,236,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,236,39,255],toColor:[245,238,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,238,39,255],toColor:[244,239,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,239,39,255],toColor:[244,241,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,241,39,255],toColor:[243,243,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[243,243,39,255],toColor:[242,245,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,245,38,255],toColor:[242,246,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,246,38,255],toColor:[241,248,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,248,36,255],toColor:[241,250,34,255]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,
255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,
255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,
17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",
type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,
168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",
colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,
0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"viridis_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,1,84,255],toColor:[69,2,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,2,86,255],toColor:[69,
4,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,4,87,255],toColor:[69,5,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,5,89,255],toColor:[70,7,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,7,90,255],toColor:[70,8,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,8,92,255],toColor:[70,10,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,10,93,255],toColor:[71,11,95,
255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,11,95,255],toColor:[71,13,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,13,96,255],toColor:[71,14,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,14,98,255],toColor:[71,16,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,16,99,255],toColor:[72,17,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,17,100,255],toColor:[72,
19,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,19,102,255],toColor:[72,20,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,20,103,255],toColor:[72,22,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,22,104,255],toColor:[72,23,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,23,106,255],toColor:[72,24,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,24,107,255],
toColor:[72,26,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,26,108,255],toColor:[72,27,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,27,109,255],toColor:[72,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,28,110,255],toColor:[73,30,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,30,112,255],toColor:[73,31,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,
31,113,255],toColor:[72,32,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,32,114,255],toColor:[72,34,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,34,115,255],toColor:[72,35,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,35,116,255],toColor:[72,36,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,36,117,255],toColor:[72,37,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[72,37,118,255],toColor:[72,39,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,39,119,255],toColor:[72,40,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,40,120,255],toColor:[72,41,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,41,121,255],toColor:[72,42,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,42,122,255],toColor:[72,44,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[72,44,123,255],toColor:[71,45,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,45,124,255],toColor:[71,46,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,46,125,255],toColor:[71,47,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,47,125,255],toColor:[71,49,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,49,126,255],toColor:[70,50,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[70,50,127,255],toColor:[70,51,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,51,128,255],toColor:[70,52,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,52,128,255],toColor:[70,54,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,54,129,255],toColor:[69,55,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,55,130,255],toColor:[69,56,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[69,56,130,255],toColor:[69,57,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,57,131,255],toColor:[68,58,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,58,132,255],toColor:[68,60,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,60,132,255],toColor:[68,61,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,61,133,255],toColor:[67,62,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[67,62,133,255],toColor:[67,63,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,63,134,255],toColor:[66,64,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,64,134,255],toColor:[66,66,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,66,135,255],toColor:[65,67,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,67,135,255],toColor:[65,68,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[65,68,136,255],toColor:[65,69,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,69,136,255],toColor:[64,70,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,70,136,255],toColor:[64,71,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,71,137,255],toColor:[63,73,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,73,137,255],toColor:[63,74,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[63,74,138,255],toColor:[62,75,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,75,138,255],toColor:[62,76,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,76,138,255],toColor:[61,77,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,77,138,255],toColor:[61,78,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,78,139,255],toColor:[60,79,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[60,79,139,255],toColor:[60,80,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,80,139,255],toColor:[59,81,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,81,139,255],toColor:[59,83,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,83,140,255],toColor:[58,84,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,84,140,255],toColor:[58,85,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[58,85,140,255],toColor:[57,86,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,86,140,255],toColor:[57,87,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,87,140,255],toColor:[56,88,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,88,141,255],toColor:[56,89,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,89,141,255],toColor:[55,90,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[55,90,141,255],toColor:[55,91,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,91,141,255],toColor:[54,92,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,92,141,255],toColor:[54,93,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,93,141,255],toColor:[53,94,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,94,141,255],toColor:[53,95,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[53,95,142,255],toColor:[52,96,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,96,142,255],toColor:[52,97,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,97,142,255],toColor:[52,98,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,98,142,255],toColor:[51,99,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,99,142,255],toColor:[51,100,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[51,100,142,255],toColor:[50,101,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,101,142,255],toColor:[50,102,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,102,142,255],toColor:[49,103,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,103,142,255],toColor:[49,104,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,104,142,255],toColor:[48,105,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[48,105,142,255],toColor:[48,106,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,106,142,255],toColor:[48,107,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,107,143,255],toColor:[47,108,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,108,143,255],toColor:[47,109,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,109,143,255],toColor:[46,110,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[46,110,143,255],toColor:[46,111,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,111,143,255],toColor:[45,112,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,112,143,255],toColor:[45,113,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,113,143,255],toColor:[45,114,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,114,143,255],toColor:[44,115,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[44,115,143,255],toColor:[44,116,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,116,143,255],toColor:[43,117,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,117,143,255],toColor:[43,118,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,118,143,255],toColor:[43,119,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,119,143,255],toColor:[42,120,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[42,120,143,255],toColor:[42,121,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,121,143,255],toColor:[42,122,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,122,143,255],toColor:[41,123,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,123,143,255],toColor:[41,123,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,123,143,255],toColor:[40,124,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[40,124,143,255],toColor:[40,125,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,125,143,255],toColor:[40,126,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,126,143,255],toColor:[39,127,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,127,143,255],toColor:[39,128,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,128,143,255],toColor:[39,129,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[39,129,143,255],toColor:[38,130,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,130,143,255],toColor:[38,131,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,131,143,255],toColor:[37,132,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,132,143,255],toColor:[37,133,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,133,142,255],toColor:[37,134,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[37,134,142,255],toColor:[36,135,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,135,142,255],toColor:[36,136,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,136,142,255],toColor:[36,137,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,137,142,255],toColor:[35,138,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,138,142,255],toColor:[35,139,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[35,139,142,255],toColor:[35,139,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,139,142,255],toColor:[34,140,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,140,142,255],toColor:[34,141,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,141,142,255],toColor:[34,142,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,142,141,255],toColor:[33,143,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[33,143,141,255],toColor:[33,144,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,144,141,255],toColor:[33,145,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,145,141,255],toColor:[32,146,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,146,141,255],toColor:[32,147,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,147,141,255],toColor:[32,148,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[32,148,140,255],toColor:[32,149,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,149,140,255],toColor:[31,150,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,150,140,255],toColor:[31,151,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,151,140,255],toColor:[31,152,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,152,139,255],toColor:[31,153,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[31,153,139,255],toColor:[31,154,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,154,139,255],toColor:[31,155,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,155,139,255],toColor:[31,156,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,156,138,255],toColor:[31,156,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,156,138,255],toColor:[31,157,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[31,157,138,255],toColor:[31,158,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,158,137,255],toColor:[31,159,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,159,137,255],toColor:[31,160,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,160,137,255],toColor:[31,161,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,161,136,255],toColor:[31,162,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[31,162,136,255],toColor:[32,163,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,163,135,255],toColor:[32,164,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,164,135,255],toColor:[32,165,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,165,134,255],toColor:[33,166,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,166,134,255],toColor:[33,167,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[33,167,134,255],toColor:[34,168,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,168,133,255],toColor:[34,169,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,169,133,255],toColor:[35,170,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,170,132,255],toColor:[36,170,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,170,131,255],toColor:[37,171,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[37,171,131,255],toColor:[38,172,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,172,130,255],toColor:[38,173,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,173,130,255],toColor:[39,174,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,174,129,255],toColor:[40,175,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,175,128,255],toColor:[41,176,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[41,176,128,255],toColor:[43,177,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,177,127,255],toColor:[44,178,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,178,126,255],toColor:[45,179,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,179,126,255],toColor:[46,180,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,180,125,255],toColor:[48,180,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[48,180,124,255],toColor:[49,181,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,181,123,255],toColor:[50,182,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,182,123,255],toColor:[52,183,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,183,122,255],toColor:[53,184,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,184,121,255],toColor:[55,185,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[55,185,120,255],toColor:[56,186,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,186,119,255],toColor:[58,187,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,187,118,255],toColor:[60,187,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,187,118,255],toColor:[61,188,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,188,117,255],toColor:[63,189,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[63,189,116,255],toColor:[65,190,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,190,115,255],toColor:[67,191,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,191,114,255],toColor:[68,192,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,192,113,255],toColor:[70,193,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,193,112,255],toColor:[72,193,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[72,193,111,255],toColor:[74,194,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[74,194,110,255],toColor:[76,195,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,195,109,255],toColor:[78,196,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,196,108,255],toColor:[80,197,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[80,197,106,255],toColor:[82,197,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[82,197,105,255],toColor:[84,198,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[84,198,104,255],toColor:[86,199,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,199,103,255],toColor:[88,200,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,200,102,255],toColor:[90,200,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[90,200,101,255],toColor:[92,201,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[92,201,99,255],toColor:[95,202,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[95,202,98,255],toColor:[97,203,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,203,97,255],toColor:[99,203,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,203,95,255],toColor:[101,204,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,204,94,255],toColor:[103,205,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[103,205,93,255],toColor:[106,206,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[106,206,91,255],toColor:[108,206,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,206,90,255],toColor:[110,207,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,207,89,255],toColor:[113,208,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,208,87,255],toColor:[115,208,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[115,208,86,255],toColor:[117,209,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[117,209,84,255],toColor:[120,210,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,210,83,255],toColor:[122,210,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,210,81,255],toColor:[125,211,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,211,80,255],toColor:[127,212,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[127,212,78,255],toColor:[130,212,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,212,77,255],toColor:[132,213,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[132,213,75,255],toColor:[135,213,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[135,213,74,255],toColor:[137,214,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,214,72,255],toColor:[140,215,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[140,215,71,255],toColor:[142,215,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[142,215,69,255],toColor:[145,216,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,216,67,255],toColor:[147,216,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,216,66,255],toColor:[150,217,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,217,64,255],toColor:[153,217,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[153,217,62,255],toColor:[155,218,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,218,61,255],toColor:[158,218,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,218,59,255],toColor:[160,219,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,219,57,255],toColor:[163,219,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[163,219,55,255],toColor:[166,220,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[166,220,54,255],toColor:[168,220,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[168,220,52,255],toColor:[171,221,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[171,221,50,255],toColor:[174,221,49,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,221,49,255],toColor:[176,222,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[176,222,47,255],toColor:[179,222,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[179,222,45,255],toColor:[182,222,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,222,43,255],toColor:[184,223,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,223,42,255],toColor:[187,223,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,223,40,255],toColor:[190,224,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,224,38,255],toColor:[192,224,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[192,224,37,255],toColor:[195,224,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,224,35,255],toColor:[198,225,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,225,34,255],toColor:[201,225,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,225,32,255],toColor:[203,225,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,225,31,255],toColor:[206,226,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[206,226,29,255],toColor:[209,226,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,226,28,255],toColor:[211,226,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,226,27,255],toColor:[214,227,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,227,26,255],toColor:[216,227,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[216,227,26,255],toColor:[219,227,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[219,227,25,255],toColor:[222,228,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[222,228,25,255],toColor:[224,228,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,228,24,255],toColor:[227,228,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,228,24,255],toColor:[229,229,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,229,25,255],toColor:[232,229,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[232,229,25,255],toColor:[235,229,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,229,26,255],toColor:[237,230,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,230,27,255],toColor:[240,230,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,230,28,255],toColor:[242,230,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,230,29,255],toColor:[245,231,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[245,231,30,255],toColor:[247,231,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,231,32,255],toColor:[249,231,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,231,33,255],toColor:[252,232,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,232,35,255],toColor:[254,232,37,255]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,
255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,
107,45]}],m=[{name:"Aspect",id:"aspect_predefined"},{name:"Black to White",id:"blackToWhite_predefined"},{name:"Blue Bright",id:"blueBright_predefined"},{name:"Blue Light to Dark",id:"blueLightToDark_predefined"},{name:"Blue-Green Bright",id:"blueGreenBright_predefined"},{name:"Blue-Green Light to Dark",id:"blueGreenLightToDark_predefined"},{name:"Brown Light to Dark",id:"brownLightToDark_predefined"},{name:"Brown to Blue Green Diverging, Bright",id:"brownToBlueGreenDivergingBright_predefined"},{name:"Brown to Blue Green Diverging, Dark",
id:"brownToBlueGreenDivergingDark_predefined"},{name:"Cividis",id:"cividis_predefined"},{name:"Coefficient Bias",id:"coefficientBias_predefined"},{name:"Cold to Hot Diverging",id:"coldToHotDiverging_predefined"},{name:"Condition Number",id:"conditionNumber_predefined"},{name:"Cyan to Purple",id:"cyanToPurple_predefined"},{name:"Cyan-Light to Blue-Dark",id:"cyanLightToBlueDark_predefined"},{name:"Distance",id:"distance_predefined"},{id:"elevation1_predefined",name:"Elevation #1"},{id:"elevation2_predefined",
name:"Elevation #2"},{id:"errors_predefined",name:"Errors"},{id:"grayLightToDark_predefined",name:"Gray Light to Dark"},{id:"greenBright_predefined",name:"Green Bright"},{id:"greenLightToDark_predefined",name:"Green Light to Dark"},{name:"Green to Blue",id:"greenToBlue_predefined"},{name:"Inferno",id:"inferno_predefined"},{name:"Magma",id:"magma_predefined"},{name:"Orange Bright",id:"orangeBright_predefined"},{name:"Orange Light to Dark",id:"orangeLightToDark_predefined"},{id:"partialSpectrum_predefined",
name:"Partial Spectrum"},{id:"partialSpectrum1Diverging_predefined",name:"Partial Spectrum 1 Diverging",type:"multipart"},{id:"partialSpectrum2Diverging_predefined",name:"Partial Spectrum 2 Diverging"},{name:"Plasma",id:"plasma_predefined"},{name:"Pink to YellowGreen Diverging, Bright",id:"pinkToYellowGreenDivergingBright_predefined"},{name:"Pink to YellowGreen Diverging, Dark",id:"pinkToYellowGreenDivergingDark_predefined"},{id:"precipitation_predefined",name:"Precipitation"},{id:"prediction_predefined",
name:"Prediction"},{name:"Purple Bright",id:"purpleBright_predefined"},{id:"purpleToGreenDivergingBright_predefined",name:"Purple to Green Diverging, Bright"},{id:"purpleToGreenDivergingDark_predefined",name:"Purple to Green Diverging, Dark"},{name:"Purple-Blue Bright",id:"purpleBlueBright_predefined"},{name:"Purple-Blue Light to Dark",id:"purpleBlueLightToDark_predefined"},{name:"Purple-Red Bright",id:"purpleRedBright_predefined"},{name:"Purple-Red Light to Dark",id:"purpleRedLightToDark_predefined"},
{name:"Red Bright",id:"redBright_predefined"},{name:"Red Light to Dark",id:"redLightToDark_predefined"},{id:"redToBlueDivergingBright_predefined",name:"Red to Blue Diverging, Bright"},{id:"redToBlueDivergingDark_predefined",name:"Red to Blue Diverging, Dark"},{id:"redToGreen_predefined",name:"Red to Green"},{id:"redToGreenDivergingBright_predefined",name:"Red to Green Diverging, Bright"},{id:"redToGreenDivergingDark_predefined",name:"Red to Green Diverging, Dark"},{name:"Slope",id:"slope_predefined"},
{id:"spectrumFullBright_predefined",name:"Spectrum-Full Bright"},{id:"spectrumFullDark_predefined",name:"Spectrum-Full Dark"},{id:"spectrumFullLight_predefined",name:"Spectrum-Full Light"},{id:"surface_predefined",name:"Surface"},{id:"temperature_predefined",name:"Temperature"},{name:"Viridis",id:"viridis_predefined"},{name:"White to Black",id:"whiteToBlack_predefined"},{id:"yellowToDarkRed_predefined",name:"Yellow to Dark Red"},{id:"yellowToGreenToDarkBlue_predefined",name:"Yellow to Green to Dark Blue"},
{name:"Yellow to Red",id:"yellowToRed_predefined"},{name:"Yellow-Green Bright",id:"yellowGreenBright_predefined"},{name:"Yellow-Green Light to Dark",id:"yellowGreenLightToDark_predefined"}],w=new a({data:m});F.mixin(h,{predefinedColorRamps:k,predefinedColorRampNameMap:m,getColorRampName:function(p){p=f(p);return p.id?(p=w.query({id:p.id}),p[0]?p[0].name:null):null},fromJson:function(p){var A=null;if(!p)return A;"multipart"===p.type?(A=new n,A.colorRamps=y.map(p.colorRamps,function(C){return c(C)},
this)):"algorithmic"===p.type&&(A=c(p));return A},colorsEqual:g,getColorRampId:f,invertColorRamp:d,convertColorRampToColormap:function(p,A){if(p&&A){var C=p.colorRamps?p.colorRamps.length:1,z=[],q=[],v,B,D,x,E=0,G=0;for(E=0;E<C;E++)z[E]={},z[E].start=G,z[E].end=G+1/C,G=z[E].end;for(E=0;E<A;E++){var I=(E+.5)/A;y.forEach(z,function(L,Y){I>=L.start&&I<L.end&&(x=(I-L.start)/(L.end-L.start),1<z.length?(v=r.getDojoColor(p.colorRamps[Y].fromColor),B=r.getDojoColor(p.colorRamps[Y].toColor)):(v=r.getDojoColor(p.fromColor),
B=r.getDojoColor(p.toColor)),D=e(v,B,x),q.push([E,D.r,D.g,D.b]))},this)}return q}},interpolateLabColor:e});return h})},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(F,y,a){return F("dojo.store.Memory",null,{constructor:function(u){for(var n in u)this[n]=u[n];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:a,get:function(u){return this.data[this.index[u]]},getIdentity:function(u){return u[this.idProperty]},
put:function(u,n){var t=this.data,r=this.index,l=this.idProperty;l=u[l]=n&&"id"in n?n.id:l in u?u[l]:Math.random();if(l in r){if(n&&!1===n.overwrite)throw Error("Object already exists");t[r[l]]=u}else r[l]=t.push(u)-1;return l},add:function(u,n){(n=n||{}).overwrite=!1;return this.put(u,n)},remove:function(u){var n=this.index,t=this.data;if(u in n)return t.splice(n[u],1),this.setData(t),!0},query:function(u,n){return y(this.queryEngine(u,n)(this.data))},setData:function(u){u.items?(this.idProperty=
u.identifier||this.idProperty,u=this.data=u.items):this.data=u;this.index={};for(var n=0,t=u.length;n<t;n++)this.index[u[n][this.idProperty]]=n}})})},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../when"],function(F,y,a){var u=function(n){function t(l){n[l]=function(){var d=arguments,f=a(n,function(b){Array.prototype.unshift.call(d,b);return u(F[l].apply(F,d))});if("forEach"!==l||r)return f}}if(!n)return n;var r=!!n.then;r&&(n=y.delegate(n));t("forEach");
t("filter");t("map");null==n.total&&(n.total=a(n,function(l){return l.length}));return n};y.setObject("dojo.store.util.QueryResults",u);return u})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(F){return function(y,a){function u(t){t=F.filter(t,y);var r=a&&a.sort;r&&t.sort("function"==typeof r?r:function(d,f){for(var b,c=0;b=r[c];c++){var g=d[b.attribute],e=f[b.attribute];g=null!=g?g.valueOf():g;e=null!=e?e.valueOf():e;if(g!=e)return!!b.descending==(null==g||
g>e)?-1:1}return 0});if(a&&(a.start||a.count)){var l=t.length;t=t.slice(a.start||0,(a.start||0)+(a.count||Infinity));t.total=l}return t}switch(typeof y){default:throw Error("Can not query with a "+typeof y);case "object":case "undefined":var n=y;y=function(t){for(var r in n){var l=n[r];if(l&&l.test){if(!l.test(t[r],t))return!1}else if(l!=t[r])return!1}return!0};break;case "string":if(!this[y])throw Error("No filter function "+y+" was found in store");y=this[y];case "function":}u.matches=y;return u}})},
"esri/tasks/AlgorithmicColorRamp":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../Color ./ColorRamp".split(" "),function(F,y,a,u,n,t){F=F(t,{declaredClass:"esri.tasks.AlgorithmicColorRamp",type:"algorithmic",fromColor:null,toColor:null,algorithm:null,toJson:function(){switch(this.algorithm&&this.algorithm.toLowerCase()){case "cie-lab":var r="esriCIELabAlgorithm";break;case "hsv":r="esriHSVAlgorithm";break;case "lab-lch":r="esriLabLChAlgorithm"}r={type:"algorithmic",algorithm:r};
r.fromColor=n.toJsonColor(this.fromColor);r.toColor=n.toJsonColor(this.toColor);return r}});a("extend-esri")&&y.setObject("tasks.AlgorithmicColorRamp",F,u);return F})},"esri/tasks/ColorRamp":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(F,y,a,u){F=F(null,{declaredClass:"esri.tasks.ColorRamp",type:null});a("extend-esri")&&y.setObject("tasks.ColorRamp",F,u);return F})},"esri/tasks/MultipartColorRamp":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../symbols/Symbol ./ColorRamp".split(" "),
function(F,y,a,u,n,t){F=F(t,{declaredClass:"esri.tasks.MultipartColorRamp",type:"multipart",constructor:function(){this.colorRamps=[]},addColorRamp:function(r){this.colorRamps.push(r)},toJson:function(){return{type:"multipart",colorRamps:a.map(this.colorRamps,function(r){return r.toJson()})}}});u("extend-esri")&&y.setObject("tasks.MultipartColorRamp",F,n);return F})},"esri/renderers/colorUtils":function(){define(["dojo/_base/Color","dojo/_base/array"],function(F,y){var a={COEF_RGB2XYZ:[[.4124,.3576,
.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],COEF_XYZ2RGB:[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],matrixProduct:function(n,t){var r=[],l,d;if(n[0].length!==t.length)throw"dimensions do not match";var f=n.length,b=n[0].length,c=0;for(l=0;l<f;l++){for(d=c=0;d<b;d++)c+=n[l][d]*t[d];r.push(c)}return r},rgb2xyz:function(n){n=[n.r/255,n.g/255,n.b/255].map(function(t){return.04045>=t?t/12.92:Math.pow((t+.055)/1.055,2.4)});n=this.matrixProduct(this.COEF_RGB2XYZ,n);return{x:100*
n[0],y:100*n[1],z:100*n[2]}},xyz2rgb:function(n){n=this.matrixProduct(this.COEF_XYZ2RGB,[n.x/100,n.y/100,n.z/100]).map(function(t){return Math.min(1,Math.max(.0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055,0))});return{r:Math.round(255*n[0]),g:Math.round(255*n[1]),b:Math.round(255*n[2])}},xyz2lab:function(n){n=[n.x/95.047,n.y/100,n.z/108.883].map(function(t){return t>Math.pow(6/29,3)?Math.pow(t,1/3):1/3*Math.pow(29/6,2)*t+4/29});return{l:116*n[1]-16,a:500*(n[0]-n[1]),b:200*(n[1]-n[2])}},lab2xyz:function(n){var t=
n.l;n=[(t+16)/116+n.a/500,(t+16)/116,(t+16)/116-n.b/200].map(function(r){return r>6/29?Math.pow(r,3):3*Math.pow(6/29,2)*(r-4/29)});return{x:95.047*n[0],y:100*n[1],z:108.883*n[2]}},lab2lch:function(n){var t=n.l,r=n.a,l=n.b;n=Math.sqrt(r*r+l*l);r=Math.atan2(l,r);r=0<r?r:r+2*Math.PI;return{l:t,c:n,h:r}},lch2lab:function(n){var t=n.c,r=n.h;return{l:n.l,a:t*Math.cos(r),b:t*Math.sin(r)}},rgb2lab:function(n){return this.xyz2lab(this.rgb2xyz(n))},lab2rgb:function(n){return this.xyz2rgb(this.lab2xyz(n))},
rgb2lch:function(n){return this.lab2lch(this.xyz2lab(this.rgb2xyz(n)))},lch2rgb:function(n){return this.xyz2rgb(this.lab2xyz(this.lch2lab(n)))}},u={rgb2hsv:function(n){var t=n.r,r=n.g;n=n.b;var l=Math.max(t,r,n),d=l-Math.min(t,r,n),f;0===d?f=0:l===t?f=(r-n)/d%6:l===r?f=(n-t)/d+2:l===n&&(f=(t-r)/d+4);0>f&&(f+=6);return{h:60*f,s:100*(0===d?0:d/l),v:100/255*l}},hsv2rgb:function(n){var t=(n.h+360)%360/60,r=n.v/100*255;n=n.s/100*r;var l=n*(1-Math.abs(t%2-1));switch(Math.floor(t)){case 0:t={r:n,g:l,b:0};
break;case 1:t={r:l,g:n,b:0};break;case 2:t={r:0,g:n,b:l};break;case 3:t={r:0,g:l,b:n};break;case 4:t={r:l,g:0,b:n};break;case 5:case 6:t={r:n,g:0,b:l};break;default:t={r:0,g:0,b:0}}t.r=Math.round(t.r+r-n);t.g=Math.round(t.g+r-n);t.b=Math.round(t.b+r-n);return t}};return{toRGB:function(n){var t;void 0!==n.r&&void 0!==n.g&&void 0!==n.b?t=n:void 0!==n.l&&void 0!==n.c&&void 0!==n.h?t=a.lch2rgb(n):void 0!==n.l&&void 0!==n.a&&void 0!==n.b?t=a.lab2rgb(n):void 0!==n.x&&void 0!==n.y&&void 0!==n.z?t=a.xyz2rgb(n):
void 0!==n.h&&void 0!==n.s&&void 0!==n.v&&(t=u.hsv2rgb(n));return t},toHSV:function(n){if(void 0!==n.h&&void 0!==n.s&&void 0!==n.v)return n;n=this.toRGB(n);return u.rgb2hsv(n)},toLAB:function(n){return void 0!==n.l&&void 0!==n.a&&void 0!==n.b?n:a.rgb2lab(this.toRGB(n))},toLCH:function(n){return void 0!==n.l&&void 0!==n.c&&void 0!==n.h?n:a.rgb2lch(this.toRGB(n))},toXYZ:function(n){return void 0!==n.x&&void 0!==n.y&&void 0!==n.z?n:a.rgb2xyz(this.toRGB(n))},getDojoColor:function(n){if(n){if(Array.isArray(n))return F.fromArray(n);
if(void 0!==n.r&&void 0!==n.g&&void 0!==n.b)return n}},correctRGBLimits:function(n){var t=[n.r,n.g,n.b];y.forEach(t,function(r,l){0>t[l]?t[l]=0:255<t[l]&&(t[l]=255);t[l]=Math.floor(t[l])});return{r:t[0],g:t[1],b:t[2],a:1}}}})},"esri/renderers/jsonUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../Color ../symbols/jsonUtils ./SimpleRenderer ./UniqueValueRenderer ./ClassBreaksRenderer ./VectorFieldRenderer ./DotDensityRenderer ./ScaleDependentRenderer ./TimeClassBreaksAger ./TimeRampAger ./TemporalRenderer ./HeatmapRenderer ./StretchRenderer ./ShadedReliefRenderer ./ColormapRenderer".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m,w,p,A){var C={createDefaultRenderer:function(z){z=r.createDefaultSymbol(z);return new l(z)},fromJson:function(z,q){switch(z.type||""){case "simple":z=new l(z,q);break;case "uniqueValue":z=new d(z,null,null,null,null,q);break;case "classBreaks":z=new f(z,null,q);break;case "vectorField":z=new b(z);break;case "scaleDependent":z=this._scaleDependentFromJson(z);break;case "dotDensity":z=z.attributes?C.createDefaultRenderer("esriGeometryPolygon"):this._dotDensityFromJson(z);
break;case "temporal":z=this._temporalFromJson(z,q);break;case "heatmap":z=this._heatmapFromJson(z);break;case "rasterStretch":z=new w(z);break;case "rasterShadedRelief":z=new p(z);break;case "rasterColormap":z=new A(z);break;default:z=(z=q&&q.geometryType)?C.createDefaultRenderer(z):null}return z},_scaleDependentFromJson:function(z){var q={},v=z.minScale;q.rendererInfos=F.map(z.rendererInfos,function(B){var D=B.maxScale;B={minScale:v,maxScale:D,renderer:B.renderer&&this.fromJson(B.renderer)};v=D;
return B},this);return new g(q)},_dotDensityFromJson:function(z){z.backgroundColor&&y.isArray(z.backgroundColor)&&(z.backgroundColor=t.toDojoColor(z.backgroundColor));0<z.dotSize&&(z.dotSize=u.pt2px(z.dotSize));z.fields&&F.forEach(z.fields,function(q){q&&y.isArray(q.color)&&(q.color=t.toDojoColor(q.color))});z.legendOptions&&(z.legendOptions.backgroundColor&&y.isArray(z.legendOptions.backgroundColor)&&(z.legendOptions.backgroundColor=t.toDojoColor(z.legendOptions.backgroundColor)),z.legendOptions.outline&&
(z.legendOptions.outline=r.fromJson(z.legendOptions.outline)));z.outline&&(z.outline=r.fromJson(z.outline));return new c(z)},_temporalFromJson:function(z,q){var v=q&&q.geometryType;z=z||{};var B=this.fromJson(z.observationRenderer,q);q=z.latestObservationRenderer?this.fromJson(z.latestObservationRenderer,q):null;v=z.trackRenderer?this.fromJson(z.trackRenderer,v?{geometryType:"esriGeometryPolyline"}:null):null;z=this._agerFromJson(z.observationAger);return new k(B,q,v,z)},_agerFromJson:function(z){var q;
z=z||{};z.colorRange||z.sizeRange||z.alphaRange?q=this._timeRampFromJson(z):z.agerClassBreakInfos&&(q=this._timeClassBreaksFromJson(z));return q},_timeRampFromJson:function(z){var q,v,B;z.colorRange&&1<z.colorRange.length&&(q=[t.toDojoColor(z.colorRange[0]),t.toDojoColor(z.colorRange[1])]);z.sizeRange&&1<z.sizeRange.length&&(v=[z.sizeRange[0],z.sizeRange[1]]);z.alphaRange&&1<z.alphaRange.length&&(B=[z.alphaRange[0]/255,z.alphaRange[1]/255]);return new h(q,v,B)},_timeClassBreaksFromJson:function(z){var q=
z.agerClassBreakInfos,v=[],B;var D=e.UNIT_DAYS;switch(z.timeUnits){case "esriTimeUnitsSeconds":D=e.UNIT_SECONDS;break;case "esriTimeUnitsMilliseconds":D=e.UNIT_MILLISECONDS;break;case "esriTimeUnitsHours":D=e.UNIT_HOURS;break;case "esriTimeUnitsMinutes":D=e.UNIT_MINUTES;break;case "esriTimeUnitsMonths":D=e.UNIT_MONTHS;break;case "esriTimeUnitsWeeks":D=e.UNIT_WEEKS;break;case "esriTimeUnitsYears":D=e.UNIT_YEARS}for(B=0;B<q.length;B+=1){z=q[B];var x={minAge:0,maxAge:z.oldestAge||Infinity};z.color&&
(x.color=t.toDojoColor(z.color));z.alpha&&(x.alpha=z.alpha/255);x.size=z.size;v[B]=x}return new e(v,D)},_heatmapFromJson:function(z){var q=z.colorStops;q&&q instanceof Array&&F.forEach(q,function(v){v.color=t.toDojoColor(v.color)});return new m(z)}};a("extend-esri")&&y.mixin(y.getObject("renderer",!0,n),C);return C})},"esri/renderers/VectorFieldRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/_base/array ../kernel ../lang ../Color ./Renderer ./ClassBreaksRenderer ../symbols/SimpleMarkerSymbol ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/jsonUtils require".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e){var h={STYLE_WIND_BARBS:"wind_speed",STYLE_SINGLE_ARROW:"single_arrow",STYLE_CLASSIFIED_ARROW:"classified_arrow",STYLE_BEAUFORT_KN:"beaufort_kn",STYLE_BEAUFORT_METER:"beaufort_m",STYLE_BEAUFORT_MILE:"beaufort_mi",STYLE_BEAUFORT_FEET:"beaufort_ft",STYLE_BEAUFORT_KM:"beaufort_km",STYLE_OCEAN_CURRENT_M:"ocean_current_m",STYLE_OCEAN_CURRENT_KN:"ocean_current_kn",STYLE_SCALAR:"simple_scalar"},k=F(l,{declaredClass:"esri.renderer.VectorFieldRenderer",iconFolderPath:"../images/symbol/sfs/",
constructor:function(m){t.isDefined(m)||(m={});m.attributeField=m.attributeField||"Magnitude";m.rotationInfo=m.rotationInfo||this._getRotationInfo(m);F.safeMixin(this,m);this.setRotationInfo(this.rotationInfo);this.style=this.style||k.STYLE_SINGLE_ARROW;this.singleArrowSymbol&&(this.singleArrowSymbol=this.singleArrowSymbol.declaredClass?this.singleArrowSymbol:g.fromJson(this.singleArrowSymbol));this.renderer=new d(this._getDefaultSymbol(),m.attributeField);this._updateRenderer(this.style);this.flowRepresentation=
this.flowRepresentation||this.FLOW_FROM},getSymbol:function(m){return this.renderer&&this.renderer.getSymbol(m)},setVisualVariables:function(m){m=u.filter(m,function(w){if("sizeInfo"===w.type)return t.isDefined(this._updateSizeInfo(w))},this);this.inherited(arguments);return this},setSizeInfo:function(m){this._updateSizeInfo(m);this.inherited(arguments);return this},setProportionalSymbolInfo:function(m){this.setSizeInfo(m);return this},setColorInfo:function(m){return this},_updateRenderer:function(m){return t.isDefined(this.renderer)?
m===k.STYLE_SINGLE_ARROW?this._createSingleArrowRenderer():m===k.STYLE_BEAUFORT_KN?this._createBeaufortKnotsRenderer():m===k.STYLE_BEAUFORT_METER?this._createBeaufortMeterRenderer():m===k.STYLE_BEAUFORT_FEET?this._createBeaufortFeetRenderer():m===k.STYLE_BEAUFORT_MILE?this._createBeaufortMilesRenderer():m===k.STYLE_BEAUFORT_KM?this._createBeaufortKilometersRenderer():m===k.STYLE_OCEAN_CURRENT_M?this._createCurrentMeterRenderer():m===k.STYLE_OCEAN_CURRENT_KN?this._createCurrentKnotsRenderer():m===
k.STYLE_SCALAR?this._createSimpleScalarRenderer():m===k.STYLE_WIND_BARBS?this._createWindBarbsRenderer():this._createClassifiedArrowRenderer():Error("Invalid Renderer!")},_updateSizeInfo:function(m){return m&&t.isDefined(m.minSize)&&t.isDefined(m.maxSize)&&t.isDefined(m.minDataValue)&&t.isDefined(m.maxDataValue)?(this.style===k.STYLE_WIND_BARBS&&(m.minSize=m.maxSize),m.field=m.field||"Magnitude",m.type="sizeInfo",this.minDataValue=m.minDataValue,this.maxDataValue=m.maxDataValue,m):null},_createClassifiedArrowRenderer:function(){this.renderer.defaultSymbol=
this._getDefaultSymbol(new r([56,168,0]));var m=[0,1E-6,3.5,7,10.5,14];if(t.isDefined(this.minDataValue)&&t.isDefined(this.maxDataValue)){var w=(this.maxDataValue-this.minDataValue)/5;m=[];var p;var A=this.minDataValue;for(p=0;6>p;p++)m[p]=A,A+=w}this._addBreaks(m,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]])},_createSingleArrowRenderer:function(){this.renderer.defaultSymbol=this.singleArrowSymbol||this._getDefaultSymbol()},_createBeaufortMeterRenderer:function(){this.renderer.defaultSymbol=
this._getDefaultSymbol(new r([214,47,39]));this._addBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new r([214,47,39]));this._addBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],
[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]])},_createBeaufortFeetRenderer:function(){var m=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];u.forEach(m,function(w,p){m[p]*=3.28084});this.renderer.defaultSymbol=this._getDefaultSymbol(new r([214,47,39]));this._addBreaks(m,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,
21]])},_createBeaufortMilesRenderer:function(){var m=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];u.forEach(m,function(w,p){m[p]*=2.23694});this.renderer.defaultSymbol=this._getDefaultSymbol(new r([214,47,39]));this._addBreaks(m,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKilometersRenderer:function(){var m=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,
28.6,32.7];u.forEach(m,function(w,p){m[p]*=3.6});this.renderer.defaultSymbol=this._getDefaultSymbol(new r([214,47,39]));this._addBreaks(m,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createCurrentMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new r([177,177,177]));this._addBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]])},
_createCurrentKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new r([177,177,177]));this._addBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]])},_createSimpleScalarRenderer:function(){this.renderer.defaultSymbol=new b({url:e.toUrl(this.iconFolderPath+"scalar.png"),height:20,width:20,type:"esriPMS",angle:0})},_createWindBarbsRenderer:function(){var m=[],w;for(w=0;150>=w;w+=5)m.push(w);
var p="M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20;M25 0 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40;M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35;M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15 M25 10 M25 5 L17.5 7.5".split(";");
var A=new b({url:e.toUrl(this.iconFolderPath+"windbarb.png"),height:20,width:20,type:"esriPMS",angle:0});this.renderer.defaultSymbol=A;for(w=0;w<m.length-1;w++)0===w?this.renderer.addBreak({minValue:m[w],maxValue:m[w+1],symbol:A}):this.renderer.addBreak({minValue:m[w],maxValue:m[w+1],symbol:(new f).setPath(p[w]).setOutline((new c).setWidth(1.5)).setSize(20).setColor(new r([0,0,0,255]))})},_getDefaultSymbol:function(m){return(new f).setPath("M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z").setOutline((new c).setWidth(0)).setSize(20).setColor(m||
new r([0,92,230]))},_getRotationInfo:function(m){var w=m&&m.rotationField||"Direction",p=(m&&m.flowRepresentation||k.FLOW_FROM)===k.FLOW_FROM;!m.style||m.style!==h.STYLE_OCEAN_CURRENT_KN&&m.style!==h.STYLE_OCEAN_CURRENT_M||(p=!p);return{field:function(A){A=A.attributes[w];return p?A:A+180},type:"geographic"}},_addBreaks:function(m,w){if(!t.isDefined(this.renderer))return Error("Invalid Renderer!");if(!(m&&w&&m.length&&w.length&&m.length>=w.length))return Error("AddBreaks: Input arguments break values and colors not valid");
var p;for(p=0;p<w.length;p++)this.renderer.addBreak({minValue:m[p],maxValue:m[p+1],symbol:this._getDefaultSymbol(new r(w[p]))})},toJson:function(){var m=y.mixin(this.inherited(arguments),{type:"vectorField",style:this.style,attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,symbolTileSize:this.symbolTileSize,inputUnit:this.inputUnit,outputUnit:this.outputUnit});this.renderer&&this.renderer.defaultSymbol&&this.style===k.STYLE_SINGLE_ARROW&&(m.singleArrowSymbol=this.renderer.defaultSymbol.toJson());
return t.fixJson(m)}});y.mixin(k,h,{FLOW_FROM:"flow_from",FLOW_TO:"flow_to"});a("extend-esri")&&y.setObject("renderer.VectorFieldRenderer",k,n);return k})},"esri/renderers/DotDensityRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Renderer ../symbols/PictureFillSymbol ../geometry/ScreenPoint ../geometry/Point".split(" "),function(F,y,a,u,n,t,r,l,d,f,b,c,g){F=F(f,{declaredClass:"esri.renderer.DotDensityRenderer",
constructor:function(e){this.dotSize=e.dotSize||3;this.dotValue=e.dotValue;this.fields=e.fields;this.outline=e.outline;this.backgroundColor=e.backgroundColor;this.exactCount=e.exactCount||!0;this.dotShape=e.dotShape||"square";this.legendOptions=e.legendOptions;this._exactCountMinArea=1E4;this._currentMapScale=this._map=this._canvas=null;this._symbolMap={};this._currentGraphic=this._currentResolution=this._objectIdField=null;this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1;window.CanvasRenderingContext2D||
console.log("The DotDensityRenderer requires a Canvas enabled Browser.  IE8 and less does not support Canvas.")},getSymbol:function(e){this._currentGraphic=e;if(!this._supportsCanvas)return null;this._map||(this._map=e.getLayer()._map,this._objectIdField=e.getLayer().objectIdField,this._currentMapScale=this._map.getScale(),this._currentResolution=this._map.extent.getWidth()/this._map.width,this._map.on("zoom-end",y.hitch(this,function(m){this._currentMapScale=this._map.getScale();this._currentResolution=
m.extent.getWidth()/this._map.width;this._symbolMap[this._currentMapScale]={}})));if(this._symbolMap[this._currentMapScale]&&this._symbolMap[this._currentMapScale][e.attributes[this._objectIdField]]){var h=this._symbolMap[this._currentMapScale][e.attributes[this._objectIdField]];var k=this._getShapeProperties(e);h.setOffset(k.dx,k.dy);return h}h=this._generateFieldsCount(this.fields,e.attributes,this.dotValue);k=this._getShapeProperties(e);if(!k.width||!k.height)return null;h=new b(this._generateImageSrc(k.width,
k.height,h,k.minXY,k.maxXY),this.outline,k.width,k.height);h.setOffset(k.dx,k.dy);this._symbolMap[this._currentMapScale]||(this._symbolMap[this._currentMapScale]={});return this._symbolMap[this._currentMapScale][e.attributes[this._objectIdField]]=h},_generateFieldsCount:function(e,h,k){var m;for(m=e.length-1;0<=m;m--){var w=h[e[m].name]/k;e[m].numPoints=Math.round(w)}return e},_getShapeProperties:function(e){var h=e.geometry.getExtent();h.contains(this._map.extent)&&(h=this._map.extent);var k=Math.ceil(h.getWidth()/
this._currentResolution);var m=Math.ceil(h.getHeight()/this._currentResolution);var w=this._map.toScreen(new g(h.xmin,h.ymin,h.spatialReference));h=this._map.toScreen(new g(h.xmax,h.ymax,h.spatialReference));e=e.getLayer().getNavigationTransform();return{minXY:w,maxXY:h,dx:(w.x-e.dx)%k,dy:(h.y-e.dy)%m,width:k,height:m}},_generateImageSrc:function(e,h,k,m,w,p){var A=this.dotSize,C;this._canvas?(this._canvas.width=e,this._canvas.height=h):this._canvas=this._initCanvas(e,h);var z=this._canvas.getContext("2d");
if(p=p||this.backgroundColor)z.fillStyle=p.toCss(!0),z.fillRect(0,0,e,h),z.fill();for(p=k.length-1;0<=p;p--)for(z.fillStyle=k[p].color.toCss(!0),C=k[p].numPoints-1;0<=C;C--){var q=this._getRandomPoint(e,h,m,w);"square"===this.dotShape?z.fillRect(q.x,q.y,A,A):"circle"===this.dotShape&&(z.beginPath(),z.arc(q.x,q.y,A/2,0,2*Math.PI,!0));z.fill()}return this._canvas.toDataURL()},_initCanvas:function(e,h){e=u.create("canvas",{id:"canvas",width:e+"px",height:h+"px",style:"position: absolute; left: -10000px; top: 0px;"},
null);document.body.appendChild(e);return e},_getRandomInt:function(e,h){return Math.floor(Math.random()*(h-e+1)+e)},_getRandomPoint:function(e,h,k,m){var w={},p=this.outline&&this.outline.width?this.outline.width:0;if(!0===this.exactCount&&e*h>this._exactCountMinArea){e=!1;do w.x=this._getRandomInt(k.x,m.x),w.y=this._getRandomInt(m.y,k.y),e=new c(w.x,w.y),e=this._checkPointShapeBounds(e,this.dotSize+p,this._currentGraphic.geometry),!0===e&&(w.x-=k.x,w.y-=m.y);while(!1===e)}else w.x=this._getRandomInt(0,
e),w.y=this._getRandomInt(0,h);return w},_checkPointShapeBounds:function(e,h,k){var m=null;m=!1;var w=!0,p=0;do{switch(p){case 1:e.x+=h;break;case 2:e.y+=h;break;case 3:e.x-=h}m=this._map.toMap(e);m=k.contains(m);!1===m&&(w=!1);p+=1}while(3>=p&&!0===w);return m},setDotSize:function(e){0<e&&(this.dotSize=e)},setDotValue:function(e){0<e&&(this.dotValue=e)},setOutline:function(e){this.outline=e},setBackgroundColor:function(e){this.backgroundColor=e},toJson:function(){var e=y.mixin(this.inherited(arguments),
{type:"dotDensity",backgroundColor:d.toJsonColor(this.backgroundColor),dotShape:this.dotShape,dotSize:0<this.dotSize?t.px2pt(this.dotSize):0,dotValue:this.dotValue,fields:a.map(this.fields,function(h){return l.fixJson({color:d.toJsonColor(h.color),name:h.name})}),legendOptions:this.legendOptions&&l.fixJson({backgroundColor:d.toJsonColor(this.legendOptions.backgroundColor),dotCoverage:this.legendOptions.dotCoverage,outline:this.legendOptions.outline&&this.legendOptions.outline.toJson(),valueUnit:this.legendOptions.valueUnit}),
outline:this.outline&&this.outline.toJson()});return l.fixJson(e)}});n("extend-esri")&&y.setObject("renderer.DotDensityRenderer",F,r);return F})},"esri/renderers/ScaleDependentRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ./Renderer".split(" "),function(F,y,a,u,n,t,r){F=F(r,{declaredClass:"esri.renderer.ScaleDependentRenderer",constructor:function(l){this.setRendererInfos(l&&l.rendererInfos||[])},setRendererInfos:function(l){this.rendererInfos=
l;this._setRangeType();return this},getSymbol:function(l){var d=this.getRendererInfo(l);return d&&d.renderer&&d.renderer.getSymbol(l)},getRendererInfo:function(l){l=l.getLayer().getMap();return"zoom"===this.rangeType?this.getRendererInfoByZoom(l.getZoom()):this.getRendererInfoByScale(l.getScale())},getRendererInfoByZoom:function(l){var d=this.rendererInfos,f,b=0;do{var c=d[b];l>=c.minZoom&&l<=c.maxZoom&&(f=c);b++}while(!f&&b<d.length);return f},getRendererInfoByScale:function(l){var d=this.rendererInfos,
f,b=0;do{var c=d[b];var g=c.minScale;var e=c.maxScale;var h=!g;var k=!e;!h&&l<=g&&(h=!0);!k&&l>=e&&(k=!0);h&&k&&(f=c);b++}while(!f&&b<d.length);return f},addRendererInfo:function(l){var d=0,f=this.rendererInfos,b=l.hasOwnProperty("minZoom")?"minZoom":"minScale",c=f.length;do{var g=f[d];if(c===d||l[b]<g[b]){f.splice(d,0,l);this._setRangeType();var e=!0}d++}while(!e&&d<c);return this},_setRangeType:function(){var l=this.rendererInfos;if(l=l&&l[0])this.rangeType=l.hasOwnProperty("minZoom")?"zoom":l.hasOwnProperty("minScale")?
"scale":""},toJson:function(){if("zoom"===this.rangeType)return null;var l=this.rendererInfos||[],d=l[0]&&l[0].minScale;l=a.mixin(this.inherited(arguments),{type:"scaleDependent",minScale:0<d?d:0,rendererInfos:y.map(l,function(f){return t.fixJson({maxScale:0<f.maxScale?f.maxScale:0,renderer:f.renderer&&f.renderer.toJson()})})});return t.fixJson(l)}});u("extend-esri")&&a.setObject("renderer.ScaleDependentRenderer",F,n);return F})},"esri/renderers/HeatmapRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct ../sniff ../kernel ../lang ../symbols/PictureMarkerSymbol ../Color ./Renderer".split(" "),
function(F,y,a,u,n,t,r,l,d,f){F=F([f],{declaredClass:"esri.renderer.HeatmapRenderer",colors:null,blurRadius:10,maxPixelIntensity:100,minPixelIntensity:0,field:null,fieldOffset:null,colorStops:null,constructor:function(b){(this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1)?("string"==typeof b&&(b=JSON.parse(b)),y.mixin(this,b),this._canvas=null,this.colors||this.colorStops||(this.colorStops=[{ratio:0,color:"rgba(255, 140, 0, 0)"},{ratio:.75,color:"rgba(255, 140, 0, 1)"},{ratio:.9,color:"rgba(255, 0,   0, 1)"}]),
this.gradient=this._generateGradient(this.colorStops||this.colors)):console.log("The HeatmapRenderer requires a Canvas enabled Browser.  IE8 and less does not support Canvas.")},getSymbol:function(b){if(!this._supportsCanvas)return!1;var c=b.attributes.imageData;b=b.attributes.size;if(!b)return null;var g=this._getContext(b[0],b[1]),e=g.getImageData(0,0,b[0],b[1]);window.ArrayBuffer&&c instanceof ArrayBuffer?c=window.Uint8ClampedArray?new Uint8ClampedArray(c):new Uint8Array(c):c.BYTES_PER_ELEMENT&&
1!==c.BYTES_PER_ELEMENT&&(c=window.Uint8ClampedArray?new Uint8ClampedArray(c.buffer):new Uint8Array(c.buffer));if(window.CanvasPixelArray&&e.data instanceof window.CanvasPixelArray)for(var h=e.data,k=h.length;k--;)h[k]=c[k];else e.data.set(c);g.putImageData(e,0,0);return new l(g.canvas.toDataURL(),b[0],b[1])},setColors:function(b){b&&(b instanceof Array||b.colors)&&(this.gradient=this._generateGradient(b.colors||b),this.colors=b);return this},setColorStops:function(b){b&&(b instanceof Array||b.colorStops)&&
(this.gradient=this._generateGradient(b.colorStops||b),this.colorStops=b);return this},setMaxPixelIntensity:function(b){this.maxPixelIntensity=b;return this},setMinPixelIntensity:function(b){this.minPixelIntensity=b;return this},setField:function(b){this.field=b;return this},setFieldOffset:function(b){this.fieldOffset=b;return this},setBlurRadius:function(b){this.blurRadius=b;return this},getStats:function(){},getHistogramData:function(){},toJson:function(){var b=y.mixin(this.inherited(arguments),
{type:"heatmap",blurRadius:this.blurRadius,colorStops:this._colorsToStops(this.colorStops||this.colors),maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity,field:this.field});null!=this.fieldOffset&&(b.fieldOffset=this.fieldOffset);a.forEach(b.colorStops,function(c){c.color=d.toJsonColor(c.color)});return r.fixJson(b)},_getContext:function(b,c){this._canvas?(this._canvas.width=b,this._canvas.height=c):this._canvas=this._initCanvas(b,c);return this._canvas.getContext("2d")},
_initCanvas:function(b,c){var g=u.create("canvas",{id:"hm_canvas-"+Math.floor(1E3*Math.random()),style:"position: absolute; left: 0px; top: -10000px;"},null);g.width=b;g.height=c;document.body.appendChild(g);return g},_generateGradient:function(b,c){c||(c=512);b=this._colorsToStops(b);for(var g=this._getContext(1,c||512),e=g.createLinearGradient(0,0,0,c),h=0,k;h<b.length;h++)k=b[h],e.addColorStop(k.ratio,k.color.toCss(!0));g.fillStyle=e;g.fillRect(0,0,1,c);return g.getImageData(0,0,1,c).data},_colorsToStops:function(b){var c=
[];if(!b[0])return c;if(null!=b[0].ratio)c=a.map(b,function(w){return{ratio:w.ratio,color:this._toColor(w.color)}},this);else if(null!=b[0].value){var g=Infinity;c=-Infinity;var e=0,h;for(h=0;h<b.length;h++){var k=b[h].value;k<g&&(g=k);k>c&&(c=k)}e=c-g;this.maxPixelIntensity=c;this.minPixelIntensity=g;c=a.map(b,function(w){var p=w.value;w=this._toColor(w.color);return{value:p,ratio:(p-g)/e,color:w}},this)}else{var m=b.length-1;c=a.map(b,function(w,p){return{color:this._toColor(w),ratio:p/m}},this)}return c},
_toColor:function(b){b.toRgba||b.declaredClass||(b=new d(b));return b}});n("extend-esri")&&y.setObject("renderer.HeatmapRenderer",F,t);return F})},"esri/renderers/ShadedReliefRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),function(F,y,a,u,n,t,r,l){F=F(null,{declaredClass:"esri.renderer.ShadedReliefRenderer",constructor:function(d){d=d||{};this.hillshadeType=d.hillshadeType||"traditional";
this.azimuth=null!=d.azimuth?d.azimuth:315;this.altitude=null!=d.altitude?d.altitude:45;this.zFactor=d.zFactor||1;this.scalingType=d.scalingType||"none";this.pixelSizePower=null!=d.pixelSizePower?d.pixelSizePower:.664;this.pixelSizeFactor=null!=d.pixelSizeFactor?d.pixelSizeFactor:.024;this.removeEdgeEffect=d.removeEdgeEffect||!1;this.colorRamp=l.fromJson(d.colorRamp)},toJson:function(){var d={type:"rasterShadedRelief",hillshadeType:this.hillshadeType,azimuth:this.azimuth,altitude:this.altitude,zFactor:this.zFactor,
scalingType:this.scalingType,pixelSizePower:this.pixelSizePower,pixelSizeFactor:this.pixelSizeFactor,colorRamp:this.colorRamp&&this.colorRamp.toJson()};return t.fixJson(d)},toRenderingRule:function(d){}});u("extend-esri")&&a.setObject("renderer.ShadedReliefRenderer",F,n);return F})},"esri/renderers/ColormapRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ./arcadeUtils".split(" "),function(F,y,a,u,n,t,r,l,d){F=
F(l,{declaredClass:"esri.renderer.ColormapRenderer",constructor:function(f){this.colormapInfos=f&&f.colormapInfos},toJson:function(){var f=t.fixJson;var b={type:"rasterColormap",colormapInfos:y.map(this.colormapInfos||[],function(c,g){var e={};c.color&&null!==c.color&&3<=c.color.length&&(e.color=c.color,e.value=c.value||g,e.label=(c.label||g)+"");return f(e)})};b=a.mixin(this.inherited(arguments),b);return f(b)}});u("extend-esri")&&a.setObject("renderer.ColormapRenderer",F,n);return F})},"esri/renderers/arcadeUtils":function(){define(["dojo/_base/lang",
"dojo/has","../kernel","../support/expressionUtils"],function(F,y,a,u){y("extend-esri")&&F.setObject("renderer.arcadeUtils",u,a);return u})},"esri/utils":function(){define("./domUtils ./lang ./urlUtils ./request ./tileUtils ./graphicsUtils ./deferredUtils ./layerUtils ./geometry/normalizeUtils".split(" "),function(){return{}})},"esri/graphicsUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","./kernel","./geometry/Extent"],function(F,y,a,u,n){var t={graphicsExtent:function(r){if(!r||
!r.length)return null;var l=null,d,f=r.length;for(d=0;d<f;d++){var b=r[d].geometry;if(b){var c=b.getExtent();c||"point"!==b.type||null==b.x||null==b.y||(c=new n(b.x,b.y,b.x,b.y,b.spatialReference));c&&(l=l?l.union(c):c)}}return 0>l.getWidth()&&0>l.getHeight()?null:l},getGeometries:function(r){return y.map(r,function(l){return l.geometry})},_encodeGraphics:function(r,l){return y.map(r,function(d,f){d=d.toJson();var b={};d.geometry&&(f=l&&l[f],b.geometry=f&&f.toJson()||d.geometry);d.attributes&&(b.attributes=
d.attributes);return b})}};a("extend-esri")&&F.mixin(u,t);return t})},"esri/IdentityManager":function(){define(["./IdentityManagerDialog","./kernel","./OAuthSignInHandler","dojo/_base/declare"],function(F,y,a,u){F=new F;y.id=u.safeMixin(F,a);return y.id})},"esri/IdentityManagerDialog":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ./kernel ./lang ./domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/jsapi dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k){y=y([h],{declaredClass:"esri.IdentityManager",_eventMap:{"dialog-cancel":["info"]},constructor:function(m){n.mixin(this,m);this.registerConnectEvents()},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblUser}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblPwd}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(m,w,p){this._nls||(this._nls=k.identity);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.onDialogCreate());var A=this._loginDialog,C=p&&p.error,z=p&&p.token,q=new u(function(){A.onCancel()});if(A.open)return m=Error("BUSY"),m.name="identity-manager:busy",m.code="IdentityManager.1",m.log=!!a.isDebug,q.errback(m),q;g.hide(A.errMsg_);C&&403==C.code&&z&&(r.set(A.errMsg_,"innerHTML",this._nls.forbidden),
g.show(A.errMsg_));A.dfd_=q;A.serverInfo_=w;A.resUrl_=m;A.admin_=p&&p.isAdmin;r.set(A.resLink_,{title:m,innerHTML:"("+(this.getResourceName(m)||this._nls.lblItem)+")"});r.set(A.serverLink_,{title:w.server,innerHTML:(-1!==w.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":w.server)+" "});A.txtPwd_.set("value","");A.show();return q},_createLoginDialog:function(){var m=this._nls,w=c.substitute(m,this._dialogContent);w=c.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},w);var p=new f({title:m.title,content:w,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(A){A.charOrCode===l.ENTER&&this.execute_()},execute_:function(){var A=this.txtUser_.get("value"),C=this.txtPwd_.get("value"),z=this.dfd_,q=this;if(this.form_.validate()&&A&&C){this.btnSubmit_.set("label",m.lblSigning);var v=b.id.findCredential(q.resUrl_,A),B=function(D){q.btnSubmit_.set("label",
m.lblOk);q.btnSubmit_.set("disabled",!1);g.hide(q.errMsg_);q.hide();f._DialogLevelManager.hide(q);var x=q.serverInfo_;q.dfd_=q.serverInfo_=q.generateDfd_=q.resUrl_=null;var E=v;if(D){var G=D.token;var I=c.isDefined(D.expires)?Number(D.expires):null;var L=!!D.ssl;E?(E.userId=A,E.token=G,E.expires=I,E.validity=D.validity,E.ssl=L,E.creationTime=(new Date).getTime()):E=new e({userId:A,server:x.server,token:G,expires:I,ssl:L,isAdmin:q.admin_,validity:D.validity})}z.callback(E)};v&&!v._enqueued?B():(q.btnSubmit_.set("disabled",
!0),q.generateDfd_=b.id.generateToken(this.serverInfo_,{username:A,password:C},{isAdmin:this.admin_}).addCallback(B).addErrback(function(D){q.btnSubmit_.set("disabled",!1);q.generateDfd_=null;q.btnSubmit_.set("label",m.lblOk);r.set(q.errMsg_,"innerHTML",D&&D.code?m.invalidUser:m.noAuthService);g.show(q.errMsg_)}))}},cancel_:function(){p.generateDfd_&&p.generateDfd_.cancel();var A=p.dfd_,C=p.resUrl_,z=p.serverInfo_;p.btnSubmit_.set("disabled",!1);p.dfd_=p.serverInfo_=p.generateDfd_=p.resUrl_=null;
g.hide(p.errMsg_);f._DialogLevelManager.hide(p);p.esriIdMgr_.onDialogCancel({resourceUrl:C,serverInfo:z});C=Error("ABORTED");C.name="identity-manager:user-aborted";C.code="IdentityManager.2";C.log=!!a.isDebug;A.errback(C)}});w=p.domNode;p.form_=d.byNode(F.query(".esriIdForm",w)[0]);p.txtUser_=d.byNode(F.query(".esriIdUser",w)[0]);p.txtPwd_=d.byNode(F.query(".esriIdPwd",w)[0]);p.btnSubmit_=d.byNode(F.query(".esriIdSubmit",w)[0]);p.btnCancel_=d.byNode(F.query(".esriIdCancel",w)[0]);p.resLink_=F.query(".resLink",
w)[0];p.serverLink_=F.query(".serverLink",w)[0];p.errMsg_=F.query(".esriErrorMsg",w)[0];p.connect(p.txtUser_,"onKeyPress",p.keypressed_);p.connect(p.txtPwd_,"onKeyPress",p.keypressed_);p.connect(p.btnSubmit_,"onClick",p.execute_);p.connect(p.btnCancel_,"onClick",p.onCancel);p.connect(p,"onCancel",p.cancel_);return p}});t("extend-esri")&&(b.IdentityManagerDialog=b.IdentityManager=y);return y})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m,w,p,A,C,z,q,v,B,D,x,E,G,I,L){function Y(){}var X=new n;X.resolve(!0);z=u("dijit._DialogBase"+(k("dojo-bidi")?"_NoBidi":""),[v,D,x,B],{templateString:L,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:z.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(ka){this._set("draggable",ka)},maxRatio:.9,
closable:!0,_setClosableAttr:function(ka){this.closeButtonNode.style.display=ka?"":"none";this._set("closable",ka)},postMixInProperties:function(){var ka=b.getLocalization("dijit","common");g.mixin(this,ka);this.inherited(arguments)},postCreate:function(){d.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);a.after(this,"onExecute",g.hitch(this,"hide"),!0);a.after(this,"onCancel",g.hitch(this,"hide"),!0);e(this.closeButtonNode,
m.press,function(ka){ka.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&sa.isTop(this)&&(this._getFocusItems(),C.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();C.focus(this._firstFocusItem)},_endDrag:function(){var ka=l.position(this.domNode),ma=w.getBox(this.ownerDocument);ka.y=Math.min(Math.max(ka.y,0),ma.h-ka.h);ka.x=Math.min(Math.max(ka.x,0),ma.w-ka.w);this._relativePosition=ka;this._position()},
_setup:function(){var ka=this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==k("ie")?A:p)(ka,{handle:this.titleBar}),a.after(this._moveable,"onMoveStop",g.hitch(this,"_endDrag"),!0)):r.add(ka,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":y.map(this["class"].split(/\s/),function(ma){return ma+"_underlay"}).join(" "),_onKeyDown:g.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!r.contains(this.ownerDocumentBody,
"dojoMove")){var ka=this.domNode,ma=w.getBox(this.ownerDocument),wa=this._relativePosition,ja=l.position(ka);d.set(ka,{left:Math.floor(ma.l+(wa?Math.min(wa.x,ma.w-ja.w):(ma.w-ja.w)/2))+"px",top:Math.floor(ma.t+(wa?Math.min(wa.y,ma.h-ja.h):(ma.h-ja.h)/2))+"px"})}},_onKey:function(ka){if(ka.keyCode==c.TAB){this._getFocusItems();var ma=ka.target;this._firstFocusItem==this._lastFocusItem?(ka.stopPropagation(),ka.preventDefault()):ma==this._firstFocusItem&&ka.shiftKey?(C.focus(this._lastFocusItem),ka.stopPropagation(),
ka.preventDefault()):ma!=this._lastFocusItem||ka.shiftKey||(C.focus(this._firstFocusItem),ka.stopPropagation(),ka.preventDefault())}else this.closable&&ka.keyCode==c.ESCAPE&&(this.onCancel(),ka.stopPropagation(),ka.preventDefault())},show:function(){if(this.open)return X.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),sa.hide(this));var ka=w.get(this.ownerDocument);this._modalconnects.push(e(ka,
"scroll",g.hitch(this,"resize",null)));this._modalconnects.push(e(this.domNode,"keydown",g.hitch(this,"_onKey")));d.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();this._fadeInDeferred=new n(g.hitch(this,function(){ma.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,Y);ka=this._fadeInDeferred.promise;var ma=f.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:g.hitch(this,function(){sa.show(this,this.underlayAttrs)}),
onEnd:g.hitch(this,function(){this.autofocus&&sa.isTop(this)&&(this._getFocusItems(),C.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return ka},hide:function(){if(!this._alreadyInitialized||!this.open)return X.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred=new n(g.hitch(this,function(){ma.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,Y);this._fadeOutDeferred.then(g.hitch(this,"onHide"));
var ka=this._fadeOutDeferred.promise;var ma=f.fadeOut({node:this.domNode,duration:this.duration,onEnd:g.hitch(this,function(){this.domNode.style.display="none";sa.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var wa;wa=this._modalconnects.pop();)wa.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return ka},resize:function(ka){if("none"!=this.domNode.style.display){this._checkIfSingleChild();
if(!ka){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),y.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(ua){ua&&d.set(ua,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var ma=w.getBox(this.ownerDocument);ma.w*=this.maxRatio;ma.h*=this.maxRatio;var wa=l.position(this.domNode);
this._shrunk=!1;wa.w>=ma.w&&(ka={w:ma.w},l.setMarginBox(this.domNode,ka),wa=l.position(this.domNode),this._shrunk=!0);wa.h>=ma.h&&(ka||(ka={w:wa.w}),ka.h=ma.h,this._shrunk=!0);ka&&(ka.w||(ka.w=wa.w),ka.h||(ka.h=wa.h))}if(ka){l.setMarginBox(this.domNode,ka);ma=[];this.titleBar&&ma.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&ma.push({domNode:this.actionBarNode,region:"bottom"});wa={domNode:this.containerNode,region:"center"};ma.push(wa);var ja=I.marginBox2contentBox(this.domNode,
ka);I.layoutChildren(this.domNode,ja,ma);this._singleChild?(ma=I.marginBox2contentBox(this.containerNode,wa),this._singleChild.resize({w:ma.w,h:ma.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();k("touch")||ka||this._position()}},_layoutChildren:function(){y.forEach(this.getChildren(),function(ka){ka.resize&&ka.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();
this._moveable&&this._moveable.destroy();for(var ka;ka=this._modalconnects.pop();)ka.remove();sa.hide(this);this.inherited(arguments)}});k("dojo-bidi")&&(z=u("dijit._DialogBase",z,{_setTitleAttr:function(ka){this._set("title",ka);this.titleNode.innerHTML=ka;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(ka){this._created&&this.textDir!=ka&&(this._set("textDir",ka),this.set("title",this.title))}}));var fa=u("dijit.Dialog",[G,z],{});fa._DialogBase=z;var sa=fa._DialogLevelManager={_beginZIndex:950,
show:function(ka,ma){T[T.length-1].focus=C.curNode;var wa=T[T.length-1].dialog?T[T.length-1].zIndex+2:fa._DialogLevelManager._beginZIndex;d.set(ka.domNode,"zIndex",wa);E.show(ma,wa-1);T.push({dialog:ka,underlayAttrs:ma,zIndex:wa})},hide:function(ka){if(T[T.length-1].dialog==ka){T.pop();var ma=T[T.length-1];1==T.length?E.hide():E.show(ma.underlayAttrs,ma.zIndex-1);if(ka.refocus&&(ka=ma.focus,!ma.dialog||ka&&t.isDescendant(ka,ma.dialog.domNode)||(ma.dialog._getFocusItems(),ka=ma.dialog._firstFocusItem),
ka))try{ka.focus()}catch(wa){}}else ma=y.indexOf(y.map(T,function(wa){return wa.dialog}),ka),-1!=ma&&T.splice(ma,1)},isTop:function(ka){return T[T.length-1].dialog==ka}},T=fa._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];C.watch("curNode",function(ka,ma,wa){ka=T[T.length-1].dialog;if(wa&&ka&&!ka._fadeOutDeferred&&wa.ownerDocument==ka.ownerDocument){do if(wa==ka.domNode||r.contains(wa,"dijitPopup"))return;while(wa=wa.parentNode);ka.focus()}});k("dijit-legacy-requires")&&h(0,function(){F(["dijit/TooltipDialog"])});
return fa})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../has ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),function(F,y,a,u,n,t,r,l,d,f,b,c,g){function e(m,w){"touchAction"in document.body.style?h="touchAction":"msTouchAction"in document.body.style&&(h="msTouchAction");k=function(p,A){p.style[h]=A};k(m,w)}var h,k=function(){};r("touch-action")&&(k=e);return y("dojo.dnd.Moveable",[t],{handle:"",delay:0,
skip:!1,constructor:function(m,w){this.node=u.byId(m);k(this.node,"none");w||(w={});this.handle=w.handle?u.byId(w.handle):null;this.handle||(this.handle=this.node);this.delay=0<w.delay?w.delay:0;this.skip=w.skip;this.mover=w.mover?w.mover:c;this.events=[l(this.handle,f.press,a.hitch(this,"onMouseDown")),l(this.handle,"dragstart",a.hitch(this,"onSelectStart")),l(this.handle,"selectstart",a.hitch(this,"onSelectStart"))]},markupFactory:function(m,w,p){return new p(w,m)},destroy:function(){F.forEach(this.events,
function(m){m.remove()});k(this.node,"");this.events=this.node=this.handle=null},onMouseDown:function(m){if(!this.skip||!b.isFormElement(m)){if(this.delay)this.events.push(l(this.handle,f.move,a.hitch(this,"onMouseMove")),l(this.handle.ownerDocument,f.release,a.hitch(this,"onMouseUp"))),this._lastX=m.pageX,this._lastY=m.pageY;else this.onDragDetected(m);m.stopPropagation();m.preventDefault()}},onMouseMove:function(m){if(Math.abs(m.pageX-this._lastX)>this.delay||Math.abs(m.pageY-this._lastY)>this.delay)this.onMouseUp(m),
this.onDragDetected(m);m.stopPropagation();m.preventDefault()},onMouseUp:function(m){for(var w=0;2>w;++w)this.events.pop().remove();m.stopPropagation();m.preventDefault()},onSelectStart:function(m){this.skip&&b.isFormElement(m)||(m.stopPropagation(),m.preventDefault())},onDragDetected:function(m){new this.mover(this.node,m,this)},onMoveStart:function(m){d.publish("/dnd/move/start",m);n.add(g.body(),"dojoMove");n.add(this.node,"dojoMoveItem")},onMoveStop:function(m){d.publish("/dnd/move/stop",m);n.remove(g.body(),
"dojoMove");n.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(m,w){this.onMoving(m,w);var p=m.node.style;p.left=w.l+"px";p.top=w.t+"px";this.onMoved(m,w)},onMoving:function(){},onMoved:function(){}})})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(F,y,a,u){var n=a.getObject("dojo.dnd",!0);n.getCopyKeyState=function(t){return t[F("mac")?"metaKey":"ctrlKey"]};n._uniqueId=0;n.getUniqueId=function(){do var t=y._scopeName+
"Unique"+ ++n._uniqueId;while(u.byId(t));return t};n._empty={};n.isFormElement=function(t){t=t.target;3==t.nodeType&&(t=t.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+t.tagName.toLowerCase()+" ")};return n})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),function(F,y,a,u,n,t,r,l,d,f,b,c,g){return y("dojo.dnd.Mover",
[d],{constructor:function(e,h,k){function m(w){w.preventDefault();w.stopPropagation()}this.node=t.byId(e);this.marginBox={l:h.pageX,t:h.pageY};this.mouseButton=h.button;h=this.host=k;e=e.ownerDocument;this.events=[f(e,b.move,a.hitch(this,"onFirstMove")),f(e,b.move,a.hitch(this,"onMouseMove")),f(e,b.release,a.hitch(this,"onMouseUp")),f(e,"dragstart",m),f(e.body,"selectstart",m)];g.autoScrollStart(e);if(h&&h.onMoveStart)h.onMoveStart(this)},onMouseMove:function(e){g.autoScroll(e);var h=this.marginBox;
this.host.onMove(this,{l:h.l+e.pageX,t:h.t+e.pageY},e);e.preventDefault();e.stopPropagation()},onMouseUp:function(e){(u("webkit")&&u("mac")&&2==this.mouseButton?0==e.button:this.mouseButton==e.button)&&this.destroy();e.preventDefault();e.stopPropagation()},onFirstMove:function(e){var h=this.node.style,k=this.host;switch(h.position){case "relative":case "absolute":var m=Math.round(parseFloat(h.left))||0;h=Math.round(parseFloat(h.top))||0;break;default:h.position="absolute";h=r.getMarginBox(this.node);
m=n.doc.body;var w=l.getComputedStyle(m),p=r.getMarginBox(m,w);w=r.getContentBox(m,w);m=h.l-(w.l-p.l);h=h.t-(w.t-p.t)}this.marginBox.l=m-this.marginBox.l;this.marginBox.t=h-this.marginBox.t;if(k&&k.onFirstMove)k.onFirstMove(this,e);this.events.shift().remove()},destroy:function(){F.forEach(this.events,function(h){h.remove()});var e=this.host;if(e&&e.onMoveStop)e.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),
function(F,y,a,u,n,t){var r={};F.setObject("dojo.dnd.autoscroll",r);r.getViewport=t.getBox;r.V_TRIGGER_AUTOSCROLL=32;r.H_TRIGGER_AUTOSCROLL=32;r.V_AUTOSCROLL_VALUE=16;r.H_AUTOSCROLL_VALUE=16;var l,d=a.doc,f=Infinity,b=Infinity;r.autoScrollStart=function(c){d=c;l=t.getBox(d);c=a.body(d).parentNode;f=Math.max(c.scrollHeight-l.h,0);b=Math.max(c.scrollWidth-l.w,0)};r.autoScroll=function(c){var g=l||t.getBox(d),e=a.body(d).parentNode,h=0,k=0;c.clientX<r.H_TRIGGER_AUTOSCROLL?h=-r.H_AUTOSCROLL_VALUE:c.clientX>
g.w-r.H_TRIGGER_AUTOSCROLL&&(h=Math.min(r.H_AUTOSCROLL_VALUE,b-e.scrollLeft));c.clientY<r.V_TRIGGER_AUTOSCROLL?k=-r.V_AUTOSCROLL_VALUE:c.clientY>g.h-r.V_TRIGGER_AUTOSCROLL&&(k=Math.min(r.V_AUTOSCROLL_VALUE,f-e.scrollTop));window.scrollBy(h,k)};r._validNodes={div:1,p:1,td:1};r._validOverflow={auto:1,scroll:1};r.autoScrollNodes=function(c){for(var g,e,h,k,m,w=0,p=0,A=c.target;A;){if(1==A.nodeType&&A.tagName.toLowerCase()in r._validNodes){h=n.getComputedStyle(A);m=h.overflowX.toLowerCase()in r._validOverflow;
k=h.overflowY.toLowerCase()in r._validOverflow;if(m||k)g=u.getContentBox(A,h),e=u.position(A,!0);if(m){h=Math.min(r.H_TRIGGER_AUTOSCROLL,g.w/2);m=c.pageX-e.x;if(y("webkit")||y("opera"))m+=a.body().scrollLeft;w=0;0<m&&m<g.w&&(m<h?w=-h:m>g.w-h&&(w=h),A.scrollLeft+=w)}if(k){k=Math.min(r.V_TRIGGER_AUTOSCROLL,g.h/2);h=c.pageY-e.y;if(y("webkit")||y("opera"))h+=a.body().scrollTop;p=0;0<h&&h<g.h&&(h<k?p=-k:h>g.h-k&&(p=k),A.scrollTop+=p)}if(w||p)return}try{A=A.parentNode}catch(C){A=null}}r.autoScroll(c)};
return r})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(F,y){var a=y.prototype.onMove;return F("dojo.dnd.TimedMoveable",y,{timeout:40,constructor:function(u,n){n||(n={});n.timeout&&"number"==typeof n.timeout&&0<=n.timeout&&(this.timeout=n.timeout)},onMoveStop:function(u){u._timer&&(clearTimeout(u._timer),a.call(this,u,u._leftTop));y.prototype.onMoveStop.apply(this,arguments)},onMove:function(u,n){u._leftTop=n;if(!u._timer){var t=this;u._timer=setTimeout(function(){u._timer=
null;a.call(t,u,u._leftTop)},this.timeout)}}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),function(F,y,a,u,n,t,r,l,d,f,b,c){var g=F("dijit.DialogUnderlay",[l,d],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",
dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(e){u.set(this.node,"id",e+"_underlay");this._set("dialogId",e)},_setClassAttr:function(e){this.node.className="dijitDialogUnderlay "+e;this._set("class",e)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.own(t(this.domNode,"keydown",y.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var e=this.node.style,h=this.domNode.style;h.display="none";var k=r.getBox(this.ownerDocument);h.top=
k.t+"px";h.left=k.l+"px";e.width=k.w+"px";e.height=k.h+"px";h.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new f(this.domNode);var e=r.get(this.ownerDocument);this._modalConnects=[b.on("resize",y.hitch(this,"layout")),t(e,"scroll",y.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();
this.inherited(arguments)},_onKeyDown:function(){}});g.show=function(e,h){var k=g._singleton;!k||k._destroyed?k=c._underlay=g._singleton=new g(e):e&&k.set(e);n.set(k.domNode,"zIndex",h);k.open||k.show()};g.hide=function(){var e=g._singleton;e&&!e._destroyed&&e.hide()};return g})},"esri/Credential":function(){define(["dojo/_base/declare","dojo/has","./kernel","./IdentityManagerBase"],function(F,y,a,u){F=F(u.Credential,{});y("extend-esri")&&(a.Credential=F);return F})},"esri/IdentityManagerBase":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/url dojo/sniff dojo/io-query dojo/on ./kernel ./config ./lang ./ServerInfo ./urlUtils ./deferredUtils ./request ./Evented ./OAuthCredential ./arcgis/OAuthInfo".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m,w,p){var A={},C=function(x){var E=(new t(x.owningSystemUrl)).host;x=(new t(x.server)).host;var G=/.+\.arcgis\.com$/i;return G.test(E)&&G.test(x)},z=function(x,E){return!!(C(x)&&E&&u.some(E,function(G){return G.test(x.server)}))},q=null,v=null;try{q=window.localStorage,v=window.sessionStorage}catch(x){}var B=F(m,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=a.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=
[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=[];this._getOAuthLocationParams();d(window,"pageshow",a.hitch(this,this._pageShowHandler))},defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,normalizeWebTierAuth:!1,_appUrlObj:e.urlToObject(window.location.href),_postMessageAuthHandle:null,_busy:null,_rejectOnPersistedPageShow:!1,_oAuthLocationParams:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i,
_adminSvcs:/\/rest\/admin\/services(\/|$)/i,_gwDomains:[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},
{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|KnowledgeGraphServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/ig,
_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(x){var E=this.serverInfos;E?(x=u.filter(x,function(G){return!this.findServerInfo(G.server)},this),this.serverInfos=E.concat(x)):
this.serverInfos=x;u.forEach(x,function(G){G.owningSystemUrl&&this._portals.push(G.owningSystemUrl);if(G.hasPortal){this._portals.push(G.server);var I=b.defaults.io.corsEnabledServers,L=this._getOrigin(G.tokenServiceUrl);e.canUseXhr(G.server)||I.push(G.server.replace(/^https?:\/\//i,""));e.canUseXhr(L)||I.push(L.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(x){var E=this.oAuthInfos;E?(u.forEach(x,function(G){(G=this.findOAuthInfo(G.portalUrl))&&E.splice(E.indexOf(G),1)},this),
this.oAuthInfos=E.concat(x)):this.oAuthInfos=x},registerToken:function(x){x=c.mixin({},x);var E=this._sanitizeUrl(x.server),G=this.findServerInfo(E),I=!0,L;G||(G=new g,G.server=this._getServerInstanceRoot(E),G.tokenServiceUrl=this._getTokenSvcUrl(E),G.hasPortal=!0,this.registerServers([G]));(L=this.findCredential(E,x.userId))?(delete x.server,a.mixin(L,x),I=!1):(L=new D({userId:x.userId,server:G.server,token:x.token,expires:x.expires,ssl:x.ssl,scope:this._isServerRsrc(E)?"server":"portal"}),L.resources=
[E],this.credentials.push(L));L.onTokenChange(!1);I||L.refreshServerTokens()},toJson:function(){return c.fixJson({serverInfos:u.map(this.serverInfos,function(x){return x.toJson()}),oAuthInfos:u.map(this.oAuthInfos,function(x){return x.toJson()}),credentials:u.map(this.credentials,function(x){return x.toJson()})})},initialize:function(x){if(x){a.isString(x)&&(x=JSON.parse(x));var E=x.serverInfos,G=x.oAuthInfos;x=x.credentials;if(E){var I=[];u.forEach(E,function(Y){Y.server&&Y.tokenServiceUrl&&I.push(Y.declaredClass?
Y:new g(Y))});I.length&&this.registerServers(I)}if(G){var L=[];u.forEach(G,function(Y){Y.appId&&L.push(Y.declaredClass?Y:new p(Y))});L.length&&this.registerOAuthInfos(L)}x&&u.forEach(x,function(Y){Y.userId&&Y.server&&Y.token&&Y.expires&&Y.expires>(new Date).getTime()&&(Y=Y.declaredClass?Y:new D(Y),Y.onTokenChange(),this.credentials.push(Y))},this)}},findServerInfo:function(x){var E;x=this._sanitizeUrl(x);u.some(this.serverInfos,function(G){this._hasSameServerInstance(G.server,x)&&(E=G);return!!E},
this);return E},findOAuthInfo:function(x){var E;x=this._sanitizeUrl(x);u.some(this.oAuthInfos,function(G){this._hasSameServerInstance(G.portalUrl,x)&&(E=G);return!!E},this);return E},findCredential:function(x,E){var G;x=this._sanitizeUrl(x);var I=this._isServerRsrc(x)?"server":"portal";E?u.some(this.credentials,function(L){this._hasSameServerInstance(L.server,x)&&E===L.userId&&L.scope===I&&(G=L);return!!G},this):u.some(this.credentials,function(L){this._hasSameServerInstance(L.server,x)&&-1!==this._getIdenticalSvcIdx(x,
L)&&L.scope===I&&(G=L);return!!G},this);return G},getCredential:function(x,E){var G=!0;if(c.isDefined(E))if(a.isObject(E)){var I=!!E.token;var L=E.error;G=!1!==E.prompt}else I=E;x=this._sanitizeUrl(x);var Y=new n(h._dfdCanceller),X=this._isAdminResource(x);if((I=I?this.findCredential(x):null)&&L&&498===L.code)I.destroy();else if(I)return x=Error("You are currently signed in as: '"+I.userId+"'. You do not have access to this resource: "+x),x.name="identity-manager:not-authorized",x.code="IdentityManagerBase.1",
x.httpCode=L&&L.httpCode,x.messageCode=L?L.messageCode:null,x.subcode=L?L.subcode:null,x.details=L?L.details:null,x.log=!!y.isDebug,Y.errback(x),Y;if(L=this._findCredential(x,E))return Y.callback(L),Y;var fa=this.findServerInfo(x);if(fa)!fa.hasServer&&this._isServerRsrc(x)&&(fa._restInfoDfd=this._getTokenSvcUrl(x,!0),fa.hasServer=!0);else{L=this._getTokenSvcUrl(x);if(!L)return x=Error("Unknown resource - could not find token service endpoint."),x.name="identity-manager:unknown-resource",x.code="IdentityManagerBase.2",
x.log=!!y.isDebug,Y.errback(x),Y;fa=new g;fa.server=this._getServerInstanceRoot(x);a.isString(L)?(fa.tokenServiceUrl=L,fa.hasPortal=!0):(fa._restInfoDfd=L,fa.hasServer=!0);this.registerServers([fa])}fa.hasPortal&&void 0===fa._selfReq&&(G||e.hasSameOrigin(fa.tokenServiceUrl,window.location.origin)||this._gwDomains.some(function(sa){return sa.tokenServiceUrl===fa.tokenServiceUrl}))&&(fa._selfReq={owningTenant:E&&E.owningTenant,selfDfd:this._getPortalSelf(fa.tokenServiceUrl.replace(this._rePortalTokenSvc,
"/sharing/rest/portals/self"),x)});return this._enqueue(x,fa,E,Y,X)},getResourceName:function(x){return this._isRESTService(x)?x.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(x)&&x.replace(this._gwUser,"$1")||this._gwItem.test(x)&&x.replace(this._gwItem,"$1")||this._gwGroup.test(x)&&x.replace(this._gwGroup,"$1")||""},generateToken:function(x,E,G){var I=this._rePortalTokenSvc.test(x.tokenServiceUrl),L=new t(window.location.href.toLowerCase()),Y=!E;var X=x.shortLivedTokenValidity;
if(E){var fa=f.id.tokenValidity||X||f.id.defaultTokenValidity;fa>X&&(fa=X)}if(G){var sa=G.isAdmin;var T=G.serverUrl;var ka=G.token;var ma=G.ssl;x.customParameters=G.customParameters}if(sa)X=x.adminTokenServiceUrl;else{X=x.tokenServiceUrl;var wa=new t(X.toLowerCase());x.webTierAuth&&G&&G.serverUrl&&!ma&&"http"===L.scheme&&(e.hasSameOrigin(L.uri,X,!0)||"https"===wa.scheme&&L.host===wa.host&&"7080"===L.port&&"7443"===wa.port)&&(X=X.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));Y&&I&&(X=X.replace(/\/rest/i,
""))}sa=a.mixin({url:X,content:a.mixin({request:"getToken",username:E&&E.username,password:E&&E.password,serverUrl:T,token:ka,expiration:fa,referer:sa||I?window.location.host:null,client:sa?"referer":null,f:"json"},x.customParameters),handleAs:"json",callbackParamName:Y?"callback":void 0},G&&G.ioArgs);G={usePost:!Y,disableIdentityLookup:!0,useProxy:this._useProxy(x,G)};I||(sa.withCredentials=!1);I=k(sa,G);I.addCallback(function(ja){if(!ja||!ja.token)return ja=Error("Unable to generate token"),ja.name=
"identity-manager:authentication-failed",ja.code="IdentityManagerBase.3",ja.log=!!y.isDebug,ja;var ua=x.server;A[ua]||(A[ua]={});E&&(A[ua][E.username]=E.password);ja.validity=fa;return ja});I.addErrback(function(ja){});return I},isBusy:function(){return!!this._busy},checkSignInStatus:function(x){var E=new n;this.checkAppAccess(x,"").then(function(G){E.resolve(G.credential)}).catch(function(G){E.reject(G)});return E},checkAppAccess:function(x,E,G){var I=this,L=!1;return this.getCredential(x,{prompt:!1}).then(function(Y){var X=
{f:"json"};if("portal"===Y.scope)if(E&&(I._doPortalSignIn(x)||G&&G.force)){var fa=Y.server+"/sharing/rest/oauth2/validateAppAccess";X.client_id=E}else if(Y.token)fa=Y.server+"/sharing/rest";else return{credential:Y};else if(Y.token)fa=Y.server+"/rest/services";else return{credential:Y};Y.token&&(X.token=Y.token);return k({url:fa,content:X,callbackParamName:"callback"},{disableIdentityLookup:!0}).then(function(sa){if(!1===sa.valid){var T=Error("You are currently signed in as: '"+Y.userId+"'.  You do not have access to this app: '"+
E+"'.");T.name="identity-manager:not-authorized";T.code="IdentityManagerBase.1";T.log=!!y.isDebug;T.details=sa;throw T;}L=!!sa.viewOnlyUserTypeApp;return{credential:Y}}).catch(function(sa){if("IdentityManagerBase.1"===sa.code||400===sa.code)throw 400===sa.code&&(sa.name="identity-manager:invalid-request"),sa;if(498===sa.code)throw Y.destroy(),sa=Error("User is not signed in."),sa.name="identity-manager:not-authenticated",sa.code="IdentityManagerBase.6",sa.log=!!y.isDebug,sa;return{credential:Y}})}).then(function(Y){return{credential:Y.credential,
viewOnly:L}})},setProtocolErrorHandler:function(x){this._protocolFunc=x},signIn:function(){},oAuthSignIn:function(){},onCredentialCreate:function(){},onCredentialsDestroy:function(){},destroyCredentials:function(){if(this.credentials){var x=this.credentials.slice();u.forEach(x,function(E){E.destroy()})}this.onCredentialsDestroy()},enablePostMessageAuth:function(x){x||(x="https://www.arcgis.com/sharing/rest");this._postMessageAuthHandle&&this._postMessageAuthHandle.remove();this._postMessageAuthHandle=
d(window,"message",function(E){(E.origin===window.location.origin||c.endsWith(E.origin,".arcgis.com"))&&E.data&&"arcgis:auth:requestCredential"===E.data.type&&this.getCredential(x).then(function(G){E.source.postMessage({type:"arcgis:auth:credential",credential:{expires:G.expires,server:G.server,ssl:G.ssl,token:G.token,userId:G.userId}},E.origin)}).catch(function(G){E.source.postMessage({type:"arcgis:auth:error",error:{name:G.name,message:G.message}},E.origin)})}.bind(this))},disablePostMessageAuth:function(){this._postMessageAuthHandle&&
(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)},_getOAuthLocationParams:function(){var x=window.location.hash;if(x){"#"===x.charAt(0)&&(x=x.substring(1));x=l.queryToObject(x);var E=!1;if(x.access_token&&x.expires_in&&x.state&&x.hasOwnProperty("username"))try{x.state=JSON.parse(x.state),x.state.portalUrl&&(this._oAuthLocationParams=x,E=!0)}catch(I){}else if(x.error&&x.error_description&&(console.log("IdentityManager OAuth Error: ",x.error," - ",x.error_description),"access_denied"===
x.error&&(E=!0,x.state)))try{x.state=JSON.parse(x.state)}catch(I){}E&&(window.location.hash=x.state&&x.state.hash||"")}if(x=window.location.search){"?"===x.charAt(0)&&(x=x.substring(1));x=l.queryToObject(x);E=!1;if(x.code&&x.state)try{x.state=JSON.parse(x.state),x.state.portalUrl&&x.state.uid&&(this._oAuthLocationParams=x,E=!0)}catch(I){}else if(x.error&&x.error_description&&(console.log("IdentityManager OAuth Error: ",x.error," - ",x.error_description),"access_denied"===x.error&&(E=!0,x.state)))try{x.state=
JSON.parse(x.state)}catch(I){}if(E){var G=c.mixin({},x);"code error error_description message_code persist state".split(" ").forEach(function(I){delete G[I]});E=l.objectToQuery(G);window.history.replaceState(window.history.state,"",window.location.pathname+(E?"?"+E:"")+(x.state&&x.state.hash||""))}}},_getOAuthToken:function(x,E,G,I,L){x=x.replace(/^http:/i,"https:");return k({url:x+"/sharing/rest/oauth2/token",content:I&&L?{grant_type:"authorization_code",code:E,redirect_uri:I,client_id:G,code_verifier:L}:
{grant_type:"refresh_token",refresh_token:E,client_id:G}},{disableIdentityLookup:!0,usePost:!0})},_pageShowHandler:function(x){x.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow&&(x=Error("ABORTED"),x.name="identity-manager:user-aborted",x.code="IdentityManager.2",x.log=!!y.isDebug,this._errbackFunc(x))},_findCredential:function(x,E){var G=-1,I,L,Y=E&&E.token;E=E&&E.resource;var X=this._isServerRsrc(x)?"server":"portal",fa=u.filter(this.credentials,function(ma){return this._hasSameServerInstance(ma.server,
x)&&ma.scope===X},this);x=E||x;if(fa.length)if(1===fa.length){E=fa[0];var sa=(I=(L=this.findServerInfo(E.server))&&L.owningSystemUrl)&&this.findCredential(I,E.userId);G=this._getIdenticalSvcIdx(x,E);if(Y)-1!==G&&(E.resources.splice(G,1),this._removeResource(x,sa));else return-1===G&&E.resources.push(x),this._addResource(x,sa),E}else{var T,ka;u.some(fa,function(ma){ka=this._getIdenticalSvcIdx(x,ma);return-1!==ka?(T=ma,sa=(I=(L=this.findServerInfo(T.server))&&L.owningSystemUrl)&&this.findCredential(I,
T.userId),G=ka,!0):!1},this);if(Y)T&&(T.resources.splice(G,1),this._removeResource(x,sa));else if(T)return this._addResource(x,sa),T}},_findOAuthInfo:function(x){var E=this.findOAuthInfo(x);E||u.some(this.oAuthInfos,function(G){this._isIdProvider(G.portalUrl,x)&&(E=G);return!!E},this);return E},_addResource:function(x,E){E&&-1===this._getIdenticalSvcIdx(x,E)&&E.resources.push(x)},_removeResource:function(x,E){var G=-1;E&&(G=this._getIdenticalSvcIdx(x,E),-1<G&&E.resources.splice(G,1))},_useProxy:function(x,
E){return E&&E.isAdmin&&!e.hasSameOrigin(x.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(x.tokenServiceUrl)&&10.1==x.currentVersion&&!e.hasSameOrigin(x.tokenServiceUrl,window.location.href)},_getOrigin:function(x){x=new t(x);return x.scheme+"://"+x.host+(c.isDefined(x.port)?":"+x.port:"")},_getServerInstanceRoot:function(x){var E=x.toLowerCase(),G=E.indexOf(this._agsRest);-1===G&&this._isAdminResource(x)&&(G=this._agsAdmin.test(x)?x.replace(this._agsAdmin,"$1").length:x.search(this._adminSvcs));
-1===G&&(G=E.indexOf("/sharing"));-1===G&&"/"===E.substr(-1)&&(G=E.length-1);return-1<G?x.substring(0,G):x},_hasSameServerInstance:function(x,E){"/"===x.substr(-1)&&(x=x.slice(0,-1));x=x.toLowerCase();E=this._getServerInstanceRoot(E).toLowerCase();x=this._normalizeAGOLorgDomain(x);E=this._normalizeAGOLorgDomain(E);x=x.substr(x.indexOf(":"));E=E.substr(E.indexOf(":"));return x===E},_normalizeAGOLorgDomain:function(x){var E=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,G=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,
I=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;E.test(x)?x=x.replace(E,"https://www.arcgis.com"):G.test(x)?x=x.replace(G,"https://devext.arcgis.com"):I.test(x)&&(x=x.replace(I,"https://qaext.arcgis.com"));return x},_sanitizeUrl:function(x){var E=(b.defaults.io.proxyUrl||"").toLowerCase(),G=E?x.toLowerCase().indexOf(E+"?"):-1;-1!==G&&(x=x.substring(G+E.length+1));x=e.normalize(x);return e.urlToObject(x).path},_isRESTService:function(x){return-1<x.indexOf(this._agsRest)},_isAdminResource:function(x){return this._agsAdmin.test(x)||
this._adminSvcs.test(x)},_isServerRsrc:function(x){return this._isRESTService(x)||this._isAdminResource(x)},_isIdenticalService:function(x,E){if(this._isRESTService(x)&&this._isRESTService(E)){x=this._getSuffix(x).toLowerCase();E=this._getSuffix(E).toLowerCase();var G=x===E;G||(G=/(.*)\/(MapServer|FeatureServer).*/ig,G=x.replace(G,"$1")===E.replace(G,"$1"))}else this._isAdminResource(x)&&this._isAdminResource(E)?G=!0:this._isServerRsrc(x)||this._isServerRsrc(E)||!this._isPortalDomain(x)||(G=!0);return G},
_isPortalDomain:function(x){var E=new t(x.toLowerCase()),G=this._portalConfig;x=u.some(this._gwDomains,function(I){return I.regex.test(E.uri)});!x&&G&&(x=this._hasSameServerInstance(this._getServerInstanceRoot(G.restBaseUrl),E.uri));x||(!this._arcgisUrl&&(G=a.getObject("esri.arcgis.utils.arcgisUrl"))&&(this._arcgisUrl=(new t(G)).authority),this._arcgisUrl&&(x=this._arcgisUrl.toLowerCase()===E.authority));x||(x=u.some(this._portals,function(I){return this._hasSameServerInstance(I,E.uri)},this));return x=
x||this._agsPortal.test(E.path)},_isIdProvider:function(x,E){var G=-1,I=-1;u.forEach(this._gwDomains,function(fa,sa){-1===G&&fa.regex.test(x)&&(G=sa);-1===I&&fa.regex.test(E)&&(I=sa)});var L=!1;if(-1<G&&-1<I)if(0===G||4===G){if(0===I||4===I)L=!0}else if(1===G){if(1===I||2===I)L=!0}else 2===G?2===I&&(L=!0):3===G&&3===I&&(L=!0);if(!L){var Y=this.findServerInfo(E),X=Y&&Y.owningSystemUrl;X&&C(Y)&&this._isPortalDomain(X)&&this._isIdProvider(x,X)&&(L=!0)}return L},_isPublic:function(x){x=this._sanitizeUrl(x);
return u.some(this._publicUrls,function(E){return E.test(x)})},_getIdenticalSvcIdx:function(x,E){var G=-1;u.some(E.resources,function(I,L){return this._isIdenticalService(x,I)?(G=L,!0):!1},this);return G},_getSuffix:function(x){return x.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(x){if(this._isRESTService(x)||this._isAdminResource(x)){var E=this._getServerInstanceRoot(x);var G=E+"/admin/generateToken";x=E+"/rest/info";E=k({url:x,content:{f:"json"},
handleAs:"json",callbackParamName:"callback"});E.adminUrl_=G;return E}if(this._isPortalDomain(x)){var I="";u.some(this._gwDomains,function(L){L.regex.test(x)&&(I=L.tokenServiceUrl);return!!I});I||u.some(this._portals,function(L){this._hasSameServerInstance(L,x)&&(I=L+this._gwTokenUrl);return!!I},this);I||(G=x.toLowerCase().indexOf("/sharing"),-1!==G&&(I=x.substring(0,G)+this._gwTokenUrl));I||(I=this._getOrigin(x)+this._gwTokenUrl);I&&(G=(new t(x)).port,/^http:\/\//i.test(x)&&"7080"===G&&(I=I.replace(/:7080/i,
":7443")),I=I.replace(/http:/i,"https:"));return I}if(-1!==x.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},_exchangeToken:function(x,E,G){return k({url:x+"/sharing/rest/oauth2/exchangeToken",content:{f:"json",client_id:E,token:G}},{disableIdentityLookup:!0,usePost:!0}).then(function(I){return I.token})},_getPlatformSelf:function(x,E){x=x.replace(/^http:/i,"https:");return k({url:x+"/sharing/rest/oauth2/platformSelf",content:{f:"json",expiration:30},
headers:{"X-Esri-Auth-Client-Id":E,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},withCredentials:!0},{disableIdentityLookup:!0,usePost:!0})},_getPortalSelf:function(x,E){var G="";u.some(this._gwDomains,function(I){I.regex.test(x)&&(G=I.customBaseUrl);return!!G});if(G)return E=new n,E.resolve({allSSL:!0,currentVersion:"8.4",customBaseUrl:G,portalMode:"multitenant",supportsOAuth:!0}),E;"https:"===window.location.protocol?x=x.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):
/^http:/i.test(E)&&(x=x.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return k({url:x,content:{f:"json"},callbackParamName:"callback",withCredentials:!0},{disableIdentityLookup:!0})},_doPortalSignIn:function(x){var E=this._portalConfig,G=window.location.href,I=this.findServerInfo(x);return(E||this._isPortalDomain(G))&&(I?I.hasPortal||I.owningSystemUrl&&this._isPortalDomain(I.owningSystemUrl):this._isPortalDomain(x))&&(this._isIdProvider(G,x)||E&&(this._hasSameServerInstance(this._getServerInstanceRoot(E.restBaseUrl),
x)||this._isIdProvider(E.restBaseUrl,x))||e.hasSameOrigin(G,x,!0))?!0:!1},_checkProtocol:function(x,E,G,I){var L=!0;I=I?E.adminTokenServiceUrl:E.tokenServiceUrl;0!==a.trim(I).toLowerCase().indexOf("https:")||0===window.location.href.toLowerCase().indexOf("https:")||b.defaults.io.useCors&&(e.canUseXhr(I)||e.canUseXhr(e.getProxyUrl(!0).path))||(L=this._protocolFunc?!!this._protocolFunc({resourceUrl:x,serverInfo:E}):!1,L||(x=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),
x.name="identity-manager:aborted",x.code="IdentityManagerBase.4",x.log=!!y.isDebug,console.log(x.message),G(x)));return L},_enqueue:function(x,E,G,I,L,Y){I||(I=new n(h._dfdCanceller));I.resUrl_=x;I.sinfo_=E;I.options_=G;I.admin_=L;I.refresh_=Y;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(x),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(I)):this._xoReqs.push(I):this._doSignIn(I);return I},_doSignIn:function(x){this._busy=
x;this._rejectOnPersistedPageShow=!1;var E=this,G=function(T){var ka=x.options_&&x.options_.resource,ma=x.resUrl_,wa=x.refresh_,ja=!1;-1===u.indexOf(E.credentials,T)&&(wa&&-1!==u.indexOf(E.credentials,wa)?(wa.userId=T.userId,wa.token=T.token,wa.expires=T.expires,wa.validity=T.validity,wa.ssl=T.ssl,wa.creationTime=T.creationTime,ja=!0,T=wa):E.credentials.push(T));T.resources||(T.resources=[]);-1===T.resources.indexOf(ka||ma)&&T.resources.push(ka||ma);T.scope=E._isServerRsrc(ma)?"server":"portal";T.onTokenChange();
ka=E._soReqs;var ua={};E._soReqs=[];u.forEach(ka,function(Ba){if(!this._isIdenticalService(ma,Ba.resUrl_)){var M=this._getSuffix(Ba.resUrl_);ua[M]||(ua[M]=!0,T.resources.push(Ba.resUrl_))}},E);x.callback(T);u.forEach(ka,function(Ba){this._hasSameServerInstance(this._getServerInstanceRoot(ma),Ba.resUrl_)?Ba.callback(T):this._soReqs.push(Ba)},E);E._busy=x.resUrl_=x.sinfo_=x.refresh_=null;if(!ja)E.onCredentialCreate({credential:T});E._soReqs.length?E._doSignIn(E._soReqs.shift()):E._xoReqs.length&&E._doSignIn(E._xoReqs.shift())},
I=function(T){x.errback(T);E._busy=x.resUrl_=x.sinfo_=x.refresh_=null;E._soReqs.length?E._doSignIn(E._soReqs.shift()):E._xoReqs.length&&E._doSignIn(E._xoReqs.shift())},L=function(T,ka,ma,wa){var ja=x.sinfo_,ua=!x.options_||!1!==x.options_.prompt,Ba=ja.hasPortal&&E._findOAuthInfo(x.resUrl_);if(T)G(new D({userId:T,server:ja.server,token:ma||null,expires:c.isDefined(wa)?Number(wa):null,ssl:!!ka}));else if(window!==window.parent&&E._appUrlObj.query&&E._appUrlObj.query["arcgis-auth-origin"]&&E._appUrlObj.query["arcgis-auth-portal"]&&
E._hasSameServerInstance(E._getServerInstanceRoot(E._appUrlObj.query["arcgis-auth-portal"]),x.resUrl_)){window.parent.postMessage({type:"arcgis:auth:requestCredential"},E._appUrlObj.query["arcgis-auth-origin"]);var M=d(window,"message",function(Ia){if(Ia.source===window.parent&&Ia.data)if("arcgis:auth:credential"===Ia.data.type&&Ia.data.credential.expires<Date.now()&&(Ia.data.type="arcgis:auth:error",Ia.data.error={name:"tokenExpiredError"}),"arcgis:auth:credential"===Ia.data.type)M.remove(),G(new D(Ia.data.credential));
else if("arcgis:auth:error"===Ia.data.type){M.remove();Ia=Ia.data.error;switch(Ia.name){case "identity-manager:busy":case "identity-manager:not-authorized":var Oa="IdentityManager.1";break;case "identity-manager:server-identification-failed":case "identity-manager:unknown-resource":case "identity-manager:user-aborted":Oa="IdentityManager.2";break;case "identity-manager:authentication-failed":case "identity-manager:credential-request-failed":case "tokenExpiredError":Oa="IdentityManager.3";"tokenExpiredError"===
Ia.name&&(Ia.name="identity-manager:credential-request-failed",Ia.message="Parent application's token has expired.");break;case "identity-manager:aborted":Oa="IdentityManager.4";break;case "identity-manager:not-authenticated":Oa="IdentityManager.6";break;case "identity-manager:invalid-request":Oa=400}var la=Error(Ia.message);la.name=Ia.name;la.code=Oa;la.log=!!y.isDebug;I(la)}})}else if(Ba){var Z=Ba._oAuthCred;Z||(T=new w(Ba,q),ka=new w(Ba,v),T.isValid()&&ka.isValid()?T.expires>ka.expires?(Z=T,ka.destroy()):
(Z=ka,T.destroy()):Z=T.isValid()?T:ka,Ba._oAuthCred=Z);if(Z.isValid()){var ia=new D({userId:Z.userId,server:ja.server,token:Z.token,expires:Z.expires,ssl:Z.ssl,_oAuthCred:Z});var qa=Ba.appId!==Z.appId&&E._doPortalSignIn(x.resUrl_);qa||Z.refreshToken?(Z.refreshToken?x._pendingDfd=E._getOAuthToken(ja.server,Z.refreshToken,Z.appId).then(function(Ia){ia.expires=Date.now()+1E3*Ia.expires_in;ia.token=Ia.access_token;return ia}):(T=new n,T.resolve(ia),x._pendingDfd=T),x._pendingDfd.then(function(Ia){return qa?
E._exchangeToken(Ia.server,Ba.appId,Ia.token).then(function(Oa){Ia.token=Oa;return Ia}).catch(function(){return Ia}):Ia}).then(function(Ia){G(Ia)}).catch(function(){Z.destroy();L()})):G(ia)}else if(E._oAuthLocationParams&&E._hasSameServerInstance(Ba.portalUrl,E._oAuthLocationParams.state.portalUrl)&&(E._oAuthLocationParams.access_token||E._oAuthLocationParams.code&&E._oAuthLocationParams.state.uid===Z.stateUID&&Z.codeVerifier))T=E._oAuthLocationParams,E._oAuthLocationParams=null,x._pendingDfd=E._processOAuthResponseParams(T,
Ba,ja).then(function(Ia){G(Ia)}).catch(I);else{var ya=function(){ua?x._pendingDfd=E.oAuthSignIn(x.resUrl_,ja,Ba,x.options_).addCallbacks(G,I):(Ca=Error("User is not signed in."),Ca.name="identity-manager:not-authenticated",Ca.code="IdentityManagerBase.6",Ca.log=!!y.isDebug,I(Ca))};E._doPortalSignIn(x.resUrl_)?x._pendingDfd=E._getPlatformSelf(ja.server,Ba.appId).then(function(Ia){var Oa=Ia.portalUrl;!Oa||e.hasSameOrigin(Oa,window.location.origin,!0)?(ia=new D({userId:Ia.username,server:ja.server,expires:Date.now()+
1E3*Ia.expires_in,token:Ia.token}),G(ia)):ya()}).catch(ya):ya()}}else if(ua)E._checkProtocol(x.resUrl_,ja,I,x.admin_)&&(T=x.options_,x.admin_&&(T=T||{},T.isAdmin=!0),x._pendingDfd=E.signIn(x.resUrl_,ja,T).addCallbacks(G,I));else{var Ca=Error("User is not signed in.");Ca.name="identity-manager:not-authenticated";Ca.code="IdentityManagerBase.6";Ca.log=!!y.isDebug;I(Ca)}},Y=function(){var T=x.sinfo_,ka=T.owningSystemUrl,ma=x.options_,wa;if(ma){var ja=ma.token;var ua=ma.error;var Ba=ma.prompt}(wa=E._findCredential(ka,
{token:ja,resource:x.resUrl_}))||u.some(E.credentials,function(M){this._isIdProvider(ka,M.server)&&(wa=M);return!!wa},E);wa?(ma=E.findCredential(x.resUrl_,wa.userId))?G(ma):z(T,E._legacyFed)?(ma=wa.toJson(),ma.server=T.server,ma.resources=null,G(new D(ma))):(x._pendingDfd=E.generateToken(E.findServerInfo(wa.server),null,{serverUrl:x.resUrl_,token:wa.token,ssl:wa.ssl})).addCallbacks(function(M){G(new D({userId:wa.userId,server:T.server,token:M.token,expires:c.isDefined(M.expires)?Number(M.expires):
null,ssl:!!M.ssl,isAdmin:x.admin_,validity:M.validity}))},I):(E._busy=null,ja&&(x.options_.token=null),(x._pendingDfd=E.getCredential(ka.replace(/\/?$/,"/sharing"),{resource:x.resUrl_,owningTenant:T.owningTenant,token:ja,error:ua,prompt:Ba})).addCallbacks(function(M){E._enqueue(x.resUrl_,x.sinfo_,x.options_,x,x.admin_)},function(M){I(M)}))};this._errbackFunc=I;var X=x.sinfo_.owningSystemUrl,fa=this._isServerRsrc(x.resUrl_),sa=x.sinfo_._restInfoDfd;sa?sa.addCallbacks(function(T){var ka=x.sinfo_;ka._restInfoDfd&&
(ka.adminTokenServiceUrl=ka._restInfoDfd.adminUrl_,ka._restInfoDfd=null,ka.tokenServiceUrl=a.getObject("authInfo.tokenServicesUrl",!1,T)||a.getObject("authInfo.tokenServiceUrl",!1,T)||a.getObject("tokenServiceUrl",!1,T),ka.shortLivedTokenValidity=a.getObject("authInfo.shortLivedTokenValidity",!1,T),ka.currentVersion=T.currentVersion,ka.owningTenant=T.owningTenant,(T=ka.owningSystemUrl=T.owningSystemUrl)&&E._portals.push(T));fa&&ka.owningSystemUrl?Y():L()},function(){x.sinfo_._restInfoDfd=null;var T=
Error("Unknown resource - could not find token service endpoint.");T.name="identity-manager:server-identification-failed";T.code="IdentityManagerBase.2";T.log=!!y.isDebug;I(T)}):fa&&X?Y():x.sinfo_._selfReq?x.sinfo_._selfReq.selfDfd.then(function(T){var ka={};if(T){var ma=T.user&&T.user.username;ka.username=ma;ka.allSSL=T.allSSL;var wa=T.supportsOAuth;var ja=parseFloat(T.currentVersion);if("multitenant"===T.portalMode)var ua=T.customBaseUrl;x.sinfo_.currentVersion=ja}x.sinfo_.webTierAuth=!!ma;return ma&&
E.normalizeWebTierAuth?E.generateToken(x.sinfo_,null,{ssl:ka.allSSL}).addBoth(function(Ba){ka.portalToken=Ba&&Ba.token;ka.tokenExpiration=Ba&&Ba.expires;return ka}):!ma&&wa&&4.4<=ja&&!E._findOAuthInfo(x.resUrl_)?E._generateOAuthInfo({portalUrl:x.sinfo_.server,customBaseUrl:ua,owningTenant:x.sinfo_._selfReq.owningTenant}).always(function(){return ka}):ka}).always(function(T){x.sinfo_._selfReq=null;T?L(T.username,T.allSSL,T.portalToken,T.tokenExpiration):L()}):L()},_generateOAuthInfo:function(x){var E=
this,G=x.portalUrl,I=x.customBaseUrl,L=x.owningTenant;if(x=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){var Y=window.location.href;var X=Y.indexOf("?");-1<X&&(Y=Y.slice(0,X));X=Y.search(/\/(apps|home)\//);Y=-1<X?Y.slice(0,X):null}x&&Y?(this._hasTestedIfAppIsOnPortal=!0,x=k({url:Y+"/sharing/rest",content:{f:"json"},handleAs:"json"}).then(function(){E.defaultOAuthInfo=new p({appId:"arcgisonline",popupCallbackUrl:Y+"/home/oauth-callback.html"})})):(x=new n,x.resolve(),
x=x.promise);return x.then(function(){if(E.defaultOAuthInfo)return G=G.replace(/^http:/i,"https:"),k({url:G+"/sharing/rest/oauth2/validateRedirectUri",content:{accountId:L,client_id:E.defaultOAuthInfo.appId,redirect_uri:e.getAbsoluteUrl(E.defaultOAuthInfo.popupCallbackUrl),f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(fa){if(fa.valid){var sa=E.defaultOAuthInfo.clone();sa.portalUrl=fa.urlKey&&I?"https://"+fa.urlKey.toLowerCase()+"."+I:G;sa.popup=window!==window.top||!(e.hasSameOrigin(G,
window.location.origin)||E._gwDomains.some(function(T){return T.regex.test(G)&&T.regex.test(window.location.origin)}));E.oAuthInfos.push(sa)}})})}});var D=F(m,{declaredClass:"esri.Credential",tokenRefreshBuffer:2,constructor:function(x){a.mixin(this,x);this.resources=this.resources||[];c.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,refreshToken:function(){var x=this,E=this.resources&&this.resources[0],G=f.id.findServerInfo(this.server),I=G&&G.owningSystemUrl,
L=!!I&&"server"===this.scope,Y=L&&z(G,f.id._legacyFed),X=L&&f.id.findServerInfo(I),fa,sa=(fa=G.webTierAuth)&&f.id.normalizeWebTierAuth,T=A[this.server];T=T&&T[this.userId];var ka={username:this.userId,password:T};if(!fa||sa)if(L&&!X&&u.some(f.id.serverInfos,function(ja){f.id._isIdProvider(I,ja.server)&&(X=ja);return!!X}),fa=X&&f.id.findCredential(X.server,this.userId),!L||fa)if(Y)fa.refreshToken();else{if(L)var ma={serverUrl:E,token:fa&&fa.token,ssl:fa&&fa.ssl};else if(sa)ka=null,ma={ssl:this.ssl};
else if(T)this.isAdmin&&(ma={isAdmin:!0});else{if(E){E=f.id._sanitizeUrl(E);this._enqueued=1;var wa=f.id._enqueue(E,G,null,null,this.isAdmin,this);wa.addCallback(function(){x._enqueued=0;x.refreshServerTokens()}).addErrback(function(){x._enqueued=0})}return wa}return f.id.generateToken(L?X:G,L?null:ka,ma).addCallback(function(ja){x.token=ja.token;x.expires=c.isDefined(ja.expires)?Number(ja.expires):null;x.creationTime=(new Date).getTime();x.validity=ja.validity;x.onTokenChange();x.refreshServerTokens()}).addErrback(function(){})}},
refreshServerTokens:function(){"portal"===this.scope&&u.forEach(f.id.credentials,function(x){var E=f.id.findServerInfo(x.server),G=E&&E.owningSystemUrl;x!==this&&x.userId===this.userId&&G&&"server"===x.scope&&(f.id._hasSameServerInstance(this.server,G)||f.id._isIdProvider(G,this.server))&&(z(E,f.id._legacyFed)?(x.token=this.token,x.expires=this.expires,x.creationTime=this.creationTime,x.validity=this.validity,x.onTokenChange()):x.refreshToken())},this)},onTokenChange:function(x){clearTimeout(this._refreshTimer);
var E=this.server&&f.id.findServerInfo(this.server),G=(E=E&&E.owningSystemUrl)&&f.id.findServerInfo(E);!1!==x&&(!E||"portal"===this.scope||G&&G.webTierAuth&&!f.id.normalizeWebTierAuth)&&(c.isDefined(this.expires)||c.isDefined(this.validity))&&this._startRefreshTimer()},onDestroy:function(){},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var x=u.indexOf(f.id.credentials,
this);-1<x&&f.id.credentials.splice(x,1);this.onTokenChange();this.onDestroy()},toJson:function(){return this._toJson()},_toJson:function(){var x=c.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),E=this.resources;E&&0<E.length&&(x.resources=E.slice());return x},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var x=6E4*this.tokenRefreshBuffer,
E=Math.pow(2,31)-1,G=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>G?G=0:G>E&&(G=E);this._refreshTimer=setTimeout(a.hitch(this,this.refreshToken),G>x?G-x:G)}});B.Credential=D;r("extend-esri")&&(f.IdentityManagerBase=B);return B})},"esri/ServerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(F,y,a,u,n){F=F(null,{declaredClass:"esri.ServerInfo",constructor:function(t){y.mixin(this,t)},toJson:function(){return n.fixJson({server:this.server,
tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion,hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}});a("extend-esri")&&(u.ServerInfo=F);return F})},"esri/OAuthCredential":function(){define(["./kernel","dojo/_base/declare","dojo/has"],function(F,y,a){y=y(null,{declaredClass:"esri.OAuthCredential",
oAuthInfo:null,storage:null,appId:null,codeVerifier:null,expires:null,refreshToken:null,ssl:null,stateUID:null,token:null,userId:null,constructor:function(u,n){this.oAuthInfo=u;this.storage=n;this._init()},isValid:function(){var u=!1;if(this.oAuthInfo&&this.userId&&(this.refreshToken||this.token))if(null==this.expires&&this.refreshToken)u=!0;else{var n=Date.now();this.expires>n&&(this.expires-n)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(u=!0)}return u},save:function(){if(!this.storage)return!1;
var u=this._load(),n=this.oAuthInfo;if(n&&n.authNamespace&&n.portalUrl){var t=u[n.authNamespace];t||(t=u[n.authNamespace]={});this.appId||(this.appId=n.appId);t[n.portalUrl]={appId:this.appId,codeVerifier:this.codeVerifier,expires:this.expires,refreshToken:this.refreshToken,ssl:this.ssl,stateUID:this.stateUID,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(u))}catch(r){return console.warn(r),!1}return!0}return!1},destroy:function(){var u=this._load(),
n=this.oAuthInfo;if(n&&n.appId&&n.portalUrl&&(null==this.expires||this.expires>Date.now())&&(this.refreshToken||this.token)){var t=n.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",r=new FormData;r.append("f","json");r.append("auth_token",this.refreshToken||this.token);r.append("client_id",n.appId);r.append("token_type_hint",this.refreshToken?"refresh_token":"access_token");if("function"===typeof navigator.sendBeacon)navigator.sendBeacon(t,r);else{var l=new XMLHttpRequest;
l.open("POST",t);l.send(r)}}if(n&&n.authNamespace&&n.portalUrl&&this.storage&&(t=u[n.authNamespace])){delete t[n.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(u))}catch(d){console.log(d)}}n&&(this.oAuthInfo=n._oAuthCred=null)},_init:function(){var u=this._load(),n=this.oAuthInfo;n&&n.authNamespace&&n.portalUrl&&(u=u[n.authNamespace])&&(u=u[n.portalUrl])&&(this.appId=u.appId,this.codeVerifier=u.codeVerifier,this.expires=u.expires,this.refreshToken=u.refreshToken,this.ssl=u.ssl,
this.stateUID=u.stateUID,this.token=u.token,this.userId=u.userId)},_load:function(){var u={};if(this.storage){var n=this.storage.getItem("esriJSAPIOAuth");if(n)try{u=JSON.parse(n)}catch(t){console.warn(t)}}return u}});a("extend-esri")&&(F.OAuthCredential=y);return y})},"esri/arcgis/OAuthInfo":function(){define(["../kernel","../lang","dojo/_base/declare","dojo/_base/lang","dojo/has"],function(F,y,a,u,n){var t=a(null,{declaredClass:"esri.arcgis.OAuthInfo",constructor:function(r){u.mixin(this,{expiration:20160,
minTimeUntilExpiration:30,portalUrl:"https://www.arcgis.com",authNamespace:"/",forceLogin:!1,popup:!1,popupCallbackUrl:"oauth-callback.html",popupWindowFeatures:"height\x3d490,width\x3d800,resizable,scrollbars,status",preserveUrlHash:!1,flowType:"auto"},r)},_oAuthCred:null,toJson:function(){return y.fixJson({appId:this.appId,expiration:this.expiration,locale:this.locale,minTimeUntilExpiration:this.minTimeUntilExpiration,portalUrl:this.portalUrl,authNamespace:this.authNamespace,forceLogin:this.forceLogin,
popup:this.popup,popupCallbackUrl:this.popupCallbackUrl,popupWindowFeatures:this.popupWindowFeatures,preserveUrlHash:this.preserveUrlHash,flowType:this.flowType})},clone:function(){return new t(this.toJson())}});n("extend-esri")&&u.setObject("arcgis.OAuthInfo",t,F);return t})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),function(F,y,a,u,n,t,r,l){return F("dijit.form.Form",
[n,t,r,l],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(d){y.set(this.domNode,"encType",d);u("ie")&&(this.domNode.encoding=
d);this._set("encType",d)},reset:function(d){var f={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:d?d.target:this.domNode,target:d?d.target:this.domNode};!1!==this.onReset(f)&&f.returnValue&&this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(d){this.reset(d);d.stopPropagation();d.preventDefault();return!1},_onSubmit:function(d){var f=this.constructor.prototype;if(this.execute!=f.execute||this.onExecute!=f.onExecute)a.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.",
"","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(d)&&(d.stopPropagation(),d.preventDefault())},onSubmit:function(){return this.isValid()},submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "),function(F,y,a,u,n,t,r){var l=F("dijit.form.ValidationTextBox",
n,{templateString:r,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(d,f){f!=l.prototype[d]&&(y.deprecated("ValidationTextBox id\x3d"+this.id+", set('"+d+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",f))},_setRegExpGenAttr:function(d){this._deprecateRegExp("regExpGen",d);this._set("regExpGen",this._computeRegexp)},
_setRegExpAttr:function(d){this._deprecateRegExp("regExp",d)},_setValueAttr:function(){this.inherited(arguments);this._refreshState()},validator:function(d,f){return(new RegExp("^(?:"+this._computeRegexp(f)+")"+(this.required?"":"?")+"$")).test(d)&&(!this.required||!this._isEmpty(d))&&(this._isEmpty(d)||void 0!==this.parse(d,f))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,this.get("constraints"))},_isEmpty:function(d){return(this.trim?
/^\s*$/:/^$/).test(d)},getErrorMessage:function(){var d="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:this.invalidMessage?this.invalidMessage:this.promptMessage,f="$_unset_$"==this.missingMessage?this.messages.missingMessage:this.missingMessage?this.missingMessage:d;return this.required&&this._isEmpty(this.textbox.value)?f:d},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(d){var f="",b=this.disabled||this.isValid(d);b&&(this._maskValidSubsetError=
!0);var c=this._isEmpty(this.textbox.value),g=!b&&d&&this._isValidSubset();this._set("state",b?"":((!this._hasBeenBlurred||d)&&c||g)&&(this._maskValidSubsetError||g&&!this._hasBeenBlurred&&d)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid","Error"==this.state?"true":"false");"Error"==this.state?(this._maskValidSubsetError=d&&g,f=this.getErrorMessage(d)):"Incomplete"==this.state?(f=this.getPromptMessage(d),this._maskValidSubsetError=!this._hasBeenBlurred||d):c&&(f=this.getPromptMessage(d));
this.set("message",f);return b},displayMessage:function(d){d&&this.focused?t.show(d,this.domNode,this.tooltipPosition,!this.isLeftToRight()):t.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(d){this.constraints=a.clone(this.constraints);this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(d){!d.locale&&this.lang&&(d.locale=this.lang);
this._set("constraints",d);this._refreshState()},_setPatternAttr:function(d){this._set("pattern",d);this._refreshState()},_computeRegexp:function(d){var f=this.pattern;"function"==typeof f&&(f=f.call(this,d));if(f!=this._lastRegExp){var b="";this._lastRegExp=f;".*"!=f&&f.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(c){switch(c.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":b+=c;break;case ")":b+="|$)";break;default:b+="(?:"+c+"|$)"}});try{"".search(b)}catch(c){b=
this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+b+")$"}return f},postMixInProperties:function(){this.inherited(arguments);this.messages=u.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(d){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(d){this._set("required",d);this.focusNode.setAttribute("aria-required",d);this._refreshState()},_setMessageAttr:function(d){this._set("message",
d);this.displayMessage(d)},reset:function(){this._maskValidSubsetError=!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)},destroy:function(){t.hide(this.domNode);this.inherited(arguments)}});return l})},"dijit/form/TextBox":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main".split(" "),function(F,y,
a,u,n,t,r,l,d,f,b){l=F("dijit.form.TextBox"+(r("dojo-bidi")?"_NoBidi":""),[l,d],{templateString:f,_singleNodeTemplate:'\x3cinput class\x3d"dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point\x3d"textbox,focusNode" autocomplete\x3d"off" type\x3d"${type}" ${!nameAttrSetting} /\x3e',_buttonInputDisabled:r("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var c=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==
c||"file"==c)&&this.templateString==this.constructor.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>r("ie")&&this.defer(function(){try{var c=a.getComputedStyle(this.domNode);if(c){var g=c.fontFamily;if(g){var e=this.domNode.getElementsByTagName("INPUT");if(e)for(c=0;c<e.length;c++)e[c].style.fontFamily=g}}}catch(h){}})},_setPlaceHolderAttr:function(c){this._set("placeHolder",c);this._phspan||(this._attachPoints.push("_phspan"),
this._phspan=y.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(t(this._phspan,"mousedown",function(g){g.preventDefault()}),t(this._phspan,"touchend, pointerup, MSPointerUp",n.hitch(this,function(){this.focus()}))));this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(c));this._updatePlaceHolder()},_onInput:function(c){this.inherited(arguments);this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&
(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(c,g,e){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){u.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},setDisplayedValue:function(c){u.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",
c)},_onBlur:function(c){this.disabled||(this.inherited(arguments),this._updatePlaceHolder(),r("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(c){this.disabled||this.readOnly||(this.inherited(arguments),this._updatePlaceHolder())}});9>r("ie")&&(l.prototype._isTextSelected=function(){var c=this.ownerDocument.selection.createRange();return c.parentElement()==this.textbox&&0<c.text.length},b._setSelectionRange=d._setSelectionRange=function(c,
g,e){c.createTextRange&&(c=c.createTextRange(),c.collapse(!0),c.moveStart("character",-99999),c.moveStart("character",g),c.moveEnd("character",e-g),c.select())});r("dojo-bidi")&&(l=F("dijit.form.TextBox",l,{_setPlaceHolderAttr:function(c){this.inherited(arguments);this.applyTextDir(this._phspan)}}));return l})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(F,y,a,u){return F("dijit.form._FormValueWidget",[a,u],{_layoutHackIE7:function(){if(7==
y("ie"))for(var n=this.domNode,t=n.parentNode,r=n.firstChild||n,l=r.style.filter,d=this;t&&0==t.clientHeight;)(function(){var f=d.connect(t,"onscroll",function(){d.disconnect(f);r.style.filter=(new Date).getMilliseconds();d.defer(function(){r.style.filter=l})})})(),t=t.parentNode}})})},"dijit/form/_FormValueMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dojo/sniff ./_FormWidgetMixin".split(" "),function(F,y,a,u,n,t,r){return F("dijit.form._FormValueMixin",
r,{readOnly:!1,_setReadOnlyAttr:function(l){t("trident")&&"disabled"in this?y.set(this.focusNode,"readOnly",l||this.disabled):y.set(this.focusNode,"readOnly",l);this._set("readOnly",l)},postCreate:function(){this.inherited(arguments);void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(l,d){this._handleOnChange(l,d)},_handleOnChange:function(l,d){this._set("value",l);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,
!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,!0)}})})},"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/sniff dojo/keys dojo/_base/lang dojo/on ../main".split(" "),function(F,y,a,u,n,t,r,l){var d=y("dijit.form._TextBoxMixin"+(u("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),
this.constraints)},_setValueAttr:function(f,b,c){if(void 0!==f){var g=this.filter(f);"string"!=typeof c&&(c=null===g||"number"==typeof g&&isNaN(g)?"":this.filter(this.format(g,this.constraints)),0!=this.compare(g,this.filter(this.parse(c,this.constraints)))&&(c=null))}null==c||"number"==typeof c&&isNaN(c)||this.textbox.value==c||(this.textbox.value=c,this._set("displayedValue",this.get("displayedValue")));this.inherited(arguments,[g,b])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},
_setDisplayedValueAttr:function(f){null==f?f="":"string"!=typeof f&&(f=String(f));this.textbox.value=f;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"))},format:function(f){return null==f?"":f.toString?f.toString():f},parse:function(f){return f},_refreshState:function(){},onInput:function(){},_onInput:function(f){this._lastInputEventValue=this.textbox.value;this._processInput(this._lastInputProducingEvent||f);delete this._lastInputProducingEvent;this.intermediateChanges&&
this._handleOnChange(this.get("value"),!1)},_processInput:function(){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);this.own(r(this.textbox,"keydown, keypress, paste, cut, compositionend",t.hitch(this,function(f){if("keydown"==f.type&&229!=f.keyCode){var b=f.keyCode;switch(b){case n.SHIFT:case n.ALT:case n.CTRL:case n.META:case n.CAPS_LOCK:case n.NUM_LOCK:case n.SCROLL_LOCK:return}if(!f.ctrlKey&&
!f.metaKey&&!f.altKey){switch(b){case n.NUMPAD_0:case n.NUMPAD_1:case n.NUMPAD_2:case n.NUMPAD_3:case n.NUMPAD_4:case n.NUMPAD_5:case n.NUMPAD_6:case n.NUMPAD_7:case n.NUMPAD_8:case n.NUMPAD_9:case n.NUMPAD_MULTIPLY:case n.NUMPAD_PLUS:case n.NUMPAD_ENTER:case n.NUMPAD_MINUS:case n.NUMPAD_PERIOD:case n.NUMPAD_DIVIDE:return}if(65<=b&&90>=b||48<=b&&57>=b||b==n.SPACE)return;b=!1;for(var c in n)if(n[c]===f.keyCode){b=!0;break}if(!b)return}}(b=32<=f.charCode?String.fromCharCode(f.charCode):f.charCode)||
(b=65<=f.keyCode&&90>=f.keyCode||48<=f.keyCode&&57>=f.keyCode||f.keyCode==n.SPACE?String.fromCharCode(f.keyCode):f.keyCode);b||(b=229);if("keypress"==f.type){if("string"!=typeof b)return;if("a"<=b&&"z">=b||"A"<=b&&"Z">=b||"0"<=b&&"9">=b||" "===b)if(f.ctrlKey||f.metaKey||f.altKey)return}var g={faux:!0},e;for(e in f)/^(layer[XY]|returnValue|keyLocation)$/.test(e)||(c=f[e],"function"!=typeof c&&"undefined"!=typeof c&&(g[e]=c));t.mixin(g,{charOrCode:b,_wasConsumed:!1,preventDefault:function(){g._wasConsumed=
!0;f.preventDefault()},stopPropagation:function(){f.stopPropagation()}});this._lastInputProducingEvent=g;!1===this.onInput(g)&&(g.preventDefault(),g.stopPropagation());if(!g._wasConsumed&&9>=u("ie"))switch(f.keyCode){case n.TAB:case n.ESCAPE:case n.DOWN_ARROW:case n.UP_ARROW:case n.LEFT_ARROW:case n.RIGHT_ARROW:break;default:f.keyCode==n.ENTER&&"textarea"!=this.textbox.tagName.toLowerCase()||this.defer(function(){this.textbox.value!==this._lastInputEventValue&&r.emit(this.textbox,"input",{bubbles:!0})})}})),
r(this.textbox,"input",t.hitch(this,"_onInput")),r(this.domNode,"keypress",function(f){f.stopPropagation()}))},_blankValue:"",filter:function(f){if(null===f)return this._blankValue;if("string"!=typeof f)return f;this.trim&&(f=t.trim(f));this.uppercase&&(f=f.toUpperCase());this.lowercase&&(f=f.toLowerCase());this.propercase&&(f=f.replace(/[^\s]+/g,function(b){return b.substring(0,1).toUpperCase()+b.substring(1)}));return f},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(f){this.disabled||
(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(f){this.disabled||this.readOnly||(this.selectOnClick&&"mouse"==f&&(this._selectOnClickHandle=r.once(this.domNode,"mouseup, touchend",t.hitch(this,function(b){this._isTextSelected()||d.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=
null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="";this.inherited(arguments)}});u("dojo-bidi")&&(d=y("dijit.form._TextBoxMixin",d,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode);this.inherited(arguments)}}));d._setSelectionRange=l._setSelectionRange=function(f,b,
c){f.setSelectionRange&&f.setSelectionRange(b,c)};d.selectInputText=l.selectInputText=function(f,b,c){f=a.byId(f);isNaN(b)&&(b=0);isNaN(c)&&(c=f.value?f.value.length:0);try{f.focus(),d._setSelectionRange(f,b,c)}catch(g){}};return d})},"dijit/Tooltip":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m,w){function p(){}var A=y("dijit._MasterTooltip",[e,h],{duration:c.defaultDuration,templateString:m,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new k(this.domNode);this.fadeIn=a.fadeIn({node:this.domNode,duration:this.duration,onEnd:l.hitch(this,"_onShow")});this.fadeOut=a.fadeOut({node:this.domNode,duration:this.duration,onEnd:l.hitch(this,"_onHide")})},show:function(z,q,v,B,D,x,E){if(!this.aroundNode||this.aroundNode!==
q||this.containerNode.innerHTML!=z)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=z;D&&this.set("textDir",D);this.containerNode.align=B?"right":"left";var G=g.around(this.domNode,q,v&&v.length?v:C.defaultPosition,!B,l.hitch(this,"orient")),I=G.aroundNodePos;"M"==G.corner.charAt(0)&&"M"==G.aroundCorner.charAt(0)?(this.connectorNode.style.top=I.y+(I.h-this.connectorNode.offsetHeight>>1)-G.y+"px",this.connectorNode.style.left=""):"M"==G.corner.charAt(1)&&
"M"==G.aroundCorner.charAt(1)?this.connectorNode.style.left=I.x+(I.w-this.connectorNode.offsetWidth>>1)-G.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");r.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=q;this.onMouseEnter=x||p;this.onMouseLeave=E||p}},orient:function(z,q,v,B,D){this.connectorNode.style.top="";var x=B.h;B=B.w;z.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove",
"BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[q+"-"+v];this.domNode.style.width="auto";var E=t.position(this.domNode);if(b("ie")||b("trident"))E.w+=2;t.setMarginBox(this.domNode,{w:Math.min(Math.max(B,1),E.w)});"B"==v.charAt(0)&&"B"==q.charAt(0)?(z=t.position(z),q=this.connectorNode.offsetHeight,
z.h>x?(this.connectorNode.style.top=x-(D.h+q>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(D.h/2-q/2,0),z.h-q)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,E.w-B)},_onShow:function(){b("ie")&&(this.domNode.style.filter="")},hide:function(z){this._onDeck&&this._onDeck[1]==z?this._onDeck=null:this.aroundNode===z&&(this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=
null,this.fadeOut.play());this.onMouseEnter=this.onMouseLeave=p},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});b("dojo-bidi")&&A.extend({_setAutoTextDir:function(z){this.applyTextDir(z);F.forEach(z.children,function(q){this._setAutoTextDir(q)},this)},_setTextDirAttr:function(z){this._set("textDir",z);"auto"==z?this._setAutoTextDir(this.containerNode):this.containerNode.dir=this.textDir}});w.showTooltip=
function(z,q,v,B,D,x,E){v&&(v=F.map(v,function(G){return{after:"after-centered",before:"before-centered"}[G]||G}));C._masterTT||(w._masterTT=C._masterTT=new A);return C._masterTT.show(z,q,v,B,D,x,E)};w.hideTooltip=function(z){return C._masterTT&&C._masterTT.hide(z)};var C=y("dijit.Tooltip",e,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(z){F.forEach(this._connections||[],function(q){F.forEach(q,function(v){v.remove()})},this);this._connectIds=
F.filter(l.isArrayLike(z)?z:z?[z]:[],function(q){return u.byId(q,this.ownerDocument)},this);this._connections=F.map(this._connectIds,function(q){q=u.byId(q,this.ownerDocument);var v=this.selector,B=v?function(x){return f.selector(v,x)}:function(x){return x},D=this;return[f(q,B(d.enter),function(){D._onHover(this)}),f(q,B("focusin"),function(){D._onHover(this)}),f(q,B(d.leave),l.hitch(D,"_onUnHover")),f(q,B("focusout"),l.hitch(D,"set","state","DORMANT"))]},this);this._set("connectId",z)},addTarget:function(z){z=
z.id||z;-1==F.indexOf(this._connectIds,z)&&this.set("connectId",this._connectIds.concat(z))},removeTarget:function(z){z=F.indexOf(this._connectIds,z.id||z);0<=z&&(this._connectIds.splice(z,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);n.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var z=this.connectId;F.forEach(l.isArrayLike(z)?z:[z],this.addTarget,this)},getContent:function(z){return this.label||this.domNode.innerHTML},
state:"DORMANT",_setStateAttr:function(z){if(!(this.state==z||"SHOW TIMER"==z&&"SHOWING"==this.state||"HIDE TIMER"==z&&"DORMANT"==this.state)){this._hideTimer&&(this._hideTimer.remove(),delete this._hideTimer);this._showTimer&&(this._showTimer.remove(),delete this._showTimer);switch(z){case "DORMANT":this._connectNode&&(C.hide(this._connectNode),delete this._connectNode,this.onHide());break;case "SHOW TIMER":"SHOWING"!=this.state&&(this._showTimer=this.defer(function(){this.set("state","SHOWING")},
this.showDelay));break;case "SHOWING":var q=this.getContent(this._connectNode);if(!q){this.set("state","DORMANT");return}C.show(q,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,l.hitch(this,"set","state","SHOWING"),l.hitch(this,"set","state","HIDE TIMER"));this.onShow(this._connectNode,this.position);break;case "HIDE TIMER":this._hideTimer=this.defer(function(){this.set("state","DORMANT")},this.hideDelay)}this._set("state",z)}},_onHover:function(z){this._connectNode&&z!=this._connectNode&&
this.set("state","DORMANT");this._connectNode=z;this.set("state","SHOW TIMER")},_onUnHover:function(z){this.set("state","HIDE TIMER")},open:function(z){this.set("state","DORMANT");this._connectNode=z;this.set("state","SHOWING")},close:function(){this.set("state","DORMANT")},onShow:function(){},onHide:function(){},destroy:function(){this.set("state","DORMANT");F.forEach(this._connections||[],function(z){F.forEach(z,function(q){q.remove()})},this);this.inherited(arguments)}});C._MasterTooltip=A;C.show=
w.showTooltip;C.hide=w.hideTooltip;C.defaultPosition=["after-centered","before-centered"];return C})},"esri/OAuthSignInHandler":function(){define("./Credential ./domUtils ./lang ./urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/jsapi dojo/io-query ./core/events dijit/form/Button dojo/query".split(" "),function(F,y,a,u,n,t,r,l,d,f,b,c,g){var e=null,h=null;try{e=window.localStorage,h=window.sessionStorage}catch(m){}var k=window.crypto||
window.msCrypto;return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(m){this._oAuthRedirectFunc=m},oAuthSignIn:function(m,w,p,A){var C=this._oAuthDfd=new l;C.resUrl_=m;C.sinfo_=w;C.oinfo_=p;var z=p._oAuthCred;if(z.storage&&("authorization-code"===p.flowType||"auto"===p.flowType&&!p.popup&&8.4<=w.currentVersion)){var q=k.getRandomValues(new Uint8Array(32));var v=u.base64UrlEncode(q);z.codeVerifier=v;q=k.getRandomValues(new Uint8Array(32));z.stateUID=u.base64UrlEncode(q);z.save()||(z.codeVerifier=v=null)}else z.codeVerifier=null;var B=
this;this._getCodeChallenge(v).then(function(D){var x=!A||!1!==A.oAuthPopupConfirmation;if(!p.popup||!x)return B._doOAuthSignIn(m,w,p,D),C;C.codeChallenge_=D;B._nls||(B._nls=b.identity);B.oAuthDialog||(B.oAuthDialog=B._createOAuthDialog());D=B.oAuthDialog;x=A&&A.error;var E=A&&A.token;y.hide(D.errMsg_);x&&403==x.code&&E&&(f.set(D.errMsg_,"innerHTML",B._nls.forbidden),y.show(D.errMsg_));f.set(D.serverLink_,{title:w.server,innerHTML:-1!==w.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":
w.server});D.show()});return C},setOAuthResponseHash:function(m){m&&("#"===m.charAt(0)&&(m=m.substring(1)),this._processOAuthPopupParams(c.queryToObject(m)))},_createOAuthDialog:function(){var m=this._nls,w=a.substitute(m,this._oAuthDialogContent);w=a.substitute({server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},w);var p=new n({title:m.title,content:w,"class":"esriOAuthSignInDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var A=p.esriIdMgr_._oAuthDfd;
p.hide_();p.esriIdMgr_._doOAuthSignIn(A.resUrl_,A.sinfo_,A.oinfo_,A.codeChallenge_)},cancel_:function(){var A=p.esriIdMgr_._oAuthDfd;p.esriIdMgr_._oAuthDfd=null;p.hide_();var C=Error("ABORTED");C.code="IdentityManager.2";C.log=!!r.isDebug;A.errback(C)},hide_:function(){y.hide(p.errMsg_);p.hide();n._DialogLevelManager.hide(p)}});m=p.domNode;p.btnSubmit_=t.byNode(d.query(".esriIdSubmit",m)[0]);p.btnCancel_=t.byNode(d.query(".esriIdCancel",m)[0]);p.serverLink_=d.query(".serverLink",m)[0];p.errMsg_=d.query(".esriErrorMsg",
m)[0];p.connect(p.btnSubmit_,"onClick",p.execute_);p.connect(p.btnCancel_,"onClick",p.onCancel);p.connect(p,"onCancel",p.cancel_);return p},_doOAuthSignIn:function(m,w,p,A){var C=this,z=p._oAuthCred,q={portalUrl:p.portalUrl};!p.popup&&p.preserveUrlHash&&window.location.hash&&(q.hash=window.location.hash);z.stateUID&&(q.uid=z.stateUID);q={client_id:p.appId,response_type:z.codeVerifier?"code":"token",state:JSON.stringify(q),expiration:p.expiration,locale:p.locale,redirect_uri:this._getRedirectURI(p,
!!z.codeVerifier)};p.forceLogin&&(q.force_login=!0);p.forceUserId&&p.userId&&(q.prepopulatedusername=p.userId);!p.popup&&this._doPortalSignIn(m)&&(q.redirectToUserOrgUrl=!0);z.codeVerifier&&(q.code_challenge=A||z.codeVerifier,q.code_challenge_method=A?"S256":"plain");A=p.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize";z=A+"?"+c.objectToQuery(q);if(p.popup){var v=window.open(z,"esriJSAPIOAuth",p.popupWindowFeatures);v?(v.focus(),this._oAuthDfd.oAuthWin_=v,this._oAuthIntervalId=setInterval(function(){if(v.closed){clearInterval(C._oAuthIntervalId);
C._oAuthOnPopupHandle.remove();var B=C._oAuthDfd;if(B){var D=Error("ABORTED");D.code="IdentityManager.2";D.log=!!r.isDebug;B.errback(D)}}},500),C._oAuthOnPopupHandle=g.on(window,["arcgis:auth:hash","arcgis:auth:location:search"],function(B){"arcgis:auth:hash"===B.type?C.setOAuthResponseHash(B.detail):C._setOAuthResponseQueryString(B.detail)})):(m=Error("ABORTED"),m.name="identity-manager:user-aborted",m.code="IdentityManager.2",m.log=!!r.isDebug,this._oAuthDfd.errback(m))}else this._rejectOnPersistedPageShow=
!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:q,authorizeUrl:A,resourceUrl:m,serverInfo:w,oAuthInfo:p}):window.location.href=z},_getCodeChallenge:function(m){if(m&&window.isSecureContext)return m=(new TextEncoder).encode(m),k.subtle.digest("SHA-256",m).then(function(w){return u.base64UrlEncode(new Uint8Array(w))});m=new l;m.resolve(null);return m},_getRedirectURI:function(m,w){var p=window.location.href.replace(/#.*$/,"");if(m.popup)return u.getAbsoluteUrl(m.popupCallbackUrl);
if(w){var A=u.urlToObject(p);if(A.query)return"code error error_description message_code persist state".split(" ").forEach(function(C){delete A.query[C]}),(m=c.objectToQuery(A.query))?A.path+"?"+m:A.path}return p},_processOAuthPopupParams:function(m){var w=this._oAuthDfd;this._oAuthDfd=null;if(w)if(clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle&&this._oAuthOnPopupHandle.remove(),m.error){var p="access_denied"===m.error;m=Error(p?"ABORTED":"OAuth: "+m.error+" - "+m.error_description);
m.name=p?"identity-manager:user-aborted":"identity-manager:authentication-failed";m.code="IdentityManagerBase."+(p?2:3);m.log=!!r.isDebug;w.errback(m)}else this._processOAuthResponseParams(m,w.oinfo_,w.sinfo_).then(function(A){w.resolve(A)}).catch(function(A){w.reject(A)})},_processOAuthResponseParams:function(m,w,p){var A=w._oAuthCred;if(m.code){var C=A.codeVerifier;A.codeVerifier=null;A.stateUID=null;A.save();return this._getOAuthToken(p.server,m.code,w.appId,this._getRedirectURI(w,!0),C).then(function(q){var v=
new F({userId:q.username,server:p.server,token:q.access_token,expires:Date.now()+1E3*q.expires_in,ssl:q.ssl,oAuthState:m.state,_oAuthCred:A});w.userId=v.userId;A.storage=q.persist?e:h;A.refreshToken=q.refresh_token;A.token=null;A.expires=q.refresh_token_expires_in?Date.now()+1E3*q.refresh_token_expires_in:null;A.userId=v.userId;A.ssl=v.ssl;A.save();return v})}C=new F({userId:m.username,server:p.server,token:m.access_token,expires:Date.now()+1E3*Number(m.expires_in),ssl:"true"===m.ssl,oAuthState:m.state,
_oAuthCred:A});w.userId=C.userId;A.storage=m.persist?e:h;A.refreshToken=null;A.token=C.token;A.expires=C.expires;A.userId=C.userId;A.ssl=C.ssl;A.save();var z=new l;z.resolve(C);return z},_setOAuthResponseQueryString:function(m){m&&("?"===m.charAt(0)&&(m=m.substring(1)),this._processOAuthPopupParams(c.queryToObject(m)))}}})},"esri/core/events":function(){define([],function(){return{on:function(F,y,a){if(!F||"function"!==typeof F.on&&"function"!==typeof F.addEventListener)throw new TypeError("target is not a Evented or EventTarget object");
if("on"in F)return F.on(y,a);if(Array.isArray(y)){for(var u=y.slice(),n=0;n<u.length;n++)F.addEventListener(u[n],a);return{remove:function(){for(var t=0;t<u.length;t++)F.removeEventListener(u[t],a)}}}F.addEventListener(y,a);return{remove:function(){F.removeEventListener(y,a)}}}}})},"esri/layers/graphics":function(){define(["./GraphicsLayer","../graphic","../renderer"],function(){return{}})},"esri/layers/agstiled":function(){define(["./agscommon","./ArcGISTiledMapServiceLayer"],function(){return{}})},
"esri/layers/agscommon":function(){define("./ArcGISMapServiceLayer ./LayerInfo ./TimeInfo ./LayerTimeOptions ./TimeReference ./Field ./Domain ./RangeDomain ./CodedValueDomain ./InheritedDomain ./LayerSource ./LayerMapSource ./LayerDataSource ./DataSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource ./DynamicLayerInfo ./LayerDrawingOptions ../geometry ../utils".split(" "),function(){return{}})},"esri/layers/InheritedDomain":function(){define(["dojo/_base/declare","dojo/_base/lang",
"dojo/has","../kernel","./Domain"],function(F,y,a,u,n){F=F([n],{declaredClass:"esri.layers.InheritedDomain"});a("extend-esri")&&y.setObject("layers.InheritedDomain",F,u);return F})},"esri/layers/LayerSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(F,y,a,u){F=F(null,{declaredClass:"esri.layers.LayerSource",type:null,constructor:function(n){n&&y.mixin(this,n)},toJson:function(){}});a("extend-esri")&&y.setObject("layers.LayerSource",F,u);return F})},
"esri/layers/LayerMapSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource".split(" "),function(F,y,a,u,n,t){F=F(t,{declaredClass:"esri.layers.LayerMapSource",type:"mapLayer",toJson:function(){return n.fixJson({type:"mapLayer",mapLayerId:this.mapLayerId,gdbVersion:this.gdbVersion})}});a("extend-esri")&&y.setObject("layers.LayerMapSource",F,u);return F})},"esri/layers/LayerDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource".split(" "),
function(F,y,a,u,n,t,r,l,d,f){F=F(t,{declaredClass:"esri.layers.LayerDataSource",type:"dataLayer",constructor:function(b){if(b&&b.dataSource){switch(b.dataSource.type){case "table":b=new r(b.dataSource);break;case "queryTable":b=new l(b.dataSource);break;case "joinTable":b=new d(b.dataSource);break;case "raster":b=new f(b.dataSource);break;default:b=b.dataSource}this.dataSource=b}},toJson:function(){var b={type:"dataLayer",dataSource:this.dataSource&&this.dataSource.toJson()};return n.fixJson(b)}});
a("extend-esri")&&y.setObject("layers.LayerDataSource",F,u);return F})},"esri/layers/TableDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(F,y,a,u,n,t){F=F(t,{declaredClass:"esri.layers.TableDataSource",toJson:function(){return n.fixJson({type:"table",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName,gdbVersion:this.gdbVersion})}});a("extend-esri")&&y.setObject("layers.TableDataSource",F,u);return F})},"esri/layers/DataSource":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(F,y,a,u){F=F(null,{declaredClass:"esri.layers.DataSource",constructor:function(n){n&&y.mixin(this,n)},toJson:function(){}});a("extend-esri")&&y.setObject("layers.DataSource",F,u);return F})},"esri/layers/QueryDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ../SpatialReference".split(" "),function(F,y,a,u,n,t,r){F=F(t,{declaredClass:"esri.layers.QueryDataSource",constructor:function(l){l&&(l.oidFields&&
y.isString(l.oidFields)&&(this.oidFields=l.oidFields.split(",")),l.spatialReference&&(this.spatialReference=new r(l.spatialReference)))},toJson:function(){var l={type:"queryTable",workspaceId:this.workspaceId,query:this.query,oidFields:this.oidFields&&this.oidFields.join(),spatialReference:this.spatialReference&&this.spatialReference.toJson()};if(this.geometryType){var d="point"===this.geometryType.toLowerCase()?"esriGeometryPoint":"multipoint"===this.geometryType.toLowerCase()?"esriGeometryMultipoint":
"polyline"===this.geometryType.toLowerCase()?"esriGeometryPolyline":"polygon"===this.geometryType.toLowerCase()?"esriGeometryPolygon":this.geometryType;l.geometryType=d}return n.fixJson(l)}});a("extend-esri")&&y.setObject("layers.QueryDataSource",F,u);return F})},"esri/layers/JoinDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ./LayerMapSource ./TableDataSource ./QueryDataSource ./RasterDataSource".split(" "),function(F,y,a,u,n,t,r,l,d,f){var b=
F(t,{declaredClass:"esri.layers.JoinDataSource",constructor:function(c){c&&(c.leftTableSource&&(this.leftTableSource=this._createLayerSource(c.leftTableSource)),c.rightTableSource&&(this.rightTableSource=this._createLayerSource(c.rightTableSource)))},_createLayerSource:function(c){if("mapLayer"===c.type)var g=new r(c);else{g={type:"dataLayer"};switch(c.dataSource.type){case "table":var e=new l(c.dataSource);break;case "queryTable":e=new d(c.dataSource);break;case "joinTable":e=new b(c.dataSource);
break;case "raster":e=new f(c.dataSource);break;default:e=c.dataSource}g.dataSource=e;g.toJson=function(){var h={type:"dataLayer",dataSource:e.toJson()};return n.fixJson(h)}}return g},toJson:function(){var c={type:"joinTable",leftTableSource:this.leftTableSource&&this.leftTableSource.toJson(),rightTableSource:this.rightTableSource&&this.rightTableSource.toJson(),leftTableKey:this.leftTableKey,rightTableKey:this.rightTableKey};var g="left-outer-join"===this.joinType.toLowerCase()?"esriLeftOuterJoin":
"left-inner-join"===this.joinType.toLowerCase()?"esriLeftInnerJoin":this.joinType;c.joinType=g;return n.fixJson(c)}});a("extend-esri")&&y.setObject("layers.JoinDataSource",b,u);return b})},"esri/layers/RasterDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(F,y,a,u,n,t){F=F(t,{declaredClass:"esri.layers.RasterDataSource",toJson:function(){return n.fixJson({type:"raster",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName})}});
a("extend-esri")&&y.setObject("layers.RasterDataSource",F,u);return F})},"esri/layers/DynamicLayerInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerInfo ./LayerMapSource ./LayerDataSource".split(" "),function(F,y,a,u,n,t,r,l){F=F(t,{declaredClass:"esri.layers.DynamicLayerInfo",defaultVisibility:!0,parentLayerId:-1,maxScale:0,minScale:0,constructor:function(d){d&&(d.source?d="mapLayer"===d.source.type?new r(d.source):new l(d.source):(d=new r,d.mapLayerId=
this.id),this.source=d)},toJson:function(){var d=this.inherited(arguments);d.source=this.source&&this.source.toJson();return n.fixJson(d)}});a("extend-esri")&&y.setObject("layers.DynamicLayerInfo",F,u);return F})},"esri/layers/LayerDrawingOptions":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../renderers/jsonUtils ./LabelClass".split(" "),function(F,y,a,u,n,t,r,l){F=F(null,{declaredClass:"esri.layers.LayerDrawingOptions",constructor:function(d){if(d&&
(y.mixin(this,d),d.renderer&&(this.renderer=r.fromJson(d.renderer)),d.labelingInfo&&0<d.labelingInfo.length)){this.labelingInfo=[];var f;a.forEach(d.labelingInfo,function(b){f=new l(b);this.labelingInfo.push(f)},this)}},toJson:function(){var d={renderer:this.renderer&&this.renderer.toJson(),transparency:this.transparency,scaleSymbols:this.scaleSymbols,showLabels:this.showLabels};this.labelingInfo&&0<this.labelingInfo.length&&(d.labelingInfo=[],a.forEach(this.labelingInfo,function(f){d.labelingInfo.push(f.toJson())}));
return t.fixJson(d)}});u("extend-esri")&&y.setObject("layers.LayerDrawingOptions",F,n);return F})},"esri/layers/LabelClass":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../symbols/TextSymbol ../symbols/ShieldLabelSymbol".split(" "),function(F,y,a,u,n,t,r,l){var d=/__begin__/ig,f=/__end__/ig,b=/^__begin__/i,c=/__end__$/i;F=F(null,{declaredClass:"esri.layers.LabelClass",labelPlacement:null,labelExpression:null,format:null,fieldInfos:null,useCodedValues:null,
symbol:null,maxScale:0,minScale:0,where:null,sizeInfo:null,_labelPlacementLookup:{"above-center":"esriServerPointLabelPlacementAboveCenter","above-left":"esriServerPointLabelPlacementAboveLeft","above-right":"esriServerPointLabelPlacementAboveRight","below-center":"esriServerPointLabelPlacementBelowCenter","below-left":"esriServerPointLabelPlacementBelowLeft","below-right":"esriServerPointLabelPlacementBelowRight","center-center":"esriServerPointLabelPlacementCenterCenter","center-left":"esriServerPointLabelPlacementCenterLeft",
"center-right":"esriServerPointLabelPlacementCenterRight","above-after":"esriServerLinePlacementAboveAfter","above-along":"esriServerLinePlacementAboveAlong","above-before":"esriServerLinePlacementAboveBefore","above-start":"esriServerLinePlacementAboveStart","above-end":"esriServerLinePlacementAboveEnd","below-after":"esriServerLinePlacementBelowAfter","below-along":"esriServerLinePlacementBelowAlong","below-before":"esriServerLinePlacementBelowBefore","below-start":"esriServerLinePlacementBelowStart",
"below-end":"esriServerLinePlacementBelowEnd","center-after":"esriServerLinePlacementCenterAfter","center-along":"esriServerLinePlacementCenterAlong","center-before":"esriServerLinePlacementCenterBefore","center-start":"esriServerLinePlacementCenterStart","center-end":"esriServerLinePlacementCenterEnd","always-horizontal":"esriServerPolygonPlacementAlwaysHorizontal"},constructor:function(g){g&&(y.mixin(this,g),this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)||(this.labelPlacement=t.valueOf(this._labelPlacementLookup,
g.labelPlacement)),g.format&&(this.format=g.format),g.fieldInfos&&(this.fieldInfos=g.fieldInfos),g.symbol&&(this.symbol="esriSHD"===g.symbol.type?new l(g.symbol):new r(g.symbol)),g=this.sizeInfo)&&(g.minSize&&(g.minSize=u.pt2px(g.minSize)),g.maxSize&&(g.maxSize=u.pt2px(g.maxSize)))},getSymbol:function(){return this.symbol},toJson:function(){var g=this.sizeInfo;g&&(g=y.mixin({},g),g.minSize&&(g.minSize=u.px2pt(g.minSize)),g.maxSize&&(g.maxSize=u.px2pt(g.maxSize)));var e=t.fixJson(this.labelExpressionInfo&&
y.clone(this.labelExpressionInfo));this._processLabelExpressionInfo(e);g={name:this.name,labelExpression:this.labelExpression,labelExpressionInfo:e,format:this.format||void 0,fieldInfos:this.fieldInfos||void 0,useCodedValues:this.useCodedValues,maxScale:this.maxScale,minScale:this.minScale,where:this.where,sizeInfo:g||void 0,labelPlacement:this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)?this._labelPlacementLookup[this.labelPlacement]:this.labelPlacement,symbol:this.symbol&&this.symbol.toJson()};
return t.fixJson(g)},_processLabelExpressionInfo:function(g){g&&g.value&&(g.expression=this._convertTemplatedStringToArcade(g.value))},_convertTemplatedStringToArcade:function(g){if(g){var e=y.replace(g,function(h,k){return'__begin__$feature["'+k+'"]__end__'});e=b.test(e)?e.replace(b,""):'"'+e;e=c.test(e)?e.replace(c,""):e+'"';e=e.replace(d,'" + ').replace(f,' + "')}return e}});a("extend-esri")&&y.setObject("layers.LabelClass",F,n);return F})},"esri/symbols/ShieldLabelSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol ./Font".split(" "),
function(F,y,a,u,n,t,r,l,d){var f={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};F=F(l,{declaredClass:"esri.symbol.ShieldLabelSymbol",type:"shieldlabelsymbol",color:[255,255,255,1],width:32,height:32,font:u.defaultFont,constructor:function(b,c,g,e,h){b?y.isString(b)?(this.url=b,c&&(this.color=c),g&&(this.width=g),e&&(this.height=e),void 0!==h&&(this.font=h)):(this.width=u.pt2px(b.width),this.height=u.pt2px(b.height),c=b.imageData,9>a("ie")||!c||(g=this.url,this.url="data:"+(b.contentType||
"image")+";base64,"+c,this.imageData=g)):y.mixin(this,f)},getStroke:function(){return null},getFill:function(){return this.color},setWidth:function(b){this.width=b;return this},setHeight:function(b){this.height=b;return this},setUrl:function(b){b!==this.url&&(delete this.imageData,delete this.contentType);this.url=b;return this},setFont:function(b){this.font=b;return this},setText:function(b){this.text=b;return this},getWidth:function(){return this.width},getHeight:function(){return this.height},
getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null}},toJson:function(){var b=this.url,c=this.imageData;if(0===b.indexOf("data:")){var g=b;b=c;c=g.indexOf(";base64,")+8;c=g.substr(c)}b=r.getAbsoluteUrl(b);g=u.px2pt(this.width);g=isNaN(g)?void 0:g;var e=u.px2pt(this.height);e=isNaN(e)?void 0:e;b=t.fixJson(y.mixin(this.inherited("toJson",arguments),{type:"esriSHD",
url:b,imageData:c,contentType:this.contentType,width:g,height:e}));this.font?(c=new d(this.font),b.font=c.toJson()):b.font=null;delete b.size;b.imageData||delete b.imageData;return b}});F.defaultProps=f;a("extend-esri")&&(y.setObject("symbol.ShieldLabelSymbol",F,n),n.symbol.defaultShieldLabelSymbol=f);return F})},"esri/layers/agsdynamic":function(){define(["./agscommon","./ArcGISDynamicMapServiceLayer","../_time"],function(){return{}})},"esri/layers/ArcGISDynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/sniff dojo/io-query ../kernel ../config ../lang ../request ../urlUtils ../layerUtils ../geometry/scaleUtils ./DynamicMapServiceLayer ./ArcGISMapServiceLayer ./TimeInfo ./LayerTimeOptions ./ImageParameters ./DynamicLayerInfo ./LayerMapSource".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m,w,p,A){F=F([e,h],{declaredClass:"esri.layers.ArcGISDynamicMapServiceLayer",_eventMap:{"visible-layers-change":["visibleLayers"]},constructor:function(C,z,q){C=z&&z.imageParameters;var v=y.hitch;if(C){var B=C.layerDefinitions;B&&this.setLayerDefinitions(B);C.layerOption===w.LAYER_OPTION_SHOW&&(this.visibleLayers=[].concat(C.layerIds),this.onVisibleLayersChange(this.visibleLayers))}this._setIsPNG32=v(this,this._setIsPNG32);this.dpi=C&&C.dpi||96;this.imageFormat=
C&&C.format||"png8";this.imageTransparency=C&&!1===C.transparent?!1:!0;this._setIsPNG32();this.gdbVersion=z&&z.gdbVersion;this._params.gdbVersion=this.gdbVersion;B=C&&C.layerDefinitions;y.mixin(this._params,this._url.query,{dpi:this.dpi,transparent:this.imageTransparency,format:this.imageFormat},C?C.toJson():{});B&&(this._params.layerDefs=B);this.getImageUrl=v(this,this.getImageUrl);this._initLayer=v(this,this._initLayer);this._load=v(this,this._load);this.useMapImage=z?z.useMapImage:!1;this._loadCallback=
z&&z.loadCallback;(z=z&&z.resourceInfo)?this._initLayer(z):(void 0===q||!1===q)&&this._load();this.registerConnectEvents()},disableClientCaching:!1,layerDefinitions:null,_initLayer:function(C,z){this.inherited(arguments);C.timeInfo&&(this.timeInfo=new k(C.timeInfo));this.loaded=!0;this.onLoad(this);var q=this._loadCallback;q&&(delete this._loadCallback,q(this))},getImageUrl:function(C,z,q,v){var B=this._url.path+"/export",D=this._params,x=D.token=this._getToken(),E=C.spatialReference.wkid||u.toJson(C.spatialReference.toJson()),
G=this._errorHandler;delete D._ts;y.mixin(D,{bbox:C.xmin+","+C.ymin+","+C.xmax+","+C.ymax,bboxSR:E,imageSR:E,size:z+","+q},this.disableClientCaching?{_ts:(new Date).getTime()}:{});D.layerDefs&&(C=c._serializeLayerDefinitions(D.layerDefs,10.5<=this.version),D=y.mixin({},D),delete D.layerDefs,D.layerDefs=C);C=b.addProxy(b.normalize(B)+"?"+t.objectToQuery(y.mixin({},D,{f:"image"})));C.length>l.defaults.io.postLength||this.useMapImage?this._jsonRequest=f({url:B,content:y.mixin(D,{f:"json"}),callbackParamName:"callback",
load:function(I){I.imageData?I="data:"+(I.contentType||"image")+";base64,"+I.imageData:(I=I.href,x&&(I+=-1===I.indexOf("?")?"?token\x3d"+x:"\x26token\x3d"+x),I=b.addProxy(I));v(I)},error:G}):v(C)},_setIsPNG32:function(){var C=this.imageFormat.toLowerCase(),z=n("ie");this.isPNG32=z&&6===z&&("png32"===C||"png24"===C)&&this.imageTransparency},_setTime:function(C){var z=this.timeInfo;C=this._params.time=C?C.toJson().join(","):null;if(10.02>this.version&&z)if(C)this._params.layerTimeOptions=c._serializeTimeOptions(this.layerTimeOptions);
else{var q=this.layerInfos;if(q){var v=this.layerTimeOptions,B=v?v.slice(0):[],D=[];a.forEach(q,function(x){x.subLayerIds||D.push(x.id)});D.length&&(a.forEach(D,function(x){if(!B[x]){var E=new m;E.useTime=!1;B[x]=E}}),this._params.layerTimeOptions=c._serializeTimeOptions(B,D))}}10.02<=this.version&&z&&!C&&!z.hasLiveData&&(this._params.time="null,null")},setDPI:function(C,z){this.dpi=this._params.dpi=C;z||this.refresh(!0)},setImageFormat:function(C,z){this.imageFormat=this._params.format=C;this._setIsPNG32();
z||this.refresh(!0)},setImageTransparency:function(C,z){this.imageTransparency=this._params.transparent=C;this._setIsPNG32();z||this.refresh(!0)},setVisibleLayers:function(C,z){this.visibleLayers=C;this._params.layers=w.LAYER_OPTION_SHOW+":"+(C.length?C.join():"-1");this._updateDynamicLayers();z||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},onVisibleLayersChange:function(){},setDefaultVisibleLayers:function(C){this.visibleLayers=this._defaultVisibleLayers;this._params.layers=null;
this._updateDynamicLayers();C||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},setLayerDefinitions:function(C,z){this.layerDefinitions=C;this._params.layerDefs=C;this._updateDynamicLayers();z||this.refresh(!0)},setDefaultLayerDefinitions:function(C){this.layerDefinitions=this._params.layerDefs=null;this._updateDynamicLayers();C||this.refresh(!0)},setDisableClientCaching:function(C){this.disableClientCaching=C},setLayerTimeOptions:function(C,z){this.layerTimeOptions=C;this._params.layerTimeOptions=
c._serializeTimeOptions(C);this._updateDynamicLayers();z||this.refresh(!0)},refresh:function(C){if(!0===C)this.inherited(arguments);else{var z=this.disableClientCaching;this.disableClientCaching=!0;this.inherited(arguments);this.disableClientCaching=z}},setLayerDrawingOptions:function(C,z){this.layerDrawingOptions=C;this._updateDynamicLayers();z||this.refresh(!0)},setDynamicLayerInfos:function(C,z){C&&0<C.length?(this.dynamicLayerInfos=C,this.visibleLayers=c._getDefaultVisibleLayers(C),this.onVisibleLayersChange(this.visibleLayers)):
this.dynamicLayerInfos=this.layerDrawingOptions=null;this._updateDynamicLayers();z||this.refresh(!0)},createDynamicLayerInfosFromLayerInfos:function(){var C=[],z;a.forEach(this.layerInfos,function(q){z=new p(q.toJson());z.source=new A({mapLayerId:q.id});C.push(z)});return C},_onDynamicLayersChange:function(){},_updateDynamicLayers:function(){if(this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length||this.layerDrawingOptions&&0<this.layerDrawingOptions.length){this.dynamicLayerInfos&&0!==this.dynamicLayerInfos.length||
(this.dynamicLayerInfos=this.createDynamicLayerInfosFromLayerInfos());var C=this._map&&g.getScale(this._map);C=this._getDynLayerObjs(C);C=u.toJson(C);this._params.dynamicLayers&&this._params.dynamicLayers.length===C.length&&this._params.dynamicLayers===C||(this._params.dynamicLayers=C,this._onDynamicLayersChange(this._params.dynamicLayers))}else this._params.dynamicLayers?(this._params.dynamicLayers=null,this._onDynamicLayersChange(null)):this._params.dynamicLayers=null},_getDynLayerObjs:function(C){var z=
this.dynamicLayerInfos,q=[],v=this.visibleLayers,B=C?c._getLayersForScale(C,z):v;a.forEach(z,function(D){if(!D.subLayerIds){var x=D.id;if(-1!==a.indexOf(v,x)&&-1!==a.indexOf(B,x)){var E={id:x,name:D.name};E.source=D.source&&D.source.toJson();var G;this.layerDefinitions&&this.layerDefinitions[x]&&(G=this.layerDefinitions[x]);G&&(E.definitionExpression=G);var I;this.layerDrawingOptions&&this.layerDrawingOptions[x]&&(I=this.layerDrawingOptions[x]);I&&(G=I.toJson(),this._fixMarkerColor(G.renderer),E.drawingInfo=
G);var L;this.layerTimeOptions&&this.layerTimeOptions[x]&&(L=this.layerTimeOptions[x]);L&&(E.layerTimeOptions=L.toJson());E.minScale=D.minScale||0;E.maxScale=D.maxScale||0;q.push(E)}}},this);return q},_fixMarkerColor:function(C){a.forEach(this._getAllSimpleMarkerSymbols(C),function(z){if(!z.color){var q=[0,0,0,0],v=z.outline&&z.outline.color;"esriSMSX"!==z.style&&"esriSMSCross"!==z.style||!v||(q=v.slice(0));z.color=q}})},_getAllSimpleMarkerSymbols:function(C){return a.filter(this._getAllSymbols(C),
function(z){return"esriSMS"===z.type})},_getAllSymbols:function(C){var z=[];C&&(z.push(C.symbol),z.push(C.defaultSymbol),a.forEach(C.uniqueValueInfos||C.classBreakInfos,function(q){z.push(q.symbol)}),z=a.filter(z,d.isDefined));return z},_onExtentChangeHandler:function(C,z,q){q&&this._updateDynamicLayers();this.inherited(arguments)},_setMap:function(C,z,q){this._map=C;this._updateDynamicLayers();return this.inherited(arguments)},onGDBVersionChange:function(){},setGDBVersion:function(C,z){this.gdbVersion=
C;this._params.gdbVersion=C;this.onGDBVersionChange();z||this.refresh(!0)},exportMapImage:function(C,z){var q=y.hitch(this,function(){var v=l.defaults.map,B=C&&C.layerDefinitions;C=C?C.toJson(this.normalization):{};B&&(C.layerDefs=B);C=y.mixin({size:v.width+","+v.height},this._params,C,{f:"json"});delete C._ts;C.layerDefs&&(v=c._serializeLayerDefinitions(C.layerDefs,10.5<=this.version),delete C.layerDefs,C.layerDefs=v);this._exportMapImage(this._url.path+"/export",C,z)});if(this.loaded)q();else this.on("load",
q)}});n("extend-esri")&&y.setObject("layers.ArcGISDynamicMapServiceLayer",F,r);return F})},"esri/layers/DynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/dom-construct dojo/dom-style dojox/gfx/matrix ../kernel ../config ../sniff ../request ../domUtils ./layer ./MapImage".split(" "),function(F,y,a,u,n,t,r,l,d,f,b,c,g){var e=l.defaults.map.zoomDuration;F=F(c,{declaredClass:"esri.layers.DynamicMapServiceLayer",_eventMap:{"map-image-export":["mapImage"]},
constructor:function(h,k){this.useMapTime=k&&k.hasOwnProperty("useMapTime")?!!k.useMapTime:!0;this.extentProcessor=k&&k.extentProcessor;h=a.hitch;this._exportMapImageHandler=h(this,this._exportMapImageHandler);this._imgSrcFunc=h(this,this._imgSrcFunc);this._divAlphaImageFunc=h(this,this._divAlphaImageFunc);this._tileLoadHandler=h(this,this._tileLoadHandler);this._tileErrorHandler=h(this,this._tileErrorHandler);this.registerConnectEvents()},opacity:1,isPNG32:!1,_setMap:function(h,k,m){this.inherited(arguments);
this._map=h;var w=this._div=u.create("div",null,k),p=r._css.names,A={position:"absolute",width:h.width+"px",height:h.height+"px",overflow:"visible",opacity:this.opacity},C=d("ie"),z=y.connect,q=h.__visibleDelta;8===C&&delete A.opacity;"css-transforms"===h.navigationMode?(this._isChildLayer||(A[p.transform]=r._css.translate(q.x,q.y),n.set(w,A)),this._left=q.x,this._top=q.y):(A.left="0px",A.top="0px",n.set(w,A),this._left=this._top=0);n.set(w,A);this._onResizeHandler_connect=z(h,"onResize",this,"_onResizeHandler");
this._opacityChangeHandler_connect=z(this,"onOpacityChange",this,"_opacityChangeHandler");this._img_loading=null;this._dragOrigin={x:0,y:0};this.evaluateSuspension();if(this.suspended&&!h.loaded)var v=y.connect(h,"onLoad",this,function(){y.disconnect(v);v=null;this.evaluateSuspension()});this.extentProcessor&&(this._panEndEvalHandle=y.connect(h,"onPanEnd",this,this.evaluateSuspension),this._zoomEndEvalHandle=y.connect(h,"onZoomEnd",this,this.evaluateSuspension));return w},_unsetMap:function(h,k){this._img&&
this._clearEventListeners(this._img);this._img_loading&&this._clearEventListeners(this._img_loading);u.destroy(this._div);this._map=this._div=this._img=this._img_loading=null;var m=y.disconnect;m(this._onResizeHandler_connect);m(this._opacityChangeHandler_connect);m(this._panEndEvalHandle);m(this._zoomEndEvalHandle);this._panEndEvalHandle=this._zoomEndEvalHandle=this._onResizeHandler_connect=this._opacityChangeHandler_connect=null;this._fireUpdateEnd();this._toggleTime();clearTimeout(this._wakeTimer);
this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments)},_onResizeHandler:function(h,k,m){n.set(this._div,{width:k+"px",height:m+"px"});this._onExtentChangeHandler(h)},onSuspend:function(){this.inherited(arguments);this._fireUpdateEnd();this._toggleTime();b.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(){this.inherited(arguments);var h=this._map;this._toggleTime();"css-transforms"===h.navigationMode&&(h=h.__visibleDelta,
this._left=h.x,this._top=h.y,this._isChildLayer||n.set(this._div,r._css.names.transform,r._css.translate(this._left,this._top)));this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(a.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0)}),0)},canResume:function(){var h=this.inherited(arguments);if(h){var k=this._map.extent;this.extentProcessor&&k&&(h=!!this.extentProcessor({layer:this,extent:k,width:this._map.width}).extent)}return h},_enableDrawConnectors:function(){var h=
y.connect,k=this._map;k&&(this._onPanHandler_connect=h(k,"onPan",this,"_onPanHandler"),this._onExtentChangeHandler_connect=h(k,"onExtentChange",this,"_onExtentChangeHandler"),"css-transforms"===k.navigationMode?this._onScaleHandler_connect=h(k,"onScale",this,this._onScaleHandler):this._onZoomHandler_connect=h(k,"onZoom",this,"_onZoomHandler"))},_disableDrawConnectors:function(){var h=y.disconnect;h(this._onPanHandler_connect);h(this._onExtentChangeHandler_connect);h(this._onZoomHandler_connect);h(this._onScaleHandler_connect);
this._onPanHandler_connect=this._onExtentChangeHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=null},_toggleTime:function(){var h=this._map;this.timeInfo&&this.useMapTime&&h&&!this.suspended?(this._timeConnect||(this._timeConnect=y.connect(h,"onTimeExtentChange",this,this._onTimeExtentChangeHandler)),this._setTime(h.timeExtent)):(y.disconnect(this._timeConnect),this._timeConnect=null,this._setTime(null))},_setTime:function(h){this._params&&(this._params.time=h?h.toJson().join(","):
null)},_onPanHandler:function(h,k){this._panDx=k.x;this._panDy=k.y;h=this._dragOrigin;var m=this._map.__visibleDelta,w=this._img;w&&("css-transforms"===this._map.navigationMode?(this._left=m.x+k.x,this._top=m.y+k.y,this._isChildLayer||n.set(this._div,r._css.names.transform,r._css.translate(this._left,this._top))):n.set(w,{left:h.x+k.x+"px",top:h.y+k.y+"px"}))},_onExtentChangeHandler:function(h,k,m){if(!this.suspended){clearTimeout(this._wakeTimer);this._wakeTimer=null;var w=this._map,p=this._img,
A=p&&p.style,C=this._dragOrigin;!k||m||!p||k.x===this._panDx&&k.y===this._panDy||("css-transforms"===w.navigationMode?(k=w.__visibleDelta,this._left=k.x,this._top=k.y,this._isChildLayer||n.set(this._div,r._css.names.transform,r._css.translate(this._left,this._top))):n.set(p,{left:C.x+k.x+"px",top:C.y+k.y+"px"}));p?(C.x=parseInt(A.left,10),C.y=parseInt(A.top,10)):C.x=C.y=0;"css-transforms"===w.navigationMode&&m&&p&&(n.set(p,r._css.names.transition,"none"),p._multiply=p._multiply?t.multiply(p._matrix,
p._multiply):p._matrix);this._fireUpdateStart();if(m=this._img_loading)if(this._clearEventListeners(m),u.destroy(m),this._img_loading=null,m=this._jsonRequest){try{m.cancel()}catch(E){}this._jsonRequest=null}var z=w.width;m=w.height;k=z;var q=0;10<=this.version&&w.wrapAround180&&(h=h._normalize(!0));this.extentProcessor&&(q=this.extentProcessor({layer:this,extent:h,width:k}),h=q.extent,k=q.width,q=q.marginLeft||0);if(this.isPNG32)p=this._img_loading=u.create("div"),p.id=w.id+"_"+this.id+"_"+(new Date).getTime(),
n.set(p,{position:"absolute",left:"0px",top:"0px",width:k+"px",height:m+"px"}),w=p.appendChild(u.create("div")),n.set(w,{opacity:0,width:k+"px",height:m+"px"}),this.getImageUrl(h,k,m,this._divAlphaImageFunc),p=null;else{var v=this._img_loading=u.create("img"),B=r._css.names,D=d("ie"),x={position:"absolute",width:k+"px",height:m+"px"};v.setAttribute("decoding","sync");8===D&&(x.opacity=this.opacity);null!=q&&0!==q&&(x.marginLeft=q+"px");"css-transforms"===w.navigationMode?(x[B.transform]=r._css.translate(-this._left,
-this._top),v._tdx=-this._left,v._tdy=-this._top,x[B.transition]=B.transformName+" "+e+"ms ease",this.extentProcessor&&(x[B.origin]=z/2-q+"px "+m/2+"px")):(x.left="0px",x.top="0px");v.id=w.id+"_"+this.id+"_"+(new Date).getTime();n.set(v,x);v._onload_connect=y.connect(v,"onload",this,"_onLoadHandler");v._onerror_connect=y.connect(v,"onerror",this,"_onErrorHandler");v._onabort_connect=y.connect(v,"onabort",this,"_onErrorHandler");this._startRect={left:C.x,top:C.y,width:p?parseInt(A.width,10):k,height:p?
parseInt(A.height,10):m,marginLeft:p?parseInt(A.marginLeft||"0",10):q,zoom:A&&A.zoom?parseFloat(A.zoom):1};this.getImageUrl(h,k,m,this._imgSrcFunc);v=null}}},_onTimeExtentChangeHandler:function(h){this.suspended||(this._setTime(h),this.refresh(!0))},getImageUrl:function(h,k,m,w){},_imgSrcFunc:function(h){this._img_loading.src=h},_divAlphaImageFunc:function(h){n.set(this._img_loading,"filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+h+"', sizingMethod\x3d'scale')");this._onLoadHandler({currentTarget:this._img_loading})},
_onLoadHandler:function(h){h=h.currentTarget;var k=this._map;this._clearEventListeners(h);!k||k.__panning||k.__zooming?u.destroy(h):(this._img&&this._div.removeChild(this._img),this._img=h,k=h.style,this._startRect={left:0,top:0,width:parseInt(k.width,10),height:parseInt(k.height,10),marginLeft:parseInt(k.marginLeft||"0",10),zoom:1},this._div.appendChild(h),this.suspended||b.show(this._div),this._img_loading=null,h=this._dragOrigin,h.x=h.y=0,this.onUpdate());this._fireUpdateEnd()},_onErrorHandler:function(h){h=
h.currentTarget;n.set(h,"visibility","hidden");this._clearEventListeners(h);h=Error("Unable to load image: "+h.src);this.onError(h);this._fireUpdateEnd(h)},_clearEventListeners:function(h){y.disconnect(h._onload_connect);y.disconnect(h._onerror_connect);y.disconnect(h._onabort_connect);h._onload_connect=h._onerror_connect=h._onabort_connect=null},setUseMapTime:function(h,k){this.useMapTime=h;this._toggleTime();k||this.refresh(!0)},refresh:function(){this._map&&this._onExtentChangeHandler(this._map.extent)},
_onScaleHandler:function(h,k){var m={},w=r._css.names,p=this._img;if(p){n.set(p,w.transition,k?"none":w.transformName+" "+e+"ms ease");p._matrix=h;h=p._multiply?t.multiply(h,p._multiply):h;if(p._tdx||p._tdy)h=t.multiply(h,{xx:1,xy:0,yx:0,yy:1,dx:p._tdx,dy:p._tdy});m[w.transform]=r._css.matrix(h);n.set(p,m)}},_onZoomHandler:function(h,k,m){h=this._startRect;var w=h.width*k,p=h.height*k,A=h.marginLeft*k,C=this._img,z=d("ie");C&&(z&&8>z?n.set(C,{left:h.left-(w-h.width)*(m.x-h.left)/h.width+"px",top:h.top-
(p-h.height)*(m.y-h.top)/h.height+"px",zoom:k*h.zoom}):n.set(C,{left:h.left-(w-h.width)*(m.x-h.left)/h.width+"px",top:h.top-(p-h.height)*(m.y-h.top)/h.height+"px",width:w+"px",height:p+"px"}),null!=A&&0!==A&&n.set(C,{marginLeft:A+"px"}))},_exportMapImage:function(h,k,m){var w=this._exportMapImageHandler;k.token=this._getToken();f({url:h,content:k,callbackParamName:"callback",load:function(p,A){w(p,A,m)},error:l.defaults.io.errorHandler})},_exportMapImageHandler:function(h,k,m){h=new g(h);this.onMapImageExport(h);
m&&m(h)},onMapImageExport:function(){},setOpacity:function(h){if(this.opacity!=h)this.onOpacityChange(this.opacity=h)},onOpacityChange:function(){},_opacityChangeHandler:function(h){var k=8===d("ie")?this._img:this._div;n.set(k,"opacity",h)}});d("extend-esri")&&a.setObject("layers.DynamicMapServiceLayer",F,r);return F})},"esri/layers/MapImage":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/has ../kernel ../domUtils ../geometry/Extent".split(" "),function(F,y,a,u,n,t,r){F=
F(null,{declaredClass:"esri.layers.MapImage",constructor:function(l){y.mixin(this,l);this.extent=new r(this.extent)},visible:!0,opacity:1,getLayer:function(){return this._layer},getNode:function(){return this._node},show:function(){if(!this.visible){this.visible=!0;var l=this._node,d=this._layer,f;if(l){if(f=d&&d._div)d.suspended||d._setPos(l,f._left,f._top),(d._active||f).appendChild(l);t.show(l)}}},hide:function(){if(this.visible){this.visible=!1;var l=this._node;l&&(t.hide(l),l.parentNode&&l.parentNode.removeChild(l))}},
setOpacity:function(l){var d=this._node;this.opacity=l;d&&a.set(d,"opacity",l)}});u("extend-esri")&&y.setObject("layers.MapImage",F,n);return F})},"esri/layers/ImageParameters":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang ../layerUtils".split(" "),function(F,y,a,u,n,t,r,l){y=y(null,{declaredClass:"esri.layers.ImageParameters",constructor:function(){this.layerDefinitions=[]},bbox:null,extent:null,width:null,height:null,dpi:null,
format:null,imageSpatialReference:null,layerOption:null,layerIds:null,transparent:null,timeExtent:null,layerTimeOptions:null,toJson:function(d){this.bbox&&F.deprecated(this.declaredClass+" : Property 'bbox' deprecated. Use property 'extent'.");var f=this.bbox||this.extent;f=f&&d&&f._normalize(!0);d=this.layerOption;var b=f?f.spatialReference.wkid||u.toJson(f.spatialReference.toJson()):null,c=this.imageSpatialReference;f={dpi:this.dpi,format:this.format,transparent:this.transparent,size:null!==this.width&&
null!==this.height?this.width+","+this.height:null,bbox:f?f.xmin+","+f.ymin+","+f.xmax+","+f.ymax:null,bboxSR:b,layers:d?d+":"+this.layerIds.join(","):null,imageSR:c?c.wkid||u.toJson(c.toJson()):b};f.layerDefs=l._serializeLayerDefinitions(this.layerDefinitions);d=this.timeExtent;f.time=d?d.toJson().join(","):null;f.layerTimeOptions=l._serializeTimeOptions(this.layerTimeOptions);return r.filter(f,function(g){if(null!==g)return!0})}});a.mixin(y,{LAYER_OPTION_SHOW:"show",LAYER_OPTION_HIDE:"hide",LAYER_OPTION_INCLUDE:"include",
LAYER_OPTION_EXCLUDE:"exclude"});n("extend-esri")&&a.setObject("layers.ImageParameters",y,t);return y})},"esri/_time":function(){define(["./TimeExtent"],function(){return{}})},"esri/layers/FeatureLayer":function(){define("require module dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/date/locale dojo/io-query dojo/dom-construct dojo/i18n dojo/when dojo/global dojo/promise/all ../sniff ../kernel ../lang ../request ../config ../deferredUtils ../promiseList ../SpatialReference ../urlUtils ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/jsonUtils ../support/expressionUtils ../arcadeProfiles/labelingProfile ../tasks/QueryTask ../tasks/query ../tasks/FeatureSet ../tasks/StatisticDefinition ../geometry/Extent ../geometry/jsonUtils ../geometry/normalizeUtils ../geometry/scaleUtils ./GraphicsLayer ./Field ./TimeInfo ./TimeReference ./FeatureType ./FeatureTemplate ./FeatureSubtype ./FeatureEditResult ./LabelClass ./support/domainUtils ./SnapshotMode ./OnDemandMode ./SelectionMode ./StreamMode ./GridLayout ./TrackManager ./HeatmapManager ./clustering/ClusterManager dojo/i18n!../nls/jsapi dojo/has!extend-esri?./agscommon".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m,w,p,A,C,z,q,v,B,D,x,E,G,I,L,Y,X,fa,sa,T,ka,ma,wa,ja,ua,Ba,M,Z,ia,qa,ya,Ca,Ia,Oa,la,N,aa,na,ca,ea,oa,ta,O,V){var pa=A.defaults,za=!!k("esri-pbf"),Ja=!!k("esri-featurelayer-pbf"),Qa=a(Ba,{declaredClass:"esri.layers.FeatureLayer",invalidParams:"query contains one or more unsupported parameters",reSQLCurrentTimestamp:/current_timestamp|current_date|current_time/i,reHostedFS:/(https?:)?\/\/services.*\.arcgis\.com/i,maxPointCountForAuto:4E3,maxRecordCountForAuto:2E3,
maxVertexCountForAuto:25E4,generalizeForScale:4E3,_eventMap:{"add-attachment-complete":["result"],"before-apply-edits":["adds","updates","deletes"],"delete-attachments-complete":["results"],"edits-complete":["adds","updates","deletes"],"query-attachment-infos-complete":["results"],"query-count-complete":["count"],"query-features-complete":["featureSet"],"query-ids-complete":["objectIds"],"query-related-features-complete":["featureSets"],"selection-complete":["features","method"],"update-end":["error",
"info"]},constructor:function(J,U){this._preventInit||this._initFeatureLayer(J,U)},_initFeatureLayer:function(J,U){U=U||{};this._tileWidth=U.tileWidth||512;this._tileHeight=U.tileHeight||512;this.i18n=V;this._featureReduction=this._featureReduction||U.featureReduction;this._featureReductionEnabled=null!=U.featureReductionEnabled?U.featureReductionEnabled:!0;this._featureUpdatesCheckEnabled=null!=U.featureUpdatesCheckEnabled?U.featureUpdatesCheckEnabled:!0;this.showLabels=null!=U.showLabels?U.showLabels:
!0;this._outFields=U.outFields;this._defnExpr=U.definitionExpression;this._loadCallback=U.loadCallback;this._trackIdField=U.trackIdField;this.objectIdField=U.objectIdField;var ha=null!=U.resolution,K=null!=U.maxAllowableOffset;this._maxOffset=this._optMaxOffset=ha||K?ha?U.resolution:U.maxAllowableOffset:this.maxAllowableOffset;this.quantize=null!=U.quantize?U.quantize:!0;this._optEditable=U.editable;this._optAutoGen=U.autoGeneralize;this.editSummaryCallback=U.editSummaryCallback;this.userId=U.userId;
this.userIsAdmin=U.userIsAdmin;this.useMapTime=U.hasOwnProperty("useMapTime")?!!U.useMapTime:!0;this.source=U.source;this.gdbVersion=U.gdbVersion;this.orderByFields=U.orderByFields;this.maxPointCountForAuto=null!=U.maxPointCountForAuto?U.maxPointCountForAuto:this.maxPointCountForAuto;this.maxRecordCountForAuto=null!=U.maxRecordCountForAuto?U.maxRecordCountForAuto:this.maxRecordCountForAuto;this.maxVertexCountForAuto=null!=U.maxVertexCountForAuto?U.maxVertexCountForAuto:this.maxVertexCountForAuto;
this.generalizeForScale=null!=U.generalizeForScale?U.generalizeForScale:this.generalizeForScale;this.queryPagination=this._optQueryPagination=null!=U.queryPagination?U.queryPagination:!0;this.multipatchOption=U.multipatchOption;this.subtypeSublayerInfo=U.subtypeSublayerInfo;this._selectedFeatures={};this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();ha=w.isDefined(U.mode)?U.mode:Qa.MODE_ONDEMAND;this._isStream&&(ha=Qa.MODE_STREAM);this.mode=ha;switch(ha){case Qa.MODE_SNAPSHOT:this.currentMode=
Qa.MODE_SNAPSHOT;this._mode=new N(this);break;case Qa.MODE_ONDEMAND:case Qa.MODE_AUTO:this.currentMode=Qa.MODE_ONDEMAND;this._mode=new aa(this);this.latticeTiling=U.latticeTiling;break;case Qa.MODE_SELECTION:this.currentMode=Qa.MODE_SELECTION;this._mode=new na(this);this._isSelOnly=!0;break;case Qa.MODE_STREAM:this.currentMode=Qa.MODE_STREAM,this._mode=new ca(this),this._isStream=!0}this._initLayer=n.hitch(this,this._initLayer);this._selectHandler=n.hitch(this,this._selectHandler);this._editable=
!1;if(n.isObject(J)&&J.layerDefinition)return this._collection=!0,this.mode=this._isStream?Qa.MODE_STREAM:Qa.MODE_SNAPSHOT,this._isStream||this._outFields||(this._outFields=["*"]),this._initLayer(J),this;this.source&&(J={source:this.source.toJson()},this._url.query=n.mixin(this._url.query,{layer:r.toJson(J)}));this.gdbVersion&&(this._url.query=n.mixin(this._url.query,{gdbVersion:this.gdbVersion}));this._task=new fa(this.url,{source:this.source,gdbVersion:this.gdbVersion});J=this._url.path;this._fserver=
!1;-1!==J.search(/\/FeatureServer\//i)&&(this._fserver=!0);this._checkFeatureLimit();(U=U.resourceInfo)?this._initLayer(U):p({url:J,content:n.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});this.registerConnectEvents()},_initLayer:function(J,U){if(J||U){this._json=J;U=this.subtypeSublayerInfo;this._findCredential();if(this.credential&&this.credential.ssl||J&&J._ssl)this._useSSL(),this._task._useSSL();this._collection&&(this._isStream||
(this.currentMode=Qa.MODE_SNAPSHOT,this._mode=new N(this)),this._featureSet=J.featureSet,this._nextId=J.nextObjectId,J=J.layerDefinition);this.version=J.currentVersion;this.version||(this.version="capabilities"in J||"drawingInfo"in J||"hasAttachments"in J||"htmlPopupType"in J||"relationships"in J||"timeInfo"in J||"typeIdField"in J||"types"in J?10:9.3);this.geometryType=J.geometryType;J.bandCount&&J.fields&&1<J.fields.length&&(this.geometryType="esriGeometryPolygon",this._isImageService=!0);"string"!==
typeof this.multipatchOption&&"esriGeometryMultiPatch"===this.geometryType&&(this.multipatchOption="xyFootprint");if(J.hasOwnProperty("capabilities")){var ha=this.capabilities=J.capabilities;ha&&-1!==ha.toLowerCase().indexOf("editing")?this._editable=!0:this._editable=!1}else this._collection||(this._editable=this._fserver);w.isDefined(this._optEditable)?(this._editable=this._optEditable,delete this._optEditable):"esriGeometryMultiPatch"===this.geometryType&&(this._editable=!1);this._isImageService&&
(this._editable=!1);this._json=r.toJson(this._json);this.isEditable()?this._setMaxOffset(null):this._canAutoGeneralize()&&(this._autoGeneralize=w.isDefined(this._optAutoGen)?this._optAutoGen:this.mode===Qa.MODE_ONDEMAND||this.mode===Qa.MODE_AUTO,delete this._optAutoGen);ha=J.effectiveMinScale||J.minScale;var K=J.effectiveMaxScale||J.maxScale;!this._hasMin&&ha&&this.setMinScale(ha);!this._hasMax&&K&&this.setMaxScale(K);this.layerId=J.id;this.name=U&&U.title||J.name;this.description=J.description;this.copyright=
J.copyrightText;this.type=J.type;this.displayField=J.displayField;this.defaultDefinitionExpression=J.definitionExpression||(J.isView?J.viewDefinitionQuery:J.definitionQuery);this.fullExtent=new ma(J.extent);this.initialExtent=new ma(this.fullExtent.toJson());this.fullExtent.spatialReference&&(this.spatialReference=new q(this.fullExtent.spatialReference.toJson()));this.defaultVisibility=J.defaultVisibility;this.editingInfo=J.editingInfo;this.supportsLastEditDate=!(!this.editingInfo||null==this.editingInfo.lastEditDate);
if("esriGeometryPoint"===this.geometryType||"esriGeometryMultipoint"===this.geometryType)this.latticeTiling=!1;this.hasM=J.hasM||!1;this.hasZ=J.hasZ||!1;this.indexedFields=J.indexedFields;this.indexes=J.indexes;this.maxRecordCount=J.maxRecordCount;this.canModifyLayer=J.canModifyLayer;this.supportsStatistics=J.supportsStatistics;this.supportsAdvancedQueries=this._collection?!1:J.supportsAdvancedQueries;this.supportsCalculate=J.supportsCalculate;this.supportsASyncCalculate=J.supportsASyncCalculate;
this.supportsAttachmentsByUploadId=J.supportsAttachmentsByUploadId;this.supportsCoordinatesQuantization=J.supportsCoordinatesQuantization;this.supportsQuantizationEditMode=J.supportsQuantizationEditMode;this.supportsFieldDescription=J.supportsFieldDescriptionProperty;this.supportsFormatPBF=J.supportedQueryFormats?-1!==t.map(J.supportedQueryFormats.toLowerCase().split(","),n.trim).indexOf("pbf"):!1;this.quantize=this.quantize&&this.supportsCoordinatesQuantization;this.hasLabels=J.hasLabels;this.canScaleSymbols=
J.canScaleSymbols;this.supportsRollbackOnFailureParameter=this.supportsRollbackOnFailure=J.supportsRollbackOnFailure;this.syncCanReturnChanges=J.syncCanReturnChanges;this.isDataVersioned=J.isDataVersioned;this.editFieldsInfo=J.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=J.ownershipBasedAccessControlForFeatures;this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures&&(this.creatorField=this.editFieldsInfo.creatorField);this.relationships=J.relationships;this.allowGeometryUpdates=
w.isDefined(J.allowGeometryUpdates)?J.allowGeometryUpdates:!0;this.allowUpdateWithoutMValues=!!J.allowUpdateWithoutMValues;this.enableZDefaults=!!J.enableZDefaults;this.zDefault=w.isDefined(J.zDefault)?J.zDefault:null;this.advancedQueryCapabilities=J.advancedQueryCapabilities||{supportsStatistics:this.supportsStatistics,supportsOrderBy:this.supportsAdvancedQueries,supportsDistinct:this.supportsAdvancedQueries};this.geometryProperties=J.hasGeometryProperties&&J.geometryProperties||null;this.url&&(this.advancedQueryCapabilities.supportsPagination=
this.advancedQueryCapabilities.supportsPagination&&(this.reHostedFS.test(this.url)||10.3<this.version));this.queryPagination=this._optQueryPagination&&this.advancedQueryCapabilities.supportsPagination;this.useStandardizedQueries=J.useStandardizedQueries;this.tileMaxRecordCount=J.tileMaxRecordCount;this.standardMaxRecordCount=J.standardMaxRecordCount;if(ha=J.dateFieldsTimeReference)this.dateFieldsTimeReference=new ia(ha);this._setMaxOffset(this._maxOffset,!0);this._isTable="Table"===this.type;K=J.fields;
this._createFields(K);if(!this.objectIdField){this.objectIdField=J.objectIdField;if(!this.objectIdField)for(K=J.fields,ha=0;ha<K.length;ha++){var S=K[ha];if("esriFieldTypeOID"===S.type){this.objectIdField=S.name;break}}this.objectIdField||this._isStream||console.debug("esri.layers.FeatureLayer: "+w.substitute({url:this.url},"objectIdField is not set [url: ${url}]"))}if(!w.isDefined(this._nextId)){K=this.objectIdField;S=-1;if(this._collection&&K){var ba=(ha=this._featureSet)&&ha.features,ra=ba?ba.length:
0;for(ha=0;ha<ra;ha++){var xa=(xa=ba[ha].attributes)&&xa[K];xa>S&&(S=xa)}}this._nextId=S+1}this.globalIdField=J.globalIdField;if(ha=this.typeIdField=J.typeIdField)if(ha=!this._getField(ha)&&this._getField(ha,!0))this.typeIdField=ha.name;this.visibilityField=J.visibilityField;if(K=J.defaultSymbol)this.defaultSymbol=E.fromJson(K);var La=this.types=[],Ha=J.types;S=(ha=this.editFieldsInfo)&&ha.creatorField;ba=ha&&ha.editorField;xa=S||ba;ra=[];if(Ha)for(ha=0;ha<Ha.length;ha++){var Va=new qa(Ha[ha]);var Ta=
Va.templates;xa&&Ta&&Ta.length&&(ra=ra.concat(Ta));La.push(Va)}Ha=J.templates;Va=this.templates=[];if(Ha)for(ha=0;ha<Ha.length;ha++)La=new ya(Ha[ha]),xa&&ra.push(La),Va.push(La);for(ha=0;ha<ra.length;ha++)if(xa=n.getObject("prototype.attributes",!1,ra[ha]))S&&delete xa[S],ba&&delete xa[ba];if(ha=J.subtypeField)this.subtypeField=(ha=this.getField(ha))?ha.name:null;this.defaultSubtypeCode=J.defaultSubtypeCode;this.subtypes=t.map(J.subtypes,function(eb){return new Ca(eb)});this._applySTSublayerInfo(U);
if(U=J.timeInfo)this.timeInfo=new Z(U),this._startTimeField=U.startTimeField,this._endTimeField=U.endTimeField,this._startTimeField&&this._endTimeField&&(this._twoTimeFields=!0),this._trackIdField?U.trackIdField=this._trackIdField:this._trackIdField=U.trackIdField;this.hasAttachments=!this._collection&&J.hasAttachments?!0:!1;this.htmlPopupType=J.htmlPopupType;U=J.drawingInfo;(ha=U&&U.labelingInfo)&&!this.labelingInfo&&(this.labelingInfo=t.map(ha,function(eb){return new Oa(eb)}),this._fixLabelExpr());
if(!this.renderer)if(U&&U.renderer){var Pa=U.renderer;this.setRenderer(L.fromJson(Pa,{geometryType:this.geometryType}));"classBreaks"===Pa.type&&this.renderer.setMaxInclusive(!0);if(!this._collection){var Xa=Pa.type;ha=[];Pa=this.renderer;switch(Xa){case "simple":ha.push(Pa.symbol);break;case "uniqueValue":case "classBreaks":ha.push(Pa.defaultSymbol),ha=ha.concat(t.map(Pa.infos,function(eb){return eb.symbol}))}ha=t.filter(ha,w.isDefined);var ab=this._url.path+"/images/",Ya=this._getToken();t.forEach(ha,
function(eb){var kb=eb.url;kb&&(-1===kb.search(/https?:/)&&-1===kb.indexOf("data:")&&(eb.url=ab+kb),Ya&&-1!==eb.url.search(/https?:/)&&(eb.url+="?token\x3d"+Ya))})}}else if(K)Ha=this.types,0<Ha.length?(Pa=new I(this.defaultSymbol,this.typeIdField),t.forEach(Ha,function(eb){Pa.addValue(eb.id,eb.symbol)})):Pa=new G(this.defaultSymbol),this.setRenderer(Pa);else if(!this._isTable){switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":Xa=new B;break;case "esriGeometryPolyline":Xa=
new D;break;case "esriGeometryPolygon":Xa=new x;break;default:this.hasXYFootprint()&&(Xa=new x)}this.setRenderer(Xa?new G(Xa):null)}Xa=U&&U.transparency||0;!this.hasOwnProperty("opacity")&&0<Xa&&(this.opacity=1-Xa/100);(k("ie")||7<=k("trident")||k("safari"))&&this.isEditable()&&10.02>this.version&&(this._ts=!0);this.statistics=J.statistics;this._fixRendererFields();this._updateRequiredFieldsFromLabelingInfo();this._checkFields();this._updateCaps();var hb=function(){null==this._maxOffset||this._isFractionalOffsetAllowed()||
this._setMaxOffset(this._maxOffset);this.loaded=!0;this.setFeatureReduction(this.getFeatureReduction());this.currentMode!==Qa.MODE_SNAPSHOT&&(this.queryPagination=!1);this.onLoad(this);var eb=this._loadCallback;eb&&(delete this._loadCallback,eb(this))};J=[];this._collection?(Xa=this._featureSet,this._featureSet=null,this._mode._drawFeatures(new T(Xa)),this._fcAdded=!0):(J.push(this._forceIdentity()),this._limitPromise&&J.push(this._limitPromise));J.push(this._evalArcadeSupport());J.length?z(J).then(n.hitch(this,
function(){hb.call(this)})):hb.call(this)}},_applySTSublayerInfo:function(J){J&&this.subtypeField&&(this.subtypeCode=J.subtypeCode,this._applySTSublayerDefinitionExpression(J),this._filterSubtypes(J),this._applySTTemplates(J),this._applySTFieldOverrides(J))},_applySTSublayerDefinitionExpression:function(J){var U=[],ha=this.getDefinitionExpression();ha&&U.push(ha);(J=J.layerDefinition&&J.layerDefinition.definitionExpression)&&U.push(J);1<U.length&&(U=t.map(U,function(K){return"("+K+")"}));this.setDefinitionExpression(U.length?
U.join(" AND "):null)},_applySTTemplates:function(J){if(J=J.layerDefinition&&J.layerDefinition.templates)this.templates=t.map(J,function(U){return new ya(U)})},_filterSubtypes:function(){this.subtypes&&(this.subtypes=t.filter(this.subtypes,function(J){return J.code===this.subtypeCode},this))},_applySTFieldOverrides:function(J){var U=J.layerDefinition&&J.layerDefinition.fieldOverrides;if(U){this.fields=t.filter(this.fields,function(K){return t.some(U,function(S){return S.name===K.name})});var ha=this.getSubtypeByCode(this.subtypeCode).domains;
this.fields.forEach(function(K){var S=t.filter(U,function(ba){return ba.name===K.name})[0];S.alias&&(K.alias=S.alias);if(!1===S.editable||K.name===this.subtypeField)K.editable=!1;ha&&(S=ha[K.name])&&"inherited"!==S.type&&(K.domain=la.fromJson(S.toJson()))},this)}},setShowLabels:function(J){var U=this.showLabels;this.showLabels=J;U!==this.showLabels&&(this._evalSurfaceType(),this.onShowLabelsChange())},onShowLabelsChange:function(){},onRendererChange:function(J){this.inherited(arguments);var U=this._map;
this._ager=!!(J&&J.observationAger&&J.observationRenderer);J&&"colors"in J&&"blurRadius"in J&&"maxPixelIntensity"in J?(this._evalSurfaceType(!0),"esriGeometryPoint"==this.geometryType&&!this._heatmapManager&&U&&(this._heatmapManager=new ta(this),this._heatmapManager.initialize(U))):this.renderer&&this.renderer.getRendererInfo?t.some(this.renderer.rendererInfos,function(S){return S.renderer&&"colors"in S.renderer&&"blurRadius"in S.renderer})||(this._heatmapManager=null):this._heatmapManager=null;this.timeInfo&&
U&&(J&&(J.latestObservationRenderer||J.trackRenderer)?this._trackManager||(this._trackManager=new oa(this),this._trackManager.initialize(U),this._childLayer=this._trackManager.container,this._mode._applyTimeFilter()):this._trackManager&&!this._isStream&&(this._trackManager.destroy(),this._trackManager=null));if(J){var ha=[];U=t.filter([J,J.observationRenderer,J.latestObservationRenderer,J.trackRenderer],w.isDefined);var K=function(S){return null!=S&&"function"!=typeof S&&S};t.forEach(U,function(S){var ba=
K(S.attributeField),ra=K(S.attributeField2);S=K(S.attributeField3);!1!==ba&&ha.push(ba);!1!==ra&&ha.push(ra);!1!==S&&ha.push(S)});this._requiredFields=ha}else this._requiredFields=[];this.loaded&&(this._fixRendererFields(),this._checkFields(this._requiredFields),this._collection&&(this._typesDirty=!0))},setFeatureReduction:function(J){J&&(J=n.mixin({},J),null!=J.clusterSize&&null==J.clusterRadius&&(J.clusterRadius=J.clusterSize),delete J.clusterSize);this.loaded?this._isFeatureReductionSupported(J)?
this._featureReduction=J:(this._featureReduction=null,J&&console.log("Clustering is not supported for this layer: "+this.url)):this._featureReduction=J;this._evalFeatureReduction(this._featureReduction)},hasFeatureReduction:function(){return!!this._featureReduction},getFeatureReduction:function(){var J=this._featureReduction;if(J){J=n.mixin({},J);var U=this._clusterManager;if(U=U&&U.aggregationInfo)J.clusterRadius=U.clusterRadius,J.infoTemplate=U.infoTemplate}return J},isFeatureReductionActive:function(){var J=
this._clusterManager;return!!(J&&J.isClusteringEnabled()&&J.isClusteringActive())},isFeatureReductionEnabled:function(){return this._featureReductionEnabled},enableFeatureReduction:function(){this._featureReductionEnabled||(this._featureReductionEnabled=!0,this._evalFeatureReduction(this._featureReduction))},disableFeatureReduction:function(){this._featureReductionEnabled&&(this._featureReductionEnabled=!1,this._evalFeatureReduction(this._featureReduction))},isFeatureReductionApplied:function(){return this.hasFeatureReduction()&&
this.isFeatureReductionEnabled()&&this._canCluster(this.getFeatureReduction())},getAggregateGraphics:function(){return this._clusterManager?this._clusterManager.getAggregateGraphics():[]},getChildGraphics:function(J){return this._clusterManager?this._clusterManager.getFeaturesInCluster(J):[]},getSingleGraphics:function(){return this._clusterManager?this._clusterManager.getSingleGraphics():[]},getFeatureReductionRenderer:function(){return this.isFeatureReductionActive()?this._clusterManager.getClusterRenderer():
null},getFeatureReductionLayer:function(){return this._clusterManager?this._clusterManager.container:null},getFeatureReductionField:function(J){var U,ha=this._clusterManager?this._clusterManager.getClusterFields():null;J=J?J.toLowerCase():"";t.some(ha,function(K){J===K.name.toLowerCase()&&(U=K);return!!U});return U},_isFeatureReductionSupported:function(J){return J&&"cluster"===J.type&&"esriGeometryPoint"===this.geometryType&&(this._collection||this._isStream||this._optQueryPagination&&this.advancedQueryCapabilities.supportsPagination)},
_isReductionCompatibleRenderer:function(J){J=J&&J.declaredClass||"";J=J.toLowerCase();return-1<J.indexOf("simplerenderer")||-1<J.indexOf("classbreaksrenderer")||-1<J.indexOf("uniquevaluerenderer")},_evalFeatureReduction:function(J){this.loaded&&this.getMap()&&(J=J||this.getFeatureReduction(),this._evalModeFromFReduction(J),J&&this.isFeatureReductionEnabled()?this._canCluster(J)?this._clusterManager?this._updateClusterManager(J):(this._clusterManager=this._createClusterManager(J),this.onFeatureReductionChange()):
(console.log("Clustering is supported only for point layers where map spatial reference is WGS84 or Web Mercator"),this._destroyClusterManager()):this._destroyClusterManager())},_canCluster:function(J){var U=this._map;if(!U)return!1;U=U.spatialReference;return this._isFeatureReductionSupported(J)&&this._isReductionCompatibleRenderer(this.renderer)&&(U.isWebMercator()||4326===U.wkid)},_createClusterManager:function(J){J=new O({layer:this,aggregationInfo:J});this._clusterHandles=[J.on("renderer-change",
n.hitch(this,function(){this.onFeatureReductionRendererChange()}))];J.initialize(this._map);return J},_updateClusterManager:function(J){var U=this._clusterManager;U&&U.setAggregationInfo(J)},_destroyClusterManager:function(J){t.forEach(this._clusterHandles,function(U){U.remove()});this._clusterHandles=null;this._clusterManager&&(this._clusterManager.destroy(J),this._clusterManager=null,this.onFeatureReductionChange())},redraw:function(){this.inherited(arguments);this._clusterManager&&this._clusterManager.redraw();
this._trackManager&&this._trackManager.container&&this._trackManager.container.redraw()},_evalSDRenderer:function(J){this.inherited(arguments);var U=this._getRenderer();this._ager=!!(U&&U.observationAger&&U.observationRenderer);this._trackManager&&this._trackManager.container&&this._trackManager.container.setRenderer(U&&U.trackRenderer);J&&this._evalFeatureReduction()},_graphicVisibilityChanged:function(J){this._clusterManager?this._clusterManager.toggleFeatureVisibility(J):this._heatmapManager&&
this._heatmapManager.redraw()},setWebGLFetchOptions:function(J){this._hasOnDemandDrillMode()&&(J=J||{},null!=J.maxDrillLevel&&(this._mode.maxDrillLevel=J.maxDrillLevel),null!=J.maxRecordCountFactor&&(this._mode.maxRecordCountFactor=J.maxRecordCountFactor),null!=J.enablePBFQuery&&(this._mode.enablePBFQuery=J.enablePBFQuery))},_isWebGLCompatible:function(){return this.loaded&&!this.isEditable()&&!this.isFeatureReductionApplied()&&(!this.labelingInfo||!1===this.showLabels)&&!this._isGeometryOperationsUsed()&&
this._isRendererSupportedInWebGL()&&this.supportsCoordinatesQuantization&&("esriGeometryPolygon"!==this.geometryType||this.advancedQueryCapabilities.supportsReturningGeometryCentroid)&&this.currentMode===Qa.MODE_ONDEMAND&&(!this._preSurfaceChangeState||this._preSurfaceChangeState.currentMode===Qa.MODE_ONDEMAND)},_isRendererSupportedInWebGL:function(){if(!this.renderer)return!1;var J=this.renderer,U=J.declaredClass?J.declaredClass.toLowerCase():"";return(-1<U.indexOf("simplerenderer")||-1<U.indexOf("classbreaksrenderer")||
-1<U.indexOf("uniquevaluerenderer"))&&this._hasWebGLCompatibleSymbols(J)&&this._hasWebGLCompatibleVVs(J)},_hasWebGLCompatibleSymbols:function(J){J=this._getAllSymbolsInRenderer(J);return!(this._hasSLSWithMarker(J)||this._hasIncompatibleSMSStyles(J)||this._hasGIFMarker(J))},_hasWebGLCompatibleVVs:function(J){return!t.some(J&&J.visualVariables,function(U){var ha=U.type;return("colorInfo"===ha||"opacityInfo"===ha)&&U.stops&&8<U.stops.length||"sizeInfo"===ha&&(U.field||U.valueExpression&&"$view.scale"!==
U.valueExpression||U.expression&&"view.scale"!==U.expression)&&U.stops&&6<U.stops.length?!0:!1})},_hasSLSWithMarker:function(J){return t.some(J,function(U){return U&&"simplelinesymbol"===U.type&&!!U.marker})},_hasIncompatibleSMSStyles:function(J){var U=void 0===k("ie")&&7==k("trident");return t.some(J,function(ha){return ha&&"simplemarkersymbol"===ha.type&&("triangle"===ha.style||"path"===ha.style&&U)})},_hasGIFMarker:function(J){var U=/\.gif$/,ha=/^image\/gif$/;return t.some(J,function(K){return K&&
"picturemarkersymbol"===K.type?U.test(K.url)||ha.test(K.contentType):!1})},_getAllSymbolsInRenderer:function(J){var U=[];J&&(U.push(J.symbol),U.push(J.defaultSymbol),t.forEach(J.infos,function(ha){U.push(ha.symbol)}),U=t.filter(U,function(ha){return!!ha}));return U},_setMap:function(J){var U=this.inherited(arguments),ha=this._mode,K=this;ha&&J.loaded&&ha.initialize(J);this.geometryType&&this.attr("data-geometry-type",this.geometryType.replace(/esriGeometry/i,"").toLowerCase());this._addHandle=this.on("graphic-node-add",
function(S){S=S.graphic.attributes;(S=K._selectedFeatures[S&&S[K.objectIdField]])&&S.attr("data-selected","")});return U},_unsetMap:function(J){this._suspendImpl(!0);this._destroyClusterManager(!1);this._trackManager&&(this._trackManager.destroy(),this._trackManager=null);u.disconnect(this._zoomConnect);u.disconnect(this._addHandle);this._zoomConnect=this._addHandle=null;this.inherited("_unsetMap",arguments)},onAttach:function(){this._evalModeFromSurface()},onRefreshTick:function(){this.isFeatureUpdatesCheckActive()&&
this._evalFeatureUpdates()},refresh:function(J){!this._needsRefresh&&J&&J.scheduled&&this.isFeatureUpdatesCheckActive()||(this._needsRefresh=!1,(J=this._mode)&&J.refresh())},setFeatureUpdatesCheckEnabled:function(J){this._featureUpdatesCheckEnabled=J},isFeatureUpdatesCheckEnabled:function(){return!!this._featureUpdatesCheckEnabled},isFeatureUpdatesCheckActive:function(){return this.supportsLastEditDate&&this.isFeatureUpdatesCheckEnabled()&&!!this.refreshInterval&&!!n.getObject("onFeatureUpdatesResult.after",
!1,this)},hasFeatureUpdates:function(){var J=new l;if(!this.supportsLastEditDate)return J.reject(Error("FeatureLayer does not support supportsLastEditDate")),J.promise;if(!this._fetchMetadataPromise||this._fetchMetadataPromise.isFulfilled())this._fetchMetadataPromise=p({url:this._url.path,content:n.mixin({f:"json"},this._url.query),callbackParamName:"callback"}).then(n.hitch(this,function(U){U=U.editingInfo.lastEditDate;var ha=this.editingInfo.lastEditDate!==U;this.editingInfo.lastEditDate=U;return ha}));
this._fetchMetadataPromise.then(function(U){J.isFulfilled()||J.resolve(U)}).otherwise(function(U){J.isFulfilled()||J.reject(U)});return J.promise},hasXYFootprint:function(){return"esriGeometryMultiPatch"===this.geometryType&&"xyFootprint"===this.multipatchOption},getOutFields:function(){return t.filter(this._getOutFields(),function(J){return"*"===J||!!this._getField(J)},this)},getField:function(J){return this._getField(J,!0)},isOutField:function(J){J=this.getField(J);if(!J)return!1;var U=this.getOutFields();
return-1<t.indexOf(U,"*")||-1<t.indexOf(U,J.name)},getFieldLabel:function(J){var U=this.infoTemplate;U=U&&U.getFieldInfo&&U.getFieldInfo(J);J=n.isFunction(J)?null:this.getField(J);var ha=U||J,K="";ha&&(K=U&&U.label||J&&J.alias||ha.name||ha.fieldName);return K},getDomain:function(J,U){var ha,K,S=(U=U&&U.feature)&&this.typeIdField&&U.attributes&&U.attributes[this.typeIdField];null!=S&&t.some(this.types,function(ba){return ba.id==S?((ha=ba.domains&&ba.domains[J])&&"inherited"===ha.type&&(ha=this._getLayerDomain(J),
K=!0),!0):!1},this);K||ha||(ha=this._getLayerDomain(J));return ha},_getLayerDomain:function(J){this._createFieldsIndex();var U=this._fieldsIndex;if(U)return U=U.caseSensitive,(U=U.get(J))?U.domain:null;var ha;t.some(this.fields,function(K){K.name===J&&(ha=K.domain);return!!ha});return ha},getType:function(J){return this.getTypeById(J&&this.typeIdField&&J.attributes&&J.attributes[this.typeIdField])},getTypeById:function(J){var U;t.some(this.types,function(ha){ha.id==J&&(U=ha);return!!U});return U},
getSubtypeByCode:function(J){var U;t.some(this.subtypes,function(ha){ha.code==J&&(U=ha);return!!U});return U},setEditable:function(J){if(!this._collection)return console.log("FeatureLayer:setEditable - this functionality is not yet supported for layer in a feature service"),this;if(this._isImageService)return this;if(!this.loaded)return this._optEditable=J,this;var U=this._editable;this._editable=J;this._updateCaps();if(U!==J)this.onCapabilitiesChange();return this},getEditCapabilities:function(J){var U=
{canCreate:!1,canUpdate:!1,canDelete:!1,canUpdateGeometry:!1};if(!this.loaded||!this.isEditable())return U;var ha=J&&J.feature;J=J&&J.userId||this.getUserId();var K=t.map(this.capabilities?this.capabilities.toLowerCase().split(","):[],n.trim),S=(U=-1<t.indexOf(K,"editing"))&&-1<t.indexOf(K,"create"),ba=U&&-1<t.indexOf(K,"update");K=U&&-1<t.indexOf(K,"delete");var ra=this.ownershipBasedAccessControlForFeatures,xa=this.editFieldsInfo,La=xa&&xa.creatorField;xa=xa&&xa.realm;ha=(ha=ha&&ha.attributes)&&
La?ha[La]:void 0;var Ha=!!this.userIsAdmin;La=!ra||Ha||!(!ra.allowOthersToUpdate&&!ra.allowUpdateToOthers);var Va=!ra||Ha||!(!ra.allowOthersToDelete&&!ra.allowDeleteToOthers),Ta=!ra||Ha||!ra.hasOwnProperty("allowAnonymousToUpdate")||ra.allowAnonymousToUpdate;ra=!ra||Ha||!ra.hasOwnProperty("allowAnonymousToDelete")||ra.allowAnonymousToDelete;J&&xa&&(J=J+"@"+xa);if(Ha||U&&!(S||ba||K))S=ba=K=!0;U={canCreate:S,canUpdate:ba,canDelete:K,canUpdateGeometry:Ha||this.allowGeometryUpdates};J||(U.canUpdate=U.canUpdate&&
Ta,U.canDelete=U.canDelete&&ra);null===ha?(U.canUpdate=U.canUpdate&&La,U.canDelete=U.canDelete&&Va):""!==ha&&ha&&J.toLowerCase()!==ha.toLowerCase()&&(U.canUpdate=U.canUpdate&&La,U.canDelete=U.canDelete&&Va);return U},getUserId:function(){var J;this.loaded&&(J=this.credential&&this.credential.userId||this.userId||"");return J},setUserIsAdmin:function(J){this.userIsAdmin=J},setEditSummaryCallback:function(J){this.editSummaryCallback=J},getEditSummary:function(J,U,ha){ha=w.isDefined(ha)?ha:(new Date).getTime();
var K="";ha=this.getEditInfo(J,U,ha);(U=U&&U.callback||this.editSummaryCallback)&&(ha=U(J,ha)||"");if(n.isString(ha))K=ha;else{if(ha){J=ha.action;U=ha.userId;var S=ha.timeValue,ba=0;J&&ba++;U&&ba++;w.isDefined(S)&&ba++;1<ba&&(K=("edit"===J?"edit":"create")+(U?"User":"")+(w.isDefined(S)?ha.displayPattern:""))}K=K&&w.substitute(ha,this.i18n.layers.FeatureLayer[K])}return K},getEditInfo:function(J,U,ha){if(this.loaded){ha=w.isDefined(ha)?ha:(new Date).getTime();U=U&&U.action||"last";var K=this.editFieldsInfo,
S=K&&K.creatorField,ba=K&&K.creationDateField,ra=K&&K.editorField;K=K&&K.editDateField;ra=(J=J&&J.attributes)&&ra?J[ra]:void 0;K=J&&K?J[K]:null;S=this._getEditData(J&&S?J[S]:void 0,J&&ba?J[ba]:null,ha);ha=this._getEditData(ra,K,ha);switch(U){case "creation":var xa=S;break;case "edit":xa=ha;break;case "last":xa=ha||S}xa&&(xa.action=xa===ha?"edit":"creation");return xa}},_getEditData:function(J,U,ha){if(w.isDefined(U)){var K=ha-U;var S=0>K?"Full":6E4>K?"Seconds":12E4>K?"Minute":36E5>K?"Minutes":72E5>
K?"Hour":864E5>K?"Hours":6048E5>K?"WeekDay":"Full"}if(void 0!==J||S){var ba=ba||{};ba.userId=J;S&&(J=d.format,ha=new Date(U),ba.minutes=Math.floor(K/6E4),ba.hours=Math.floor(K/36E5),ba.weekDay=J(ha,{datePattern:"EEEE",selector:"date"}),ba.formattedDate=J(ha,{selector:"date"}),ba.formattedTime=J(ha,{selector:"time"}),ba.displayPattern=S,ba.timeValue=U)}return ba},isEditable:function(){return!(!this._editable&&!this.userIsAdmin)},isQueryable:function(){var J=t.map(this.capabilities?this.capabilities.toLowerCase().split(","):
[],n.trim);return this._isStream||this.userIsAdmin||this._collection||-1!==t.indexOf(J,"query")||-1!==t.indexOf(J,"catalog")},setResolution:function(J){return this.setMaxAllowableOffset(J)},setMaxAllowableOffset:function(J){this.isEditable()||(this._optMaxOffset=J,this._setMaxOffset(J,!0));return this},_resetMaxAllowableOffset:function(){this.setMaxAllowableOffset(this._optMaxOffset);this._prevScale=null;this._refreshMaxAllowableOffset()},_refreshMaxAllowableOffset:function(){this._calcMaxOffsetForAutoSnapshot();
this._updateMaxOffset();this._needsRefresh=!1},getResolution:function(){return this.getMaxAllowableOffset()},getMaxAllowableOffset:function(){var J=this._quantizationParameters?this._quantizationParameters.tolerance:void 0;return null!=this._maxOffset?this._maxOffset:J},_setMaxOffset:function(J,U){if(null==J)return delete this._maxOffset,delete this._quantizationParameters,this;this.quantize&&this.supportsCoordinatesQuantization?("esriGeometryPolyline"===this.geometryType?this._maxOffset=J:delete this._maxOffset,
this._quantizationParameters=J?{mode:"view",originPosition:"upperLeft",tolerance:J,extent:this.fullExtent}:null):(this._isFractionalOffsetAllowed()&&U||(J=Math.floor(J)),isNaN(J)||0===J?delete this._maxOffset:this._maxOffset=J,delete this._quantizationParameters);return this},_isFractionalOffsetAllowed:function(){return null==this.version||10.1<=this.version||navigator.languages&&this._isLangWithDot(navigator.languages[0])},_isLangWithDot:function(J){J=(J=J&&J.split("-"))&&J[0]&&J[0].toLowerCase();
return-1!==t.indexOf(this._langsWithDot,J)},_langsWithDot:"ar en et fr he ja ko th vi zh".split(" "),setAutoGeneralize:function(J){this.loaded?this._canAutoGeneralize()&&((this._autoGeneralize=J)?(this._isAutoSnapshotMode()&&(this._prevScale=null),this._updateMaxOffset()):this._setMaxOffset(null)):this._optAutoGen=J;return this},_canAutoGeneralize:function(){return!this.isEditable()&&this.mode!==Qa.MODE_SNAPSHOT},setGDBVersion:function(J){this._collection||J===this.gdbVersion||!J&&!this.gdbVersion||
(this.gdbVersion=J,this._task.gdbVersion=J,this._url.query=n.mixin(this._url.query,{gdbVersion:J}),this.loaded&&(this.clearSelection(),this._map&&this.refresh()),this.onGDBVersionChange());return this},hasAllFeatures:function(){return this._mode?this._mode.hasAllFeatures():!0},hasUpdateError:function(){return this._mode?this._mode.hasUpdateError():!1},setDefinitionExpression:function(J){this._defnExpr=J;this._hasPendingLimitQuery()||((J=this._checkFeatureLimit())?this._evalModeAndApplyDefnExpr(J):
this._applyDefnExpr());return this},_applyDefnExpr:function(){var J=this._mode;J&&J.propertyChangeHandler(1)},_evalModeAndApplyDefnExpr:function(J){J.then(n.hitch(this,function(U){U&&(U instanceof Error||!U.modeChanged)&&this._applyDefnExpr()}))},getDefinitionExpression:function(){return this._defnExpr},hasDefinitionExpressionWithCurrentTimestamp:function(){return this.reSQLCurrentTimestamp.test(this.getDefinitionExpression())},setTimeDefinition:function(J){this._isSnapshotMode()?(this._timeDefn=
J,(J=this._mode)&&J.propertyChangeHandler(2)):console.log("FeatureLayer.setTimeDefinition: layer in on-demand or selection mode does not support time definitions. Layer id \x3d "+this.id+", Layer URL \x3d "+this.url);return this},getTimeDefinition:function(){return this._timeDefn},setTimeOffset:function(J,U){this._timeOffset=J;this._timeOffsetUnits=U;(J=this._mode)&&J.propertyChangeHandler(0);return this},setUseMapTime:function(J){this.useMapTime=J;this._toggleTime(!this.suspended);(J=this._mode)&&
J.propertyChangeHandler(0)},selectFeatures:function(J,U,ha,K){U=U||Qa.SELECTION_NEW;this._hasSelectionError=this._hasPartialSelectedFeatures=!1;J=this._getShallowClone(J);var S=this._map,ba=this,ra=C._fixDfd(new l(C._dfdCanceller));J.outFields=this.getOutFields();J.returnGeometry=!0;J.multipatchOption=this.multipatchOption;S&&(J.outSpatialReference=new q(S.spatialReference.toJson()));if(!this._applyQueryFilters(J,!0)){var xa={features:[]};this._selectHandler(xa,U,ha,K,ra);return ra}if(S=this._canDoClientSideQuery(J))ra._pendingDfd=
g(this._doQuery(J,S)),ra._pendingDfd.then(function(Ha){xa={features:Ha};ba._selectHandler(xa,U,ha,K,ra)});else{if(this._collection)return this._resolve([Error("FeatureLayer::selectFeatures - "+this.invalidParams)],null,K,ra,!0),ra;if(this.loaded&&!this.isQueryable())return this._resolve([Error("Layer does not support query capability.")],null,K,ra,!0),ra;var La=this;this._ts&&(J._ts=(new Date).getTime());S=this._canFetchPBFForQuery(J);this._enableEditModeQuantization(J,S);(ra._pendingDfd=this._task.execute(J,
null,null,S?{format:"pbf"}:null)).addCallbacks(function(Ha){La._selectHandler(Ha,U,ha,K,ra)},function(Ha){La._hasPartialSelectedFeatures=!0;La._hasSelectionError=!0;La._resolve([Ha],null,K,ra,!0)})}return ra},getSelectedFeatures:function(){var J=this._selectedFeatures,U=[],ha;for(ha in J)J.hasOwnProperty(ha)&&U.push(J[ha]);return U},clearSelection:function(J){var U=this._selectedFeatures,ha=this._mode,K;for(K in U)U.hasOwnProperty(K)&&(this._unSelectFeatureIIf(K,ha),ha._removeFeatureIIf(K));this._selectedFeatures=
{};this._isSelOnly&&ha._applyTimeFilter(!0);if(!J)this.onSelectionClear();return this},setSelectionSymbol:function(J){if(this._selectionSymbol=J){var U=this._selectedFeatures,ha;for(ha in U)U.hasOwnProperty(ha)&&U[ha].setSymbol(J)}return this},getSelectionSymbol:function(){return this._selectionSymbol},setLabelingInfo:function(J){J?(this.labelingInfo=J,this._fixLabelExpr()):delete this.labelingInfo;this._collection&&(this._typesDirty=!0);this._evalSurfaceType();this.onLabelingInfoChange()},_fixLabelExpr:function(){var J=
/\[([^\[\]]+)\]/ig,U,ha=this,K=function(S,ba){S=ha._getField(ba,!0);return"["+(S&&S.name||ba)+"]"};t.forEach(this.labelingInfo,function(S){if(U=S.labelExpression)S.labelExpression=U.replace(J,K)})},_updateRequiredFieldsFromLabelingInfo:function(){var J=[];t.forEach(this.labelingInfo,function(U){var ha=U.labelExpressionInfo;if(U.labelExpression){var K=/[\[\]]/ig;U=U.labelExpression.match(/\[[^\[\]]+\]/ig);(U=t.map(U,function(ba){return ba.replace(K,"")}))&&(J=J.concat(U))}if(ha){if(ha.value){var S=
/[\{\}]/ig;U=ha.value.match(/\{[^\{\}]+\}/ig);(U=t.map(U,function(ba){return ba.replace(S,"")}))&&(J=J.concat(U))}ha.expression&&(U=t.map(this.fields,function(ba){return ba.name},this),J=J.concat(Y.extractFieldNames(ha.expression,U)))}},this);J=t.map(J,function(U){var ha=this.getField(U);return ha?ha.name:U},this);this._requiredFields&&(this._requiredFields=this._requiredFields.concat(J))},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(J,U,ha,K,S,ba){var ra=ba.assembly,
xa=ba.dfd;this._applyNormalized(J,ra&&ra[0]);this._applyNormalized(U,ra&&ra[1]);this.onBeforeApplyEdits(J,U,ha);var La={},Ha=this.objectIdField;ra={f:"json"};var Va=!1;if(this._collection)ba={},ba.addResults=J?t.map(J,function(){Va=!0;return{objectId:this._nextId++,success:!0}},this):null,ba.updateResults=U?t.map(U,function(Xa){Va=!0;var ab=Xa.attributes[Ha];La[ab]=Xa;return{objectId:ab,success:!0}},this):null,ba.deleteResults=ha?t.map(ha,function(Xa){Va=!0;return{objectId:Xa.attributes[Ha],success:!0}},
this):null,Va?this._editHandler(ba,J,La,K,S,xa):this._resolve([ba.addResults,ba.updateResults,ba.deleteResults],null,K,xa);else{J&&0<J.length&&(ra.adds=this._convertFeaturesToJson(J,0,1),Va=!0);if(U&&0<U.length){for(ba=0;ba<U.length;ba++){var Ta=U[ba];La[Ta.attributes[Ha]]=Ta}ra.updates=this._convertFeaturesToJson(U,0,0,1);Va=!0}if(ha&&0<ha.length){U=[];for(ba=0;ba<ha.length;ba++)U.push(ha[ba].attributes[Ha]);ra.deletes=U.join(",");Va=!0}if(Va){var Pa=this;return p({url:this._url.path+"/applyEdits",
content:n.mixin(ra,this._url.query),callbackParamName:"callback",load:function(Xa){Pa._editHandler(Xa,J,La,K,S,xa)},error:function(Xa){Pa._resolve([Xa],null,S,xa,!0)}},{usePost:!0})}this._resolve([],null,K,xa)}},queryFeatures:function(J,U,ha,K){return this._query("execute","onQueryFeaturesComplete",J,U,ha,K)},queryRelatedFeatures:function(J,U,ha){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",J,U,ha)},queryIds:function(J,U,ha,K){return this._query("executeForIds","onQueryIdsComplete",
J,U,ha,K)},queryCount:function(J,U,ha,K){return this._query("executeForCount","onQueryCountComplete",J,U,ha,K)},queryExtent:function(J,U,ha,K){return this._query("executeForExtent","onQueryExtentComplete",J,U,ha,K)},queryAttachmentInfos:function(J,U,ha){var K=this._url.path+"/"+J+"/attachments",S=new l(C._dfdCanceller),ba=this;K=v.normalize(K);S._pendingDfd=p({url:K,content:n.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(ra){ra=ra.attachmentInfos;var xa;t.forEach(ra,
function(La){xa=f.objectToQuery({gdbVersion:ba._url.query&&ba._url.query.gdbVersion,layer:ba._url.query&&ba._url.query.layer,token:ba._getToken()});La.url=K+"/"+La.id+(xa?"?"+xa:"");La.objectId=J});ba._resolve([ra],"onQueryAttachmentInfosComplete",U,S)},error:function(ra){ba._resolve([ra],null,ha,S,!0)}});return S},addAttachment:function(J,U,ha,K){return this._sendAttachment("add",J,U,ha,K)},updateAttachment:function(J,U,ha,K,S){ha.appendChild(b.create("input",{type:"hidden",name:"attachmentId",value:U}));
return this._sendAttachment("update",J,ha,K,S)},deleteAttachments:function(J,U,ha,K){var S=this._url.path+"/"+J+"/deleteAttachments",ba=new l(C._dfdCanceller),ra=this;U={f:"json",attachmentIds:U.join(",")};ba._pendingDfd=p({url:S,content:n.mixin(U,this._url.query),callbackParamName:"callback",load:n.hitch(this,function(xa){xa=xa.deleteAttachmentResults;xa=t.map(xa,function(La){La=new Ia(La);La.attachmentId=La.objectId;La.objectId=J;return La});ra._resolve([xa],"onDeleteAttachmentsComplete",ha,ba)}),
error:function(xa){ra._resolve([xa],null,K,ba,!0)}},{usePost:!0});return ba},addType:function(J){var U=this.types;if(U){if(t.some(U,function(ha){return ha.id==J.id?!0:!1}))return!1;U.push(J)}else this.types=[J];return this._typesDirty=!0},deleteType:function(J){if(this._collection){var U=this.types;if(U){var ha=-1;t.some(U,function(K,S){return K.id==J?(ha=S,!0):!1});if(-1<ha)return this._typesDirty=!0,U.splice(ha,1)[0]}}},toJson:function(){var J=this._cloneJson();if(J){J=J.layerDefinition?J:{layerDefinition:J};
var U=J.layerDefinition,ha=this._collection;this._updateLayerDefinition(U);var K=null;if(!ha||this._fcAdded)K={geometryType:U.geometryType,features:this._convertFeaturesToJson(this.graphics,!0)};J.featureSet=n.mixin({},J.featureSet||{},K);if(J.featureSet.transform){var S=J.featureSet.transform;delete J.featureSet.transform;K=new T(J.featureSet);K.quantize(S);J.featureSet=K.toJson()}ha&&(J.nextObjectId=this._nextId,U.capabilities=this.capabilities);return J}},getLayerDefinition:function(){var J=this._cloneJson();
(J=J?J.layerDefinition||J:null)&&this._updateLayerDefinition(J);return J},getFeatureCollectionLayer:function(J){var U=new l,ha=this.getLayerDefinition();if(!ha)return U.reject(Error("layerDefinition not available")),U.promise;J=J||[];var K=new Qa({layerDefinition:ha,featureSet:{geometryType:ha.geometryType,features:t.map(J,function(ra){return ra.toJson()})}}),S=K.on("load",function(){S.remove();ba.remove();U.resolve(K)}),ba=K.on("error",function(){K.loaded||(S.remove(),ba.remove(),U.reject(K.loadError))});
return U.promise},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryExtentComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},
onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},onLabelingInfoChange:function(){},onFeatureReductionRendererChange:function(){},onFeatureReductionChange:function(){},onFeatureUpdatesResult:function(){},_cloneJson:function(){var J=this._json;return n.isString(J)?r.fromJson(J):n.clone(J)},_updateLayerDefinition:function(J){if(this._collection&&this._typesDirty){J.types=t.map(this.types||[],function(S){return S.toJson()});var U=this.renderer,ha=this.labelingInfo,K=J.drawingInfo;!U&&
!ha||K||(K=J.drawingInfo={});K&&U&&-1===U.declaredClass.indexOf("TemporalRenderer")&&(K.renderer=U.toJson());ha&&(K.labelingInfo=t.map(ha,function(S){return S.toJson()}))}},_evalFeatureUpdates:function(){if(!this._featureUpdatesPromise||this._featureUpdatesPromise.isFulfilled())this._featureUpdatesPromise=this.hasFeatureUpdates().otherwise(function(J){return!(J&&"cancel"===J.dojoType)}).always(n.hitch(this,function(J){this._featureUpdatesPromise=null;this.onFeatureUpdatesResult({hasUpdates:J})}))},
_evalRefresh:function(J){(J.hasUpdates||this.hasDefinitionExpressionWithCurrentTimestamp())&&this.refresh()},_evalArcadeSupport:function(){var J=new l;setTimeout(n.hitch(this,function(){this._initializeArcadeEngine().always(function(){J.resolve()})}),0);return J.promise},_initializeArcadeEngine:function(){var J=[],U=this.infoTemplate;U&&U.initializeArcadeEngine&&J.push(U.initializeArcadeEngine());(U=this.renderer)&&U.initializeArcadeEngine&&J.push(U.initializeArcadeEngine());var ha=[];t.forEach(this.labelingInfo,
function(K){(K=K.labelExpressionInfo)&&K.expression&&ha.push(K.expression)});J.push(X.initialize(ha));return z(J)},_isGeometryOperationsUsed:function(){var J=this.infoTemplate,U=this.renderer,ha=this.labelingInfo;return J&&J.hasGeometryOperations&&J.hasGeometryOperations()||U&&U.hasGeometryOperations&&U.hasGeometryOperations()||t.some(ha,function(K){return Y.hasGeometryOperations(K.labelExpressionInfo&&K.labelExpressionInfo.expression)})?!0:!1},_forceIdentity:function(){var J=new l,U=this,ha=this._url&&
this._url.path;var K=ha&&ha.toLowerCase().indexOf("/rest/services");var S=this.editFieldsInfo;S=S&&(S.creatorField||S.editorField);(this.userIsAdmin||S)&&!this._getToken()&&-1<K&&m.id?(K=ha.substring(0,K)+"/rest/info",p({url:K,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(ba){if(ba.owningSystemUrl)return m.id.checkSignInStatus(ba.owningSystemUrl+"/sharing")}).then(function(ba){if(ba)return m.id.getCredential(ha)}).then(function(ba){ba&&U._findCredential()}).always(function(){J.resolve()})):
J.resolve();return J.promise},_isSnapshotMode:function(){return this._mode?this._mode.isInstanceOf(N):!1},_isOnDemandMode:function(){return this._mode?this._mode.isInstanceOf(aa):!1},_isAutoSnapshotMode:function(){return this._isAutoModeEnabled()&&this.currentMode===Qa.MODE_SNAPSHOT},_getMaxFeaturesForAutoSnapshotMode:function(){var J=this.geometryType;if("esriGeometryPolyline"===J||"esriGeometryPolygon"===J||"esriGeometryMultipoint"===J||this.hasXYFootprint())var U=this.maxRecordCountForAuto;else"esriGeometryPoint"===
J&&(U=this.maxPointCountForAuto);return U},getLastExceedsLimitResult:function(){return this._lastExceedsLimitResult},_canUseSnapshotMode:function(J){this._lastExceedsLimitResult=J=(J=J&&J.features&&J.features[0])&&J.attributes&&J.attributes.exceedslimit;return!(this.mode!==Qa.MODE_AUTO||this.isEditable()||0!==J||!(this._isPaginationAllowed()||this.maxRecordCount>=this._getMaxFeaturesForAutoSnapshotMode()))},_evalModeFromFLimit:function(J){this._canUseSnapshotMode(J)?this._enableAutoSnapshotMode():
this._enableAutoOnDemandMode()},_enableAutoSnapshotMode:function(){var J=Qa.MODE_SNAPSHOT;this.isFeatureReductionApplied()?this._updatePreFReductionState(J):this._preSurfaceChangeState?(this._updatePreSurfaceChangeState(J),this._evalSurfaceType(!0)):this.currentMode!==J&&this._setFetchMode(Qa.MODE_AUTO,J)},_enableAutoOnDemandMode:function(){var J=Qa.MODE_ONDEMAND;this.isFeatureReductionApplied()?this._updatePreFReductionState(J):this._preSurfaceChangeState?this._updatePreSurfaceChangeState(J):this.currentMode!==
J&&(this._setFetchMode(Qa.MODE_AUTO,J),this._evalSurfaceType())},_evalModeFromFReduction:function(J){this.loaded&&(J&&this.isFeatureReductionEnabled()&&this._canCluster(J)?this._enableFReductionMode():this._disableFReductionMode())},_enableFReductionMode:function(){this._evalSurfaceType(!0);if(!this._preFReductionState){var J=this.currentMode;J!==Qa.MODE_SNAPSHOT&&J!==Qa.MODE_STREAM&&J!==Qa.MODE_SELECTION&&(this._preFReductionState={mode:this.mode,currentMode:this.currentMode},this._setFetchMode(this.mode===
Qa.MODE_AUTO?Qa.MODE_AUTO:Qa.MODE_SNAPSHOT,Qa.MODE_SNAPSHOT))}},_disableFReductionMode:function(){var J=this._preFReductionState;this._preFReductionState=null;!J||J.mode===this.mode&&J.currentMode===this.currentMode||(this._setFetchMode(J.mode,J.currentMode),this._evalSurfaceType())},_updatePreFReductionState:function(J){this._preFReductionState=this._preFReductionState||{};this._preFReductionState.mode=Qa.MODE_AUTO;this._preFReductionState.currentMode=J},_evalModeFromSurface:function(){this.hasWebGLSurface()?
this._enableWebGLSurfaceMode():this._disableWebGLSurfaceMode()},_enableWebGLSurfaceMode:function(){this._preSurfaceChangeState||(this._preSurfaceChangeState={mode:this.mode,currentMode:this.currentMode},this._setFetchMode(this.mode===Qa.MODE_AUTO?Qa.MODE_AUTO:Qa.MODE_ONDEMAND,Qa.MODE_ONDEMAND,this.webglDeps.OnDemandDrillMode))},_disableWebGLSurfaceMode:function(){var J=this._preSurfaceChangeState;J&&(this._preSurfaceChangeState=null,this._setFetchMode(J.mode,J.currentMode))},_updatePreSurfaceChangeState:function(J){this._preSurfaceChangeState=
this._preSurfaceChangeState||{};this._preSurfaceChangeState.mode=Qa.MODE_AUTO;this._preSurfaceChangeState.currentMode=J},_setFetchMode:function(J,U,ha){this.clearSelection();this._mode.suspend();this._mode.destroy();this.mode=J;this.currentMode=U;ha=ha||this._getModeConstructor(U);this._mode=new ha(this);this.queryPagination=U===Qa.MODE_ONDEMAND&&-1===ha.prototype.declaredClass.toLowerCase().indexOf("ondemanddrillmode")?!1:this._isPaginationAllowed();(J=this.getMap())&&J.loaded&&(this._resetMaxAllowableOffset(),
this._mode.initialize(J),this._mode.startup())},_isPaginationAllowed:function(){return!(!this._optQueryPagination||this.loaded&&!this.advancedQueryCapabilities.supportsPagination)},_getModeConstructor:function(J){var U;J===Qa.MODE_SNAPSHOT?U=N:J===Qa.MODE_ONDEMAND&&(U=aa);return U},_hasOnDemandDrillMode:function(){var J=this._mode;J=J&&J.declaredClass;return!!(J&&-1<J.toLowerCase().indexOf("ondemanddrillmode"))},_checkFeatureLimit:function(){this._limitPromise&&(this._limitPromise.cancel(),this._limitPromise=
null);var J=this._queryLimit();J&&(this._lastExceedsLimitResult=null,this._limitPromise=J.then(n.hitch(this,function(U){var ha=this.currentMode;this._evalModeFromFLimit(U);return{modeChanged:this.currentMode!==ha}})).always(n.hitch(this,function(U){this._limitPromise=null;return U})));return this._limitPromise},_hasPendingLimitQuery:function(){return!!this._exceedsLimitTimer},_queryLimit:function(){if(this._isAutoModeEnabled()){var J,U,ha=new l(function(){clearTimeout(J);J=null;U&&!U.isFulfilled()&&
U.cancel();U=null});this._exceedsLimitTimer=J=setTimeout(n.hitch(this,function(){this._exceedsLimitTimer=null;var K=new sa,S=new ka;S.statisticType="exceedslimit";S.maxPointCount=this.maxPointCountForAuto;S.maxRecordCount=this.maxRecordCountForAuto;S.maxVertexCount=this.maxVertexCountForAuto;S.outStatisticFieldName="exceedslimit";K.outStatistics=[S];U=this.queryFeatures(K).promise.then(function(ba){ha.resolve(ba)}).otherwise(function(ba){ha.reject(ba)})}),0);return ha.promise}},_isAutoModeEnabled:function(){return this.mode===
Qa.MODE_AUTO&&this.reHostedFS.test(this.url)},_updateCaps:function(){var J=this._editable,U=n.trim(this.capabilities||""),ha=t.map(U?U.split(","):[],n.trim),K=t.map(U?U.toLowerCase().split(","):[],n.trim);U=t.indexOf(K,"editing");var S;K={Create:t.indexOf(K,"create"),Update:t.indexOf(K,"update"),Delete:t.indexOf(K,"delete")};if(J&&-1===U)ha.push("Editing");else if(!J&&-1<U){J=[U];for(S in K)-1<K[S]&&J.push(K[S]);J.sort();for(S=J.length-1;0<=S;S--)ha.splice(J[S],1)}this.capabilities=ha.join(",")},
_counter:{value:0},_getUniqueId:function(){return this._counter.value++},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(J){this._toggleTime(!1);this._refreshHandle&&(this._refreshHandle.remove(),this._refreshHandle=null);var U=this._mode;U&&(U.suspend(),J&&U.destroy())},onResume:function(J){this.inherited(arguments);this._toggleTime(!0);this._refreshHandle=this.on("feature-updates-result",n.hitch(this,this._evalRefresh));var U=this._map,ha=this._getRenderer();
if(J.firstOccurrence){if(this._fixRendererFields(),this._updateRequiredFieldsFromLabelingInfo(),this._checkFields(),this.clearSelection(),this._evalFeatureReduction(),this.timeInfo&&!this._trackManager&&(this._trackIdField||ha&&(ha.latestObservationRenderer||ha.trackRenderer))&&(this._trackManager=new oa(this),this._trackManager.initialize(U),this._childLayer=this._trackManager.container),ha&&"colors"in ha&&"blurRadius"in ha&&"maxPixelIntensity"in ha&&"esriGeometryPoint"==this.geometryType&&!this._heatmapManager&&
(this._heatmapManager=new ta(this),this._heatmapManager.initialize(U)),this._zoomConnect=u.connect(U,"onZoomEnd",this,this._zoomEndHandler),this._refreshMaxAllowableOffset(),ha=this._mode)ha._init||ha.initialize(U),ha.startup()}else this._zoomEndHandler(),this._mode&&this._mode.resume()},_zoomEndHandler:function(){var J=this._map;this._updateMaxOffset();this._prevScale=J.getScale();!this.suspended&&this._needsRefresh&&this.refresh()},_updateMaxOffset:function(){var J=this._map;J&&J.loaded&&this._autoGeneralize&&
(this._isAutoSnapshotMode()?(J=this.getMaxAllowableOffset(),this._setMaxOffset(this._getMaxOffsetForScale(),!0),this._needsRefresh||(this._needsRefresh=J!=this.getMaxAllowableOffset())):this._setMaxOffset(J.extent.getWidth()/J.width,!J.extent.spatialReference.isWebMercator()))},_getMaxOffsetForScale:function(){if(this._map){var J=this._map.getScale(),U=this._calculatedScale,ha=this._calcMaxOffset,K=this._prevScale;return J>=U&&(null==K||K<U)?ha:J<U&&(null==K||K>=U)?null:this.getMaxAllowableOffset()}},
_calcMaxOffsetForAutoSnapshot:function(){var J=this._map;if(J&&this._canAutoGeneralize()&&this._isAutoSnapshotMode()&&this._autoGeneralize&&null==this.getMaxAllowableOffset()){var U=this.generalizeForScale;this._calculatedScale=U=this.maxScale?this.maxScale:this.minScale?Math.min(U,this.minScale):Math.min(U,ua.getScale(J,this.initialExtent));this._calcMaxOffset=J.extent.getWidth()/J.width/J.getScale()*U}else this._calculatedScale=this._calcMaxOffset=void 0},_toggleTime:function(J){var U=this._map;
J&&this.timeInfo&&this.useMapTime&&U?(this._mapTimeExtent=U.timeExtent,this._timeConnect||(this._timeConnect=u.connect(U,"onTimeExtentChange",this,this._timeChangeHandler))):(this._mapTimeExtent=null,u.disconnect(this._timeConnect),this._timeConnect=null)},_timeChangeHandler:function(J){this._mapTimeExtent=J;(J=this._mode)&&J.propertyChangeHandler(0)},_getOffsettedTE:function(J){var U=this._timeOffset,ha=this._timeOffsetUnits;return J&&U&&ha?J.offset(-1*U,ha):J},_getTimeOverlap:function(J,U){return J&&
U?J.intersection(U):J||U},_getTimeFilter:function(J){var U=this.getTimeDefinition();if(U){var ha=this._getTimeOverlap(U,null);if(!ha)return[!1]}if(J){if(J=ha?this._getTimeOverlap(J,ha):J,!J)return[!1]}else J=ha;return[!0,J]},_getAttributeFilter:function(J){var U=[],ha=this.getDefinitionExpression();ha&&U.push(ha);J&&U.push(J);this.subtypeField&&this.subtypeCode&&U.push(this.subtypeField+" \x3d "+this.subtypeCode);1<U.length&&(U=t.map(U,function(K){return"("+K+")"}));return U.length?U.join(" AND "):
null},_applyQueryFilters:function(J,U){J.where=this._getAttributeFilter(J.where);J.returnGeometry&&null==J.maxAllowableOffset&&!J.quantizationParameters&&(J.maxAllowableOffset=this._maxOffset,J.quantizationParameters=this._quantizationParameters);U&&this.supportsAdvancedQueries&&(J.orderByFields=J.orderByFields||this.getOrderByFields());if(this.timeInfo)if(U=this._getTimeFilter(J.timeExtent),U[0])J.timeExtent=U[1];else return!1;return!0},_add:function(J){var U=this._selectionSymbol,ha=J.attributes,
K=this.visibilityField;U&&this._isSelOnly&&J.setSymbol(U);if(K&&ha&&ha.hasOwnProperty(K))J[ha[K]?"show":"hide"]();return this.add.apply(this,arguments)},_remove:function(){return this.remove.apply(this,arguments)},_canDoClientSideQuery:function(J,U){var ha=[],K=this._map,S;if((this._collection||!this._isTable&&K)&&!(J.text||J.where&&J.where!==this.getDefinitionExpression()||J.orderByFields&&J.orderByFields.length&&(S=this.getOrderByFields()||[])&&J.orderByFields.join()!==S.join()||J.outStatistics||
J.returnDistinctValues)){S=this._isSnapshotMode();var ba=this._isSelOnly;U=S?null:U?this._getExtentOfTiles(K.extent):K.extent;if(K=J.geometry){if(ba||J.spatialRelationship!==sa.SPATIAL_REL_INTERSECTS||"extent"!==K.type||!S&&!U.contains(K))return;ha.push(1)}if(U=J.objectIds)if(S)ha.push(2);else{K=U.length;var ra=this._mode,xa=0,La;for(La=0;La<K;La++)ra._getFeature(U[La])&&xa++;if(xa===K)ha.push(2);else return}if(this.timeInfo)if(J=J.timeExtent,U=this._mapTimeExtent,S)J&&ha.push(3);else if(ba){if(J)return}else if(U)if(-1!==
t.indexOf(ha,2))J&&ha.push(3);else if(-1!==t.indexOf(ha,1))J==U&&ha.push(3);else return;else if(0<ha.length)J&&ha.push(3);else if(J)return;return 0<ha.length?ha:null}},_getAbsMid:function(J){return F.toAbsMid?F.toAbsMid(J):y.id.replace(/\/[^\/]*$/ig,"/")+J},_doQuery:function(J,U,ha){var K=[],S=this.objectIdField,ba=this,ra=new l,xa=new l,La=this.graphics;if(-1!==t.indexOf(U,1)){var Ha=this.spatialIndex||this._map&&this._map.spatialIndex,Va,Ta=J.geometry._normalize(null,!0);null==Ha&&pa.autoSpatialIndexing?
Va=(this._map||this).addPlugin(this._getAbsMid("../plugins/spatialIndex")).then(n.hitch(this,n.partial(this._getFromIndex,Ta,Ha)),function(Pa){xa.resolve(n.hitch(this,n.partial(this._filterByExtent,La,Ta)))}):Ha&&(Va=this._getFromIndex(Ta,Ha));Va?Va.then(function(Pa){for(var Xa=0;Xa<Pa.length;Xa++)Pa[Xa].results&&(K=K.concat(Pa[Xa].results));xa.resolve(K)}).otherwise(function(Pa){xa.reject(Pa)}):xa.resolve(this._filterByExtent(La,Ta))}else xa.resolve(La);xa.then(function(Pa){K=Pa;if(-1!==t.indexOf(U,
2)){var Xa=J.objectIds;K=t.filter(K,function(ab){return-1<t.indexOf(Xa,ab.attributes[S])})}-1!==t.indexOf(U,3)&&ba.timeInfo&&(Pa=J.timeExtent,K=ba._filterByTime(K,Pa.startTime,Pa.endTime).match);ha&&(K=t.map(K,function(ab){return ab.attributes[S]},this));ra.resolve(K)});return ra},_getFromIndex:function(J,U){U=U||this.spatialIndex||this._map.spatialIndex;J instanceof Array||(J=[J]);var ha=this.id;return h(t.map(J,function(K){return U.intersects(K,ha)}))},_filterByExtent:function(J,U){for(var ha=[],
K=0,S=J.length;K<S;K++){var ba=J[K],ra=ba.geometry;ra&&(this.normalization&&U.length?(U[0].intersects(ra)||U[1].intersects(ra))&&ha.push(ba):U.intersects(ra)&&ha.push(ba))}return ha},_filterByTime:function(J,U,ha){var K=this._startTimeField,S=this._endTimeField,ba;this._twoTimeFields||(ba=K||S);var ra=w.isDefined,xa=[],La=[],Ha,Va=J.length;U=U?U.getTime():-Infinity;ha=ha?ha.getTime():Infinity;if(ba)for(Ha=0;Ha<Va;Ha++){var Ta=J[Ha];var Pa=Ta.attributes;K=Pa[ba];K>=U&&K<=ha?xa.push(Ta):La.push(Ta)}else for(Ha=
0;Ha<Va;Ha++)Ta=J[Ha],Pa=Ta.attributes,ba=Pa[K],Pa=Pa[S],ba=ra(ba)?ba:-Infinity,Pa=ra(Pa)?Pa:Infinity,ba>=U&&ba<=ha||Pa>=U&&Pa<=ha||U>=ba&&ha<=Pa?xa.push(Ta):La.push(Ta);return{match:xa,noMatch:La}},_getSizeVariables:function(J){return J&&t.filter(J.getVisualVariablesForType("sizeInfo",!1),function(U){return!(!U.field&&!U.valueExpression)})},_needClientSideSorting:function(J){return this._collection?!(!J||!J.length):t.some(J,function(U){return!!U.valueExpression})},_sortFeatures:function(J){var U=
this.renderer,ha=this._getSizeVariables(U);if(J&&1<J.length&&this._needClientSideSorting(ha)){var K=ha[0],S=this;J.sort(function(ba,ra){ba._layer||(ba._layer=S);ra._layer||(ra._layer=S);ba=U._getDataValue(ba,K,"sizeInfo");ra=U._getDataValue(ra,K,"sizeInfo");return null==ba?-1:null==ra?1:ra-ba})}return J},_resolve:function(J,U,ha,K,S){U&&this[U].apply(this,J);ha&&ha.apply(null,J);K&&C._resDfd(K,J,S)},_getShallowClone:function(J){var U=new sa,ha;for(ha in J)J.hasOwnProperty(ha)&&(U[ha]=J[ha]);return U},
_canFetchPBF:function(){return!!(za&&Ja&&this.supportsFormatPBF)},_canFetchPBFForQuery:function(J){return!(!this._canFetchPBF()||!this._isCacheHintEnabled(J)&&this._isAutoSnapshotMode()||!(J.quantizationParameters||!this.isEditable()&&this.supportsQuantizationEditMode)||J.outStatistics)},_enableEditModeQuantization:function(J,U){J&&U&&!J.quantizationParameters&&(J.quantizationParameters={mode:"edit"})},_enableCacheHint:function(J,U){var ha=this.advancedQueryCapabilities;ha&&ha.supportsQueryWithCacheHint?
null==J.cacheHint&&(J.cacheHint=!0):ha&&ha.supportsQueryWithResultType&&this.reHostedFS.test(this.url)&&!J.resultType&&(J.resultType=U||"coherent")},_isCacheHintSupported:function(){var J=this.advancedQueryCapabilities;return J?!!(J.supportsQueryWithCacheHint||J.supportsQueryWithResultType&&this.reHostedFS.test(this.url)):!1},_isCacheHintEnabled:function(J){var U=this.advancedQueryCapabilities;return J&&U?!!(U.supportsQueryWithCacheHint&&J.cacheHint||U.supportsQueryWithResultType&&this.reHostedFS.test(this.url)&&
("coherent"===J.resultType||"tile"===J.resultType)):!1},_query:function(J,U,ha,K,S,ba){var ra=this,xa=this._map;ba=ba&&ba.snapToTiles;var La=new l(C._dfdCanceller),Ha=ha,Va,Ta,Pa;if("executeRelationshipQuery"!==J){Ha=this._getShallowClone(ha);var Xa=this.getOutFields();Ha.outFields||(Ha.outFields=Xa);Ha.outFields&&Ha.outFields.length&&(Ta=-1<t.indexOf(Xa,"*")?!1:!t.every(Ha.outFields,function(Ya){return-1<t.indexOf(Xa,Ya)}));Ha.returnGeometry=ha.hasOwnProperty("returnGeometry")?ha.returnGeometry:
!ha.outStatistics;Ha.returnGeometry&&(Ha.multipatchOption=this.multipatchOption,null!=Ha.maxAllowableOffset||Ha.quantizationParameters)&&(ha=null!=Ha.maxAllowableOffset?Ha.maxAllowableOffset:Ha.quantizationParameters.tolerance,null!=ha&&ha!==this.getMaxAllowableOffset()&&(Pa=!0));xa&&(xa=xa&&xa.spatialReference,(ha=Ha.outSpatialReference)?Va=!ha.equals(xa):Ha.outSpatialReference=new q(xa.toJson()));ba&&(xa=Ha.geometry)&&"extent"===xa.type&&(Ha.geometry=this._getExtentOfTiles(xa),xa!==Ha.geometry&&
this._enableCacheHint(Ha));if(!this._applyQueryFilters(Ha,"execute"===J&&!Ha.outStatistics)){switch(J){case "execute":var ab=new T({features:[]});break;case "executeForIds":ab=[];break;case "executeForCount":ab=0;break;case "executeForExtent":ab={}}this._resolve([ab],U,K,La);return La}if(ba="executeForExtent"!==J&&!Va&&!Ta&&!Pa&&this._canDoClientSideQuery(Ha,ba))return La._pendingDfd=g(this._doQuery(Ha,ba,"executeForIds"===J||"executeForCount"===J)),La._pendingDfd.then(function(Ya){switch(J){case "execute":ab=
new T;ab.features=Ya;break;case "executeForIds":ab=Ya;break;case "executeForCount":ab=Ya.length}ra._resolve([ab],U,K,La)}),La}if(this._collection)return this._resolve([Error("FeatureLayer::_query - "+this.invalidParams)],null,S,La,!0),La;if(this.loaded&&!this.isQueryable())return this._resolve([Error("Layer does not support query capability.")],null,S,La,!0),La;this._ts&&(Ha._ts=(new Date).getTime());ba="execute"===J&&this._canFetchPBFForQuery(Ha);this._enableEditModeQuantization(Ha,ba);(La._pendingDfd=
this._task[J](Ha,null,null,ba?{format:"pbf"}:null)).addCallbacks(function(Ya){var hb=!!Ha.outStatistics||Va||Ta||Pa;if("execute"===J||"executeRelationshipQuery"===J)if("execute"===J){var eb=Ya.features;var kb=eb.length;for(--kb;0<=kb;kb--)if(eb[kb]._layer=ra,!hb&&!ra._isTable){var sb=ra._mode._getFeature(eb[kb].attributes[ra.objectIdField]);sb&&eb.splice(kb,1,sb)}}else for(sb in Ya)if(Ya.hasOwnProperty(sb))for(eb=Ya[sb].features,kb=eb.length,--kb;0<=kb;kb--)eb[kb]._layer=ra;ra._resolve([Ya],U,K,La)},
function(Ya){ra._resolve([Ya],null,S,La,!0)});return La},_getExtentOfTiles:function(J){var U=this._isOnDemandMode()&&this._mode._gridLayer||ea.createFromFeatureLayer({layer:this}),ha=this.getMap();ha=ha&&ha.getTargetExtent(J);return U&&ha&&U.getExtentOfIntersectingCells(ha)||J},_convertFeaturesToJson:function(J,U,ha,K){var S=[],ba=this._selectionSymbol,ra=this.visibilityField,xa,La=this.objectIdField;this.loaded&&(ha||K)&&(xa=t.filter(this.fields,function(ab){return!1===ab.editable&&(!K||ab.name!==
La)}));for(ha=0;ha<J.length;ha++){var Ha=J[ha],Va={},Ta=Ha.geometry,Pa=Ha.attributes,Xa=Ha.symbol;!Ta||K&&this.loaded&&!this.allowGeometryUpdates||(Va.geometry=Ta.toJson());ra?(Va.attributes=Pa=n.mixin({},Pa),Pa[ra]=Ha.visible?1:0):Pa&&(Va.attributes=n.mixin({},Pa));Va.attributes&&xa&&xa.length&&t.forEach(xa,function(ab){delete Va.attributes[ab.name]});Xa&&Xa!==ba&&(Va.symbol=Xa.toJson());S.push(Va)}return U?S:r.toJson(S)},_selectHandler:function(J,U,ha,K,S){switch(U){case Qa.SELECTION_NEW:this.clearSelection(!0);
var ba=!0;break;case Qa.SELECTION_ADD:ba=!0;break;case Qa.SELECTION_SUBTRACT:ba=!1}K=J.features;var ra=this._mode,xa=[],La=this.objectIdField;if(ba)for(ba=0;ba<K.length;ba++){var Ha=K[ba];var Va=Ha.attributes[La];Ha=ra._addFeatureIIf(Va,Ha);xa.push(Ha);this._selectFeatureIIf(Va,Ha,ra)}else for(ba=0;ba<K.length;ba++)Ha=K[ba],Va=Ha.attributes[La],this._unSelectFeatureIIf(Va,ra),Va=ra._removeFeatureIIf(Va),xa.push(Va||Ha);this._isSelOnly&&ra._applyTimeFilter(!0);this._isImageService&&10.7>this.version&&
void 0===J.exceededTransferLimit&&(J.exceededTransferLimit=K.length===this.maxRecordCount);this._hasPartialSelectedFeatures=!!J.exceededTransferLimit;this._resolve([xa,U,J.exceededTransferLimit?{queryLimitExceeded:!0}:null],"onSelectionComplete",ha,S);if(J.exceededTransferLimit)this.onQueryLimitExceeded()},_selectFeatureIIf:function(J,U,ha){var K=this._selectedFeatures,S=K[J];S||(ha._incRefCount(J),K[J]=U,this._isTable||(this._setSelectSymbol(U),U.attr("data-selected","")));return S||U},_unSelectFeatureIIf:function(J,
U){var ha=this._selectedFeatures[J];ha&&(U._decRefCount(J),delete this._selectedFeatures[J],this._isTable||(this._setUnSelectSymbol(ha),ha.attr("data-selected")));return ha},_setSelectSymbol:function(J){var U=this._selectionSymbol;U&&!this._isSelOnly&&J.setSymbol(U)},_setUnSelectSymbol:function(J){var U=this._selectionSymbol;U&&!this._isSelOnly&&U===J.symbol&&J.setSymbol(null,!0)},_getOutFields:function(){var J=[this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,
this._trackIdField].concat(this._requiredFields).concat(this.dataAttributes);J=t.filter(J,function(ha,K,S){return!!ha&&t.indexOf(S,ha)===K});var U=n.clone(this._outFields);if(U){if(-1!==t.indexOf(U,"*"))return U;t.forEach(J,function(ha){-1===t.indexOf(U,ha)&&U.push(ha)});return U}return J},_checkFields:function(J){var U=J||this._getOutFields();t.forEach(U,function(ha){"*"!==ha&&(this._getField(ha)||console.debug("esri.layers.FeatureLayer: "+w.substitute({url:this.url,field:ha},"unable to find '${field}' field in the layer 'fields' information [url: ${url}]")))},
this);J||this._isTable||this._fserver||this._collection||this._isStream||t.some(this.fields,function(ha){return ha&&"esriFieldTypeGeometry"===ha.type?!0:!1})||console.debug("esri.layers.FeatureLayer: "+w.substitute({url:this.url},"unable to find a field of type 'esriFieldTypeGeometry' in the layer 'fields' information. If you are using a map service layer, features will not have geometry [url: ${url}]"))},_fixFieldCase:function(J,U,ha){var K=J&&J[U],S;if(K&&!n.isFunction(K)){if(S=!this._getField(K)&&
this._getField(K,!0))K=J[U]=S.name;ha&&ha.push(K)}return K},_fixRendererFields:function(){var J=this.renderer;this._orderBy=null;this._requiredFields=[];if(J&&0<this.fields.length){var U=[],ha;J=t.filter([J,J.observationRenderer,J.latestObservationRenderer,J.trackRenderer],w.isDefined);var K=[].concat(J);t.forEach(J,function(S){t.forEach(S.rendererInfos,function(ba){ba.renderer&&K.push(ba.renderer)})});t.forEach(K,function(S){this._fixFieldCase(S,"attributeField",U);this._fixFieldCase(S,"attributeField2",
U);this._fixFieldCase(S,"attributeField3",U);this._fixFieldCase(S.rotationInfo,"field",U);(ha=this._fixFieldCase(S.sizeInfo,"field",U))&&!this._orderBy&&(this._orderBy=[ha+" DESC"]);this._fixFieldCase(S.sizeInfo,"normalizationField",U);this._fixFieldCase(S.colorInfo,"field",U);this._fixFieldCase(S.colorInfo,"normalizationField",U);this._fixFieldCase(S.field,"field",U);this._fixFieldCase(S.opacityInfo,"field",U);this._fixFieldCase(S.opacityInfo,"normalizationField",U);t.forEach(S.visualVariables,function(ra){ha=
this._fixFieldCase(ra,"field",U);"sizeInfo"===ra.type&&ha&&!this._orderBy&&(this._orderBy=[ha+" DESC"]);this._fixFieldCase(ra,"normalizationField",U)},this);var ba=t.map(this.fields,function(ra){return ra.name},this);ba=t.map(S.getFieldsUsedInExpressions(ba),function(ra){var xa=this.getField(ra);return xa?xa.name:ra},this);U=U.concat(ba);this._orderBy||!S.addBreak||n.isFunction(S.attributeField)||!S.backgroundFillSymbol&&!this._hasSizeDiff(S)||(this._orderBy=[S.attributeField+" DESC"])},this);this._requiredFields=
t.filter(U,w.isDefined)}},_hasSizeDiff:function(J){var U=Number.MAX_VALUE,ha=-Number.MAX_VALUE,K,S;t.forEach(J.infos,function(ba){if(S=ba.symbol){K=0;switch(S.type){case "simplemarkersymbol":K=S.size;break;case "picturemarkersymbol":K=(S.width+S.height)/2;break;case "simplelinesymbol":case "cartographiclinesymbol":K=S.width;break;case "simplefillsymbol":case "picturefillsymbol":K=S.outline&&S.outline.width}K&&(U=Math.min(U,K),ha=Math.max(ha,K))}});return U!==Number.MAX_VALUE&&ha!==-Number.MAX_VALUE&&
1<Math.abs(ha-U)},getOrderByFields:function(){var J=this.orderByFields||this._orderBy;return this.supportsAdvancedQueries&&J?t.filter(J,function(U){U=U.split(" ")[0];return!!this._getField(U,!0)},this):null},_createFields:function(J){var U=J?J.length:0,ha,K=[];for(ha=0;ha<U;ha++)K.push(new M(J[ha]));this.fields=K},_createFieldsIndex:function(){if(this._fieldsIndexDirty){var J=this.fields,U=J?J.length:0;if(50<U&&this._canUseFieldsIndex()){var ha=new Map;for(var K=new Map,S=0;S<U;S++){var ba=J[S];ha.set(ba.name,
ba);K.set(ba.name.toLowerCase(),ba)}ha={caseSensitive:ha,caseInsensitive:K}}this._fieldsIndex=ha;this._fieldsIndexDirty=!1}},_canUseFieldsIndex:function(){var J=e.Map;return!("function"!==typeof e.Proxy||"function"!==typeof e.Proxy.revocable||"function"!==typeof J||!J.prototype||"function"!==typeof J.prototype.set)},_getField:function(J,U){var ha=this.fields;if(!ha||0===ha.length)return null;U&&(J=J.toLowerCase());this._createFieldsIndex();var K=this._fieldsIndex;if(K)return K=U?K.caseInsensitive:
K.caseSensitive,K.get(J);var S;t.some(ha,function(ba){var ra=!1;(ra=U?ba&&ba.name.toLowerCase()===J?!0:!1:ba&&ba.name===J?!0:!1)&&(S=ba);return ra});return S},_getDateOpts:function(){this._dtOpts||(this._dtOpts={properties:t.map(t.filter(this.fields,function(J){return!(!J||"esriFieldTypeDate"!==J.type)}),function(J){return J.name})});return this._dtOpts},_applyNormalized:function(J,U){J&&U&&t.forEach(J,function(ha,K){ha&&U[K]&&ha.setGeometry(U[K])})},_editHandler:function(J,U,ha,K,S,ba){S=J.addResults;
var ra=J.updateResults;J=J.deleteResults;var xa,La=this.objectIdField,Ha=this._mode,Va=this._isTable;var Ta=this.editFieldsInfo;var Pa=this.getOutFields()||[];var Xa=Ta&&Ta.creatorField,ab=Ta&&Ta.creationDateField,Ya=Ta&&Ta.editorField,hb=Ta&&Ta.editDateField;Ta=Ta&&Ta.realm;-1===t.indexOf(Pa,"*")&&(Xa&&-1===t.indexOf(Pa,Xa)&&(Xa=null),ab&&-1===t.indexOf(Pa,ab)&&(ab=null),Ya&&-1===t.indexOf(Pa,Ya)&&(Ya=null),hb&&-1===t.indexOf(Pa,hb)&&(hb=null));var eb=ab||hb?(new Date).getTime():null,kb=Xa||Ya?this.getUserId():
void 0;kb&&Ta&&(kb=kb+"@"+Ta);if(S){var sb=this.globalIdField;for(Ta=0;Ta<S.length;Ta++)if(S[Ta]=new Ia(S[Ta]),!Va){var qb=S[Ta];if(qb.success){var gb=qb.objectId;Pa=U[Ta];(xa=Pa._graphicsLayer)&&xa!==this&&xa.remove(Pa);xa=Pa.attributes||{};xa[La]=gb;gb=qb.globalId;sb&&gb&&(xa[sb]=gb);Xa&&(xa[Xa]=kb);Ya&&(xa[Ya]=kb);ab&&(xa[ab]=eb);hb&&(xa[hb]=eb);Pa.setAttributes(xa);Ha._init&&Ha.drawFeature(Pa)}}}if(ra)for(Ta=0;Ta<ra.length;Ta++)if(ra[Ta]=new Ia(ra[Ta]),!Va&&(qb=ra[Ta],qb.success)){gb=qb.objectId;
Pa=ha[gb];if(U=Ha._getFeature(gb))U.geometry!==Pa.geometry&&Pa.geometry&&U.setGeometry(wa.fromJson(Pa.geometry.toJson())),U.attributes!==Pa.attributes&&Pa.attributes&&U.setAttributes(n.mixin(U.attributes,Pa.attributes)),this._repaint(U,gb);Pa=U||Pa;xa=Pa.attributes||{};Ya&&(xa[Ya]=kb);hb&&(xa[hb]=eb);Pa.setAttributes(xa)}if(J){ha=[];for(Ta=0;Ta<J.length;Ta++)if(J[Ta]=new Ia(J[Ta]),!Va&&(qb=J[Ta],qb.success&&(gb=qb.objectId,Pa=Ha._getFeature(gb))))this._unSelectFeatureIIf(gb,Ha)&&ha.push(Pa),Pa._count=
0,Ha._removeFeatureIIf(gb);if(0<ha.length)this.onSelectionComplete(ha,Qa.SELECTION_SUBTRACT)}this._resolve([S,ra,J],"onEditsComplete",K,ba)},_sendAttachment:function(J,U,ha,K,S){var ba=this;return p({url:this._url.path+"/"+U+"/"+("add"===J?"addAttachment":"updateAttachment"),form:ha,content:n.mixin(this._url.query,{f:"json",token:this._getToken()||void 0}),callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(ra){var xa="add"===J?"onAddAttachmentComplete":"onUpdateAttachmentComplete";
ra=new Ia(ra["add"===J?"addAttachmentResult":"updateAttachmentResult"]);ra.attachmentId=ra.objectId;ra.objectId=U;ba._resolve([ra],xa,K);return ra}).addErrback(function(ra){ba._resolve([ra],null,S,null,!0)})},_repaint:function(J,U,ha){U=w.isDefined(U)?U:J.attributes[this.objectIdField];U in this._selectedFeatures&&this._selectionSymbol||J.setSymbol(J.symbol,ha)},_getKind:function(J){var U=this._trackManager;return U?U.isLatestObservation(J)?1:0:0}});n.mixin(Qa,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,
SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,MODE_AUTO:6,MODE_STREAM:7,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});ja._createWrappers(Qa);Object.defineProperty(Qa.prototype,"graphics",{get:function(){return this._hasOnDemandDrillMode()?this._mode.graphics:this._graphicsVal},set:function(J){this._graphicsVal=J}});Object.defineProperty(Qa.prototype,"name",{get:function(){return this.arcgisProps&&this.arcgisProps.title?
this.arcgisProps.title:this._name},set:function(J){this._name=J;this.loaded&&this.arcgisProps&&(this.arcgisProps.title=null)}});Object.defineProperty(Qa.prototype,"fields",{get:function(){return this._fields},set:function(J){J&&this._canUseFieldsIndex()&&(J=new Proxy(J,{set:n.hitch(this,function(U,ha,K){if(ha)if("length"===ha)this._fieldsIndexDirty=!0;else{var S=Number(ha);"number"!==typeof S||isNaN(S)||(this._fieldsIndexDirty=!0)}U[ha]=K;return!0})}));this._fields=J;this._fieldsIndexDirty=!0}});
k("extend-esri")&&n.setObject("layers.FeatureLayer",Qa,m);return Qa})},"esri/arcadeProfiles/labelingProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "),function(F,y,a,u,n,t,r,l){F=new (F(null,{declaredClass:"esri.arcadeProfiles.LabelingProfile",defaults:{context:{vars:{$feature:"any"}}},initialize:function(d){var f=[];l.hasGeometryOperations(d)&&f.push(r.enableGeometryOperations());return n(f)},
isAsync:function(d){return!1},parse:function(d){return r.createSyntaxTree(d.expression)},compile:function(d){var f=y.clone(this.defaults.context);return d.syntaxTree?r.createFunction(d.syntaxTree,f):null},getEvalOptions:function(d){var f=d.feature;return{context:{vars:{$feature:f&&d.expression.hasVariable("$feature")?t.createFromGraphicLikeObject(f.geometry,f.attributes,d.layer):null},spatialReference:d.spatialReference}}}}));a("extend-esri")&&y.setObject("arcadeProfiles.labelingProfile",F,u);return F})},
"esri/tasks/QueryTask":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/DeferredList ../kernel ../sniff ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "),function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h){var k=d("esri-pbf"),m=y(null,{url:null,query:null,requestOptions:null,pagination:null,pageSize:null,_fetchDfd:null,_startPage:null,_result:null,constructor:function(p){this._handleSuccess=
a.hitch(this,this._handleSuccess);this._handleError=a.hitch(this,this._handleError);a.mixin(this,p);null==this.pagination&&(this.pagination=!1);null==this.pageSize&&(this.pageSize=1E3)},execute:function(){var p=new n(this._canceler);this._fetchDfd=p;this._result=null;this._sendRequest();return p.promise},_canceler:function(p){var A=p._pendingRequest;if(!p.isFulfilled()&&A&&!A.isFulfilled()){A.cancel();var C=A.results&&A.results[1]}p._pendingRequest=null;return C},_sendRequest:function(p){var A=this.query;
this.pagination&&(this._startPage=A.resultOffset=null==p?0:p,A.resultRecordCount=this.pageSize);p=this.requestOptions;this._fetchDfd._pendingRequest=f({url:this.url,content:A,handleAs:"pbf"===A.f?"arraybuffer":"json",callbackParamName:"callback",timeout:p&&p.timeout},p);this._fetchDfd._pendingRequest.then(this._handleSuccess).otherwise(this._handleError)},_handleSuccess:function(p){this.pagination?(p.exceededTransferLimit&&this._sendRequest(this._startPage+this.pageSize),this._result?this._result.features=
this._result.features.concat(p.features):this._result=p,this._fetchDfd.progress(p),p.exceededTransferLimit||this._fetchDfd.resolve(this._result)):(this._fetchDfd.progress(p),this._fetchDfd.resolve(p))},_handleError:function(p){this._fetchDfd.reject(p)}}),w=y(e,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],"execute-for-count-complete":["count"],"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},constructor:function(p,A){this._handler=
a.hitch(this,this._handler);this._relationshipQueryHandler=a.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=a.hitch(this,this._executeForIdsHandler);this._countHandler=a.hitch(this,this._countHandler);this._extentHandler=a.hitch(this,this._extentHandler);this.source=A&&A.source;this.gdbVersion=A&&A.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"rawExecute",c:2,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,
p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onRawExecuteComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},onExecuteForExtentComplete:function(){},execute:function(p,A,C,z,q){var v=q.assembly;p=this._encode(a.mixin({},this._url.query,{f:z&&z.format||"json"},p.toJson(v&&v[0])));var B=this._handler,
D=this._errorHandler;this.source&&(z={source:this.source.toJson()},p.layer=t.toJson(z));this.gdbVersion&&(p.gdbVersion=this.gdbVersion);var x="pbf"===p.f;if(x){var E;k||(E="QueryTask.execute: 'pbf' format is not supported in your browser.");if(E)return p=new n,p.addErrback(function(G){D(G,C,q.dfd)}),p.reject(Error(E)),p}E=this.requestOptions;E=f({url:this._url.path+"/query",content:p,callbackParamName:"callback",handleAs:x?"arraybuffer":"json",timeout:E&&E.timeout},E);p=[E];x&&p.push(w.loadPBFReader());
(new r(p)).then(function(G){q.dfd.isFulfilled()||(G=G[0],G[0]?B(G[1],x,A,C,q.dfd):D(G[1],C,q.dfd))});return E},rawExecute:function(p,A,C){A=A||{};p=this._encode(a.mixin({},this._url.query,{f:A.format||"json"},p.toJson(C.assembly&&C.assembly[0])));this.source&&(p.layer=t.toJson({source:this.source.toJson()}));this.gdbVersion&&(p.gdbVersion=this.gdbVersion);return(new m({url:this._url.path+"/query",query:p,requestOptions:this.requestOptions,pagination:A.pagination,pageSize:A.pageSize})).execute().then(null,
null,function(z){C.dfd.progress(z)}).then(a.hitch(this,function(z){this._successHandler([z],"onRawExecuteComplete",null,C.dfd)})).otherwise(a.hitch(this,function(z){this._errorHandler(z,null,C.dfd)}))},executeRelationshipQuery:function(p,A,C){p=this._encode(a.mixin({},this._url.query,{f:"json"},p.toJson()));var z=this._relationshipQueryHandler,q=this._errorHandler;this.gdbVersion&&(p.gdbVersion=this.gdbVersion);var v=new n(b._dfdCanceller),B=this.requestOptions,D=this._url.path;this.source&&void 0!==
this.source.mapLayerId&&null!==this.source.mapLayerId&&D.endsWith("/dynamicLayer")&&(D=D.slice(0,-13),D=D+"/"+this.source.mapLayerId);v._pendingDfd=f({url:D+"/queryRelatedRecords",content:p,callbackParamName:"callback",timeout:B&&B.timeout,load:function(x,E){z(x,E,A,C,v)},error:function(x){q(x,C,v)}},B);return v},executeForIds:function(p,A,C,z){var q=z.assembly;p=this._encode(a.mixin({},this._url.query,{f:"json",returnIdsOnly:!0},p.toJson(q&&q[0])));var v=this._executeForIdsHandler,B=this._errorHandler;
this.source&&(q={source:this.source.toJson()},p.layer=t.toJson(q));this.gdbVersion&&(p.gdbVersion=this.gdbVersion);q=this.requestOptions;return f({url:this._url.path+"/query",content:p,callbackParamName:"callback",timeout:q&&q.timeout,load:function(D,x){v(D,x,A,C,z.dfd)},error:function(D){B(D,C,z.dfd)}},q)},executeForCount:function(p,A,C,z){var q=z.assembly;p=this._encode(a.mixin({},this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},p.toJson(q&&q[0])));var v=this._countHandler,B=this._errorHandler;
this.source&&(q={source:this.source.toJson()},p.layer=t.toJson(q));this.gdbVersion&&(p.gdbVersion=this.gdbVersion);q=this.requestOptions;return f({url:this._url.path+"/query",content:p,callbackParamName:"callback",timeout:q&&q.timeout,load:function(D,x){v(D,x,A,C,z.dfd)},error:function(D){B(D,C,z.dfd)}},q)},executeForExtent:function(p,A,C,z){var q=z.assembly;p=this._encode(a.mixin({},this._url.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},p.toJson(q&&q[0])));var v=this._extentHandler,B=
this._errorHandler;this.source&&(q={source:this.source.toJson()},p.layer=t.toJson(q));this.gdbVersion&&(p.gdbVersion=this.gdbVersion);q=this.requestOptions;return f({url:this._url.path+"/query",content:p,callbackParamName:"callback",timeout:q&&q.timeout,load:function(D,x){v(D,x,A,C,z.dfd)},error:function(D){B(D,C,z.dfd)}},q)},_handler:function(p,A,C,z,q){try{p&&A&&(p=w.pbfDeps.optimizedFeatures.convertToFeatureSet(w.pbfDeps.pbfQueryUtils.parsePBFFeatureQuery(p)));var v=new h(p);this._successHandler([v],
"onComplete",C,q)}catch(B){this._errorHandler(B,z,q)}},_relationshipQueryHandler:function(p,A,C,z,q){try{var v=p.geometryType,B=p.spatialReference,D={};u.forEach(p.relatedRecordGroups,function(x){var E={};E.geometryType=v;E.spatialReference=B;E.features=x.relatedRecords;E=new h(E);if(null!=x.objectId)D[x.objectId]=E;else for(var G in x)x.hasOwnProperty(G)&&"relatedRecords"!==G&&(D[x[G]]=E)});this._successHandler([D],"onExecuteRelationshipQueryComplete",C,q)}catch(x){this._errorHandler(x,z,q)}},_executeForIdsHandler:function(p,
A,C,z,q){try{this._successHandler([p.objectIds],"onExecuteForIdsComplete",C,q)}catch(v){this._errorHandler(v,z,q)}},_countHandler:function(p,A,C,z,q){try{var v=p.features,B=p.objectIds;if(B)var D=B.length;else{if(v)throw Error("Unable to perform query. Please check your parameters.");D=p.count}this._successHandler([D],"onExecuteForCountComplete",C,q)}catch(x){this._errorHandler(x,z,q)}},_extentHandler:function(p,A,C,z,q){try{p.extent&&(p.extent=new c(p.extent)),this._successHandler([p],"onExecuteForExtentComplete",
C,q)}catch(v){this._errorHandler(v,z,q)}}});w.loadPBFReader=function(){var p=new n;w.pbfDeps?p.resolve():F(["./support/pbfDeps"],function(A){w.pbfDeps=A;p.isFulfilled()||p.resolve()});return p.promise};g._createWrappers(w);d("extend-esri")&&a.setObject("tasks.QueryTask",w,l);return w})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(F,y,a){F.DeferredList=function(u,n,t,r,l){var d=[];y.call(this);var f=this;0!==u.length||n||this.resolve([0,[]]);
var b=0;a.forEach(u,function(c,g){function e(h,k){d[g]=[h,k];b++;b===u.length&&f.resolve(d)}c.then(function(h){n?f.resolve([g,h]):e(!0,h)},function(h){t?f.reject(h):e(!1,h);if(r)return null;throw h;})})};F.DeferredList.prototype=new y;F.DeferredList.prototype.gatherResults=function(u){u=new F.DeferredList(u,!1,!0,!1);u.addCallback(function(n){var t=[];a.forEach(n,function(r){t.push(r[1])});return t});return u};return F.DeferredList})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),
function(F,y,a,u,n,t,r,l){F=F(l,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],complete:["result"]},constructor:function(d,f){d&&y.isString(d)&&(this._url=r.urlToObject(this.url=d));f&&f.requestOptions&&(this.requestOptions=f.requestOptions);this.normalization=!0;this._errorHandler=y.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var d=this._url,f=/^http:/i;this.url&&(this.url=this.url.replace(f,"https:"));d&&d.path&&(d.path=d.path.replace(f,"https:"))},
_encode:function(d,f,b){var c={},g;for(g in d)if("declaredClass"!==g){var e=d[g];var h=typeof e;if(null!==e&&void 0!==e&&"function"!==h)if(y.isArray(e)){c[g]=[];var k=e.length;for(h=0;h<k;h++)c[g][h]=this._encode(e[h])}else"object"===h?e.toJson&&(h=e.toJson(b&&b[g]),"esri.tasks.FeatureSet"===e.declaredClass&&h.spatialReference&&(h.sr=h.spatialReference,delete h.spatialReference),c[g]=f?h:a.toJson(h)):c[g]=e}return c},_successHandler:function(d,f,b,c){f&&this[f].apply(this,d);b&&b.apply(null,d);c&&
t._resDfd(c,d)},_errorHandler:function(d,f,b){this.onError(d);f&&f(d);b&&b.errback(d)},setNormalization:function(d){this.normalization=d},onError:function(){}});u("extend-esri")&&(n.Task=F);return F})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/Polygon ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),function(F,y,a,u,n,t,r,l,d,f,b,c){F=F(null,{declaredClass:"esri.tasks.FeatureSet",
constructor:function(g,e){if(g){y.mixin(this,g);var h=this.features=this.features||[],k=g.spatialReference;k=this.spatialReference=b.createInstance(l.simpleConstructor,k);var m=b.getGeometryType(g.geometryType);this.geometryType=g.geometryType;g.fields&&(this.fields=g.fields);g=b.supportsLazyUnquantization(this.geometryType);var w=b.unquantizeFunction(this.geometryType,this.transform),p=!!(e&&g&&w),A=m&&(p?m.accessorConstructor:m.simpleConstructor);a.forEach(h,function(C,z){var q=b.createInstance(r.simpleConstructor),
v=C.geometry;if(m&&v){var B=q.geometry=b.createInstance(A,p?null:v);B.setSpatialReference(v.spatialReference?b.createInstance(l.simpleConstructor,v.spatialReference):k);p&&B.setupLazyUnquantization(w,v)}q.symbol=C.symbol?c.fromJson(C.symbol):null;q.attributes=C.attributes;h[z]=q});p||this._hydrate()}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(g){var e={};this.displayFieldName&&(e.displayFieldName=this.displayFieldName);this.fields&&
(e.fields=this.fields);this.spatialReference?e.spatialReference=this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(e.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(e.geometryType=b.getJsonType(this.features[0].geometry)),e.features=d._encodeGraphics(this.features,g));e.geometryType=e.geometryType||this.geometryType;e.exceededTransferLimit=this.exceededTransferLimit;e.transform=this.transform;return t.fixJson(e)},
_hydrate:function(){b.unquantize(this.features,this.geometryType,this.transform);this.transform=null},quantize:function(g){if(!this.geometryType)return this.transform=null,this;var e=g.translate[0],h=g.translate[1],k=g.scale[0],m=g.scale[1],w=this.features,p=function(q,v,B){var D,x=[];var E=0;for(D=q.length;E<D;E++){var G=q[E];if(0<E){var I=v(G[0]);G=B(G[1]);if(I!==L||G!==Y){x.push([I-L,G-Y]);var L=I;var Y=G}}else L=v(G[0]),Y=B(G[1]),x.push([L,Y])}return 0<x.length?x:null},A=function(q,v,B){if("esriGeometryPoint"===
q)return function(D){D.x=v(D.x);D.y=B(D.y);return D};if("esriGeometryPolyline"===q||"esriGeometryPolygon"===q)return function(D){var x;var E=D.rings||D.paths;var G=[];var I=0;for(x=E.length;I<x;I++){var L=E[I];(L=p(L,v,B))&&G.push(L)}return 0<G.length?(D.rings?D.rings=G:D.paths=G,D):null};if("esriGeometryMultipoint"===q)return function(D){var x=p(D.points,v,B);return 0<x.length?(D.points=x,D):null};if("esriGeometryEnvelope"===q)return function(D){return D}}(this.geometryType,function(q){return Math.round((q-
e)/k)},function(q){return Math.round((h-q)/m)}),C;var z=0;for(C=w.length;z<C;z++)w[z].geometry&&(A(w[z].geometry)||w[z].setGeometry(null));this.transform=g;return this}});F.createGraphics=function(g){var e=g.geometryType,h=b.createInstance(l.simpleConstructor,g.spatialReference),k=b.getGeometryType(e).accessorConstructor,m=b.unquantizeFunction(e,g.transform);return a.map(g.features,function(w,p){p=b.createInstance(r.simpleConstructor);var A=w.geometry;if(A){var C=p.geometry=b.createInstance(k);C.setSpatialReference(h);
C.setupLazyUnquantization(m,A)}p.attributes=w.attributes;return p})};F.createPolygon=function(g,e,h){if(g){var k=b.createInstance(f.accessorConstructor);k.setSpatialReference(e);e=b.unquantizeFunction("esriGeometryPolygon",h);k.setupLazyUnquantization(e,g)}return k};u("extend-esri")&&y.setObject("tasks.FeatureSet",F,n);return F})},"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(F,y,a,u){F=F(null,{declaredClass:"esri.tasks.StatisticDefinition",
toJson:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}});a("extend-esri")&&y.setObject("tasks.StatisticDefinition",F,u);return F})},"esri/layers/FeatureType":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../symbols/jsonUtils ./FeatureTemplate ./support/domainUtils".split(" "),
function(F,y,a,u,n,t,r,l,d){F=F(null,{declaredClass:"esri.layers.FeatureType",constructor:function(f){if(f&&y.isObject(f)){this.id=f.id;this.name=f.name;var b=f.symbol;b&&(this.symbol=r.fromJson(b));b=f.domains;var c=this.domains={};for(g in b)b.hasOwnProperty(g)&&(c[g]=d.fromJson(b[g]));if(f=f.templates){var g=this.templates=[];for(b=0;b<f.length;b++)g.push(new l(f[b]))}}},toJson:function(){var f={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()},b,c=this.domains,g=this.templates,
e=t.fixJson;if(c){var h=f.domains={};for(b in c)c.hasOwnProperty(b)&&(h[b]=c[b]&&c[b].toJson());e(h)}g&&(f.templates=a.map(g,function(k){return k.toJson()}));return e(f)}});u("extend-esri")&&y.setObject("layers.FeatureType",F,n);return F})},"esri/layers/FeatureTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../graphic".split(" "),function(F,y,a,u,n,t){F=F(null,{declaredClass:"esri.layers.FeatureTemplate",constructor:function(r){r&&y.isObject(r)&&(this.name=
r.name,this.description=r.description,this.drawingTool=r.drawingTool,this.thumbnail=r.thumbnail,r=r.prototype,this.prototype=new t(r.geometry,null,r.attributes))},toJson:function(){return n.fixJson({name:this.name,description:this.description,drawingTool:this.drawingTool,thumbnail:n.fixJson(y.clone(this.thumbnail)),prototype:this.prototype&&this.prototype.toJson()})}});y.mixin(F,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",
TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});
a("extend-esri")&&y.setObject("layers.FeatureTemplate",F,u);return F})},"esri/layers/support/domainUtils":function(){define("dojo/_base/lang dojo/has ../../kernel ../RangeDomain ../CodedValueDomain ../InheritedDomain".split(" "),function(F,y,a,u,n,t){var r={fromJson:function(l){if(l)switch(l.type){case "range":var d=new u(l);break;case "codedValue":d=new n(l);break;case "inherited":d=new t(l)}return d}};y("extend-esri")&&F.setObject("layers.support.domainUtils",r,a);return r})},"esri/layers/FeatureSubtype":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./support/domainUtils".split(" "),
function(F,y,a,u,n,t){F=F(null,{declaredClass:"esri.layers.FeatureSubtype",constructor:function(r){if(r&&y.isObject(r)){this.code=r.code;this.name=r.name;this.defaultValues=r.defaultValues;r=r.domains;var l=this.domains={},d;for(d in r)r.hasOwnProperty(d)&&(l[d]=t.fromJson(r[d]))}},toJson:function(){var r=n.fixJson,l={code:this.code,name:this.name,defaultValues:r(y.clone(this.defaultValues))},d=this.domains;if(d){var f=l.domains={},b;for(b in d)d.hasOwnProperty(b)&&(f[b]=d[b]&&d[b].toJson());r(f)}return r(l)}});
a("extend-esri")&&y.setObject("layers.FeatureSubtype",F,u);return F})},"esri/layers/FeatureEditResult":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(F,y,a,u){F=F(null,{declaredClass:"esri.layers.FeatureEditResult",constructor:function(n){n&&y.isObject(n)&&(this.objectId=n.objectId,this.globalId=n.globalId,this.success=n.success,n.success||(n=n.error,this.error=Error(),this.error.code=n.code,this.error.message=n.description))}});a("extend-esri")&&y.setObject("layers.FeatureEditResult",
F,u);return F})},"esri/layers/SnapshotMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../SpatialReference ../srUtils ../tasks/query ./RenderMode ./support/ParallelSnapshot".split(" "),function(F,y,a,u,n,t,r,l,d){F=F([l],{declaredClass:"esri.layers._SnapshotMode",maxFeatures:5E4,maxRecordCountFactor:1,scaleToTileFactor:1,_isSuspendedAtStartup:!1,_pendingRefresh:!1,constructor:function(f){this.featureLayer=f;this._featureMap={};this._hasUpdateError=this._hasPartialFeatures=
!1;this._drawFeatures=y.hitch(this,this._drawFeatures);this._queryErrorHandler=y.hitch(this,this._queryErrorHandler);this._handleSuccess=y.hitch(this,this._handleSuccess);this._handleError=y.hitch(this,this._handleError);this._handleProgress=y.hitch(this,this._handleProgress)},startup:function(){if(!this._started||this._isSuspendedAtStartup){this.inherited(arguments);var f=this.featureLayer,b=f.reHostedFS.test(f.url);this.pagination=f.queryPagination&&null!=f.maxRecordCount;this._cacheHintSupported=
f._isCacheHintSupported();this.scaleToTileFactor=this._getScaleToTileFactor();b&&this.pagination&&(this._parallelSnapshot=new d({layer:f,mode:this,queryTask:f._task}));this._isSuspendedAtStartup=f.suspended;this._startup()}},propertyChangeHandler:function(f){this._init&&(f?this.featureLayer._collection?console.log("FeatureLayer: layer created by value (from a feature collection) does not support definition expressions and time definitions. Layer id \x3d "+this.featureLayer.id):this._fetchAll():this._applyTimeFilter())},
destroy:function(){this._isSuspendedAtStartup=this._pendingRefresh=!1;this._cancelPendingRequest(this._pendingRequest);this._parallelSnapshot&&this._parallelSnapshot.destroy();this.inherited(arguments)},drawFeature:function(f){var b=f.attributes[this.featureLayer.objectIdField];this._addFeatureIIf(b,f);this._incRefCount(b)},resume:function(){this._isSuspendedAtStartup||this._pendingRefresh?(this._isSuspendedAtStartup=!1,this._startup()):this.propertyChangeHandler(0)},refresh:function(){var f=this.featureLayer;
f._collection?(f._fireUpdateStart(),f._refresh(!0),f._fireUpdateEnd()):this._fetchAll()},hasAllFeatures:function(){return!this._hasPartialFeatures},hasUpdateError:function(){return this._hasUpdateError},canFetchPBF:function(f){return this.inherited(arguments)&&this.featureLayer._canFetchPBFForQuery(f)},_startup:function(){this.featureLayer._collection?this._applyTimeFilter():this._fetchAll()},_fetchAll:function(){var f=this.featureLayer;f._collection||f.suspended||!f.isQueryable()?this._pendingRefresh=
f.suspended:(this._pendingRefresh=!1,f._fireUpdateStart(),this._clearIIf(),this._hasUpdateError=this._hasPartialFeatures=!1,this._parallelSnapshot?this._parallelSnapshot.fetch().then(this._handleSuccess,this._handleError,this._handleProgress):this._sendRequest())},_handleSuccess:function(f){this._hasPartialFeatures=f.hasPartialFeatures;this._hasUpdateError=f.hasUpdateError;this.featureLayer._fireUpdateEnd(null)},_handleError:function(f){this._queryErrorHandler(f)},_handleProgress:function(f){f.isError?
this.featureLayer._errorHandler(f.error):this._addFeatures(f.features)},_getScaleToTileFactor:function(){var f=this.featureLayer.tileMaxRecordCount,b=this.featureLayer.maxRecordCount,c=1;null!=f&&null!=b&&(c=Number((f/b).toFixed(2)));return c},_getPageSize:function(f){var b=this.featureLayer.tileMaxRecordCount;b="tile"===f.resultType&&b?b:this.featureLayer.maxRecordCount;f.maxRecordCountFactor&&(b=Math.floor(b*f.maxRecordCountFactor));return b},_sendRequest:function(f){var b=this.featureLayer,c=this._createQueryInfo(),
g=c.query;this.pagination&&(this._pageSize=this._getPageSize(g),this._start=g.start=null==f?0:f,g.num=this._pageSize);this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);this._pendingRequest=b._task.execute(g,this._drawFeatures,this._queryErrorHandler,c.pbf?{format:"pbf"}:null)},_drawFeatures:function(f){this._pendingRequest=null;this.featureLayer._isImageService&&10.7>this.featureLayer.version&&void 0===f.exceededTransferLimit&&(f.exceededTransferLimit=f.features.length===this.featureLayer.maxRecordCount);
var b=this.featureLayer,c=f.exceededTransferLimit,g=c&&!b._collection;f=this._checkMaxLimit(f.features);var e=f.maxLimitReached;this._addFeatures(f.features);this.pagination&&g&&!e||(this._hasPartialFeatures=!!c,b._fireUpdateEnd(null,c?{queryLimitExceeded:!0}:null));g&&(this.pagination&&!e&&this._sendRequest(this._start+this._pageSize),b.onQueryLimitExceeded())},_queryErrorHandler:function(f){this._pendingRequest=null;this._hasUpdateError=this._hasPartialFeatures=!0;var b=this.featureLayer;b._errorHandler(f);
b._fireUpdateEnd(f)},_checkMaxLimit:function(f){var b=f?f.length:0,c=this.featureLayer.graphics.length+b,g=c>=this.maxFeatures;if(g){var e=c-this.maxFeatures;e&&f.splice(b-e,e)}return{maxLimitReached:g,featuresDiscarded:c>this.maxFeatures,features:f}},_createQueryInfo:function(){var f=this.featureLayer,b=new r;b.outFields=f.getOutFields();b.where=f._getAttributeFilter()||"1\x3d1";b.returnGeometry=!0;b.outSpatialReference=t.createSpatialReference(this.map.spatialReference.toJson());b.timeExtent=f.getTimeDefinition();
b.maxAllowableOffset=f._maxOffset;b.quantizationParameters=f._quantizationParameters;b.orderByFields=f.supportsAdvancedQueries?f.getOrderByFields():null;b.multipatchOption=f.multipatchOption;f._ts&&(b._ts=(new Date).getTime());this._cacheHintSupported&&f._enableCacheHint(b);var c=this.canFetchPBF(b);f._enableEditModeQuantization(b,c);this._applyMaxRecordCountFactor(b,c);return{query:b,pbf:c}},_applyMaxRecordCountFactor:function(f,b){var c=this.featureLayer.advancedQueryCapabilities;this.featureLayer._isCacheHintEnabled(f)&&
c&&c.supportsMaxRecordCountFactor&&("tile"!==f.resultType&&1<this.scaleToTileFactor&&(f.maxRecordCountFactor=this.scaleToTileFactor),b&&1<this.maxRecordCountFactor&&(f.maxRecordCountFactor=this.maxRecordCountFactor),5<f.maxRecordCountFactor&&(f.maxRecordCountFactor=5))},_addFeatures:function(f){var b=this.featureLayer,c=b.objectIdField,g=f.length,e=b._selectedFeatures,h=b.mode===b.constructor.MODE_AUTO;b._fireUpdateStart();b._sortFeatures(f);for(b=0;b<g;b++){var k=f[b];var m=k.attributes[c];var w=
this._addFeatureIIf(m,k);this._incRefCount(m);h&&w!==k&&e[m]&&(w.setGeometry(k.geometry),w.setAttributes(k.attributes))}this._applyTimeFilter(!0)}});a("extend-esri")&&y.setObject("layers._SnapshotMode",F,u);return F})},"esri/layers/RenderMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","../sniff","../kernel"],function(F,y,a,u,n){var t=!!u("esri-pbf"),r=!!u("esri-featurelayer-pbf");F=F(null,{declaredClass:"esri.layers._RenderMode",enablePBFQuery:t&&r,initialize:function(l){this.map=
l;this._init=!0},startup:function(){this._started=!0},propertyChangeHandler:function(l){},destroy:function(){this._init=this._started=!1},drawFeature:function(l){},suspend:function(){},resume:function(){},refresh:function(){},hasAllFeatures:function(){return!0},hasUpdateError:function(){return!1},canFetchPBF:function(l){return!(!this.featureLayer._canFetchPBF()||!this.enablePBFQuery)},_incRefCount:function(l){(l=this._featureMap[l])&&l._count++},_decRefCount:function(l){(l=this._featureMap[l])&&l._count--},
_getFeature:function(l){return this._featureMap[l]},_addFeatureIIf:function(l,d){var f=this._featureMap,b=f[l],c=this.featureLayer;b||(f[l]=d,c._add(d),d._count=0);return b||d},_removeFeatureIIf:function(l){var d=this._featureMap[l],f=this.featureLayer;if(d){if(d._count)return;delete this._featureMap[l];f._remove(d)}return d},_registerFeature:function(l,d){var f=this._featureMap,b=f[l];b?(b.attributes=d.attributes,b.geometry=d.geometry):(f[l]=d,d._count=0,d._layer=d._graphicsLayer=d._sourceLayer=
this.featureLayer);return b||d},_unregisterFeature:function(l){var d=this._featureMap,f=d[l];f&&!f._count&&(delete d[l],f._graphicsLayer=null)},_clearIIf:function(){var l=this.featureLayer;var d=l.graphics,f=l._selectedFeatures,b=l.getSelectedFeatures().length,c=l.objectIdField;if(b)for(l=d.length-1;0<=l;l--){b=d[l];var g=b.attributes[c];g in f?b._count=1:(b._count=0,this._removeFeatureIIf(g))}else l.clear(),this._featureMap={}},_cancelPendingRequest:function(l){if(l)try{l.cancel()}catch(d){}},_toggleVisibility:function(l){var d=
this.featureLayer,f=d.graphics,b=l?"show":"hide",c,g=f.length;l=l&&d._ager;for(c=0;c<g;c++){var e=f[c];e[b]();l&&d._repaint(e)}},_applyTimeFilter:function(l){var d=this.featureLayer;if(d.timeInfo&&!d.suspended){l||d._fireUpdateStart();var f=d._trackManager;f&&f.clearTracks();var b=d.getTimeDefinition(),c=d._getOffsettedTE(d._mapTimeExtent);c?(c=d._getTimeOverlap(b,c))?(b=d._filterByTime(d.graphics,c.startTime,c.endTime),f&&f.addFeatures(b.match),a.forEach(b.match,function(g){var e=g._shape;g.visible||
(g.show(),(e=g._shape)&&e._moveToFront());d._ager&&e&&d._repaint(g)}),a.forEach(b.noMatch,function(g){g.visible&&g.hide()})):this._toggleVisibility(!1):(f&&f.addFeatures(d.graphics),this._toggleVisibility(!0));f&&(f.moveLatestToFront(),f.drawTracks());l||d._fireUpdateEnd()}}});u("extend-esri")&&y.setObject("layers._RenderMode",F,n);return F})},"esri/layers/support/ParallelSnapshot":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../../kernel".split(" "),
function(F,y,a,u,n,t){F=F(null,{declaredClass:"esri.layers.support.ParallelSnapshot",layer:null,mode:null,queryTask:null,batchSize:5,_queryInfo:null,_fetchDfd:null,_startPage:null,_lastPage:null,_pageSize:null,_maxPages:null,_requests:null,constructor:function(r){y.mixin(this,r);this._requests={}},destroy:function(){this.cancel()},fetch:function(){var r=new n;this.cancel(!0);this._queryInfo=this.mode._createQueryInfo();this._pageSize=this.mode._getPageSize(this._queryInfo.query);this._maxPages=Math.ceil(this._getFeatureCount()/
this._pageSize);this._fetchDfd=r;this._sendRequests();return r.promise},cancel:function(r){this._cancelPendingRequests(r);this._reset()},_reset:function(){this._startPage=this._lastPage=null;this._requests={}},_getFeatureCount:function(){return this.layer.mode===this.layer.constructor.MODE_AUTO&&0===this.layer.getLastExceedsLimitResult()?this.layer._getMaxFeaturesForAutoSnapshotMode():this.mode.maxFeatures},_sendRequests:function(r){var l=this._queryInfo.query,d=this.queryTask,f=this._requests;r=
null==r?1:r;var b=r+this.batchSize-1;b>this._maxPages&&(b=this._maxPages);if(!(r>b))for(this._startPage=r,this._lastPage=b;r<=b;r++)l.start=(r-1)*this._pageSize,l.num=this._pageSize,f[r]=d.execute(l,null,null,this._queryInfo.pbf?{format:"pbf"}:null),f[r].then(y.hitch(this,this._handleSuccess,r)).otherwise(y.hitch(this,this._handleError,r))},_evalNextBatch:function(r){r===this._lastPage&&this._sendRequests(this._lastPage+1)},_handleSuccess:function(r,l){l.exceededTransferLimit||this._cancelLaterRequests(r,
!0);var d=this.mode._checkMaxLimit(l.features);this._fetchDfd.progress({features:d.features,isError:!1});d.maxLimitReached?((r=d.featuresDiscarded||this._hasRejectedRequests())||(r=!!this._getResult(this._getLastSuccessfulRequest()).exceededTransferLimit),this._resolveFetch(r)):(l.exceededTransferLimit&&this._evalNextBatch(r),this._evalResolution())},_handleError:function(r,l){var d=this._requests;d&&d[r]&&(1===r?this._rejectFetch(l):(this._evalNextBatch(r),this._fetchDfd.progress({error:l,isError:!0}),
this._evalResolution()))},_evalResolution:function(){this._hasPendingRequests()||this._resolveFetch(this._hasRejectedRequests())},_resolveFetch:function(r){var l=this._hasRejectedRequests();this.cancel(!0);this._fetchDfd.resolve({hasPartialFeatures:r,hasUpdateError:l})},_rejectFetch:function(r){this.cancel(!0);this._fetchDfd.reject(r)},_getResult:function(r){return r&&r.dfd.results[0]},_hasPendingRequests:function(){return!!this._getPendingRequests().length},_getPendingRequests:function(){var r=this._requests,
l,d=[];for(l in r){var f=r[l];f.isFulfilled()||d.push({pageId:Number(l),dfd:f})}return d},_getLastSuccessfulRequest:function(){var r=this._getResolvedRequests(),l=-Infinity,d;r=a.filter(r,function(f){return!!this._getResult(f).features.length||1===f.pageId},this);a.forEach(r,function(f){f.pageId>l&&(l=f.pageId,d=f)});return d},_getResolvedRequests:function(){var r=this._requests,l,d=[];for(l in r){var f=r[l];f.isResolved()&&d.push({pageId:Number(l),dfd:f})}return d},_hasRejectedRequests:function(){var r=
this._getRejectedRequests(),l=this._getLastSuccessfulRequest(),d=this._getResult(l);d&&!d.exceededTransferLimit&&(r=a.filter(r,function(f){return f.pageId<=l.pageId}));return!!r.length},_getRejectedRequests:function(){var r=this._requests,l,d=[];for(l in r){var f=r[l];f.isRejected()&&d.push({pageId:Number(l),dfd:f})}return d},_cancelPendingRequests:function(r){this._cancelRequests(this._getPendingRequests(),r)},_cancelLaterRequests:function(r,l){var d=a.filter(this._getPendingRequests(),function(f){return f.pageId>
r});this._cancelRequests(d,l)},_cancelRequests:function(r,l){var d=this.mode,f=this._requests;a.forEach(r,function(b){l&&delete f[b.pageId];d._cancelPendingRequest(b.dfd)})}});u("extend-esri")&&y.setObject("layers.support.ParallelSnapshot",F,t);return F})},"esri/layers/OnDemandMode":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../tasks/query ./RenderMode ./GridLayout".split(" "),function(F,y,a,u,n,t,r,l,d,f){F=F([d],
{declaredClass:"esri.layers._OnDemandMode",constructor:function(b){this.featureLayer=b;this._featureMap={}},initialize:function(b){this.inherited(arguments);this._cellMap={};this._gridLayer=f.createFromFeatureLayer({layer:this.featureLayer,map:b})},startup:function(){if(!this._started||this._isSuspendedAtStartup)this.inherited(arguments),this._ioQueue=[],this._isSuspendedAtStartup=this.featureLayer.suspended,this.featureLayer.suspended||(this._zoomHandler(),this._enableConnectors())},propertyChangeHandler:function(b){this._init&&
(2>b?this._zoomHandler():console.log("FeatureLayer: layer in on-demand mode does not support time definitions. Layer id \x3d "+this.featureLayer.id+", Layer URL \x3d "+this.featureLayer.url))},destroy:function(){this._disableConnectors();this._processIOQueue(!0);this.inherited(arguments)},drawFeature:function(b){var c=b.geometry,g=[];if(c){g=this._gridLayer.getCellsInExtent("point"===c.type?{xmin:c.x,ymin:c.y,xmax:c.x,ymax:c.y}:c.getExtent(),!1).cells;c=this._cellMap;var e,h=b.attributes[this.featureLayer.objectIdField];
for(e=0;e<g.length;e++){var k=g[e];var m=k.latticeID;var w=k.row;var p=k.col;m?k=c[m]=c[m]||k:(c[w]=c[w]||{},k=c[w][p]=c[w][p]||k);k.features=k.features||[];k.features.push(b);this._addFeatureIIf(h,b);this._incRefCount(h)}}},suspend:function(){this._init&&this._disableConnectors()},resume:function(){this._init&&(this._enableConnectors(),this._zoomHandler())},refresh:function(){this._zoomHandler()},hasAllFeatures:function(){var b=!1,c=this._getCurrentCells(),g;for(g=0;g<c.length;g++)if(c[g].hasPartialFeatures){b=
!0;break}return!b},hasUpdateError:function(){var b=!1,c=this._getCurrentCells(),g;for(g=0;g<c.length;g++)if(c[g].hasUpdateError){b=!0;break}return b},canFetchPBF:function(b){return this.inherited(arguments)&&this.featureLayer._canFetchPBFForQuery(b)},_enableConnectors:function(){var b=this.map;this._zoomConnect=y.connect(b,"onZoomEnd",this,this._zoomHandler);this._panConnect=y.connect(b,"onPanEnd",this,this._panHandler);this._resizeConnect=y.connect(b,"onResize",this,this._panHandler)},_disableConnectors:function(){y.disconnect(this._zoomConnect);
y.disconnect(this._panConnect);y.disconnect(this._resizeConnect)},_zoomHandler:function(){this._processIOQueue(!0);var b=this.featureLayer,c=this.map;!b.suspended&&b.isQueryable()&&(b._fireUpdateStart(),this._clearIIf(),(b=b._trackManager)&&b.clearTracks(),this._cellMap={},this._gridLayer.setResolution(c.extent),this._sendRequest())},_panHandler:function(b){if(this.featureLayer.isQueryable()){this.featureLayer._fireUpdateStart();var c=this.featureLayer._resized;b=c?b:null;c&&this._gridLayer.setMapState(b,
this.map.width,this.map.height);this._sendRequest(b)}},_sendRequest:function(b){this._exceeds=!1;var c=this.featureLayer,g=this.map;b=b||g.extent;g=this._gridLayer.getCellsInExtent(b,c.latticeTiling).cells;if(!c.isEditable()){var e=this._cellMap;g=u.filter(g,function(w){if(w.lattice){if(e[w.latticeID])return!1}else if(e[w.row]&&e[w.row][w.col])return!1;return!0})}this._pending=this._pending||0;var h;for(h=0;h<g.length;h++){var k=g[h],m=this._createQueryInfo(k);this._pending++;this._ioQueue.push(c._task.execute(m.query,
a.hitch(this,this._drawFeatures,k),a.hitch(this,this._queryErrorHandler,k),m.pbf?{format:"pbf"}:null))}this._removeOldCells(b);this._endCheck()},_drawFeatures:function(b,c){this.featureLayer._isImageService&&10.7>this.featureLayer.version&&void 0===c.exceededTransferLimit&&(c.exceededTransferLimit=c.features.length===this.featureLayer.maxRecordCount);b.hasPartialFeatures=!!c.exceededTransferLimit;b.hasUpdateError=!1;this._exceeds=this._exceeds||c.exceededTransferLimit;this._finalizeIO();var g=this.featureLayer,
e=this.map.extent,h=b.extent,k=b.row,m=b.col,w=g.objectIdField;c=c.features;var p=this._gridLayer,A=this._cellMap,C=b.latticeID;A=C?A[C]:A[k]&&A[k][m];if(b.resolution==p.resolution&&(C?C===p.getLatticeID(e):p.intersects(h,e)))if(A)g._sortFeatures(c),this._updateCell(A,c);else for(g._sortFeatures(c),b.features=c,this._addCellToCellMap(b),g=c.length,b=0;b<g;b++)e=c[b],h=e.attributes[w],this._addFeatureIIf(h,e),this._incRefCount(h);else A&&this._removeCell(k,m,C);this._endCheck()},_queryErrorHandler:function(b,
c){this._finalizeIO();b.hasPartialFeatures=!0;b.hasUpdateError=!0;this._addCellToCellMap(b);this.featureLayer._errorHandler(c);this._endCheck(c)},_finalizeIO:function(){this._pending--},_endCheck:function(b){if(0===this._pending){this._processIOQueue();var c=this.featureLayer,g=c._trackManager;g&&(g.clearTracks(),g.addFeatures(c.graphics),c._ager&&u.forEach(c.graphics,function(e){e._shape&&c._repaint(e)}),g.moveLatestToFront(),g.drawTracks());this.featureLayer._fireUpdateEnd(!!b&&Error("FeatureLayer: "+
(b.message||"an error occurred while updating the layer.")),this._exceeds?{queryLimitExceeded:!0}:null);if(this._exceeds)c.onQueryLimitExceeded()}},_processIOQueue:function(b){this._ioQueue=u.filter(this._ioQueue,function(c){return-1<c.fired?!1:!0});b&&u.forEach(this._ioQueue,this._cancelPendingRequest)},_createQueryInfo:function(b){var c=this.featureLayer,g=new l;g.outFields=c.getOutFields();g.where=c._getAttributeFilter();g.returnGeometry=!0;g.geometry=b.extent||b.lattice;c.latticeTiling&&b.extent&&
(g.spatialRelationship=l.SPATIAL_REL_CONTAINS);g.timeExtent=c._getOffsettedTE(c._mapTimeExtent);g.maxAllowableOffset=c._maxOffset;g.quantizationParameters=c._quantizationParameters;g.orderByFields=c.supportsAdvancedQueries?c.getOrderByFields():null;g.multipatchOption=c.multipatchOption;c._ts&&(g._ts=(new Date).getTime());(b=c.advancedQueryCapabilities)&&b.supportsQueryWithResultType&&(g.resultType="tile");b=this.canFetchPBF(g);c._enableEditModeQuantization(g,b);return{query:g,pbf:b}},_getCurrentCells:function(b){var c=
[];b=b||this._cellMap;for(var g in b)if(b.hasOwnProperty(g)){var e=b[g];e&&(e.hasOwnProperty("row")||e.hasOwnProperty("latticeID")?c.push(e):"object"===typeof e&&c.push.apply(c,this._getCurrentCells(e)))}return c},_addCellToCellMap:function(b){var c=this._cellMap;if(b.latticeID)c[b.latticeID]=b;else{var g=b.row,e=b.col;c[g]=c[g]||{};c[g][e]=b}},_removeOldCells:function(b){var c=this._cellMap,g=this._gridLayer,e,h;for(e in c)if(c[e]){var k=c[e],m=k.latticeID,w=0,p=0;if(m)w++,m!==g.getLatticeID(b)&&
(this._removeCell(null,null,m),p++);else for(h in k)k[h]&&(w++,g.intersects(k[h].extent,b)||(this._removeCell(e,h),p++));p===w&&delete c[e]}},_updateCell:function(b,c){var g=this.featureLayer,e=g.objectIdField;g=g._selectedFeatures;var h,k=c.length;b.features=b.features||[];for(h=0;h<k;h++){var m=c[h],w=m.attributes[e],p=this._addFeatureIIf(w,m);p===m?(this._incRefCount(w),b.features.push(p)):w in g||(p.setGeometry(m.geometry),p.setAttributes(m.attributes))}},_removeCell:function(b,c,g){var e=this._cellMap,
h=this.featureLayer,k=h.objectIdField,m=g?e[g]:e[b]&&e[b][c];if(m&&(g?delete e[g]:delete e[b][c],b=m.features))for(c=0;c<b.length;c++)g=b[c].attributes[k],this._decRefCount(g),g in h._selectedFeatures||this._removeFeatureIIf(g)}});n("extend-esri")&&a.setObject("layers._OnDemandMode",F,t);return F})},"esri/layers/GridLayout":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/normalizeUtils ../srUtils".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b){var c=F(null,{declaredClass:"esri.layers._GridLayout",constructor:function(g,e,h,k){this.origin=g;this.cellWidth=e.width;this.cellHeight=e.height;this.mapWidth=h.width;this.mapHeight=h.height;this.srInfo=k},setResolution:function(g){this.resolution=(g.xmax-g.xmin)/this.mapWidth;this.srInfo&&(g=Math.round(Math.round(2*this.srInfo.valid[1]/this.resolution)/this.cellWidth),this._frameStats=[g,0,g-1])},setMapState:function(g,e,h){this.mapWidth=e;this.mapHeight=h;this.setResolution(g)},
getCellCoordinates:function(g){var e=this.resolution,h=this.origin;return{row:Math.floor((h.y-g.y)/(this.cellHeight*e)),col:Math.floor((g.x-h.x)/(this.cellWidth*e))}},normalize:function(g){var e=this._frameStats;if(e){var h=e[0],k=e[1];e=e[2];g<k?(g%=h,g=g<k?g+h:g):g>e&&(g%=h)}return g},intersects:function(g,e){var h=this.srInfo;return h?a.some(e._getParts(h),function(k){return g.intersects(k.extent)}):g.intersects(e)},getCellExtent:function(g,e){var h=this.resolution,k=this.origin,m=this.cellWidth,
w=this.cellHeight;return new r(e*m*h+k.x,k.y-(g+1)*w*h,(e+1)*m*h+k.x,k.y-g*w*h,b.createSpatialReference(k.spatialReference.toJson()))},getLatticeID:function(g){var e=this.getCellCoordinates({x:g.xmin,y:g.ymax}),h=this.getCellCoordinates({x:g.xmax,y:g.ymin});g=e.row;var k=h.row;e=this.normalize(e.col);h=this.normalize(h.col);return g+"_"+k+"_"+e+"_"+h},sorter:function(g,e){return g<e?-1:1},getCellsInExtent:function(g,e){var h=this.getCellCoordinates({x:g.xmin,y:g.ymax}),k=this.getCellCoordinates({x:g.xmax,
y:g.ymin}),m=h.row,w=k.row;h=h.col;k=k.col;var p=[],A,C,z=[],q=[],v=[];for(A=m;A<=w;A++)for(C=h;C<=k;C++){var B=this.normalize(C);g=this.getCellExtent(A,B);a.some(p,function(E){return E.row===A&&E.col===B})||p.push({row:A,col:B,extent:g,resolution:this.resolution});e&&(z.push(g.xmin,g.xmax),q.push(g.ymin,g.ymax))}h=this.normalize(h);k=this.normalize(k);z.sort(this.sorter);q.sort(this.sorter);e=z.length;for(A=e-1;0<=A;A--)A<e-1&&z[A]===z[A+1]&&z.splice(A,1);e=q.length;for(A=e-1;0<=A;A--)A<e-1&&q[A]===
q[A+1]&&q.splice(A,1);if(z.length&&q.length){g=z[0];C=z[z.length-1];var D=q[0];var x=q[q.length-1];e=z.length;for(A=0;A<e;A++)v.push([[z[A],x],[z[A],D]]);e=q.length;for(A=0;A<e;A++)v.push([[g,q[A]],[C,q[A]]]);z=new l({paths:v,spatialReference:this.origin.spatialReference.toJson()});p.push({latticeID:m+"_"+w+"_"+h+"_"+k,lattice:z,resolution:this.resolution})}return{minRow:m,maxRow:w,minCol:h,maxCol:k,topRow:m,bottomRow:w,leftCol:h,rightCol:k,cells:p}},_findCell:function(g,e,h){var k;a.some(g,function(m){m.row===
e&&m.col===h&&(k=m);return!!k});return k},getExtentOfIntersectingCells:function(g){var e=this.getCellsInExtent(g),h=e&&e.cells;if(h&&h.length){var k=e.topRow,m=e.leftCol,w=0;a.forEach(h,function(z){z.row===k&&w++});var p=this._findCell(h,k,m).extent,A=this.srInfo;if(!A||w!==this._frameStats[0]&&m!==e.rightCol){var C=p.xmin;A=C+w*p.getWidth()}else C=A.valid[0],A=A.valid[1];e=this._findCell(h,e.bottomRow,m).extent.ymin;(g=(new r(C,e,A,p.ymax,g.spatialReference))._normalize(!1,!1))&&g.rings&&(g=new d(g),
g=f.getDenormalizedExtent(g));return g}}});c.createFromFeatureLayer=function(g){var e=g.layer;g=e.getMap()||g.map;var h=e._srInfo;(e=g&&g.loaded?new c(new t(h?h.valid[0]:g.extent.xmin,h?h.valid[1]:g.extent.ymax,g.spatialReference),{width:e._tileWidth,height:e._tileHeight},{width:g.width,height:g.height},h):null)&&e.setResolution(g.extent);return e};u("extend-esri")&&y.setObject("layers._GridLayout",c,n);return c})},"esri/layers/SelectionMode":function(){define(["dojo/_base/declare","dojo/_base/lang",
"dojo/has","../kernel","./RenderMode"],function(F,y,a,u,n){F=F([n],{declaredClass:"esri.layers._SelectionMode",constructor:function(t){this.featureLayer=t;this._featureMap={}},propertyChangeHandler:function(t){this._init&&0===t&&this._applyTimeFilter()},resume:function(){this.propertyChangeHandler(0)},hasAllFeatures:function(){return!this.featureLayer._hasPartialSelectedFeatures},hasUpdateError:function(){return this.featureLayer._hasSelectionError}});a("extend-esri")&&y.setObject("layers._SelectionMode",
F,u);return F})},"esri/layers/StreamMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/has ../kernel ../SpatialReference ../tasks/query ../tasks/QueryTask ../geometry/jsonUtils ./RenderMode".split(" "),function(F,y,a,u,n,t,r,l,d,f,b){F=F([b],{declaredClass:"esri.layers._StreamMode",constructor:function(c,g){this.featureLayer=c;this._featureMap={};this._setRefreshRate();this._drawBuffer={adds:[],updates:[]};this._timeoutId=null;this._flushDrawBuffer=y.hitch(this,
this._flushDrawBuffer);this._featuresByTime={};this._lastEndTimeCheck=null;this._maxFeatureAge=0;c.purgeOptions&&c.purgeOptions.age&&"number"===typeof c.purgeOptions.age&&(this._maxFeatureAge=1E3*Math.ceil(60*c.purgeOptions.age));this._drawFeatures=y.hitch(this,this._drawFeatures);this._queryErrorHandler=y.hitch(this,this._queryErrorHandler)},startup:function(){this._started||this.inherited(arguments)},propertyChangeHandler:function(c){this._init&&(0===c?this._applyTimeFilter():3===c?this._redrawAllTracks():
console.debug("StreamLayer: Stream Layer only supports changing map time or maximumTrackPoints. Layer id \x3d "+this.featureLayer.id))},destroy:function(){this.inherited(arguments);clearTimeout(this._timeoutId);this._featuresByTime=this._drawBuffer=this._featureMap=null},drawFeature:function(c){var g=this.featureLayer,e=g.objectIdField;this._timeoutId||(this._timeoutId=setTimeout(this._flushDrawBuffer,this._refreshRate));g._joinField&&this._getFeature(c.attributes[e])?this._drawBuffer.updates.push({oid:c.attributes[e],
updates:c}):this._drawBuffer.adds.push(c)},resume:function(){this.propertyChangeHandler(0)},refresh:function(){this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);var c=this.featureLayer;c&&(c._relatedUrl||c._keepLatestUrl?(c._fireUpdateStart(),c._refreshing=!0,c.disconnect(),c.clear(),c._relatedQueried=!1,c._keepLatestQueried=!1,c.connect()):(c._fireUpdateStart(),c.clear(),c._fireUpdateEnd()))},_drawFeatures:function(c,g){var e=this.featureLayer;e._create(c.features||[]);e._fireUpdateEnd(null,
g)},_applyTimeFilter:function(c){this.inherited(arguments);this._redrawAllTracks()},_removeFeatures:function(c){var g=this.featureLayer,e=g.objectIdField;c&&a.forEach(c,function(h){h=h.attributes[e];g._unSelectFeatureIIf(h,this);this._decRefCount(h);this._removeFeatureIIf(h)},this)},_addFeatures:function(c){var g=this.featureLayer,e=g._endTimeField,h=g._startTimeField,k,m=[],w=[],p=[];var A=g._trackManager;var C=g.objectIdField;if(A)for(k in c=A.addFeatures(c),c)c.hasOwnProperty(k)&&(m.push(k),c[k].adds&&
(w=w.concat(c[k].adds)),c[k].deletes&&(p=p.concat(c[k].deletes)));else w=c;a.forEach(w,function(z){var q=z.attributes[C];var v=e&&z.attributes[e];!v&&this._maxFeatureAge&&(v=h&&z.attributes[h]?z.attributes[h]+this._maxFeatureAge:Date.now()+this._maxFeatureAge);v&&(v=1E3*Math.ceil(v/1E3),this._featuresByTime[v]?this._featuresByTime[v].push(q):this._featuresByTime[v]=[q]);this._addFeatureIIf(q,z);this._incRefCount(q)},this);p.length&&this._removeFeatures(p);A&&A.refreshTracks(m)},_updateFeatures:function(c){var g=
this.featureLayer,e=[];var h=g._trackManager;var k=g._trackIdField;a.forEach(c,function(m){var w=m.updates;m=this._getFeature(m.oid);var p;if(m){w.geometry&&m.setGeometry(w.geometry);w=w.attributes||{};for(p in w)w.hasOwnProperty(p)&&(m.attributes[p]=w[p]);m.setAttributes(m.attributes);m.visible=this._checkFeatureTimeIntersects(m);h&&m.attributes[k]?e.push(m.attributes[k]):g._repaint(m,null,!0)}},this);e.length&&h.refreshTracks(e)},_redrawAllTracks:function(){var c=this.featureLayer._trackManager,
g;c&&(g=c.trimTracks())&&0<g.length&&(this._removeFeatures(g),c.refreshTracks())},_flushDrawBuffer:function(){clearTimeout(this._timeoutId);var c=this._drawBuffer,g=c.adds.splice(0,c.adds.length),e=c.updates.splice(0,c.updates.length);c=this.featureLayer;if(!c)return!1;c.updating||c._fireUpdateStart();this._addFeatures(g);this._updateFeatures(e);(g=this._getExpiredFeatures())&&g.length&&(this._removeFeatures(g),c._trackManager&&c._trackManager.removeFeatures(g));c._purge();c._fireUpdateEnd();this._timeoutId=
null},_clearDrawBuffer:function(){var c=this._timeoutId,g=this._drawBuffer,e=g.adds;g=g.updates;c&&clearTimeout(c);e.splice(0,e.length);g.splice(0,g.length);this._timeoutId=null},_clearTimeBin:function(){this._featuresByTime={};this._lastEndTimeCheck=1E3*Math.ceil(Date.now()/1E3)},_clearFeatureMap:function(){this._featureMap={}},_setRefreshRate:function(c){c=c||0===c?c:200;0>c&&(c=200);this._refreshRate=c},_checkFeatureTimeIntersects:function(c){var g=this.featureLayer,e=g.getMap();return(e=e?e.timeExtent:
null)&&g.timeInfo&&(g.timeInfo.startTimeField||g.timeInfo.endTimeField)?0<g._filterByTime([c],e.startTime,e.endTime).match.length:!0},_fetchArchive:function(c){var g=new u,e=this.featureLayer;this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);e._fireUpdateStart();if(c&&this.map){c=new d(c);var h=new l;var k=this.map;var m=e.getFilter()||{};var w=m.where||"1\x3d1";var p=m.geometry?f.fromJson(m.geometry):null;m=m.outFields?m.outFields.split(","):["*"];h.geometry=p;h.where=w;h.outFields=
m;h.returnGeometry=!0;h.outSpatialReference=new r(k.spatialReference.toJson());this._pendingRequest=c.execute(h).then(function(A){this._pendingRequest=null;var C=this._fixFieldNameCasing(e,A);A.features=C;this._drawFeatures(A);e._fireUpdateEnd();g.resolve()}.bind(this)).otherwise(function(A){this._pendingRequest=null;e._errorHandler(A);e._fireUpdateEnd(A);g.reject(A)}.bind(this))}else g.resolve();return g.promise},_queryErrorHandler:function(c){var g=this.featureLayer;g._errorHandler(c);g._fireUpdateEnd(c)},
_fixFieldNameCasing:function(c,g){var e=g.features||[],h=g.fields;if(!h||!e.length)return e;c=this._mapFieldNameDifferences(c.fields,h);h=[];for(var k,m=0,w=g.features.length;m<w;m++)g=e[m],k=this._swizzleResponseAttributes(g.attributes,c),h.push({geometry:g.geometry,attributes:k});return h},_mapFieldNameDifferences:function(c,g){var e=[],h={},k;var m=0;for(k=g.length;m<k;m++)e.push(g[m].name);m=0;for(k=c.length;m<k;m++){g=c[m].name;var w=this._checkForStreamFieldName(g,e);w&&(h[w]=g)}return h},_checkForStreamFieldName:function(c,
g){c=c.toLowerCase();for(var e,h=0,k=g.length;h<k;h++)if(g[h].toLowerCase()===c){e=g[h];break}return e},_swizzleResponseAttributes:function(c,g){var e={},h;for(h in c)if(c.hasOwnProperty(h)){var k=c[h];g.hasOwnProperty(h)?e[g[h]]=k:e[h]=k}return e},_getExpiredFeatures:function(){var c,g,e=[],h=[];if(!this.featureLayer._endTimeField&&!this._maxFeatureAge)return h;var k=1E3*Math.floor(this._lastEndTimeCheck/1E3);this._lastEndTimeCheck=c=1E3*Math.ceil(Date.now()/1E3);if(k&&k!==c)for(g=this._featuresByTime;k<=
c;k+=1E3)g[k]&&(e=e.concat(g[k]),delete g[k]);a.forEach(e,function(m){(m=this._getFeature(m))&&h.push(m)},this);return h}});n("extend-esri")&&y.setObject("layers._StreamMode",F,t);return F})},"esri/layers/TrackManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/dom-construct dojox/gfx ../kernel ../graphic ../geometry/Polyline ./GraphicsLayer".split(" "),function(F,y,a,u,n,t,r,l,d,f){var b=-1!==t.renderer.toLowerCase().indexOf("canvas");F=F(null,{declaredClass:"esri.layers._TrackManager",
constructor:function(c){this.layer=c;this.trackMap={};this.trackLineMap={}},initialize:function(c){this.map=c;c=this.layer;this.createTracklineContainer()&&(this._handles=[c.on("visibility-change",y.hitch(this,function(g){this.container.setVisibility(g.visible);this.container.evaluateSuspension()})),c.on("scale-range-change",y.hitch(this,function(){this.container.setScaleRange(this.layer.minScale,this.layer.maxScale)}))])},createTracklineContainer:function(){var c=this.layer;if("esriGeometryPoint"!==
c.geometryType)return null;var g=this.map,e=c._getRenderer();e=e&&e.trackRenderer;var h=this.container=new f._GraphicsLayer({id:c.id+"_tracks",_child:!0,visible:c.visible,minScale:c.minScale,maxScale:c.maxScale});h.loaded=!0;h.onLoad(h);h._setMap(g,c._div);b||(g=h._div.getNode(),c=c._div.getNode(),g&&c&&n.place(g,c,"first"));h.setRenderer(e);return h},addFeatures:function(c){var g=this.trackMap,e=this.layer,h=e._trackIdField,k=[];a.forEach(c,function(A){var C=A.attributes[h];(g[C]=g[C]||[]).push(A);
-1===a.indexOf(k,C)&&k.push(C)});var m=e._startTimeField,w=e.objectIdField,p=function(A,C){var z=A.attributes[m],q=C.attributes[m];return z===q?A.attributes[w]<C.attributes[w]?-1:1:z<q?-1:1};a.forEach(k,function(A){g[A].sort(p)})},trimTracks:function(c){function g(w){for(w=e[w]||[];w.length>h;)k.push(w.shift())}var e=this.trackMap,h=this.layer.maximumTrackPoints||0,k=[],m;if(!h)return k;if(c)a.forEach(c,function(w){g(w)});else for(m in e)e.hasOwnProperty(m)&&g(m);return k},drawTracks:function(c){function g(A){var C=
m[A],z,q;var v=e.trackLineMap[A];h.remove(v);delete e.trackLineMap[A];v=null;if(!C||2>C.length)return!1;v=[];for(z=C.length-1;0<=z;z--)(q=C[z].geometry)&&v.push([q.x,q.y]);C={};C[p]=A;1<v.length&&(v=new l(new d({paths:[v],spatialReference:w}),null,C),h.add(v),e.trackLineMap[A]=v)}var e=this,h=this.container,k;if(h){var m=this.trackMap;var w=this.map.spatialReference;var p=this.layer._trackIdField;if(c)a.forEach(c,function(A){g(A)});else for(k in m)m.hasOwnProperty(k)&&g(k)}},refreshTracks:function(c){function g(p){var A;
e.drawTracks([p]);if(m&&m.latestObservationRenderer){p=h[p]||[];var C=p.length;for(A=0;A<C;A++)k._repaint(p[A],null,!0)}}var e=this,h=this.trackMap,k=this.layer,m=k._getRenderer(),w;if(c)a.forEach(c,function(p){g(p)});else for(w in h)h.hasOwnProperty(w)&&g(w);this.moveLatestToFront()},moveLatestToFront:function(c){a.forEach(this.getLatestObservations(c),function(g){var e=g._shape;e&&e._moveToFront();this._repaint(g,null,!0)},this.layer)},getLatestObservations:function(c){function g(w){w=k[w];return w[w.length-
1]}var e=[],h=this.layer._getRenderer(),k=this.trackMap,m;if(!h.latestObservationRenderer)return e;if(c)a.forEach(c,function(w){e.push(g(w))});else for(m in k)k.hasOwnProperty(m)&&e.push(g(m));return e},clearTracks:function(c){var g=this.getLatestObservations(c),e=this.container,h=this.trackMap,k;if(c)a.forEach(c,function(w){delete this.trackMap[w];e&&(m=this.trackLineMap[w],e.remove(m),delete this.trackLineMap[w])},this);else{if(e)for(k in h){var m=this.trackLineMap[k];e.remove(m)}this.trackMap=
{};this.trackLineMap={}}a.forEach(g,function(w){this._repaint(w,null,!0)},this.layer)},isLatestObservation:function(c){var g=this.trackMap[c.attributes[this.layer._trackIdField]];return g?g[g.length-1]===c:!1},destroy:function(){a.forEach(this._handles,function(g){g.remove()});var c=this.container;c&&(c.clear(),c._unsetMap(this.map,this.layer._div));this.map=this.layer=this.trackMap=this.container=null}});u("extend-esri")&&y.setObject("layers._TrackManager",F,r);return F})},"esri/layers/HeatmapManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/_base/array require ../kernel ../sniff ../geometry/Point ../geometry/webMercatorUtils ./MapImage ../renderers/HeatmapRenderer ../tasks/query dojo/_base/fx".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g){function e(){}function h(k){var m=k.layer;return{geometry:k.geometry,attributes:k.attributes,getLayer:function(){return m}}}F=F(null,{declaredClass:"esri.layers.HeatmapManager",heatmapRenderer:null,sourceLayer:null,imageLayer:null,useTiles:!0,useWorker:!1,map:null,constructor:function(k){this.sourceLayer=k;this._hndls=[]},initialize:function(k){this.map=k;var m=this.sourceLayer,w=m.renderer;m.setDrawMode(!1);this.imageLayer=k._getMapImageLyr();var p=this;this.heatmapRenderer=
w instanceof b?w:(w.getRendererInfoByZoom(k.getZoom())||w.getRendererInfoByScale(k.getScale())).renderer;this.redraw=this.redraw.bind(this);this.recalculateHeatmap=this.recalculateHeatmap.bind(this);this._removeRenderer=this._removeRenderer.bind(this);this._handleRendererChange=this._handleRendererChange.bind(this);this._rendererChangeHandle=this.sourceLayer.on("renderer-change",this._handleRendererChange);this._handleOpacityChange=this._handleOpacityChange.bind(this);this._reprojectFeature=this._reprojectFeature.bind(this);
n(["../workers/heatmapCalculator"],function(A){p._calculator=new A(y.mixin({width:p.map.width,height:p.map.height},p._getOptions()));p._setupRenderer();p.heatmapRenderer.getStats=A.calculateStats;p.heatmapRenderer.getHistogramData=A.getHistogramData})},destroy:function(){this._removeHandlers();this._rendererChangeHandle&&this._rendererChangeHandle.remove();this._rendererChangeHandle=this.sourceLayer=this.imageLayer=this.map=this.heatmapRenderer=this._hndls=null},_handleRendererChange:function(k){var m=
k.renderer,w=m instanceof b;this.heatmapRenderer?w?this.heatmapRenderer=m:this._removeRenderer(k):w&&(this.heatmapRenderer=m,this.sourceLayer&&this.map&&this._setupRenderer())},_handleOpacityChange:function(k){k=k.opacity;var m=this._getImageBySourceId(this.sourceLayer.id);m&&m.setOpacity(k)},_setupRenderer:function(){var k=this._hndls,m=this.sourceLayer,w=this.map,p=this;m._originalDraw=m._draw;m._draw=e;m._div.clear();clearTimeout(this._resetTimer);this._resetTimer=setTimeout(this._resetGraphics.bind(this),
250);k.push(m.on("update-end",this.redraw));k.push(m.on("suspend",function(A){(A=p._getImageBySourceId(p.sourceLayer.id))&&A.hide()}));k.push(m.on("resume",function(A){(A=p._getImageBySourceId(p.sourceLayer.id))&&A.show()}));k.push(a.after(m,"redraw",this.redraw));k.push(w.on("layer-remove",function(A){A.layer==m&&((A=p._getImageBySourceId(p.sourceLayer.id))&&p.imageLayer.removeImage(A),p._removeRenderer({target:m}))}));m._collection&&k.push(m.on("graphic-add",function(A){p._reprojectFeature(A.graphic);
p.redraw()}));1!==m.mode&&(k.push(w.on("resize, pan-end",this.redraw)),k.push(w.on("zoom-end",this.redraw)));k.push(m.on("opacity-change",this._handleOpacityChange));this.imageLayer.suspended&&this.imageLayer.resume();m.graphics&&m.graphics.length&&(m.graphics[0].geometry&&!w.spatialReference.equals(m.graphics[0].geometry.spatialReference)&&u.forEach(m.graphics,function(A){this._reprojectFeature(A)}.bind(this)),this.redraw())},redraw:function(){if(!this._drawTimer){var k=this;this._drawTimer=setTimeout(function(){clearTimeout(k._drawTimer);
k._drawTimer=null;k.sourceLayer._getRenderer().isInstanceOf(b)&&k.recalculateHeatmap()},16)}},_removeRenderer:function(k){var m=k.target;m._draw=m._originalDraw;delete m._originalDraw;m.setDrawMode(!0);this._removeHandlers();this._hndls=[];var w=this._getImageBySourceId(this.sourceLayer.id);w&&this.imageLayer.removeImage(w);clearTimeout(this._drawTimer);clearTimeout(this._resetTimer);this._drawTimer=this._resetTimer=null;m.renderer!=k.renderer&&m.renderer.getRendererInfo?this.heatmapRenderer=null:
(this.destroy(),m.renderer&&m.renderer.getRendererInfo&&m.redraw())},recalculateHeatmap:function(){this._calculator?this._doMainCalculation():this._calculatorClient&&this._doWorkerCalculation()},_reprojectFeature:function(k){if(k&&k.geometry){var m=k.geometry,w=this.map.spatialReference;w.equals(m.spatialReference)||(m=d.project(m,w),null==m?console.log("Unable to reproject features to map's spatial reference. Please convert feature geometry before adding to layer"):k.geometry=m)}},_doWorkerCalculation:function(){},
_doMainCalculation:function(){var k=this.sourceLayer,m=this.map,w=this.heatmapRenderer,p=this.map.extent,A=this.map.width,C=this.map.height,z=this._calculator,q=this,v=function(D){D=q._getScreenPoints(D.features,m,k);D=z.calculateImageData(y.mixin({screenPoints:D,mapinfo:{extent:[p.xmin,p.ymin,p.xmax,p.ymax],resolution:m.getResolution()},width:A,height:C},q._getOptions()));D=w.getSymbol(h({geometry:m.extent,attributes:{size:[A,C],imageData:D},layer:k}));D=new f({extent:m.extent,href:D.url,opacity:0,
sourceId:k.id});q._swapMapImages(D,q._getImageBySourceId(k.id));k.suspended&&D.hide()},B={geometry:m.extent,timeExtent:k.useMapTime?m.timeExtent:void 0,spatialRelationship:c.SPATIAL_REL_INTERSECTS};null!=k._canDoClientSideQuery(B)?k.queryFeatures(B,v):v({features:k.graphics})},_getScreenPoints:function(k,m,w){var p=[],A=k.length,C=0,z=0,q=new l(m.extent.xmin,m.extent.ymax,m.spatialReference),v=m.toScreen(q),B=v.x;v=v.y;var D=m.getResolution(),x;for((z=m.extent.getCacheValue("_parts"))&&(x=u.map(z,
function(G){return w._intersects(m,G.extent)[0]}));A--;)if(z=k[A],z.geometry&&z.visible){var E={x:Math.ceil((z.geometry.x-q.x)/D+B),y:Math.floor((q.y-z.geometry.y)/D-v),attributes:z.attributes};x&&(z=1<x.length&&E.x<-x[0]?x[1]:x[0],E.x+=z);p[C++]=E}return p},_getImageBySourceId:function(k){var m=this.imageLayer.getImages();m=u.filter(m,function(w){return w.sourceId==k});if(m.length)return m[m.length-1]},_swapMapImages:function(k,m){function w(){p.removeImage(m)}var p=this.imageLayer,A=this.sourceLayer.opacity;
p.addImage(k);g.anim(k._node,{opacity:A},null,null,function(){k.opacity=A});null!=m&&g.anim(m._node,{opacity:0},null,null,w)},_removeHandlers:function(){if(null!=this._hndls)for(var k=this._hndls.length;k--;)this._hndls[k].remove()},_getOptions:function(){var k=this.heatmapRenderer;return{blurRadius:k.blurRadius,gradient:k.gradient,maxPixelIntensity:k.maxPixelIntensity,minPixelIntensity:k.minPixelIntensity,field:k.field,fieldOffset:k.fieldOffset}},_resetGraphics:function(){clearTimeout(this._resetTimer);
this._resetTimer=null;for(var k=this.sourceLayer.graphics,m=k.length,w;m--;)w=k[m],w._shape=w._offsets=void 0}});r("extend-esri")&&y.setObject("layers.HeatmapManager",F,t);return F})},"esri/layers/clustering/ClusterManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../../kernel ../../Evented ../../graphic ../../lang ../../Color ../../graphicsUtils ../../dijit/PopupTemplate ../../dijit/Legend/utils ../../renderers/ClassBreaksRenderer ../../symbols/SimpleMarkerSymbol ../support/attributeUtils ../GraphicsLayer ../Field ./GeohashAggregation ./statUtils dojo/i18n!../../nls/jsapi".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m,w,p,A){var C=A.layers.clusters,z=A.widgets.popup,q=C.numFeatures,v=Math.pow(2,53)-1;F=F(t,{declaredClass:"esri.layers.clustering.ClusterManager",layer:null,aggregationInfo:null,container:null,defaults:{clusterRadius:80,markerSymbol:{color:[77,77,77,255],size:6,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,255,255,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}}},_initialized:!1,_map:null,_eventHandles:null,_clusterRadius:null,
_renderer:null,_statisticInfos:null,_fields:null,_infoTemplate:null,_clusterGenerator:null,_singleGraphics:null,constructor:function(B){this._eventHandles=[];this.layer=B.layer;this.setAggregationInfo(B.aggregationInfo)},initialize:function(B){this._initialized=!0;this._map=B;this._removeFromPopup(this.layer);this.container=this._createContainer();this._clusterGenerator=this._createClusterGenerator();this._initClusterGenerator();this._createLayerEventListeners();this._createMapEventListeners();this._createPopupEventListeners()},
destroy:function(B){this._clearSingleGraphics();this._removeClusterBoundary();this._destroyEventListeners();this._removeFromPopup(this.container);this._removeFromPopup(this.layer);this._resetClusterNav();this._destroyClusterGenerator(B);this._destroyContainer();this.layer=this.aggregationInfo=this._map=null},setAggregationInfo:function(B){this.aggregationInfo=B?y.mixin({},B):null;this._applyAggregationInfo()},getClusterRenderer:function(){return this._renderer},getClusterFields:function(){return this._fields||
[]},getFeaturesInCluster:function(B){B=B&&B.getAggregationInfo();return this._clusterGenerator?this._clusterGenerator.getFeaturesInCluster(B):[]},getAggregateGraphics:function(){return this.container?this.container.graphics.slice(0):[]},getSingleGraphics:function(){return this._singleGraphics?this._singleGraphics.slice(0):[]},redraw:function(){this.container&&this.container.redraw()},isClusteringEnabled:function(){return!(!this._clusterGenerator||!this._clusterGenerator.clustersEnabled)},isClusteringActive:function(){return!!(this._clusterGenerator&&
0<this._clusterGenerator.getNumFeatures())},toggleFeatureVisibility:function(B){this._clusterGenerator&&this._clusterGenerator.toggleFeatureVisibility(B)},_createContainer:function(){var B=this.layer,D=new k._GraphicsLayer({_child:!0,id:B.id+"_clusters",visible:B.visible,minScale:B.minScale,maxScale:B.maxScale,infoTemplate:this._infoTemplate});D.fields=this._fields;D.setRenderer(this._renderer);D.loaded=!0;D.onLoad(D);D._setMap(this._map,B._div);return B._childLayer=D},_destroyContainer:function(){var B=
this.container;B&&(B.clear(),B._unsetMap(this._map,this.layer._div),this.layer._childLayer=null);this.container=null},_createClusterGenerator:function(){return new w({map:this._map,layer:this.layer,clusterRadius:this._clusterRadius,statisticInfos:this._statisticInfos})},_initClusterGenerator:function(){var B=this._clusterGenerator;B.loaded?this._awaitClusterGenerator():this._eventHandles.push(B.on("load",y.hitch(this,function(){this._awaitClusterGenerator()})),B.on("load-error",y.hitch(this,function(D){console.log(D.error)})))},
_destroyClusterGenerator:function(B){this._clusterGenerator&&this._clusterGenerator.destroy(B);this._clusterGenerator=null},_awaitClusterGenerator:function(){var B=this._clusterGenerator;B.started?(this._applyRenderer(),this._initClusterUpdates()):this._eventHandles.push(B.on("start",y.hitch(this,function(){this._applyRenderer();this._initClusterUpdates()})))},_applyAggregationInfo:function(){this._applyClusterRadius();this._applyRenderer();this._clusterGenerator&&!this._clusterGenerator.isUpdateScheduled()&&
this.redraw()},_applyClusterRadius:function(){var B=this.aggregationInfo;this._clusterRadius=B&&B.clusterRadius||this.defaults.clusterRadius;this._clusterGenerator&&this._clusterGenerator.setClusterRadius(this._clusterRadius);this._computeClusterRadius()},_computeClusterRadius:function(){var B=this.aggregationInfo||{};B.clusterRadius=this._clusterRadius;this.aggregationInfo=B},_applyRenderer:function(){var B=this.container,D=this._getClusterRendererInfo(),x=this._compareStatInfos(this._statisticInfos,
D.statisticInfos);x&&(this._statisticInfos=D.statisticInfos,this._clusterGenerator&&(this._clusterGenerator.setStatisticInfos(a.map(this._statisticInfos,function(E){return{attributeInfo:E.attributeInfo,statisticType:E.statisticType}})),B&&a.forEach(B.graphics,function(E){this._applyClusterAttributes(E,E.getAggregationInfo())},this)));this._renderer=D.renderer;this._applyFields();this._applyInfoTemplate(!!x&&this._initialized);B&&(B.setRenderer(this._renderer),this.emit("renderer-change"))},_applyFields:function(){this._fields=
this._getFields(this._statisticInfos);this.container&&(this.container.fields=this._fields)},_applyInfoTemplate:function(B){var D=this.aggregationInfo,x=D&&D.disablePopup;this.layer.infoTemplate&&!x?(D=D&&D.infoTemplate||this._infoTemplate,B=B||!D?this._createInfoTemplate():this._updateInfoTemplate(D)):B=null;this._infoTemplate=B;this.container&&this.container.setInfoTemplate(this._infoTemplate);this._computeInfoTemplate()},_computeInfoTemplate:function(){var B=this.aggregationInfo||{};B.infoTemplate=
this._infoTemplate;this.aggregationInfo=B},_getClusterRendererInfo:function(){var B=this.layer&&this.layer.renderer;return B?this._createClusterRenderer(B):this._getDefaultClusterRenderer()},_getDefaultClusterRenderer:function(){var B=this._createContinuousCountRenderer();this._addSizeByCountVariable(B);return{renderer:B,statisticInfos:[]}},_createContinuousCountRenderer:function(B){var D=new g(null,"cluster_count");D.addBreak({minValue:-v,maxValue:v,symbol:B?new B.constructor(B.toJson()):new e(y.clone(this.defaults.markerSymbol))});
return D},_createClusterRenderer:function(B){if(!this._isSupportedRenderer(B))return this._getDefaultClusterRenderer();var D=[];if(this._isSimpleRenderer(B))var x=this._createContinuousCountRenderer(B.symbol);else{x=new B.constructor(B.toJson());var E=this._getRendererAttributeInfo(B);if(this._isCBRenderer(x)){var G=p.getClusterField(E,"avg");D.push(this._getStatInfo(E,"avg"));x.normalizationType=null;x.normalizationField=null;x.normalizationTotal=null}else this._isUVRenderer(x)&&(G=p.getClusterField(E,
"type"),D.push(this._getStatInfo(E,"type")));x.attributeField=G;x.setValueExpression(null);x.valueExpressionTitle=null;x.setVisualVariables(null);this._setRendererTitle(x,B)}B=this._getSupportedVariables(B);E=this._createClusterVariables(B.allVars,D);x.setVisualVariables(E);B.sizeVars.length||this._isCBSizeRenderer(x)||this._addSizeByCountVariable(x);return{renderer:x,statisticInfos:D}},_isSupportedRenderer:function(B){if(this._isSimpleRenderer(B))return!0;if(this._isCBRenderer(B)){var D=B.normalizationType;
return"function"===typeof B.attributeField||D&&"field"!==D?!1:!0}return this._isUVRenderer(B)?"function"===typeof B.attributeField||B.attributeField2?!1:!0:!1},_isSimpleRenderer:function(B){return-1<B.declaredClass.toLowerCase().indexOf("simplerenderer")},_isCBRenderer:function(B){return-1<B.declaredClass.toLowerCase().indexOf("classbreaksrenderer")},_isUVRenderer:function(B){return-1<B.declaredClass.toLowerCase().indexOf("uniquevaluerenderer")},_isCBSizeRenderer:function(B){var D=B.infos;if(!this._isCBRenderer(B)||
!D||2>D.length)return!1;var x=Infinity,E=-Infinity;a.forEach(D,function(G){if(G=G.symbol){var I=0;switch(G.type){case "simplemarkersymbol":I=G.size;break;case "picturemarkersymbol":I=(G.width+G.height)/2}x=Math.min(x,I);E=Math.max(E,I)}});return Infinity!==x&&-Infinity!==E&&x!==E},_getRendererAttributeInfo:function(B){var D=B.attributeField,x=D?this.layer.getField(D):null;return{field:D,attributeType:x&&"esriFieldTypeDate"===x.type?"date":null,rotationType:null,valueExpression:B.valueExpression,valueExpressionTitle:B.valueExpressionTitle,
normalizationField:B.normalizationField}},_setRendererTitle:function(B,D){B.legendOptions=y.clone(D.legendOptions);B.legendOptions&&B.legendOptions.title||(B.legendOptions=B.legendOptions||{},B.legendOptions.title=c.getRendererTitle(D,this.layer))},_getSupportedVariables:function(B){var D=B.getVisualVariablesForType("colorInfo",!1)||[],x=B.getVisualVariablesForType("sizeInfo",!1)||[],E=B.getVisualVariablesForType("opacityInfo",!1)||[];B=B.getVisualVariablesForType("rotationInfo",!1)||[];D=a.filter(D,
this._variableFilter);x=a.filter(x,this._variableFilter);E=a.filter(E,this._variableFilter);B=a.filter(B,this._variableFilter);return{sizeVars:x,allVars:D.concat(x).concat(E).concat(B)}},_variableFilter:function(B){return"function"!==typeof B.field&&!h.viewScaleRE.test(B.valueExpression)},_createClusterVariables:function(B,D){return a.map(B,function(x){return this._createVarForAvg(x,D)},this)},_createVarForAvg:function(B,D){var x=y.clone(B),E=this._getVariableAttributeInfo(B);x.field=p.getClusterField(E,
"avg");x.normalizationField=null;x.valueExpression=null;x.valueExpressionTitle=null;E=this._getStatInfo(E,"avg");this._addStatInfo(D,E);this._setVariableTitle(x,B);return x},_getVariableAttributeInfo:function(B){var D="rotationInfo"===B.type,x=D?"angle":null;D=D?B.rotationType:null;var E=B.legendOptions&&B.legendOptions.title,G=B.field,I=G?this.layer.getField(G):null;I&&"esriFieldTypeDate"===I.type&&(x="date");return{field:G,attributeType:x,rotationType:D,valueExpression:B.valueExpression,valueExpressionTitle:B.valueExpressionTitle||
B.valueExpression&&E,normalizationField:B.normalizationField}},_setVariableTitle:function(B,D){B.legendOptions&&B.legendOptions.title||(B.legendOptions=B.legendOptions||{},B.legendOptions.title=c.getVisualVariableTitle(D,this.layer))},_getStatInfo:function(B,D){return{statisticHash:p.getStatisticHash(B,D),attributeInfo:B,statisticType:D}},_addStatInfo:function(B,D){var x=this._findStatInfo(B,D);x?x.attributeInfo.valueExpressionTitle||(x.attributeInfo.valueExpressionTitle=D.attributeInfo.valueExpressionTitle):
B.push(D)},_findStatInfo:function(B,D){var x;a.some(B,function(E){E.statisticHash===D.statisticHash&&(x=E);return!!x});return x},_compareStatInfos:function(B,D){var x=a.filter(B,function(G){return!this._findStatInfo(D,G)},this),E=a.filter(D,function(G){return!this._findStatInfo(B,G)},this);return E.length||x.length?{added:E,removed:x}:null},_addSizeByCountVariable:function(B){var D=this._createSizeByCountVariable();D&&this._addVariable(B,D)},_getSizeByCountVariable:function(B){B=B.getVisualVariablesForType("sizeInfo",
!1)||[];return a.filter(B,function(D){return"cluster_count"===D.field})[0]},_updateSizeByCountVariable:function(){var B=this._renderer,D=this._getSizeByCountVariable(B);if(D){var x=this._createSizeByCountVariable();x&&this._replaceVariable(B,D,x)}},_createSizeByCountVariable:function(){var B=this._clusterGenerator;if(B){var D=B.getCurrentLodStats();if(D){var x=B.getNumFeatures();B=B.clusters;var E=D.min,G=D.max;1===D.count&&E===x||1===B.length&&B[0].count===x?(E=1,G=x):E&&E===G&&(G=2*E);x={type:"sizeInfo",
field:"cluster_count",valueUnit:"unknown",minSize:12,maxSize:50,minDataValue:E,maxDataValue:G,legendOptions:{title:q}}}}return x},_addVariable:function(B,D){var x=B.visualVariables||[];x.push(D);B.setVisualVariables(x)},_replaceVariable:function(B,D,x){var E=B.visualVariables;D=a.indexOf(E,D);-1<D&&E.splice(D,1);E.push(x);B.setVisualVariables(E)},_getFields:function(B){var D=[new m({name:"cluster_count",type:"esriFieldTypeInteger"})];a.forEach(B,function(x){var E=x.statisticType;x=x.attributeInfo;
var G;"avg"===E?G="date"===x.attributeType?"esriFieldTypeDate":"esriFieldTypeDouble":"type"===E&&(G=x.field?this.layer.getField(x.field).type:"esriFieldTypeString");D.push(new m({name:p.getClusterField(x,E),type:G}))},this);return D},_createInfoTemplate:function(){var B=this._statisticInfos,D=this._renderer,x=[{fieldName:"cluster_count",label:q,visible:!0,format:{digitSeparator:!0,places:0}}],E=[],G=[l.substitute({count:"{cluster_count}"},C.countSummary)],I=this._isUVRenderer(D)?D.infos:[];a.forEach(B,
function(L){var Y=L.statisticType,X=L.attributeInfo,fa=p.getClusterField(X,Y),sa=this._getFieldLabel(L);if("avg"===Y){var T={fieldName:fa,label:sa,visible:!0,format:"date"===X.attributeType?{dateFormat:"shortDateShortTime"}:{digitSeparator:!0,places:1}};var ka=this._getFieldSummary(L,fa)}else"type"===Y&&(ka="expression/"+fa,T={fieldName:ka,visible:!0},E.push({name:fa,title:sa,returnType:"string",expression:this._getExpression(I,fa)}),ka=this._getFieldSummary(L,ka));T&&x.push(T);ka&&G.push(ka)},this);
return this._createPopupTemplate({fieldInfos:x,expressionInfos:E,description:G.join("\x3cbr/\x3e\x3cbr/\x3e")})},_updateInfoTemplate:function(B){var D=B.toJson(),x=this._isUVRenderer(this._renderer)?this._renderer.infos:[];a.forEach(this._statisticInfos,function(E){var G=E.statisticType;E=p.getClusterField(E.attributeInfo,G);"type"===G&&(G=this._findExpressionInfo(E,D))&&(G.expression=this._getExpression(x,E))},this);return this._createPopupTemplate(D)},_createPopupTemplate:function(B){var D=new b(B),
x=D.title;D.setTitle(y.hitch(this,function(E){var G=this._map&&this._map.infoWindow;if("esri.dijit.PopupMobile"!==(G&&G.declaredClass)||D.info.title)return x.call(D,E);E=(E=E.attributes)&&E.cluster_count;return null==E?"":l.substitute({count:E},C.countTitle)}));return D},_findExpressionInfo:function(B,D){var x;a.some(D.expressionInfos,function(E){E.name===B&&(x=E);return!!x});return x},_escapeDoubleQuotes:function(B){return B?B.replace(/"/g,'\\"'):""},_getExpression:function(B,D){return["var uvInfos \x3d ["+
this._getObjects(B).join(", ")+"];",'var predominantType \x3d Text($feature["'+D+'"]);','var label \x3d "'+this._escapeDoubleQuotes(C.predominantNoneValue)+'";',"for (var i \x3d 0; i \x3c Count(uvInfos); i++) {\nif (uvInfos[i].value \x3d\x3d predominantType) {\nlabel \x3d uvInfos[i].label;\nbreak;\n}\n}\nreturn label;"].join("\n")},_getObjects:function(B){return a.map(B,function(D){return'{"value": "'+String(D.value)+'","label": "'+this._escapeDoubleQuotes(String(D.label))+'"}'},this)},_getFieldLabel:function(B){var D=
B.statisticType,x=B.attributeInfo,E=x.field;B=x.normalizationField;var G="";if("avg"===D)var I=B?C.avgNormFieldLabel:C.avgFieldLabel;else"type"===D&&(I=C.predominantFieldLabel);I&&(D=x.valueExpression?x.valueExpressionTitle:this.layer.getFieldLabel(E),B=B&&this.layer.getFieldLabel(B),G=l.substitute({fieldLabel:D||"",normFieldLabel:B||""},I));return G},_getFieldSummary:function(B,D){var x=B.statisticType,E=B.attributeInfo,G=E.field;B=E.normalizationField;var I="";if("avg"===x)var L=B?C.avgNormFieldSummary:
C.avgFieldSummary;else"type"===x&&(L=C.predominantFieldSummary);L&&(x=E.valueExpression?E.valueExpressionTitle:this.layer.getFieldLabel(G),B=B&&this.layer.getFieldLabel(B),I=l.substitute({fieldLabel:x||"",normFieldLabel:B||"",fieldValue:"{"+D+"}"},L));return I},_removeFromPopup:function(B){var D=this._map.infoWindow,x=D.features;if(x&&x.length){var E=a.filter(x,function(G){return G.getLayer()!==B});E.length<x.length&&(E.length?D.setFeatures(E):(D.clearFeatures(),D.hide()))}},_resetClusterNav:function(){this._resetClusterNavPartial();
this._popupClusterGraphic=null},_resetClusterNavPartial:function(){this._map.infoWindow.removeActions&&this._map.infoWindow.removeActions(this._popupActions);this._hideSingleGraphic(this._popupSingleGraphic);this._popupSingleGraphic=null},_addClusterBoundary:function(B,D){(D=D.clusterFillSymbol)&&(D=new D.constructor(D.toJson()));B=new r(B,D);this._map.graphics.add(B);this._clusterBoundary=B},_removeClusterBoundary:function(){this._map.graphics.remove(this._clusterBoundary);this._clusterBoundary=
null},_createBrowseFeaturesAction:function(){return this._map.infoWindow.addActions([{title:z.NLS_browseFeatures,className:"browseFeatures",callback:y.hitch(this,function(B){B.preventDefault();B=this._map.infoWindow;var D=B.getSelectedFeature(),x=D.getChildGraphics(),E=B.getCurrentAnchor();B.setFeatures(x,{anchor:E});if(x=f.graphicsExtent(x))this._addClusterBoundary(x,B),B.show(this._getPopupLocation(x,E));this._popupClusterGraphic=D})}])[0]},_getPopupLocation:function(B,D){var x=B.getCenter();D=
D.toLowerCase();-1<D.indexOf("top")?x.update(x.x,B.ymax):-1<D.indexOf("bottom")?x.update(x.x,B.ymin):-1<D.indexOf("left")?x.update(B.xmin,x.y):x.update(B.xmax,x.y);return x},_createViewSummaryAction:function(){return this._map.infoWindow.addActions([{title:z.NLS_viewSummary,className:"viewSummary",callback:y.hitch(this,function(B){B.preventDefault();B=this._popupClusterGraphic;var D=this._map.infoWindow;D.setFeatures([B]);D.show(B.geometry);this._popupClusterGraphic=null})}])[0]},_initClusterUpdates:function(){this._updateSizeVariable();
this._updateClusterGraphics();this._eventHandles.push(this._clusterGenerator.on("update-end",y.hitch(this,function(B){(B.mapLevelChange||B.indexChange)&&this._updateSizeVariable();this._updateClusterGraphics()})),this._clusterGenerator.on("index-complete",y.hitch(this,function(){this._updateSizeVariable()})))},_updateClusterGraphics:function(){this._hideSingleGraphics();var B=[],D=[];a.forEach(this._clusterGenerator.clusters,function(x){var E=new r(x.centroid);E.setAggregationSourceLayer(this.layer);
E.setAggregationInfo(x);this._applyClusterAttributes(E,x);1===x.count?(x=this._getSingleGraphic(E),D.push(x)):B.push(E)},this);this._showSingleGraphics(D);this._addGraphics(B)},_addGraphics:function(B){var D=this.container;D.clear();a.forEach(B,function(x){D.add(x)})},_getSingleGraphic:function(B){var D=this._clusterGenerator.getCell(B.getAggregationInfo().primary).features[0],x=this.layer.renderer;x=x&&x.getSymbol(D);var E=this._getSizeByCountVariable(this._renderer);x&&E&&(B=E?this._renderer.getSize(B,
{sizeInfo:E,shape:x.style,resolution:this._map.getResolutionInMeters(),scale:this._map.getScale()}):null,D.setSize(B));return D},_showSingleGraphics:function(B){a.forEach(B,this._showSingleGraphic);this._singleGraphics=B},_hideSingleGraphics:function(){a.forEach(this._singleGraphics,function(B){B.setSize(null);this._hideSingleGraphic(B)},this);this._singleGraphics=null},_clearSingleGraphics:function(){a.forEach(this._singleGraphics,function(B){B.setSize(null)});this._singleGraphics=null},_showSingleGraphic:function(B){B&&
B._resume()},_hideSingleGraphic:function(B){B&&B._suspend()},_updateSizeVariable:function(){this.isClusteringEnabled()&&(this._updateSizeByCountVariable(),this.emit("renderer-change"))},_applyClusterAttributes:function(B,D){B.setAttributes(D.attributes)},_createLayerEventListeners:function(){var B=this.layer;this._eventHandles.push(B.on("visibility-change",y.hitch(this,function(D){this.container.setVisibility(D.visible)})),B.on("scale-range-change",y.hitch(this,function(){this.container.setScaleRange(this.layer.minScale,
this.layer.maxScale)})),B.on("renderer-change",y.hitch(this,function(){this._applyRenderer()})),B.on("info-template-change",y.hitch(this,function(){this._applyInfoTemplate()})))},_createMapEventListeners:function(){this._eventHandles.push(this._map.on("zoom-start",y.hitch(this,function(){this._removeClusterBoundary();this._removeFromPopup(this.container);this._removeFromPopup(this.layer);this._resetClusterNav();this.container.clear();this._hideSingleGraphics()})))},_createPopupEventListeners:function(){var B=
this._map.infoWindow;this._eventHandles.push(B.on("selection-change",y.hitch(this,function(){this._resetClusterNavPartial();var D=this._map.infoWindow.getSelectedFeature(),x=D&&D.getLayer();if(x){var E;x===this.container?(this._removeClusterBoundary(),this._map.infoWindow.addActions&&(E=this._createBrowseFeaturesAction())):x===this.layer&&D._isSuspended()?(this._map.infoWindow.addActions&&(E=this._createViewSummaryAction()),this._popupSingleGraphic=D,this._showSingleGraphic(this._popupSingleGraphic)):
this._removeClusterBoundary();this._popupActions=E?[E]:null}})),B.on("clear-features",y.hitch(this,function(D){this._resetClusterNav();D.isIntermediate||this._removeClusterBoundary()})),B.on("hide",y.hitch(this,function(){this._popupSingleGraphic&&this._popupSingleGraphic._suspend();this._clusterBoundary&&this._clusterBoundary.hide()})),B.on("show",y.hitch(this,function(){this._popupSingleGraphic&&this._popupSingleGraphic._resume();this._clusterBoundary&&this._clusterBoundary.show()})))},_destroyEventListeners:function(){a.forEach(this._eventHandles,
function(B){B.remove()})}});u("extend-esri")&&y.setObject("layers.clustering.ClusterManager",F,n);return F})},"esri/dijit/PopupTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom-construct ../kernel ../InfoTemplate ../PopupInfo ./PopupRenderer".split(" "),function(F,y,a,u,n,t,r,l){F=F([t,r],{declaredClass:"esri.dijit.PopupTemplate","-chains-":{constructor:"manual"},chartTheme:null,constructor:function(d,f){y.mixin(this,f);this.initialize(d,f)},getTitle:function(d){var f;
this.info&&(f=this.titleHasRelatedFields||this.titleHasAsyncExpressions?"":this._getPopupValues(d,this._fetchAttributes(d,null,this.getExpressionFieldsInTitle()),!0).title);return f||""},getContent:function(d){return this.info?(new l({template:this,graphic:d,chartTheme:this.chartTheme},u.create("div"))).domNode:""}});a("extend-esri")&&y.setObject("dijit.PopupTemplate",F,n);return F})},"esri/PopupInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has dojo/Deferred dojo/sniff dojo/promise/all dojox/html/entities ./lang ./kernel ./request ./promiseList ./ArcadeExpression ./tasks/query ./tasks/QueryTask ./tasks/RelationshipQuery ./tasks/StatisticDefinition ./arcadeProfiles/popupProfile ./layers/support/attributeUtils dojo/i18n!dojo/cldr/nls/number".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m,w,p,A,C,z){F=F(null,{declaredClass:"esri.PopupInfo",_reNewline:/(\n)/ig,_reExprField:/^\s*expression\//i,_reExprFieldPattern:/\{expression\/([^\}]+)\}/ig,_exprPrefix:"expression/",_relatedFieldPrefix:"relationships/",_aggregatedFeaturesVariable:"$aggregatedfeatures",initialize:function(q,v){if(q){y.mixin(this,v);this.info=q;this.title=this.getTitle;this.content=this.getContent;this._exprCache=this._compileExpressions(this.info.expressionInfos);var B=this._fieldLabels=
{},D=this._fieldsMap={};this.info.fieldInfos&&a.forEach(this.info.fieldInfos,function(x){var E=x.fieldName.toLowerCase(),G=this._isExpressionField(E)?this.getExpressionInfo(E):null;B[E]=G?G.title:x.label;D[E]=x},this);this.titleHasRelatedFields=!(!this.info.title||-1===this.info.title.indexOf("{"+this._relatedFieldPrefix));this.titleHasAsyncExpressions=this._titleHasAsyncExpressions();this.contentHasAsyncExpressions=this._contentHasAyncExpressions()}},toJson:function(){return u.fromJson(u.toJson(this.info))},
getTitle:function(){},getContent:function(){},getFieldInfo:function(q){var v;a.some(this.info&&this.info.fieldInfos,function(B){B.fieldName===q&&(v=B);return!!v});return v},getExpressionInfo:function(q){if(q=this._getExprField(q)){q=q.toLowerCase();var v;a.some(this.info.expressionInfos,function(B){B.name.toLowerCase()===q&&(v=B);return!!v});return v}},getExpressionFieldsInTitle:function(){return this._getExprFieldsFromTemplatedString(this.info.title)},getExpressionFieldsInContent:function(){var q=
this._collectExprFieldsFromTemplatedString(this.info.description,[]);this.info.description||a.forEach(this.info.fieldInfos,function(v){v.visible&&this._collectExprField(v.fieldName,q)},this);a.forEach(this.info.mediaInfos,function(v){this._collectExprFieldsFromTemplatedString(v.title,q);this._collectExprFieldsFromTemplatedString(v.caption,q);if(v=v.value)this._collectExprFieldsFromTemplatedString(v.linkURL,q),this._collectExprFieldsFromTemplatedString(v.sourceURL,q),a.forEach(v.fields,function(B){this._collectExprField(B,
q)},this),this._collectExprField(v.normalizeField,q),this._collectExprField(v.tooltipField,q)},this);return q},getRequiredExpressionFields:function(){return this.getExpressionFieldsInTitle().concat(this.getExpressionFieldsInContent())},hasGeometryOperations:function(){return a.some(this._getArcadeExpressions(),function(q){return q.hasGeometryOperations()})},hasAsyncExpressions:function(){return a.some(this._getArcadeExpressions(),function(q){return q.async})},initializeArcadeEngine:function(){return A.initialize(this._getArcadeExpressions())},
getComponents:function(q,v){var B=this.info,D={initArcadeEngine:this.initializeArcadeEngine()};B.fieldInfos&&(B=a.filter(B.fieldInfos,function(x){return-1!==x.fieldName.indexOf(this._relatedFieldPrefix)},this))&&0<B.length&&(D.relatedInfo=this._getRelatedRecords({graphic:q,fieldsInfo:B}));this._needFullResolutionFeature(q)&&(D.fullResolutionFeature=this._getFullResolutionFeature(q));this._needAggregatedFeaturesLayer(q)&&(D.aggregatedFeaturesLayer=this._getAggregatedFeaturesLayer(q));return e(D).then(y.hitch(this,
function(x){var E=x.fullResolutionFeature,G=v&&v.evaluateAllExpressions,I=G?null:this.getRequiredExpressionFields();x=(G?this.hasAsyncExpressions():this._hasAsyncExpressions(I))?this._fetchAttributesAsync(q,E,I,x.aggregatedFeaturesLayer):this._fetchAttributes(q,E,I);return e([x]).then(y.hitch(this,function(L){return this._getPopupValues(q,L[0])}))}))},getAttachments:function(q){var v=q.getSourceLayer();q=q.attributes;if(this.info.showAttachments&&v&&v.hasAttachments&&v.objectIdField&&(q=q&&q[v.objectIdField]))return v.queryAttachmentInfos(q)},
_needAggregatedFeaturesLayer:function(q){return q.isAggregate()?a.some(this._getArcadeExpressions(),function(v){return v.hasVariable(this._aggregatedFeaturesVariable)},this):!1},_getAggregatedFeaturesLayer:function(q){return q.getAggregationSourceLayer().getFeatureCollectionLayer(q.getChildGraphics()).always(function(v){return v instanceof Error?null:v})},_needFullResolutionFeature:function(q){return(q=q.getSourceLayer())?"function"===typeof q.getMaxAllowableOffset&&0<q.getMaxAllowableOffset()&&this.hasGeometryOperations():
!1},_getFullResolutionFeature:function(q){var v=q.getSourceLayer(),B=v.objectIdField;q=(q=q.attributes)&&B&&q[B];if(null==q)return null;var D=new k;D.where=B+"\x3d"+q;D.maxAllowableOffset=0;D.outFields=[B];v._enableCacheHint(D);return v.queryFeatures(D).then(function(x){return x.features&&x.features[0]})},_isExpressionField:function(q){return this._reExprField.test(q)},_getExprField:function(q){return this._isExpressionField(q)?q.replace(this._reExprField,""):null},_collectExprField:function(q,v){(q=
this._getExprField(q))&&v.push(q);return v},_collectExprFieldsFromTemplatedString:function(q,v){q=this._getExprFieldsFromTemplatedString(q);q.length&&Array.prototype.push.apply(v,q);return v},_getExprFieldsFromTemplatedString:function(q){q=q?q.match(this._reExprFieldPattern):null;return a.map(q,function(v){return v.replace(this._reExprFieldPattern,"$1")},this)},_titleHasAsyncExpressions:function(){return this._hasAsyncExpressions(this.getExpressionFieldsInTitle())},_contentHasAyncExpressions:function(){return this._hasAsyncExpressions(this.getExpressionFieldsInContent())},
_hasAsyncExpressions:function(q){return a.some(q,function(v){v=this._exprCache[v];return!(!v||!v.async)},this)},_compileExpressions:function(q){var v={};a.forEach(q,function(B){var D=B.returnType&&B.returnType.toLowerCase();v[B.name]=new h({expression:B.expression,returnType:"number"===D?"number":"string",profile:A})});return v},_getArcadeExpressions:function(){var q=[],v;for(v in this._exprCache)q.push(this._exprCache[v]);return q},_fetchAttributesAsync:function(q,v,B,D){var x=this._fetchAttributes(q,
v,B,D);q={};for(var E in x)(v=x[E])&&v.then&&(q[E]=v);return e(q).then(y.hitch(this,function(G){for(var I in G){var L=G[I];x[I]=L instanceof Error?null:this._processArcadeResult(L)}return x}))},_processArcadeResult:function(q){"string"===typeof q&&(q=f.encode(q));return q},_fetchAttributes:function(q,v,B,D){var x=y.clone(q.attributes)||{},E=v&&v.geometry,G=this._exprPrefix,I=this._exprCache;B=B||a.map(this.info.expressionInfos,function(L){return L.name});a.forEach(B,function(L){var Y=G+L;L=(L=I[L])?
q.evaluateExpression(L,this._getEvalOptions(L,q,E,D)):null;x[Y]=this._processArcadeResult(L)},this);return x},_getEvalOptions:function(q,v,B,D){var x=q.hasGeometryOperations(),E=v.getSourceLayer(),G=E&&(E.getMap()||E.parentLayer&&E.parentLayer.getMap());D&&(D._map=G);q=A.getEvalOptions({expression:q,feature:v,layer:E,aggregatedFeaturesLayer:D,map:G,spatialReference:G&&G.spatialReference});v=q.context.vars.$feature;x=!(!x||!B);v&&x&&(v._geometry=B);q.skipCache=x;return q},_getPopupValues:function(q,
v,B){v=v||this._fetchAttributes(q);var D=this.info,x=q.getSourceLayer(),E=y.clone(v),G="",I="",L,Y,X=x&&x._getDateOpts&&x._getDateOpts().properties;X=X&&X.slice(0);var fa={dateFormat:{properties:X,formatter:"DateFormat"+this._insertOffset(this._dateFormats.shortDateShortTime)},format:null};if(this._relatedInfo)for(ka in this._relatedInfo)if(this._relatedInfo.hasOwnProperty(ka)){var sa=this._relatedInfo[ka],T=this._relatedLayersInfo[ka];sa&&(a.forEach(sa.relatedFeatures,function(Ba){for(Y in Ba.attributes)if(Ba.attributes.hasOwnProperty(Y)&&
"esriRelCardinalityOneToOne"===T.relation.cardinality){var M=this._toRelatedFieldName([T.relation.id,Y]);v[M]=E[M]=Ba.attributes[Y]}},this),a.forEach(sa.relatedStatsFeatures,function(Ba){for(Y in Ba.attributes)if(Ba.attributes.hasOwnProperty(Y)){var M=this._toRelatedFieldName([T.relation.id,Y]);v[M]=E[M]=Ba.attributes[Y]}},this))}for(L in E){var ka=this._fieldsMap[L.toLowerCase()];sa=this._getLayerFieldInfo(x,L);ka&&sa&&(ka.fieldName=sa.name);E[L]=this._formatValue(E[L],L,fa);X&&ka&&ka.format&&ka.format.dateFormat&&
(ka=a.indexOf(X,L),-1<ka&&X.splice(ka,1))}if(x)for(L in X=x.typeIdField,v)if(v.hasOwnProperty(L)&&-1===L.indexOf(this._relatedFieldPrefix)){var ma=v[L];b.isDefined(ma)&&(ka=this._getDomainName(x,q,L,ma),b.isDefined(ka)?E[L]=ka:L===X&&(ka=this._getTypeName(x,q,ma),b.isDefined(ka)&&(E[L]=ka)))}D.title&&(G=this._processFieldsInLinks(this._fixTokens(D.title,x),v),G=y.trim(this._removeEmptyHref(b.substitute(E,G,fa)||"")));if(B)return{title:G};D.description&&(I=this._processFieldsInLinks(this._fixTokens(D.description,
x),v),I=y.trim(this._removeEmptyHref(b.substitute(E,I,fa)||"")));if(D.fieldInfos){var wa=[];a.forEach(D.fieldInfos,function(Ba){(L=Ba.fieldName)&&Ba.visible&&wa.push([this._fieldLabels[L.toLowerCase()]||L,b.substitute(E,"${"+L+"}",fa)||""])},this)}var ja;if(D.mediaInfos){var ua=[];a.forEach(D.mediaInfos,function(Ba){ja=0;ma=Ba.value;switch(Ba.type){case "image":var M=ma.sourceURL;M=M&&y.trim(this._removeEmptyHref(b.substitute(v,this._fixTokens(M,x))));ja=!!M;break;case "piechart":case "linechart":case "columnchart":case "barchart":M=
ma.normalizeField;ma.fields=a.map(ma.fields,function(Ca){return(Z=this._getLayerFieldInfo(x,Ca))?Z.name:Ca},this);if(M){var Z=this._getLayerFieldInfo(x,M);ma.normalizeField=Z?Z.name:M}ja=a.some(ma.fields,function(Ca){return b.isDefined(v[Ca])||-1!==Ca.indexOf(this._relatedFieldPrefix)&&this._relatedInfo},this);break;default:return}if(ja){Ba=y.clone(Ba);ma=Ba.value;M=Ba.title?this._processFieldsInLinks(this._fixTokens(Ba.title,x),v):"";var ia=Ba.caption?this._processFieldsInLinks(this._fixTokens(Ba.caption,
x),v):"";Ba.title=M?y.trim(this._removeEmptyHref(b.substitute(E,M,fa)||"")):"";Ba.caption=ia?y.trim(this._removeEmptyHref(b.substitute(E,ia,fa)||"")):"";if("image"===Ba.type)ma.sourceURL=b.substitute(v,this._fixTokens(ma.sourceURL,x)),ma.linkURL&&(ma.linkURL=y.trim(b.substitute(v,this._fixTokens(ma.linkURL,x))||""));else{var qa,ya;a.forEach(ma.fields,function(Ca,Ia){if(-1!==Ca.indexOf(this._relatedFieldPrefix))ya=this._getRelatedChartInfos(Ca,ma,v,fa),ya instanceof Array?ma.fields=ya:ma.fields[Ia]=
ya;else{var Oa=v[Ca];Oa=void 0===Oa?null:Oa;qa=v[ma.normalizeField]||0;Oa&&qa&&(Oa/=qa);ma.fields[Ia]={y:Oa,tooltip:(this._fieldLabels[Ca.toLowerCase()]||Ca)+":\x3cbr/\x3e"+this._formatValue(Oa,Ca,fa,!!qa)}}},this)}ua.push(Ba)}},this)}return{title:G,description:I,hasDescription:!!D.description,fields:wa&&wa.length?wa:null,mediaInfos:ua&&ua.length?ua:null,formatted:E,editSummary:!1!==D.showLastEditInfo&&x&&x.getEditSummary?x.getEditSummary(q):""}},_getRelatedChartInfos:function(q,v,B,D){var x,E;var G=
[];var I=this._fromRelatedFieldName(q);var L=I[0];var Y=this._relatedInfo[L];L=this._relatedLayersInfo[L];Y&&a.forEach(Y.relatedFeatures,function(X){X=X.attributes;var fa;for(fa in X)if(X.hasOwnProperty(fa)&&fa===I[1]){var sa={};E=X[fa];v.normalizeField&&(x=-1!==v.normalizeField.indexOf(this._relatedFieldPrefix)?X[this._fromRelatedFieldName(v.normalizeField)[1]]:B[v.normalizeField]);E&&x&&(E/=x);if(v.tooltipField)if(-1!==v.tooltipField.indexOf(this._relatedFieldPrefix)){var T=this._fromRelatedFieldName(v.tooltipField)[1],
ka=b.isDefined(X[T])?this._formatValue(X[T],v.tooltipField,D,!!x):T;sa.tooltip=ka+":\x3cbr/\x3e"+this._formatValue(E,T,D,!!x)}else sa.tooltip=(this._fieldLabels[q.toLowerCase()]||q)+":\x3cbr/\x3e"+this._formatValue(E,v.tooltipField,D,!!x);else sa.tooltip=E;sa.y=E;G.push(sa)}},this);return"esriRelCardinalityOneToMany"===L.relation.cardinality||"esriRelCardinalityManyToMany"===L.relation.cardinality?G:G[0]},_dateFormats:{shortDate:"(datePattern: 'M/d/y', selector: 'date')",shortDateShortTime:"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",
shortDateShortTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLongTime:"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLongTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",shortDateLE:"(datePattern: 'd/M/y', selector: 'date')",shortDateLEShortTime:"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateLEShortTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",
shortDateLELongTime:"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLELongTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthDayYear:"(datePattern: 'MMMM d, y', selector: 'date')",longMonthDayYearShortTime:"(datePattern: 'MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')",longMonthDayYearShortTime24:"(datePattern: 'MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",longMonthDayYearLongTime:"(datePattern: 'MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",
longMonthDayYearLongTime24:"(datePattern: 'MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')",dayShortMonthYear:"(datePattern: 'd MMM y', selector: 'date')",dayShortMonthYearShortTime:"(datePattern: 'd MMM y', timePattern: 'h:mm a', selector: 'date and time')",dayShortMonthYearShortTime24:"(datePattern: 'd MMM y', timePattern: 'H:mm', selector: 'date and time')",dayShortMonthYearLongTime:"(datePattern: 'd MMM y', timePattern: 'h:mm:ss a', selector: 'date and time')",dayShortMonthYearLongTime24:"(datePattern: 'd MMM y', timePattern: 'H:mm:ss', selector: 'date and time')",
longDate:"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",longDateShortTime:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')",longDateShortTime24:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",longDateLongTime:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",longDateLongTime24:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthYear:"(datePattern: 'MMMM y', selector: 'date')",
shortMonthYear:"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"},_dateFormatsJson:{shortDate:{datePattern:"M/d/y",selector:"date"},shortDateShortTime:{datePattern:"M/d/y",timePattern:"h:mm a",selector:"date and time"},shortDateShortTime24:{datePattern:"M/d/y",timePattern:"H:mm",selector:"date and time"},shortDateLongTime:{datePattern:"M/d/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLongTime24:{datePattern:"M/d/y",timePattern:"H:mm:ss",selector:"date and time"},
shortDateLE:{datePattern:"d/M/y",selector:"date"},shortDateLEShortTime:{datePattern:"d/M/y",timePattern:"h:mm a",selector:"date and time"},shortDateLEShortTime24:{datePattern:"d/M/y",timePattern:"H:mm",selector:"date and time"},shortDateLELongTime:{datePattern:"d/M/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLELongTime24:{datePattern:"d/M/y",timePattern:"H:mm:ss",selector:"date and time"},longMonthDayYear:{datePattern:"MMMM d, y",selector:"date"},longMonthDayYearShortTime:{datePattern:"MMMM d, y",
timePattern:"h:mm a",selector:"date and time"},longMonthDayYearShortTime24:{datePattern:"MMMM d, y",timePattern:"H:mm",selector:"date and time"},longMonthDayYearLongTime:{datePattern:"MMMM d, y",timePattern:"h:mm:ss a",selector:"date and time"},longMonthDayYearLongTime24:{datePattern:"MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},dayShortMonthYear:{datePattern:"d MMM y",selector:"date"},dayShortMonthYearShortTime:{datePattern:"d MMM y",timePattern:"h:mm a",selector:"date and time"},dayShortMonthYearShortTime24:{datePattern:"d MMM y",
timePattern:"H:mm",selector:"date and time"},dayShortMonthYearLongTime:{datePattern:"d MMM y",timePattern:"h:mm:ss a",selector:"date and time"},dayShortMonthYearLongTime24:{datePattern:"d MMM y",timePattern:"H:mm:ss",selector:"date and time"},longDate:{datePattern:"EEEE, MMMM d, y",selector:"date"},longDateShortTime:{datePattern:"EEEE, MMMM d, y",timePattern:"h:mm a",selector:"date and time"},longDateShortTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm",selector:"date and time"},longDateLongTime:{datePattern:"EEEE, MMMM d, y",
timePattern:"h:mm:ss a",selector:"date and time"},longDateLongTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},longMonthYear:{datePattern:"MMMM y",selector:"date"},shortMonthYear:{datePattern:"MMM y",selector:"date"},year:{datePattern:"y",selector:"date"}},_reHref:/href\s*=\s*(")([^"]+)"/ig,_reHrefApos:/href\s*=\s*(')([^']+)'/ig,_fixTokens:function(q,v){var B=this;return q.replace(/(\{([^\{\r\n]+)\})/g,function(D,x,E){D=B._getLayerFieldInfo(v,E);return"$"+(D?"{"+
D.name+"}":x)})},_encodeAttributes:function(q,v){q=y.clone(q)||{};var B,D;for(B in q)(D=q[B])&&"string"===typeof D&&(D=v?D:encodeURIComponent(D),D=D.replace(/'/g,"\x26apos;"),q[B]=D);return q},_processFieldsInLinks:function(q,v){var B=this._encodeAttributes(v),D=this._encodeAttributes(v,!0);v=y.hitch(this,this._addValuesToHref,v,B,D);q&&(q=q.replace(this._reHref,v).replace(this._reHrefApos,v));return q},_addValuesToHref:function(q,v,B,D,x,E){E=E&&y.trim(E);return D=b.substitute(E&&0===E.indexOf("${")?
"'"===x?B:q:v,D)},_getLayerFieldInfo:function(q,v){return q&&q.getField?q.getField(v):null},_formatValue:function(q,v,B,D){var x=this._fieldsMap[v.toLowerCase()],E=x&&x.format;v=-1!==a.indexOf(B.dateFormat.properties,v);var G="number"===typeof q&&!v&&(!E||!E.dateFormat);if(!b.isDefined(q)||!x||!b.isDefined(E))return this._applyFormatting(q,G);x=E.hasOwnProperty("places")||E.hasOwnProperty("digitSeparator");var I=E.hasOwnProperty("digitSeparator")?E.digitSeparator:!0;if(x&&!v)var L={formatType:"NumberFormat",
places:b.isDefined(E.places)&&(!D||0<E.places)?Number(E.places):Infinity};else if(E.dateFormat)L=y.mixin({formatType:"DateFormat",utcOffset:this.utcOffset},this._dateFormatsJson[E.dateFormat]||this._dateFormatsJson.shortDateShortTime);else return this._applyFormatting(q,G);var Y=this._applyFormatFunctions(q,L,B);x&&-1<q.constructor.toString().indexOf("Array")&&(Y="",a.forEach(q,y.hitch(this,function(X,fa){fa&&(Y+=" ");Y+=this._applyFormatFunctions(X,L,B)})));x&&!I&&z.group&&(Y=Y.replace(new RegExp("\\"+
z.group,"g"),""));v&&(Y='\x3cspan class\x3d"esriDateValue"\x3e'+Y+"\x3c/span\x3e");return this._applyFormatting(Y,G)},_applyFormatFunctions:function(q,v,B){v&&B&&(B.format={myKey:v});q=b.substitute({myKey:q},"${myKey}",B)||"";v&&B&&(B.format=null);return q},_applyFormatting:function(q,v){return v?this._forceLTR(q):this._applyPreWrap(q)},_forceLTR:function(q){var v=l("ie");return v&&10>=v?q:"\x3cspan class\x3d'esriNumericValue'\x3e"+q+"\x3c/span\x3e"},_applyPreWrap:function(q){return"string"===typeof q?
q.replace(this._reNewline,"\x3cspan class\x3d'charNewLine'\x3e$1\x3c/span\x3e"):q},_insertOffset:function(q){q&&(q=b.isDefined(this.utcOffset)?q.replace(/\)\s*$/,", utcOffset:"+this.utcOffset+")"):q);return q},_getDomainName:function(q,v,B,D){return(q=q.getDomain&&q.getDomain(B,{feature:v}))&&q.codedValues?q.getName(D):null},_getTypeName:function(q,v,B){return(q=q.getType&&q.getType(v))&&q.name},_getRelatedRecords:function(q){var v=q.graphic,B;this._relatedLayersInfoPromise||(this._relatedLayersInfoPromise=
this._getRelatedLayersInfo(q).then(y.hitch(this,function(D){for(B in D)D.hasOwnProperty(B)&&D[B]&&(this._relatedLayersInfo[B].relatedLayerInfo=D[B])})));return this._relatedLayersInfoPromise.then(y.hitch(this,function(){return this._queryRelatedLayers(v)})).then(y.hitch(this,function(D){this._setRelatedRecords(v,D);return D}))},_getRelatedLayersInfo:function(q){var v=q.fieldsInfo,B,D={};var x=q.graphic.getSourceLayer();this._relatedLayersInfo||(this._relatedLayersInfo={});a.forEach(v,function(E){var G;
var I=this._fromRelatedFieldName(E.fieldName);var L=I[0];I=I[1];if(L&&(!this._relatedLayersInfo[L]&&x&&x.relationships&&(a.some(x.relationships,function(X){if(X.id==L)return G=X,!0}),G&&(this._relatedLayersInfo[L]={relation:G,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[L]&&(this._relatedLayersInfo[L].relatedFields.push(I),E.statisticType))){var Y=new p;Y.statisticType=E.statisticType;Y.onStatisticField=I;Y.outStatisticFieldName=I;this._relatedLayersInfo[L].outStatistics.push(Y)}},
this);for(B in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(B)&&this._relatedLayersInfo[B]&&(q=this._relatedLayersInfo[B].relation,q=x.url.replace(/[0-9]+$/,q.relatedTableId),this._relatedLayersInfo[B].relatedLayerUrl=q,D[B]=g({url:q,content:{f:"json"},callbackParamName:"callback"}));return d(D)},_queryRelatedLayers:function(q){var v={},B;for(B in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(B)&&(v[B]=this._queryRelatedLayer({graphic:q,relatedInfo:this._relatedLayersInfo[B]}));
return d(v)},_queryRelatedLayer:function(q){var v,B;var D=q.graphic;var x=D.getSourceLayer();var E=x.url.match(/[0-9]+$/g)[0];var G=q.relatedInfo;var I=G.relatedLayerInfo;var L=G.relatedLayerUrl;var Y=G.relation;q=a.filter(I.relationships,function(ma){return ma.relatedTableId===parseInt(E,10)});1===q.length?v=q[0]:1<q.length&&a.some(q,function(ma){ma.id===Y.id&&(v=ma);return!!v});if(v){var X=new k;a.some(I.fields,function(ma){if(ma.name===v.keyField)return B=-1!==a.indexOf(["esriFieldTypeSmallInteger",
"esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],ma.type)?"number":"string",!0});if(v.relationshipTableId&&v.keyFieldInRelationshipTable){var fa=new r;this._queryRelatedRecords(D,v).then(y.hitch(this,function(ma){var wa;(wa=ma[D.attributes[x.objectIdField]])?(ma=a.map(wa.features,function(ja){return ja.attributes[I.objectIdField]},this),G.outStatistics&&0<G.outStatistics.length&&I.supportsStatistics&&(T=new k,T.where=this._chunkWhereInClause(I.objectIdField,ma,1E3),T.outFields=
X.outFields,T.outStatistics=G.outStatistics),T&&(ka=new m(L),ka.execute(T).then(y.hitch(this,function(ja){var ua=[];ua.push(wa);ua.push(ja);fa.resolve(ua)})))):fa.resolve()}))}else{var sa="string"===B?v.keyField+"\x3d'"+D.attributes[Y.keyField]+"'":v.keyField+"\x3d"+D.attributes[Y.keyField];X.where=sa;X.outFields=G.relatedFields;if(G.outStatistics&&0<G.outStatistics.length&&I.supportsStatistics){var T=new k;T.where=X.where;T.outFields=X.outFields;T.outStatistics=G.outStatistics}var ka=new m(L);sa=
[];sa.push(ka.execute(X));T&&sa.push(ka.execute(T))}}return sa?d(sa):fa?fa.promise:void 0},_setRelatedRecords:function(q,v){this._relatedInfo=[];for(var B in v)v.hasOwnProperty(B)&&v[B]&&(q=v[B],this._relatedInfo[B]={},this._relatedInfo[B].relatedFeatures=q[0].features,b.isDefined(q[1])&&(this._relatedInfo[B].relatedStatsFeatures=q[1].features))},_handlerErrorResponse:function(q,v){q.reject(v)},_fromRelatedFieldName:function(q){var v=[];-1!==q.indexOf(this._relatedFieldPrefix)&&(q=q.split("/"),v=
q.slice(1));return v},_toRelatedFieldName:function(q){var v="";q&&0<q.length&&(v=this._relatedFieldPrefix+q[0]+"/"+q[1]);return v},_queryRelatedRecords:function(q,v){var B=q.getSourceLayer(),D=new w;D.outFields=["*"];D.relationshipId=v.id;D.objectIds=[q.attributes[B.objectIdField]];return B.queryRelatedFeatures(D)},_removeEmptyHref:function(q){return q.replace(/href=(""|'')/gi,"")},_chunkWhereInClause:function(q,v,B){for(var D=0,x=[];D<v.length;)x.push(q+" IN ("+v.slice(D,B+D)+")"),D+=B;return x.join(" OR ")}});
t("extend-esri")&&(c.PopupInfo=c.PopupInfoTemplate=F);return F})},"dojox/html/entities":function(){define(["dojo/_base/lang"],function(F){var y=F.getObject("dojox.html.entities",!0),a=function(n,t){if(t._encCache&&t._encCache.regexp&&t._encCache.mapper&&t.length==t._encCache.length){var r=t._encCache.mapper;var l=t._encCache.regexp}else{r={};l=["["];var d;for(d=0;d<t.length;d++)r[t[d][0]]="\x26"+t[d][1]+";",l.push(t[d][0]);l.push("]");l=new RegExp(l.join(""),"g");t._encCache={mapper:r,regexp:l,length:t.length}}return n=
n.replace(l,function(f){return r[f]})},u=function(n,t){if(t._decCache&&t._decCache.regexp&&t._decCache.mapper&&t.length==t._decCache.length){var r=t._decCache.mapper;var l=t._decCache.regexp}else{r={};l=["("];var d;for(d=0;d<t.length;d++){var f="\x26"+t[d][1]+";";d&&l.push("|");r[f]=t[d][0];l.push(f)}l.push(")");l=new RegExp(l.join(""),"g");t._decCache={mapper:r,regexp:l,length:t.length}}return n=n.replace(l,function(b){return r[b]})};y.html=[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"],
["\u00a0","nbsp"]];y.latin=[["\u00a1","iexcl"],["\u00a2","cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4","curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],
["\u00ba","ordm"],["\u00bb","raquo"],["\u00bc","frac14"],["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],
["\u00d4","Ocirc"],["\u00d5","Otilde"],["\u00d6","Ouml"],["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd","Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],
["\u00ee","icirc"],["\u00ef","iuml"],["\u00f0","eth"],["\u00f1","ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7","divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398",
"Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],
["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135",
"alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],
["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],["\u222b","int"],["\u2234","there4"],["\u223c","sim"],["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],
["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665","hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153","oelig"],["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],
["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039","lsaquo"],["\u203a","rsaquo"]];y.encode=function(n,t){n&&(t?n=a(n,t):(n=a(n,y.html),n=a(n,y.latin)));return n};y.decode=function(n,t){n&&(t?n=u(n,t):(n=u(n,y.html),n=u(n,y.latin)));return n};return y})},"esri/ArcadeExpression":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./layers/support/attributeUtils ./support/expressionUtils".split(" "),function(F,y,a,u,n,t){F=F(null,{declaredClass:"esri.ArcadeExpression",
expression:null,profile:null,returnType:null,async:null,id:null,syntaxTree:null,_traits:null,_attributeDef:null,_attributeCache:null,_compiled:!1,constructor:function(r){y.mixin(this,r);this.returnType=this.returnType||"string";this.id=n.getAttributeId(this.expression);this._setSyntaxTree(this.profile.parse(this));this.async=this.async||this.profile.isAsync(this)},hasGeometryOperations:function(){var r=this._traits.geometryOperations;void 0===r&&(r=this._traits.geometryOperations=t.hasGeometryOperations(this.syntaxTree));
return r},hasFeatureSetOperations:function(){var r=this._traits.featureSetOperations;void 0===r&&(r=this._traits.featureSetOperations=t.hasFeatureSetOperations(this.syntaxTree));return r},hasVariable:function(r){var l=this._traits.variables;void 0===l[r]&&(l[r]=t.hasVariable(this.syntaxTree,r));return l[r]},hasFunction:function(r){var l=this._traits.functions;void 0===l[r]&&(l[r]=t.hasFunction(this.syntaxTree,r));return l[r]},evaluate:function(r){this._compile();var l=this._attributeCache.compiledFunc;
return this.async?t.executeAsyncFunction(l,r):t.executeFunction(l,r)},_setSyntaxTree:function(r){this.syntaxTree=r;this._compiled=!1;this._traits={variables:{},functions:{}};this._createLegacyValueObjects()},_createLegacyValueObjects:function(){this._attributeDef={valueExpression:this.expression};this._attributeCache={attributeInfo:this._attributeDef,isNumeric:"number"===this.returnType,idSource:this.expression,id:this.id,hasExpr:!0,compiledFunc:null,syntaxTree:this.syntaxTree,isScaleDriven:!1,dependsOnView:this.hasVariable("$view"),
dependsOnGeometry:this.hasGeometryOperations(),isJSFunc:!1}},_compile:function(){this._compiled||(this._attributeCache.compiledFunc=this.profile.compile(this),this._compiled=!0)}});a("extend-esri")&&(u.ArcadeExpression=F);return F})},"esri/tasks/RelationshipQuery":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","../kernel"],function(F,y,a,u,n){F=F(null,{declaredClass:"esri.tasks.RelationshipQuery",definitionExpression:"",relationshipId:null,returnGeometry:!1,
objectIds:null,outSpatialReference:null,outFields:null,orderByFields:null,toJson:function(){var t={definitionExpression:this.definitionExpression,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},r=this.objectIds,l=this.outFields,d=this.outSpatialReference,f=this.orderByFields;r&&(t.objectIds=r.join(","));l&&(t.outFields=l.join(","));d&&(t.outSR=d.wkid||a.toJson(d.toJson()));f&&(t.orderByFields=
f.join(","));t._ts=this._ts;return t}});u("extend-esri")&&y.setObject("tasks.RelationshipQuery",F,n);return F})},"esri/arcadeProfiles/popupProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "),function(F,y,a,u,n,t,r,l){F=new (F(null,{declaredClass:"esri.arcadeProfiles.PopupProfile",defaults:{globals:{featureSet:["$layer","$datastore","$map","$aggregatedfeatures"],async:["$layer","$datastore",
"$map","$aggregatedfeatures"]},context:{vars:{$feature:"any",$layer:"any",$datastore:"any",$map:"any",$aggregatedfeatures:"any"}}},initialize:function(d){var f=[];l.hasGeometryOperations(d)&&f.push(r.enableGeometryOperations());(l.hasFeatureSetOperations(d)||l.hasVariables(d,this.defaults.globals.featureSet))&&f.push(r.enableFeatureSetOperations());l.isAsync(d)&&f.push(r.enableAsyncOperations());return n(f)},isAsync:function(d){d=[d];return l.hasFeatureSetOperations(d)||l.hasVariables(d,this.defaults.globals.async)},
parse:function(d){return r.createSyntaxTree(d.expression)},compile:function(d){var f=y.clone(this.defaults.context);f.useAsync=d.async;return d.syntaxTree?r.createFunction(d.syntaxTree,f):null},getEvalOptions:function(d){var f=d.expression,b=d.feature,c=d.layer,g=d.aggregatedFeaturesLayer,e=d.map;d=d.spatialReference;b=b&&f.hasVariable("$feature")?t.createFromGraphicLikeObject(b.geometry,b.attributes,c):null;var h,k;if(c){var m={spatialReference:d};f.hasVariable("$layer")&&(h=c.getMap()?r.createFeatureSetFromLayer(c,
m):r.createFeatureSetFromLayerUrl(c.url,m));if(f.hasVariable("$datastore"))var w=(w=l.getServiceUrl(c.url))?r.createFeatureSetCollectionFromServiceUrl(w,m):null;f.hasVariable("$aggregatedfeatures")&&g&&(k=g.getMap()?r.createFeatureSetFromLayer(g,m):null)}f=e&&f.hasVariable("$map")?r.createFeatureSetCollectionFromMap(e):null;return{context:{vars:{$feature:b,$layer:h,$datastore:w,$map:f,$aggregatedfeatures:k},spatialReference:d}}}}));a("extend-esri")&&y.setObject("arcadeProfiles.popupProfile",F,u);
return F})},"esri/dijit/PopupRenderer":function(){define("require dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/sniff dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style ../libs/sanitizer/Sanitizer dojox/html/entities dijit/_Widget dijit/_Templated ../kernel ../lang ../urlUtils ./_EventedWidget dojo/i18n!../nls/jsapi dojo/NodeList-dom".split(" "),function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m,w,p,A,C,z){var q=0,v=z.widgets.popup,
B=z.widgets.templatePicker;y=y([C,k,m],{declaredClass:"esri.dijit._PopupRenderer",_sanitizer:new e({whiteList:{span:["class"],dd:[],dl:[],dt:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],sub:[],sup:[],animate:[],animatetransform:[],circle:[],clippath:[],defs:[],ellipse:[],g:[],image:[],line:[],lineargradient:[],marker:[],mask:[],path:[],pattern:[],polygon:[],polyline:[],radialgradient:[],rect:[],stop:[],svg:[],"switch":[],symbol:[],text:[],textpath:[],tspan:[],use:[]}},!0),constructor:function(){this._nls=
u.mixin({},v)},templateString:"\x3cdiv class\x3d'esriViewPopup'\x3e\x3cdiv class\x3d'statusSection hidden' dojoAttachPoint\x3d'_status'\x3e\x3c/div\x3e\x3cdiv class\x3d'mainSection'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_title'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'_description'\x3e\x3c/div\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'attachmentsSection hidden'\x3e\x3cdiv\x3e${_nls.NLS_attach}:\x3c/div\x3e\x3cul dojoAttachPoint\x3d'_attachmentsList'\x3e\x3c/ul\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaSection hidden'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_mediaTitle'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv class\x3d'caption' dojoAttachPoint\x3d'_mediaCaption'\x3e\x3c/div\x3e\x3cdiv class\x3d'gallery' dojoAttachPoint\x3d'_gallery'\x3e\x3cdiv class\x3d'mediaHandle prev' dojoAttachPoint\x3d'_prevMedia' dojoAttachEvent\x3d'onclick: _goToPrevMedia'\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaHandle next' dojoAttachPoint\x3d'_nextMedia' dojoAttachEvent\x3d'onclick: _goToNextMedia'\x3e\x3c/div\x3e\x3cul class\x3d'summary'\x3e\x3cli class\x3d'image mediaCount hidden' dojoAttachPoint\x3d'_imageCount'\x3e0\x3c/li\x3e\x3cli class\x3d'image mediaIcon hidden'\x3e\x3c/li\x3e\x3cli class\x3d'chart mediaCount hidden' dojoAttachPoint\x3d'_chartCount'\x3e0\x3c/li\x3e\x3cli class\x3d'chart mediaIcon hidden'\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'frame' dojoAttachPoint\x3d'_mediaFrame'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummarySection hidden' dojoAttachPoint\x3d'_editSummarySection'\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3cdiv class\x3d'break hidden' dojoAttachPoint\x3d'_mediaBreak'\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummary' dojoAttachPoint\x3d'_editSummary'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
showTitle:!0,startup:function(){this.inherited(arguments);this._showStatus(B.loading);this._contentDfd=this.template.getComponents(this.graphic).then(u.hitch(this,this._handleComponentsSuccess)).otherwise(u.hitch(this,this._handleComponentsError))},destroy:function(){this._contentDfd&&this._contentDfd.cancel();this._attachmentsDfd&&this._attachmentsDfd.cancel();this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._contentDfd=this._attachmentsDfd=null;this.inherited(arguments)},
_goToPrevMedia:function(){0>this._mediaPtr-1||(this._mediaPtr--,this._updateUI(),this._displayMedia())},_goToNextMedia:function(){this._mediaPtr+1!==this._mediaInfos.length&&(this._mediaPtr++,this._updateUI(),this._displayMedia())},_updateUI:function(){var D=this._mediaInfos,x=D.length,E=this.domNode,G=this._prevMedia,I=this._nextMedia;if(1<x){var L=0,Y=0;n.forEach(D,function(X){"image"===X.type?L++:-1!==X.type.indexOf("chart")&&Y++});L&&(f.set(this._imageCount,"innerHTML",L),t.query(".summary .image",
E).removeClass("hidden"));Y&&(f.set(this._chartCount,"innerHTML",Y),t.query(".summary .chart",E).removeClass("hidden"))}else t.query(".summary",E).addClass("hidden"),b.add(G,"hidden"),b.add(I,"hidden");D=this._mediaPtr;0===D?b.add(G,"hidden"):b.remove(G,"hidden");D===x-1?b.add(I,"hidden"):b.remove(I,"hidden");this._destroyFrame()},_displayMedia:function(){var D=this._mediaInfos[this._mediaPtr],x=D.title,E=D.caption,G=t.query(".mediaSection .hzLine",this.domNode)[0];f.set(this._mediaTitle,"innerHTML",
this._sanitizer.sanitize(x));b[x?"remove":"add"](this._mediaTitle,"hidden");f.set(this._mediaCaption,"innerHTML",this._sanitizer.sanitize(E));b[E?"remove":"add"](this._mediaCaption,"hidden");b[x&&E?"remove":"add"](G,"hidden");this._rid=null;if("image"===D.type)this._showImage(D);else{var I=this;x=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"];E=D.value.theme||this.chartTheme;u.isString(E)&&(E=E.replace(/\./gi,"/"),-1===E.indexOf("/")&&(E="dojox/charting/themes/"+E));E||(E="./Rainbow");
x.push(E);try{var L=this._rid=q++;F(x,function(Y,X,fa){L===I._rid&&(I._rid=null,I._showChart(D.type,D.value,Y,X,fa))})}catch(Y){console.log("PopupRenderer: error loading modules")}}},_preventNewTab:function(D){return(D=D&&u.trim(D).toLowerCase())&&(0===D.indexOf("mailto:")||0===D.indexOf("tel:"))},_showImage:function(D){b.add(this._mediaFrame,"image");var x=g.get(this._gallery,"height"),E=D.value,G=h.decode(E.linkURL);E=h.decode(E.sourceURL);var I;G&&(I=c.create("a",{href:G,target:this._preventNewTab(G)?
"":"_blank"},this._mediaFrame));G=D.refreshInterval?this._addURLParameter(E,"timestamp",Date.now()):E;c.create("img",{className:"esriPopupMediaImage",src:G},I||this._mediaFrame);var L=t.query(".esriPopupMediaImage",this._mediaFrame)[0];this._imageLoadHandle=a.connect(L,"onload",this,function(){this._clearImageHandles();this._imageLoaded(L,x);this._initImageRefresh(D)})},_addURLParameter:function(D,x,E){var G=-1===D.indexOf("?")?"?":"\x26";return D+G+x+"\x3d"+E},_initImageRefresh:function(D){if(D.refreshInterval){var x=
6E4*D.refreshInterval;this._imageRefreshHandle=setTimeout(u.hitch(this,function(){this._destroyFrame();this._showImage(D)}),x)}},_clearImageHandles:function(){a.disconnect(this._imageLoadHandle);this._imageLoadHandle=null;clearTimeout(this._imageRefreshHandle);this._imageRefreshHandle=null},_showChart:function(D,x,E,G,I){b.remove(this._mediaFrame,"image");E=this._chart=new E(c.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});I&&E.setTheme(I);switch(D){case "piechart":E.addPlot("default",
{type:"Pie",labels:!1});E.addSeries("Series A",x.fields);break;case "linechart":E.addPlot("default",{type:"Markers"});E.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});E.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});n.forEach(x.fields,function(L,Y){L.x=Y+1});E.addSeries("Series A",x.fields);break;case "columnchart":E.addPlot("default",{type:"Columns",gap:3});E.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});E.addSeries("Series A",x.fields);break;
case "barchart":E.addPlot("default",{type:"Bars",gap:3}),E.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),E.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),E.addSeries("Series A",x.fields)}this._action=new G(E);E.render()},_destroyFrame:function(){this._rid=null;this._clearImageHandles();this._chart&&(this._chart.destroy(),this._chart=null);this._action&&(this._action.destroy(),this._action=null);f.set(this._mediaFrame,"innerHTML","")},_imageLoaded:function(D,
x){var E=D.height;E<x&&g.set(D,"marginTop",Math.round((x-E)/2)+"px")},_attListHandler:function(D,x){if(D===this._attachmentsDfd){this._attachmentsDfd=null;var E="";x instanceof Error||!x||!x.length||n.forEach(x,function(G){E+="\x3cli\x3e";E+="\x3ca href\x3d'"+A.addProxy(G.url)+"' target\x3d'_blank'\x3e"+(G.name||"[No name]")+"\x3c/a\x3e";E+="\x3c/li\x3e"});f.set(this._attachmentsList,"innerHTML",E||"\x3cli\x3e"+this._nls.NLS_noAttach+"\x3c/li\x3e")}},_createLinkIfURI:function(D,x){var E=A.getURIInfo(D);
if(E){var G=D.match(E.pattern);D=G&&G[2];G=h.decode(G[1]);c.create("a",{target:"_blank",href:G,title:G,innerHTML:this._sanitizer.sanitize(p.substitute({appName:E.appName,hierPart:D},E.label))},x)}else f.set(x,"innerHTML",this._sanitizer.sanitize(D))},_showStatus:function(D){f.set(this._status,"innerHTML",D);b.remove(this._status,"hidden");t.query(".mainSection",this.domNode).addClass("hidden")},_hideStatus:function(){f.set(this._status,"innerHTML","");b.add(this._status,"hidden");t.query(".mainSection",
this.domNode).removeClass("hidden")},_handleComponentsSuccess:function(D){if(D){this._hideStatus();var x=this.showTitle?D.title:"",E=D.description,G=D.fields,I=D.mediaInfos,L=this.domNode,Y=this._nls,X=this,fa=this.template,sa=this.graphic;this._prevMedia.title=Y.NLS_prevMedia;this._nextMedia.title=Y.NLS_nextMedia;f.set(this._title,"innerHTML",this._sanitizer.sanitize(x));x||b.add(this._title,"hidden");if(!D.hasDescription&&G&&(E="",G=n.map(G,function(ka){var ma=c.create("tr",{vAlign:"top"});c.create("td",
{className:"attrName",innerHTML:this._sanitizer.sanitize(ka[0])},ma);var wa=c.create("td",{className:"attrValue"},ma);this._createLinkIfURI(ka[1],wa);return ma},this),G.length)){var T=c.create("table",{className:"attrTable",cellPadding:"0px",cellSpacing:"0px"});n.forEach(G,function(ka){T.appendChild(ka)})}T?(this._description.appendChild(T),E=!0):f.set(this._description,"innerHTML",this._sanitizer.sanitize(E));E||b.add(this._description,"hidden");t.query("a",this._description).forEach(function(ka){X._preventNewTab(ka.href)?
"_blank"===ka.target&&f.remove(ka,"target"):f.set(ka,"target","_blank")});x&&E?t.query(".mainSection .hzLine",L).removeClass("hidden"):x||E?t.query(".mainSection .hzLine",L).addClass("hidden"):t.query(".mainSection",L).addClass("hidden");if(x=this._attachmentsDfd=fa.getAttachments(sa))x.addBoth(u.hitch(this,this._attListHandler,x)),f.set(this._attachmentsList,"innerHTML","\x3cli\x3e"+Y.NLS_searching+"...\x3c/li\x3e"),t.query(".attachmentsSection",L).removeClass("hidden");I&&I.length&&(t.query(".mediaSection",
L).removeClass("hidden"),d.setSelectable(this._mediaFrame,!1),this._mediaInfos=I,this._mediaPtr=0,this._updateUI(),this._displayMedia());D.editSummary&&(f.set(this._editSummary,"innerHTML",this._sanitizer.sanitize(D.editSummary)),I&&I.length&&b.remove(this._mediaBreak,"hidden"),b.remove(this._editSummarySection,"hidden"));this.emit("content-update")}else this._showStatus(v.NLS_noInfo)},_handleComponentsError:function(D){D&&"cancel"===D.dojoType||(console.log("PopupRenderer: error loading template",
D),this._showStatus(v.NLS_noInfo))}});r("extend-esri")&&u.setObject("dijit._PopupRenderer",y,w);return y})},"esri/libs/sanitizer/Sanitizer":function(){!function(F,y){"object"==typeof exports&&"undefined"!=typeof module?module.exports=y():"function"==typeof define&&define.amd?define(y):(F="undefined"!=typeof globalThis?globalThis:F||self).Sanitizer=y()}(this,function(){function F(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,
animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,
"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,
"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,
"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,
"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,
"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,
"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,
"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,
"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,
rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,
"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,
"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}function y(la){var N=la||{},aa={},na;for(na in N)aa[na]=N[na];(la=aa).whiteList=la.whiteList||G.whiteList;la.onAttr=la.onAttr||G.onAttr;
la.onIgnoreAttr=la.onIgnoreAttr||G.onIgnoreAttr;la.safeAttrValue=la.safeAttrValue||G.safeAttrValue;this.options=la}function a(la){return la.replace(sa,"\x26lt;").replace(T,"\x26gt;")}function u(la){return la.replace(ka,"\x26quot;")}function n(la){return la.replace(ma,'"')}function t(la){return la.replace(wa,function(N,aa){return"x"===aa[0]||"X"===aa[0]?String.fromCharCode(parseInt(aa.substr(1),16)):String.fromCharCode(parseInt(aa,10))})}function r(la){return la.replace(ja,":").replace(ua," ")}function l(la){for(var N=
"",aa=0,na=la.length;aa<na;aa++)N+=32>la.charCodeAt(aa)?" ":la.charAt(aa);return X.trim(N)}function d(la){return la=l(la=r(la=t(la=n(la))))}function f(la){return la=a(la=u(la))}function b(la,N){for(;N<la.length;N++){var aa=la[N];if(" "!==aa)return"\x3d"===aa?N:-1}}function c(la,N){for(;0<N;N--){var aa=la[N];if(" "!==aa)return"\x3d"===aa?N:-1}}function g(la){return'"'===la[0]&&'"'===la[la.length-1]||"'"===la[0]&&"'"===la[la.length-1]?la.substr(1,la.length-2):la}function e(la){var N=la||{},aa={},na;
for(na in N)aa[na]=N[na];(la=aa).stripIgnoreTag&&(la.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),la.onIgnoreTag=Ca.onIgnoreTagStripAll);la.whiteList=la.whiteList||Ca.whiteList;la.onTag=la.onTag||Ca.onTag;la.onTagAttr=la.onTagAttr||Ca.onTagAttr;la.onIgnoreTag=la.onIgnoreTag||Ca.onIgnoreTag;la.onIgnoreTagAttr=la.onIgnoreTagAttr||Ca.onIgnoreTagAttr;la.safeAttrValue=la.safeAttrValue||Ca.safeAttrValue;la.escapeHtml=la.escapeHtml||
Ca.escapeHtml;this.options=la;!1===la.css?this.cssFilter=!1:(la.css=la.css||{},this.cssFilter=new ya(la.css))}var h,k,m=Object.prototype,w=Function.prototype.toString,p=m.hasOwnProperty,A=w.call(Object),C=m.toString,z=(h=Object.getPrototypeOf,k=Object,function(la){return h(k(la))}),q=function(la){var N;if(!(N=!la||"object"!=typeof la||"[object Object]"!=C.call(la))&&(N=!1,null!=la&&"function"!=typeof la.toString))try{N=!!(la+"")}catch(aa){}if(N)return!1;la=z(la);if(null===la)return!0;la=p.call(la,
"constructor")&&la.constructor;return"function"==typeof la&&la instanceof la&&w.call(la)==A},v={exports:{}},B={};m={exports:{}};var D={},x=/javascript\s*:/gim;D.whiteList=F();D.getDefaultWhiteList=F;D.onAttr=function(la,N,aa){};D.onIgnoreAttr=function(la,N,aa){};D.safeAttrValue=function(la,N){return x.test(N)?"":N};var E={indexOf:function(la,N){var aa;if(Array.prototype.indexOf)return la.indexOf(N);var na=0;for(aa=la.length;na<aa;na++)if(la[na]===N)return na;return-1},forEach:function(la,N,aa){var na;
if(Array.prototype.forEach)return la.forEach(N,aa);var ca=0;for(na=la.length;ca<na;ca++)N.call(aa,la[ca],ca,la)},trim:function(la){return String.prototype.trim?la.trim():la.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(la){return String.prototype.trimRight?la.trimRight():la.replace(/(\s*$)/g,"")}},G=D,I=function(la,N){function aa(){if(!ca){var V=E.trim(la.slice(ea,oa)),pa=V.indexOf(":");if(-1!==pa){var za=E.trim(V.slice(0,pa));pa=E.trim(V.slice(pa+1));za&&(V=N(ea,ta.length,za,pa,V))&&(ta+=V+"; ")}}ea=
oa+1}";"!==(la=E.trimRight(la))[la.length-1]&&(la+=";");for(var na=la.length,ca=!1,ea=0,oa=0,ta="";oa<na;oa++){var O=la[oa];if("/"===O&&"*"===la[oa+1]){O=la.indexOf("*/",oa+2);if(-1===O)break;ea=(oa=O+1)+1;ca=!1}else"("===O?ca=!0:")"===O?ca=!1:";"===O?ca||aa():"\n"===O&&aa()}return E.trim(ta)};y.prototype.process=function(la){if(!(la=(la=la||"").toString()))return"";var N=this.options,aa=N.whiteList,na=N.onAttr,ca=N.onIgnoreAttr,ea=N.safeAttrValue;return I(la,function(oa,ta,O,V,pa){var za=aa[O],Ja=
!1;if(!0===za?Ja=za:"function"==typeof za?Ja=za(V):za instanceof RegExp&&(Ja=za.test(V)),!0!==Ja&&(Ja=!1),V=ea(O,V)){var Qa;oa={position:ta,sourcePosition:oa,source:pa,isWhite:Ja};return Ja?null==(Qa=na(O,V,oa))?O+":"+V:Qa:null==(Qa=ca(O,V,oa))?void 0:Qa}})};!function(la,N){for(var aa in(N=la.exports=function(na,ca){return(new y(ca)).process(na)}).FilterCSS=y,D)N[aa]=D[aa]}(m,m.exports);var L={indexOf:function(la,N){var aa;if(Array.prototype.indexOf)return la.indexOf(N);var na=0;for(aa=la.length;na<
aa;na++)if(la[na]===N)return na;return-1},forEach:function(la,N,aa){var na;if(Array.prototype.forEach)return la.forEach(N,aa);var ca=0;for(na=la.length;ca<na;ca++)N.call(aa,la[ca],ca,la)},trim:function(la){return String.prototype.trim?la.trim():la.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(la){return(la=/\s|\n|\t/.exec(la))?la.index:-1}},Y=m.exports.getDefaultWhiteList,X=L,fa=new m.exports.FilterCSS,sa=/</g,T=/>/g,ka=/"/g,ma=/&quot;/g,wa=/&#([a-zA-Z0-9]*);?/gim,ja=/&colon;?/gim,ua=/&newline;?/gim,
Ba=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,M=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Z=/u\s*r\s*l\s*\(.*/gi;B.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:"autoplay controls crossorigin loop muted preload src".split(" "),b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align",
"valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],
tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:"autoplay controls crossorigin loop muted playsinline poster preload src height width".split(" ")};B.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:"autoplay controls crossorigin loop muted preload src".split(" "),b:[],bdi:["dir"],bdo:["dir"],
big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],
strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:"autoplay controls crossorigin loop muted playsinline poster preload src height width".split(" ")}};B.onTag=function(la,N,aa){};B.onIgnoreTag=function(la,N,aa){};B.onTagAttr=function(la,N,aa){};B.onIgnoreTagAttr=function(la,
N,aa){};B.safeAttrValue=function(la,N,aa,na){if(aa=d(aa),"href"===N||"src"===N){if("#"===(aa=X.trim(aa)))return"#";if("http://"!==aa.substr(0,7)&&"https://"!==aa.substr(0,8)&&"mailto:"!==aa.substr(0,7)&&"tel:"!==aa.substr(0,4)&&"data:image/"!==aa.substr(0,11)&&"ftp://"!==aa.substr(0,6)&&"./"!==aa.substr(0,2)&&"../"!==aa.substr(0,3)&&"#"!==aa[0]&&"/"!==aa[0])return""}else if("background"===N){if(Ba.lastIndex=0,Ba.test(aa))return""}else if("style"===N){if((M.lastIndex=0,M.test(aa))||(Z.lastIndex=0,
Z.test(aa)&&(Ba.lastIndex=0,Ba.test(aa))))return"";!1!==na&&(aa=(na=na||fa).process(aa))}return aa=f(aa)};B.escapeHtml=a;B.escapeQuote=u;B.unescapeQuote=n;B.escapeHtmlEntities=t;B.escapeDangerHtml5Entities=r;B.clearNonPrintableCharacter=l;B.friendlyAttrValue=d;B.escapeAttrValue=f;B.onIgnoreTagStripAll=function(){return""};B.StripTagBody=function(la,N){"function"!=typeof N&&(N=function(){});var aa=!Array.isArray(la),na=[],ca=!1;return{onIgnoreTag:function(ea,oa,ta){return aa||-1!==X.indexOf(la,ea)?
ta.isClosing?(na.push([!1!==ca?ca:ta.position,ta.position+10]),ca=!1,"[/removed]"):(ca||(ca=ta.position),"[removed]"):N(ea,oa,ta)},remove:function(ea){var oa="",ta=0;return X.forEach(na,function(O){oa+=ea.slice(ta,O[0]);ta=O[1]}),oa+=ea.slice(ta)}}};B.stripCommentTag=function(la){for(var N="",aa=0;aa<la.length;){var na=la.indexOf("\x3c!--",aa);if(-1===na){N+=la.slice(aa);break}N+=la.slice(aa,na);aa=la.indexOf("--\x3e",na);if(-1===aa)break;aa+=3}return N};B.stripBlankChar=function(la){la=la.split("");
return(la=la.filter(function(N){N=N.charCodeAt(0);return 127!==N&&(!(31>=N)||10===N||13===N)})).join("")};B.cssFilter=fa;B.getDefaultCSSWhiteList=Y;var ia={},qa=/[^a-zA-Z0-9_:\.\-]/gim;ia.parseTag=function(la,N,aa){var na="",ca=0,ea=!1,oa=!1,ta=0,O=la.length,V="",pa="";ta=0;a:for(;ta<O;ta++)if(pa=la.charAt(ta),!1===ea)"\x3c"===pa&&(ea=ta);else if(!1===oa)if("\x3c"===pa)na+=aa(la.slice(ca,ta)),ca=ea=ta;else if("\x3e"===pa)na+=aa(la.slice(ca,ea)),ca=pa=la.slice(ea,ta+1),V=L.spaceIndex(ca),ca=-1===V?
ca.slice(1,-1):ca.slice(1,V+1),V=("/"===(ca=L.trim(ca).toLowerCase()).slice(0,1)&&(ca=ca.slice(1)),"/"===ca.slice(-1)&&(ca=ca.slice(0,-1)),ca),na+=N(ea,na.length,V,pa,"\x3c/"===pa.slice(0,2)),ca=ta+1,ea=!1;else{if('"'===pa||"'"===pa){V=1;for(var za=la.charAt(ta-V);""===za.trim()||"\x3d"===za;){if("\x3d"===za){oa=pa;continue a}za=la.charAt(ta-++V)}}}else pa===oa&&(oa=!1);return ca<la.length&&(na+=aa(la.substr(ca))),na};ia.parseAttr=function(la,N){function aa(V,pa){1>(V=(V=L.trim(V)).replace(qa,"").toLowerCase()).length||
(V=N(V,pa||""))&&ca.push(V)}for(var na=0,ca=[],ea=!1,oa=la.length,ta=0;ta<oa;ta++){var O=la.charAt(ta);if(!1!==ea||"\x3d"!==O)if(!1===ea||ta!==na||'"'!==O&&"'"!==O||"\x3d"!==la.charAt(ta-1))/\s|\n|\t/.test(O)&&((la=la.replace(/\s|\n|\t/g," "),!1===ea)?-1===(O=b(la,ta))?(aa(L.trim(la.slice(na,ta))),ea=!1,na=ta+1):ta=O-1:-1===(O=c(la,ta-1))&&(aa(ea,g(L.trim(la.slice(na,ta)))),ea=!1,na=ta+1));else{if(-1===(O=la.indexOf(O,ta+1)))break;aa(ea,L.trim(la.slice(na+1,O)));ea=!1;na=(ta=O)+1}else ea=la.slice(na,
ta),na=ta+1}return na<la.length&&(!1===ea?aa(la.slice(na)):aa(ea,g(L.trim(la.slice(na))))),L.trim(ca.join(" "))};var ya=m.exports.FilterCSS,Ca=B,Ia=ia.parseTag,Oa=ia.parseAttr;e.prototype.process=function(la){if(!(la=(la=la||"").toString()))return"";var N=this.options,aa=N.whiteList,na=N.onTag,ca=N.onIgnoreTag,ea=N.onTagAttr,oa=N.onIgnoreTagAttr,ta=N.safeAttrValue,O=N.escapeHtml,V=this.cssFilter;N.stripBlankChar&&(la=Ca.stripBlankChar(la));N.allowCommentTag||(la=Ca.stripCommentTag(la));var pa=!1;
N.stripIgnoreTagBody&&(pa=Ca.StripTagBody(N.stripIgnoreTagBody,ca),ca=pa.onIgnoreTag);la=Ia(la,function(za,Ja,Qa,J,U){Ja={sourcePosition:za,position:Ja,isClosing:U,isWhite:aa.hasOwnProperty(Qa)};if(null!=(za=na(Qa,J,Ja)))return za;if(Ja.isWhite){if(Ja.isClosing)return"\x3c/"+Qa+"\x3e";za=function(K){var S=L.spaceIndex(K);if(-1===S)return{html:"",closing:"/"===K[K.length-2]};S="/"===(K=L.trim(K.slice(S+1,-1)))[K.length-1];return S&&(K=L.trim(K.slice(0,-1))),{html:K,closing:S}}(J);var ha=aa[Qa];Ja=
Oa(za.html,function(K,S){var ba,ra=-1!==L.indexOf(ha,K);return null==(ba=ea(Qa,K,S,ra))?ra?(S=ta(Qa,K,S,V))?K+'\x3d"'+S+'"':K:null==(ba=oa(Qa,K,S,ra))?void 0:ba:ba});J="\x3c"+Qa;return Ja&&(J+=" "+Ja),za.closing&&(J+=" /"),J+="\x3e"}return null==(za=ca(Qa,J,Ja))?O(J):za},O);return pa&&(la=pa.remove(la)),la};return function(la,N){function aa(ea,oa){return(new na(oa)).process(ea)}var na=e,ca;for(ca in(N=la.exports=aa).filterXSS=aa,N.FilterXSS=na,B)N[ca]=B[ca];for(ca in ia)N[ca]=ia[ca];"undefined"!=
typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=la.exports)}(v,v.exports),function(){function la(N,aa){var na,ca=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],
h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:"alt border height src style width".split(" "),li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:"border cellpadding cellspacing height style width".split(" "),tbody:[],tr:["align","height","style","valign"],td:"align colspan height nowrap rowspan style valign width".split(" "),th:"align colspan height nowrap rowspan style valign width".split(" "),u:[],ul:[],video:"autoplay controls height loop muted poster preload width".split(" ")};
this.allowedProtocols="http https mailto iform tel flow lfmobile arcgis-navigator arcgis-appstudio-player arcgis-survey123 arcgis-collector arcgis-workforce arcgis-explorer arcgis-trek2there arcgis-quickcapture mspbi comgooglemaps pdfefile pdfehttp pdfehttps boxapp boxemm awb awbs gropen radarscope".split(" ");this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(ea,oa,ta,O){return"a"===ea&&"href"===oa||("img"===ea||"source"===ea)&&"src"===oa?ca.sanitizeUrl(ta):v.exports.safeAttrValue(ea,
oa,ta,O)}};N&&!aa?na=N:N&&aa?(na=Object.create(this.arcgisFilterOptions),Object.keys(N).forEach(function(ea){"whiteList"===ea?na.whiteList=ca._extendObjectOfArrays([ca.arcgisWhiteList,N.whiteList||{}]):na[ea]=N[ea]})):(na=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList;this.xssFilterOptions=na;this._xssFilter=new v.exports.FilterXSS(na)}return la.prototype.sanitize=function(N,aa){switch(void 0===aa&&(aa={}),typeof N){case "number":return isNaN(N)||!isFinite(N)?null:N;case "boolean":return N;
case "string":return this._xssFilter.process(N);case "object":return this._iterateOverObject(N,aa);default:if(!aa.allowUndefined||void 0!==N)return null}},la.prototype.sanitizeUrl=function(N){var aa=this._trim(N.substring(0,N.indexOf(":")));return"/"===N||"#"===N||"#"===N[0]||-1<this.allowedProtocols.indexOf(aa.toLowerCase())?v.exports.escapeAttrValue(N):""},la.prototype.sanitizeHTMLAttribute=function(N,aa,na,ca){return"function"==typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(N,
aa,na,ca):v.exports.safeAttrValue(N,aa,na,ca)},la.prototype.validate=function(N,aa){void 0===aa&&(aa={});aa=this.sanitize(N,aa);return{isValid:N===aa,sanitized:aa}},la.prototype._extendObjectOfArrays=function(N){var aa={};return N.forEach(function(na){Object.keys(na).forEach(function(ca){Array.isArray(na[ca])&&Array.isArray(aa[ca])?aa[ca]=aa[ca].concat(na[ca]):aa[ca]=na[ca]})}),aa},la.prototype._iterateOverObject=function(N,aa){var na=this;void 0===aa&&(aa={});try{var ca=!1,ea=void 0;if(Array.isArray(N))ea=
N.reduce(function(oa,ta){var O=na.validate(ta,aa);return O.isValid?oa.concat([ta]):(ca=!0,oa.concat([O.sanitized]))},[]);else{if(!q(N))return aa.allowUndefined&&void 0===N?void 0:null;ea=Object.keys(N).reduce(function(oa,ta){var O=N[ta],V=na.validate(O,aa);return V.isValid?oa[ta]=O:(ca=!0,oa[ta]=V.sanitized),oa},{})}return ca?ea:N}catch(oa){return null}},la.prototype._trim=function(N){return String.prototype.trim?N.trim():N.replace(/(^\s*)|(\s*$)/g,"")},la}()})},"dijit/_Templated":function(){define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),
function(F,y,a,u,n,t,r){t.extend(F,{waiRole:"",waiState:""});return n("dijit._Templated",[y,a],{constructor:function(){r.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(l,d){var f=this.inherited(arguments),b=d(l,"waiRole");b&&l.setAttribute("role",b);(b=d(l,"waiState"))&&u.forEach(b.split(/\s*,\s*/),function(c){-1!=c.indexOf("-")&&(c=c.split("-"),l.setAttribute("aria-"+c[0],c[1]))});
return f}})})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(F,y,a,u,n){return a("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var t=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);n.parse(t,{noStart:!this._earlyTemplatedStartup,
template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(u.hitch(this,function(r){this._startupWidgets=r;for(var l=0;l<r.length;l++)this._processTemplateNode(r[l],function(d,f){return d[f]},function(d,f,b){return f in d?d.connect(d,f,b):d.on(f,b,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");
}},_processTemplateNode:function(t,r,l){return r(t,"dojoType")||r(t,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){F.forEach(this._startupWidgets,function(t){t&&!t._started&&t.startup&&t.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),function(F,y,a,u,n,t){return F([t,n],{_onMap:function(r){var l=this.constructor._onMap;
l&&l.FINAL||(delete this.constructor._onMap,l=this.registerConnectEvents(),l.FINAL=!0);r=r.toLowerCase();if(l[r])var d=this[l[r].method];else r=this._onCamelCase(r),this[r]&&(d=r);return d},on:function(r,l){var d=this._onMap(r),f=r.replace(/\-/g,""),b="on"+f in this.domNode;return d||!b?this.inherited(arguments):this.own(u(this.domNode,f,l))[0]},emit:function(r,l,d){var f,b=r.toLowerCase(),c=this.constructor._onMap||this.registerConnectEvents();var g=this[this._onMap(b)];l=l||{};l.target||(l.target=
this);if(g&&c&&c[b]){this._onObj2Arr(function(){f=Array.prototype.slice.call(arguments)},c[b].argKeys)(l);var e=y.mixin({},arguments);e[2]=f;e[0]=c[b].name.replace(/^on/,"")}return this.inherited(e||arguments)}})})},"esri/dijit/Legend/utils":function(){define(["dojo/_base/lang","../../lang","dojo/i18n!../../nls/jsapi"],function(F,y,a){var u=a.widgets.legend;return{getVisualVariableTitle:function(n,t){var r=n.field,l=n.normalizationField,d=!1,f=!1,b=!1;r=F.isFunction(r)?null:r;l=F.isFunction(l)?null:
l;if(n.legendOptions&&n.legendOptions.title)var c=n.legendOptions.title;else if(n.valueExpressionTitle)c=n.valueExpressionTitle;else{if(t.renderer&&t.renderer.authoringInfo&&t.renderer.authoringInfo.visualVariables){var g=t.renderer.authoringInfo.visualVariables;for(n=0;n<g.length;n++){var e=g[n];if("colorInfo"===e.type&&"ratio"===e.style){d=!0;break}else if("colorInfo"===e.type&&"percent"===e.style){f=!0;break}else if("colorInfo"===e.type&&"percentTotal"===e.style){b=!0;break}}}(d=b&&"showRatioPercentTotal"||
f&&"showRatioPercent"||d&&"showRatio"||l&&"showNormField"||r&&"showField"||null)&&(c=y.substitute({field:r&&t.getFieldLabel(r),normField:l&&t.getFieldLabel(l)},"showField"===d?"${field}":u[d]))}return c},getRendererTitle:function(n,t){if(n){if("esri.renderer.ClassBreaksRenderer"===n.declaredClass){var r=n.attributeField;var l=n.normalizationField;var d="percent-of-total"===n.normalizationType}r=F.isFunction(r)?null:r;l=F.isFunction(l)?null:l;if(n.legendOptions&&n.legendOptions.title)var f=n.legendOptions.title;
else n.valueExpressionTitle?f=n.valueExpressionTitle:(n=l&&"showNormField"||(d?"showNormPct":null)||r&&"showField"||null)&&(f=y.substitute({field:r&&t.getFieldLabel(r),normField:l&&t.getFieldLabel(l)},"showField"===n?"${field}":u[n]))}return f}}})},"esri/layers/clustering/GeohashAggregation":function(){define("dojo/has dojo/_base/declare dojo/_base/lang dojo/_base/array ../../kernel ../../Evented ../../geometry/Point ../../geometry/Extent ../../geometry/mathUtils ../../support/expressionUtils ../../core/timerUtils ../support/attributeUtils ./geohashUtils ./statUtils".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e){y=y(t,{loaded:!1,started:!1,map:null,layer:null,lod:null,tolerance:null,clusterMode:null,clusterRadius:null,sortEnabled:!0,filterEnabled:!0,bufferEnabled:!0,updateEnabled:!0,clusters:null,clustersEnabled:!0,statisticInfos:null,defaults:{lod:1,tolerance:0,clusterMode:"auto",clusterRadius:80,sortEnabled:!0,filterEnabled:!0,bufferEnabled:!0,updateEnabled:!0},_eventHandles:null,_updateHandle:null,_indexHandle:null,_cellIndex:null,_globalIndex:null,_perfProfile:null,
_indexUpdated:!1,_cellSizeScaleFactor:1.5,_extentScaleFactor:1.25,_maxGeohashLength:12,_minClusterRadius:15,_levelChange:!0,_clusterFieldPrefix:"cluster_",_mapLevelChange:!1,constructor:function(h){this._update=a.hitch(this,this._update);this._indexFeatures=a.hitch(this,this._indexFeatures);this._eventHandles=[];this._globalIndex={numFeatures:null,fullExtent:null,lodStats:null};this._perfProfile={lastIndex:{total:null,numFeatures:0},lastUpdate:{cells:null,clusters:null,total:null}};this.clusters=
[];this.map=h.map;this.layer=h.layer;this.setLod(h.lod);this.setTolerance(h.tolerance);this.setClusterMode(h.clusterMode);this.setClusterRadius(h.clusterRadius);this.setSortEnabled(h.sortEnabled);this.setFilterEnabled(h.filterEnabled);this.setBufferEnabled(h.bufferEnabled);this.setUpdateEnabled(h.updateEnabled);this.setStatisticInfos(h.statisticInfos);this._load();this.loaded?this._startup():this._eventHandles.push(this.on("load",a.hitch(this,this._startup)))},destroy:function(h){this._displayFeatures(!0,
h);u.forEach(this._eventHandles,function(k){k.remove()});b.clearTimeout(this._updateHandle);b.clearTimeout(this._indexHandle);this._cellIndex=this._globalIndex=this._eventHandles=this._updateHandle=this._indexHandle=this.map=this.layer=this.clusters=null},setLod:function(h){var k=this.lod;this.lod=h||this.defaults.lod;k!==this.lod&&this.update()},setTolerance:function(h){var k=this.tolerance;this.tolerance=h||this.defaults.tolerance;k!==this.tolerance&&this.update()},setClusterMode:function(h){var k=
this.clusterMode;this.clusterMode=h||this.defaults.clusterMode;this._evalClusterParams();k!==this.clusterMode&&this.update()},setClusterRadius:function(h){var k=this.clusterRadius;this.clusterRadius=null!=h?h:this.defaults.clusterRadius;this._evalClusterParams();k!==this.clusterRadius&&this.update()},setSortEnabled:function(h){var k=this.sortEnabled;this.sortEnabled=null!=h?!!h:this.defaults.sortEnabled;k!==this.sortEnabled&&this.update()},setFilterEnabled:function(h){var k=this.filterEnabled;this.filterEnabled=
null!=h?!!h:this.defaults.filterEnabled;k!==this.filterEnabled&&this.update()},setBufferEnabled:function(h){var k=this.bufferEnabled;this.bufferEnabled=null!=h?!!h:this.defaults.bufferEnabled;k!==this.bufferEnabled&&this.update()},setUpdateEnabled:function(h){var k=this.updateEnabled;(this.updateEnabled=null!=h?!!h:this.defaults.updateEnabled)&&k!==this.updateEnabled&&(this._mapLevelChange=!0,this.update())},setStatisticInfos:function(h){this.statisticInfos=h||[];this.loaded&&this._applyStatInfos(this.statisticInfos)},
update:function(){this.loaded&&null==this._updateHandle&&(this._updateHandle=b.setTimeout(this._update,b.priority.HIGH))},isUpdateScheduled:function(){return null!=this._updateHandle},index:function(){this.loaded&&null==this._indexHandle&&(this._indexHandle=b.setTimeout(this._indexFeatures,b.priority.HIGH))},getCell:function(h){return this._cellIndex[h.length][h]},getCluster:function(h){var k;u.some(this.clusters,function(m){-1<u.indexOf(m.geohashes,h)&&(k=m);return!!k});return k},getCellsInCluster:function(h){var k=
[];u.forEach(h&&h.geohashes,function(m){(m=this.getCell(m))&&k.push(m)},this);return k},getFeaturesInCluster:function(h){var k=[];h=this.getCellsInCluster(h);u.forEach(h,function(m){Array.prototype.push.apply(k,m.features)});return k},toggleFeatureVisibility:function(h){this.index()},getCurrentLodStats:function(){var h=this._globalIndex.lodStats;return h&&h[this.lod]},getNumFeatures:function(){return this._globalIndex.numFeatures},getFullExtent:function(){var h=this._globalIndex.fullExtent;return h&&
Infinity!==h.xmin?new l(h):null},_load:function(){this._displayFeatures(!1);this._checkLoadStatus();this.map.loaded||this._eventHandles.push(this.map.on("load",a.hitch(this,this._checkLoadStatus)));this.layer.loaded||this._eventHandles.push(this.layer.on("load",a.hitch(this,this._checkLoadStatus)))},_checkLoadStatus:function(){if(this.map.loaded&&this.layer.loaded){if("esriGeometryPoint"!==this.layer.geometryType)var h=Error("GeohashAggregation is supported only for points");else{var k=this.map.spatialReference;
k.isWebMercator()||4326===k.wkid||(h=Error("GeohashAggregation is supported only when map spatial reference is WGS84 or WebMercator"))}h?(this.loadError=h,this.emit("load-error",{error:h})):(this.loaded=!0,this.emit("load"))}},_startup:function(){this._evalUpdateStatus();this.index();this._processExtentChange();this._eventHandles.push(this.layer.on("update-end",a.hitch(this,this.index)),this.layer.on("edits-complete",a.hitch(this,this.index)),this.layer.on("graphics-clear",a.hitch(this,this.index)),
this.layer.on("suspend",a.hitch(this,this._evalUpdateStatus)),this.layer.on("resume",a.hitch(this,this._evalUpdateStatus)),this.map.on("extent-change",a.hitch(this,this._processExtentChange)))},_evalUpdateStatus:function(){this.setUpdateEnabled(!this.layer.suspended)},_processExtentChange:function(h){this._mapLevelChange=!(!h||!h.levelChange);this._evalClusterParams();this.update()},_update:function(){this._updateHandle=null;if(this.updateEnabled){this.emit("update-start");if(this.clustersEnabled){var h=
this.map.geographicExtent;if(h){var k=this._getIntersectingCells(h);h=this._getClusters(k.cells,h);this.clusters=h.clusters;this._applyStatInfosToClusters();k=k.profile;h=h.profile;var m=k.total+h.total;k.total=this._getElapsedTime(k.total);h.total=this._getElapsedTime(h.total);var w=this._perfProfile.lastUpdate={};w.cells=k;w.clusters=h;w.total=this._getElapsedTime(m)}}else this.clusters=[],this._perfProfile.lastUpdate=null;k=this._indexUpdated;this._indexUpdated=!1;h=this._mapLevelChange;this._mapLevelChange=
!1;this.emit("update-end",{levelChange:this._levelChange,mapLevelChange:h,indexChange:k})}},_displayFeatures:function(h,k){var m=this.layer;h=!h;m.suspendGraphics(h);!1!==k&&(h?m.clearNodes():m.redraw())},_indexFeatures:function(){this._indexHandle=null;var h=this._getTime();this._initializeIndexing();var k=0,m=this._globalIndex.fullExtent;u.forEach(this.layer.graphics,function(A){if(A.visible){var C=A.geometry,z=this._getLngLat(C);if(z){var q=C.getCacheValue("_geohash");void 0===q&&(q=g.pointToGeohash(z),
C.setCacheValue("_geohash",q||null))}q&&(this._addGeohashToIndex(q,A,z),k++,this._updateExtent(m,z))}},this);this._applyStatInfosToIndex();this._globalIndex.numFeatures=k;for(var w=this._globalIndex.lodStats,p=1;p<=this._maxGeohashLength;p++)w[p]=this._getLODStats(p,k);this._perfProfile.lastIndex.total=this._getElapsedTime(h,this._getTime());this._perfProfile.lastIndex.numFeatures=k;this._indexUpdated=!0;this.emit("index-complete");this.started||(this.started=!0,this.emit("start"));this.update()},
_initializeIndexing:function(){this._globalIndex={numFeatures:0,fullExtent:{xmin:Infinity,ymin:Infinity,xmax:-Infinity,ymax:-Infinity},lodStats:{}};for(var h=this._cellIndex=[],k=1;k<=this._maxGeohashLength;k++)h[k]={}},_getLngLat:function(h){if(h){var k=h.getLongitude();h=h.getLatitude();h=null!=k&&null!=h?{x:k,y:h}:null}return h},_addGeohashToIndex:function(h,k,m){for(var w=this._cellIndex,p="",A=0;A<this._maxGeohashLength;A++){p+=h[A];var C=w[p.length],z=C[p];z||(z=C[p]={count:0,centroid:{x:null,
y:null},extent:{xmin:Infinity,ymin:Infinity,xmax:-Infinity,ymax:-Infinity},features:[],geohash:p,statistics:null});this._updateItem(z,1,m,!0);z.features.push(k)}},_getLODStats:function(h,k){var m=this._cellIndex[h],w=0,p=Infinity,A=-Infinity,C=null,z;for(z in m){var q=m[z];w++;q.count<p&&(p=q.count);q.count>A&&(A=q.count)}0<w&&(C=Number((k/w).toFixed(2)));return{lod:h,count:w,min:Infinity===p?null:p,max:-Infinity===A?null:A,avg:C}},_evalClusterParams:function(){if(this.loaded&&"auto"===this.clusterMode){var h=
this._getClusterParams(this.map.getResolutionInMeters(),this.clusterRadius,this._minClusterRadius);this._levelChange=this.lod!==h.lod;this.lod=h.lod;this.tolerance=h.tolerance}},_getClusterParams:function(h,k,m){k<m&&(k=m);h=Math.ceil(h*k);k=this._getClosestLODRange(h).max;do m=this._getCellSize(k),(m=h>=this._cellSizeScaleFactor*m||1===m)||(k+=1);while(!m);m=h/this._getCellSize(k);return{lod:k,tolerance:h,multiplier:Number(m.toFixed(2))}},_getClosestLODRange:function(h){for(var k,m=this._maxGeohashLength;1<=
m;m--)if(this._getCellSize(m)>=h){k=m;break}null==k&&(k=1);h=k+1;h>this._maxGeohashLength&&(h=this._maxGeohashLength);return{min:k,max:h}},_getCellSize:function(h){h=g.getCellSizeInMeters(h);return Math.ceil(Math.min(h.width,h.height))},_sorter:function(h,k){var m=h.centroid,w=k.centroid;return h.count>k.count?-1:h.count<k.count?1:m.x>w.x?-1:m.x<w.x?1:0},_getIntersectingCells:function(h){var k=this._getTime();this.bufferEnabled&&(h=h.expand(this._extentScaleFactor));var m=g.getIntersecting(h,this.lod,
this.bufferEnabled?this.tolerance:0);h=this._getTime();var w=[],p=this.tolerance,A=this.sortEnabled;u.forEach(m,function(C){(C=this.getCell(C))&&w.push(C)},this);p&&A&&w.sort(this._sorter);m=this._getTime();return{cells:w,profile:{findCells:this._getElapsedTime(k,h),scanAndSortCells:this._getElapsedTime(h,m),total:m-k}}},_getClusters:function(h,k){var m=this._getTime(),w=[],p={},A={findCells:0};u.forEach(h,function(C,z){(C=this._createCluster(C,p,A))&&w.push(C)},this);this._markIntersecting(w,k);
this.filterEnabled&&(w=this._getIntersectingClusters(w));h=this._getTime();return{clusters:w,profile:{findCellsInCluster:this._getElapsedTime(A.findCells),total:h-m}}},_markIntersecting:function(h,k){var m=k.normalize();u.forEach(h,function(w){var p=w.centroid.x,A=w.centroid.y;w.isIntersecting=u.some(m,function(C){return p>=C.xmin&&p<=C.xmax&&A>=C.ymin&&A<=C.ymax})})},_getIntersectingClusters:function(h){return u.filter(h,function(k){return k.isIntersecting})},_createCluster:function(h,k,m){if(!k[h.geohash]){var w=
[{cell:h,distance:0}];if(this.tolerance){var p=this._getTime(),A=g.getNeighborsWithinDistance(h.centroid,this.lod,this.tolerance);m.findCells+=this._getTime()-p;u.forEach(A,function(C){if(C!==h.geohash&&(C=this.getCell(C))){var z=this._calculateDistance(h.centroid,C.centroid);z<=this.tolerance&&w.push({cell:C,distance:z})}},this)}return this._mergeCells(w,k)}},_calculateDistance:function(h,k){return d.getLength(g.geographicToWebMercator(h),g.geographicToWebMercator(k))},_mergeCells:function(h,k){var m=
this._initializeCluster({},h[0].cell.geohash);u.forEach(h,function(w){var p=w.cell,A=p.geohash;w=w.distance;var C=k[A];if(C)if(w<C.distance)this._removeCellFromCluster(A,k);else return;k[A]={cluster:m,distance:w};this._updateItem(m,p.count,p.centroid);m.geohashes.push(A)},this);return m},_removeCellFromCluster:function(h,k){var m=k[h].cluster;delete k[h];h=u.indexOf(m.geohashes,h);-1<h&&m.geohashes.splice(h,1);this._reevaluateCluster(m)},_reevaluateCluster:function(h){var k=h.geohashes;h=this._initializeCluster(h,
h.primary);u.forEach(k,function(m){var w=this.getCell(m);w&&(this._updateItem(h,w.count,w.centroid),h.geohashes.push(m))},this)},_initializeCluster:function(h,k){h.count=0;h.centroid=new r(null,null);h.geohashes=[];h.primary=k;h.statistics=null;return h},_applyStatInfos:function(h){h=this._getValidStatInfos(h);this._applyStatInfosToIndex(h);this._applyStatInfosToClusters(h)},_getValidStatInfos:function(h){var k=[];u.forEach(h,function(m){var w=m.attributeInfo;m=m.statisticType;var p="angle"===w.attributeType;
if(e.isSupportedStatisticType(m)&&(!p||"avg"===m)){var A="arithmetic"===w.rotationType;k.push({attributeCache:c.createAttributeCache(w,"type"===m),identifier:e.getStatisticId(w,m),statFunctions:e.getStatisticFunctions(m),isAngular:p,isDate:"date"===w.attributeType,isArithmetic:A})}});return k},_applyStatInfosToIndex:function(h){h=h||this._getValidStatInfos(this.statisticInfos);var k=this._cellIndex;if(k)for(var m=1;m<=this._maxGeohashLength;m++){var w=k[m],p;for(p in w)this._applyStatInfosToCell(w[p],
h)}},_applyStatInfosToCell:function(h,k){var m=this._initializeStats(h,k);u.forEach(h.features,function(w){this._calcFeatureStats(w,k,m)},this);this._summarizeStats(h,m,k)},_calcFeatureStats:function(h,k,m){h.attributes&&u.forEach(k,function(w){var p=m[w.identifier],A=w.attributeCache;A=A?h._getDataValue(A.attributeInfo,A,f):null;w.statFunctions.updateCellStat(p,A,w)})},_applyStatInfosToClusters:function(h){h=h||this._getValidStatInfos(this.statisticInfos);var k=this._clusterFieldPrefix;u.forEach(this.clusters,
function(m){var w=this._initializeStats(m,h);u.forEach(this.getCellsInCluster(m),function(p){this._calcCellStats(p,h,w)},this);this._summarizeStats(m,w,h,k);m.attributes[k+"id"]=m.primary},this)},_calcCellStats:function(h,k,m){var w=h.statistics;u.forEach(k,function(p){var A=p.identifier;p.statFunctions.updateClusterStat(m[A],w[A],p)})},_initializeStats:function(h,k){var m=h.statistics={};u.forEach(k,function(w){m[w.identifier]=w.statFunctions.initialize(w)});return m},_summarizeStats:function(h,
k,m,w){var p=h.attributes={};w=w||"";p[w+"count"]=h.count;u.forEach(m,function(A){var C=this._getStatFieldName(A,w);p[C]=A.statFunctions.summarize(k[A.identifier],A)},this)},_getStatFieldName:function(h,k){return(k||"")+h.identifier},_updateItem:function(h,k,m,w){var p=m.y,A=h.centroid,C=h.count;A.x=(C*A.x+k*m.x)/(C+k);A.y=(C*A.y+k*p)/(C+k);h.count+=k;w&&this._updateExtent(h.extent,m)},_updateExtent:function(h,k){var m=k.x;k=k.y;m<h.xmin&&(h.xmin=m);m>h.xmax&&(h.xmax=m);k<h.ymin&&(h.ymin=k);k>h.ymax&&
(h.ymax=k)},_getTime:function(){return window.performance?window.performance.now():(new Date).getTime()},_getElapsedTime:function(h,k){h=null!=h&&null!=k?k-h:h;if(null!=h){var m="millisecond";1E3<=h&&(h/=1E3,m="second",60<=h&&(h/=60,m="minute"));m={value:Number(h.toFixed(2)),unit:m}}return m}});F("extend-esri")&&a.setObject("layers.clustering.GeohashAggregation",y,n);return y})},"esri/core/timerUtils":function(){define([],function(){function F(t){var r,l=t.length;for(r=0;r<l;r++)t[r]()}var y={LOW:1,
HIGH:2},a,u={};u[y.LOW]=[];u[y.HIGH]=[];var n=function(){clearTimeout(a);a=null;var t=u[y.HIGH];u[y.HIGH]=[];F(t);t=u[y.LOW];u[y.LOW]=[];F(t)};return{priority:y,callbackQueue:u,setTimeout:function(t,r){t=[r,u[r].push(t)-1];a||(a=setTimeout(n,0));return t},clearTimeout:function(t){t&&u[t[0]].splice(t[1],1)}}})},"esri/layers/clustering/geohashUtils":function(){define("dojo/has dojo/string dojo/_base/lang dojo/_base/array ../../kernel ../../geometry/Point ../../geometry/Extent ../../SpatialReference ../../geometry/webMercatorUtils".split(" "),
function(F,y,a,u,n,t,r,l,d){function f(I){var L=I.spatialReference;if(!L)return{x:I.x,y:I.y};var Y=L.isWebMercator(),X;4326===L.wkid?X={x:I.x,y:I.y}:Y&&(X={x:I.getLongitude(),y:I.getLatitude()});return X}function b(I){var L=I.spatialReference,Y=!(!L||!L.isWebMercator()),X;L&&4326===L.wkid?X=new r(I.toJson()):Y&&(X=d.webMercatorToGeographic(I,!0));return X}function c(I,L){L.x=t.prototype._normalizeX(I.x,l.prototype._info[4326]);L.y=I.y;return L}function g(I){I=E.decimals[I].toString(2);return y.pad(I,
E.bitsPerBase32Char,"0")}function e(I,L){L=L.slice();L.splice(1,0,0);for(var Y=L[0],X=L[2],fa=0;fa<I.length;fa++){Number(I[fa])?L[0]=L[1]:L[2]=L[1];var sa=L[1]=(L[0]+L[2])/2;Y=L[0];X=L[2]}return{value:sa,min:Y,max:X}}function h(I,L,Y){var X=[];L=L.slice();L.splice(1,0,0);for(var fa=L[0],sa=L[2],T=0;T<Y;T++)I>=L[1]?(L[0]=L[1],fa=1):(L[2]=L[1],fa=0),L[1]=(L[0]+L[2])/2,X.push(fa),fa=L[0],sa=L[2];return{value:X.join(""),min:fa,max:sa}}function k(I){var L=I*E.bitsPerBase32Char;0===L%2?I=L/=2:(I=(L+1)/
2,L-=I);return{lon:I,lat:L}}function m(I){var L=0;I=I.split("").reverse().join("");for(var Y=0;Y<I.length;Y++)L+=Number(I[Y])*Math.pow(2,Y);return E.base32[L]}function w(I,L){var Y={x:I.xmin,y:I.ymax},X={x:I.xmax,y:I.ymin},fa={x:I.xmax,y:I.ymax};return{sw:G.pointToGeohash({x:I.xmin,y:I.ymin},L),nw:G.pointToGeohash(Y,L),se:G.pointToGeohash(X,L),ne:G.pointToGeohash(fa,L)}}function p(I,L,Y,X,fa){var sa=I;do fa[sa]||(fa[sa]=!0,X.push(sa)),(I=sa===L)||(sa=x(sa,Y));while(!I)}function A(I,L,Y,X){var fa=
w(I,L);I=[];p(fa.sw,fa.nw,"n",I,{});L=[];p(fa.se,fa.ne,"n",L,{});for(fa=0;fa<I.length;fa++)p(I[fa],L[fa],"e",Y,X)}function C(I){return u.filter(I,function(L){return 180===L.xmax?!0:!1})[0]}function z(I){return u.filter(I,function(L){return-180===L.xmin?!0:!1})[0]}function q(I,L,Y,X){var fa=G.geographicToWebMercator(I);I={x:fa.x-L,y:fa.y-L};L=G.webMercatorToGeographic({x:fa.x+L,y:fa.y+L},!0);I=G.webMercatorToGeographic(I,!0);return new r(null!=Y?Y:I.x,I.y,null!=X?X:L.x,L.y)}function v(I,L,Y,X){I=w(I,
L);var fa,sa;"min"===X?sa=180:"max"===X&&(fa=-180);var T=fa;X=sa;var ka=G.geohashToCell(I.sw).extent;L=G.geohashToCell(I.ne).extent;I=null!=T?T:ka.xmin;ka=ka.ymin;X=null!=X?X:L.xmax;L=L.ymax;I=q({x:I,y:ka},Y,fa,sa);Y=q({x:X,y:L},Y,fa,sa);return new r(I.xmin,I.ymin,Y.xmax,Y.ymax)}function B(I,L,Y){var X=I,fa=0;do fa++,(I=X===L)||(X=x(X,Y));while(!I);return fa}function D(I,L){I=w(I,L);L=B(I.nw,I.ne,"e");return{rows:B(I.nw,I.sw,"s"),cols:L}}function x(I,L){var Y=I.length%2,X=I.slice(-1),fa=E.decimals[X];
I=I.slice(0,-1);-1!=E.borders[L][Y].indexOf(X)&&I&&(I=x(I,L));return I+E.neighbors[L][Y][fa]}var E={base32:"0123456789bcdefghjkmnpqrstuvwxyz",decimals:function(){for(var I={},L=0;32>L;L++)I["0123456789bcdefghjkmnpqrstuvwxyz"[L]]=L;return I}(),neighbors:{n:[null,"238967debc01fg45kmstqrwxuvhjyznp"],s:[null,"bc01fg45238967deuvhjyznpkmstqrwx"],e:[null,"14365h7k9dcfesgujnmqp0r2twvyx8zb"],w:[null,"p0r21436x8zb9dcf5h7kjnmqesgutwvy"]},borders:{n:[null,"bcfguvyz"],s:[null,"0145hjnp"],e:[null,"prxz"],w:[null,
"028b"]},bitsPerBase32Char:5,maxGeohashLength:12,longitudeRange:[-180,180],latitudeRange:[-90,90]};E.neighbors.n[0]="14365h7k9dcfesgujnmqp0r2twvyx8zb";E.neighbors.s[0]="p0r21436x8zb9dcf5h7kjnmqesgutwvy";E.neighbors.e[0]="238967debc01fg45kmstqrwxuvhjyznp";E.neighbors.w[0]="bc01fg45238967deuvhjyznpkmstqrwx";E.borders.n[0]="prxz";E.borders.s[0]="028b";E.borders.e[0]="bcfguvyz";E.borders.w[0]="0145hjnp";var G={geographicToWebMercator:function(I){I=t.lngLatToXY(I.x,I.y);return{x:I[0],y:I[1]}},webMercatorToGeographic:function(I,
L){I=t.xyToLngLat(I.x,I.y,L);return{x:I[0],y:I[1]}},geohashToCell:function(I){var L;var Y=[];for(L=0;L<I.length;L++)Y.push(g(I[L]));Y=Y.join("");L=[];for(var X=[],fa=0;fa<Y.length;fa++)0===fa%2?L.push(Y[fa]):X.push(Y[fa]);L=L.join("");X=X.join("");L=[L,X];Y=e(L[0],E.longitudeRange);X=e(L[1],E.latitudeRange);L=Y.value;return{point:{x:L,y:X.value},extent:{xmin:Y.min,xmax:Y.max,ymin:X.min,ymax:X.max},geohash:I}},pointToCell:function(I,L){L=L||E.maxGeohashLength;if(I=f(I)){I=c(I,I);var Y=k(L);L=h(I.x,
E.longitudeRange,Y.lon);var X=h(I.y,E.latitudeRange,Y.lat);Y=L.value;var fa=X.value;L={xmin:L.min,xmax:L.max,ymin:X.min,ymax:X.max};X=[];for(var sa=Math.ceil((Y.length+fa.length)/E.bitsPerBase32Char),T=0,ka=0,ma=0;ma<sa*E.bitsPerBase32Char;ma++){var wa=0===ma%2?Y[T++]:fa[ka++];null==wa&&(wa=0);X.push(wa)}Y=X.join("");fa=E.bitsPerBase32Char;X=Y.length/fa;sa=[];for(T=0;T<X;T++)ka=Y.substr(T*fa,fa),sa.push(m(ka));Y=sa.join("");return{point:I,extent:L,geohash:Y}}},geohashToPoint:function(I){return G.geohashToCell(I).point},
pointToGeohash:function(I,L){return(I=G.pointToCell(I,L))&&I.geohash},getCells:function(I){return u.map(I,function(L){return G.geohashToCell(L)})},getCellSize:function(I){var L=E.longitudeRange,Y=E.latitudeRange;L=Math.abs(L[1]-L[0]);Y=Math.abs(Y[1]-Y[0]);I=k(I||1);return{width:L/Math.pow(2,I.lon),height:Y/Math.pow(2,I.lat)}},getCellSizeInMeters:function(I){I=G.getCellSize(I);var L=d.metersPerDegree;I.width*=L;I.height*=L;return I},getIntersecting:function(I,L,Y){L=L||1;Y=Y||0;var X=[],fa=b(I);if(fa){Y&&
(fa=G.expandExtent(I,L,Y));I=fa.normalize();var sa={};u.forEach(I,function(T){A(T,L,X,sa)})}return X},countIntersecting:function(I,L,Y){L=L||1;Y=Y||0;var X=0,fa=b(I);if(fa){Y&&(fa=G.expandExtent(I,L,Y));I=fa.normalize();if(2===I.length){X=C(I);fa=z(I);Y=D(X,L);var sa=D(fa,L);I=Y.rows;Y=Y.cols+sa.cols;X={x:X.xmin,y:X.ymax};fa={x:fa.xmax,y:fa.ymax};X=c(X,{});fa=c(fa,{});X=G.pointToGeohash(X,L);L=G.pointToGeohash(fa,L);X===L&&Y--;L={rows:I,cols:Y}}else L=D(I[0],L);X=L.cols*L.rows}return X},getChildren:function(I){I=
I||"";var L=[],Y;for(Y in E.decimals)L.push(I+Y);return L},getNeighbors:function(I){var L=x(I,"n"),Y=x(I,"s");return[L,x(L,"e"),x(L,"w"),Y,x(Y,"e"),x(Y,"w"),x(I,"e"),x(I,"w")]},getExtentFromDistance:function(I,L){L=L||1E3;var Y;(I=f(I))&&(Y=q(I,L));return Y},expandExtent:function(I,L,Y){L=L||1;Y=Y||0;if(I=b(I)){if(Y){I=I.normalize();if(2===I.length){var X=Y;Y=C(I);I=z(I);Y=v(Y,L,X,"min");I=v(I,L,X,"max");360<=Y.getWidth()+I.getWidth()?(L=-180,I=180):(L=Y.xmin,I=I.xmax);return new r(L,Y.ymin,I,Y.ymax)}return v(I[0],
L,Y)}return I}},getNeighborsWithinDistance:function(I,L,Y){Y=Y||1E3;L=L||1;var X=[];if(I=f(I)){Y=q(I,Y).normalize();var fa={};u.forEach(Y,function(sa){A(sa,L,X,fa)})}return X}};F("extend-esri")&&a.setObject("layers.clustering.geohashUtils",G,n);return G})},"esri/layers/clustering/statUtils":function(){define(["dojo/_base/lang","../support/attributeUtils"],function(F,y){function a(t){return"number"===typeof t&&!isNaN(t)&&Infinity!==t&&-Infinity!==t}var u={sum:{initialize:function(){return{count:0,
sum:null}},updateCellStat:function(t,r){a(r)&&(t.count++,t.sum+=r)},updateClusterStat:function(t,r){r.count&&(t.count+=r.count,t.sum+=r.sum)},summarize:function(t){return t.sum}},avg:{initialize:function(t){return{count:0,sum:null,avg:null,sum_cosine:null,sum_sine:null}},updateCellStat:function(t,r,l){a(r)&&(t.count++,l.isAngular?(l.isArithmetic||(r=-1*r+90),t.sum_cosine+=Math.cos(r*Math.PI/180),t.sum_sine+=Math.sin(r*Math.PI/180)):t.sum+=r)},updateClusterStat:function(t,r,l){r.count&&(t.count+=r.count,
l.isAngular?(t.sum_cosine+=r.sum_cosine,t.sum_sine+=r.sum_sine):t.sum+=r.sum)},summarize:function(t,r){if(0<t.count){var l=t.count;r.isAngular?(l=180*Math.atan2(t.sum_sine/l,t.sum_cosine/l)/Math.PI,r.isArithmetic||(l=-1*(l-90)),t.avg=0>l?l+360:l):(t.avg=t.sum/l,r.isDate&&(t.avg=Math.ceil(t.avg)))}return t.avg}},type:{initialize:function(){return{uvInfos:{}}},updateCellStat:function(t,r){if(null==r||""===r||"string"===typeof r&&""===F.trim(r))r=null;t=t.uvInfos;null==t[r]?t[r]={count:1,value:r}:t[r].count++},
updateClusterStat:function(t,r){t=t.uvInfos;r=r.uvInfos;for(var l in r){var d=r[l];null==t[l]?t[l]={count:d.count,value:d.value}:t[l].count+=d.count}},summarize:function(t){t=t.uvInfos;var r,l=-Infinity;for(r in t){var d=t[r];if(d.count>l){l=d.count;var f=d.value}else d.count===l&&(f=null)}return f}}},n={isSupportedStatisticType:function(t){return u.hasOwnProperty(t)},getStatisticFunctions:function(t){return u[t]},getStatisticId:function(t,r){var l=y.getAttributeIdSource(t);t=l&&y.getAttributeId(l)||
t.field;return r+"_"+t},getClusterField:function(t,r){return"cluster_"+n.getStatisticId(t,r)},getStatisticHash:function(t,r){r=[n.getStatisticId(t,r)];t.attributeType&&r.push(t.attributeType.toLowerCase());t.rotationType&&r.push(t.rotationType.toLowerCase());return r.join("_")}};return n})},"esri/dijit/Attribution":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/kernel dojo/has dojo/query dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom-class dojo/dom-geometry ../kernel ../lang ../SpatialReference ../geometry/webMercatorUtils ../geometry/Extent".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m,w){F=F(null,{declaredClass:"esri.dijit.Attribution",itemDelimiter:" | ",listClass:"esriAttributionList",itemClass:"esriAttributionItem",lastItemClass:"esriAttributionLastItem",delimiterClass:"esriAttributionDelim",constructor:function(p,A){try{y.mixin(this,p);this._attributions={};this._pendingDfds={};this._activeLayers=[];this._sharedLayers=[];this._layerHandles={};var C=this.domNode=l.byId(A),z=this.map,q="\x3cspan class\x3d'"+this.listClass+"'\x3e\x3c/span\x3e";
C&&(d.set(C,"innerHTML",q),this.listNode=n.query(".esriAttributionList",C)[0],this.itemNodes={});this._eventConnections=[u.connect(z,"onLayerAdd",this,this._onLayerAdd),u.connect(z,"onLayerRemove",this,this._onLayerRemove),u.connect(z,"onLayerSuspend",this,this._onLayerSuspend),u.connect(z,"onLayerResume",this,this._onLayerResume),u.connect(z,"onResize",this,this._adjustFocus),u.connect(z,"onExtentChange",this,this._onExtentChange)];if(z.loaded){var v=z.layerIds.concat(z.graphicsLayerIds),B,D=v.length;
for(B=0;B<D;B++){var x=z.getLayer(v[B]);x.loaded&&this._onLayerAdd(x)}}}catch(E){}},startup:function(){},destroy:function(){a.forEach(this._eventConnections,u.disconnect);f.destroy(this.listNode);var p=this._layerHandles,A;for(A in p)p[A]&&p[A].remove();this.map=this.domNode=this._eventConnections=this.listNode=this._attributions=this._pendingDfds=this.itemNodes=this._activeLayers=this._lastItem=this._sharedLayers=this._layerHandles=null},_onLayerAdd:function(p){try{var A=this._attributions,C=p.id;
if(!h.isDefined(A[C])&&p.showAttribution){if(p.hasAttributionData){var z=p.getAttributionData();this._pendingDfds[C]=1;A[C]=z;z.addBoth(y.partial(this._onAttributionLoad,this,p))}else A[C]=p.copyright||p.copyrightText||"",A[C]?(p.suspended||this._activeLayers.push(C),this._createNode(C)):this._onLayerRemove(p);-1<p.declaredClass.toLowerCase().indexOf("vetiledlayer")&&(this._layerHandles[C]=p.on("map-style-change",y.hitch(this,function(){this._onLayerRemove(p);this._onLayerAdd(p)})))}}catch(q){}},
_onAttributionLoad:function(p,A,C){var z=p._attributions,q=p._pendingDfds,v=A.id;if(q&&q[v]){delete q[v];if(!C||C instanceof Error)C="";z[v]=C?p._createIndexByLevel(C,-1!==A.declaredClass.toLowerCase().indexOf("vetiledlayer")):A.copyright||A.copyrightText||"";z[v]?(A.suspended||p._activeLayers.push(v),p._createNode(v)):p._onLayerRemove(A)}},_onLayerRemove:function(p){try{var A=p.id,C=this.itemNodes,z=-1;this._onLayerSuspend(p);this._layerHandles[A]&&this._layerHandles[A].remove();delete this._attributions[A];
delete this._pendingDfds[A];delete this._layerHandles[A];var q=this._getGroupIndex(A);-1!==q&&(z=a.indexOf(this._sharedLayers[q],A),-1!==z&&(this._sharedLayers[q].splice(z,1),1>=this._sharedLayers[q].length&&this._sharedLayers.splice(q,1)));C[A]&&-1===z&&f.destroy(C[A]);delete C[A];this._updateLastItem()}catch(v){}},_onLayerSuspend:function(p){try{var A=p.id;if(this._attributions[A]){var C=a.indexOf(this._activeLayers,A),z=this.itemNodes[A];-1!==C&&this._activeLayers.splice(C,1);z&&this._toggleItem(z,
!1,this._getGroupIndex(A))}}catch(q){}},_adjustFocus:function(){var p=this.domNode.scrollWidth>this.domNode.clientWidth,A=c.contains(this.domNode,"esriAttributionOpen");d.set(this.domNode,"tabIndex",p||A?"0":"")},_onLayerResume:function(p){try{var A=p.id,C=this._attributions[A],z=this.itemNodes[A];if(C&&(-1===a.indexOf(this._activeLayers,A)&&this._activeLayers.push(A),z)){var q=y.isString(C)?C:this._getContributorsList(C,this.map.extent,this.map.getLevel());y.isString(C)||d.set(z,"innerHTML",q?q+
this._getDelimiter():"");q&&this._toggleItem(z,!0,this._getGroupIndex(A))}}catch(v){}},_onExtentChange:function(p,A,C,z){try{var q=this._activeLayers,v=this._attributions,B=this.itemNodes,D,x,E=q.length||0;for(x=0;x<E;x++){var G=q[x];var I=v[G];if((D=B[G])&&!y.isString(I)){var L=this._getContributorsList(I,p,z?z.level:-1);d.set(D,"innerHTML",L?L+this._getDelimiter():"");this._toggleItem(D,!!L,-1)}}}catch(Y){}this._adjustCursorStyle()},_createNode:function(p){if(this.domNode){var A=this._checkShareInfo(p),
C=A&&A.sharedWith;C=C&&this.itemNodes[C];var z=this.map,q=this._attributions[p];q=y.isString(q)?q:this._getContributorsList(q,z.extent,z.getLevel());z=!!q&&!z.getLayer(p).suspended;C?(this.itemNodes[p]=C,this._toggleItem(C,z,A.index)):(p=this.itemNodes[p]=f.create("span",{"class":this.itemClass,innerHTML:q?q+this._getDelimiter():"",style:{display:z?"inline":"none"}},this.listNode),z&&this._setLastItem(p));this._adjustCursorStyle()}},_checkShareInfo:function(p){var A=this._attributions,C,z=-1,q=A[p];
if(q&&y.isString(q)){for(C in A){var v=A[C];if(C!==p&&v&&y.isString(v)&&v.length===q.length&&v.toLowerCase()===q.toLowerCase()){var B=C;break}}A=this._sharedLayers;v=A.length;if(B){for(C=0;C<v;C++)if(q=A[C],-1!==a.indexOf(q,B)){z=C;q.push(p);break}-1===z&&(z=A.push([B,p])-1)}}return-1<z?{index:z,sharedWith:B}:null},_getGroupIndex:function(p){var A=this._sharedLayers,C,z=A.length,q=-1;for(C=0;C<z;C++)if(-1!==a.indexOf(A[C],p)){q=C;break}return q},_getDelimiter:function(){var p=this.itemDelimiter;return p?
"\x3cspan class\x3d'"+this.delimiterClass+"'\x3e"+p+"\x3c/span\x3e":""},_toggleItem:function(p,A,C){if(-1<C&&!A){C=this._sharedLayers[C];var z,q=C.length,v=this._activeLayers;for(z=0;z<q;z++)if(-1!==a.indexOf(v,C[z]))return}b.set(p,"display",A?"inline":"none");this._updateLastItem()},_updateLastItem:function(){var p=this.listNode.childNodes;var A=p.length;if(A)for(--A;0<=A;A--){var C=p[A];if("none"!==b.get(C,"display")){this._setLastItem(C);break}}this._adjustCursorStyle()},_setLastItem:function(p){var A=
this.itemClass,C=this.lastItemClass;this._lastItem&&c.replace(this._lastItem,A,C);p&&(c.replace(p,C,A),this._lastItem=p)},_createIndexByLevel:function(p,A){p=p.contributors;var C,z,q=p?p.length:0,v,B=new k(4326),D={};for(z=0;z<q;z++){var x=p[z];var E=(C=x.coverageAreas)?C.length:0;for(v=0;v<E;v++){var G=C[v];var I=G.bbox;I={extent:m.geographicToWebMercator(new w(I[1],I[0],I[3],I[2],B)),attribution:x.attribution||"",zoomMin:G.zoomMin-(A&&G.zoomMin?1:0),zoomMax:G.zoomMax-(A&&G.zoomMax?1:0),score:h.isDefined(G.score)?
G.score:100,objectId:z};for(G=I.zoomMin;G<=I.zoomMax;G++)D[G]=D[G]||[],D[G].push(I)}}return D},_getContributorsList:function(p,A,C){var z="";if(A&&h.isDefined(C)&&-1<C){p=p[C];C=A.getCenter().normalize();var q=p?p.length:0,v=[],B={};for(z=0;z<q;z++)A=p[z],!B[A.objectId]&&A.extent.contains(C)&&(B[A.objectId]=1,v.push(A));v.sort(function(D,x){return x.score-D.score||D.objectId-x.objectId});q=v.length;for(z=0;z<q;z++)v[z]=v[z].attribution;z=v.join(", ")}return z},_adjustCursorStyle:function(){var p=
g.position(this.listNode.parentNode,!0).h;c.contains(this.listNode.parentNode,"esriAttributionOpen")?(c.remove(this.listNode.parentNode,"esriAttributionOpen"),p>g.position(this.listNode.parentNode,!0).h?(b.set(this.listNode.parentNode,"cursor","pointer"),c.add(this.listNode.parentNode,"esriAttributionOpen")):b.set(this.listNode.parentNode,"cursor","default")):(c.add(this.listNode.parentNode,"esriAttributionOpen"),p<g.position(this.listNode.parentNode,!0).h?b.set(this.listNode.parentNode,"cursor",
"pointer"):b.set(this.listNode.parentNode,"cursor","default"),c.remove(this.listNode.parentNode,"esriAttributionOpen"));this._adjustFocus()}});t("extend-esri")&&y.setObject("dijit.Attribution",F,e);return F})},"esri/arcgis/utils":function(){define("require dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/_base/json dojo/_base/url dojo/on dojo/DeferredList dojo/dom-construct dojo/sniff dojox/gfx/_base ../kernel ../config ../Color ../lang ../request ../SpatialReference ../map ../urlUtils ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/webMercatorUtils ../symbols/jsonUtils ../renderers/jsonUtils ../dijit/PopupTemplate ../dijit/Popup ../tasks/query ../tasks/GeometryService ../layers/ArcGISTiledMapServiceLayer ../layers/FeatureLayer dojo/i18n!../nls/jsapi".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h,k,m,w,p,A,C,z,q,v,B,D,x,E,G,I,L,Y,X){function fa(Q){return!(!Q||"BingMapsAerial"!==Q.layerType&&"BingMapsAerial"!==Q.type)}function sa(Q){return!(!Q||"BingMapsRoad"!==Q.layerType&&"BingMapsRoad"!==Q.type)}function T(Q){return fa(Q)||sa(Q)||!(!Q||"BingMapsHybrid"!==Q.layerType&&"BingMapsHybrid"!==Q.type)}function ka(Q){return!(!Q||"OpenStreetMap"!==Q.layerType&&"OpenStreetMap"!==Q.type)}function ma(Q){return!!(Q&&Q.url&&(-1<"ArcGISFeatureLayer ArcGISImageServiceLayer ArcGISImageServiceVectorLayer ArcGISMapServiceLayer ArcGISStreamLayer ArcGISTiledImageServiceLayer ArcGISTiledMapServiceLayer".split(" ").indexOf(Q.layerType)||
!Q.layerType&&!Q.type))}function wa(Q){return m({url:ub.arcgisUrl+"/"+Q.itemId+"/data",content:{f:"json"},callbackParamName:"callback"},{disableIdentityLookup:!0,_preLookup:!0})}function ja(Q,Ga){var Fa={f:"json"};Ga&&(Fa.token=Ga);return m({url:Q,content:Fa,callbackParamName:"callback"},{disableIdentityLookup:!0})}function ua(Q){!Q.layerDefinition||Q.layerDefinition.drawingInfo&&Q.layerDefinition.drawingInfo.labelingInfo||(Q.showLabels=!1);Q.itemProperties.layerDefinition&&(Q.layerDefinition?(Q.layerDefinition.drawingInfo||
(Q.layerDefinition.drawingInfo=Q.itemProperties.layerDefinition.drawingInfo),k.isDefined(Q.layerDefinition.definitionExpression)||(Q.layerDefinition.definitionExpression=Q.itemProperties.layerDefinition.definitionExpression),k.isDefined(Q.layerDefinition.minScale)||(Q.layerDefinition.minScale=Q.itemProperties.layerDefinition.minScale),k.isDefined(Q.layerDefinition.maxScale)||(Q.layerDefinition.maxScale=Q.itemProperties.layerDefinition.maxScale)):Q.layerDefinition=Q.itemProperties.layerDefinition);
!Q.itemProperties.popupInfo||Q.popupInfo||Q.disablePopup||(Q.popupInfo=Q.itemProperties.popupInfo);k.isDefined(Q.itemProperties.showLabels)&&!k.isDefined(Q.showLabels)&&(Q.showLabels=Q.itemProperties.showLabels);k.isDefined(Q.itemProperties.showLegend)&&!k.isDefined(Q.showLegend)&&(Q.showLegend=Q.itemProperties.showLegend);k.isDefined(Q.itemProperties.refreshInterval)&&!k.isDefined(Q.refreshInterval)&&(Q.refreshInterval=Q.itemProperties.refreshInterval)}function Ba(Q){ua(Q);Q.itemProperties.layerDefinition&&
Q.layerDefinition&&(!k.isDefined(Q.layerDefinition.maximumTrackPoints)&&k.isDefined(Q.itemProperties.layerDefinition.maximumTrackPoints)&&(Q.layerDefinition.maximumTrackPoints=Q.itemProperties.layerDefinition.maximumTrackPoints),!Q.layerDefinition.definitionGeometry&&Q.itemProperties.layerDefinition.definitionGeometry&&(Q.layerDefinition.definitionGeometry=Q.itemProperties.layerDefinition.definitionGeometry));Q.itemProperties.purgeOptions&&!Q.purgeOptions&&(Q.purgeOptions=Q.itemProperties.purgeOptions)}
function M(Q,Ga){var Fa=new n;Ga=Q.itemData;var Aa=[],Da=[];a.forEach(Ga.operationalLayers,function(Ma){if(Ma.itemId&&ma(Ma)){var Ea=Ma.url.toLowerCase();-1<Ea.indexOf("/featureserver")||-1<Ea.indexOf("/mapserver/")?(Da.push(Ma),Aa.push(wa(Ma))):-1<Ea.indexOf("/mapserver")&&-1===Ea.indexOf("/mapserver/")&&(!Ma.layers||!k.isDefined(Ma.minScale)&&!k.isDefined(Ma.maxScale))?(Da.push(Ma),Aa.push(wa(Ma))):-1<Ea.indexOf("/imageserver")?(Da.push(Ma),Aa.push(wa(Ma))):-1<Ea.indexOf("/streamserver")&&(Da.push(Ma),
Aa.push(wa(Ma)))}});Ga.baseMap&&Ga.baseMap.baseMapLayers&&a.forEach(Ga.baseMap.baseMapLayers,function(Ma){Ma.itemId&&"VectorTileLayer"!==Ma.layerType&&(Da.push(Ma),Aa.push(wa(Ma)))});if(0<Aa.length){var Na={};(new d(Aa)).addCallback(function(Ma){a.forEach(Da,function(Ea,Ra){if((Ra=Ma[Ra][1])&&!(Ra instanceof Error)&&(Na[Ea.itemId]=Ra,ma(Ea))){var Ua=Ea.url.toLowerCase();(-1<Ua.indexOf("/featureserver")||-1<Ua.indexOf("/mapserver/"))&&Ra.layers?a.forEach(Ra.layers,function(Za){var db="/featureserver/"+
Za.id;(db=Ua.match(db+"$")==db)||(db="/mapserver/"+Za.id,db=Ua.match(db+"$")==db);db&&(Ea.itemProperties=Za,ua(Ea))}):-1<Ua.indexOf("/streamserver")?(Ea.itemProperties=Ra,Ba(Ea)):-1<Ua.indexOf("/mapserver")?(Ra.layers&&!Ea.layers&&(Ea.layers=Ra.layers),k.isDefined(Ra.minScale)&&!k.isDefined(Ea.minScale)&&(Ea.minScale=Ra.minScale),k.isDefined(Ra.maxScale)&&!k.isDefined(Ea.maxScale)&&(Ea.maxScale=Ra.maxScale),k.isDefined(Ra.refreshInterval)&&!k.isDefined(Ea.refreshInterval)&&(Ea.refreshInterval=Ra.refreshInterval),
Ra.visibleLayers&&!Ea.visibleLayers&&(Ea.visibleLayers=Ra.visibleLayers)):-1<Ua.indexOf("/imageserver")&&(k.isDefined(Ra.minScale)&&!k.isDefined(Ea.minScale)&&(Ea.minScale=Ra.minScale),k.isDefined(Ra.maxScale)&&!k.isDefined(Ea.maxScale)&&(Ea.maxScale=Ra.maxScale),k.isDefined(Ra.refreshInterval)&&!k.isDefined(Ea.refreshInterval)&&(Ea.refreshInterval=Ra.refreshInterval),!Ra.popupInfo||Ea.popupInfo||Ea.disablePopup||(Ea.popupInfo=Ra.popupInfo),Ra.renderingRule&&!Ea.renderingRule&&(Ea.renderingRule=Ra.renderingRule,
Ra.renderingRule.functionName&&(Ea.renderingRule.rasterFunction=Ra.renderingRule.functionName)),Ra.bandIds&&!Ea.bandIds&&(Ea.bandIds=Ra.bandIds),Ra.mosaicRule&&!Ea.mosaicRule&&(Ea.mosaicRule=Ra.mosaicRule),Ra.format&&!Ea.format&&(Ea.format=Ra.format),k.isDefined(Ra.compressionQuality)&&!k.isDefined(Ea.compressionQuality)&&(Ea.compressionQuality=Ra.compressionQuality),!Ra.layerDefinition||!Ra.layerDefinition.definitionExpression||k.isDefined(Ea.layerDefinition)&&k.isDefined(Ea.layerDefinition.definitionExpression)||
(Ea.layerDefinition=Ea.layerDefinition||{},Ea.layerDefinition.definitionExpression=Ra.layerDefinition.definitionExpression),Ra=y.getObject("layerDefinition.drawingInfo.renderer",!1,Ra),null==y.getObject("layerDefinition.drawingInfo.renderer",!1,Ea)&&null!=Ra&&(Ea.layerDefinition=Ea.layerDefinition||{},Ea.layerDefinition.drawingInfo=Ea.layerDefinition.drawingInfo||{},Ea.layerDefinition.drawingInfo.renderer=Ra))}});Q.relatedItemsData=Na;Fa.callback(Q)})}else Fa.callback(Q);return Fa}function Z(Q,Ga){var Fa=
new n,Aa=Q.itemData,Da=Aa.baseMap.baseMapLayers[0];if(T(Da))if(Da.portalUrl&&g.id)delete Ga.bingMapsKey,g.id.checkSignInStatus(A.urlToObject(ub.arcgisUrl).path).then(y.hitch(null,function(Ma,Ea,Ra,Ua,Za){ja(Da.portalUrl,Za.token).then(y.hitch(null,qa,Ma,Ea,Ra,Ua),y.hitch(null,ya,Ma,Ea,Ra,Ua))},Q,Ga,Aa,Fa),y.hitch(null,function(Ma,Ea,Ra,Ua,Za){ja(Da.portalUrl).then(y.hitch(null,qa,Ma,Ea,Ra,Ua),y.hitch(null,ya,Ma,Ea,Ra,Ua))},Q,Ga,Aa,Fa));else if(Ga.bingMapsKey){var Na=new Jb({bingMapsKey:Ga.bingMapsKey,
mapStyle:Jb.MAP_STYLE_AERIAL});u.connect(Na,"onLoad",y.hitch(this,function(){Fa.callback([Q,Ga])}));u.connect(Na,"onError",function(Ma){delete Ga.bingMapsKey;Q.itemData=Ca(Aa);Da=Q.itemData.baseMap.baseMapLayers[0];Da.errors=[];Da.errors.push({message:"The owner of the application has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});Fa.callback([Q,Ga])})}else Q.itemData=Ca(Aa),Da=Q.itemData.baseMap.baseMapLayers[0],Da.errors=[],Da.errors.push({message:"The owner of the application has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."}),
Fa.callback([Q,Ga]);else Fa.callback([Q,Ga]);return Fa}function ia(Q){var Ga=new n;Q=Q.itemData;var Fa=Q.baseMap&&Q.baseMap.baseMapLayers;if(Lb&&!Lb.supported())for(Q=0;Q<Fa.length;Q++){var Aa=Fa[Q];if(!Aa.isReference){if("VectorTileLayer"===Aa.layerType){var Da=Aa.itemId;var Na=Q}break}}Da?Ab(Da,!1).addBoth(function(Ma){var Ea=/^https?:\/\/basemaps(dev)?\.arcgis\.com\/arcgis\/rest\/services\/World_Basemap\/VectorTileServer/i;Ma&&Ma.item&&Ea.test(Ma.item.url)&&(Fa[Na]={id:"FB_"+Aa.id,layerType:"ArcGISTiledMapServiceLayer",
opacity:"opacity"in Aa?Aa.opacity:1,visibility:"visibility"in Aa?Aa.visibility:!0,url:"https://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer"});Ga.resolve()}):Ga.resolve();return Ga}function qa(Q,Ga,Fa,Aa,Da){Da.bingKey?(Ga.bingMapsKey=Da.bingKey,Da=new Jb({bingMapsKey:Ga.bingMapsKey,mapStyle:Jb.MAP_STYLE_AERIAL}),u.connect(Da,"onLoad",y.hitch(this,function(){Aa.callback([Q,Ga])})),u.connect(Da,"onError",function(Na){delete Ga.bingMapsKey;Q.itemData=Ca(Fa);Na=Q.itemData.baseMap.baseMapLayers[0];
Na.errors=[];Na.errors.push({message:"The owner of the map has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});Aa.callback([Q,Ga])})):ya(Q,Ga,Fa,Aa)}function ya(Q,Ga,Fa,Aa){delete Ga.bingMapsKey;Q.itemData=Ca(Fa);Fa=Q.itemData.baseMap.baseMapLayers[0];Fa.errors=[];Fa.errors.push({message:"The owner of the map has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."});Aa.callback([Q,Ga])}function Ca(Q){fa(Q.baseMap.baseMapLayers[0])?
Q.baseMap={title:"Imagery",baseMapLayers:[{id:"World_Imagery_2017",visibility:!0,opacity:1,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]}:sa(Q.baseMap.baseMapLayers[0])?Q.baseMap={title:"Streets",baseMapLayers:[{id:"World_Street_Map_8421",opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]}:Q.baseMap={title:"Imagery with Labels",baseMapLayers:[{id:"World_Imagery_6611",opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},
{id:"World_Boundaries_and_Places_1145",isReference:!0,opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer"}]};return Q}function Ia(Q,Ga,Fa,Aa){var Da=Q.dynamicLayerInfos||Q.layerInfos,Na=Ga.layers;if(Na&&Da)if(Aa.usePopupManager){var Ma;a.forEach(Da,function(cb){var bb=cb.id;if(!cb.subLayerIds)for(cb=0;cb<Na.length;cb++){var jb=Na[cb];if(jb.id===bb&&jb.popupInfo&&!jb.disablePopup){Ma||(Ma={});Ma[bb]={infoTemplate:new Fa(jb.popupInfo),
layerUrl:jb.layerUrl};break}}});Ma&&Q.setInfoTemplates(Ma)}else{var Ea=[],Ra=[],Ua=[],Za=[],db=[],Wa=[];a.forEach(Da,function(cb){var bb=cb.id;if(!cb.subLayerIds&&-1!==a.indexOf(Q.visibleLayers,bb))for(cb=0;cb<Na.length;cb++){var jb=Na[cb];if(jb.id===bb){Ra.push(bb);Ea.push(jb.popupInfo);Ua.push(jb.layerUrl||"");jb.layerDefinition&&jb.layerDefinition.definitionExpression?Za.push(jb.layerDefinition.definitionExpression):Za.push("");db.push(k.isDefined(jb.minScale)?jb.minScale:null);Wa.push(k.isDefined(jb.maxScale)?
jb.maxScale:null);break}}});Ea.length&&(Q.__popups=Ea,Q.__popupIds=Ra,Q.__popupUrls=Ua,Q.__popupWhereClauses=Za,Q.__popupMinScales=db,Q.__popupMaxScales=Wa,Q.__resourceInfo=Ga.resourceInfo)}}function Oa(Q){if(!Q)return!1;var Ga=(new r(ub.arcgisUrl)).authority;return-1!==Q.indexOf(".arcgis.com/")||-1!==Q.indexOf(Ga)}function la(Q){return Q?-1!==Q.indexOf("/services.arcgisonline.com/")||-1!==Q.indexOf("/server.arcgisonline.com/"):!1}function N(Q){"https:"===location.protocol&&(Oa(Q)||la(Q))&&(Q=Q.replace("http:",
"https:"));return Q}function aa(Q,Ga,Fa){var Aa=[];Q.displayLevels||(Aa=a.map(Q.resourceInfo.tileInfo.lods,function(Ma){return Ma.level}));if(Q.exclusionAreas){var Da=y.clone(Q.exclusionAreas);Da=a.map(Da,function(Ma){Ma.geometry=new q(Ma.geometry);return Ma})}var Na=Q.resourceInfo&&"Raster"===Q.resourceInfo.cacheType;Na?(Aa=Q.layerDefinition&&Q.layerDefinition.drawingInfo&&Q.layerDefinition.drawingInfo.renderer,Aa=new ec(N(Q.url),{resourceInfo:Q.resourceInfo,opacity:Q.opacity,visible:Q.visibility,
id:Q.id,minScale:Q.minScale,maxScale:Q.maxScale,refreshInterval:Q.refreshInterval,multidimensionalDefinition:Q.multidimensionalDefinition,bandIds:Q.bandIds,renderer:Aa||null})):Aa=new L(N(Q.url),{resourceInfo:Q.resourceInfo,opacity:Q.opacity,visible:Q.visibility,displayLevels:Q.displayLevels||Aa,id:Q.id,minScale:Q.minScale,maxScale:Q.maxScale,refreshInterval:Q.refreshInterval,exclusionAreas:Da});Fa.ignorePopups||(Na&&Q.popupInfo&&!Q.disablePopup?Aa.setInfoTemplate(new Ga(Q.popupInfo)):Ia(Aa,Q,Ga,
Fa));return Aa}function na(Q,Ga){if(!Q||!Ga||0===Ga.length)return[];Ga=","+Ga+",";var Fa=[],Aa,Da=",";for(Aa=0;Aa<Q.length;Aa++)if(null!==Q[Aa].subLayerIds){if(-1===Ga.indexOf(","+Q[Aa].id+",")||-1<Da.indexOf(","+Q[Aa].id+","))Da+=Q[Aa].subLayerIds.toString()+","}else-1<Ga.indexOf(","+Q[Aa].id+",")&&-1===Da.indexOf(","+Q[Aa].id+",")&&Fa.push(Q[Aa].id);return Fa}function ca(Q,Ga,Fa){var Aa=new Kb;Aa.format="png24";Q.resourceInfo&&Q.resourceInfo.supportedImageFormatTypes&&-1<Q.resourceInfo.supportedImageFormatTypes.indexOf("PNG32")&&
(Aa.format="png32");Aa=new Db(N(Q.url),{resourceInfo:Q.resourceInfo,opacity:Q.opacity,visible:Q.visibility,id:Q.id,imageParameters:Aa,minScale:Q.minScale,maxScale:Q.maxScale,refreshInterval:Q.refreshInterval});var Da=Q.visibleLayers;if(!Q.visibleLayers){var Na="";a.forEach(Aa.layerInfos,function(Wa){Wa.defaultVisibility&&(Na+=(0<Na.length?",":"")+Wa.id)});Da=Na}if(Q.layers&&0<Q.layers.length){var Ma=[],Ea=[],Ra,Ua=[],Za,db;a.forEach(Q.layers,function(Wa){var cb=Wa.layerDefinition;cb&&cb.definitionExpression&&
(Ma[Wa.id]=cb.definitionExpression);if(cb&&cb.source){Ra=null;db=cb.source;if("mapLayer"===db.type){var bb=a.filter(Q.resourceInfo.layers,function(jb){return jb.id===db.mapLayerId});bb.length&&(Ra=y.mixin(bb[0],Wa))}else Ra=y.mixin({},Wa);Ra&&(Ra.source=db,delete Ra.popupInfo,Ra=new tb(Ra),Q.visibleLayers&&(bb="string"==typeof Q.visibleLayers?Q.visibleLayers.split(","):Q.visibleLayers,-1<a.indexOf(bb,Wa.id)?Ra.defaultVisibility=!0:Ra.defaultVisibility=!1),Ea.push(Ra))}cb&&null!=cb.transparency&&(bb=
cb.drawingInfo||{},null==bb.transparency&&(bb.transparency=cb.transparency,cb.drawingInfo=bb));cb&&cb.source&&cb.drawingInfo&&(Za=new Vb(cb.drawingInfo),Ua[Wa.id]=Za)},this);0<Ma.length&&Aa.setLayerDefinitions(Ma);0<Ea.length?(Aa.setDynamicLayerInfos(Ea,!0),0<Ua.length&&Aa.setLayerDrawingOptions(Ua,!0)):(Da=na(Aa.layerInfos,Da),Aa.setVisibleLayers(Da))}else Da=na(Aa.layerInfos,Da),Aa.setVisibleLayers(Da);Fa.ignorePopups||Ia(Aa,Q,Ga,Fa);return Aa}function ea(Q,Ga,Fa){var Aa=new Ob;Aa.bandIds=Q.bandIds;
null!=Q.format&&(Aa.format=Q.format,null!=Q.compressionQuality&&(Aa.compressionQuality=Q.compressionQuality));if(Q.renderingRule&&Q.renderingRule.rasterFunction){var Da=new cc(Q.renderingRule);Aa.renderingRule=Da}Q.mosaicRule&&(Da=new $b(Q.mosaicRule),Aa.mosaicRule=Da);k.isDefined(Q.noData)&&(Aa.noData=Q.noData);k.isDefined(Q.noDataInterpretation)&&(Aa.noDataInterpretation=Q.noDataInterpretation);k.isDefined(Q.interpolation)&&(Aa.interpolation=Q.interpolation);Da=Q.layerType?"ArcGISImageServiceVectorLayer"===
Q.layerType:!1;k.isDefined(Q.layerType)||(Da=Q.resourceInfo.hasMultidimensions&&("esriImageServiceDataTypeVector-UV"===Q.resourceInfo.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===Q.resourceInfo.serviceDataType));Aa={resourceInfo:Q.resourceInfo,opacity:Q.opacity,visible:Q.visibility,id:Q.id,imageServiceParameters:Aa,minScale:Q.minScale,maxScale:Q.maxScale,refreshInterval:Q.refreshInterval};Aa=Da?new mb(N(Q.url),Aa):new xb(N(Q.url),Aa);Q.layerDefinition&&(Q.layerDefinition.drawingInfo&&
Q.layerDefinition.drawingInfo.renderer&&(Da=D.fromJson(Q.layerDefinition.drawingInfo.renderer),Aa.setRenderer(Da)),Q.layerDefinition.definitionExpression&&Aa.setDefinitionExpression(Q.layerDefinition.definitionExpression,!0));Fa.ignorePopups||!Q.popupInfo||Q.disablePopup||Aa.setInfoTemplate(new Ga(Q.popupInfo));return Aa}function oa(Q,Ga,Fa){var Aa=[102113,102100,3857],Da=Fa||new w(Ga[0].layerObject.fullExtent.spatialReference),Na=new w(Q.resourceInfo.fullExtent.spatialReference);return Da.wkt==Na.wkt&&
(Da.wkid==Na.wkid||k.isDefined(Da.latestWkid)&&Da.latestWkid==Na.wkid||k.isDefined(Na.latestWkid)&&Da.wkid==Na.latestWkid||k.isDefined(Da.latestWkid)&&Da.latestWkid==Na.latestWkid)||Da.wkid&&Na.wkid&&a.some(Aa,function(Ma){return Ma===Na.wkid})&&a.some(Aa,function(Ma){return Ma===Da.wkid})?!0:!1}function ta(Q,Ga,Fa){if(!Ga[0].layerObject.tileInfo)return!1;Q=Q.resourceInfo.tileInfo;Ga=Ga[0].layerObject.tileInfo;Fa=Fa.width>Fa.height?Fa.width:Fa.height;for(var Aa=!1,Da=!1,Na=0;Na<Q.lods.length;Na++){for(var Ma=
Q.lods[Na].scale/Q.dpi,Ea=0;Ea<Ga.lods.length;Ea++){var Ra=Ga.lods[Ea].scale/Ga.dpi;if(Math.abs(Ra-Ma)/Ra<1/Fa)if(Aa){Da=!0;break}else Aa=!0}if(Da)break}return Da||Aa&&(1===Q.lods.length||1===Ga.lods.length)?!0:!1}function O(Q,Ga,Fa,Aa,Da,Na){var Ma=Fa._clazz;if(ka(Q))var Ea=new bc({id:Q.id,opacity:Q.opacity,visible:null!==Q.visibility&&void 0!==Q.visibility?Q.visibility:!0});else if(Q&&("WFS"===Q.layerType||"WFS"===Q.type)){var Ra={customParameters:Q.wfsInfo.customParameters,geometryType:Q.layerDefinition.geometryType,
id:Q.id,labelingInfo:Q.layerDefinition.drawingInfo.labelingInfo,maxFeatures:Q.wfsInfo.maxFeatures,mode:Q.mode,name:Q.wfsInfo.name,showLabels:!0,swapXY:Q.wfsInfo.swapXY,title:Q.title,url:Q.url,version:Q.wfsInfo.version,visible:Q.visibility,wkid:Q.layerDefinition.spatialReference.wkid};Ea=new nc;Ea.fromJson(Ra,function(){k.isDefined(Q.opacity)&&Ea.setOpacity(Q.opacity);k.isDefined(Q.visibility)&&Ea.setVisibility(Q.visibility);(Q.minScale||Q.maxScale)&&Ea.setScaleRange(Q.minScale,Q.maxScale);Ea.renderer=
D.fromJson(Q.layerDefinition.drawingInfo.renderer,{geometryType:Ra.geometryType});!Fa.ignorePopups&&Q.popupInfo&&Ea.setInfoTemplate(new Ma(Q.popupInfo));Ea.emit("fromJsonComplete")})}else if(Q&&("WMS"===Q.layerType||"WMS"===Q.type)){var Ua=[],Za=[];a.forEach(Q.layers,function(bb){Za.push(new dc({name:bb.name,title:bb.title,legendURL:bb.legendURL||bb.legendUrl,queryable:bb.queryable,showPopup:bb.showPopup}));Ua.push(bb.name)},this);Q.visibleLayers&&(Ua=Q.visibleLayers);Aa=new q(Q.extent[0][0],Q.extent[0][1],
Q.extent[1][0],Q.extent[1][1],new w({wkid:4326}));Aa={customLayerParameters:Q.customLayerParameters,customParameters:Q.customParameters,extent:Aa,layerInfos:Za,version:Q.version,maxWidth:Q.maxWidth,maxHeight:Q.maxHeight,featureInfoFormat:Q.featureInfoFormat,getFeatureInfoURL:Q.featureInfoUrl,getMapURL:Q.mapUrl,spatialReferences:Q.spatialReferences,title:Q.title,copyright:Q.copyright,minScale:Q.minScale||0,maxScale:Q.maxScale||0,format:Q.format};Ea=new Sb(Q.url,{id:Q.id,visibleLayers:Ua,format:"png",
transparent:Q.firstLayer?!1:!0,opacity:Q.opacity,visible:null!==Q.visibility?Q.visibility:!0,resourceInfo:Aa,refreshInterval:Q.refreshInterval});Ea.spatialReference.wkid=Aa.spatialReferences[0]}else if(Q&&("KML"===Q.layerType||"KML"===Q.type)){var db=Q.url;if(g.id){var Wa=g.id.findCredential(A.urlToObject(ub.arcgisUrl).path);Wa&&(Ga=ub.arcgisUrl.substring(ub.arcgisUrl.indexOf("//")+2,ub.arcgisUrl.indexOf("/",ub.arcgisUrl.indexOf("//")+3)),Da=Ga.split("."),Da=Da[Da.length-2]+"."+Da[Da.length-1],Na=
db.indexOf(Da),-1<Na&&(db="https://"+Ga+db.substring(Na+Da.length),db+="?token\x3d"+Wa.token))}Ea=new Tb(db,{id:Q.id,visible:null!==Q.visibility?Q.visibility:!0,outSR:Aa,refreshInterval:Q.refreshInterval});u.connect(Ea,"onLoad",function(){(Q.opacity||0===Q.opacity)&&Ea.setOpacity(Q.opacity);k.isDefined(Q.minScale)&&k.isDefined(Q.maxScale)&&Ea.setScaleRange(Q.minScale,Q.maxScale);Q.visibleFolders&&a.forEach(Ea.folders,function(bb){-1<a.indexOf(Q.visibleFolders,bb.id)?Ea.setFolderVisibility(bb,!0):
Ea.setFolderVisibility(bb,!1)},this)})}else if(!Q||"WebTiledLayer"!==Q.layerType&&"WebTiledLayer"!==Q.type)if(!Q||"GeoRSS"!==Q.layerType&&"GeoRSS"!==Q.type)if(Q&&("CSV"===Q.layerType||"CSV"===Q.type)&&Q.url)Aa={layerDefinition:Q.layerDefinition,columnDelimiter:Q.columnDelimiter,id:Q.id?Q.id:null,visible:null!==Q.visibility?Q.visibility:!0,opacity:Q.opacity,refreshInterval:Q.refreshInterval},Q.locationInfo&&(Aa.latitudeFieldName=Q.locationInfo.latitudeFieldName,Aa.longitudeFieldName=Q.locationInfo.longitudeFieldName),
!Fa.ignorePopups&&Q.popupInfo&&(Aa.infoTemplate=new Ma(Q.popupInfo)),Ea=new Rb(Q.url,Aa);else if("VectorTileLayer"!==Q.layerType||!Q.styleUrl||Q.resourceInfo&&Q.resourceInfo instanceof Error)if(Q.layerDefinition&&!Q.url)Aa=t.fromJson(t.toJson(Q)),delete Aa.id,delete Aa.opacity,delete Aa.visibility,Ea=new Y(Aa,{id:Q.id,opacity:Q.opacity,visible:Q.visibility,outFields:["*"],autoGeneralize:!0}),Fa.ignorePopups||!Aa.popupInfo||Aa.disablePopup||Ea.setInfoTemplate(new Ma(Aa.popupInfo)),Ja(Ea);else if(T(Q))Fa.bingMapsKey?
(Aa=Jb.MAP_STYLE_AERIAL_WITH_LABELS,fa(Q)?Aa=Jb.MAP_STYLE_AERIAL:sa(Q)&&(Aa=Jb.MAP_STYLE_ROAD),Ea=new Jb({bingMapsKey:Fa.bingMapsKey,mapStyle:Aa,opacity:Q.opacity,id:Q.id}),u.connect(Ea,"onError",y.hitch(this,function(bb){bb.errors=bb.errors||[];bb.errors.push({message:"This application does not have a valid Bing Key for the Bing layer that is included in this map. [type:"+(bb?bb.layerType||bb.type:"")+"]"})},Q))):(Q.errors=Q.errors||[],Q.errors.push({message:"This application does not provide a Bing Key for the Bing layer that is included in this map. [type:"+
(Q?Q.layerType||Q.type:"")+"]"}));else if(Q.resourceInfo&&(Q.resourceInfo.mapName||""===Q.resourceInfo.mapName))Ea=!0===Q.resourceInfo.singleFusedMapCache&&(Q.baseMapLayer||oa(Q,Ga,Aa)&&ta(Q,Da,Na))?aa(Q,Ma,Fa):ca(Q,Ma,Fa);else if(Q.resourceInfo&&Q.resourceInfo.pixelSizeX)Ea=!0===Q.resourceInfo.singleFusedMapCache&&"ArcGISImageServiceLayer"!==Q.layerType&&(Q.baseMapLayer||"Raster"===Q.resourceInfo.cacheType||oa(Q,Ga,Aa)&&ta(Q,Da,Na))?aa(Q,Ma,Fa):ea(Q,Ma,Fa);else if(Q.resourceInfo&&"Feature Layer"===
Q.resourceInfo.type){Q.capabilities&&(Q.resourceInfo.capabilities=Q.capabilities);var cb;!1===Fa.editable?cb=!1:Fa.privileges&&-1===a.indexOf(Fa.privileges,"features:user:edit")&&g.id&&g.id.findCredential(Q.url)&&(cb=!1);Ea=new Y(N(Q.url),{resourceInfo:Q.resourceInfo,opacity:Q.opacity,visible:Q.visibility,id:Q.id,mode:Q.mode===Y.MODE_SELECTION?Y.MODE_SELECTION:Y.MODE_AUTO,editable:cb,outFields:["*"],autoGeneralize:!0,refreshInterval:Q.refreshInterval});Fa.ignorePopups||!Q.popupInfo||Q.disablePopup||
Ea.setInfoTemplate(new Ma(Q.popupInfo));Q.layerDefinition&&(Q.layerDefinition.drawingInfo&&Q.layerDefinition.drawingInfo.renderer&&(Aa=D.fromJson(Q.layerDefinition.drawingInfo.renderer,{geometryType:Ea.geometryType}),Aa.isMaxInclusive=!0,Ea.setRenderer(Aa)),Q.layerDefinition.drawingInfo&&Q.layerDefinition.drawingInfo.labelingInfo&&(Aa=a.map(Q.layerDefinition.drawingInfo.labelingInfo,function(bb){return new Eb(bb)}),Ea.setLabelingInfo(Aa)),Q.layerDefinition.definitionExpression&&Ea.setDefinitionExpression(Q.layerDefinition.definitionExpression),
k.isDefined(Q.layerDefinition.minScale)&&Ea.setMinScale(Q.layerDefinition.minScale),k.isDefined(Q.layerDefinition.maxScale)&&Ea.setMaxScale(Q.layerDefinition.maxScale));Ja(Ea)}else Q.resourceInfo&&Q.resourceInfo.streamUrls&&(Aa={resourceInfo:Q.resourceInfo,opacity:Q.opacity,visible:Q.visibility,id:Q.id},Q.layerDefinition&&(db=Q.layerDefinition.drawingInfo,Q.layerDefinition.definitionGeometry&&(Wa=Wa||{},Wa.geometry=Q.layerDefinition.definitionGeometry),k.isDefined(Q.layerDefinition.definitionExpression)&&
(Wa=Wa||{},Wa.where=Q.layerDefinition.definitionExpression),k.isDefined(Q.layerDefinition.maximumTrackPoints)&&(Aa.maximumTrackPoints=Q.layerDefinition.maximumTrackPoints)),Wa&&(Aa.filter=Wa),Q.purgeOptions&&(Aa.purgeOptions=Q.purgeOptions),Ea=new fc(N(Q.url),Aa),db&&db.renderer&&(Aa=db.renderer,Ea.setRenderer(D.fromJson(Aa,{geometryType:Q.resourceInfo.geometryType}))),db&&db.labelingInfo&&(Aa=a.map(db.labelingInfo,function(bb){return new Eb(bb)}),Ea.setLabelingInfo(Aa)),Fa.ignorePopups||!Q.popupInfo||
Q.disablePopup||Ea.setInfoTemplate(new Ma(Q.popupInfo)),Q.layerDefinition&&(k.isDefined(Q.layerDefinition.minScale)&&Ea.setMinScale(Q.layerDefinition.minScale),k.isDefined(Q.layerDefinition.maxScale)&&Ea.setMaxScale(Q.layerDefinition.maxScale)),l.once(Ea,"error",function(bb){Q.errors.push({message:"Error loading stream layer. Check websocket url"})}));else Ea=new Lb(Q.styleUrl,{id:Q.id,minScale:Q.minScale,maxScale:Q.maxScale,opacity:Q.opacity,visible:Q.visibility,resourceInfo:Q.resourceInfo});else Ea=
new Gb(Q.url,{id:Q.id,opacity:Q.opacity,outSpatialReference:Aa,refreshInterval:Q.refreshInterval}),u.connect(Ea,"onLoad",function(){!1===Q.visibility&&Ea.hide();k.isDefined(Q.minScale)&&k.isDefined(Q.maxScale)&&Ea.setScaleRange(Q.minScale,Q.maxScale);var bb=Ea.getFeatureLayers();a.forEach(bb,function(jb){Q.pointSymbol&&"esriGeometryPoint"===jb.geometryType?(jb.renderer.symbol=B.fromJson(Q.pointSymbol),1===bb.length&&(Ea.pointSymbol=B.fromJson(Q.pointSymbol))):Q.lineSymbol&&"esriGeometryPolyline"===
jb.geometryType?(jb.renderer.symbol=B.fromJson(Q.lineSymbol),1===bb.length&&(Ea.polylineSymbol=B.fromJson(Q.lineSymbol))):Q.polygonSymbol&&"esriGeometryPolygon"===jb.geometryType&&(jb.renderer.symbol=B.fromJson(Q.polygonSymbol),1===bb.length&&(Ea.polygonSymbol=B.fromJson(Q.polygonSymbol)))})});else if(Ea=new mc(Q.templateUrl,{id:Q.id,visible:null!==Q.visibility?Q.visibility:!0,opacity:Q.opacity,copyright:Q.copyright,fullExtent:Q.fullExtent&&new q(Q.fullExtent),initialExtent:Q.fullExtent&&new q(Q.fullExtent),
subDomains:Q.subDomains,tileInfo:Q.tileInfo?new gc(Q.tileInfo):null,refreshInterval:Q.refreshInterval,wmtsInfo:Q.wmtsInfo}),k.isDefined(Q.minScale)||k.isDefined(Q.maxScale))Ea.loaded?Ea.setScaleRange(Q.minScale,Q.maxScale):u.connect(Ea,"onLoad",function(){Ea.setScaleRange(Q.minScale,Q.maxScale)});Ea&&(Ea.arcgisProps={title:Q.title},Q.baseMapLayer&&(Q.isReference?(Ea.attr("data-reference",!0),Ea._basemapGalleryLayerType="reference"):Ea._basemapGalleryLayerType="basemap"),Ea instanceof Y&&Q.layerDefinition&&
Q.layerDefinition.featureReduction&&"cluster"===Q.layerDefinition.featureReduction.type&&(Aa=Q.layerDefinition.featureReduction,Aa.clusterSize&&(Aa.clusterSize=c.pt2px(Aa.clusterSize)),Aa.clusterRadius&&(Aa.clusterRadius=c.pt2px(Aa.clusterRadius)),Aa.popupInfo&&(Aa.infoTemplate=new x(Aa.popupInfo),delete Aa.popupInfo),Ea.setFeatureReduction(Aa)));return Ea}function V(Q,Ga,Fa,Aa,Da){a.forEach(Q,function(Ea){Ea.layerObject=O(Ea,Q,Ga,Fa,Aa,Da)});var Na=a.filter(Q,function(Ea){return!Ea.isReference}),
Ma=a.filter(Q,function(Ea){return!!Ea.isReference});return Q=Na.concat(Ma)}function pa(Q){var Ga=null;Q=Q[0];Q.url&&ma(Q)&&Q.resourceInfo.spatialReference&&(Ga=new w,Q.resourceInfo.spatialReference.wkid&&(Ga.wkid=Q.resourceInfo.spatialReference.wkid),Q.resourceInfo.spatialReference.wkt&&(Ga.wkt=Q.resourceInfo.spatialReference.wkt));T(Q)||ka(Q)?Ga=new w({wkid:102100}):Q&&("WMS"===Q.layerType||"WMS"===Q.type)&&(Ga=new w({wkid:Q.spatialReferences[0]}));return Ga}function za(Q,Ga,Fa,Aa,Da,Na,Ma,Ea){a.forEach(Ga,
function(Ra){if(ma(Ra)||Ra&&"VectorTileLayer"===Ra.layerType)Ra.resourceInfo=Q[Ra.deferredsPos][1],delete Ra.deferredsPos});Na=Na||pa(Ga);Ga=V(Ga,Fa,Na,Ma,Ea);Da.callback(Ga);return Da}function Ja(Q){!window.CanvasRenderingContext2D&&Q.renderer&&"esri.renderer.HeatmapRenderer"===Q.renderer.declaredClass&&Q.setRenderer(D.fromJson({type:"simple",symbol:{color:[77,77,77,255],size:6,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,255,255,255],width:.75,type:"esriSLS",
style:"esriSLSSolid"}}}))}function Qa(Q,Ga,Fa){Q.message=Q.message?Q.message+(" [url:"+Ga+"]"):"[url:"+Ga+"]";Fa.push(Q);e.defaults.io.errorHandler(Q)}function J(Q,Ga){var Fa=N(Q);return m({url:Fa,content:{f:"json"},callbackParamName:"callback",error:function(Aa,Da){Qa(Aa,Fa,Ga)}})}function U(Q){var Ga=ub.arcgisUrl+"/"+Q.itemId+"/data";return m({url:Ga,content:{f:"json"},callbackParamName:"callback",error:function(Fa,Aa){Q.errors=Q.errors||[];Qa(Fa,Ga,Q.errors)}})}function ha(Q,Ga){return Mb.loadMetadata(Q).otherwise(function(Fa){Qa(Fa,
Q,Ga);return Fa})}function K(Q,Ga,Fa){var Aa=new n;if(!(Fa.featureCollection&&Fa.featureCollection.layers||Fa.layers))return console.log("Invalid Feature Collection item data [item id: "+Q.itemId+"]: ",Fa),Q.errors=Q.errors||[],Q.errors.push({message:"Invalid Feature Collection item data. [item id: "+Q.itemId+"]"}),Aa.errback(),Aa;Fa.layers&&(Fa.featureCollection={layers:Fa.layers},delete Fa.layers,k.isDefined(Fa.showLegend)&&(Fa.featureCollection.showLegend=Fa.showLegend,delete Fa.showLegend));S(Q,
Fa.featureCollection,Ga).then(function(Da){Fa.featureCollection=Da;Q.featureCollection&&Q.featureCollection.layers?a.forEach(Fa.featureCollection.layers,function(Na,Ma){Ma=Q.featureCollection.layers[Ma];Ma.popupInfo||Ma.layerDefinition?Ma.layerDefinition?(k.isDefined(Ma.layerDefinition.minScale)&&k.isDefined(Ma.layerDefinition.maxScale)&&(Ma.layerDefinition.minScale!==Na.layerDefinition.minScale||Ma.layerDefinition.maxScale!==Na.layerDefinition.maxScale)&&(delete Na.layerDefinition.minScale,delete Na.layerDefinition.maxScale),
Ma.layerDefinition.drawingInfo&&t.toJson(Ma.layerDefinition.drawingInfo)!==t.toJson(Na.layerDefinition.drawingInfo)&&delete Na.layerDefinition.drawingInfo,Ma.layerDefinition.showLegend!==Na.layerDefinition.showLegend&&delete Na.layerDefinition.showLegend,Ma.layerDefinition=y.mixin(Ma.layerDefinition,Na.layerDefinition)):Ma.layerDefinition=Na.layerDefinition:(Ma.popupInfo=Na.popupInfo,Ma.layerDefinition=Na.layerDefinition);Ma.featureSet=Na.featureSet;Ma.nextObjectId=Na.nextObjectId}):(Q.featureCollection=
Q.featureCollection||{},Q.featureCollection=y.mixin(Q.featureCollection,Fa.featureCollection));Aa.callback(Q)});return Aa}function S(Q,Ga,Fa){var Aa=new n;F(["./csv"],function(Da){var Na=[];a.forEach(Ga.layers,function(Ma){Ma.featureSet&&Ma.featureSet.features&&Ma.featureSet.features.length&&Ma.featureSet.features[0].geometry&&Ma.featureSet.features[0].geometry.spatialReference&&(Ma.deferredsPos=Na.length,Na.push(Da.projectFeatureCollection(Ma,Fa,Ma.featureSet.features[0].geometry.spatialReference)))});
(new d(Na)).addCallback(function(){a.forEach(Ga.layers,function(Ma){k.isDefined(Ma.deferredsPos)&&(Na[Ma.deferredsPos].results&&Na[Ma.deferredsPos].results.length?Ma=Na[Ma.deferredsPos].results[0]:(console.log("Errors projecting feature collection. ["+Q.title+" - "+Ma.layerDefinition.name+"]"),Ma.errors=Ma.errors||[],Ma.errors.push({message:"Errors projecting feature collection. ["+Q.title+" - "+Ma.layerDefinition.name+"]"})),delete Ma.deferredsPos)});Aa.callback(Ga)})});return Aa}function ba(Q,Ga,
Fa,Aa,Da){var Na=new n,Ma=new n,Ea=[];a.forEach(Q.operationalLayers,function(Ua){Ua.itemId&&"Feature Collection"==Ua.type&&Ea.push(U(Ua).then(y.hitch(null,K,Ua,Fa)))});if(0===Ea.length)ra(Q,Ga,Fa,Aa,Ma,Da);else{var Ra=new d(Ea);Ra.addCallback(function(Ua){ra(Q,Ga,Fa,Aa,Ma,Da)})}Ma.then(function(Ua){Ea=[];a.forEach(Ua,function(db){db=db.layerObject;if(db instanceof Y&&!db.loaded&&!db.loadError){var Wa=new n;l.once(db,"load, error",function(){Wa.callback(db)});Ea.push(Wa)}else db&&"esri.layers.WFSLayer"===
db.declaredClass&&!db.loadError&&(Wa=new n,l.once(db,"fromJsonComplete, error",function(cb){Wa.callback(db)}),Ea.push(Wa))});if(Ea.length){var Za=new n;Ra=new d(Ea);Ra.addCallback(function(){Za.callback(Ua)});return Za.promise}return Ua}).then(function(Ua){var Za=[];a.forEach(Ua,function(db){var Wa=db.layerObject;Wa&&(Wa instanceof Y||"esri.layers.StreamLayer"===Wa.declaredClass)?Wa.loaded&&Wa.labelingInfo&&(db.showLabels||Wa._collection?Za.push(Wa):Wa.setShowLabels&&Wa.setShowLabels(!1)):Wa&&"esri.layers.WFSLayer"===
Wa.declaredClass&&Wa.loaded&&Wa.labelingInfo&&Za.push(Wa)});Za.length?F(["../layers/LabelLayer"],function(db){var Wa=new db;a.forEach(Za,function(cb){Wa.addFeatureLayer(cb)});Ua.push({layerObject:Wa});Na.callback(Ua)}):Na.callback(Ua)});return Na}function ra(Q,Ga,Fa,Aa,Da,Na){var Ma=[],Ea=[],Ra=[];a.forEach(Q.operationalLayers,function(Ua,Za){if(Ua.featureCollection&&Ua.featureCollection.layers){var db=Ua.featureCollection.layers.length;a.forEach(Ua.featureCollection.layers,function(Wa,cb){var bb=
!0;Ua.visibleLayers&&-1==a.indexOf(Ua.visibleLayers,cb)&&(bb=!1);Wa.visibility=(null!=Ua.visibility?!!Ua.visibility:!0)&&bb;Wa.opacity=Ua.opacity;Wa.id=(Ua.id||"operational"+Za)+"_"+cb;Ua.title&&(Wa.title=1!==db&&Wa.layerDefinition.name&&Ua.title!==Wa.layerDefinition.name?Ua.title+" - "+Wa.layerDefinition.name:Ua.title);null==Wa.disablePopup&&(Wa.disablePopup=Ua.disablePopup);Ra.push(Wa)},this)}else Ra.push(Ua)});a.forEach(Q.baseMap.baseMapLayers,function(Ua,Za){Ua.baseMapLayer=!0;Ua.id=Ua.id||"base"+
Za;Ma.push(Ua)});a.forEach(Ra,function(Ua,Za){Ua.id=Ua.id||"operational"+Za;Ma.push(Ua)});a.forEach(Ma,function(Ua){var Za=!(!Ua||"VectorTileLayer"!==Ua.layerType);if(ma(Ua)||Za)Ua.deferredsPos=Ea.length,Ua.errors=Ua.errors||[],Za?Ea.push(ha(Ua.styleUrl,Ua.errors)):Ea.push(J(Ua.url,Ua.errors))});0===Ea.length?(Fa=Fa||pa(Ma),Ma=V(Ma,Ga,Fa,Aa,Na),Da.callback(Ma)):(new d(Ea)).addCallback(function(Ua){za(Ua,Ma,Ga,Ea,Da,Fa,Aa,Na)});return Da}function xa(Q,Ga,Fa,Aa){var Da=Q.minScale,Na=Q.maxScale;if(10.1>=
Fa.version&&Ga)for(Q=Ga.length-1;0<=Q;Q--){if(Ga[Q].id==Aa)if(0==Da&&0<Ga[Q].minScale?Da=Ga[Q].minScale:0<Da&&0==Ga[Q].minScale?Da=Fa.minScale:0<Da&&0<Ga[Q].minScale&&(Da=Math.min(Da,Ga[Q].minScale)),Na=Math.max(Fa.maxScale||0,Ga[Q].maxScale||0),Fa.setScaleRange(Da,Na),-1<Ga[Q].parentLayerId)Aa=Ga[Q].parentLayerId;else break}else 10.1<Fa.version&&(a.forEach(Q.layerInfos,function(Ma){Ma.id==Aa&&(0==Da&&0<Ma.minScale?Da=Ma.minScale:0<Da&&0==Ma.minScale||0<Da&&0<Ma.minScale&&(Da=Math.min(Da,Ma.minScale)),
Na=Math.max(Na||0,Ma.maxScale||0))}),Fa.setScaleRange(Da,Na))}function La(Q,Ga,Fa,Aa){var Da=Q.url,Na=Q.__popupIds,Ma=Q.__popupUrls,Ea=Q.__popupWhereClauses,Ra=Q.__popupMinScales,Ua=Q.__popupMaxScales,Za=Q.__resourceInfo,db=[];a.forEach(Q.__popups,function(Wa,cb){if(Wa){var bb=[];a.forEach(Wa.fieldInfos,function(rb){"shape"!==rb.fieldName.toLowerCase()&&bb.push(rb.fieldName)});if(Q.dynamicLayerInfos&&0<Q.dynamicLayerInfos.length){var jb=a.filter(Q.dynamicLayerInfos,function(rb){return Na[cb]==rb.id})[0].source;
var Bb=new Y(Da+"/dynamicLayer",{parentLayer:Q,id:Q.id+"_"+Na[cb],source:jb,outFields:bb,mode:Y.MODE_SELECTION,infoTemplate:Wa&&new Fa(Wa),drawMode:!1,visible:Q.visible,autoGeneralize:!0});var hc=function(rb,Wb){0<Ea[rb].length&&Wb.setDefinitionExpression(Ea[rb]);if(k.isDefined(Ra[rb])||k.isDefined(Ua[rb]))if(k.isDefined(Q.minScale)||k.isDefined(Q.maxScale)){var Pb=Q.minScale,Yb=Q.maxScale;0==Pb&&0<Ra[rb]?Pb=Ra[rb]:0<Pb&&0==Ra[rb]||0<Pb&&0<Ra[rb]&&(Pb=Math.min(Pb,Ra[rb]));Yb=Math.max(Yb||0,Ua[rb]||
0);Wb.setScaleRange(Pb,Yb)}else Wb.setScaleRange(Ra[rb],Ua[rb]);else xa(Q,Ga||Za.layers,Wb,Na[rb])};Bb.loaded?hc(cb,Bb):u.connect(Bb,"onLoad",function(rb){hc(cb,Bb)})}else{var ic=null,jc=Da+"/"+Na[cb];if(Ma[cb].length)jc=Ma[cb];else if(Ga)for(jb=0;jb<Ga.length;jb++)if(Ga[jb].id===Na[cb]){ic=Ga[jb];break}Bb=new Y(N(jc),{parentLayer:Q,id:Q.id+"_"+Na[cb],outFields:bb,mode:Y.MODE_SELECTION,infoTemplate:Wa&&new Fa(Wa),drawMode:!1,visible:Q.visible,resourceInfo:ic,autoGeneralize:!0});Bb.loaded?(0<Ea[cb].length&&
Bb.setDefinitionExpression(Ea[cb]),xa(Q,Ga||Za.layers,Bb,Na[cb])):u.connect(Bb,"onLoad",function(rb){0<Ea[cb].length&&Bb.setDefinitionExpression(Ea[cb]);xa(Q,Ga||Za.layers,rb,Na[cb])})}db.push(Bb)}});0<db.length&&(u.connect(Q,"onVisibilityChange",y.hitch(this,function(Wa,cb){a.forEach(Wa,function(bb){cb?bb.show():bb.hide()})},db)),u.connect(Aa,"onLayerRemove",y.hitch(this,function(Wa,cb,bb){Wa.id===bb.id&&a.forEach(cb,function(jb){Aa.removeLayer(jb)})},Q,db)));delete Q.__popups;delete Q.__popupIds;
delete Q.__popupUrls;delete Q.__popupWhereClauses;delete Q.__popupMinScales;delete Q.__popupMaxScales;delete Q.__resourceInfo;return db}function Ha(Q){return m({url:N(Q.url+"/layers"),content:{f:"json"},callbackParamName:"callback",error:function(){}})}function Va(Q,Ga,Fa){var Aa=[];a.forEach(Q,function(Na){var Ma=Na.__popups;Ma&&1<Ma.length&&10<=Na.version&&(Na.__deferredsPos=Aa.length,Aa.push(Ha(Na)))});var Da=[];0<Aa.length?(new d(Aa)).addCallback(function(Na){a.forEach(Q,function(Ma){Ma.__popups&&
0<Ma.__popups.length&&(Ma.__deferredsPos||0===Ma.__deferredsPos?(Da=Da.concat(La(Ma,Na[Ma.__deferredsPos][1].layers,Fa,Ga)),delete Ma.__deferredsPos):Da=Da.concat(La(Ma,null,Fa,Ga)))});Ga.addLayers(Da)}):(a.forEach(Q,function(Na){Na.__popups&&0<Na.__popups.length&&(Da=Da.concat(La(Na,null,Fa,Ga)))}),Ga.addLayers(Da))}function Ta(Q){a.forEach(Q,function(Ga){var Fa=Ga.layer;Fa.toJson&&(Ga=Fa.toJson(),Ga.featureSet&&Fa.name&&-1<Fa.name.indexOf("Text")&&a.forEach(Ga.featureSet.features,function(Aa,Da){Aa.attributes.TEXT&&
(Da=Fa.graphics[Da],Da.symbol.setText(Aa.attributes.TEXT),Aa.symbol.horizontalAlignment&&(Da.symbol.align=Aa.symbol.horizontalAlignment),Da.setSymbol(Da.symbol),Da.setAttributes(Aa.attributes))},this))})}function Pa(Q){var Ga=6;a.forEach(Q,function(Fa){if(Fa=Fa.renderer)"esri.renderer.SimpleRenderer"===Fa.declaredClass?((Fa=Fa.symbol)&&Fa.xoffset&&(Ga=Math.max(Ga,Math.abs(Fa.xoffset))),Fa&&Fa.yoffset&&(Ga=Math.max(Ga,Math.abs(Fa.yoffset)))):"esri.renderer.UniqueValueRenderer"!==Fa.declaredClass&&
"esri.renderer.ClassBreaksRenderer"!==Fa.declaredClass||a.forEach(Fa.infos,function(Aa){(Aa=Aa.symbol)&&Aa.xoffset&&(Ga=Math.max(Ga,Math.abs(Aa.xoffset)));Aa&&Aa.yoffset&&(Ga=Math.max(Ga,Math.abs(Aa.yoffset)))})});return Ga}function Xa(Q){var Ga=this,Fa=Ga.infoWindow,Aa=Q.graphic;if(Ga.loaded){Fa.hide();Fa.clearFeatures();var Da=[];a.forEach(Ga.graphicsLayerIds,function(Wa){(Wa=Ga.getLayer(Wa))&&Wa instanceof Y&&Wa.loaded&&Wa.visible&&(Wa.clearSelection(),Wa.infoTemplate&&!Wa.suspended&&Da.push(Wa))});
a.forEach(Ga.layerIds,function(Wa){(Wa=Ga.getLayer(Wa))&&(-1!==Wa.declaredClass.indexOf("ArcGISImageServiceLayer")||-1!==Wa.declaredClass.indexOf("RasterXLayer"))&&Wa.loaded&&Wa.visible&&Wa.infoTemplate&&Da.push(Wa)});Aa=Aa&&Aa.getInfoTemplate()?Aa:null;if(Da.length||Aa){var Na=Pa(Da),Ma=Q.screenPoint,Ea=Ga.toMap(new z(Ma.x-Na,Ma.y+Na));Na=Ga.toMap(new z(Ma.x+Na,Ma.y-Na));var Ra=new q(Ea.x,Ea.y,Na.x,Na.y,Ga.spatialReference),Ua=new G;Ua.geometry=Ra;Ua.timeExtent=Ga.timeExtent;var Za=!0;Ea=a.map(Da,
function(Wa){Wa=Wa&&Wa.isFeatureReductionActive&&Wa.isFeatureReductionActive()?Wa.getFeatureReductionLayer():Wa;if(-1!==Wa.declaredClass.indexOf("ArcGISImageServiceLayer")){Ua.geometry=Q.mapPoint;Za=!1;var cb=Wa.queryVisibleRasters(Ua,{rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0});cb.addCallback(function(){return Wa.getVisibleRasters()})}else if(-1!==Wa.declaredClass.indexOf("RasterXLayer"))cb=Wa.fetchPopupFromTiles({geometry:Q.mapPoint});else if("function"===typeof Wa.selectFeatures)cb=
Wa.selectFeatures(Ua),cb.addCallback(function(){return Wa.getSelectedFeatures()});else{cb=new n;var bb=a.filter(Wa.graphics,function(jb){return jb&&jb.visible&&Ra.intersects(jb.geometry)});cb.resolve(bb)}return cb});Aa&&(Na=new n,Na.callback([Aa]),Ea.splice(0,0,Na));if(!a.some(Ea,function(Wa){return-1===Wa.fired})){var db=Aa?1:0;a.forEach(Da,function(Wa){db=-1!==Wa.declaredClass.indexOf("ArcGISImageServiceLayer")?db+Wa.getVisibleRasters().length:-1!==Wa.declaredClass.indexOf("RasterXLayer")?db+Wa.getPopupFromTiles().length:
db+Wa.getSelectedFeatures().length});if(!db)return}Fa.setFeatures(Ea);Fa.show(Q.mapPoint,{closestFirst:Za})}}}function ab(Q,Ga){var Fa=Ga.mapOptions||{};if(!Fa.infoWindow){var Aa=new E({visibleWhenEmpty:!1},f.create("div"));Fa.infoWindow=Aa}k.isDefined(Fa.showInfoWindowOnClick)||Ga.usePopupManager||(Fa.showInfoWindowOnClick=!1);Q=new p(Q,Fa);u.connect(Q,"onLayersAddResult",Ta);return Q}function Ya(Q,Ga,Fa,Aa,Da,Na){if(Aa.map){var Ma=Aa.map;var Ea=Aa.clickEventHandle;var Ra=Aa.clickEventListener;var Ua=
Aa.errors}else{var Za=Fa.itemData;!Da.mapOptions.backgroundColor&&Za.background&&Za.background.color&&null!=Za.background.color[0]&&(Da.mapOptions.backgroundColor=h.toDojoColor(Za.background.color));Ma=ab(Aa,Da);Da.ignorePopups||Da.disableClickBehavior||Da.usePopupManager||(Ea=u.connect(Ma,"onClick",Xa),Ra=Xa)}Ma.addLayers(Q);Da.ignorePopups||Da.usePopupManager||Va(Q,Ma,Da._clazz);var db=Ua||[];a.forEach(Ga,function(Wa){Wa.errors&&(db=db.concat(Wa.errors))},this);Ma.loaded?Na.callback({map:Ma,itemInfo:Fa,
errors:db,clickEventHandle:Ea,clickEventListener:Ra}):u.connect(Ma,"onLoad",function(){Na.callback({map:Ma,itemInfo:Fa,errors:db,clickEventHandle:Ea,clickEventListener:Ra})})}function hb(Q,Ga,Fa,Aa,Da){var Na=[];a.forEach(Da,function(Ra){y.isArray(Ra.layerObject)?a.forEach(Ra.layerObject,function(Ua){Na.push(Ua)}):Na.push(Ra.layerObject)});if(T(Da[0]))var Ma=setInterval(function(){if(Da[0].layerObject&&Da[0].layerObject.loaded)clearInterval(Ma),eb(Q,Ga,Fa,Aa,Da,Na);else if(Da[0].errors){clearInterval(Ma);
var Ra="";Da[0].errors&&Da[0].errors.length&&(Ra=" ("+Da[0].errors[0].message+")");Aa.errback(Error(X.arcgis.utils.baseLayerError+Ra))}},10);else if(!Na[0]&&Da[0].baseMapLayer){var Ea="";Da[0].errors&&Da[0].errors.length&&(Ea=" ("+Da[0].errors[0].message+")");Aa.errback(Error(X.arcgis.utils.baseLayerError+Ea))}else eb(Q,Ga,Fa,Aa,Da,Na)}function eb(Q,Ga,Fa,Aa,Da,Na){try{var Ma=Fa.mapOptions||{};Fa.mapOptions=Ma;Na=a.filter(Na,k.isDefined);if(Ga.map||Ma.extent)Ya(Na,Da,Q,Ga,Fa,Aa);else{var Ea=Na[0].spatialReference;
if(Ma.center&&(null!=Ma.zoom||Ma.scale)&&(y.isArray(Ma.center)&&(Ma.center=new C(Ma.center)),v.canProject(Ma.center,Ea))){Ya(Na,Da,Q,Ga,Fa,Aa);return}var Ra=Q.item;if(Ra&&Ra.extent&&Ra.extent.length){var Ua=new q(Ra.extent[0][0],Ra.extent[0][1],Ra.extent[1][0],Ra.extent[1][1],new w({wkid:4326}));4326===Ea.wkid?(Ma.extent=Ua,Ya(Na,Da,Q,Ga,Fa,Aa)):900913===Ea.wkid||102100===Ea.wkid||102113===Ea.wkid||3857===Ea.wkid?(Ua.xmin=Math.max(Ua.xmin,-180),Ua.xmax=Math.min(Ua.xmax,180),Ua.ymin=Math.max(Ua.ymin,
-89.99),Ua.ymax=Math.min(Ua.ymax,89.99),Ma.extent=v.geographicToWebMercator(Ua),Ya(Na,Da,Q,Ga,Fa,Aa)):Fa.geometryServiceURL||e.defaults.geometryService?(Fa.geometryServiceURL?new I(Fa.geometryServiceURL):e.defaults.geometryService).project([Ua],Ea,function(Za){Za=Za[0];Ma.extent=Ma.extent||Za;Ya(Na,Da,Q,Ga,Fa,Aa)},function(){Ya(Na,Da,Q,Ga,Fa,Aa)}):Aa.errback(Error(X.arcgis.utils.geometryServiceError))}else Ya(Na,Da,Q,Ga,Fa,Aa)}}catch(Za){Aa.errback(Za)}}function kb(Q){var Ga=[];a.forEach(Q.operationalLayers,
function(Fa){Fa.featureCollection?Ga.push({featureCollection:Fa.featureCollection,visibility:null!=Fa.visibility?!!Fa.visibility:!0,title:Fa.title}):Fa.layerObject&&Ga.push({layer:Fa.layerObject,visibility:null!=Fa.visibility?!!Fa.visibility:!0,title:Fa.title})});return Ga}function sb(Q){var Ga=[],Fa=Q.baseMap.baseMapLayers;Q.operationalLayers&&(Fa=Fa.concat(Q.operationalLayers));a.forEach(Fa,function(Aa){var Da={};if(Aa.featureCollection&&(!Aa||"CSV"!==Aa.layerType&&"CSV"!==Aa.type))!0===Aa.featureCollection.showLegend&&
a.forEach(Aa.featureCollection.layers,function(Ea){if(!1!==Ea.showLegend){var Ra=Ea.layerObject.renderer;Da={layer:Ea.layerObject,title:Aa.title,defaultSymbol:Ra&&Ra.defaultSymbol&&Ra.defaultLabel?!0:!1};1<Aa.featureCollection.layers.length&&(Da.title+=" - "+Ea.layerDefinition.name);Ga.push(Da)}});else if(Aa.baseMapLayer&&!0===Aa.showLegend&&Aa.layerObject||!Aa.baseMapLayer&&!1!==Aa.showLegend&&Aa.layerObject&&!(Aa.layerObject instanceof Y&&Aa.layerObject.mode===Y.MODE_SELECTION)){var Na=Aa.layerObject.renderer,
Ma=Aa.layerObject.declaredClass;Na=!Na||Na&&Na.defaultSymbol&&Na.defaultLabel?!0:!1;if(10.1>Aa.layerObject.version&&("esri.layers.ArcGISDynamicMapServiceLayer"===Ma||"esri.layers.ArcGISTiledMapServiceLayer"===Ma)||"esri.layers.ArcGISImageServiceLayer"===Ma)Na=!0;Da={layer:Aa.layerObject,title:Aa.title,defaultSymbol:Na};Aa.layers&&(Ma=a.map(a.filter(Aa.layers,function(Ea){return!1===Ea.showLegend}),function(Ea){return Ea.id}),Ma.length&&(Da.hideLayers=Ma));Ga.push(Da)}});return Ga}function qb(Q,Ga){function Fa(Ea,
Ra){a.forEach(Ea,function(Ua,Za){switch(Ua){case "../layers/ArcGISDynamicMapServiceLayer":Db=Ra[Za];break;case "../layers/ArcGISImageServiceLayer":xb=Ra[Za];break;case "../layers/ArcGISImageServiceVectorLayer":mb=Ra[Za];break;case "../layers/CSVLayer":Rb=Ra[Za];break;case "../layers/DynamicLayerInfo":tb=Ra[Za];break;case "../layers/GeoRSSLayer":Gb=Ra[Za];break;case "../layers/ImageParameters":Kb=Ra[Za];break;case "../layers/ImageServiceParameters":Ob=Ra[Za];break;case "../layers/KMLLayer":Tb=Ra[Za];
break;case "../layers/LabelClass":Eb=Ra[Za];break;case "../layers/LayerDrawingOptions":Vb=Ra[Za];break;case "../layers/MosaicRule":$b=Ra[Za];break;case "../layers/OpenStreetMapLayer":bc=Ra[Za];break;case "../layers/RasterFunction":cc=Ra[Za];break;case "../layers/RasterXLayer":ec=Ra[Za];break;case "../layers/StreamLayer":fc=Ra[Za];break;case "../layers/TileInfo":gc=Ra[Za];break;case "../layers/VectorTileLayer":Lb=Ra[Za];break;case "../layers/vectorTiles/layers/support/vectorTileLayerLoader":Mb=Ra[Za];
break;case "../virtualearth/VETiledLayer":Jb=Ra[Za];break;case "../layers/WebTiledLayer":mc=Ra[Za];break;case "../layers/WFSLayer":nc=Ra[Za];break;case "../layers/WMSLayer":Sb=Ra[Za];break;case "../layers/WMSLayerInfo":dc=Ra[Za]}})}var Aa=new n;Q=Q.itemData;Ga=[];Q.baseMap&&Q.baseMap.baseMapLayers&&(Ga=Ga.concat(Q.baseMap.baseMapLayers));Q.operationalLayers&&(Ga=Ga.concat(Q.operationalLayers));Q=a.map(Ga,function(Ea){return Ea&&Ea.layerType});var Da=[],Na=[];Ga=!1;for(var Ma=0;Ma<Q.length;Ma++){switch(Q[Ma]){case "ArcGISFeatureLayer":-1===
a.indexOf(Da,"../layers/LabelClass")&&Da.push("../layers/LabelClass");break;case "ArcGISImageServiceLayer":case "ArcGISTiledImageServiceLayer":-1===a.indexOf(Da,"../layers/ArcGISImageServiceLayer")&&(Da.push("../layers/ArcGISImageServiceLayer"),Na.push("../layers/ImageServiceParameters"),Na.push("../layers/MosaicRule"),Na.push("../layers/RasterFunction"),Da.push("../layers/RasterXLayer"));break;case "ArcGISImageServiceVectorLayer":-1===a.indexOf(Da,"../layers/ArcGISImageServiceVectorLayer")&&(Da.push("../layers/ArcGISImageServiceVectorLayer"),
Na.push("../layers/ImageServiceParameters"),Na.push("../layers/MosaicRule"),Na.push("../layers/RasterFunction"));break;case "ArcGISMapServiceLayer":case "ArcGISTiledMapServiceLayer":-1===a.indexOf(Da,"../layers/ArcGISDynamicMapServiceLayer")&&(Da.push("../layers/ArcGISDynamicMapServiceLayer"),Na.push("../layers/DynamicLayerInfo"),Na.push("../layers/ImageParameters"),Na.push("../layers/LayerDrawingOptions"));break;case "ArcGISStreamLayer":-1===a.indexOf(Da,"../layers/StreamLayer")&&Da.push("../layers/StreamLayer");
-1===a.indexOf(Da,"../layers/LabelClass")&&Da.push("../layers/LabelClass");break;case "BingMapsAerial":case "BingMapsHybrid":case "BingMapsRoad":-1===a.indexOf(Da,"../virtualearth/VETiledLayer")&&Da.push("../virtualearth/VETiledLayer");break;case "CSV":-1===a.indexOf(Da,"../layers/CSVLayer")&&(Da.push("../layers/CSVLayer"),Na.push("./csv"));break;case "GeoRSS":-1===a.indexOf(Da,"../layers/GeoRSSLayer")&&Da.push("../layers/GeoRSSLayer");break;case "KML":-1===a.indexOf(Da,"../layers/KMLLayer")&&Da.push("../layers/KMLLayer");
break;case "OpenStreetMap":-1===a.indexOf(Da,"../layers/OpenStreetMapLayer")&&Da.push("../layers/OpenStreetMapLayer");break;case "VectorTileLayer":-1===a.indexOf(Da,"../layers/VectorTileLayer")&&Da.push("../layers/VectorTileLayer");-1===a.indexOf(Na,"../layers/vectorTiles/layers/support/vectorTileLayerLoader")&&Na.push("../layers/vectorTiles/layers/support/vectorTileLayerLoader");break;case "WebTiledLayer":-1===a.indexOf(Da,"../layers/WebTiledLayer")&&(Da.push("../layers/WebTiledLayer"),Na.push("../layers/TileInfo"));
break;case "WFS":-1===a.indexOf(Da,"../layers/WFSLayer")&&Da.push("../layers/WFSLayer");break;case "WMS":-1===a.indexOf(Da,"../layers/WMSLayer")&&(Da.push("../layers/WMSLayer"),Na.push("../layers/WMSLayerInfo"));break;default:Ga=!0}if(Ga)break}Ga&&(Da=Cb,Na=Nb);Da.length?F(Da,function(){Fa(Da,arguments);Na.length?F(Na,function(){Fa(Na,arguments);Aa.resolve()}):Aa.resolve()}):Aa.resolve();return Aa}function gb(Q){Q=Q.itemData;var Ga=function(Aa,Da){"GroupLayer"===Aa.layerType?a.forEach(Aa.layers,function(Na){Na.visibility=
!1===Aa.visibility?!1:Na.visibility;Na.opacity=k.isDefined(Aa.opacity)?k.isDefined(Na.opacity)?Na.opacity*Aa.opacity:Aa.opacity:Na.opacity;Ga(Na,Da)}):Da.push(Aa)},Fa=[];a.forEach(Q.operationalLayers,function(Aa){Ga(Aa,Fa)});Q.operationalLayers=Fa}function pb(Q,Ga,Fa,Aa){gb(Aa);var Da=Aa.itemData;Da.baseMap&&Da.baseMap.baseMapLayers&&Da.baseMap.baseMapLayers.length&&(Da.baseMap.baseMapLayers[0].firstLayer=!0);var Na=Ga.layerMixins,Ma=Na&&Na.length;if(Ma){var Ea=function(Ra){for(var Ua=0;Ua<Ma;Ua++){var Za=
Na[Ua];if(Za.mixin)if(Za.hasOwnProperty("id")){if(Ra.id===Za.id){y.mixin(Ra,Za.mixin);break}}else if(Ra.url===Za.url){y.mixin(Ra,Za.mixin);break}}};a.forEach(Da.baseMap&&Da.baseMap.baseMapLayers,Ea);a.forEach(Da.operationalLayers,Ea)}qb(Aa,Ga).then(function(){return ia(Aa,Ga)}).then(function(){return Z(Aa,Ga)}).then(function(Ra){var Ua=Ra[0],Za=Ra[1];if(Ua.itemData.operationalLayers&&0!==Ua.itemData.operationalLayers.length){var db=new n,Wa=Ua.itemData.baseMap.baseMapLayers.slice(),cb=a.filter(Ua.itemData.baseMap.baseMapLayers,
function(bb){return!bb.isReference});Ra={item:Ua.item,itemData:{baseMap:{baseMapLayers:cb},background:y.clone(Ua.itemData.background)}};Ua.itemData.baseMap.baseMapLayers=a.filter(Ua.itemData.baseMap.baseMapLayers,function(bb){return bb.isReference});M(Ra,Za).addCallback(function(bb){ba(bb.itemData,Za).addCallback(y.hitch(null,hb,bb,Q,Za,db))});db.then(function(bb){M(Ua,Za).addCallback(function(jb){ba(jb.itemData,Za,bb.map.spatialReference,cb,bb.map).addCallback(function(Bb){jb.itemData.baseMap.baseMapLayers=
Wa;hb(jb,bb,Za,Fa,Bb)})})},y.hitch(Fa,Fa.errback))}else M(Ua,Za).addCallback(function(bb){ba(bb.itemData,Za).addCallback(y.hitch(null,hb,bb,Q,Za,Fa))})})}function Ab(Q,Ga){"undefined"===typeof Ga&&(Ga=!0);ub._arcgisUrl&&0<ub._arcgisUrl.length&&(ub.arcgisUrl=ub._arcgisUrl);var Fa={},Aa=new n;m({url:ub.arcgisUrl+"/"+Q,content:{f:"json"},callbackParamName:"callback",load:function(Da){Fa.item=Da;Ga?m({url:ub.arcgisUrl+"/"+Q+"/data",content:{f:"json"},callbackParamName:"callback",load:function(Na){Fa.itemData=
Na;Aa.callback(Fa)},error:function(Na){Aa.errback(Na)}}):Aa.callback(Fa)},error:function(Da){Aa.errback(Da)}});return Aa}var Db,xb,mb,Rb,tb,Gb,Kb,Ob,Tb,Eb,Vb,$b,bc,cc,ec,fc,gc,Lb,Mb,Jb,mc,nc,Sb,dc,Cb="../layers/ArcGISDynamicMapServiceLayer ../layers/ArcGISImageServiceLayer ../layers/ArcGISImageServiceVectorLayer ../layers/CSVLayer ../layers/GeoRSSLayer ../layers/KMLLayer ../layers/LabelClass ../layers/OpenStreetMapLayer ../layers/RasterXLayer ../layers/StreamLayer ../layers/VectorTileLayer ../virtualearth/VETiledLayer ../layers/WebTiledLayer ../layers/WFSLayer ../layers/WMSLayer".split(" "),
Nb="./csv ../layers/DynamicLayerInfo ../layers/ImageParameters ../layers/ImageServiceParameters ../layers/LayerDrawingOptions ../layers/MosaicRule ../layers/RasterFunction ../layers/TileInfo ../layers/vectorTiles/layers/support/vectorTileLayerLoader ../layers/WMSLayerInfo".split(" ");var ub={arcgisUrl:A.getProtocolForWebResource()+"//www.arcgis.com/sharing/rest/content/items",getItem:Ab,createMap:function(Q,Ga,Fa){var Aa=new n;Fa=Fa||{};var Da=Fa.infoTemplateClass;Fa._clazz=Da&&(y.isObject(Da)?Da:
y.getObject(Da))||x;y.isString(Q)?Ab(Q).addCallback(y.hitch(null,pb,Ga,Fa,Aa)).addErrback(y.hitch(Aa,Aa.errback)):pb(Ga,Fa,Aa,Q);Aa.addCallback(function(Na){var Ma=Na.map;Ma&&(Ma.tables=y.getObject("itemInfo.itemData.tables",!1,Na)||[])});return Aa},getLayerList:function(Q){return Q&&Q.itemInfo&&Q.itemInfo.itemData?kb(Q.itemInfo.itemData):[]},getLegendLayers:function(Q){return Q&&Q.itemInfo&&Q.itemInfo.itemData?sb(Q.itemInfo.itemData):[]},_arcgisUrl:null,_getItemProps:M,_getItemData:wa,_getBingKey:ja,
_portalUrlResponse:qa,_portalUrlFailure:ya,_processFSItemProperties:ua,_processSSItemProperties:Ba,_getLayers:ba,_preBuildLayerObjects:za,_buildLayerObjects:V,_preCreateMap:hb,_getMapSR:pa,_createMap:Ya,_addSelectionLayers:Va,_createSelectionFeatureLayers:La,_getServiceInfo:J,_getFeatureCollectionItem:U,_mergeFeatureCollectionItem:K,_projectFeatureCollection:S,_getLayersInfo:Ha,_initLayer:O,_loadAsCached:aa,_loadAsDynamic:ca,_processPopups:Ia,_onLayersAddResult:Ta,_sameSpatialReferenceAsBasemap:oa,
_sameTilingSchemeAsBasemap:ta,_showPopup:Xa,_calculateClickTolerance:Pa,_getVisibleFeatureLayers:na,_updateLayerScaleInfo:xa,_checkUrl:N,_isHostedService:Oa,_isAgolService:la,_getLegendLayers:sb};y.setObject("arcgis.utils",ub,g);return ub})},"esri/tasks/GeometryService":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ./Task ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/jsonUtils".split(" "),
function(F,y,a,u,n,t,r,l,d,f,b,c,g,e,h){F=F(f,{declaredClass:"esri.tasks.GeometryService",_eventMap:{"areas-and-lengths-complete":["result"],"auto-complete-complete":["geometries"],"buffer-complete":["geometries"],"convex-hull-complete":["geometry"],"cut-complete":["result"],"densify-complete":["geometries"],"difference-complete":["geometries"],"distance-complete":["distance"],"generalize-complete":["geometries"],"intersect-complete":["geometries"],"label-points-complete":["geometries"],"lengths-complete":["result"],
"offset-complete":["geometries"],"project-complete":["geometries"],"relation-complete":["relations"],"reshape-complete":["geometry"],"simplify-complete":["geometries"],"trim-extend-complete":["geometries"],"union-complete":["geometry"]},constructor:function(k){k=y.hitch;this._projectHandler=k(this,this._projectHandler);this._simplifyHandler=k(this,this._simplifyHandler);this._bufferHandler=k(this,this._bufferHandler);this._areasAndLengthsHandler=k(this,this._areasAndLengthsHandler);this._lengthsHandler=
k(this,this._lengthsHandler);this._labelPointsHandler=k(this,this._labelPointsHandler);this._relationHandler=k(this,this._relationHandler);this._convexHullHandler=k(this,this._convexHullHandler);this._unionHandler=k(this,this._unionHandler);this._autoCompleteHandler=k(this,this._autoCompleteHandler);this._reshapeHandler=k(this,this._reshapeHandler);this._cutHandler=k(this,this._cutHandler);this._intersectHandler=k(this,this._intersectHandler);this._differenceHandler=k(this,this._differenceHandler);
this._trimExtendHandler=k(this,this._trimExtendHandler);this._densifyHandler=k(this,this._densifyHandler);this._generalizeHandler=k(this,this._densifyHandler);this._offsetHandler=k(this,this._offsetHandler);this._distanceHandler=k(this,this._distanceHandler);this._toGeoCoordinateHandler=k(this,this._toGeoCoordinateHandler);this._fromGeoCoordinateHandler=k(this,this._fromGeoCoordinateHandler);this.registerConnectEvents()},_encodeGeometries:function(k){var m=[],w,p=k.length;for(w=0;w<p;w++)m.push(k[w].toJson());
return{geometryType:h.getJsonType(k[0]),geometries:m}},_decodeGeometries:function(k,m,w){var p=h.getGeometryType(m);k=k.geometries;var A=[],C={spatialReference:w.toJson()},z=y.mixin;a.forEach(k,function(q,v){A[v]=new p(z(q,C))});return A},_toProjectGeometry:function(k){var m=k.spatialReference.toJson();return k instanceof b?new g({rings:[[[k.xmin,k.ymin],[k.xmin,k.ymax],[k.xmax,k.ymax],[k.xmax,k.ymin],[k.xmin,k.ymin]]],spatialReference:m}):new c({paths:[[].concat(k.points)],spatialReference:m})},
_fromProjectedGeometry:function(k,m,w){return"esriGeometryEnvelope"===m?(k=k.rings[0],new b(k[0][0],k[0][1],k[2][0],k[2][1],w)):new e({points:k.paths[0],spatialReference:w.toJson()})},project:function(k,m,w,p){var A=y.mixin({},this._url.query,{f:"json"});if(k.geometries){p=w;w=m;m=k.outSR;var C=k.geometries[0];A=y.mixin(A,k.toJson())}else C=k[0],A=y.mixin(A,{outSR:m.wkid||u.toJson(m.toJson()),inSR:C.spatialReference.wkid||u.toJson(C.spatialReference.toJson()),geometries:u.toJson(this._encodeGeometries(k))});
var z=h.getJsonType(C),q=this._projectHandler,v=this._errorHandler,B=new n(d._dfdCanceller);B._pendingDfd=l({url:this._url.path+"/project",content:A,callbackParamName:"callback",load:function(D,x){q(D,x,z,m,w,p,B)},error:function(D){v(D,p,B)}});return B},_projectHandler:function(k,m,w,p,A,C,z){try{var q=this._decodeGeometries(k,w,p);this._successHandler([q],"onProjectComplete",A,z)}catch(v){this._errorHandler(v,C,z)}},onProjectComplete:function(){},simplify:function(k,m,w){var p=k[0].spatialReference,
A=y.mixin({},this._url.query,{f:"json",sr:p.wkid?p.wkid:u.toJson(p.toJson()),geometries:u.toJson(this._encodeGeometries(k))}),C=h.getJsonType(k[0]),z=this._simplifyHandler,q=this._errorHandler,v=new n(d._dfdCanceller);v._pendingDfd=l({url:this._url.path+"/simplify",content:A,callbackParamName:"callback",load:function(B,D){z(B,D,C,p,m,w,v)},error:function(B){q(B,w,v)}});return v},_simplifyHandler:function(k,m,w,p,A,C,z){try{var q=this._decodeGeometries(k,w,p);this._successHandler([q],"onSimplifyComplete",
A,z)}catch(v){this._errorHandler(v,C,z)}},onSimplifyComplete:function(){},convexHull:function(k,m,w){var p=k[0].spatialReference;k=y.mixin({},this._url.query,{f:"json",sr:u.toJson(p.toJson()),geometries:u.toJson(this._encodeGeometries(k))});var A=this._convexHullHandler,C=this._errorHandler,z=new n(d._dfdCanceller);z._pendingDfd=l({url:this._url.path+"/convexHull",content:k,callbackParamName:"callback",load:function(q,v){A(q,v,p,m,w,z)},error:function(q){C(q,w,z)}});return z},_convexHullHandler:function(k,
m,w,p,A,C){try{var z=h.fromJson(k.geometry).setSpatialReference(w);this._successHandler([z],"onConvexHullComplete",p,C)}catch(q){this._errorHandler(q,A,C)}},onConvexHullComplete:function(){},union:function(k,m,w){var p=k[0].spatialReference;k=y.mixin({},this._url.query,{f:"json",sr:u.toJson(p.toJson()),geometries:u.toJson(this._encodeGeometries(k))});var A=this._unionHandler,C=this._errorHandler,z=new n(d._dfdCanceller);z._pendingDfd=l({url:this._url.path+"/union",content:k,callbackParamName:"callback",
load:function(q,v){A(q,v,p,m,w,z)},error:function(q){C(q,w,z)}});return z},_unionHandler:function(k,m,w,p,A,C){try{var z=h.fromJson(k.geometry).setSpatialReference(w);this._successHandler([z],"onUnionComplete",p,C)}catch(q){this._errorHandler(q,A,C)}},onUnionComplete:function(){},autoComplete:function(k,m,w,p){var A=k[0].spatialReference;k=y.mixin({},this._url.query,{f:"json",sr:u.toJson(A.toJson()),polygons:u.toJson(this._encodeGeometries(k).geometries),polylines:u.toJson(this._encodeGeometries(m).geometries)});
var C=this._autoCompleteHandler,z=this._errorHandler,q=new n(d._dfdCanceller);q._pendingDfd=l({url:this._url.path+"/autoComplete",content:k,callbackParamName:"callback",load:function(v,B){C(v,B,A,w,p,q)},error:function(v){z(v,p,q)}});return q},_autoCompleteHandler:function(k,m,w,p,A,C){try{var z=k.geometries;k=[];var q,v=z.length;for(q=0;q<v;q++)k[q]=new g({spatialReference:w,rings:z[q].rings});this._successHandler([k],"onAutoCompleteComplete",p,C)}catch(B){this._errorHandler(B,A,C)}},onAutoCompleteComplete:function(){},
reshape:function(k,m,w,p){var A=k.spatialReference;k=y.mixin({},this._url.query,{f:"json",sr:u.toJson(A.toJson()),target:u.toJson({geometryType:h.getJsonType(k),geometry:k.toJson()}),reshaper:u.toJson(m.toJson())});var C=this._reshapeHandler,z=this._errorHandler,q=new n(d._dfdCanceller);q._pendingDfd=l({url:this._url.path+"/reshape",content:k,callbackParamName:"callback",load:function(v,B){C(v,B,A,w,p,q)},error:function(v){z(v,p,q)}});return q},_reshapeHandler:function(k,m,w,p,A,C){try{var z=h.fromJson(k.geometry).setSpatialReference(w);
this._successHandler([z],"onReshapeComplete",p,C)}catch(q){this._errorHandler(q,A,C)}},onReshapeComplete:function(){},cut:function(k,m,w,p){var A=k[0].spatialReference,C=a.map(k,function(B){return B.toJson()});k=y.mixin({},this._url.query,{f:"json",sr:u.toJson(A.toJson()),target:u.toJson({geometryType:h.getJsonType(k[0]),geometries:C}),cutter:u.toJson(m.toJson())});var z=this._cutHandler,q=this._errorHandler,v=new n(d._dfdCanceller);v._pendingDfd=l({url:this._url.path+"/cut",content:k,callbackParamName:"callback",
load:function(B,D){z(B,D,A,w,p,v)},error:function(B){q(B,p,v)}});return v},_cutHandler:function(k,m,w,p,A,C){try{var z=k.geometries,q={};q.cutIndexes=k.cutIndexes;q.geometries=[];a.forEach(z,function(v){q.geometries.push(h.fromJson(v).setSpatialReference(w))});this._successHandler([q],"onCutComplete",p,C)}catch(v){this._errorHandler(v,A,C)}},onCutComplete:function(){},intersect:function(k,m,w,p){var A=k[0].spatialReference;k=y.mixin({},this._url.query,{f:"json",sr:u.toJson(A.toJson()),geometries:u.toJson(this._encodeGeometries(k)),
geometry:u.toJson({geometryType:h.getJsonType(m),geometry:m.toJson()})});var C=this._intersectHandler,z=this._errorHandler,q=new n(d._dfdCanceller);q._pendingDfd=l({url:this._url.path+"/intersect",content:k,callbackParamName:"callback",load:function(v,B){C(v,B,A,w,p,q)},error:function(v){z(v,p,q)}});return q},_intersectHandler:function(k,m,w,p,A,C){try{var z=[];a.forEach(k.geometries,function(q){z.push(h.fromJson(q).setSpatialReference(w))});this._successHandler([z],"onIntersectComplete",p,C)}catch(q){this._errorHandler(q,
A,C)}},onIntersectComplete:function(){},difference:function(k,m,w,p){var A=k[0].spatialReference;k=y.mixin({},this._url.query,{f:"json",sr:u.toJson(A.toJson()),geometries:u.toJson(this._encodeGeometries(k)),geometry:u.toJson({geometryType:h.getJsonType(m),geometry:m.toJson()})});var C=this._differenceHandler,z=this._errorHandler,q=new n(d._dfdCanceller);q._pendingDfd=l({url:this._url.path+"/difference",content:k,callbackParamName:"callback",load:function(v,B){C(v,B,A,w,p,q)},error:function(v){z(v,
p,q)}});return q},_differenceHandler:function(k,m,w,p,A,C){try{var z=[];a.forEach(k.geometries,function(q){z.push(h.fromJson(q).setSpatialReference(w))});this._successHandler([z],"onDifferenceComplete",p,C)}catch(q){this._errorHandler(q,A,C)}},onDifferenceComplete:function(){},buffer:function(k,m,w){var p=y.mixin({},this._url.query,{f:"json"},k.toJson()),A=k.outSpatialReference||k.geometries[0].spatialReference,C=this._bufferHandler,z=this._errorHandler,q=new n(d._dfdCanceller);q._pendingDfd=l({url:this._url.path+
"/buffer",content:p,callbackParamName:"callback",load:function(v,B){C(v,B,A,m,w,q)},error:function(v){z(v,w,q)}});return q},_bufferHandler:function(k,m,w,p,A,C){try{var z=k.geometries;k=[];var q,v=z.length;for(q=0;q<v;q++)k[q]=new g({spatialReference:w,rings:z[q].rings});this._successHandler([k],"onBufferComplete",p,C)}catch(B){this._errorHandler(B,A,C)}},onBufferComplete:function(){},areasAndLengths:function(k,m,w){k=y.mixin({},this._url.query,{f:"json"},k.toJson());var p=this._areasAndLengthsHandler,
A=this._errorHandler,C=new n(d._dfdCanceller);C._pendingDfd=l({url:this._url.path+"/areasAndLengths",content:k,callbackParamName:"callback",load:function(z,q){p(z,q,m,w,C)},error:function(z){A(z,w,C)}});return C},_areasAndLengthsHandler:function(k,m,w,p,A){try{this._successHandler([k],"onAreasAndLengthsComplete",w,A)}catch(C){this._errorHandler(C,p,A)}},onAreasAndLengthsComplete:function(){},lengths:function(k,m,w){k=y.mixin({},this._url.query,{f:"json"},k.toJson());var p=this._lengthsHandler,A=this._errorHandler,
C=new n(d._dfdCanceller);C._pendingDfd=l({url:this._url.path+"/lengths",content:k,callbackParamName:"callback",load:function(z,q){p(z,q,m,w,C)},error:function(z){A(z,w,C)}});return C},_lengthsHandler:function(k,m,w,p,A){try{this._successHandler([k],"onLengthsComplete",w,A)}catch(C){this._errorHandler(C,p,A)}},onLengthsComplete:function(){},labelPoints:function(k,m,w){var p=a.map(k,function(v){return v.toJson()}),A=k[0].spatialReference;p=y.mixin({},this._url.query,{f:"json",sr:A.wkid?A.wkid:u.toJson(A.toJson()),
polygons:u.toJson(p)});var C=this._labelPointsHandler,z=this._errorHandler,q=new n(d._dfdCanceller);q._pendingDfd=l({url:this._url.path+"/labelPoints",content:p,callbackParamName:"callback",load:function(v,B){C(v,B,k,A,m,w,q)},error:function(v){z(v,w,q)}});return q},_labelPointsHandler:function(k,m,w,p,A,C,z){try{var q=[];a.forEach(k.labelPoints,function(v){q.push(h.fromJson(v).setSpatialReference(p))});this._successHandler([q],"onLabelPointsComplete",A,z)}catch(v){this._errorHandler(v,C,z)}},onLabelPointsComplete:function(){},
relation:function(k,m,w){k=y.mixin({},this._url.query,{f:"json"},k.toJson());var p=this._relationHandler,A=this._errorHandler,C=new n(d._dfdCanceller);C._pendingDfd=l({url:this._url.path+"/relation",content:k,callbackParamName:"callback",load:function(z,q){p(z,q,m,w,C)},error:function(z){A(z,w,C)}});return C},_relationHandler:function(k,m,w,p,A){try{this._successHandler([k.relations],"onRelationComplete",w,A)}catch(C){this._errorHandler(C,p,A)}},onRelationComplete:function(){},trimExtend:function(k,
m,w){var p=y.mixin({},this._url.query,{f:"json"},k.toJson()),A=k.sr,C=this._trimExtendHandler,z=this._errorHandler,q=new n(d._dfdCanceller);q._pendingDfd=l({url:this._url.path+"/trimExtend",content:p,callbackParamName:"callback",load:function(v,B){C(v,B,A,m,w,q)},error:function(v){z(v,w,q)}});return q},_trimExtendHandler:function(k,m,w,p,A,C){try{var z=k.geometries;k=[];var q,v=z.length;for(q=0;q<v;q++)k[q]=new c({spatialReference:w,paths:z[q].paths});this._successHandler([k],"onTrimExtendComplete",
p,C)}catch(B){this._errorHandler(B,A,C)}},onTrimExtendComplete:function(){},densify:function(k,m,w){var p=y.mixin({},this._url.query,{f:"json"},k.toJson()),A=k.geometries[0].spatialReference,C=this._densifyHandler,z=this._errorHandler,q=new n(d._dfdCanceller);q._pendingDfd=l({url:this._url.path+"/densify",content:p,callbackParamName:"callback",load:function(v,B){C(v,B,A,m,w,q)},error:function(v){z(v,w,q)}});return q},_densifyHandler:function(k,m,w,p,A,C){try{var z=[];a.forEach(k.geometries,function(q){z.push(h.fromJson(q).setSpatialReference(w))});
this._successHandler([z],"onDensifyComplete",p,C)}catch(q){this._errorHandler(q,A,C)}},onDensifyComplete:function(){},generalize:function(k,m,w){var p=y.mixin({},this._url.query,{f:"json"},k.toJson()),A=k.geometries[0].spatialReference,C=this._generalizeHandler,z=this._errorHandler,q=new n(d._dfdCanceller);q._pendingDfd=l({url:this._url.path+"/generalize",content:p,callbackParamName:"callback",load:function(v,B){C(v,B,A,m,w,q)},error:function(v){z(v,w,q)}});return q},_generalizeHandler:function(k,
m,w,p,A,C){try{var z=[];a.forEach(k.geometries,function(q){z.push(h.fromJson(q).setSpatialReference(w))});this._successHandler([z],"onGeneralizeComplete",p,C)}catch(q){this._errorHandler(q,A,C)}},onGeneralizeComplete:function(){},offset:function(k,m,w){var p=y.mixin({},this._url.query,{f:"json"},k.toJson()),A=k.geometries[0].spatialReference,C=this._offsetHandler,z=this._errorHandler,q=new n(d._dfdCanceller);q._pendingDfd=l({url:this._url.path+"/offset",content:p,callbackParamName:"callback",load:function(v,
B){C(v,B,A,m,w,q)},error:function(v){z(v,w,q)}});return q},_offsetHandler:function(k,m,w,p,A,C){try{var z=[];a.forEach(k.geometries,function(q){z.push(h.fromJson(q).setSpatialReference(w))});this._successHandler([z],"onOffsetComplete",p,C)}catch(q){this._errorHandler(q,A,C)}},onOffsetComplete:function(){},distance:function(k,m,w){var p=y.mixin({},this._url.query,{f:"json"},k.toJson()),A=k.geometry1.spatialReference,C=this._distanceHandler,z=this._errorHandler,q=new n(d._dfdCanceller);q._pendingDfd=
l({url:this._url.path+"/distance",content:p,callbackParamName:"callback",load:function(v,B){C(v,B,A,m,w,q)},error:function(v){z(v,w,q)}});return q},_distanceHandler:function(k,m,w,p,A,C){try{k=k&&k.distance,this._successHandler([k],"onDistanceComplete",p,C)}catch(z){this._errorHandler(z,A,C)}},onDistanceComplete:function(){},toGeoCoordinateString:function(k,m,w){var p={};y.isObject(k.sr)?p.sr=k.sr.wkid||u.toJson(k.sr.toJson()):p.sr=k.sr;p.coordinates=u.toJson(k.coordinates);p.conversionType=k.conversionType||
"MGRS";p.conversionMode=k.conversionMode;p.numOfDigits=k.numOfDigits;p.rounding=k.rounding;p.addSpaces=k.addSpaces;k=y.mixin({},this._url.query,{f:"json"},p);var A=this._toGeoCoordinateHandler,C=this._errorHandler,z=new n(d._dfdCanceller);z._pendingDfd=l({url:this._url.path+"/toGeoCoordinateString",content:k,callbackParamName:"callback",load:function(q,v){A(q,v,m,w,z)},error:function(q){C(q,w,z)}});return z},_toGeoCoordinateHandler:function(k,m,w,p,A){try{this._successHandler([k.strings],"onToGeoCoordinateStringComplete",
w,A)}catch(C){this._errorHandler(C,p,A)}},onToGeoCoordinateStringComplete:function(){},fromGeoCoordinateString:function(k,m,w){var p={};y.isObject(k.sr)?p.sr=k.sr.wkid||u.toJson(k.sr.toJson()):p.sr=k.sr;p.strings=u.toJson(k.strings);p.conversionType=k.conversionType||"MGRS";p.conversionMode=k.conversionMode;k=y.mixin({},this._url.query,{f:"json"},p);var A=this._fromGeoCoordinateHandler,C=this._errorHandler,z=new n(d._dfdCanceller);z._pendingDfd=l({url:this._url.path+"/fromGeoCoordinateString",content:k,
callbackParamName:"callback",load:function(q,v){A(q,v,m,w,z)},error:function(q){C(q,w,z)}});return z},_fromGeoCoordinateHandler:function(k,m,w,p,A){try{this._successHandler([k.coordinates],"onToGeoCoordinateStringComplete",w,A)}catch(C){this._errorHandler(C,p,A)}},onFromGeoCoordinateStringComplete:function(){}});y.mixin(F,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,
UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,
UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,
UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",
UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});t("extend-esri")&&y.setObject("tasks.GeometryService",F,r);return F})},"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\ttabIndex\x3d"-1" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\r\n/\x3e\x3c/span\x3e\r\n',
"url:dijit/form/templates/DropDownButton.html":'\x3cspan class\x3d"dijit dijitReset dijitInline"\r\n\t\x3e\x3cspan class\x3d\'dijitReset dijitInline dijitButtonNode\'\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" data-dojo-attach-point\x3d"_buttonNode"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon"\r\n\t\t\t\tdata-dojo-attach-point\x3d"iconNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonInner"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonChar"\x3e\x26#9660;\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen" tabIndex\x3d"-1"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick" data-dojo-attach-point\x3d"valueNode" aria-hidden\x3d"true"\r\n/\x3e\x3c/span\x3e\r\n',
"url:dijit/form/templates/ComboButton.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tcellspacing\x3d\'0\' cellpadding\x3d\'0\' role\x3d"presentation"\r\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point\x3d"buttonNode" data-dojo-attach-event\x3d"ondijitclick:__onClick,onkeydown:_onButtonKeyDown"\r\n\t\t\x3e\x3cdiv id\x3d"${id}_button" class\x3d"dijitReset dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitButtonText" id\x3d"${id}_label" data-dojo-attach-point\x3d"containerNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd id\x3d"${id}_arrow" class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\r\n\t\t\tdata-dojo-attach-point\x3d"_popupStateNode,focusNode,_buttonNode"\r\n\t\t\tdata-dojo-attach-event\x3d"onkeydown:_onArrowKeyDown"\r\n\t\t\ttitle\x3d"${optionsTitle}"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonInner" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonChar" role\x3d"presentation"\x3e\x26#9660;\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd style\x3d"display:none !important;"\r\n\t\t\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" data-dojo-attach-point\x3d"valueNode"\r\n\t\t\t\tclass\x3d"dijitOffScreen" aria-hidden\x3d"true" data-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\t/\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\r\n\x3e\x3c/table\x3e\r\n',
"url:dijit/templates/TooltipDialog.html":'\x3cdiv role\x3d"alertdialog" tabIndex\x3d"-1"\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"contentsNode" class\x3d"dijitTooltipContents dijitTooltipFocusNode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n\t\t\t${!actionBarTemplate}\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipConnector" role\x3d"presentation" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/core/request/iframe.html":'\x3c!DOCTYPE html\x3e\r\n\x3chtml\x3e\r\n\x3chead\x3e\r\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\r\n\r\n  \x3cscript\x3e\r\n    var dojoConfig \x3d {\r\n      async: true,\r\n      baseUrl: "../../../dojo/",\r\n      has: {\r\n        "csp-restrictions": true,\r\n        "dojo-preload-i18n-Api": false\r\n      }\r\n    };\r\n  \x3c/script\x3e\r\n  \x3c!--\r\n  This src is relative to this page and assumes dojo is a sibling to esri.\r\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\r\n  --\x3e\r\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\r\n\r\n  \x3cscript\x3e\r\n    function windowMessageHandler(event) {\r\n      window.removeEventListener("message", windowMessageHandler);\r\n\r\n      var port \x3d event.ports[0];\r\n\r\n      require([\r\n        "dojo/request/script"\r\n      ], function(script) {\r\n        port.postMessage("ready");\r\n\r\n        port.addEventListener("message", function(event) {\r\n          var data \x3d event.data;\r\n          script.get(data.url, data.options)\r\n              .then(function(response) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  response: response\r\n                });\r\n              })\r\n              .otherwise(function(error) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  isError: true,\r\n                  message: error.message\r\n                });\r\n              });\r\n        });\r\n        port.start();\r\n      });\r\n    }\r\n\r\n    window.addEventListener("message", windowMessageHandler);\r\n  \x3c/script\x3e\r\n\x3c/head\x3e\r\n\x3cbody\x3e\r\n\x3c/body\x3e\r\n\x3c/html\x3e\r\n',
"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"url:dijit/form/templates/TextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',"url:dijit/templates/Tooltip.html":'\x3cdiv class\x3d"dijitTooltip dijitTooltipLeft" id\x3d"dojoTooltip" data-dojo-attach-event\x3d"mouseenter:onMouseEnter,mouseleave:onMouseLeave"\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipConnector" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point\x3d"containerNode" role\x3d\'alert\'\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:dijit/form/templates/ValidationTextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"*now":function(F){F(['dojo/i18n!*preload*esri/nls/jsapi*["ar","bg","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("esri/jsapi","dojo/fx/Toggler dojo/_base/html dijit/_base dijit/form/DropDownButton dijit/form/ComboButton dijit/form/ToggleButton dijit/_base/manager dijit/TooltipDialog ./main ./map ./geometry ./symbol ./renderer ./utils ./IdentityManager ./layers/graphics ./layers/agstiled ./layers/agsdynamic ./layers/FeatureLayer ./dijit/PopupTemplate ./dijit/PopupRenderer ./dijit/Attribution ./arcgis/utils ./tasks/query ./tasks/QueryTask ./tasks/RelationshipQuery ./tasks/StatisticDefinition".split(" "),function(){return{}});